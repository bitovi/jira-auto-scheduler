{"version":3,"file":"main-McwzsJsw.js","sources":["../can.js","../helpers.js","../shared/jstat.js","../shared/confidence.js","../work-plans.js","../schedule-prepare-issues.js","../shared/dateUtils.js","../shared/issue-cleanup.js","../shared/state-storage.js","../json-logic/json-logic.js","../components/configure-json-logic/configure-json-logic.js","../shared/simple-tooltip.js","../shared/autocomplete/autocomplete.js","../jira-configure-csv.js","../jira-config.js","../schedule.js","../simulation-data.js","../monte-carlo.js","../estimation-progress-report.js","../jira-oidc-helpers.js","../jira-auto-scheduler.js","../jira-login.js","../shared/select-cloud.js","../main.js"],"sourcesContent":["(function(global, env) {\n\t// jshint ignore:line\n\tif (typeof process === \"undefined\") {\n\t\tglobal.process = {\n\t\t\targv: [],\n\t\t\tcwd: function() {\n\t\t\t\treturn \"\";\n\t\t\t},\n\t\t\tbrowser: true,\n\t\t\tenv: {\n\t\t\t\tNODE_ENV: env || \"development\"\n\t\t\t},\n\t\t\tversion: \"\",\n\t\t\tplatform:\n\t\t\t\tglobal.navigator &&\n\t\t\t\tglobal.navigator.userAgent &&\n\t\t\t\t/Windows/.test(global.navigator.userAgent)\n\t\t\t\t\t? \"win\"\n\t\t\t\t\t: \"\"\n\t\t};\n\t}\n})(\n\ttypeof self == \"object\" && self.Object == Object\n\t\t? self\n\t\t: typeof process === \"object\" &&\n\t\t  Object.prototype.toString.call(process) === \"[object process]\"\n\t\t\t? global\n\t\t\t: window,\n\t\"development\"\n);\n\nvar canNamespace_1_0_0_canNamespace = {};\n\nvar supportsNativeSymbols = (function() {\n\tvar symbolExists = typeof Symbol !== \"undefined\" && typeof Symbol.for === \"function\";\n\n\tif (!symbolExists) {\n\t\treturn false;\n\t}\n\n\tvar symbol = Symbol(\"a symbol for testing symbols\");\n\treturn typeof symbol === \"symbol\";\n}());\n\nvar CanSymbol;\nif(supportsNativeSymbols) {\n\tCanSymbol = Symbol;\n} else {\n\n\tvar symbolNum = 0;\n\tCanSymbol = function CanSymbolPolyfill(description){\n\t\tvar symbolValue = \"@@symbol\"+(symbolNum++)+(description);\n\n\t\tvar symbol = {}; // make it object type\n\n\t\tObject.defineProperties(symbol, {\n\t\t\ttoString: {\n\t\t\t\tvalue: function(){\n\t\t\t\t\treturn symbolValue;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn symbol;\n\t};\n\n\tvar descriptionToSymbol = {};\n\tvar symbolToDescription = {};\n\n\t/**\n\t * @function can-symbol.for for\n\t * @parent  can-symbol/methods\n\t * @description  Get a symbol based on a known string identifier, or create it if it doesn't exist.\n\t *\n\t * @signature `canSymbol.for(String)`\n\t *\n\t * @param { String } description  The string value of the symbol\n\t * @return { CanSymbol } The globally unique and consistent symbol with the given string value.\n\t */\n\tCanSymbol.for = function(description){\n\t\tvar symbol = descriptionToSymbol[description];\n\t\tif(!symbol) {\n\t\t\tsymbol = descriptionToSymbol[description] = CanSymbol(description);\n\t\t\tsymbolToDescription[symbol] = description;\n\t\t}\n\t\treturn symbol;\n\t};\n\t/**\n\t * @function can-symbol.keyFor keyFor\n\t * @parent  can-symbol\n\t * @description  Get the description for a symbol.\n\t *\n\t * @signature `canSymbol.keyFor(CanSymbol)`\n\t *\n\t * @param { String } description  The string value of the symbol\n\t * @return { CanSymbol } The globally unique and consistent symbol with the given string value.\n\t */\n\tCanSymbol.keyFor = function(symbol) {\n\t\treturn symbolToDescription[symbol];\n\t};\n\t[\"hasInstance\",\"isConcatSpreadable\",\n\t\t\"iterator\",\"match\",\"prototype\",\"replace\",\"search\",\"species\",\"split\",\n\t\"toPrimitive\",\"toStringTag\",\"unscopables\"].forEach(function(name){\n\t\tCanSymbol[name] = CanSymbol(\"Symbol.\"+name);\n\t});\n}\n\n// Generate can. symbols.\n[\n\t// ======= Type detection ==========\n\t\"isMapLike\",\n\t\"isListLike\",\n\t\"isValueLike\",\n\t\"isFunctionLike\",\n\t\"isScopeLike\",\n\t// ======= Shape detection =========\n\t\"getOwnKeys\",\n\t\"getOwnKeyDescriptor\",\n\t\"proto\",\n\t// optional\n\t\"getOwnEnumerableKeys\",\n\t\"hasOwnKey\",\n\t\"hasKey\",\n\t\"size\",\n\t\"getName\",\n\t\"getIdentity\",\n\n\t// shape manipulation\n\t\"assignDeep\",\n\t\"updateDeep\",\n\n\t// ======= GET / SET\n\t\"getValue\",\n\t\"setValue\",\n\t\"getKeyValue\",\n\t\"setKeyValue\",\n\t\"updateValues\",\n\t\"addValue\",\n\t\"removeValues\",\n\t// ======= Call =========\n\t\"apply\",\n\t\"new\",\n\t// ======= Observe =========\n\t\"onValue\",\n\t\"offValue\",\n\t\"onKeyValue\",\n\t\"offKeyValue\",\n\t\"getKeyDependencies\",\n\t\"getValueDependencies\",\n\t\"keyHasDependencies\",\n\t\"valueHasDependencies\",\n\t\"onKeys\",\n\t\"onKeysAdded\",\n\t\"onKeysRemoved\",\n\t\"onPatches\"\n\t].forEach(function(name){\n\tCanSymbol.for(\"can.\"+name);\n});\n\nvar canSymbol_1_7_0_canSymbol = canNamespace_1_0_0_canNamespace.Symbol = CanSymbol;\n\nvar helpers = {\n\tmakeGetFirstSymbolValue: function(symbolNames){\n\t\tvar symbols = symbolNames.map(function(name){\n\t\t\treturn canSymbol_1_7_0_canSymbol.for(name);\n\t\t});\n\t\tvar length = symbols.length;\n\n\t\treturn function getFirstSymbol(obj){\n\t\t\tvar index = -1;\n\n\t\t\twhile (++index < length) {\n\t\t\t\tif(obj[symbols[index]] !== undefined) {\n\t\t\t\t\treturn obj[symbols[index]];\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t},\n\t// The `in` check is from jQuery’s fix for an iOS 8 64-bit JIT object length bug:\n\t// https://github.com/jquery/jquery/pull/2185\n\thasLength: function(list){\n\t\tvar type = typeof list;\n\t\tif(type === \"string\" || Array.isArray(list)) {\n\t\t\treturn true;\n\t\t}\n\t\tvar length = list && (type !== 'boolean' && type !== 'number' && \"length\" in list) && list.length;\n\n\t\t// var length = \"length\" in obj && obj.length;\n\t\treturn typeof list !== \"function\" &&\n\t\t\t( length === 0 || typeof length === \"number\" && length > 0 && ( length - 1 ) in list );\n\t}\n};\n\nvar plainFunctionPrototypePropertyNames = Object.getOwnPropertyNames((function(){}).prototype);\nvar plainFunctionPrototypeProto = Object.getPrototypeOf( (function(){}).prototype );\n/**\n * @function can-reflect.isConstructorLike isConstructorLike\n * @parent can-reflect/type\n *\n * @description Test if a value looks like a constructor function.\n *\n * @signature `isConstructorLike(func)`\n *\n * Return `true` if `func` is a function and has a non-empty prototype, or implements\n *  [can-symbol/symbols/new `@@@@can.new`]; `false` otherwise.\n *\n * ```js\n * canReflect.isConstructorLike(function() {}); // -> false\n *\n * function Construct() {}\n * Construct.prototype = { foo: \"bar\" };\n * canReflect.isConstructorLike(Construct); // -> true\n *\n * canReflect.isConstructorLike({}); // -> false\n * !!canReflect.isConstructorLike({ [canSymbol.for(\"can.new\")]: function() {} }); // -> true\n * ```\n *\n * @param  {*}  func maybe a function\n * @return {Boolean} `true` if a constructor; `false` if otherwise.\n */\nfunction isConstructorLike(func){\n\t/* jshint unused: false */\n\t// if you can new it ... it's a constructor\n\tvar value = func[canSymbol_1_7_0_canSymbol.for(\"can.new\")];\n\tif(value !== undefined) {\n\t\treturn value;\n\t}\n\n\tif(typeof func !== \"function\") {\n\t\treturn false;\n\t}\n\t// If there are any properties on the prototype that don't match\n\t// what is normally there, assume it's a constructor\n\tvar prototype = func.prototype;\n\tif(!prototype) {\n\t\treturn false;\n\t}\n\t// Check if the prototype's proto doesn't point to what it normally would.\n\t// If it does, it means someone is messing with proto chains\n\tif( plainFunctionPrototypeProto !== Object.getPrototypeOf( prototype ) ) {\n\t\treturn true;\n\t}\n\n\tvar propertyNames = Object.getOwnPropertyNames(prototype);\n\tif(propertyNames.length === plainFunctionPrototypePropertyNames.length) {\n\t\tfor(var i = 0, len = propertyNames.length; i < len; i++) {\n\t\t\tif(propertyNames[i] !== plainFunctionPrototypePropertyNames[i]) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t} else {\n\t\treturn true;\n\t}\n}\n\n/**\n * @function can-reflect.isFunctionLike isFunctionLike\n * @parent can-reflect/type\n * @description Test if a value looks like a function.\n * @signature `isFunctionLike(obj)`\n *\n *  Return `true` if `func` is a function, or implements\n *  [can-symbol/symbols/new `@@@@can.new`] or [can-symbol/symbols/apply `@@@@can.apply`]; `false` otherwise.\n *\n * ```js\n * canReflect.isFunctionLike(function() {}); // -> true\n * canReflect.isFunctionLike({}); // -> false\n * canReflect.isFunctionLike({ [canSymbol.for(\"can.apply\")]: function() {} }); // -> true\n * ```\n *\n * @param  {*}  obj maybe a function\n * @return {Boolean}\n */\nvar getNewOrApply = helpers.makeGetFirstSymbolValue([\"can.new\",\"can.apply\"]);\nfunction isFunctionLike(obj){\n\tvar result,\n\t\tsymbolValue = !!obj && obj[canSymbol_1_7_0_canSymbol.for(\"can.isFunctionLike\")];\n\n\tif (symbolValue !== undefined) {\n\t\treturn symbolValue;\n\t}\n\n\tresult = getNewOrApply(obj);\n\tif(result !== undefined) {\n\t\treturn !!result;\n\t}\n\n\treturn typeof obj === \"function\";\n}\n\n/**\n * @function can-reflect.isPrimitive isPrimitive\n * @parent can-reflect/type\n * @description Test if a value is a JavaScript primitive.\n * @signature `isPrimitive(obj)`\n *\n * Return `true` if `obj` is not a function nor an object via `typeof`, or is null; `false` otherwise.\n *\n * ```js\n * canReflect.isPrimitive(null); // -> true\n * canReflect.isPrimitive({}); // -> false\n * canReflect.isPrimitive(undefined); // -> true\n * canReflect.isPrimitive(1); // -> true\n * canReflect.isPrimitive([]); // -> false\n * canReflect.isPrimitive(function() {}); // -> false\n * canReflect.isPrimitive(\"foo\"); // -> true\n *\n * ```\n *\n * @param  {*}  obj maybe a primitive value\n * @return {Boolean}\n */\nfunction isPrimitive(obj){\n\tvar type = typeof obj;\n\tif(obj == null || (type !== \"function\" && type !== \"object\") ) {\n\t\treturn true;\n\t}\n\telse {\n\t\treturn false;\n\t}\n}\n\nvar coreHasOwn = Object.prototype.hasOwnProperty;\nvar funcToString = Function.prototype.toString;\nvar objectCtorString = funcToString.call(Object);\n\nfunction isPlainObject(obj) {\n\t// Must be an Object.\n\t// Because of IE, we also have to check the presence of the constructor property.\n\t// Make sure that DOM nodes and window objects don't pass through, as well\n\tif (!obj || typeof obj !== 'object' ) {\n\t\treturn false;\n\t}\n\tvar proto = Object.getPrototypeOf(obj);\n\tif(proto === Object.prototype || proto === null) {\n\t\treturn true;\n\t}\n\t// partially inspired by lodash: https://github.com/lodash/lodash\n\tvar Constructor = coreHasOwn.call(proto, 'constructor') && proto.constructor;\n\treturn typeof Constructor === 'function' && Constructor instanceof Constructor &&\n    \tfuncToString.call(Constructor) === objectCtorString;\n}\n\n/**\n * @function can-reflect.isBuiltIn isBuiltIn\n * @parent can-reflect/type\n * @description Test if a value is a JavaScript built-in type.\n * @signature `isBuiltIn(obj)`\n *\n * Return `true` if `obj` is some type of JavaScript native built-in; `false` otherwise.\n *\n * ```js\n * canReflect.isBuiltIn(null); // -> true\n * canReflect.isBuiltIn({}); // -> true\n * canReflect.isBuiltIn(1); // -> true\n * canReflect.isBuiltIn([]); // -> true\n * canReflect.isBuiltIn(function() {}); // -> true\n * canReflect.isBuiltIn(\"foo\"); // -> true\n * canReflect.isBuiltIn(new Date()); // -> true\n * canReflect.isBuiltIn(/[foo].[bar]/); // -> true\n * canReflect.isBuiltIn(new DefineMap); // -> false\n *\n * ```\n *\n * Not supported in browsers that have implementations of Map/Set where\n * `toString` is not properly implemented to return `[object Map]`/`[object Set]`.\n *\n * @param  {*}  obj maybe a built-in value\n * @return {Boolean}\n */\nfunction isBuiltIn(obj) {\n\n\t// If primitive, array, or POJO return true. Also check if\n\t// it is not a POJO but is some type like [object Date] or\n\t// [object Regex] and return true.\n\tif (isPrimitive(obj) ||\n\t\tArray.isArray(obj) ||\n\t\tisPlainObject(obj) ||\n\t\t(Object.prototype.toString.call(obj) !== '[object Object]' &&\n\t\t\tObject.prototype.toString.call(obj).indexOf('[object ') !== -1)) {\n\t\treturn true;\n\t}\n\telse {\n\t\treturn false;\n\t}\n}\n\n/**\n * @function can-reflect.isValueLike isValueLike\n * @parent can-reflect/type\n * @description Test if a value represents a single value (as opposed to several values).\n *\n * @signature `isValueLike(obj)`\n *\n * Return `true` if `obj` is a primitive or implements [can-symbol/symbols/getValue `@@can.getValue`],\n * `false` otherwise.\n *\n * ```js\n * canReflect.isValueLike(null); // -> true\n * canReflect.isValueLike({}); // -> false\n * canReflect.isValueLike(function() {}); // -> false\n * canReflect.isValueLike({ [canSymbol.for(\"can.isValueLike\")]: true}); // -> true\n * canReflect.isValueLike({ [canSymbol.for(\"can.getValue\")]: function() {} }); // -> true\n * canReflect.isValueLike(canCompute()); // -> true\n * canReflect.isValueLike(new DefineMap()); // -> false\n *\n * ```\n *\n * @param  {*}  obj maybe a primitive or an object that yields a value\n * @return {Boolean}\n */\nfunction isValueLike(obj) {\n\tvar symbolValue;\n\tif(isPrimitive(obj)) {\n\t\treturn true;\n\t}\n\tsymbolValue = obj[canSymbol_1_7_0_canSymbol.for(\"can.isValueLike\")];\n\tif( typeof symbolValue !== \"undefined\") {\n\t\treturn symbolValue;\n\t}\n\tvar value = obj[canSymbol_1_7_0_canSymbol.for(\"can.getValue\")];\n\tif(value !== undefined) {\n\t\treturn !!value;\n\t}\n}\n\n/**\n * @function can-reflect.isMapLike isMapLike\n * @parent can-reflect/type\n *\n * @description Test if a value represents multiple values.\n *\n * @signature `isMapLike(obj)`\n *\n * Return `true` if `obj` is _not_ a primitive, does _not_ have a falsy value for\n * [can-symbol/symbols/isMapLike `@@@@can.isMapLike`], or alternately implements\n * [can-symbol/symbols/getKeyValue `@@@@can.getKeyValue`]; `false` otherwise.\n *\n * ```js\n * canReflect.isMapLike(null); // -> false\n * canReflect.isMapLike(1); // -> false\n * canReflect.isMapLike(\"foo\"); // -> false\n * canReflect.isMapLike({}); // -> true\n * canReflect.isMapLike(function() {}); // -> true\n * canReflect.isMapLike([]); // -> false\n * canReflect.isMapLike({ [canSymbol.for(\"can.isMapLike\")]: false }); // -> false\n * canReflect.isMapLike({ [canSymbol.for(\"can.getKeyValue\")]: null }); // -> false\n * canReflect.isMapLike(canCompute()); // -> false\n * canReflect.isMapLike(new DefineMap()); // -> true\n *\n * ```\n *\n * @param  {*}  obj maybe a Map-like\n * @return {Boolean}\n */\nfunction isMapLike(obj) {\n\tif(isPrimitive(obj)) {\n\t\treturn false;\n\t}\n\tvar isMapLike = obj[canSymbol_1_7_0_canSymbol.for(\"can.isMapLike\")];\n\tif(typeof isMapLike !== \"undefined\") {\n\t\treturn !!isMapLike;\n\t}\n\tvar value = obj[canSymbol_1_7_0_canSymbol.for(\"can.getKeyValue\")];\n\tif(value !== undefined) {\n\t\treturn !!value;\n\t}\n\t// everything else in JS is MapLike\n\treturn true;\n}\n\n/**\n * @function can-reflect.isObservableLike isObservableLike\n * @parent can-reflect/type\n * @description Test if a value (or its keys) can be observed for changes.\n *\n * @signature `isObservableLike(obj)`\n *\n * Return  `true` if `obj` is _not_ a primitive and implements any of\n * [can-symbol/symbols/onValue `@@@@can.onValue`], [can-symbol/symbols/onKeyValue `@@@@can.onKeyValue`], or\n * [can-symbol/symbols/onPatches `@@@@can.onKeys`]; `false` otherwise.\n *\n * ```js\n * canReflect.isObservableLike(null); // -> false\n * canReflect.isObservableLike({}); // -> false\n * canReflect.isObservableLike([]); // -> false\n * canReflect.isObservableLike(function() {}); // -> false\n * canReflect.isObservableLike({ [canSymbol.for(\"can.onValue\")]: function() {} }); // -> true\n * canReflect.isObservableLike({ [canSymbol.for(\"can.onKeyValue\")]: function() {} }); // -> true\n * canReflect.isObservableLike(canCompute())); // -> true\n * canReflect.isObservableLike(new DefineMap())); // -> true\n * ```\n *\n * @param  {*}  obj maybe an observable\n * @return {Boolean}\n */\n\n// Specially optimized\nvar onValueSymbol = canSymbol_1_7_0_canSymbol.for(\"can.onValue\"),\n\tonKeyValueSymbol = canSymbol_1_7_0_canSymbol.for(\"can.onKeyValue\"),\n\tonPatchesSymbol = canSymbol_1_7_0_canSymbol.for(\"can.onPatches\");\nfunction isObservableLike( obj ) {\n\tif(isPrimitive(obj)) {\n\t\treturn false;\n\t}\n\treturn Boolean(obj[onValueSymbol] || obj[onKeyValueSymbol] || obj[onPatchesSymbol]);\n}\n\n/**\n * @function can-reflect.isListLike isListLike\n * @parent can-reflect/type\n *\n * @description Test if a value looks like a constructor function.\n *\n * @signature `isListLike(list)`\n *\n * Return `true` if `list` is a `String`, <br>OR `list` is _not_ a primitive and implements `@@@@iterator`,\n * <br>OR `list` is _not_ a primitive and returns `true` for `Array.isArray()`, <br>OR `list` is _not_ a primitive and has a\n * numerical length and is either empty (`length === 0`) or has a last element at index `length - 1`; <br>`false` otherwise\n *\n * ```js\n * canReflect.isListLike(null); // -> false\n * canReflect.isListLike({}); // -> false\n * canReflect.isListLike([]); // -> true\n * canReflect.isListLike(\"foo\"); // -> true\n * canReflect.isListLike(1); // -> false\n * canReflect.isListLike({ [canSymbol.for(\"can.isListLike\")]: true }); // -> true\n * canReflect.isListLike({ [canSymbol.iterator]: function() {} }); // -> true\n * canReflect.isListLike({ length: 0 }); // -> true\n * canReflect.isListLike({ length: 3 }); // -> false\n * canReflect.isListLike({ length: 3, \"2\": true }); // -> true\n * canReflect.isListLike(new DefineMap()); // -> false\n * canReflect.isListLike(new DefineList()); // -> true\n * ```\n *\n * @param  {*}  list maybe a List-like\n * @return {Boolean}\n */\nfunction isListLike( list ) {\n\tvar symbolValue,\n\t\ttype = typeof list;\n\tif(type === \"string\") {\n\t\treturn true;\n\t}\n\tif( isPrimitive(list) ) {\n\t\treturn false;\n\t}\n\tsymbolValue = list[canSymbol_1_7_0_canSymbol.for(\"can.isListLike\")];\n\tif( typeof symbolValue !== \"undefined\") {\n\t\treturn symbolValue;\n\t}\n\tvar value = list[canSymbol_1_7_0_canSymbol.iterator];\n\tif(value !== undefined) {\n\t\treturn !!value;\n\t}\n\tif(Array.isArray(list)) {\n\t\treturn true;\n\t}\n\treturn helpers.hasLength(list);\n}\n\n/**\n * @function can-reflect.isSymbolLike isSymbolLike\n * @parent can-reflect/type\n *\n * @description Test if a value is a symbol or a [can-symbol].\n *\n * @signature `isSymbolLike(symbol)`\n *\n * Return `true` if `symbol` is a native Symbol, or evaluates to a String with a prefix\n * equal to that of CanJS's symbol polyfill; `false` otherwise.\n *\n * ```js\n * /* ES6 *\\/ canReflect.isSymbolLike(Symbol.iterator); // -> true\n * canReflect.isSymbolLike(canSymbol.for(\"foo\")); // -> true\n * canReflect.isSymbolLike(\"@@symbol.can.isSymbol\"); // -> true (due to polyfill for non-ES6)\n * canReflect.isSymbolLike(\"foo\"); // -> false\n * canReflect.isSymbolLike(null); // -> false\n * canReflect.isSymbolLike(1); // -> false\n * canReflect.isSymbolLike({}); // -> false\n * canReflect.isSymbolLike({ toString: function() { return \"@@symbol.can.isSymbol\"; } }); // -> true\n * ```\n *\n * @param  {*}  symbol maybe a symbol\n * @return {Boolean}\n */\n\nvar supportsNativeSymbols$1 = (function() {\n\tvar symbolExists = typeof Symbol !== \"undefined\" && typeof Symbol.for === \"function\";\n\n\tif (!symbolExists) {\n\t\treturn false;\n\t}\n\n\tvar symbol = Symbol(\"a symbol for testing symbols\");\n\treturn typeof symbol === \"symbol\";\n}());\n\nvar isSymbolLike;\nif(supportsNativeSymbols$1) {\n\tisSymbolLike = function(symbol) {\n\t\treturn typeof symbol === \"symbol\";\n\t};\n} else {\n\tvar symbolStart = \"@@symbol\";\n\tisSymbolLike = function(symbol) {\n\t\tif(typeof symbol === \"object\" && !Array.isArray(symbol)){\n\t\t\treturn symbol.toString().substr(0, symbolStart.length) === symbolStart;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t};\n}\n\n/**\n * @function can-reflect.isScopeLike isScopeLike\n * @parent can-reflect/type\n *\n * @description Test if a value represents a can.view.Scope or its API equivalent\n *\n * @signature `isScopeLike(obj)`\n *\n * Return `true` if `obj` is _not_ a primitive, does _not_ have a falsy value for\n * [can-symbol/symbols/isScopeLike `@@@@can.isScopeLike`], or implements the public \n * API of [can-view-scope] along with `_context` and `_meta` objects; `false` otherwise.\n *\n * ```js\n * canReflect.isScopeLike(null); // -> false\n * canReflect.isScopeLike(1); // -> false\n * canReflect.isScopeLike(\"foo\"); // -> false\n * canReflect.isScopeLike({}); // -> false\n * canReflect.isScopeLike(function() {}); // -> false\n * canReflect.isScopeLike([]); // -> false\n * canReflect.isScopeLike({ [canSymbol.for(\"can.isScopeLike\")]: true }); // -> true\n * canReflect.isScopeLike({\n *   get(){}, set(){}, find(){}, peek(){}, computeData(){}, add(){}, getScope(){},\n *   getHelperOrPartial(){}, getTemplateContext(), addLetContext(){}, cloneFromRef(){},\n *   _meta: {}, _context: {}\n * }); // -> true\n * canReflect.isScopeLike(new can.view.Scope()); // -> true\n *\n * ```\n *\n * @param  {*}  obj maybe a Map-like\n * @return {Boolean}\n */\n// note:  older can 2.x scopes do not implement find() or addLetContext() but these are required by later can-stache, so passing \n//   this function is not a guarantee of interoperability.\nvar fnKeys = [\"get\", \"set\", \"peek\", \"computeData\", \"add\", \"getScope\", \"getHelperOrPartial\", \"getTemplateContext\", \"cloneFromRef\"];\nfunction isScopeLike(obj) {\n\tif(isPrimitive(obj)) {\n\t\treturn false;\n\t}\n\tvar isScopeLike = obj[canSymbol_1_7_0_canSymbol.for(\"can.isScopeLike\")];\n\tif(typeof isScopeLike !== \"undefined\") {\n\t\treturn !!isScopeLike;\n\t}\n\treturn fnKeys.every(function(key) { return typeof obj[key] === \"function\"; }) &&\n\t\t\"_context\" in obj &&\n\t\tobj._meta && typeof obj._meta === \"object\";\n}\n\n\nvar type = {\n\tisConstructorLike: isConstructorLike,\n\tisFunctionLike: isFunctionLike,\n\tisListLike: isListLike,\n\tisMapLike: isMapLike,\n\tisObservableLike: isObservableLike,\n\tisScopeLike: isScopeLike,\n\tisPrimitive: isPrimitive,\n\tisBuiltIn: isBuiltIn,\n\tisValueLike: isValueLike,\n\tisSymbolLike: isSymbolLike,\n\t/**\n\t * @function can-reflect.isMoreListLikeThanMapLike isMoreListLikeThanMapLike\n\t * @parent can-reflect/type\n\t *\n\t * @description Test if a value should be treated as a list instead of a map.\n\t *\n\t * @signature `isMoreListLikeThanMapLike(obj)`\n\t *\n\t * Return  `true` if `obj` is an Array, declares itself to be more ListLike with\n\t * `@@@@can.isMoreListLikeThanMapLike`, or self-reports as ListLike but not as MapLike; `false` otherwise.\n\t *\n\t * ```js\n\t * canReflect.isMoreListLikeThanMapLike([]); // -> true\n\t * canReflect.isMoreListLikeThanMapLike(null); // -> false\n\t * canReflect.isMoreListLikeThanMapLike({}); // -> false\n\t * canReflect.isMoreListLikeThanMapLike(new DefineList()); // -> true\n\t * canReflect.isMoreListLikeThanMapLike(new DefineMap()); // -> false\n\t * canReflect.isMoreListLikeThanMapLike(function() {}); // -> false\n\t * ```\n\t *\n\t * @param  {Object}  obj the object to test for ListLike against MapLike traits.\n\t * @return {Boolean}\n\t */\n\tisMoreListLikeThanMapLike: function(obj){\n\t\tif(Array.isArray(obj)) {\n\t\t\treturn true;\n\t\t}\n\t\tif(obj instanceof Array) {\n\t\t\treturn true;\n\t\t}\n\t\tif( obj == null ) {\n\t\t\treturn false;\n\t\t}\n\t\tvar value = obj[canSymbol_1_7_0_canSymbol.for(\"can.isMoreListLikeThanMapLike\")];\n\t\tif(value !== undefined) {\n\t\t\treturn value;\n\t\t}\n\t\tvar isListLike = this.isListLike(obj),\n\t\t\tisMapLike = this.isMapLike(obj);\n\t\tif(isListLike && !isMapLike) {\n\t\t\treturn true;\n\t\t} else if(!isListLike && isMapLike) {\n\t\t\treturn false;\n\t\t}\n\t},\n\t/**\n\t * @function can-reflect.isIteratorLike isIteratorLike\n\t * @parent can-reflect/type\n\t * @description Test if a value looks like an iterator.\n\t * @signature `isIteratorLike(obj)`\n\t *\n\t * Return `true` if `obj` has a key `\"next\"` pointing to a zero-argument function; `false` otherwise\n\t *\n\t * ```js\n\t * canReflect.isIteratorLike([][Symbol.iterator]()); // -> true\n\t * canReflect.isIteratorLike(new DefineList()[canSymbol.iterator]()); // -> true\n\t * canReflect.isIteratorLike(new DefineMap()[canSymbol.iterator]()); // -> true\n\t * canReflect.isIteratorLike(null); // -> false\n\t * canReflect.isIteratorLike({ next: function() {} }); // -> true\n\t * canReflect.isIteratorLike({ next: function(foo) {} }); // -> false (iterator nexts do not take arguments)\n\t * ```\n\t *\n\t * @param  {Object}  obj the object to test for Iterator traits\n\t * @return {Boolean}\n\t */\n\tisIteratorLike: function(obj){\n\t\treturn obj &&\n\t\t\ttypeof obj === \"object\" &&\n\t\t\ttypeof obj.next === \"function\" &&\n\t\t\tobj.next.length === 0;\n\t},\n\t/**\n\t * @function can-reflect.isPromise isPromise\n\t * @parent can-reflect/type\n\t * @description Test if a value is a promise.\n\t *\n\t * @signature `isPromise(obj)`\n\t *\n\t * Return `true` if `obj` is an instance of promise or `.toString` returns `\"[object Promise]\"`.\n\t *\n\t * ```js\n\t * canReflect.isPromise(Promise.resolve()); // -> true\n\t * ```\n\t *\n\t * @param  {*}  obj the object to test for Promise traits.\n\t * @return {Boolean}\n\t */\n\tisPromise: function(obj){\n\t\treturn (obj instanceof Promise || (Object.prototype.toString.call(obj) === '[object Promise]'));\n\t},\n\t/**\n\t * @function can-reflect.isPlainObject isPlainObject\n\t * @parent can-reflect/type\n\t * @description Test if a value is an object created with `{}` or `new Object()`.\n\t *\n\t * @signature `isPlainObject(obj)`\n\t *\n\t * Attempts to determine if an object is a plain object like those you would create using the curly braces syntax: `{}`. The following are not plain objects:\n\t *\n\t * 1. Objects with prototypes (created using the `new` keyword).\n\t * 2. Booleans.\n\t * 3. Numbers.\n\t * 4. NaN.\n\t *\n\t * ```js\n\t * var isPlainObject = require(\"can-reflect\").isPlainObject;\n\t *\n\t * // Created with {}\n\t * console.log(isPlainObject({})); // -> true\n\t *\n\t * // new Object\n\t * console.log(isPlainObject(new Object())); // -> true\n\t *\n\t * // Custom object\n\t * var Ctr = function(){};\n\t * var obj = new Ctr();\n\t *\n\t * console.log(isPlainObject(obj)); // -> false\n\t * ```\n\t *\n\t * @param  {Object}  obj the object to test.\n\t * @return {Boolean}\n\t */\n\tisPlainObject: isPlainObject\n};\n\nvar call = {\n\t/**\n\t * @function {function(...), Object, ...} can-reflect/call.call call\n\t * @parent can-reflect/call\n\t * @description  Call a callable, with a context object and parameters\n\t *\n\t * @signature `call(func, context, ...rest)`\n\t *\n\t * Call the callable `func` as if it were a function, bound to `context` and with any additional parameters\n\t * occurring after `context` set to the positional parameters.\n\t *\n\t * Note that `func` *must* either be natively callable, implement [can-symbol/symbols/apply @@@@can.apply],\n\t * or have a callable `apply` property to work with `canReflect.call`\n\t *\n\t * ```js\n\t * var compute = canCompute(\"foo\");\n\t *\n\t * canReflect.call(compute, null, \"bar\");\n\t * canReflect.call(compute, null); // -> \"bar\"\n\t * ```\n\t *\n\t * @param  {function(...)} func the function to call with the supplied arguments\n\t * @param  {Object} context the context object to set as `this` on the function call\n\t * @param  {*} rest any arguments after `context` will be passed to the function call\n\t * @return {*}  return types and values are determined by the call to `func`\n\t */\n\tcall: function(func, context){\n\t\tvar args = [].slice.call(arguments, 2);\n\t\tvar apply = func[canSymbol_1_7_0_canSymbol.for(\"can.apply\")];\n\t\tif(apply) {\n\t\t\treturn apply.call(func, context, args);\n\t\t} else {\n\t\t\treturn func.apply(context, args);\n\t\t}\n\t},\n\t/**\n\t * @function {function(...), Object, ...} can-reflect/call.apply apply\n\t * @parent can-reflect/call\n\t * @description  Call a callable, with a context object and a list of parameters\n\t *\n\t * @signature `apply(func, context, args)`\n\t *\n\t * Call the callable `func` as if it were a function, bound to `context` and with any additional parameters\n\t * contained in the Array-like `args`\n\t *\n\t * Note that `func` *must* either be natively callable, implement [can-symbol/symbols/apply @@@@can.apply],\n\t * or have a callable `apply` property to work with `canReflect.apply`\n\t *\n\t * ```js\n\t * var compute = canCompute(\"foo\");\n\t *\n\t * canReflect.apply(compute, null, [\"bar\"]);\n\t * canReflect.apply(compute, null, []); // -> \"bar\"\n\t * ```\n\t *\n\t * @param  {function(...)} func the function to call\n\t * @param  {Object} context the context object to set as `this` on the function call\n\t * @param  {*} args arguments to be passed to the function call\n\t * @return {*}  return types and values are determined by the call to `func`\n\t */\n\tapply: function(func, context, args){\n\t\tvar apply = func[canSymbol_1_7_0_canSymbol.for(\"can.apply\")];\n\t\tif(apply) {\n\t\t\treturn apply.call(func, context, args);\n\t\t} else {\n\t\t\treturn func.apply(context, args);\n\t\t}\n\t},\n\t/**\n\t * @function {function(...), ...} can-reflect/call.new new\n\t * @parent can-reflect/call\n\t * @description  Construct a new instance of a callable constructor\n\t *\n\t * @signature `new(func, ...rest)`\n\t *\n\t * Call the callable `func` as if it were a function, bound to a new instance of `func`, and with any additional\n\t * parameters occurring after `func` set to the positional parameters.\n\t *\n\t * Note that `func` *must* either implement [can-symbol/symbols/new @@@@can.new],\n\t * or have a callable `apply` property *and* a prototype to work with `canReflect.new`\n\t *\n\t * ```js\n\t * canReflect.new(DefineList, [\"foo\"]); // -> [\"foo\"]<DefineList>\n\t * ```\n\t *\n\t * @param  {function(...)} func a constructor\n\t * @param  {*} rest arguments to be passed to the constructor\n\t * @return {Object}  if `func` returns an Object, that returned Object; otherwise a new instance of `func`\n\t */\n\t\"new\": function(func){\n\t\tvar args = [].slice.call(arguments, 1);\n\t\tvar makeNew = func[canSymbol_1_7_0_canSymbol.for(\"can.new\")];\n\t\tif(makeNew) {\n\t\t\treturn makeNew.apply(func, args);\n\t\t} else {\n\t\t\tvar context = Object.create(func.prototype);\n\t\t\tvar ret = func.apply(context, args);\n\t\t\tif(type.isPrimitive(ret)) {\n\t\t\t\treturn context;\n\t\t\t} else {\n\t\t\t\treturn ret;\n\t\t\t}\n\t\t}\n\t}\n};\n\nvar setKeyValueSymbol = canSymbol_1_7_0_canSymbol.for(\"can.setKeyValue\"),\n\tgetKeyValueSymbol = canSymbol_1_7_0_canSymbol.for(\"can.getKeyValue\"),\n\tgetValueSymbol = canSymbol_1_7_0_canSymbol.for(\"can.getValue\"),\n\tsetValueSymbol = canSymbol_1_7_0_canSymbol.for(\"can.setValue\");\n\nvar reflections = {\n\t/**\n\t * @function {Object, String, *} can-reflect.setKeyValue setKeyValue\n\t * @parent can-reflect/get-set\n\t * @description Set the value of a named property on a MapLike object.\n\t *\n\t * @signature `setKeyValue(obj, key, value)`\n\t *\n\t * Set the property on Map-like `obj`, identified by the String, Symbol or Object value `key`, to the value `value`.\n\t * The default behavior can be overridden on `obj` by implementing [can-symbol/symbols/setKeyValue @@@@can.setKeyValue],\n\t * otherwise native named property access is used for string keys, and `Object.defineProperty` is used to set symbols.\n\t *\n\t * ```js\n\t * var foo = new DefineMap({ bar: \"baz\" });\n\t *\n\t * canReflect.setKeyValue(foo, \"bar\", \"quux\");\n\t * foo[bar]; // -> \"quux\"\n\t * ```\n\t * @param  {Object} obj   the object to set on\n\t * @param  {String} key   the key for the property to set\n\t * @param  {*} value      the value to set on the object\n\t */\n\tsetKeyValue: function(obj, key, value){\n\t\tif( type.isSymbolLike(key) ) {\n\t\t\tif(typeof key === \"symbol\") {\n\t\t\t\tobj[key] = value;\n\t\t\t} else {\n\t\t\t\tObject.defineProperty(obj, key, {\n\t\t\t\t\tenumerable: false,\n\t\t\t\t\tconfigurable: true,\n\t\t\t\t\tvalue: value,\n\t\t\t\t\twritable: true\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\tvar setKeyValue = obj[setKeyValueSymbol];\n\t\tif(setKeyValue !== undefined) {\n\t\t\treturn setKeyValue.call(obj, key, value);\n\t\t} else {\n\t\t\tobj[key] = value;\n\t\t}\n\t},\n\t/**\n\t * @function {Object, String} can-reflect.getKeyValue getKeyValue\n\t * @parent can-reflect/get-set\n\t * @description Get the value of a named property on a MapLike object.\n\t *\n\t * @signature `getKeyValue(obj, key)`\n\t *\n\t * Retrieve the property on Map-like `obj` identified by the String or Symbol value `key`.  The default behavior\n\t * can be overridden on `obj` by implementing [can-symbol/symbols/getKeyValue @@@@can.getKeyValue],\n\t * otherwise native named property access is used.\n\t *\n\t * ```js\n\t * var foo = new DefineMap({ bar: \"baz\" });\n\t *\n\t * canReflect.getKeyValue(foo, \"bar\"); // -> \"baz\"\n\t * ```\n\t *\n\t * @param  {Object} obj   the object to get from\n\t * @param  {String} key   the key of the property to get\n\t */\n\tgetKeyValue: function(obj, key) {\n\t\tvar getKeyValue = obj[getKeyValueSymbol];\n\t\tif(getKeyValue) {\n\t\t\treturn getKeyValue.call(obj, key);\n\t\t}\n\t\treturn obj[key];\n\t},\n\t/**\n\t * @function {Object, String} can-reflect.deleteKeyValue deleteKeyValue\n\t * @parent can-reflect/get-set\n\t * @description Delete a named property from a MapLike object.\n\t *\n\t * @signature `deleteKeyValue(obj, key)`\n\t *\n\t * Remove the property identified by the String or Symbol `key` from the Map-like object `obj`, if possible.\n\t * Property definitions may interfere with deleting key values; the behavior on `obj` if `obj[key]` cannot\n\t * be deleted is undefined.  The default use of the native `delete` keyword can be overridden by `obj` if it\n\t * implements [can-symbol/symbols/deleteKeyValue @@@@can.deleteKeyValue].\n\t *\n\t * ```js\n\t * var foo = new DefineMap({ bar: \"baz\" });\n\t * var quux = new CanMap({ thud: \"jeek\" });\n\t *\n\t * canReflect.deleteKeyValue(foo, \"bar\");\n\t * canReflect.deleteKeyValue(quux, \"thud\");\n\t *\n\t * \"bar\" in foo; // ->  true  -- DefineMaps use property defs which cannot be un-defined\n\t * foo.bar // -> undefined    --  but set values to undefined when deleting\n\t *\n\t * \"thud\" in quux; // -> false\n\t * quux.thud; // -> undefined\n\t * ```\n\t *\n\t * @param  {Object} obj   the object to delete on\n\t * @param  {String} key   the key for the property to delete\n\t */\n\tdeleteKeyValue: function(obj, key) {\n\t\tvar deleteKeyValue = obj[canSymbol_1_7_0_canSymbol.for(\"can.deleteKeyValue\")];\n\t\tif(deleteKeyValue) {\n\t\t\treturn deleteKeyValue.call(obj, key);\n\t\t}\n\t\tdelete obj[key];\n\t},\n\t/**\n\t * @function {Object} can-reflect.getValue getValue\n\t * @parent can-reflect/get-set\n\t * @description Get the value of an object with a gettable value\n\t *\n\t * @signature `getValue(obj)`\n\t *\n\t * Return the value of the Value-like object `obj`.  Unless `obj` implements\n\t * [can-symbol/symbols/getValue @@@@can.getValue], the result of `getValue` on\n\t * `obj` will always be `obj`.  Observable Map-like objects may want to implement\n\t * `@@@@can.getValue` to return non-observable or plain representations of themselves.\n\t *\n\t * ```js\n\t * var compute = canCompute(\"foo\");\n\t * var primitive = \"bar\";\n\t *\n\t * canReflect.getValue(compute); // -> \"foo\"\n\t * canReflect.getValue(primitive); // -> \"bar\"\n\t * ```\n\t *\n\t * @param  {Object} obj   the object to get from\n\t * @return {*} the value of the object via `@@can.getValue`, or the value itself.\n\t */\n\tgetValue: function(value){\n\t\tif(type.isPrimitive(value)) {\n\t\t\treturn value;\n\t\t}\n\t\tvar getValue = value[getValueSymbol];\n\t\tif(getValue) {\n\t\t\treturn getValue.call(value);\n\t\t}\n\t\treturn value;\n\t},\n\t/**\n\t * @function {Object, *} can-reflect.setValue setValue\n\t * @parent can-reflect/get-set\n\t * @description Set the value of a mutable object.\n\t *\n\t * @signature `setValue(obj, value)`\n\t *\n\t * Set the value of a Value-like object `obj` to the value `value`.  `obj` *must* implement\n\t * [can-symbol/symbols/setValue @@@@can.setValue] to be used with `canReflect.setValue`.\n\t * Map-like objects may want to implement `@@@@can.setValue` to merge objects of properties\n\t * into themselves.\n\t *\n\t * ```js\n\t * var compute = canCompute(\"foo\");\n\t * var plain = {};\n\t *\n\t * canReflect.setValue(compute, \"bar\");\n\t * compute(); // -> bar\n\t *\n\t * canReflect.setValue(plain, { quux: \"thud\" }); // throws \"can-reflect.setValue - Can not set value.\"\n\t * ```\n\t *\n\t * @param  {Object} obj   the object to set on\n\t * @param  {*} value      the value to set for the object\n\t */\n\tsetValue: function(item, value){\n\t\tvar setValue = item && item[setValueSymbol];\n\t\tif(setValue) {\n\t\t\treturn setValue.call(item, value);\n\t\t} else {\n\t\t\tthrow new Error(\"can-reflect.setValue - Can not set value.\");\n\t\t}\n\t},\n\n\tsplice: function(obj, index, removing, adding){\n\t\tvar howMany;\n\t\tif(typeof removing !== \"number\") {\n\t\t\tvar updateValues = obj[canSymbol_1_7_0_canSymbol.for(\"can.updateValues\")];\n\t\t\tif(updateValues) {\n\t\t\t\treturn updateValues.call(obj, index, removing, adding);\n\t\t\t}\n\t\t\thowMany = removing.length;\n\t\t} else {\n\t\t\thowMany = removing;\n\t\t}\n\n\t\tif(arguments.length <= 3){\n\t\t\tadding = [];\n\t\t}\n\n\t\tvar splice = obj[canSymbol_1_7_0_canSymbol.for(\"can.splice\")];\n\t\tif(splice) {\n\t\t\treturn splice.call(obj, index, howMany, adding);\n\t\t}\n\t\treturn [].splice.apply(obj, [index, howMany].concat(adding) );\n\t},\n\taddValues: function(obj, adding, index) {\n\t\tvar add = obj[canSymbol_1_7_0_canSymbol.for(\"can.addValues\")];\n\t\tif(add) {\n\t\t\treturn add.call(obj, adding, index);\n\t\t}\n\t\tif(Array.isArray(obj) && index === undefined) {\n\t\t\treturn obj.push.apply(obj, adding);\n\t\t}\n\t\treturn reflections.splice(obj, index, [], adding);\n\t},\n\tremoveValues: function(obj, removing, index) {\n\t\tvar removeValues = obj[canSymbol_1_7_0_canSymbol.for(\"can.removeValues\")];\n\t\tif(removeValues) {\n\t\t\treturn removeValues.call(obj, removing, index);\n\t\t}\n\t\tif(Array.isArray(obj) && index === undefined) {\n\t\t\tremoving.forEach(function(item){\n\t\t\t\tvar index = obj.indexOf(item);\n\t\t\t\tif(index >=0) {\n\t\t\t\t\tobj.splice(index, 1);\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\t\treturn reflections.splice(obj, index, removing, []);\n\t}\n};\n/**\n * @function {Object, String} can-reflect.get get\n * @hide\n * @description an alias for [can-reflect.getKeyValue getKeyValue]\n */\nreflections.get = reflections.getKeyValue;\n/**\n * @function {Object, String} can-reflect.set set\n * @hide\n * @description an alias for [can-reflect.setKeyValue setKeyValue]\n */\nreflections.set = reflections.setKeyValue;\n/**\n * @function {Object, String} can-reflect.delete delete\n * @hide\n * @description an alias for [can-reflect.deleteKeyValue deleteKeyValue]\n */\nreflections[\"delete\"] = reflections.deleteKeyValue;\n\nvar getSet = reflections;\n\nvar slice = [].slice;\n\nfunction makeFallback(symbolName, fallbackName) {\n\treturn function(obj, event, handler, queueName){\n\t\tvar method = obj[canSymbol_1_7_0_canSymbol.for(symbolName)];\n\t\tif(method !== undefined) {\n\t\t\treturn method.call(obj, event, handler, queueName);\n\t\t}\n\t\treturn this[fallbackName].apply(this, arguments);\n\t};\n}\n\nfunction makeErrorIfMissing(symbolName, errorMessage){\n\treturn function(obj){\n\t\tvar method = obj[canSymbol_1_7_0_canSymbol.for(symbolName)];\n\t\tif(method !== undefined) {\n\t\t\tvar args = slice.call(arguments, 1);\n\t\t\treturn method.apply(obj, args);\n\t\t}\n\t\tthrow new Error(errorMessage);\n\t};\n}\n\nvar observe = {\n\t// KEY\n\t/**\n\t * @function {Object, String, function(*, *), String} can-reflect/observe.onKeyValue onKeyValue\n\t * @parent can-reflect/observe\n\t * @description  Register an event handler on a MapLike object, based on a key change\n\t *\n\t * @signature `onKeyValue(obj, key, handler, [queueName])`\n\t *\n\t * Register a handler on the Map-like object `obj` to trigger when the property key `key` changes.\n\t * `obj` *must* implement [can-symbol/symbols/onKeyValue @@@@can.onKeyValue] to be compatible with\n\t * can-reflect.onKeyValue.  The function passed as `handler` will receive the new value of the property\n\t * as the first argument, and the previous value of the property as the second argument.\n\t *\n\t * ```js\n\t * var obj = new DefineMap({ foo: \"bar\" });\n\t * canReflect.onKeyValue(obj, \"foo\", function(newVal, oldVal) {\n\t * \tconsole.log(\"foo is now\", newVal, \", was\", oldVal);\n\t * });\n\t *\n\t * obj.foo = \"baz\";  // -> logs \"foo is now baz , was bar\"\n\t * ```\n\t *\n\t * @param {Object} obj an observable MapLike that can listen to changes in named properties.\n\t * @param {String} key  the key to listen to\n\t * @param {function(*, *)} handler a callback function that recieves the new value\n\t * @param {String} [queueName]  the queue to dispatch events to\n\t */\n\tonKeyValue: makeFallback(\"can.onKeyValue\", \"onEvent\"),\n\t/**\n\t * @function {Object, String, function(*), String} can-reflect/observe.offKeyValue offKeyValue\n\t * @parent can-reflect/observe\n\t * @description  Unregister an event handler on a MapLike object, based on a key change\n\t *\n\t * @signature `offKeyValue(obj, key, handler, [queueName])`\n\t *\n\t * Unregister a handler from the Map-like object `obj` that had previously been registered with\n\t * [can-reflect/observe.onKeyValue onKeyValue]. The function passed as `handler` will no longer be called\n\t * when the value of `key` on `obj` changes.\n\t *\n\t * ```js\n\t * var obj = new DefineMap({ foo: \"bar\" });\n\t * var handler = function(newVal, oldVal) {\n\t * \tconsole.log(\"foo is now\", newVal, \", was\", oldVal);\n\t * };\n\t *\n\t * canReflect.onKeyValue(obj, \"foo\", handler);\n\t * canReflect.offKeyValue(obj, \"foo\", handler);\n\t *\n\t * obj.foo = \"baz\";  // -> nothing is logged\n\t * ```\n\t *\n\t * @param {Object} obj an observable MapLike that can listen to changes in named properties.\n\t * @param {String} key  the key to stop listening to\n\t * @param {function(*)} handler the callback function that should be removed from the event handlers for `key`\n\t * @param {String} [queueName]  the queue that the handler was set to receive events from\n\t */\n\toffKeyValue: makeFallback(\"can.offKeyValue\",\"offEvent\"),\n\n\t/**\n\t * @function {Object, function(Array)} can-reflect/observe.onKeys onKeys\n\t * @parent can-reflect/observe\n\t * @description  Register an event handler on a MapLike object, triggered on the key set changing\n\t *\n\t * @signature `onKeys(obj, handler)`\n\t *\n\t * Register an event handler on the Map-like object `obj` to trigger when `obj`'s keyset changes.\n\t * `obj` *must* implement [can-symbol/symbols/onKeys @@@@can.onKeys] to be compatible with\n\t * can-reflect.onKeys.  The function passed as `handler` will receive an Array of object diffs (see\n\t * [can-util/js/diff-object/diff-object diffObject] for the format) as its one argument.\n\t *\n\t * ```js\n\t * var obj = new DefineMap({ foo: \"bar\" });\n\t * canReflect.onKeys(obj, function(diffs) {\n\t * \tconsole.log(diffs);\n\t * });\n\t *\n\t * obj.set(\"baz\", \"quux\");  // -> logs '[{\"property\": \"baz\", \"type\": \"add\", \"value\": \"quux\"}]'\n\t * ```\n\t *\n\t * @param {Object} obj an observable MapLike that can listen to changes in named properties.\n\t * @param {function(Array)} handler the callback function to receive the diffs in the key set\n\t */\n\t// any key change (diff would normally happen)\n\tonKeys: makeErrorIfMissing(\"can.onKeys\",\"can-reflect: can not observe an onKeys event\"),\n\t/**\n\t * @function {Object, function(Array)} can-reflect/observe.onKeysAdded onKeysAdded\n\t * @parent can-reflect/observe\n\t * @description  Register an event handler on a MapLike object, triggered on new keys being added.\n\t *\n\t * @signature `onKeysAdded(obj, handler)`\n\t *\n\t * Register an event handler on the Map-like object `obj` to trigger when a new key or keys are set on\n\t * `obj`. `obj` *must* implement [can-symbol/symbols/onKeysAdded @@@@can.onKeysAdded] to be compatible with\n\t * can-reflect.onKeysAdded.  The function passed as `handler` will receive an Array of Strings as its one\n\t * argument.\n\t *\n\t * ```js\n\t * var obj = new DefineMap({ foo: \"bar\" });\n\t * canReflect.onKeysAded(obj, function(newKeys) {\n\t * \tconsole.log(newKeys);\n\t * });\n\t *\n\t * foo.set(\"baz\", \"quux\");  // -> logs '[\"baz\"]'\n\t * ```\n\t *\n\t * @param {Object} obj an observable MapLike that can listen to changes in named properties.\n\t * @param {function(Array)} handler the callback function to receive the array of added keys\n\t */\n\t// keys added at a certain point {key: 1}, index\n\tonKeysAdded: makeErrorIfMissing(\"can.onKeysAdded\",\"can-reflect: can not observe an onKeysAdded event\"),\n\t/**\n\t * @function {Object, function(Array)} can-reflect/observe.onKeysRemoved onKeysRemoved\n\t * @parent can-reflect/observe\n\t * @description  Register an event handler on a MapLike object, triggered on keys being deleted.\n\t *\n\t * @signature `onKeysRemoved(obj, handler)`\n\t *\n\t * Register an event handler on the Map-like object `obj` to trigger when a key or keys are removed from\n\t * `obj`'s keyset. `obj` *must* implement [can-symbol/symbols/onKeysRemoved @@@@can.onKeysRemoved] to be\n\t * compatible with can-reflect.onKeysAdded.  The function passed as `handler` will receive an Array of\n\t * Strings as its one argument.\n\t *\n\t * ```js\n\t * var obj = new CanMap({ foo: \"bar\" });\n\t * canReflect.onKeys(obj, function(diffs) {\n\t * \tconsole.log(JSON.stringify(diffs));\n\t * });\n\t *\n\t * foo.removeAttr(\"foo\");  // -> logs '[\"foo\"]'\n\t * ```\n\t *\n\t * @param {Object} obj an observable MapLike that can listen to changes in named properties.\n\t * @param {function(Array)} handler the callback function to receive the array of removed keys\n\t */\n\tonKeysRemoved: makeErrorIfMissing(\"can.onKeysRemoved\",\"can-reflect: can not unobserve an onKeysRemoved event\"),\n\n\t/**\n\t * @function {Object, String} can-reflect/observe.getKeyDependencies getKeyDependencies\n\t * @parent can-reflect/observe\n\t * @description  Return the observable objects that compute to the value of a named property on an object\n\t *\n\t * @signature `getKeyDependencies(obj, key)`\n\t *\n\t * Return the observable objects that provide input values to generate the computed value of the\n\t * property `key` on Map-like object `obj`.  If `key` does not have dependencies on `obj`, returns `undefined`.\n\t * Otherwise returns an object with up to two keys: `keyDependencies` is a [can-util/js/cid-map/cid-map CIDMap] that\n\t * maps each Map-like object providing keyed values to an Array of the relevant keys; `valueDependencies` is a\n\t * [can-util/js/cid-set/cid-set CIDSet] that contains all Value-like dependencies providing their own values.\n\t *\n\t * `obj` *must* implement [can-symbol/symbols/getKeyDependencies @@@@can.getKeyDependencies] to work with\n\t * `canReflect.getKeyDependencies`.\n\t *\n\t *\n\t * ```js\n\t * var foo = new DefineMap({ \"bar\": \"baz\" })\n\t * var obj = new (DefineMap.extend({\n\t * \t baz: {\n\t * \t   get: function() {\n\t * \t     return foo.bar;\n\t * \t   }\n\t * \t }\n\t * }))();\n\t *\n\t * canReflect.getKeyDependencies(obj, \"baz\");  // -> { valueDependencies: CIDSet }\n\t * ```\n\t *\n\t * @param {Object} obj the object to check for key dependencies\n\t * @param {String} key the key on the object to check\n\t * @return {Object} the observable values that this keyed value depends on\n\t */\n\tgetKeyDependencies: makeErrorIfMissing(\"can.getKeyDependencies\", \"can-reflect: can not determine dependencies\"),\n\n\t/**\n\t * @function {Object, String} can-reflect/observe.getWhatIChange getWhatIChange\n\t * @hide\n\t * @parent can-reflect/observe\n\t * @description Return the observable objects that derive their value from the\n\t * obj, passed in.\n\t *\n\t * @signature `getWhatIChange(obj, key)`\n\t *\n\t * `obj` *must* implement `@@@@can.getWhatIChange` to work with\n\t * `canReflect.getWhatIChange`.\n\t *\n\t * @param {Object} obj the object to check for what it changes\n\t * @param {String} [key] the key on the object to check\n\t * @return {Object} the observable values that derive their value from `obj`\n\t */\n\tgetWhatIChange: makeErrorIfMissing(\n\t\t\"can.getWhatIChange\",\n\t\t\"can-reflect: can not determine dependencies\"\n\t),\n\n\t/**\n\t * @function {Function} can-reflect/observe.getChangesDependencyRecord getChangesDependencyRecord\n\t * @hide\n\t * @parent can-reflect/observe\n\t * @description Return the observable objects that are mutated by the handler\n\t * passed in as argument.\n\t *\n\t * @signature `getChangesDependencyRecord(handler)`\n\t *\n\t * `handler` *must* implement `@@@@can.getChangesDependencyRecord` to work with\n\t * `canReflect.getChangesDependencyRecord`.\n\t *\n\t * ```js\n\t * var one = new SimpleObservable(\"one\");\n\t * var two = new SimpleObservable(\"two\");\n\t *\n\t * var handler = function() {\n\t *\ttwo.set(\"2\");\n\t * };\n\t *\n\t * canReflect.onValue(one, handler);\n\t * canReflect.getChangesDependencyRecord(handler); // -> { valueDependencies: new Set([two]) }\n\t * ```\n\t *\n\t * @param {Function} handler the event handler to check for what it changes\n\t * @return {Object} the observable values that are mutated by the handler\n\t */\n\tgetChangesDependencyRecord: function getChangesDependencyRecord(handler) {\n\t\tvar fn = handler[canSymbol_1_7_0_canSymbol.for(\"can.getChangesDependencyRecord\")];\n\n\t\tif (typeof fn === \"function\") {\n\t\t\treturn fn();\n\t\t}\n\t},\n\n\t/**\n\t * @function {Object, String} can-reflect/observe.keyHasDependencies keyHasDependencies\n\t * @parent can-reflect/observe\n\t * @description  Determine whether the value for a named property on an object is bound to other events\n\t *\n\t * @signature `keyHasDependencies(obj, key)`\n\t *\n\t * Returns `true` if the computed value of the property `key` on Map-like object `obj` derives from other values.\n\t * Returns `false` if `key` is computed on `obj` but does not have dependencies on other objects. If `key` is not\n\t * a computed value on `obj`, returns `undefined`.\n\t *\n\t * `obj` *must* implement [can-symbol/symbols/keyHasDependencies @@@@can.keyHasDependencies] to work with\n\t * `canReflect.keyHasDependencies`.\n\t *\n\t * ```js\n\t * var foo = new DefineMap({ \"bar\": \"baz\" })\n\t * var obj = new (DefineMap.extend({\n\t * \t baz: {\n\t * \t   get: function() {\n\t * \t     return foo.bar;\n\t * \t   }\n\t * \t },\n\t * \t quux: {\n\t * \t \t get: function() {\n\t * \t \t   return \"thud\";\n\t * \t \t }\n\t * \t }\n\t * }))();\n\t *\n\t * canReflect.keyHasDependencies(obj, \"baz\");  // -> true\n\t * canReflect.keyHasDependencies(obj, \"quux\");  // -> false\n\t * canReflect.keyHasDependencies(foo, \"bar\");  // -> undefined\n\t * ```\n\t *\n\t * @param {Object} obj the object to check for key dependencies\n\t * @param {String} key the key on the object to check\n\t * @return {Boolean} `true` if there are other objects that may update the keyed value; `false` otherwise\n\t *\n\t */\n\t// TODO: use getKeyDeps once we know what that needs to look like\n\tkeyHasDependencies: makeErrorIfMissing(\"can.keyHasDependencies\",\"can-reflect: can not determine if this has key dependencies\"),\n\n\t// VALUE\n\t/**\n\t * @function {Object, function(*)} can-reflect/observe.onValue onValue\n\t * @parent can-reflect/observe\n\t * @description  Register an event handler on an observable ValueLike object, based on a change in its value\n\t *\n\t * @signature `onValue(handler, [queueName])`\n\t *\n\t * Register an event handler on the Value-like object `obj` to trigger when its value changes.\n\t * `obj` *must* implement [can-symbol/symbols/onValue @@@@can.onValue] to be compatible with\n\t * can-reflect.onKeyValue.  The function passed as `handler` will receive the new value of `obj`\n\t * as the first argument, and the previous value of `obj` as the second argument.\n\t *\n\t * ```js\n\t * var obj = canCompute(\"foo\");\n\t * canReflect.onValue(obj, function(newVal, oldVal) {\n\t * \tconsole.log(\"compute is now\", newVal, \", was\", oldVal);\n\t * });\n\t *\n\t * obj(\"bar\");  // -> logs \"compute is now bar , was foo\"\n\t * ```\n\t *\n\t * @param {*} obj  any object implementing @@can.onValue\n\t * @param {function(*, *)} handler  a callback function that receives the new and old values\n\t */\n\tonValue: makeErrorIfMissing(\"can.onValue\",\"can-reflect: can not observe value change\"),\n\t/**\n\t * @function {Object, function(*)} can-reflect/observe.offValue offValue\n\t * @parent can-reflect/observe\n\t * @description  Unregister an value change handler from an observable ValueLike object\n\t *\n\t * @signature `offValue(handler, [queueName])`\n\t *\n\t * Unregister an event handler from the Value-like object `obj` that had previously been registered with\n\t * [can-reflect/observe.onValue onValue]. The function passed as `handler` will no longer be called\n\t * when the value of `obj` changes.\n\t *\n\t * ```js\n\t * var obj = canCompute( \"foo\" );\n\t * var handler = function(newVal, oldVal) {\n\t * \tconsole.log(\"compute is now\", newVal, \", was\", oldVal);\n\t * };\n\t *\n\t * canReflect.onKeyValue(obj, handler);\n\t * canReflect.offKeyValue(obj, handler);\n\t *\n\t * obj(\"baz\");  // -> nothing is logged\n\t * ```\n\t *\n\t * @param {*} obj\n\t * @param {function(*)} handler\n\t */\n\toffValue: makeErrorIfMissing(\"can.offValue\",\"can-reflect: can not unobserve value change\"),\n\n\t/**\n\t * @function {Object} can-reflect/observe.getValueDependencies getValueDependencies\n\t * @parent can-reflect/observe\n\t * @description  Return all the events that bind to the value of an observable, Value-like object\n\t *\n\t * @signature `getValueDependencies(obj)`\n\t *\n\t * Return the observable objects that provide input values to generate the computed value of the\n\t * Value-like object `obj`.  If `obj` does not have dependencies, returns `undefined`.\n\t * Otherwise returns an object with up to two keys: `keyDependencies` is a [can-util/js/cid-map/cid-map CIDMap] that\n\t * maps each Map-like object providing keyed values to an Array of the relevant keys; `valueDependencies` is a\n\t * [can-util/js/cid-set/cid-set CIDSet] that contains all Value-like dependencies providing their own values.\n\t *\n\t * `obj` *must* implement [can-symbol/symbols/getValueDependencies @@@@can.getValueDependencies] to work with\n\t * `canReflect.getValueDependencies`.\n\t *\n\t *\n\t * ```js\n\t * var foo = new DefineMap({ \"bar\": \"baz\" })\n\t * var obj = canCompute(function() {\n\t * \t return foo.bar;\n\t * });\n\t *\n\t * canReflect.getValueDependencies(obj);  // -> { valueDependencies: CIDSet } because `obj` is internally backed by\n\t * a [can-observation]\n\t * ```\n\t *\n\t * @param {Object} obj the object to check for value dependencies\n\t * @return {Object} the observable objects that `obj`'s value depends on\n\t *\n\t */\n\tgetValueDependencies: makeErrorIfMissing(\"can.getValueDependencies\",\"can-reflect: can not determine dependencies\"),\n\n\t/**\n\t * @function {Object} can-reflect/observe.valueHasDependencies valueHasDependencies\n\t * @parent can-reflect/observe\n\t * @description  Determine whether the value of an observable object is bound to other events\n\t *\n\t * @signature `valueHasDependencies(obj)`\n\t *\n\t * Returns `true` if the computed value of the Value-like object `obj` derives from other values.\n\t * Returns `false` if `obj` is computed but does not have dependencies on other objects. If `obj` is not\n\t * a computed value, returns `undefined`.\n\t *\n\t * `obj` *must* implement [can-symbol/symbols/valueHasDependencies @@@@can.valueHasDependencies] to work with\n\t * `canReflect.valueHasDependencies`.\n\t *\n\t * ```js\n\t * var foo = canCompute( \"bar\" );\n\t * var baz = canCompute(function() {\n\t * \t return foo();\n\t * });\n\t * var quux = \"thud\";\n\t * var jeek = canCompute(function(plonk) {\n\t * \t if(argument.length) {\n\t * \t \t  quux = plonk;\n\t * \t }\n\t * \t return quux;\n\t * });\n\t *\n\t * canReflect.valueHasDependencies(baz);  // -> true\n\t * canReflect.valueHasDependencies(jeek);  // -> false\n\t * canReflect.valueHasDependencies(foo);  // -> undefined\n\t * ```\n\t *\n\t * @param {Object} obj the object to check for dependencies\n\t * @return {Boolean} `true` if there are other dependencies that may update the object's value; `false` otherwise\n\t *\n\t */\n\tvalueHasDependencies: makeErrorIfMissing(\"can.valueHasDependencies\",\"can-reflect: can not determine if value has dependencies\"),\n\n\t// PATCHES\n\t/**\n\t * @function {Object, function(*), String} can-reflect/observe.onPatches onPatches\n\t * @parent can-reflect/observe\n\t * @description  Register an handler on an observable that listens to any key changes\n\t *\n\t * @signature `onPatches(obj, handler, [queueName])`\n\t *\n\t * Register an event handler on the object `obj` that fires when anything changes on an object: a key value is added,\n\t * an existing key has is value changed, or a key is deleted from the object.\n\t *\n\t * If object is an array-like and the changed property includes numeric indexes, patch sets will include array-specific\n\t * patches in addition to object-style patches\n\t *\n\t * For more on the patch formats, see [can-util/js/diff-object/diff-object] and [can-util/js/diff-array/diff-array].\n\t *\n\t * ```js\n\t * var obj = new DefineMap({});\n\t * var handler = function(patches) {\n\t * \tconsole.log(patches);\n\t * };\n\t *\n\t * canReflect.onPatches(obj, handler);\n\t * obj.set(\"foo\", \"bar\");  // logs [{ type: \"add\", property: \"foo\", value: \"bar\" }]\n\t * obj.set(\"foo\", \"baz\");  // logs [{ type: \"set\", property: \"foo\", value: \"baz\" }]\n\t *\n\t * var arr = new DefineList([]);\n\t * canReflect.onPatches(arr, handler);\n\t * arr.push(\"foo\");  // logs [{type: \"add\", property:\"0\", value: \"foo\"},\n\t *                            {index: 0, deleteCount: 0, insert: [\"foo\"]}]\n   * arr.pop();  // logs [{type: \"remove\", property:\"0\"},\n\t *                            {index: 0, deleteCount: 1, insert: []}]\n\t * ```\n\t *\n\t * @param {*} obj\n\t * @param {function(*)} handler\n\t * @param {String} [queueName] the name of a queue in [can-queues]; dispatches to `handler` will happen on this queue\n\t */\n\tonPatches: makeErrorIfMissing(\"can.onPatches\", \"can-reflect: can not observe patches on object\"),\n\t/**\n\t * @function {Object, function(*), String} can-reflect/observe.offPatches offPatches\n\t * @parent can-reflect/observe\n\t * @description  Unregister an object patches handler from an observable object\n\t *\n\t * @signature `offPatches(obj, handler, [queueName])`\n\t *\n\t * Unregister an event handler from the object `obj` that had previously been registered with\n\t * [can-reflect/observe.onPatches onPatches]. The function passed as `handler` will no longer be called\n\t * when `obj` has key or index changes.\n\t *\n\t * ```js\n\t * var obj = new DefineMap({});\n\t * var handler = function(patches) {\n\t * \tconsole.log(patches);\n\t * };\n\t *\n\t * canReflect.onPatches(obj, handler);\n\t * canReflect.offPatches(obj, handler);\n\t *\n\t * obj.set(\"foo\", \"bar\");  // nothing is logged\n\t * ```\n\t *\n\t * @param {*} obj\n\t * @param {function(*)} handler\n\t * @param {String} [queueName] the name of the queue in [can-queues] the handler was registered under\n\t */\n\toffPatches: makeErrorIfMissing(\"can.offPatches\", \"can-reflect: can not unobserve patches on object\"),\n\n\t/**\n\t * @function {Object, function(*)} can-reflect/observe.onInstancePatches onInstancePatches\n\t * @parent can-reflect/observe\n\t *\n\t * @description Registers a handler that listens to patch events on any instance\n\t *\n\t * @signature `onInstancePatches(Type, handler(instance, patches))`\n\t *\n\t * Listens to patch changes on any instance of `Type`. This is used by [can-connect]\n\t * to know when a potentially `unbound` instance's `id` changes. If the `id` changes,\n\t * the instance can be moved into the store while it is being saved. E.g:\n\t *\n\t * ```js\n\t * canReflect.onInstancePatches(Map, function onInstancePatches(instance, patches) {\n\t *\tpatches.forEach(function(patch) {\n\t *\t\tif (\n\t *\t\t\t(patch.type === \"add\" || patch.type === \"set\") &&\n\t *\t\t\tpatch.key === connection.idProp &&\n\t *\t\t\tcanReflect.isBound(instance)\n\t *\t\t) {\n\t *\t\t\tconnection.addInstanceReference(instance);\n\t *\t\t}\n\t *\t});\n\t *});\n\t * ```\n\t *\n\t * @param {*} Type\n\t * @param {function(*)} handler\n\t */\n\tonInstancePatches: makeErrorIfMissing(\n\t\t\"can.onInstancePatches\",\n\t\t\"can-reflect: can not observe onInstancePatches on Type\"\n\t),\n\n\t/**\n\t * @function {Object, function(*)} can-reflect/observe.offInstancePatches offInstancePatches\n\t * @parent can-reflect/observe\n\t *\n\t * @description Unregisters a handler registered through [can-reflect/observe.onInstancePatches]\n\t *\n\t * @signature `offInstancePatches(Type, handler(instance, patches))`\n\t *\n\t * ```js\n\t * canReflect.offInstancePatches(Map, onInstancePatches);\n\t * ```\n\t *\n\t * @param {*} Type\n\t * @param {function(*)} handler\n\t */\n\toffInstancePatches: makeErrorIfMissing(\n\t\t\"can.offInstancePatches\",\n\t\t\"can-reflect: can not unobserve onInstancePatches on Type\"\n\t),\n\n\t// HAS BINDINGS VS DOES NOT HAVE BINDINGS\n\t/**\n\t * @function {Object, function(*), String} can-reflect/observe.onInstanceBoundChange onInstanceBoundChange\n\t * @parent can-reflect/observe\n\t * @description Listen to when observables of a type are bound and unbound.\n\t *\n\t * @signature `onInstanceBoundChange(Type, handler, [queueName])`\n\t *\n\t * Register an event handler on the object `Type` that fires when instances of the type become bound (the first handler is added)\n\t * or unbound (the last remaining handler is removed). The function passed as `handler` will be called\n\t * with the `instance` as the first argument and `true` as the second argument when `instance` gains its first binding,\n\t * and called with `false` when `instance` loses its\n\t * last binding.\n\t *\n\t * ```js\n\t * Person = DefineMap.extend({ ... });\n\t *\n\t * var person = Person({});\n\t * var handler = function(instance, newVal) {\n\t * \tconsole.log(instance, \"bound state is now\", newVal);\n\t * };\n\t * var keyHandler = function() {};\n\t *\n\t * canReflect.onInstanceBoundChange(Person, handler);\n\t * canReflect.onKeyValue(obj, \"name\", keyHandler);  // logs person Bound state is now true\n\t * canReflect.offKeyValue(obj, \"name\", keyHandler);  // logs person Bound state is now false\n\t * ```\n\t *\n\t * @param {function} Type A constructor function\n\t * @param {function(*,Boolean)} handler(instance,isBound) A function called with the `instance` whose bound status changed and the state of the bound status.\n\t * @param {String} [queueName] the name of a queue in [can-queues]; dispatches to `handler` will happen on this queue\n\t */\n\tonInstanceBoundChange: makeErrorIfMissing(\"can.onInstanceBoundChange\", \"can-reflect: can not observe bound state change in instances.\"),\n\t/**\n\t * @function {Object, function(*), String} can-reflect/observe.offInstanceBoundChange offInstanceBoundChange\n\t * @parent can-reflect/observe\n\t * @description Stop listening to when observables of a type are bound and unbound.\n\t *\n\t * @signature `offInstanceBoundChange(Type, handler, [queueName])`\n\t *\n\t * Unregister an event handler from the type `Type` that had previously been registered with\n\t * [can-reflect/observe.onInstanceBoundChange onInstanceBoundChange]. The function passed as `handler` will no longer be called\n\t * when instances of `Type` gains its first or loses its last binding.\n\t *\n\t * ```js\n\t * Person = DefineMap.extend({ ... });\n\t *\n\t * var person = Person({});\n\t * var handler = function(instance, newVal) {\n\t * \tconsole.log(instance, \"bound state is now\", newVal);\n\t * };\n\t * var keyHandler = function() {};\n\t *\n\t * canReflect.onInstanceBoundChange(Person, handler);\n\t * canReflect.offInstanceBoundChange(Person, handler);\n\t * canReflect.onKeyValue(obj, \"name\", keyHandler);  // nothing is logged\n\t * canReflect.offKeyValue(obj, \"name\", keyHandler); // nothing is logged\n\t * ```\n\t *\n\t * @param {function} Type A constructor function\n\t * @param {function(*,Boolean)} handler(instance,isBound) The `handler` passed to `canReflect.onInstanceBoundChange`.\n\t * @param {String} [queueName] the name of the queue in [can-queues] the handler was registered under\n\t */\n\toffInstanceBoundChange: makeErrorIfMissing(\"can.offInstanceBoundChange\", \"can-reflect: can not unobserve bound state change\"),\n\t/**\n\t * @function {Object} can-reflect/observe.isBound isBound\n\t * @parent can-reflect/observe\n\t * @description  Determine whether any listeners are bound to the observable object\n\t *\n\t * @signature `isBound(obj)`\n\t *\n\t * `isBound` queries an observable object to find out whether any listeners have been set on it using\n\t * [can-reflect/observe.onKeyValue onKeyValue] or [can-reflect/observe.onValue onValue]\n\t *\n\t * ```js\n\t * var obj = new DefineMap({});\n\t * var handler = function() {};\n\t * canReflect.isBound(obj); // -> false\n\t * canReflect.onKeyValue(obj, \"foo\", handler);\n\t * canReflect.isBound(obj); // -> true\n\t * canReflect.offKeyValue(obj, \"foo\", handler);\n\t * canReflect.isBound(obj); // -> false\n\t * ```\n\t *\n\t * @param {*} obj\n\t * @return {Boolean} `true` if obj has at least one key-value or value listener, `false` otherwise\n\t */\n\tisBound: makeErrorIfMissing(\"can.isBound\", \"can-reflect: cannot determine if object is bound\"),\n\n\t// EVENT\n\t/**\n\t * @function {Object, String, function(*)} can-reflect/observe.onEvent onEvent\n\t * @parent can-reflect/observe\n\t * @description  Register a named event handler on an observable object\n\t *\n\t * @signature `onEvent(obj, eventName, callback)`\n\t *\n\t *\n\t * Register an event handler on the object `obj` to trigger when the event `eventName` is dispatched.\n\t * `obj` *must* implement [can-symbol/symbols/onKeyValue @@@@can.onEvent] or `.addEventListener()` to be compatible\n\t * with can-reflect.onKeyValue.  The function passed as `callback` will receive the event descriptor as the first\n\t * argument, and any data passed to the event dispatch as subsequent arguments.\n\t *\n\t * ```js\n\t * var obj = new DefineMap({ foo: \"bar\" });\n\t * canReflect.onEvent(obj, \"foo\", function(ev, newVal, oldVal) {\n\t * \tconsole.log(\"foo is now\", newVal, \", was\", oldVal);\n\t * });\n\t *\n\t * canEvent.dispatch.call(obj, \"foo\", [\"baz\", \"quux\"]);  // -> logs \"foo is now baz , was quux\"\n\t * ```\n\t *\n\t * @param {Object} obj the object to bind a new event handler to\n\t * @param {String} eventName the name of the event to bind the handler to\n\t * @param {function(*)} callback  the handler function to bind to the event\n\t */\n\tonEvent: function(obj, eventName, callback, queue){\n\t\tif(obj) {\n\t\t\tvar onEvent = obj[canSymbol_1_7_0_canSymbol.for(\"can.onEvent\")];\n\t\t\tif(onEvent !== undefined) {\n\t\t\t\treturn onEvent.call(obj, eventName, callback, queue);\n\t\t\t} else if(obj.addEventListener) {\n\t\t\t\tobj.addEventListener(eventName, callback, queue);\n\t\t\t}\n\t\t}\n\t},\n\t/**\n\t * @function {Object, String, function(*)} can-reflect/observe.offValue offEvent\n\t * @parent can-reflect/observe\n\t * @description  Unregister an event handler on a MapLike object, based on a key change\n\t *\n\t * @signature `offEvent(obj, eventName, callback)`\n\t *\n\t * Unregister an event handler from the object `obj` that had previously been registered with\n\t * [can-reflect/observe.onEvent onEvent]. The function passed as `callback` will no longer be called\n\t * when the event named `eventName` is dispatched on `obj`.\n\t *\n\t * ```js\n\t * var obj = new DefineMap({ foo: \"bar\" });\n\t * var handler = function(ev, newVal, oldVal) {\n\t * \tconsole.log(\"foo is now\", newVal, \", was\", oldVal);\n\t * };\n\t *\n\t * canReflect.onEvent(obj, \"foo\", handler);\n\t * canReflect.offEvent(obj, \"foo\", handler);\n\t *\n\t * canEvent.dispatch.call(obj, \"foo\", [\"baz\", \"quux\"]);  // -> nothing is logged\n\t * ```\n\t *\n\t * @param {Object} obj the object to unbind an event handler from\n\t * @param {String} eventName the name of the event to unbind the handler from\n\t * @param {function(*)} callback the handler function to unbind from the event\n\t */\n\toffEvent: function(obj, eventName, callback, queue){\n\t\tif(obj) {\n\t\t\tvar offEvent = obj[canSymbol_1_7_0_canSymbol.for(\"can.offEvent\")];\n\t\t\tif(offEvent !== undefined) {\n\t\t\t\treturn offEvent.call(obj, eventName, callback, queue);\n\t\t\t}  else if(obj.removeEventListener) {\n\t\t\t\tobj.removeEventListener(eventName, callback, queue);\n\t\t\t}\n\t\t}\n\n\t},\n\t/**\n\t * @function {function} can-reflect/setPriority setPriority\n\t * @parent can-reflect/observe\n\t * @description  Provide a priority for when an observable that derives its\n\t * value should be re-evaluated.\n\t *\n\t * @signature `setPriority(obj, priority)`\n\t *\n\t * Calls an underlying `@@can.setPriority` symbol on `obj` if it exists with `priorty`.\n\t * Returns `true` if a priority was set, `false` if otherwise.\n\t *\n\t * Lower priorities (`0` being the lowest), will be an indication to run earlier than\n\t * higher priorities.\n\t *\n\t * ```js\n\t * var obj = canReflect.assignSymbols({},{\n\t *   \"can.setPriority\": function(priority){\n\t *     return this.priority = priority;\n\t *   }\n\t * });\n\t *\n\t * canReflect.setPriority(obj, 0) //-> true\n\t * obj.priority //-> 0\n\t *\n\t * canReflect.setPriority({},20) //-> false\n\t * ```\n\t *\n\t * @param {Object} obj An observable that will update its priority.\n\t * @param {Number} priority The priority number.  Lower priorities (`0` being the lowest),\n\t * indicate to run earlier than higher priorities.\n\t * @return {Boolean} `true` if a priority was able to be set, `false` if otherwise.\n\t *\n\t * @body\n\t *\n\t * ## Use\n\t *\n\t * There's often a need to specify the order of re-evaluation for\n\t * __observables__ that derive (or compute) their value from other observables.\n\t *\n\t * This is needed by templates to avoid unnecessary re-evaluation.  Say we had the following template:\n\t *\n\t * ```js\n\t * {{#if value}}\n\t *   {{value}}\n\t * {{/if}}\n\t * ```\n\t *\n\t * If `value` became falsey, we'd want the `{{#if}}` to be aware of it before\n\t * the `{{value}}` magic tags updated. We can do that by setting priorities:\n\t *\n\t * ```js\n\t * canReflect.setPriority(magicIfObservable, 0);\n\t * canReflect.setPriority(magicValueObservable,1);\n\t * ```\n\t *\n\t * Internally, those observables will use that `priority` to register their\n\t * re-evaluation with the `derive` queue in [can-queues].\n\t *\n\t */\n\tsetPriority: function(obj, priority) {\n\t\tif(obj) {\n\t\t\tvar setPriority =  obj[canSymbol_1_7_0_canSymbol.for(\"can.setPriority\")];\n\t\t\tif(setPriority !== undefined) {\n\t\t\t\tsetPriority.call(obj, priority);\n\t\t\t \treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t},\n\t/**\n\t * @function {function} can-reflect/getPriority getPriority\n\t * @parent can-reflect/observe\n\t * @description  Read the priority for an observable that derives its\n\t * value.\n\t *\n\t * @signature `getPriority(obj)`\n\t *\n\t * Calls an underlying `@@can.getPriority` symbol on `obj` if it exists\n\t * and returns its value. Read [can-reflect/setPriority] for more information.\n\t *\n\t *\n\t *\n\t * @param {Object} obj An observable.\n\t * @return {Undefined|Number} Returns the priority number if\n\t * available, undefined if this object does not support the `can.getPriority`\n\t * symbol.\n\t *\n\t * @body\n\t *\n\t */\n\tgetPriority: function(obj) {\n\t\tif(obj) {\n\t\t\tvar getPriority =  obj[canSymbol_1_7_0_canSymbol.for(\"can.getPriority\")];\n\t\t\tif(getPriority !== undefined) {\n\t\t\t\treturn getPriority.call(obj);\n\t\t\t}\n\t\t}\n\t\treturn undefined;\n\t}\n};\n\n// IE-remove-start\nvar getPrototypeOfWorksWithPrimitives = true;\ntry {\n} catch(e) {\n\tgetPrototypeOfWorksWithPrimitives = false;\n}\n// IE-remove-end\n\nvar ArrayMap;\nif(typeof Map === \"function\") {\n\tArrayMap = Map;\n} else {\n\t// IE-remove-start\n\tvar isEven = function isEven(num) {\n\t\treturn num % 2 === 0;\n\t};\n\n\t// A simple map that stores items in an array.\n\t// like [key, value]\n\t// You can find the value by searching for the key and then +1.\n\tArrayMap = function(){\n\t\tthis.contents = [];\n\t};\n\n\tArrayMap.prototype = {\n\t\t/**\n\t\t * Get an index of a key. Because we store boths keys and values in\n\t\t * a flat array, we ensure we are getting a key by checking that it is an\n\t\t * even number index (all keys are even number indexed).\n\t\t **/\n\t\t_getIndex: function(key) {\n\t\t\tvar idx;\n\t\t\tdo {\n\t\t\t\tidx = this.contents.indexOf(key, idx);\n\t\t\t} while(idx !== -1 && !isEven(idx));\n\t\t\treturn idx;\n\t\t},\n\t\thas: function(key){\n\t\t\treturn this._getIndex(key) !== -1;\n\t\t},\n\t\tget: function(key){\n\t\t\tvar idx = this._getIndex(key);\n\t\t\tif(idx !== -1) {\n\t\t\t\treturn this.contents[idx + 1];\n\t\t\t}\n\t\t},\n\t\tset: function(key, value){\n\t\t\tvar idx = this._getIndex(key);\n\t\t\tif(idx !== -1) {\n\t\t\t\t// Key already exists, replace the value.\n\t\t\t\tthis.contents[idx + 1] = value;\n\t\t\t} else {\n\t\t\t\tthis.contents.push(key);\n\t\t\t\tthis.contents.push(value);\n\t\t\t}\n\t\t},\n\t\t\"delete\": function(key){\n\t\t\tvar idx = this._getIndex(key);\n\t\t\tif(idx !== -1) {\n\t\t\t\t// Key already exists, replace the value.\n\t\t\t\tthis.contents.splice(idx, 2);\n\t\t\t}\n\t\t}\n\t};\n\t// IE-remove-end\n}\n\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\nvar shapeReflections;\n\nvar shiftFirstArgumentToThis = function(func){\n\treturn function(){\n\t\tvar args = [this];\n\t\targs.push.apply(args, arguments);\n\t\treturn func.apply(null,args);\n\t};\n};\n\nvar getKeyValueSymbol$1 = canSymbol_1_7_0_canSymbol.for(\"can.getKeyValue\");\nvar shiftedGetKeyValue = shiftFirstArgumentToThis(getSet.getKeyValue);\nvar setKeyValueSymbol$1 = canSymbol_1_7_0_canSymbol.for(\"can.setKeyValue\");\nvar shiftedSetKeyValue = shiftFirstArgumentToThis(getSet.setKeyValue);\n\nvar sizeSymbol = canSymbol_1_7_0_canSymbol.for(\"can.size\");\n\nvar hasUpdateSymbol = helpers.makeGetFirstSymbolValue([\"can.updateDeep\",\"can.assignDeep\",\"can.setKeyValue\"]);\nvar shouldUpdateOrAssign = function(obj){\n\treturn type.isPlainObject(obj) || Array.isArray(obj) || !!hasUpdateSymbol(obj);\n};\n\n// is the value itself its serialized value\nfunction isSerializedHelper(obj){\n\tif (type.isPrimitive(obj)) {\n\t\treturn true;\n\t}\n\tif(hasUpdateSymbol(obj)) {\n\t\treturn false;\n\t}\n\treturn type.isBuiltIn(obj) && !type.isPlainObject(obj) && !Array.isArray(obj) && !type.isObservableLike(obj);\n}\n\n// IE11 doesn't support primitives\nvar Object_Keys;\ntry{\n\tObject_Keys = Object.keys;\n} catch(e) {\n\tObject_Keys = function(obj){\n\t\tif(type.isPrimitive(obj)) {\n\t\t\treturn [];\n\t\t} else {\n\t\t\treturn Object.keys(obj);\n\t\t}\n\t};\n}\n\nfunction createSerializeMap(Type) {\n\tvar MapType = Type || ArrayMap;\n\treturn {\n\t\tunwrap: new MapType(),\n\t\tserialize: new MapType() ,\n\t\tisSerializing: {\n\t\t\tunwrap: new MapType(),\n\t\t\tserialize: new MapType()\n\t\t},\n\t\tcircularReferenceIsSerializing: {\n\t\t\tunwrap: new MapType(),\n\t\t\tserialize: new MapType()\n\t\t}\n\t};\n}\n\nfunction makeSerializer(methodName, symbolsToCheck){\n\t// A local variable that is shared with all operations that occur withing a single\n\t// outer call to serialize()\n\tvar serializeMap = null;\n\n\t// Holds the value of running serialize(), preserving the same map for all\n\t// internal instances.\n\tfunction SerializeOperation(MapType) {\n\t\tthis.first = !serializeMap;\n\n\t\tif(this.first) {\n\t\t\tserializeMap = createSerializeMap(MapType);\n\t\t}\n\n\t\tthis.map = serializeMap;\n\t\tthis.result = null;\n\t}\n\n\tSerializeOperation.prototype.end = function(){\n\t\t// If this is the first, outer call, clean up the serializeMap.\n\t\tif(this.first) {\n\t\t\tserializeMap = null;\n\t\t}\n\t\treturn this.result;\n\t};\n\n\treturn function serializer(value, MapType){\n\t\tif (isSerializedHelper(value)) {\n\t\t\treturn value;\n\t\t}\n\n\t\tvar operation = new SerializeOperation(MapType);\n\n\t\tif(type.isValueLike(value)) {\n\t\t\toperation.result = this[methodName](getSet.getValue(value));\n\n\t\t} else {\n\t\t\t// Date, RegEx and other Built-ins are handled above\n\t\t\t// only want to do something if it's intended to be serialized\n\t\t\t// or do nothing for a POJO\n\n\t\t\tvar isListLike = type.isIteratorLike(value) || type.isMoreListLikeThanMapLike(value);\n\t\t\toperation.result = isListLike ? [] : {};\n\n\t\t\t// handle maping to what is serialized\n\t\t\tif( operation.map[methodName].has(value) ) {\n\t\t\t\t// if we are in the process of serializing the first time, setup circular reference detection.\n\t\t\t\tif(operation.map.isSerializing[methodName].has(value)) {\n\t\t\t\t\toperation.map.circularReferenceIsSerializing[methodName].set(value, true);\n\t\t\t\t}\n\t\t\t\treturn operation.map[methodName].get(value);\n\t\t\t} else {\n\t\t\t\toperation.map[methodName].set(value, operation.result);\n\t\t\t}\n\n\t\t\tfor(var i = 0, len = symbolsToCheck.length ; i< len;i++) {\n\t\t\t\tvar serializer = value[symbolsToCheck[i]];\n\t\t\t\tif(serializer) {\n\t\t\t\t\t// mark that we are serializing\n\t\t\t\t\toperation.map.isSerializing[methodName].set(value, true);\n\t\t\t\t\tvar oldResult = operation.result;\n\t\t\t\t\toperation.result = serializer.call(value, oldResult);\n\t\t\t\t\toperation.map.isSerializing[methodName].delete(value);\n\n\t\t\t\t\t// if the result differs, but this was circular, blow up.\n\t\t\t\t\tif(operation.result !== oldResult) {\n\t\t\t\t\t\t// jshint -W073\n\t\t\t\t\t\tif(operation.map.circularReferenceIsSerializing[methodName].has(value)) {\n\t\t\t\t\t\t\t// Circular references should use a custom serializer\n\t\t\t\t\t\t\t// that sets the serialized value on the object\n\t\t\t\t\t\t\t// passed to it as the first argument e.g.\n\t\t\t\t\t\t\t// function(proto){\n\t\t\t\t\t\t\t//   return proto.a = canReflect.serialize(this.a);\n\t\t\t\t\t\t\t// }\n\t\t\t\t\t\t\toperation.end();\n\t\t\t\t\t\t\tthrow new Error(\"Cannot serialize cirular reference!\");\n\t\t\t\t\t\t}\n\t\t\t\t\t\toperation.map[methodName].set(value, operation.result);\n\t\t\t\t\t}\n\t\t\t\t\treturn operation.end();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (typeof obj ==='function') {\n\t\t\t\toperation.map[methodName].set(value, value);\n\n\t\t\t\toperation.result = value;\n\t\t\t} else if( isListLike ) {\n\t\t\t\tthis.eachIndex(value,function(childValue, index){\n\t\t\t\t\toperation.result[index] = this[methodName](childValue);\n\t\t\t\t},this);\n\t\t\t} else {\n\t\t\t\tthis.eachKey(value,function(childValue, prop){\n\t\t\t\t\toperation.result[prop] = this[methodName](childValue);\n\t\t\t\t},this);\n\t\t\t}\n\t\t}\n\n\t\treturn operation.end();\n\t};\n}\n\n// returns a Map type of the keys mapped to true\nvar makeMap;\nif(typeof Map !== \"undefined\") {\n\tmakeMap = function(keys) {\n\t\tvar map = new Map();\n\t\tshapeReflections.eachIndex(keys, function(key){\n\t\t\tmap.set(key, true);\n\t\t});\n\t\treturn map;\n\t};\n} else {\n\tmakeMap = function(keys) {\n\t\tvar map = {};\n\t\tkeys.forEach(function(key){\n\t\t\tmap[key] = true;\n\t\t});\n\n\t\treturn {\n\t\t\tget: function(key){\n\t\t\t\treturn map[key];\n\t\t\t},\n\t\t\tset: function(key, value) {\n\t\t\t\tmap[key] = value;\n\t\t\t},\n\t\t\tkeys: function(){\n\t\t\t\treturn keys;\n\t\t\t}\n\t\t};\n\t};\n}\n\n// creates an optimized hasOwnKey lookup.\n// If the object has hasOwnKey, then we just use that.\n// Otherwise, try to put all keys in a map.\nvar fastHasOwnKey = function(obj){\n\tvar hasOwnKey = obj[canSymbol_1_7_0_canSymbol.for(\"can.hasOwnKey\")];\n\tif(hasOwnKey) {\n\t\treturn hasOwnKey.bind(obj);\n\t} else {\n\t\tvar map = makeMap( shapeReflections.getOwnEnumerableKeys(obj) );\n\t\treturn function(key) {\n\t\t\treturn map.get(key);\n\t\t};\n\t}\n};\n\n\n// combines patches if it makes sense\nfunction addPatch(patches, patch) {\n\tvar lastPatch = patches[patches.length -1];\n\tif(lastPatch) {\n\t\t// same number of deletes and counts as the index is back\n\t\tif(lastPatch.deleteCount === lastPatch.insert.length && (patch.index - lastPatch.index === lastPatch.deleteCount) ) {\n\t\t\tlastPatch.insert.push.apply(lastPatch.insert, patch.insert);\n\t\t\tlastPatch.deleteCount += patch.deleteCount;\n\t\t\treturn;\n\t\t}\n\t}\n\tpatches.push(patch);\n}\n\nfunction updateDeepList(target, source, isAssign) {\n\tvar sourceArray = this.toArray(source); // jshint ignore:line\n\n\tvar patches = [],\n\t\tlastIndex = -1;\n\tthis.eachIndex(target, function(curVal, index){ // jshint ignore:line\n\t\tlastIndex = index;\n\t\t// If target has more items than the source.\n\t\tif(index >= sourceArray.length) {\n\t\t\tif(!isAssign) {\n\t\t\t\t// add a patch that removes the last items\n\t\t\t\taddPatch(patches, {index: index, deleteCount: target.length - index + 1, insert: []});\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\t\tvar newVal = sourceArray[index];\n\t\tif( type.isPrimitive(curVal) || type.isPrimitive(newVal) || shouldUpdateOrAssign(curVal) === false ) {\n\t\t\taddPatch(patches, {index: index, deleteCount: 1, insert: [newVal]});\n\t\t} else {\n\t\t\tif(isAssign === true) {\n\t\t\t\tthis.assignDeep(curVal, newVal);\n\t\t\t} else {\n\t\t\t\tthis.updateDeep(curVal, newVal);\n\t\t\t}\n\n\t\t}\n\t}, this); // jshint ignore:line\n\t// add items at the end\n\tif(sourceArray.length > lastIndex) {\n\t\taddPatch(patches, {index: lastIndex+1, deleteCount: 0, insert: sourceArray.slice(lastIndex+1)});\n\t}\n\tfor(var i = 0, patchLen = patches.length; i < patchLen; i++) {\n\t\tvar patch = patches[i];\n\t\tgetSet.splice(target, patch.index, patch.deleteCount, patch.insert);\n\t}\n\treturn target;\n}\n\nshapeReflections = {\n\t/**\n\t * @function {Object, function(*), [Object]} can-reflect.each each\n\t * @parent can-reflect/shape\n\t * @description  Iterate a List-like or Map-like, calling `callback` on each keyed or indexed property\n\t *\n\t * @signature `each(obj, callback, context)`\n\t *\n\t * If `obj` is a List-like or an Iterator-like, `each` functions as [can-reflect.eachIndex eachIndex],\n\t * iterating over numeric indexes from 0 to `obj.length - 1` and calling `callback` with each property and\n\t * index, optionally with `context` as `this` (defaulting to `obj`).  If not, `each` functions as\n\t * [can-reflect.eachKey eachKey],\n\t * iterating over every key on `obj` and calling `callback` on each one.\n\t *\n\t * ```js\n\t * var foo = new DefineMap({ bar: \"baz\" });\n\t * var quux = new DefineList([ \"thud\", \"jeek\" ]);\n\t *\n\t * canReflect.each(foo, console.log, console); // -> logs 'baz bar {foo}'\n\t * canReflect.each(quux, console.log, console); // -> logs 'thud 0 {quux}'; logs 'jeek 1 {quux}'\n\t * ```\n\t *\n\t * @param  {Object}   obj     The object to iterate over\n\t * @param  {Function(*, ValueLike)} callback a function that receives each item in the ListLike or MapLike\n\t * @param  {[Object]}   context  an optional `this` context for calling the callback\n\t * @return {Array} the result of calling [can-reflect.eachIndex `eachIndex`] if `obj` is a ListLike,\n\t * or [can-reflect.eachKey `eachKey`] if a MapLike.\n\t */\n\teach: function(obj, callback, context){\n\n\t\t// if something is more \"list like\" .. use eachIndex\n\t\tif(type.isIteratorLike(obj) || type.isMoreListLikeThanMapLike(obj) ) {\n\t\t\treturn shapeReflections.eachIndex(obj,callback,context);\n\t\t} else {\n\t\t\treturn shapeReflections.eachKey(obj,callback,context);\n\t\t}\n\t},\n\n\t/**\n\t * @function {ListLike, function(*), [Object]} can-reflect.eachIndex eachIndex\n\t * @parent can-reflect/shape\n\t * @description  Iterate a ListLike calling `callback` on each numerically indexed element\n\t *\n\t * @signature `eachIndex(list, callback, context)`\n\t *\n\t * For each numeric index from 0 to `list.length - 1`, call `callback`, passing the current\n\t * property value, the current index, and `list`, and optionally setting `this` as `context`\n\t * if specified (otherwise use the current property value).\n\t *\n\t * ```js\n\t * var foo = new DefineList([ \"bar\", \"baz\" ]);\n\t *\n\t * canReflect.eachIndex(foo, console.log, console); // -> logs 'bar 0 {foo}'; logs 'baz 1 {foo}'\n\t * ```\n\t *\n\t * @param  {ListLike}   list     The list to iterate over\n\t * @param  {Function(*, Number)} callback a function that receives each item\n\t * @param  {[Object]}   context  an optional `this` context for calling the callback\n\t * @return {ListLike}   the original list\n\t */\n\teachIndex: function(list, callback, context){\n\t\t// each index in something list-like. Uses iterator if it has it.\n\t\tif(Array.isArray(list)) {\n\t\t\treturn shapeReflections.eachListLike(list, callback, context);\n\t\t} else {\n\t\t\tvar iter, iterator = list[canSymbol_1_7_0_canSymbol.iterator];\n\t\t\tif(type.isIteratorLike(list)) {\n\t\t\t\t// we are looping through an iterator\n\t\t\t\titer = list;\n\t\t\t} else if(iterator) {\n\t\t\t\titer = iterator.call(list);\n\t\t\t}\n\t\t\t// fast-path arrays\n\t\t\tif(iter) {\n\t\t\t\tvar res, index = 0;\n\n\t\t\t\twhile(!(res = iter.next()).done) {\n\t\t\t\t\tif( callback.call(context || list, res.value, index++, list) === false ){\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tshapeReflections.eachListLike(list, callback, context);\n\t\t\t}\n\t\t}\n\t\treturn list;\n\t},\n\teachListLike: function(list, callback, context){\n\t\tvar index = -1;\n\t\tvar length = list.length;\n\t\tif( length === undefined ) {\n\t\t\tvar size = list[sizeSymbol];\n\t\t\tif(size) {\n\t\t\t\tlength = size.call(list);\n\t\t\t} else {\n\t\t\t\tthrow new Error(\"can-reflect: unable to iterate.\");\n\t\t\t}\n\t\t}\n\n\t\twhile (++index < length) {\n\t\t\tvar item = list[index];\n\t\t\tif (callback.call(context || item, item, index, list) === false) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn list;\n\t},\n\t/**\n\t * @function can-reflect.toArray toArray\n\t * @parent can-reflect/shape\n\t * @description  convert the values of any MapLike or ListLike into an array\n\t *\n\t * @signature `toArray(obj)`\n\t *\n\t * Convert the values of any Map-like or List-like into a JavaScript Array.  If a Map-like,\n\t * key data is discarded and only value data is preserved.\n\t *\n\t * ```js\n\t * var foo = new DefineList([\"bar\", \"baz\"]);\n\t * var quux = new DefineMap({ thud: \"jeek\" });\n\t * ```\n\t *\n\t * canReflect.toArray(foo); // -> [\"bar\", \"baz\"]\n\t * canReflect.toArray(quux): // -> [\"jeek\"]\n\t *\n\t * @param  {Object} obj Any object, whether MapLike or ListLike\n\t * @return {Array}  an array of the values of `obj`\n\t */\n\ttoArray: function(obj){\n\t\tvar arr = [];\n\t\tshapeReflections.each(obj, function(value){\n\t\t\tarr.push(value);\n\t\t});\n\t\treturn arr;\n\t},\n\t/**\n\t * @function can-reflect.eachKey eachKey\n\t * @parent can-reflect/shape\n\t * @description Iterate over a MapLike, calling `callback` on each enumerable property\n\t *\n\t * @signature `eachKey(obj, callback, context)`\n\t *\n\t * Iterate all own enumerable properties on Map-like `obj`\n\t * (using [can-reflect/shape/getOwnEnumerableKeys canReflect.getOwnEnumerableKeys]), and call\n\t * `callback` with the property value, the property key, and `obj`, and optionally setting\n\t * `this` on the callback as `context` if provided, `obj` otherwise.\n\t *\n\t * ```js\n\t * var foo = new DefineMap({ bar: \"baz\" });\n\t *\n\t * canReflect.eachKey(foo, console.log, console); // logs 'baz bar {foo}'\n\t * ```\n\t *\n\t * @param  {Object}   obj   The object to iterate over\n\t * @param  {Function(*, String)} callback The callback to call on each enumerable property value\n\t * @param  {[Object]}   context  an optional `this` context for calling `callback`\n\t * @return {Array}    the enumerable keys of `obj` as an Array\n\t */\n\teachKey: function(obj, callback, context){\n\t\t// each key in something map like\n\t\t// eachOwnEnumerableKey\n\t\tif(obj) {\n\t\t\tvar enumerableKeys = shapeReflections.getOwnEnumerableKeys(obj);\n\n\t\t\t// cache getKeyValue method if we can\n\t\t\tvar getKeyValue = obj[getKeyValueSymbol$1] || shiftedGetKeyValue;\n\n\t\t\treturn shapeReflections.eachIndex(enumerableKeys, function(key){\n\t\t\t\tvar value = getKeyValue.call(obj, key);\n\t\t\t\treturn callback.call(context || obj, value, key, obj);\n\t\t\t});\n\t\t}\n\t\treturn obj;\n\t},\n\t/**\n\t * @function can-reflect.hasOwnKey hasOwnKey\n\t * @parent can-reflect/shape\n\t * @description  Determine whether an object contains a key on itself, not only on its prototype chain\n\t *\n\t * @signature `hasOwnKey(obj, key)`\n\t *\n\t * Return `true` if an object's own properties include the property key `key`, `false` otherwise.\n\t * An object may implement [can-symbol/symbols/hasOwnKey @@@@can.hasOwnKey] to override default behavior.\n\t * By default, `canReflect.hasOwnKey` will first look for\n\t * [can-symbol/symbols/getOwnKey @@@@can.getOwnKey] on `obj`. If present, it will call `@@@@can.getOwnKey` and\n\t * test `key` against the returned Array of keys.  If absent, `Object.prototype.hasOwnKey()` is used.\n\t *\n\t * ```js\n\t * var foo = new DefineMap({ \"bar\": \"baz\" });\n\t *\n\t * canReflect.hasOwnKey(foo, \"bar\"); // -> true\n\t * canReflect.hasOwnKey(foo, \"each\"); // -> false\n\t * foo.each // -> function each() {...}\n\t * ```\n\t *\n\t * @param  {Object} obj Any MapLike object\n\t * @param  {String} key The key to look up on `obj`\n\t * @return {Boolean} `true` if `obj`'s key set contains `key`, `false` otherwise\n\t */\n\t\"hasOwnKey\": function(obj, key){\n\t\t// if a key or index\n\t\t// like has own property\n\t\tvar hasOwnKey = obj[canSymbol_1_7_0_canSymbol.for(\"can.hasOwnKey\")];\n\t\tif(hasOwnKey) {\n\t\t\treturn hasOwnKey.call(obj, key);\n\t\t}\n\t\tvar getOwnKeys = obj[canSymbol_1_7_0_canSymbol.for(\"can.getOwnKeys\")];\n\t\tif( getOwnKeys ) {\n\t\t\tvar found = false;\n\t\t\tshapeReflections.eachIndex(getOwnKeys.call(obj), function(objKey){\n\t\t\t\tif(objKey === key) {\n\t\t\t\t\tfound = true;\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn found;\n\t\t}\n\t\treturn hasOwnProperty.call(obj, key);\n\t},\n\t/**\n\t * @function can-reflect.getOwnEnumerableKeys getOwnEnumerableKeys\n\t * @parent can-reflect/shape\n\t * @description Return the list of keys which can be iterated over on an object\n\t *\n\t * @signature `getOwnEnumerableKeys(obj)`\n\t *\n\t * Return all keys on `obj` which have been defined as enumerable, either from explicitly setting\n\t * `enumerable` on the property descriptor, or by using `=` to set the value of the property without\n\t * a key descriptor, but excluding properties that only exist on `obj`'s prototype chain.  The\n\t * default behavior can be overridden by implementing\n\t * [can-symbol/symbols/getOwnEnumerableKeys @@@@can.getOwnEnumerableKeys] on `obj`.  By default,\n\t * `canReflect.getOwnEnumerableKeys` will use [can-symbol/symbols/getOwnKeys @@@@can.getOwnKeys] to\n\t * retrieve the set of keys and [can-symbol/symbols/getOwnKeyDescriptor @@@@can.getOwnKeyDescriptor]\n\t * to filter for those which are enumerable.  If either symbol is absent from `obj`, `Object.keys`\n\t * is used.\n\t *\n\t * ```js\n\t * var foo = new DefineMap({ bar: \"baz\", [canSymbol.for(\"quux\")]: \"thud\" });\n\t * Object.defineProperty(foo, \"jeek\", {\n\t *   enumerable: true,\n\t *   value: \"plonk\"\n\t * });\n\t *\n\t * canReflect.getOwnEnumerableKeys(foo); // -> [\"bar\", \"jeek\"]\n\t * ```\n\t *\n\t * @param  {Object} obj Any Map-like object\n\t * @return {Array} the Array of all enumerable keys from the object, either using\n\t * [can-symbol/symbols/getOwnEnumerableKeys `@@@@can.getOwnEnumerableKeys`] from `obj`, or filtering\n\t * `obj`'s own keys for those which are enumerable.\n\t */\n\tgetOwnEnumerableKeys: function(obj){\n\t\t// own enumerable keys (aliased as keys)\n\t\tvar getOwnEnumerableKeys = obj[canSymbol_1_7_0_canSymbol.for(\"can.getOwnEnumerableKeys\")];\n\t\tif(getOwnEnumerableKeys) {\n\t\t\treturn getOwnEnumerableKeys.call(obj);\n\t\t}\n\t\tif( obj[canSymbol_1_7_0_canSymbol.for(\"can.getOwnKeys\")] && obj[canSymbol_1_7_0_canSymbol.for(\"can.getOwnKeyDescriptor\")] ) {\n\t\t\tvar keys = [];\n\t\t\tshapeReflections.eachIndex(shapeReflections.getOwnKeys(obj), function(key){\n\t\t\t\tvar descriptor =  shapeReflections.getOwnKeyDescriptor(obj, key);\n\t\t\t\tif(descriptor.enumerable) {\n\t\t\t\t\tkeys.push(key);\n\t\t\t\t}\n\t\t\t}, this);\n\n\t\t\treturn keys;\n\t\t} /*else if(obj[canSymbol.iterator]){\n\t\t\tvar iter = obj[canSymbol.iterator](obj);\n\t\t\tvar index = 0;\n\t\t\tvar keys;\n\t\t\treturn {\n\t\t\t\tnext: function(){\n\t\t\t\t\tvar res = iter.next();\n\t\t\t\t\tif(index++)\n\t\t\t\t}\n\t\t\t}\n\t\t\twhile(!().done) {\n\n\t\t\t\tif( callback.call(context || list, res.value, index++, list) === false ){\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}*/ else {\n\t\t\treturn Object_Keys(obj);\n\t\t}\n\t},\n\t/**\n\t * @function can-reflect.getOwnKeys getOwnKeys\n\t * @parent can-reflect/shape\n\t * @description Return the list of keys on an object, whether or not they can be iterated over\n\t *\n\t * @signature `getOwnKeys(obj)`\n\t *\n\t * Return the Array of all String (not Symbol) keys from `obj`, whether they are enumerable or not.  If\n\t * [can-symbol/symbols/getOwnKeys @@@@can.getOwnKeys] exists on `obj`, it is called to return\n\t * the keys; otherwise, `Object.getOwnPropertyNames()` is used.\n\t *\n\t * ```js\n\t * var foo = new DefineMap({ bar: \"baz\", [canSymbol.for(\"quux\")]: \"thud\" });\n\t * Object.defineProperty(foo, \"jeek\", {\n\t *   enumerable: false,\n\t *   value: \"plonk\"\n\t * });\n\t *\n\t * canReflect.getOwnKeys(foo); // -> [\"bar\", \"jeek\"]\n\t * ```\n\t *\n\t * @param  {Object} obj Any MapLike object\n\t * @return {Array} the Array of all String keys from the object.\n\t */\n\tgetOwnKeys: function(obj){\n\t\t// own enumerable&non-enumerable keys (Object.getOwnPropertyNames)\n\t\tvar getOwnKeys = obj[canSymbol_1_7_0_canSymbol.for(\"can.getOwnKeys\")];\n\t\tif(getOwnKeys) {\n\t\t\treturn getOwnKeys.call(obj);\n\t\t} else {\n\t\t\treturn Object.getOwnPropertyNames(obj);\n\t\t}\n\t},\n\t/**\n\t * @function can-reflect.getOwnKeyDescriptor getOwnKeyDescriptor\n\t * @parent can-reflect/shape\n\t * @description Return a property descriptor for a named property on an object.\n\t *\n\t * @signature `getOwnKeyDescriptor(obj, key)`\n\t *\n\t *\tReturn the key descriptor for the property key `key` on the Map-like object `obj`. A key descriptor\n\t *\tis specified in ECMAScript 5 and contains keys for the property's `configurable` and `enumerable` states,\n\t *\tas well as either `value` and `writable` for value properties, or `get` and `set` for getter/setter properties.\n\t *\n\t * The default behavior can be overridden by implementing [can-symbol/symbols/getOwnKeyDescriptor @@@@can.getOwnKeyDescriptor]\n\t * on `obj`; otherwise the default is to call `Object.getOwnKeyDescriptor()`.\n\t *\n\t * ```js\n\t * var foo = new DefineMap({ bar: \"baz\" });\n\t *\n\t * getOwnKeyDescriptor(foo, \"bar\"); // -> {configurable: true, writable: true, enumerable: true, value: \"baz\"}\n\t * ```\n\t *\n\t * @param  {Object} obj Any object with named properties\n\t * @param  {String} key The property name to look up on `obj`\n\t * @return {Object}   A key descriptor object\n\t */\n\tgetOwnKeyDescriptor: function(obj, key){\n\t\tvar getOwnKeyDescriptor = obj[canSymbol_1_7_0_canSymbol.for(\"can.getOwnKeyDescriptor\")];\n\t\tif(getOwnKeyDescriptor) {\n\t\t\treturn getOwnKeyDescriptor.call(obj, key);\n\t\t} else {\n\t\t\treturn Object.getOwnPropertyDescriptor(obj, key);\n\t\t}\n\t},\n\t/**\n\t * @function can-reflect.unwrap unwrap\n\t * @parent can-reflect/shape\n\t * @description Unwraps a map-like or array-like value into an object or array.\n\t *\n\t *\n\t * @signature `unwrap(obj)`\n\t *\n\t * Recursively unwraps a map-like or list-like object.\n\t *\n\t * ```js\n\t * import canReflect from \"can-reflect\";\n\t *\n\t * var map = new DefineMap({foo: \"bar\"});\n\t * canReflect.unwrap(map) //-> {foo: \"bar\"}\n\t * ```\n\t *\n\t * `unwrap` is similar to [can-reflect.serialize] except it does not try to provide `JSON.stringify()`-safe\n\t * objects.  For example, an object with a `Date` instance property value will not be expected to\n\t * serialize the date instance:\n\t *\n\t * ```js\n\t * var date = new Date();\n\t * var map = new DefineMap({date: date});\n\t * canReflect.unwrap(map) //-> {date: date}\n\t * ```\n\t *\n\t * @param {Object} obj A map-like or array-like object.\n\t * @return {Object} Returns objects and arrays.\n\t */\n\tunwrap: makeSerializer(\"unwrap\",[canSymbol_1_7_0_canSymbol.for(\"can.unwrap\")]),\n\t/**\n\t * @function can-reflect.serialize serialize\n\t * @parent can-reflect/shape\n\t * @description Serializes an object to a value that can be passed to JSON.stringify.\n\t *\n\t *\n\t * @signature `serialize(obj)`\n\t *\n\t * Recursively serializes a map-like or list-like object.\n\t *\n\t * ```js\n\t * import canReflect from \"can-reflect\";\n\t * canReflect.serialize({foo: \"bar\"}) //-> {foo: \"bar\"}\n\t * ```\n\t *\n\t * It does this by recursively:\n\t *\n\t *  - Checking if `obj` is a primitive, if it is, returns the value.\n\t *  - If `obj` is an object:\n\t *    - calling the `@can.serialize` property on the value if it exists.\n\t *    - If the `@can.serialize` value doesn't exist, walks through every key-value\n\t *      on `obj` and copy to a new object.\n\t *\n\t * @param {Object} obj A map-like or array-like object.\n\t * @return {Object} Returns a plain object or array.\n\t */\n\tserialize: makeSerializer(\"serialize\",[canSymbol_1_7_0_canSymbol.for(\"can.serialize\"), canSymbol_1_7_0_canSymbol.for(\"can.unwrap\")]),\n\n\tassignMap: function(target, source) {\n\t\t// read each key and set it on target\n\t\tvar hasOwnKey = fastHasOwnKey(target);\n\t\tvar getKeyValue = target[getKeyValueSymbol$1] || shiftedGetKeyValue;\n\t\tvar setKeyValue = target[setKeyValueSymbol$1] || shiftedSetKeyValue;\n\t\tshapeReflections.eachKey(source,function(value, key){\n\t\t\t// if the target doesn't have this key or the keys are not the same\n\t\t\tif(!hasOwnKey(key) || getKeyValue.call(target, key) !==  value) {\n\t\t\t\tsetKeyValue.call(target, key, value);\n\t\t\t}\n\t\t});\n\t\treturn target;\n\t},\n\tassignList: function(target, source) {\n\t\tvar inserting = shapeReflections.toArray(source);\n\t\tgetSet.splice(target, 0, inserting, inserting );\n\t\treturn target;\n\t},\n\t/**\n\t * @function can-reflect.assign assign\n\t * @parent can-reflect/shape\n\t * @description Assign one objects values to another\n\t *\n\t * @signature `.assign(target, source)`\n\t *\n\t * Copies the values (and properties if map-like) from `source` onto `target`.\n\t *\n\t * For map-like objects, every enumerable property on `target` is copied:\n\t *\n\t * ```js\n\t * var target = {};\n\t * var source = {key : \"value\"};\n\t * var restult = canReflect.assign(target, source);\n\t * result === target //-> true\n\t * target //-> {key : \"value\"}\n\t * ```\n\t *\n\t * For Arrays, enumerated values are copied over, but the length of the array will not be\n\t * trunkated.  Use [can-reflect.update] for trunkating.\n\t *\n\t * ```js\n\t * var target = [\"a\",\"b\",\"c\"];\n\t * var source = [\"A\",\"B\"];\n\t * canReflect.assign(target, source);\n\t * target //-> [\"A\",\"B\",\"c\"]\n\t * ```\n\t *\n\t * @param  {Object} target The value that will be updated with `source`'s values.\n\t * @param  {Object} source A source of values to copy to `target`.\n\t * @return {Object} The target.\n\t */\n\tassign: function(target, source) {\n\t\tif(type.isIteratorLike(source) || type.isMoreListLikeThanMapLike(source) ) {\n\t\t\t// copy to array and add these keys in place\n\t\t\tshapeReflections.assignList(target, source);\n\t\t} else {\n\t\t\tshapeReflections.assignMap(target, source);\n\t\t}\n\t\treturn target;\n\t},\n\tassignDeepMap: function(target, source) {\n\n\t\tvar hasOwnKey = fastHasOwnKey(target);\n\t\tvar getKeyValue = target[getKeyValueSymbol$1] || shiftedGetKeyValue;\n\t\tvar setKeyValue = target[setKeyValueSymbol$1] || shiftedSetKeyValue;\n\n\t\tshapeReflections.eachKey(source, function(newVal, key){\n\t\t\tif(!hasOwnKey(key)) {\n\t\t\t\t// set no matter what\n\t\t\t\tgetSet.setKeyValue(target, key, newVal);\n\t\t\t} else {\n\t\t\t\tvar curVal = getKeyValue.call(target, key);\n\n\t\t\t\t// if either was primitive, no recursive update possible\n\t\t\t\tif(newVal === curVal) {\n\t\t\t\t\t// do nothing\n\t\t\t\t} else if(type.isPrimitive(curVal) || type.isPrimitive(newVal) || shouldUpdateOrAssign(curVal) === false ) {\n\t\t\t\t\tsetKeyValue.call(target, key, newVal);\n\t\t\t\t} else {\n\t\t\t\t\tshapeReflections.assignDeep(curVal, newVal);\n\t\t\t\t}\n\t\t\t}\n\t\t}, this);\n\t\treturn target;\n\t},\n\tassignDeepList: function(target, source) {\n\t\treturn updateDeepList.call(this, target, source, true);\n\t},\n\t/**\n\t * @function can-reflect.assignDeep assignDeep\n\t * @parent can-reflect/shape\n\t * @description Assign one objects values to another, and performs the same action for all child values.\n\t *\n\t * @signature `.assignDeep(target, source)`\n\t *\n\t * Copies the values (and properties if map-like) from `source` onto `target` and repeates for all child\n\t * values.\n\t *\n\t * For map-like objects, every enumerable property on `target` is copied:\n\t *\n\t * ```js\n\t * var target = {name: {first: \"Justin\"}};\n\t * var source = {name: {last: \"Meyer\"}};\n\t * var restult = canReflect.assignDeep(target, source);\n\t * target //->  {name: {first: \"Justin\", last: \"Meyer\"}}\n\t * ```\n\t *\n\t * An object can control the behavior of `assignDeep` using the [can-symbol/symbols/assignDeep] symbol.\n\t *\n\t * @param  {Object} target The value that will be updated with `source`'s values.\n\t * @param  {Object} source A source of values to copy to `target`.\n\t * @return {Object} The target.\n\t */\n\tassignDeep: function(target, source){\n\t\tvar assignDeep = target[canSymbol_1_7_0_canSymbol.for(\"can.assignDeep\")];\n\t\tif(assignDeep) {\n\t\t\tassignDeep.call(target, source);\n\t\t} else if( type.isMoreListLikeThanMapLike(source) ) {\n\t\t\t// list-like\n\t\t\tshapeReflections.assignDeepList(target, source);\n\t\t} else {\n\t\t\t// map-like\n\t\t\tshapeReflections.assignDeepMap(target, source);\n\t\t}\n\t\treturn target;\n\t},\n\tupdateMap: function(target, source) {\n\t\tvar sourceKeyMap = makeMap( shapeReflections.getOwnEnumerableKeys(source) );\n\n\t\tvar sourceGetKeyValue = source[getKeyValueSymbol$1] || shiftedGetKeyValue;\n\t\tvar targetSetKeyValue = target[setKeyValueSymbol$1] || shiftedSetKeyValue;\n\n\t\tshapeReflections.eachKey(target, function(curVal, key){\n\t\t\tif(!sourceKeyMap.get(key)) {\n\t\t\t\tgetSet.deleteKeyValue(target, key);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tsourceKeyMap.set(key, false);\n\t\t\tvar newVal = sourceGetKeyValue.call(source, key);\n\n\t\t\t// if either was primitive, no recursive update possible\n\t\t\tif(newVal !== curVal) {\n\t\t\t\ttargetSetKeyValue.call(target, key, newVal);\n\t\t\t}\n\t\t}, this);\n\n\t\tshapeReflections.eachIndex(sourceKeyMap.keys(), function(key){\n\t\t\tif(sourceKeyMap.get(key)) {\n\t\t\t\ttargetSetKeyValue.call(target, key, sourceGetKeyValue.call(source, key) );\n\t\t\t}\n\t\t});\n\n\t\treturn target;\n\t},\n\tupdateList: function(target, source) {\n\t\tvar inserting = shapeReflections.toArray(source);\n\n\t\tgetSet.splice(target, 0, target, inserting );\n\t\treturn target;\n\t},\n\t/**\n\t * @function can-reflect.update update\n\t * @parent can-reflect/shape\n\t * @description Updates the values of an object match the values of an other object.\n\t *\n\t * @signature `.update(target, source)`\n\t *\n\t * Updates the values (and properties if map-like) of `target` to match the values of `source`.\n\t * Properties of `target` that are not on `source` will be removed. This does\n\t * not recursively update.  For that, use [can-reflect.updateDeep].\n\t *\n\t * For map-like objects, every enumerable property on `target` is copied:\n\t *\n\t * ```js\n\t * var target = {name: {first: \"Justin\"}, age: 34};\n\t * var source = {name: {last: \"Meyer\"}};\n\t * var result = canReflect.update(target, source);\n\t * target //->  {name: {last: \"Meyer\"}}\n\t * ```\n\t *\n\t * With Arrays all items of the source will be replaced with the new items.\n\t *\n\t * ```js\n\t * var target = [\"a\",\"b\",\"c\"];\n\t * var source = [\"A\",\"B\"];\n\t * canReflect.update(target, source);\n\t * target //-> [\"A\",\"B\"]\n\t * ```\n\t *\n\t * @param  {Object} target The value that will be updated with `source`'s values.\n\t * @param  {Object} source A source of values to copy to `target`.\n\t * @return {Object} The target.\n\t */\n\tupdate: function(target, source) {\n\t\tif(type.isIteratorLike(source) || type.isMoreListLikeThanMapLike(source) ) {\n\t\t\t// copy to array and add these keys in place\n\t\t\tshapeReflections.updateList(target, source);\n\t\t} else {\n\t\t\tshapeReflections.updateMap(target, source);\n\t\t}\n\t\treturn target;\n\t},\n\tupdateDeepMap: function(target, source) {\n\t\tvar sourceKeyMap = makeMap( shapeReflections.getOwnEnumerableKeys(source) );\n\n\t\tvar sourceGetKeyValue = source[getKeyValueSymbol$1] || shiftedGetKeyValue;\n\t\tvar targetSetKeyValue = target[setKeyValueSymbol$1] || shiftedSetKeyValue;\n\n\t\tshapeReflections.eachKey(target, function(curVal, key){\n\n\t\t\tif(!sourceKeyMap.get(key)) {\n\t\t\t\tgetSet.deleteKeyValue(target, key);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tsourceKeyMap.set(key, false);\n\t\t\tvar newVal = sourceGetKeyValue.call(source, key);\n\n\t\t\t// if either was primitive, no recursive update possible\n\t\t\tif(type.isPrimitive(curVal) || type.isPrimitive(newVal) || shouldUpdateOrAssign(curVal) === false ) {\n\t\t\t\ttargetSetKeyValue.call(target, key, newVal);\n\t\t\t} else {\n\t\t\t\tshapeReflections.updateDeep(curVal, newVal);\n\t\t\t}\n\n\t\t}, this);\n\n\t\tshapeReflections.eachIndex(sourceKeyMap.keys(), function(key){\n\t\t\tif(sourceKeyMap.get(key)) {\n\t\t\t\ttargetSetKeyValue.call(target, key, sourceGetKeyValue.call(source, key) );\n\t\t\t}\n\t\t});\n\t\treturn target;\n\t},\n\tupdateDeepList: function(target, source) {\n\t\treturn updateDeepList.call(this,target, source);\n\t},\n\t/**\n\t * @function can-reflect.updateDeep updateDeep\n\t * @parent can-reflect/shape\n\t * @description Makes the values of an object match the values of an other object including all children values.\n\t *\n\t * @signature `.updateDeep(target, source)`\n\t *\n\t * Updates the values (and properties if map-like) of `target` to match the values of `source`.\n\t * Removes properties from `target` that are not on `source`.\n\t *\n\t * For map-like objects, every enumerable property on `target` is copied:\n\t *\n\t * ```js\n\t * var target = {name: {first: \"Justin\"}, age: 34};\n\t * var source = {name: {last: \"Meyer\"}};\n\t * var result = canReflect.updateDeep(target, source);\n\t * target //->  {name: {last: \"Meyer\"}}\n\t * ```\n\t *\n\t * An object can control the behavior of `updateDeep` using the [can-symbol/symbols/updateDeep] symbol.\n\t *\n\t * For list-like objects, a diff and patch strategy is used.  This attempts to limit the number of changes.\n\t *\n\t * @param  {Object} target The value that will be updated with `source`'s values.\n\t * @param  {Object} source A source of values to copy to `target`.\n\t * @return {Object} The target.\n\t */\n\tupdateDeep: function(target, source){\n\t\tvar updateDeep = target[canSymbol_1_7_0_canSymbol.for(\"can.updateDeep\")];\n\t\tif(updateDeep) {\n\t\t\tupdateDeep.call(target, source);\n\t\t} else if( type.isMoreListLikeThanMapLike(source) ) {\n\t\t\t// list-like\n\t\t\tshapeReflections.updateDeepList(target, source);\n\t\t} else {\n\t\t\t// map-like\n\t\t\tshapeReflections.updateDeepMap(target, source);\n\t\t}\n\t\treturn target;\n\t},\n\t// walks up the whole prototype chain\n\t/**\n\t * @function can-reflect.hasKey hasKey\n\t * @parent can-reflect/shape\n\t * @description Determine whether an object contains a key on itself or its prototype chain\n\t *\n\t * @signature `hasKey(obj, key)`\n\t *\n\t * Return `true` if an object's properties include the property key `key` or an object on its prototype\n\t * chain's properties include the key `key`, `false` otherwise.\n\t * An object may implement [can-symbol/symbols/hasKey @@@@can.hasKey] to override default behavior.\n\t * By default, `canReflect.hasKey` will use [can-reflect.hasOwnKey] and return true if the key is present.\n\t * If `hasOwnKey` returns false, the [https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/in in Operator] will be used.\n\t *\n\t * ```js\n\t * var foo = new DefineMap({ \"bar\": \"baz\" });\n\t *\n\t * canReflect.in(foo, \"bar\"); // -> true\n\t * canReflect.in(foo, \"each\"); // -> true\n\t * foo.each // -> function each() {...}\n\t * ```\n\t *\n\t * @param  {Object} obj Any MapLike object\n\t * @param  {String} key The key to look up on `obj`\n\t * @return {Boolean} `true` if `obj`'s key set contains `key` or an object on its prototype chain's key set contains `key`, `false` otherwise\n\t */\n\thasKey: function(obj, key) {\n\t\tif( obj == null ) {\n\t\t\treturn false;\n\t\t}\n\t\tif (type.isPrimitive(obj)) {\n\t\t\tif (hasOwnProperty.call(obj, key)) {\n\t\t\t\treturn true;\n\t\t\t} else {\n\t\t\t\tvar proto;\n\t\t\t\tif(getPrototypeOfWorksWithPrimitives) {\n\t\t\t\t\tproto = Object.getPrototypeOf(obj);\n\t\t\t\t} else {\n\t\t\t\t\t// IE-remove-start\n\t\t\t\t\tproto = obj.__proto__; // jshint ignore:line\n\t\t\t\t\t// IE-remove-end\n\t\t\t\t}\n\t\t\t\tif(proto !== undefined) {\n\t\t\t\t\treturn key in proto;\n\t\t\t\t} else {\n\t\t\t\t\t// IE-remove-start\n\t\t\t\t\treturn obj[key] !== undefined;\n\t\t\t\t\t// IE-remove-end\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tvar hasKey = obj[canSymbol_1_7_0_canSymbol.for(\"can.hasKey\")];\n\t\tif(hasKey) {\n\t\t\treturn hasKey.call(obj, key);\n\t\t}\n\n\t\tvar found = shapeReflections.hasOwnKey(obj, key);\n\n\t\treturn found || key in obj;\n\t},\n\tgetAllEnumerableKeys: function(){},\n\tgetAllKeys: function(){},\n\t/**\n\t * @function can-reflect.assignSymbols assignSymbols\n\t * @parent can-reflect/shape\n\t * @description Assign well known symbols and values to an object.\n\t *\n\t * @signature `.assignSymbols(target, source)`\n\t *\n\t * Converts each property name on the `source` object to a [can-symbol.for well known symbol]\n\t * and uses that symbol to set the corresponding value on target.\n\t *\n\t * This is used to easily set symbols correctly even when symbol isn't natively supported.\n\t *\n\t * ```js\n\t * canReflect.assignSymbols(Map.prototype, {\n\t *   \"can.getKeyValue\": Map.prototype.get\n\t * })\n\t * ```\n\t *\n\t * If a `source` property name matches a symbol on `Symbol` (like `iterator` on `Symbol.iterator`),\n\t * that symbol will be used:\n\t *\n\t * ```js\n\t * canReflect.assignSymbols(ArrayLike.prototype, {\n\t *   \"iterator\": function() { ... }\n\t * })\n\t * ArrayLike.prototype[Symbol.iterator] = function(){ ... }\n\t * ```\n\t *\n\t * @param  {Object} target The value that will be updated with `source`'s symbols and values.\n\t * @param  {Object<name,value>} source A source of symbol names and values to copy to `target`.\n\t * @return {Object} The target.\n\t */\n\tassignSymbols: function(target, source){\n\t\tshapeReflections.eachKey(source, function(value, key){\n\t\t\tvar symbol = type.isSymbolLike(canSymbol_1_7_0_canSymbol[key]) ? canSymbol_1_7_0_canSymbol[key] : canSymbol_1_7_0_canSymbol.for(key);\n\t\t\tgetSet.setKeyValue(target, symbol, value);\n\t\t});\n\t\treturn target;\n\t},\n\tisSerialized: isSerializedHelper,\n\t/**\n\t * @function can-reflect.size size\n\t * @parent can-reflect/shape\n\t * @description Return the number of items in the collection.\n\t *\n\t * @signature `.size(target)`\n\t *\n\t * Returns the number of items contained in `target`. Target can\n\t * provide the size using the [can-symbol/symbols/size] symbol.\n\t *\n\t * If the `target` has a numeric `length` property that is greater than or equal to 0, that\n\t * `length` will be returned.\n\t *\n\t * ```js\n\t * canReflect.size([1,2,3]) //-> 3\n\t * ```\n\t *\n\t * If the `target` is [can-reflect.isListLike], the values of the list will be counted.\n\t *\n\t * If the `target` is a plain JS object, the number of enumerable properties will be returned.\n\t *\n\t * ```js\n\t * canReflect.size({foo:\"bar\"}) //-> 1\n\t * ```\n\t *\n\t * If the `target` is anything else, `undefined` is returned.\n\t *\n\t * @param  {Object} target The container object.\n\t * @return {Number} The number of values in the target.\n\t */\n\tsize: function(obj){\n\t\tif(obj == null) {\n\t\t\treturn 0;\n\t\t}\n\t\tvar size = obj[sizeSymbol];\n\t\tvar count = 0;\n\t\tif(size) {\n\t\t\treturn size.call(obj);\n\t\t}\n\t\telse if(helpers.hasLength(obj)){\n\t\t\treturn obj.length;\n\t\t}\n\t\telse if(type.isListLike(obj)){\n\n\t\t\tshapeReflections.eachIndex(obj, function(){\n\t\t\t\tcount++;\n\t\t\t});\n\t\t\treturn count;\n\t\t}\n\t\telse if( obj ) {\n\t\t\treturn shapeReflections.getOwnEnumerableKeys(obj).length;\n\t\t}\n\t\telse {\n\t\t\treturn undefined;\n\t\t}\n\t},\n\t/**\n\t * @function {Function, String|Symbol, Object} can-reflect.defineInstanceKey defineInstanceKey\n\t * @parent can-reflect/shape\n\t * @description Create a key for all instances of a constructor.\n\t *\n\t * @signature `defineInstanceKey(cls, key, properties)`\n\t *\n\t * Define the property `key` on the prototype of the constructor `cls` using the symbolic\n\t * property [can-symbol/symbols/defineInstanceKey @@can.defineInstanceKey] if it exists; otherwise\n\t * use `Object.defineProperty()` to define the property.  The property definition\n\t *\n\t * @param  {Function} cls  a Constructor function\n\t * @param  {String} key     the String or Symbol key to set.\n\t * @param  {Object} properties a JavaScript property descriptor\n\t */\n\tdefineInstanceKey: function(cls, key, properties) {\n\t\tvar defineInstanceKey = cls[canSymbol_1_7_0_canSymbol.for(\"can.defineInstanceKey\")];\n\t\tif(defineInstanceKey) {\n\t\t\treturn defineInstanceKey.call(cls, key, properties);\n\t\t}\n\t\tvar proto = cls.prototype;\n\t\tdefineInstanceKey = proto[canSymbol_1_7_0_canSymbol.for(\"can.defineInstanceKey\")];\n\t\tif(defineInstanceKey) {\n\t\t\tdefineInstanceKey.call(proto, key, properties);\n\t\t} else {\n\t\t\tObject.defineProperty(\n\t\t\t\tproto,\n\t\t\t\tkey,\n\t\t\t\tshapeReflections.assign({\n\t\t\t\t\tconfigurable: true,\n\t\t\t\t\tenumerable: !type.isSymbolLike(key),\n\t\t\t\t\twritable: true\n\t\t\t\t}, properties)\n\t\t\t);\n\t\t}\n\t}\n};\n\nshapeReflections.isSerializable = shapeReflections.isSerialized;\nshapeReflections.keys = shapeReflections.getOwnEnumerableKeys;\nvar shape = shapeReflections;\n\nvar getSchemaSymbol = canSymbol_1_7_0_canSymbol.for(\"can.getSchema\"),\n    isMemberSymbol = canSymbol_1_7_0_canSymbol.for(\"can.isMember\"),\n    newSymbol = canSymbol_1_7_0_canSymbol.for(\"can.new\");\n\nfunction comparator(a, b) {\n    return a.localeCompare(b);\n}\n\nfunction sort(obj) {\n    if(type.isPrimitive(obj) || obj instanceof Date) {\n        return obj;\n    }\n    var out;\n    if (type.isListLike(obj)) {\n        out = [];\n        shape.eachKey(obj, function(item){\n            out.push(sort(item));\n        });\n        return out;\n    }\n    if( type.isMapLike(obj) ) {\n\n        out = {};\n\n        shape.getOwnKeys(obj).sort(comparator).forEach(function (key) {\n            out[key] = sort( getSet.getKeyValue(obj, key) );\n        });\n\n        return out;\n    }\n\n\n    return obj;\n}\n\nfunction isPrimitiveConverter(Type){\n    return Type === Number || Type === String || Type === Boolean;\n}\n\nvar schemaReflections =  {\n    /**\n\t * @function can-reflect.getSchema getSchema\n\t * @parent can-reflect/shape\n\t * @description Returns the schema for a type or value.\n\t *\n\t * @signature `getSchema(valueOrType)`\n\t *\n     * Calls the `@can.getSchema` property on the `valueOrType` argument. If it's not available and\n     * `valueOrType` has a `constructor` property, calls the `constructor[@can.getSchema]`\n     * and returns the result.\n     *\n     * ```js\n     * import canReflect from \"can-reflect\";\n     *\n     * var Type = DefineMap.extend({\n     *   name: \"string\",\n     *   id: \"number\"\n     * });\n     *\n     * canReflect.getSchema( Type ) //-> {\n     * //   type: \"map\",\n     * //   keys: {\n     * //     name: MaybeString\n     * //     id: MaybeNumber\n     * //   }\n     * // }\n     * ```\n\t *\n\t *\n\t * @param  {Object|Function} valueOrType A value, constructor function, or class to get the schema from.\n\t * @return {Object} A schema. A schema for a [can-reflect.isMapLike] looks like:\n     *\n     *\n     * ```js\n     * {\n     *   type: \"map\",\n     *   identity: [\"id\"],\n     *   keys: {\n     *     id: Number,\n     *     name: String,\n     *     complete: Boolean,\n     *     owner: User\n     *   }\n     * }\n     * ```\n     *\n     * A schema for a list looks like:\n     *\n     * ```js\n     * {\n     *   type: \"list\",\n     *   values: String\n     *   keys: {\n     *     count: Number\n     *   }\n     * }\n     * ```\n     *\n\t */\n    getSchema: function(type$$1){\n        if (type$$1 === undefined || type$$1 === null) {\n            return type$$1;\n        }\n        var getSchema = type$$1[getSchemaSymbol];\n        if(getSchema === undefined ) {\n            type$$1 = type$$1.constructor;\n            getSchema = type$$1 && type$$1[getSchemaSymbol];\n        }\n        return getSchema !== undefined ? getSchema.call(type$$1) : undefined;\n    },\n    /**\n\t * @function can-reflect.getIdentity getIdentity\n\t * @parent can-reflect/shape\n\t * @description Get a unique primitive representing an object.\n\t *\n\t * @signature `getIdentity( object [,schema] )`\n\t *\n\t * This uses the object's schema, or the provided schema to return a unique string or number that\n     * represents the object.\n     *\n     * ```js\n     * import canReflect from \"can-reflect\";\n     *\n     * canReflect.getIdentity({id: 5}, {identity: [\"id\"]}) //-> 5\n     * ```\n     *\n     * If the schema has multiple identity keys, the identity keys and values\n     * are return stringified (and sorted):\n     *\n     * ```js\n     * canReflect.getIdentity(\n     *   {z: \"Z\", a: \"A\", foo: \"bar\"},\n     *   {identity: [\"a\",\"b\"]}) //-> '{\"a\":\"A\",\"b\":\"B\"}'\n     * ```\n\t *\n\t * @param  {Object|Function} object A map-like object.\n     * @param {Object} [schema] A schema object with an `identity` array of the unique\n     * keys of the object like:\n     *   ```js\n     *   {identity: [\"id\"]}\n     *   ```\n\t * @return {Number|String} A value that uniquely represents the object.\n\t */\n    getIdentity: function(value, schema){\n        schema = schema || schemaReflections.getSchema(value);\n        if(schema === undefined) {\n            throw new Error(\"can-reflect.getIdentity - Unable to find a schema for the given value.\");\n        }\n\n        var identity = schema.identity;\n        if(!identity || identity.length === 0) {\n            throw new Error(\"can-reflect.getIdentity - Provided schema lacks an identity property.\");\n        } else if(identity.length === 1) {\n            return getSet.getKeyValue(value, identity[0]);\n        } else {\n            var id = {};\n            identity.forEach(function(key){\n                id[key] = getSet.getKeyValue(value, key);\n            });\n            return JSON.stringify(schemaReflections.cloneKeySort(id));\n        }\n    },\n    /**\n\t * @function can-reflect.cloneKeySort cloneKeySort\n\t * @parent can-reflect/shape\n\t * @description Copy a value while sorting its keys.\n\t *\n\t * @signature `cloneKeySort(value)`\n\t *\n     * `cloneKeySort` returns a copy of `value` with its [can-reflect.isMapLike]\n     * key values sorted. If you just want a copy of a value,\n     * use [can-reflect.serialize].\n     *\n     * ```js\n     * import canRefect from \"can-reflect\";\n     *\n     * canReflect.cloneKeySort({z: \"Z\", a: \"A\"}) //-> {a:\"A\",z:\"Z\"}\n     * ```\n     *\n     * Nested objects are also sorted.\n\t *\n     * This is useful if you need to store a representation of an object that can be used as a\n     * key.\n\t *\n\t * @param  {Object} value An object or array.\n\t * @return {Object} A copy of the object with its keys sorted.\n\t */\n    cloneKeySort: function(obj) {\n        return sort(obj);\n    },\n    /**\n\t * @function can-reflect.convert convert\n\t * @parent can-reflect/shape\n\t * @description Convert one value to another type.\n\t *\n\t * @signature `convert(value, Type)`\n\t *\n     * `convert` attempts to convert `value` to the type specified by `Type`.\n     *\n     * ```js\n     * import canRefect from \"can-reflect\";\n     *\n     * canReflect.convert(\"1\", Number) //-> 1\n     * ```\n     *\n     * `convert` works by performing the following logic:\n     *\n     * 1. If the `Type` is a primitive like `Number`, `String`, `Boolean`, the\n     *    `value` will be passed to the `Type` function and the result returned.\n     *    ```js\n     *    return Type(value);\n     *    ```\n     * 2. The value will be checked if it is already an instance of the type\n     *    by performing the following:\n     *    1. If the `Type` has a `can.isMember` symbol value, that value will be used\n     *       to determine if the `value` is already an instance.\n     *    2. If the `Type` is a [can-reflect.isConstructorLike] function, `instanceof Type`\n     *       will be used to check if `value` is already an instance.\n     * 3. If `value` is already an instance, `value` will be returned.\n     * 4. If `Type` has a `can.new` symbol, `value` will be passed to it and the result\n     *    returned.\n     * 5. If `Type` is a [can-reflect.isConstructorLike] function, `new Type(value)` will be\n     *    called the the result returned.\n     * 6. If `Type` is a regular function, `Type(value)` will be called and the result returned.\n     * 7. If a value hasn't been returned, an error is thrown.\n\t *\n\t * @param  {Object|Primitive} value A value to be converted.\n     * @param  {Object|Function} Type A constructor function or an object that implements the\n     * necessary symbols.\n\t * @return {Object} The `value` converted to a member of `Type`.\n\t */\n    convert: function(value, Type){\n        if(isPrimitiveConverter(Type)) {\n            return Type(value);\n        }\n        // check if value is already a member\n        var isMemberTest = Type[isMemberSymbol],\n            isMember = false,\n            type$$1 = typeof Type,\n            createNew = Type[newSymbol];\n        if(isMemberTest !== undefined) {\n            isMember = isMemberTest.call(Type, value);\n        } else if(type$$1 === \"function\") {\n            if(type.isConstructorLike(Type)) {\n                isMember = (value instanceof Type);\n            }\n        }\n        if(isMember) {\n            return value;\n        }\n        if(createNew !== undefined) {\n            return createNew.call(Type, value);\n        } else if(type$$1 === \"function\") {\n            if(type.isConstructorLike(Type)) {\n                return new Type(value);\n            } else {\n                // call it like a normal function\n                return Type(value);\n            }\n        } else {\n            throw new Error(\"can-reflect: Can not convert values into type. Type must provide `can.new` symbol.\");\n        }\n    }\n};\nvar schema = schemaReflections;\n\nvar getNameSymbol = canSymbol_1_7_0_canSymbol.for(\"can.getName\");\n\n/**\n * @function {Object, String} can-reflect.setName setName\n * @parent can-reflect/shape\n * @description Set a human-readable name of an object.\n *\n * @signature `setName(obj, value)`\n *\n * ```js\n * var f = function() {};\n *\n * canReflect.setName(f, \"myFunction\")\n * f.name //-> \"myFunction\"\n * ```\n *\n * @param {Object} obj   the object to set on\n * @param {String} value the value to set for the object\n */\nfunction setName(obj, nameGetter) {\n\tif (typeof nameGetter !== \"function\") {\n\t\tvar value = nameGetter;\n\t\tnameGetter = function() {\n\t\t\treturn value;\n\t\t};\n\t}\n\n\tObject.defineProperty(obj, getNameSymbol, {\n\t\tvalue: nameGetter\n\t});\n}\n\n/**\n * @function {Object} can-reflect.getName getName\n * @parent can-reflect/shape\n * @description Get the name of an object.\n *\n * @signature `getValue(obj)`\n *\n * @body\n *\n * The [@@@can.getName](can-symbol/symbols/getName.html) symbol is used to\n * provide objects human readable names; the main goal of these names is to help\n * users get a glance of what the object does and what it is used for.\n *\n * There are no hard rules to define names but CanJS uses the following convention\n * for consistent names across its observable types:\n *\n * - The name starts with the observable constructor name\n * - The constructor name is decorated with the following characters based on its type:\n *\t\t- `<>`: for [value-like](can-reflect.isValueLike.html) observables, e.g: `SimpleObservable<>`\n *\t\t- `[]`: for [list-like](can-reflect.isListLike.html) observables, e.g: `DefineList[]`\n *\t\t- `{}`: for [map-like](can-reflect.isMapLike.html) observables, e.g: `DefineMap{}`\n * - Any property that makes the instance unique (like ids) are printed inside\n *    the chars mentioned before.\n *\n * The example below shows how to implement [@@@can.getName](can-symbol/symbols/getName.html),\n * in a value-like observable (similar to [can-simple-observable]).\n *\n * ```js\n * var canReflect = require(\"can-reflect\");\n *\n * function MySimpleObservable(value) {\n *\t\tthis.value = value;\n * }\n *\n * canReflect.assignSymbols(MySimpleObservable.prototype, {\n *\t\t\"can.getName\": function() {\n *\t\t\t//!steal-remove-start\n *\t\t\tif (process.env.NODE_ENV !== 'production') {\n *\t\t\t\tvar value = JSON.stringify(this.value);\n *\t\t\t\treturn canReflect.getName(this.constructor) + \"<\" + value + \">\";\n *\t\t\t}\n *\t\t\t//!steal-remove-end\n *\t\t}\n * });\n * ```\n *\n * With that in place, `MySimpleObservable` can be used like this:\n *\n * ```js\n * var one = new MySimpleObservable(1);\n * canReflect.getName(one); // MySimpleObservable<1>\n * ```\n *\n * @param  {Object} obj The object to get from\n * @return {String} The human-readable name of the object\n */\nvar anonymousID = 0;\nfunction getName(obj) {\n\tvar type$$1 = typeof obj;\n\tif(obj === null || (type$$1 !== \"object\" && type$$1 !== \"function\")) {\n\t\treturn \"\"+obj;\n\t}\n\tvar nameGetter = obj[getNameSymbol];\n\tif (nameGetter) {\n\t\treturn nameGetter.call(obj);\n\t}\n\n\tif (type$$1 === \"function\") {\n\t\tif (!(\"name\" in obj)) {\n\t\t\t// IE doesn't support function.name natively\n\t\t\tobj.name = \"functionIE\" + anonymousID++;\n\t\t}\n\t\treturn obj.name;\n\t}\n\n\tif (obj.constructor && obj !== obj.constructor) {\n\t\tvar parent = getName(obj.constructor);\n\t\tif (parent) {\n\t\t\tif (type.isValueLike(obj)) {\n\t\t\t\treturn parent + \"<>\";\n\t\t\t}\n\n\t\t\tif (type.isMoreListLikeThanMapLike(obj)) {\n\t\t\t\treturn parent + \"[]\";\n\t\t\t}\n\n\t\t\tif (type.isMapLike(obj)) {\n\t\t\t\treturn parent + \"{}\";\n\t\t\t}\n\t\t}\n\t}\n\n\treturn undefined;\n}\n\nvar getName_1 = {\n\tsetName: setName,\n\tgetName: getName\n};\n\nfunction keysPolyfill() {\n  var keys = [];\n  var currentIndex = 0;\n\n  this.forEach(function(val, key) { // jshint ignore:line\n    keys.push(key);\n  });\n\n  return {\n    next: function() {\n      return {\n        value: keys[currentIndex],\n        done: (currentIndex++ === keys.length)\n      };\n    }\n  };\n}\n\nif (typeof Map !== \"undefined\") {\n  shape.assignSymbols(Map.prototype, {\n    \"can.getOwnEnumerableKeys\": Map.prototype.keys,\n    \"can.setKeyValue\": Map.prototype.set,\n    \"can.getKeyValue\": Map.prototype.get,\n    \"can.deleteKeyValue\": Map.prototype[\"delete\"],\n    \"can.hasOwnKey\": Map.prototype.has\n  });\n\n  if (typeof Map.prototype.keys !== \"function\") {\n    Map.prototype.keys = Map.prototype[canSymbol_1_7_0_canSymbol.for(\"can.getOwnEnumerableKeys\")] = keysPolyfill;\n  }\n}\n\nif (typeof WeakMap !== \"undefined\") {\n  shape.assignSymbols(WeakMap.prototype, {\n    \"can.getOwnEnumerableKeys\": function() {\n      throw new Error(\"can-reflect: WeakMaps do not have enumerable keys.\");\n    },\n    \"can.setKeyValue\": WeakMap.prototype.set,\n    \"can.getKeyValue\": WeakMap.prototype.get,\n    \"can.deleteKeyValue\": WeakMap.prototype[\"delete\"],\n    \"can.hasOwnKey\": WeakMap.prototype.has\n  });\n}\n\nif (typeof Set !== \"undefined\") {\n  shape.assignSymbols(Set.prototype, {\n    \"can.isMoreListLikeThanMapLike\": true,\n    \"can.updateValues\": function(index, removing, adding) {\n      if (removing !== adding) {\n        shape.each(\n          removing,\n          function(value) {\n            this.delete(value);\n          },\n          this\n        );\n      }\n      shape.each(\n        adding,\n        function(value) {\n          this.add(value);\n        },\n        this\n      );\n    },\n    \"can.size\": function() {\n      return this.size;\n    }\n  });\n\n  // IE11 doesn't support Set.prototype[@@iterator]\n  if (typeof Set.prototype[canSymbol_1_7_0_canSymbol.iterator] !== \"function\") {\n\t  Set.prototype[canSymbol_1_7_0_canSymbol.iterator] = function() {\n\t\t  var arr = [];\n\t\t  var currentIndex = 0;\n\n\t\t  this.forEach(function(val) {\n\t\t\t  arr.push(val);\n\t\t  });\n\n\t\t  return {\n\t\t\t  next: function() {\n\t\t\t\t  return {\n\t\t\t\t\t  value: arr[currentIndex],\n\t\t\t\t\t  done: (currentIndex++ === arr.length)\n\t\t\t\t  };\n\t\t\t  }\n\t\t  };\n\t  };\n  }\n}\nif (typeof WeakSet !== \"undefined\") {\n  shape.assignSymbols(WeakSet.prototype, {\n    \"can.isListLike\": true,\n    \"can.isMoreListLikeThanMapLike\": true,\n    \"can.updateValues\": function(index, removing, adding) {\n      if (removing !== adding) {\n        shape.each(\n          removing,\n          function(value) {\n            this.delete(value);\n          },\n          this\n        );\n      }\n      shape.each(\n        adding,\n        function(value) {\n          this.add(value);\n        },\n        this\n      );\n    },\n    \"can.size\": function() {\n      throw new Error(\"can-reflect: WeakSets do not have enumerable keys.\");\n    }\n  });\n}\n\nvar reflect = {};\n[\n\tcall,\n\tgetSet,\n\tobserve,\n\tshape,\n\ttype,\n\tgetName_1,\n\tschema\n].forEach(function(reflections){\n\tfor(var prop in reflections) {\n\t\treflect[prop] = reflections[prop];\n\t\t//!steal-remove-start\n\t\tif(process.env.NODE_ENV !== 'production') {\n\t\t\tif(typeof reflections[prop] === \"function\") {\n\t\t\t\tvar propDescriptor = Object.getOwnPropertyDescriptor(reflections[prop], 'name');\n\t\t\t\tif (!propDescriptor || propDescriptor.writable && propDescriptor.configurable) {\n\t\t\t\t\tObject.defineProperty(reflections[prop],\"name\",{\n\t\t\t\t\t\tvalue: \"canReflect.\"+prop\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t//!steal-remove-end\n\t}\n});\n\n\n\n\nvar canReflect_1_19_2_canReflect = canNamespace_1_0_0_canNamespace.Reflect = reflect;\n\nvar utils = {\n    isContainer: function (current) {\n        var type = typeof current;\n        return current && (type === \"object\" || type === \"function\");\n    },\n    strReplacer: /\\{([^\\}]+)\\}/g,\n\n    parts: function(name) {\n        if(Array.isArray(name)) {\n            return name;\n        } else {\n            return typeof name !== 'undefined' ? (name + '').replace(/\\[/g,'.')\n            \t\t.replace(/]/g,'').split('.') : [];\n        }\n    }\n};\n\nvar canKey_1_2_1_utils= utils;\n\n/**\n * @module {function} can-key/delete/delete\n * @parent can-key\n */\nvar _delete = function deleteAtPath(data, path) {\n    var parts = canKey_1_2_1_utils.parts(path);\n    var current = data;\n\n    for(var i = 0; i < parts.length - 1; i++) {\n        if(current) {\n            current = canReflect_1_19_2_canReflect.getKeyValue( current, parts[i]);\n        }\n    }\n\n    if(current) {\n        canReflect_1_19_2_canReflect.deleteKeyValue(current, parts[parts.length - 1 ]);\n    }\n};\n\n/**\n * @module {function} can-key/get/get\n * @parent can-key\n * @description Get properties on deep/nested objects of different types: Object, Map, [can-reflect] types, etc.\n *\n * @signature `get(obj, path)`\n * @param  {Object} obj the object to use as the root for property-based navigation\n * @param  {String} path a String of dot-separated keys, representing a path of properties\n * @return {*}       the value at the property path\n *\n * @body\n *\n * A *path* is a dot-delimited sequence of zero or more property names, such that \"foo.bar\" means \"the property\n * 'bar' of the object at the property 'foo' of the root.\"  An empty path returns the object passed.\n *\n * ```js\n * var get = require(\"can-key\");\n * console.log(get({a: {b: {c: \"foo\"}}}, \"a.b.c\")); // -> \"foo\"\n * console.log(get({a: {}}, \"a.b.c\")); // -> undefined\n * console.log(get([{a: {}}, {a: {b: \"bar\"}}], \"a.b\")); // -> \"bar\"\n *\n * var map = new Map();\n * map.set(\"first\", {second: \"third\"});\n *\n * get(map, \"first.second\") //-> \"third\"\n * ```\n */\nfunction get(obj, name) {\n    // The parts of the name we are looking up\n    // `['App','Models','Recipe']`\n    var parts = canKey_1_2_1_utils.parts(name);\n\n    var length = parts.length,\n        current, i, container;\n\n    if (!length) {\n        return obj;\n    }\n\n    current = obj;\n\n    // Walk current to the 2nd to last object or until there\n    // is not a container.\n    for (i = 0; i < length && canKey_1_2_1_utils.isContainer(current) && current !== null; i++) {\n        container = current;\n        current = canReflect_1_19_2_canReflect.getKeyValue( container, parts[i] );\n    }\n\n    return current;\n}\n\nvar get_1 = get;\n\n/**\n * @module {function} can-key/replace-with/replace-with\n * @parent can-key\n *\n * Replace the templated parts of a string with values from an object.\n *\n * @signature `replaceWith(str, data, replacer, remove)`\n *\n * ```js\n * import replaceWith from \"can-key/replace-with/replace-with\";\n *\n * replaceWith(\"foo_{bar}\", {bar: \"baz\"}); // -> \"foo_baz\"\n * ```\n *\n * @param {String} str String with {curly brace} delimited property names.\n * @param {Object} data Object from which to read properties.\n * @param {function(String,*)} [replacer(key,value)] Function which returns string replacements.  Optional.\n *\n *   ```js\n *   replaceWith(\"foo_{bar}\", {bar: \"baz\"}, (key, value) => {\n *     return value.toUpperCase();\n *   }); // -> \"foo_BAZ\"\n *   ```\n *\n *\n * @param {Boolean} shouldRemoveMatchedPaths Whether to remove properties\n * found in delimiters in `str` from `data`.\n * @return {String} the supplied string with delimited properties replaced with their values.\n *\n * @body\n *\n * ```js\n * var replaceWith = require(\"can-key/replace-with/replace-with\");\n * var answer = replaceWith(\n *   '{.}{.}{.}{.}{.} Batman!',\n *   {},\n *   () => 'Na'\n * );\n * // => 'NaNaNaNaNa Batman!'\n * ```\n */\nvar replaceWith = function (str, data, replacer, shouldRemoveMatchedPaths) {\n    return str.replace(canKey_1_2_1_utils.strReplacer, function (whole, path) {\n        var value = get_1(data, path);\n        if(shouldRemoveMatchedPaths) {\n            _delete(data, path);\n        }\n        return replacer ? replacer(path, value) : value;\n    });\n};\n\nvar setValueSymbol$1 = canSymbol_1_7_0_canSymbol.for(\"can.setValue\");\n\n/**\n * @module {function} can-key/set/set\n * @parent can-key\n * @description Set properties on deep/nested objects of different types: Object, Map, [can-reflect] types, etc.\n *\n * @signature `set(object, path, value)`\n * @param  {Object} object The object to use as the root for property-based navigation.\n * @param  {String} path A String of dot-separated keys, representing a path of properties.\n * @param  {*} value The new value to be set at the property path.\n * @return {*} The object passed to set (for chaining calls).\n *\n * @body\n *\n * A *path* is a dot-delimited sequence of one or more property names, such that \"foo.bar\" means \"the property\n * 'bar' of the object at the property 'foo' of the root.\"\n *\n * ```js\n * import set from \"can-key/set/set\";\n *\n * const object = {a: {b: {c: \"foo\"}}};\n * set(object, \"a.b.c\", \"bar\");\n * // Now object.a.b.c === \"bar\"\n *\n * var map = new Map();\n * map.set(\"first\", {second: \"third\"});\n *\n * set(map, \"first.second\", \"3rd\");\n * // Now map.first.second === \"3rd\"\n * ```\n *\n * > **Note:** an error will be thrown if one of the objects in the key path does not exist.\n */\nfunction set$1(object, path, value) {\n    var parts = canKey_1_2_1_utils.parts(path);\n\n    var current = object;\n    var length = parts.length;\n\n    // Walk current until there is not a container\n    for (var i = 0; i < length - 1; i++) {\n        if (canKey_1_2_1_utils.isContainer(current)) {\n            current = canReflect_1_19_2_canReflect.getKeyValue(current, parts[i]);\n        } else {\n            break;\n        }\n    }\n\n    // Set the value\n    if (current) {\n        canReflect_1_19_2_canReflect.setKeyValue(current, parts[i], value);\n    } else {\n        throw new TypeError(\"Cannot set value at key path '\" + path + \"'\");\n    }\n\n    return object;\n}\n\nvar set_1 = set$1;\n\n/**\n * @module {function} can-key/walk/walk\n * @parent can-key\n *\n * @signature `walk(obj, name, keyCallback(info) )`\n *\n * ```js\n * import walk from \"can-key/walk/walk\";\n *\n * var user = {name: {first: \"Justin\"}}\n * walk(user, \"name.first\", (keyInfo)=> {\n *   // Called 2 times.\n *   // first call:\n *   keyInfo //-> {parent: user, key: \"name\", value: user.name}\n *   // second call:\n *   keyInfo //-> {parent: user.name, key: \"first\", value: user.name.first}\n * })\n * ```\n *\n * @param {Object} obj An object to read key values from.\n * @param {String} name A string key name like \"foo.bar\".\n * @param {function(Object)} keyCallback(info) For every key value,\n * `keyCallback` will be called back with an `info` object containing:\n *\n * - `info.parent` - The object the property value is being read from.\n * - `info.key` - The key being read.\n * - `info.value` - The key's value.\n *\n * If `keyCallback` returns a value other than `undefined`, the next key value\n * will be read from that value.\n */\nvar walk = function walk(obj, name, keyCallback){\n\n    // The parts of the name we are looking up\n    // `['App','Models','Recipe']`\n    var parts = canKey_1_2_1_utils.parts(name);\n\n    var length = parts.length,\n        current, i, container, part;\n\n\n    if (!length) {\n        return;\n    }\n\n    current = obj;\n\n    // Walk current to the 2nd to last object or until there\n    // is not a container.\n    for (i = 0; i < length; i++) {\n        container = current;\n        part = parts[i];\n        current = canKey_1_2_1_utils.isContainer(container) && canReflect_1_19_2_canReflect.getKeyValue( container, part );\n\n        var result = keyCallback({\n            parent:container,\n            key: part,\n            value: current\n        }, i);\n        if(result !== undefined) {\n            current = result;\n        }\n    }\n};\n\nfunction deleteKeys(parentsAndKeys) {\n    for(var i  = parentsAndKeys.length - 1; i >= 0; i--) {\n        var parentAndKey = parentsAndKeys[i];\n        delete  parentAndKey.parent[parentAndKey.key];\n        if(canReflect_1_19_2_canReflect.size(parentAndKey.parent) !== 0) {\n            return;\n        }\n    }\n}\n/**\n * @module {function} can-key/transform/transform\n * @parent can-key\n */\nvar transform = function(obj, transformer){\n    var copy = canReflect_1_19_2_canReflect.serialize( obj);\n\n    canReflect_1_19_2_canReflect.eachKey(transformer, function(writeKey, readKey){\n        var readParts = canKey_1_2_1_utils.parts(readKey),\n            writeParts = canKey_1_2_1_utils.parts(writeKey);\n\n        // find the value\n        var parentsAndKeys = [];\n        walk(copy, readParts, function(info){\n            parentsAndKeys.push(info);\n        });\n        var last = parentsAndKeys[parentsAndKeys.length - 1];\n        var value = last.value;\n        if(value !== undefined) {\n            // write the value\n            walk(copy, writeParts, function(info, i){\n                if(i < writeParts.length - 1 && !info.value) {\n                    return info.parent[info.key] = {};\n                } else if(i === writeParts.length - 1){\n                    info.parent[info.key] = value;\n                }\n            });\n            // delete the keys on old\n            deleteKeys(parentsAndKeys);\n\n        }\n    });\n    return copy;\n};\n\nvar canKey_1_2_1_canKey = canNamespace_1_0_0_canNamespace.key = {\n    deleteKey: _delete,\n    get: get_1,\n    replaceWith: replaceWith,\n    set: set_1,\n    transform: transform,\n    walk: walk\n};\n\nvar commonjsGlobal = typeof globalThis !== 'undefined' ? globalThis : typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n\nfunction commonjsRequire () {\n\tthrow new Error('Dynamic requires are not currently supported by rollup-plugin-commonjs');\n}\n\nfunction createCommonjsModule(fn, module) {\n\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n}\n\nvar warnTimeout = 5000;\nvar logLevel = 0;\n\n/**\n * @module {{}} can-log log\n * @parent can-js-utilities\n * @collection can-infrastructure\n * @hide\n *\n * Utilities for logging to the console.\n */\n\n/**\n * @function can-log.warn warn\n * @parent can-log\n * @description\n *\n * Adds a warning message to the console.\n *\n * ```\n * var canLog = require(\"can-log\");\n *\n * canLog.warn(\"something evil\");\n * ```\n *\n * @signature `canLog.warn(msg)`\n * @param {String} msg the message to be logged.\n */\nvar warn = function() {\n\tvar ll = this.logLevel;\n\tif (ll < 2) {\n\t\tif (typeof console !== \"undefined\" && console.warn) {\n\t\t\tthis._logger(\"warn\", Array.prototype.slice.call(arguments));\n\t\t} else if (typeof console !== \"undefined\" && console.log) {\n\t\t\tthis._logger(\"log\", Array.prototype.slice.call(arguments));\n\t\t}\n\t}\n};\n\n/**\n * @function can-log.log log\n * @parent can-log\n * @description\n * Adds a message to the console.\n * @hide\n *\n * ```\n * var canLog = require(\"can-log\");\n *\n * canLog.log(\"hi\");\n * ```\n *\n * @signature `canLog.log(msg)`\n * @param {String} msg the message\n */\nvar log = function() {\n\tvar ll = this.logLevel;\n\tif (ll < 1) {\n\t\tif (typeof console !== \"undefined\" && console.log) {\n\t\t\tthis._logger(\"log\", Array.prototype.slice.call(arguments));\n\t\t}\n\t}\n};\n\n/**\n * @function can-log.error error\n * @parent can-log\n * @description\n * Adds an error message to the console.\n * @hide\n *\n * ```\n * var canLog = require(\"can-log\");\n *\n * canLog.error(new Error(\"Oh no!\"));\n * ```\n *\n * @signature `canLog.error(err)`\n * @param {String|Error} err The error to be logged.\n */\nvar error = function() {\n\tvar ll = this.logLevel;\n\tif (ll < 1) {\n\t\tif (typeof console !== \"undefined\" && console.error) {\n\t\t\tthis._logger(\"error\", Array.prototype.slice.call(arguments));\n\t\t}\n\t}\n};\n\nvar _logger = function (type, arr) {\n\ttry {\n\t\tconsole[type].apply(console, arr);\n\t} catch(e) {\n\t\tconsole[type](arr);\n\t}\n};\n\nvar canLog_1_0_2_canLog = {\n\twarnTimeout: warnTimeout,\n\tlogLevel: logLevel,\n\twarn: warn,\n\tlog: log,\n\terror: error,\n\t_logger: _logger\n};\n\n/**\n * @module {{}} can-log/dev dev\n * @parent can-log\n * @hide\n * \n * Utilities for logging development-mode messages. Use this module for\n * anything that should be shown to the user during development but isn't\n * needed in production. In production these functions become noops.\n */\nvar dev = {\n\twarnTimeout: 5000,\n\tlogLevel: 0,\n\t/**\n\t * @function can-log/dev.stringify stringify\n\t * @parent can-log\n\t * @description\n\t * @hide\n\t *\n\t * JSON stringifies a value, but unlike JSON, will output properties with\n\t * a value of `undefined` (e.g. `{ \"prop\": undefined }`, not `{}`).\n\t *\n\t * ```\n\t * var dev = require('can-log/dev');\n\t * var query = { where: undefined };\n\t * \n\t * dev.warn('No records found: ' + dev.stringify(query));\n\t * ```\n\t *\n\t * @signature `dev.stringify(value)`\n\t * @param {Any} value A value to stringify.\n\t * @return {String} A stringified representation of the passed in value.\n\t */\n\tstringify: function(value) {\n\t\tvar flagUndefined = function flagUndefined(key, value) {\n\t\t\treturn value === undefined ?\n\t\t\t\t \"/* void(undefined) */\" : value;\n\t\t};\n\t\t\n\t\treturn JSON.stringify(value, flagUndefined, \"  \").replace(\n\t\t\t/\"\\/\\* void\\(undefined\\) \\*\\/\"/g, \"undefined\");\n\t},\n\t/**\n\t * @function can-log/dev.warn warn\n\t * @parent can-log\n\t * @description\n\t * @hide\n\t *\n\t * Adds a warning message to the console.\n\t *\n\t * ```\n\t * var dev = require('can-log/dev');\n\t * \n\t * dev.warn(\"something evil\");\n\t * ```\n\t *\n\t * @signature `dev.warn(msg)`\n\t * @param {String} msg The warning message.\n\t */\n\twarn: function() {\n\t\t//!steal-remove-start\n\t\tif (process.env.NODE_ENV !== 'production') {\n\t\t\tcanLog_1_0_2_canLog.warn.apply(this, arguments);\n\t\t}\n\t\t//!steal-remove-end\n\t},\n\t/**\n\t * @function can-log/dev.log log\n\t * @parent can-log\n\t * @description\n\t * @hide\n\t *\n\t * Adds a message to the console.\n\t *\n\t * ```\n\t * var dev = require('can-log/dev');\n\t * \n\t * dev.log(\"hi\");\n\t * ```\n\t *\n\t * @signature `dev.log(msg)`\n\t * @param {String} msg The message.\n\t */\n\tlog: function() {\n\t\t//!steal-remove-start\n\t\tif (process.env.NODE_ENV !== 'production') {\n\t\t\tcanLog_1_0_2_canLog.log.apply(this, arguments);\n\t\t}\n\t\t//!steal-remove-end\n\t},\n\t/**\n\t * @function can-log/dev.error error\n\t * @parent can-log\n\t * @description\n\t * @hide\n\t *\n\t * Adds an error message to the console.\n\t *\n\t * ```\n\t * var dev = require(\"can-log/dev\");\n\t * \n\t * dev.error(new Error(\"Oh no!\"));\n\t * ```\n\t *\n\t * @signature `dev.error(err)`\n\t * @param {String|Error} err The error to be logged.\n\t */\n\terror: function() {\n\t\t//!steal-remove-start\n\t\tif (process.env.NODE_ENV !== 'production') {\n\t\t\tcanLog_1_0_2_canLog.error.apply(this, arguments);\n\t\t}\n\t\t//!steal-remove-end\n\t},\n\t_logger: canLog_1_0_2_canLog._logger\n};\n\nvar canQueues_1_3_2_queueState = {\n\tlastTask: null\n};\n\n/**\n * @module {function} can-assign can-assign\n * @parent can-js-utilities\n * @collection can-infrastructure\n * @signature `assign(target, source)`\n * @package ./package.json\n *\n * A simplified version of [Object.assign](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign), which only accepts a single source argument.\n *\n * ```js\n * var assign = require(\"can-assign\");\n *\n * var obj = {};\n *\n * assign(obj, {\n *   foo: \"bar\"\n * });\n *\n * console.log(obj.foo); // -> \"bar\"\n * ```\n *\n * @param {Object} target The destination object. This object's properties will be mutated based on the object provided as `source`.\n * @param {Object} source The source object whose own properties will be applied to `target`.\n *\n * @return {Object} Returns the `target` argument.\n */\n\nvar canAssign_1_3_3_canAssign = canNamespace_1_0_0_canNamespace.assign = function (d, s) {\n\tfor (var prop in s) {\n\t\tvar desc = Object.getOwnPropertyDescriptor(d,prop);\n\t\tif(!desc || desc.writable !== false){\n\t\t\td[prop] = s[prop];\n\t\t}\n\t}\n\treturn d;\n};\n\nfunction noOperation () {}\n\nvar Queue = function ( name, callbacks ) {\n\tthis.callbacks = canAssign_1_3_3_canAssign( {\n\t\tonFirstTask: noOperation,\n\t\t// The default behavior is to clear the lastTask state.\n\t\t// This is overwritten by `can-queues.js`.\n\t\tonComplete: function () {\n\t\t\tcanQueues_1_3_2_queueState.lastTask = null;\n\t\t}\n\t}, callbacks || {});\n\tthis.name = name;\n\tthis.index = 0;\n\tthis.tasks = [];\n\tthis._log = false;\n};\n\nQueue.prototype.constructor = Queue;\n\nQueue.noop = noOperation;\n\nQueue.prototype.enqueue = function ( fn, context, args, meta ) {\n\tvar len = this.tasks.push({\n\t\tfn: fn,\n\t\tcontext: context,\n\t\targs: args,\n\t\tmeta: meta || {}\n\t});\n\t//!steal-remove-start\n\tif(process.env.NODE_ENV !== 'production') {\n\t\tthis._logEnqueue( this.tasks[len - 1] );\n\t}\n\t//!steal-remove-end\n\n\tif ( len === 1 ) {\n\t\tthis.callbacks.onFirstTask( this );\n\t}\n};\n\nQueue.prototype.flush = function () {\n\twhile ( this.index < this.tasks.length ) {\n\t\tvar task = this.tasks[this.index++];\n\t\t//!steal-remove-start\n\t\tif(process.env.NODE_ENV !== 'production') {\n\t\t\tthis._logFlush( task );\n\t\t}\n\n\t\t//!steal-remove-end\n\t\ttask.fn.apply( task.context, task.args );\n\t}\n\tthis.index = 0;\n\tthis.tasks = [];\n\tthis.callbacks.onComplete( this );\n};\n\nQueue.prototype.log = function () {\n\tthis._log = arguments.length ? arguments[0] : true;\n};\n\n//The following are removed in production.\n//!steal-remove-start\nif(process.env.NODE_ENV !== 'production') {\n\tQueue.prototype._logEnqueue = function ( task ) {\n\t\t// For debugging, set the parentTask to the last\n\t\t// run task.\n\t\ttask.meta.parentTask = canQueues_1_3_2_queueState.lastTask;\n\t\t// Also let the task know which stack it was run within.\n\t\ttask.meta.stack = this;\n\n\t\tif ( this._log === true || this._log === \"enqueue\" ) {\n\t\t\tvar log = task.meta.log ? task.meta.log.concat( task ) : [task.fn.name, task];\n\t\t\tdev.log.apply( dev, [this.name + \" enqueuing:\"].concat( log ));\n\t\t}\n\t};\n\t// `_logFlush` MUST be called by all queues prior to flushing in\n\t// development.\n\tQueue.prototype._logFlush = function ( task ) {\n\t\tif ( this._log === true || this._log === \"flush\" ) {\n\t\t\tvar log = task.meta.log ? task.meta.log.concat( task ) : [task.fn.name, task];\n\t\t\tdev.log.apply( dev, [this.name + \" running  :\"].concat( log ));\n\t\t}\n\t\t// Update the state to mark this as the task that was run last.\n\t\tcanQueues_1_3_2_queueState.lastTask = task;\n\t};\n}\n//!steal-remove-end\n\nvar canQueues_1_3_2_queue = Queue;\n\nvar PriorityQueue = function () {\n\tcanQueues_1_3_2_queue.apply( this, arguments );\n\t// A map of a task's function to the task for that function.\n\t// This is so we can prevent duplicate functions from being enqueued\n\t// and so `flushQueuedTask` can find the task and run it.\n\tthis.taskMap = new Map();\n\t// An \"array-of-arrays\"-ish data structure that stores\n\t// each task organized by its priority.  Each object in this list\n\t// looks like `{tasks: [...], index: 0}` where:\n\t// - `tasks` - the tasks for a particular priority.\n\t// - `index` - the index of the task waiting to be prioritized.\n\tthis.taskContainersByPriority = [];\n\n\t// The index within `taskContainersByPriority` of the first `taskContainer`\n\t// which has tasks that have not been run.\n\tthis.curPriorityIndex = Infinity;\n\t// The index within `taskContainersByPriority` of the last `taskContainer`\n\t// which has tasks that have not been run.\n\tthis.curPriorityMax = 0;\n\n\tthis.isFlushing = false;\n\n\t// Manage the number of tasks remaining to keep\n\t// this lookup fast.\n\tthis.tasksRemaining = 0;\n};\nPriorityQueue.prototype = Object.create( canQueues_1_3_2_queue.prototype );\nPriorityQueue.prototype.constructor = PriorityQueue;\n\nPriorityQueue.prototype.enqueue = function ( fn, context, args, meta ) {\n\t// Only allow the enqueing of a given function once.\n\tif ( !this.taskMap.has( fn ) ) {\n\n\t\tthis.tasksRemaining++;\n\n\t\tvar isFirst = this.taskContainersByPriority.length === 0;\n\n\t\tvar task = {\n\t\t\tfn: fn,\n\t\t\tcontext: context,\n\t\t\targs: args,\n\t\t\tmeta: meta || {}\n\t\t};\n\n\t\tvar taskContainer = this.getTaskContainerAndUpdateRange( task );\n\t\ttaskContainer.tasks.push( task );\n\t\tthis.taskMap.set( fn, task );\n\n\t\t//!steal-remove-start\n\t\tif(process.env.NODE_ENV !== 'production') {\n\t\t\tthis._logEnqueue( task );\n\t\t}\n\t\t//!steal-remove-end\n\n\t\tif ( isFirst ) {\n\t\t\tthis.callbacks.onFirstTask( this );\n\t\t}\n\t}\n};\n\n// Given a task, updates the queue's cursors so that `flush`\n// will be able to run the task.\nPriorityQueue.prototype.getTaskContainerAndUpdateRange = function ( task ) {\n\tvar priority = task.meta.priority || 0;\n\n\tif ( priority < this.curPriorityIndex ) {\n\t\tthis.curPriorityIndex = priority;\n\t}\n\n\tif ( priority > this.curPriorityMax ) {\n\t\tthis.curPriorityMax = priority;\n\t}\n\n\tvar tcByPriority = this.taskContainersByPriority;\n\tvar taskContainer = tcByPriority[priority];\n\tif ( !taskContainer ) {\n\t\ttaskContainer = tcByPriority[priority] = {tasks: [], index: 0};\n\t}\n\treturn taskContainer;\n};\n\nPriorityQueue.prototype.flush = function () {\n\t// Only allow one task to run at a time.\n\tif ( this.isFlushing ) {\n\t\treturn;\n\t}\n\tthis.isFlushing = true;\n\twhile ( true ) {\n\t\t// If the first prioritized taskContainer with tasks remaining\n\t\t// is before the last prioritized taskContainer ...\n\t\tif ( this.curPriorityIndex <= this.curPriorityMax ) {\n\t\t\tvar taskContainer = this.taskContainersByPriority[this.curPriorityIndex];\n\n\t\t\t// If that task container actually has tasks remaining ...\n\t\t\tif ( taskContainer && ( taskContainer.tasks.length > taskContainer.index ) ) {\n\n\t\t\t\t// Run the task.\n\t\t\t\tvar task = taskContainer.tasks[taskContainer.index++];\n\t\t\t\t//!steal-remove-start\n\t\t\t\tif(process.env.NODE_ENV !== 'production') {\n\t\t\t\t\tthis._logFlush( task );\n\t\t\t\t}\n\t\t\t\t//!steal-remove-end\n\t\t\t\tthis.tasksRemaining--;\n\t\t\t\tthis.taskMap[\"delete\"]( task.fn );\n\t\t\t\ttask.fn.apply( task.context, task.args );\n\n\t\t\t} else {\n\t\t\t\t// Otherwise, move to the next taskContainer.\n\t\t\t\tthis.curPriorityIndex++;\n\t\t\t}\n\t\t} else {\n\t\t\t// Otherwise, reset the state for the next `.flush()`.\n\t\t\tthis.taskMap = new Map();\n\t\t\tthis.curPriorityIndex = Infinity;\n\t\t\tthis.curPriorityMax = 0;\n\t\t\tthis.taskContainersByPriority = [];\n\t\t\tthis.isFlushing = false;\n\t\t\tthis.callbacks.onComplete( this );\n\t\t\treturn;\n\t\t}\n\t}\n};\n\nPriorityQueue.prototype.isEnqueued = function ( fn ) {\n\treturn this.taskMap.has( fn );\n};\n\nPriorityQueue.prototype.flushQueuedTask = function ( fn ) {\n\tvar task = this.dequeue(fn);\n\tif(task) {\n\t\t//!steal-remove-start\n\t\tif(process.env.NODE_ENV !== 'production') {\n\t\t\tthis._logFlush( task );\n\t\t}\n\t\t//!steal-remove-end\n\t\ttask.fn.apply( task.context, task.args );\n\t}\n};\nPriorityQueue.prototype.dequeue = function(fn){\n\tvar task = this.taskMap.get( fn );\n\tif ( task ) {\n\t\tvar priority = task.meta.priority || 0;\n\t\tvar taskContainer = this.taskContainersByPriority[priority];\n\t\tvar index = taskContainer.tasks.indexOf( task, taskContainer.index );\n\n\t\tif ( index >= 0 ) {\n\t\t\ttaskContainer.tasks.splice( index, 1 );\n\t\t\tthis.tasksRemaining--;\n\t\t\tthis.taskMap[\"delete\"]( task.fn );\n\t\t\treturn task;\n\t\t} else {\n\t\t\tconsole.warn(\"Task\", fn, \"has already run\");\n\t\t}\n\t}\n};\n\nPriorityQueue.prototype.tasksRemainingCount = function () {\n\treturn this.tasksRemaining;\n};\n\nvar canQueues_1_3_2_priorityQueue = PriorityQueue;\n\n// This queue does not allow another task to run until this one is complete\nvar CompletionQueue = function () {\n\tcanQueues_1_3_2_queue.apply( this, arguments );\n\tthis.flushCount = 0;\n};\nCompletionQueue.prototype = Object.create( canQueues_1_3_2_queue.prototype );\nCompletionQueue.prototype.constructor = CompletionQueue;\n\nCompletionQueue.prototype.flush = function () {\n\tif ( this.flushCount === 0 ) {\n\t\tthis.flushCount ++;\n\t\twhile ( this.index < this.tasks.length ) {\n\t\t\tvar task = this.tasks[this.index++];\n\t\t\t//!steal-remove-start\n\t\t\tif (process.env.NODE_ENV !== 'production') {\n\t\t\t\tthis._logFlush( task );\n\t\t\t}\n\t\t\t//!steal-remove-end\n\t\t\ttask.fn.apply( task.context, task.args );\n\t\t}\n\t\tthis.index = 0;\n\t\tthis.tasks = [];\n\t\tthis.flushCount--;\n\t\tthis.callbacks.onComplete( this );\n\t}\n};\n\nvar canQueues_1_3_2_completionQueue = CompletionQueue;\n\nvar canQueues_1_3_2_sortedIndexBy = function(compare, array, value) {\n\tif (!array || !array.length) {\n\t\treturn undefined;\n\t}\n\t// check the start and the end\n\tif (compare(value, array[0]) === -1) {\n\t\treturn 0;\n\t} else if (compare(value, array[array.length - 1]) === 1) {\n\t\treturn array.length;\n\t}\n\tvar low = 0,\n\t\thigh = array.length;\n\n\t// From lodash lodash 4.6.1 <https://lodash.com/>\n\t// Copyright 2012-2016 The Dojo Foundation <http://dojofoundation.org/>\n\twhile (low < high) {\n\t\tvar mid = (low + high) >>> 1,\n\t\t\titem = array[mid],\n\t\t\tcomputed = compare(value, item);\n\t\tif (computed === -1) {\n\t\t\thigh = mid;\n\t\t} else {\n\t\t\tlow = mid + 1;\n\t\t}\n\t}\n\treturn high;\n\t// bisect by calling sortFunc\n};\n\n// Taken from jQuery\nvar hasDuplicate,\n\tsortInput,\n\tsortStable = true,\n\tindexOf = Array.prototype.indexOf;\n\nfunction sortOrder( a, b ) {\n\n\t// Flag for duplicate removal\n\tif ( a === b ) {\n\t\thasDuplicate = true;\n\t\treturn 0;\n\t}\n\n\t// Sort on method existence if only one input has compareDocumentPosition\n\tvar compare = !a.compareDocumentPosition - !b.compareDocumentPosition;\n\tif ( compare ) {\n\t\treturn compare;\n\t}\n\n\t// Calculate position if both inputs belong to the same document\n\tcompare = ( a.ownerDocument || a ) === ( b.ownerDocument || b ) ?\n\t\ta.compareDocumentPosition( b ) :\n\n\t\t// Otherwise we know they are disconnected\n\t\t1;\n\n\t// Disconnected nodes\n\tif ( compare & 1 ) {\n\n\t\t// Choose the first element that is related to our preferred document\n\t\tif ( a === document || a.ownerDocument === document &&\n\t\t\tdocument.documentElement.contains(a) ) {\n\t\t\treturn -1;\n\t\t}\n\t\tif ( b === document || b.ownerDocument === document &&\n\t\t\tdocument.documentElement.contains(b) ) {\n\t\t\treturn 1;\n\t\t}\n\n\t\t// Maintain original order\n\t\treturn sortInput ?\n\t\t\t( indexOf.call( sortInput, a ) - indexOf.call( sortInput, b ) ) :\n\t\t\t0;\n\t}\n\n\treturn compare & 4 ? -1 : 1;\n}\n\nfunction uniqueSort( results ) {\n\tvar elem,\n\t\tduplicates = [],\n\t\tj = 0,\n\t\ti = 0;\n\n\thasDuplicate = false;\n\tsortInput = !sortStable && results.slice( 0 );\n\tresults.sort( sortOrder );\n\n\tif ( hasDuplicate ) {\n\t\twhile ( ( elem = results[ i++ ] ) ) {\n\t\t\tif ( elem === results[ i ] ) {\n\t\t\t\tj = duplicates.push( i );\n\t\t\t}\n\t\t}\n\t\twhile ( j-- ) {\n\t\t\tresults.splice( duplicates[ j ], 1 );\n\t\t}\n\t}\n\n\t// Clear input after sorting to release objects\n\t// See https://github.com/jquery/sizzle/pull/225\n\tsortInput = null;\n\n\treturn results;\n}\n\nvar canQueues_1_3_2_elementSort = {\n\tuniqueSort: uniqueSort,\n\tsortOrder: sortOrder\n};\n\nvar canElementSymbol = canSymbol_1_7_0_canSymbol.for(\"can.element\");\n\n// TODO: call sortable queue and take how it should be sorted ...\nfunction sortTasks(taskA, taskB){\n\t// taskA - in the document?\n\t// taskA - given a number?\n\t//\n\treturn canQueues_1_3_2_elementSort.sortOrder(taskA.meta.element, taskB.meta.element);\n}\n\nvar DomOrderQueue = function () {\n\tcanQueues_1_3_2_queue.apply( this, arguments );\n\t// A map of a task's function to the task for that function.\n\t// This is so we can prevent duplicate functions from being enqueued\n\t// and so `flushQueuedTask` can find the task and run it.\n\tthis.taskMap = new Map();\n\n\tthis.unsortable = [];\n\tthis.isFlushing = false;\n};\nDomOrderQueue.prototype = Object.create( canQueues_1_3_2_queue.prototype );\nDomOrderQueue.prototype.constructor = DomOrderQueue;\n\nDomOrderQueue.prototype.enqueue = function ( fn, context, args, meta ) {\n\tvar task;\n\t// Only allow the enqueing of a given function once.\n\tif ( !this.taskMap.has( fn ) ) {\n\n\t\tif(!meta) {\n\t\t\tmeta = {};\n\t\t}\n\t\tif(!meta.element) {\n\t\t\tmeta.element = fn[canElementSymbol];\n\t\t}\n\n\t\ttask = {\n\t\t\tfn: fn,\n\t\t\tcontext: context,\n\t\t\targs: args,\n\t\t\tmeta: meta\n\t\t};\n\n\t\t//!steal-remove-start\n\t\tif(process.env.NODE_ENV !== 'production') {\n\t\t\tif( !meta.element ) {\n\t\t\t\tthrow new Error(\"DomOrderQueue tasks must be created with a meta.element.\");\n\t\t\t}\n\t\t}\n\t\t//!steal-remove-end\n\n\t\tthis.taskMap.set( fn, task );\n\n\t\tvar index = canQueues_1_3_2_sortedIndexBy(sortTasks, this.tasks, task);\n\n\t\tthis.tasks.splice(index, 0, task);\n\n\t\t//!steal-remove-start\n\t\tif(process.env.NODE_ENV !== 'production') {\n\t\t\tthis._logEnqueue( task );\n\t\t}\n\t\t//!steal-remove-end\n\n\t\tif ( this.tasks.length === 1 ) {\n\t\t\tthis.callbacks.onFirstTask( this );\n\t\t}\n\t} else {\n\t\t// update the task with the new data\n\t\t// TODO: ideally this would key off the mutation instead of the function.\n\t\t// We could make it key off the element and function,  not just function.\n\t\ttask = this.taskMap.get( fn );\n\t\ttask.context = context;\n\t\ttask.args = args;\n\n\t\tif(!meta) {\n\t\t\tmeta = {};\n\t\t}\n\n\t\tif(!meta.element) {\n\t\t\tmeta.element = fn[canElementSymbol];\n\t\t}\n\n\t\ttask.meta = meta;\n\n\t\t//!steal-remove-start\n\t\tif(process.env.NODE_ENV !== 'production') {\n\t\t\tthis._logEnqueue( task );\n\t\t}\n\t\t//!steal-remove-end\n\t}\n};\n\n\nDomOrderQueue.prototype.flush = function () {\n\t// Only allow one task to run at a time.\n\tif ( this.isFlushing ) {\n\t\treturn;\n\t}\n\tthis.isFlushing = true;\n\n\twhile ( this.tasks.length ) {\n\t\tvar task = this.tasks.shift();\n\t\t//!steal-remove-start\n\t\tif(process.env.NODE_ENV !== 'production') {\n\t\t\tthis._logFlush( task );\n\t\t}\n\t\t//!steal-remove-end\n\t\tthis.taskMap[\"delete\"]( task.fn );\n\t\ttask.fn.apply( task.context, task.args );\n\t}\n\tthis.isFlushing = false;\n\tthis.callbacks.onComplete( this );\n};\n\nDomOrderQueue.prototype.isEnqueued = function ( fn ) {\n\treturn this.taskMap.has( fn );\n};\n\nDomOrderQueue.prototype.flushQueuedTask = function ( fn ) {\n\tvar task = this.dequeue(fn);\n\tif(task) {\n\t\t//!steal-remove-start\n\t\tif(process.env.NODE_ENV !== 'production') {\n\t\t\tthis._logFlush( task );\n\t\t}\n\t\t//!steal-remove-end\n\t\ttask.fn.apply( task.context, task.args );\n\t}\n};\nDomOrderQueue.prototype.dequeue = function(fn){\n\tvar task = this.taskMap.get( fn );\n\tif ( task ) {\n\n\t\tvar index = this.tasks.indexOf(task);\n\n\t\tif ( index >= 0 ) {\n\t\t\tthis.tasks.splice( index, 1 );\n\t\t\tthis.taskMap[\"delete\"]( task.fn );\n\t\t\treturn task;\n\t\t} else {\n\t\t\tconsole.warn(\"Task\", fn, \"has already run\");\n\t\t}\n\t}\n};\n\nDomOrderQueue.prototype.tasksRemainingCount = function () {\n\treturn this.tasks.length;\n};\n\nvar canQueues_1_3_2_domOrderQueue = DomOrderQueue;\n\nvar canQueues_1_3_2_canQueues = createCommonjsModule(function (module) {\n\n\n\n\n\n\n\n\n// How many `batch.start` - `batch.stop` calls have been made.\nvar batchStartCounter = 0;\n// If a task was added since the last flush caused by `batch.stop`.\nvar addedTask = false;\n\n// Legacy values for the old batchNum.\nvar batchNum = 0;\nvar batchData;\n\n// Used by `.enqueueByQueue` to know the property names that might be passed.\nvar queueNames = [\"notify\", \"derive\", \"domUI\", \"dom\",\"mutate\"];\n// Create all the queues so that when one is complete,\n// the next queue is flushed.\nvar NOTIFY_QUEUE,\n\tDERIVE_QUEUE,\n\tDOM_UI_QUEUE,\n\tDOM_QUEUE,\n\tMUTATE_QUEUE;\n\n// This is for immediate notification. This is where we teardown (remove childNodes)\n// immediately.\nNOTIFY_QUEUE = new canQueues_1_3_2_queue( \"NOTIFY\", {\n\tonComplete: function () {\n\t\tDERIVE_QUEUE.flush();\n\t},\n\tonFirstTask: function () {\n\t\t// Flush right away if we aren't in a batch.\n\t\tif ( !batchStartCounter ) {\n\t\t\tNOTIFY_QUEUE.flush();\n\t\t} else {\n\t\t\taddedTask = true;\n\t\t}\n\t}\n});\n\n// For observations not connected to the DOM\nDERIVE_QUEUE = new canQueues_1_3_2_priorityQueue( \"DERIVE\", {\n\tonComplete: function () {\n\t\tDOM_QUEUE.flush();\n\t},\n\tonFirstTask: function () {\n\t\taddedTask = true;\n\t}\n});\n\n// DOM_DERIVE comes next so that any prior derives have a chance\n// to settle before the derives that actually affect the DOM\n// are re-caculated.\n// See the `Child bindings are called before the parent` can-stache test.\n// All stache-related observables should update in DOM order.\n\n// Observations that are given an element update their value here.\nDOM_QUEUE = new canQueues_1_3_2_domOrderQueue( \"DOM   \" ,{\n\tonComplete: function () {\n\t\tDOM_UI_QUEUE.flush();\n\t},\n\tonFirstTask: function () {\n\t\taddedTask = true;\n\t}\n});\n\n// The old DOM_UI queue ... we should seek to remove this.\nDOM_UI_QUEUE = new canQueues_1_3_2_completionQueue( \"DOM_UI\", {\n\tonComplete: function () {\n\t\tMUTATE_QUEUE.flush();\n\t},\n\tonFirstTask: function () {\n\t\taddedTask = true;\n\t}\n});\n\n// Update\nMUTATE_QUEUE = new canQueues_1_3_2_queue( \"MUTATE\", {\n\tonComplete: function () {\n\t\tcanQueues_1_3_2_queueState.lastTask = null;\n\t},\n\tonFirstTask: function () {\n\t\taddedTask = true;\n\t}\n});\n\nvar queues = {\n\tQueue: canQueues_1_3_2_queue,\n\tPriorityQueue: canQueues_1_3_2_priorityQueue,\n\tCompletionQueue: canQueues_1_3_2_completionQueue,\n\tDomOrderQueue: canQueues_1_3_2_domOrderQueue,\n\tnotifyQueue: NOTIFY_QUEUE,\n\tderiveQueue: DERIVE_QUEUE,\n\tdomQueue: DOM_QUEUE,\n\tdomUIQueue: DOM_UI_QUEUE,\n\tmutateQueue: MUTATE_QUEUE,\n\tbatch: {\n\t\tstart: function () {\n\t\t\tbatchStartCounter++;\n\t\t\tif ( batchStartCounter === 1 ) {\n\t\t\t\tbatchNum++;\n\t\t\t\tbatchData = {number: batchNum};\n\t\t\t}\n\t\t},\n\t\tstop: function () {\n\t\t\tbatchStartCounter--;\n\t\t\tif ( batchStartCounter === 0 ) {\n\t\t\t\tif ( addedTask ) {\n\t\t\t\t\taddedTask = false;\n\t\t\t\t\tNOTIFY_QUEUE.flush();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t// Legacy method to return if we are between start and stop calls.\n\t\tisCollecting: function () {\n\t\t\treturn batchStartCounter > 0;\n\t\t},\n\t\t// Legacy method provide a number for each batch.\n\t\tnumber: function () {\n\t\t\treturn batchNum;\n\t\t},\n\t\t// Legacy method to provide batch information.\n\t\tdata: function () {\n\t\t\treturn batchData;\n\t\t}\n\t},\n\trunAsTask: function(fn, reasonLog){\n\t\t//!steal-remove-start\n\t\tif(process.env.NODE_ENV !== 'production') {\n\t\t\treturn function(){\n\t\t\t\tcanQueues_1_3_2_queueState.lastTask = {\n\t\t\t\t\tfn: fn,\n\t\t\t\t\tcontext: this,\n\t\t\t\t\targs: arguments,\n\t\t\t\t\tmeta: {\n\t\t\t\t\t\treasonLog: typeof reasonLog === \"function\" ? reasonLog.apply(this, arguments): reasonLog,\n\t\t\t\t\t\tparentTask: canQueues_1_3_2_queueState.lastTask,\n\t\t\t\t\t\tstack: {name: \"RUN_AS\"}\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\tvar ret = fn.apply(this, arguments);\n\t\t\t\tcanQueues_1_3_2_queueState.lastTask = canQueues_1_3_2_queueState.lastTask && canQueues_1_3_2_queueState.lastTask.meta.parentTask;\n\t\t\t\treturn ret;\n\t\t\t};\n\t\t}\n\t\t//!steal-remove-end\n\t\treturn fn;\n\t},\n\tenqueueByQueue: function enqueueByQueue ( fnByQueue, context, args, makeMeta, reasonLog ) {\n\t\tif ( fnByQueue ) {\n\t\t\tqueues.batch.start();\n\t\t\t// For each queue, check if there are tasks for it.\n\t\t\tqueueNames.forEach( function ( queueName ) {\n\t\t\t\tvar name = queueName + \"Queue\";\n\t\t\t\tvar QUEUE = queues[name];\n\t\t\t\tvar tasks = fnByQueue[queueName];\n\t\t\t\tif ( tasks !== undefined ) {\n\t\t\t\t\t// For each task function, setup the meta and enqueue it.\n\t\t\t\t\ttasks.forEach( function ( fn ) {\n\t\t\t\t\t\tvar meta = makeMeta != null ? makeMeta( fn, context, args ) : {};\n\t\t\t\t\t\tmeta.reasonLog = reasonLog;\n\t\t\t\t\t\tQUEUE.enqueue( fn, context, args, meta );\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t\tqueues.batch.stop();\n\t\t}\n\t},\n\tlastTask: function(){\n\t\treturn canQueues_1_3_2_queueState.lastTask;\n\t},\n\t// Currently an internal method that provides the task stack.\n\t// Returns an array with the first task as the first item.\n\tstack: function (task) {\n\t\tvar current = task || canQueues_1_3_2_queueState.lastTask;\n\t\tvar stack = [];\n\t\twhile ( current ) {\n\t\t\tstack.unshift( current );\n\t\t\t// Queue.prototype._logEnqueue ensures\n\t\t\t// that the `parentTask` is always set.\n\t\t\tcurrent = current.meta.parentTask;\n\t\t}\n\t\treturn stack;\n\t},\n\tlogStack: function (task) {\n\t\tvar stack = this.stack(task);\n\t\tstack.forEach( function ( task, i ) {\n\t\t\tvar meta = task.meta;\n\t\t\tif( i === 0 && meta && meta.reasonLog) {\n\t\t\t\tdev.log.apply( dev, meta.reasonLog);\n\t\t\t}\n\t\t\tvar log = meta && meta.log ? meta.log : [task.fn.name, task];\n\t\t\tdev.log.apply( dev, [task.meta.stack.name + \" ran task:\"].concat( log ));\n\t\t});\n\t},\n\t// A method that is not used.  It should return the number of tasks\n\t// remaining, but doesn't seem to actually work.\n\ttaskCount: function () {\n\t\treturn NOTIFY_QUEUE.tasks.length + DERIVE_QUEUE.tasks.length + DOM_UI_QUEUE.tasks.length + MUTATE_QUEUE.tasks.length;\n\t},\n\t// A shortcut for flushign the notify queue.  `batch.start` and `batch.stop` should be\n\t// used instead.\n\tflush: function () {\n\t\tNOTIFY_QUEUE.flush();\n\t},\n\tlog: function () {\n\t\tNOTIFY_QUEUE.log.apply( NOTIFY_QUEUE, arguments );\n\t\tDERIVE_QUEUE.log.apply( DERIVE_QUEUE, arguments );\n\t\tDOM_UI_QUEUE.log.apply( DOM_UI_QUEUE, arguments );\n\t\tDOM_QUEUE.log.apply( DOM_QUEUE, arguments );\n\t\tMUTATE_QUEUE.log.apply( MUTATE_QUEUE, arguments );\n\t}\n};\n\nif ( canNamespace_1_0_0_canNamespace.queues ) {\n\tthrow new Error( \"You can't have two versions of can-queues, check your dependencies\" );\n} else {\n\tmodule.exports = canNamespace_1_0_0_canNamespace.queues = queues;\n}\n});\n\nvar canObservationRecorder_1_3_1_canObservationRecorder = createCommonjsModule(function (module) {\n\n\n\n// Contains stack of observation records created by pushing with `.start`\n// and popping with `.stop()`.\n// The top of the stack is the \"target\" observation record - the record that calls\n// to `ObservationRecorder.add` get added to.\nvar stack = [];\n\nvar addParentSymbol = canSymbol_1_7_0_canSymbol.for(\"can.addParent\"),\n\tgetValueSymbol = canSymbol_1_7_0_canSymbol.for(\"can.getValue\");\n\nvar ObservationRecorder = {\n\tstack: stack,\n\tstart: function(name) {\n\t\tvar deps = {\n\t\t\tkeyDependencies: new Map(),\n\t\t\tvalueDependencies: new Set(),\n\t\t\tchildDependencies: new Set(),\n\n\t\t\t// `traps` and `ignore` are here only for performance\n\t\t\t// reasons. They work with `ObservationRecorder.ignore` and `ObservationRecorder.trap`.\n\t\t\ttraps: null,\n\t\t\tignore: 0,\n\t\t\tname: name\n\t\t};\n\n\t\tstack.push(deps);\n\n\t\treturn deps;\n\t},\n\tstop: function() {\n\t\treturn stack.pop();\n\t},\n\n\tadd: function(obj, event) {\n\t\tvar top = stack[stack.length - 1];\n\t\tif (top && top.ignore === 0) {\n\n\t\t\tif (top.traps) {\n\t\t\t\ttop.traps.push([obj, event]);\n\t\t\t} else {\n\t\t\t\t// Use `=== undefined` instead of `arguments.length` for performance.\n\t\t\t\tif (event === undefined) {\n\t\t\t\t\ttop.valueDependencies.add(obj);\n\t\t\t\t} else {\n\t\t\t\t\tvar eventSet = top.keyDependencies.get(obj);\n\t\t\t\t\tif (!eventSet) {\n\t\t\t\t\t\teventSet = new Set();\n\t\t\t\t\t\ttop.keyDependencies.set(obj, eventSet);\n\t\t\t\t\t}\n\t\t\t\t\teventSet.add(event);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\taddMany: function(observes) {\n\t\tvar top = stack[stack.length - 1];\n\t\tif (top) {\n\t\t\tif (top.traps) {\n\t\t\t\ttop.traps.push.apply(top.traps, observes);\n\t\t\t} else {\n\t\t\t\tfor (var i = 0, len = observes.length; i < len; i++) {\n\t\t\t\t\tthis.add(observes[i][0], observes[i][1]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\tcreated: function(obs) {\n\t\tvar top = stack[stack.length - 1];\n\t\tif (top) {\n\t\t\ttop.childDependencies.add(obs);\n\t\t\tif (obs[addParentSymbol]) {\n\t\t\t\tobs[addParentSymbol](top);\n\t\t\t}\n\t\t}\n\t},\n\tignore: function(fn) {\n\t\treturn function() {\n\t\t\tif (stack.length) {\n\t\t\t\tvar top = stack[stack.length - 1];\n\t\t\t\ttop.ignore++;\n\t\t\t\tvar res = fn.apply(this, arguments);\n\t\t\t\ttop.ignore--;\n\t\t\t\treturn res;\n\t\t\t} else {\n\t\t\t\treturn fn.apply(this, arguments);\n\t\t\t}\n\t\t};\n\t},\n\tpeekValue: function(value) {\n\t\tif(!value || !value[getValueSymbol]) {\n\t\t\treturn value;\n\t\t}\n\t\tif (stack.length) {\n\t\t\tvar top = stack[stack.length - 1];\n\t\t\ttop.ignore++;\n\t\t\tvar res = value[getValueSymbol]();\n\t\t\ttop.ignore--;\n\t\t\treturn res;\n\t\t} else {\n\t\t\treturn value[getValueSymbol]();\n\t\t}\n\t},\n\tisRecording: function() {\n\t\tvar len = stack.length;\n\t\tvar last = len && stack[len - 1];\n\t\treturn last && (last.ignore === 0) && last;\n\t},\n\t// `can-observation` uses this to do diffs more easily.\n\tmakeDependenciesRecord: function(name) {\n\t\treturn {\n\t\t\ttraps: null,\n\t\t\tkeyDependencies: new Map(),\n\t\t\tvalueDependencies: new Set(),\n\t\t\t//childDependencies: new Set(),\n\t\t\tignore: 0,\n\t\t\tname: name\n\t\t};\n\t},\n\t// The following are legacy methods we should do away with.\n\tmakeDependenciesRecorder: function() {\n\t\treturn ObservationRecorder.makeDependenciesRecord();\n\t},\n\t// Traps should be replace by calling `.start()` and `.stop()`.\n\t// To do this, we'd need a method that accepts a dependency record.\n\ttrap: function() {\n\t\tif (stack.length) {\n\t\t\tvar top = stack[stack.length - 1];\n\t\t\tvar oldTraps = top.traps;\n\t\t\tvar traps = top.traps = [];\n\t\t\treturn function() {\n\t\t\t\ttop.traps = oldTraps;\n\t\t\t\treturn traps;\n\t\t\t};\n\t\t} else {\n\t\t\treturn function() {\n\t\t\t\treturn [];\n\t\t\t};\n\t\t}\n\t},\n\ttrapsCount: function() {\n\t\tif (stack.length) {\n\t\t\tvar top = stack[stack.length - 1];\n\t\t\treturn top.traps.length;\n\t\t} else {\n\t\t\treturn 0;\n\t\t}\n\t}\n};\n\nif (canNamespace_1_0_0_canNamespace.ObservationRecorder) {\n\tthrow new Error(\"You can't have two versions of can-observation-recorder, check your dependencies\");\n} else {\n\tmodule.exports = canNamespace_1_0_0_canNamespace.ObservationRecorder = ObservationRecorder;\n}\n});\n\n// ## Helpers\n// The following implement helper functions useful to `can-key-tree`'s main methods.\n\n// ### isBuiltInPrototype\n// Returns if `obj` is the prototype of a built-in JS type like `Map`.\n// Built in types' `toString` returns `[object TYPENAME]`.\nfunction isBuiltInPrototype ( obj ) {\n\tif ( obj === Object.prototype ) {\n\t\treturn true;\n\t}\n\tvar protoString = Object.prototype.toString.call( obj );\n\tvar isNotObjObj = protoString !== '[object Object]';\n\tvar isObjSomething = protoString.indexOf( '[object ' ) !== -1;\n\treturn isNotObjObj && isObjSomething;\n}\n\n// ### getDeepSize\n// Recursively returns the number of leaf values below `root` node.\nfunction getDeepSize ( root, level ) {\n\tif ( level === 0 ) {\n\t\treturn canReflect_1_19_2_canReflect.size( root );\n\t} else if ( canReflect_1_19_2_canReflect.size( root ) === 0 ) {\n\t\treturn 0;\n\t} else {\n\t\tvar count = 0;\n\t\tcanReflect_1_19_2_canReflect.each( root, function ( value ) {\n\t\t\tcount += getDeepSize( value, level - 1 );\n\t\t});\n\t\treturn count;\n\t}\n}\n\n// ### getDeep\n// Adds all leaf values under `node` to `items`.\n// `depth` is how deep `node` is in the tree.\n// `maxDepth` is the total depth of the tree structure.\nfunction getDeep ( node, items, depth, maxDepth ) {\n\tif ( !node ) {\n\t\treturn;\n\t}\n\tif ( maxDepth === depth ) {\n\t\tif ( canReflect_1_19_2_canReflect.isMoreListLikeThanMapLike( node ) ) {\n\t\t\tcanReflect_1_19_2_canReflect.addValues( items, canReflect_1_19_2_canReflect.toArray( node ) );\n\t\t} else {\n\t\t\tthrow new Error( \"can-key-tree: Map-type leaf containers are not supported yet.\" );\n\t\t}\n\t} else {\n\t\tcanReflect_1_19_2_canReflect.each( node, function ( value ) {\n\t\t\tgetDeep( value, items, depth + 1, maxDepth );\n\t\t});\n\t}\n}\n\n// ### clearDeep\n// Recursively removes value from all child nodes of `node`.\nfunction clearDeep ( node, keys, maxDepth, deleteHandler ) {\n\tif ( maxDepth === keys.length ) {\n\t\tif ( canReflect_1_19_2_canReflect.isMoreListLikeThanMapLike( node ) ) {\n\t\t\tvar valuesToRemove = canReflect_1_19_2_canReflect.toArray( node );\n\t\t\tif(deleteHandler) {\n\t\t\t\tvaluesToRemove.forEach(function(value){\n\t\t\t\t\tdeleteHandler.apply(null, keys.concat(value));\n\t\t\t\t});\n\t\t\t}\n\t\t\tcanReflect_1_19_2_canReflect.removeValues( node, valuesToRemove );\n\t\t} else {\n\t\t\tthrow new Error( \"can-key-tree: Map-type leaf containers are not supported yet.\" );\n\t\t}\n\t} else {\n\t\tcanReflect_1_19_2_canReflect.each( node, function ( value, key ) {\n\t\t\tclearDeep( value, keys.concat(key), maxDepth, deleteHandler );\n\t\t\tcanReflect_1_19_2_canReflect.deleteKeyValue( node, key );\n\t\t});\n\t}\n}\n\n// ## KeyTree\n// Creates an instance of the KeyTree.\nvar KeyTree = function ( treeStructure, callbacks ) {\n\tvar FirstConstructor = treeStructure[0];\n\tif ( canReflect_1_19_2_canReflect.isConstructorLike( FirstConstructor ) ) {\n\t\tthis.root = new FirstConstructor();\n\t} else {\n\t\tthis.root = FirstConstructor;\n\t}\n\tthis.callbacks = callbacks || {};\n\tthis.treeStructure = treeStructure;\n\t// An extra bit of state held for performance\n\tthis.empty = true;\n};\n\n// ## Methods\ncanReflect_1_19_2_canReflect.assign(KeyTree.prototype,{\n    // ### Add\n    add: function ( keys ) {\n    \tif ( keys.length > this.treeStructure.length ) {\n    \t\tthrow new Error( \"can-key-tree: Can not add path deeper than tree.\" );\n    \t}\n        // The place we will add the final leaf value.\n    \tvar place = this.root;\n\n        // Record if the root was empty so we know to call `onFirst`.\n    \tvar rootWasEmpty = this.empty === true;\n\n        // For each key, try to get the corresponding childNode.\n        for ( var i = 0; i < keys.length - 1; i++ ) {\n    \t\tvar key = keys[i];\n    \t\tvar childNode = canReflect_1_19_2_canReflect.getKeyValue( place, key );\n    \t\tif ( !childNode ) {\n                // If there is no childNode, create it and add it to the parent node.\n    \t\t\tvar Constructor = this.treeStructure[i + 1];\n    \t\t\tif ( isBuiltInPrototype( Constructor.prototype ) ) {\n    \t\t\t\tchildNode = new Constructor();\n    \t\t\t} else {\n    \t\t\t\tchildNode = new Constructor( key );\n    \t\t\t}\n    \t\t\tcanReflect_1_19_2_canReflect.setKeyValue( place, key, childNode );\n    \t\t}\n    \t\tplace = childNode;\n    \t}\n\n        // Add the final leaf value in the tree.\n    \tif ( canReflect_1_19_2_canReflect.isMoreListLikeThanMapLike( place ) ) {\n    \t\tcanReflect_1_19_2_canReflect.addValues( place, [keys[keys.length - 1]] );\n    \t} else {\n    \t\tthrow new Error( \"can-key-tree: Map types are not supported yet.\" );\n    \t}\n\n        // Callback `onFirst` if appropriate.\n    \tif ( rootWasEmpty ) {\n\t\t\tthis.empty = false;\n\t\t\tif(this.callbacks.onFirst) {\n\t\t\t\tthis.callbacks.onFirst.call( this );\n\t\t\t}\n\n    \t}\n\n    \treturn this;\n    },\n    // ### getNode\n    getNode: function ( keys ) {\n        var node = this.root;\n        // For each key, try to read the child node.\n        // If a child is not found, return `undefined`.\n        for ( var i = 0; i < keys.length; i++ ) {\n            var key = keys[i];\n            node = canReflect_1_19_2_canReflect.getKeyValue( node, key );\n            if ( !node ) {\n                return;\n            }\n        }\n        return node;\n    },\n    // ### get\n    get: function ( keys ) {\n        // Get the node specified by keys.\n    \tvar node = this.getNode( keys );\n\n        // If it's a leaf, return it.\n    \tif ( this.treeStructure.length === keys.length ) {\n    \t\treturn node;\n    \t} else {\n    \t\t// Otherwise, create a container for leaf values and\n            // recursively walk the node's children.\n    \t\tvar Type = this.treeStructure[this.treeStructure.length - 1];\n    \t\tvar items = new Type();\n    \t\tgetDeep( node, items, keys.length, this.treeStructure.length - 1 );\n    \t\treturn items;\n    \t}\n    },\n    // ### delete\n    delete: function ( keys, deleteHandler ) {\n\n        // `parentNode` will eventually be the parent nodde of the\n        // node specified by keys.\n        var parentNode = this.root,\n            // The nodes traversed to the node specified by `keys`.\n            path = [this.root],\n            lastKey = keys[keys.length - 1];\n\n        // Set parentNode to the node specified by keys\n        // and record the nodes in `path`.\n        for ( var i = 0; i < keys.length - 1; i++ ) {\n    \t\tvar key = keys[i];\n    \t\tvar childNode = canReflect_1_19_2_canReflect.getKeyValue( parentNode, key );\n    \t\tif ( childNode === undefined ) {\n    \t\t\treturn false;\n    \t\t} else {\n    \t\t\tpath.push( childNode );\n    \t\t}\n    \t\tparentNode = childNode;\n    \t}\n\n\n        // Depending on which keys were specified and the content of the\n        // key, do various cleanups ...\n        if ( !keys.length ) {\n            // If there are no keys, recursively clear the entire tree.\n    \t\tclearDeep( parentNode, [], this.treeStructure.length - 1, deleteHandler );\n    \t}\n        else if ( keys.length === this.treeStructure.length ) {\n            // If removing a leaf, remove that value.\n    \t\tif ( canReflect_1_19_2_canReflect.isMoreListLikeThanMapLike( parentNode ) ) {\n\t\t\t\tif(deleteHandler) {\n\t\t\t\t\tdeleteHandler.apply(null, keys.concat(lastKey));\n\t\t\t\t}\n    \t\t\tcanReflect_1_19_2_canReflect.removeValues( parentNode, [lastKey] );\n    \t\t} else {\n    \t\t\tthrow new Error( \"can-key-tree: Map types are not supported yet.\" );\n    \t\t}\n    \t}\n        else {\n            // If removing a node 'within' the tree, recursively clear\n            // that node and then delete the key from parent to node.\n            var nodeToRemove = canReflect_1_19_2_canReflect.getKeyValue( parentNode, lastKey );\n    \t\tif ( nodeToRemove !== undefined ) {\n    \t\t\tclearDeep( nodeToRemove, keys, this.treeStructure.length - 1, deleteHandler );\n    \t\t\tcanReflect_1_19_2_canReflect.deleteKeyValue( parentNode, lastKey );\n    \t\t} else {\n    \t\t\treturn false;\n    \t\t}\n    \t}\n\n        // After deleting the node, check if its parent is empty and\n        // recursively prune parent nodes that are now empty.\n    \tfor ( i = path.length - 2; i >= 0; i-- ) {\n    \t\tif ( canReflect_1_19_2_canReflect.size( parentNode ) === 0 ) {\n    \t\t\tparentNode = path[i];\n    \t\t\tcanReflect_1_19_2_canReflect.deleteKeyValue( parentNode, keys[i] );\n    \t\t} else {\n    \t\t\tbreak;\n    \t\t}\n    \t}\n        // Call `onEmpty` if the tree is now empty.\n    \tif (  canReflect_1_19_2_canReflect.size( this.root ) === 0 ) {\n\t\t\tthis.empty = true;\n\t\t\tif(this.callbacks.onEmpty) {\n\t\t\t\tthis.callbacks.onEmpty.call( this );\n\t\t\t}\n    \t}\n    \treturn true;\n    },\n    // ### size\n    // Recursively count the number of leaf values.\n    size: function () {\n    \treturn getDeepSize( this.root, this.treeStructure.length - 1 );\n    },\n\tisEmpty: function(){\n\t\treturn this.empty;\n\t}\n});\n\nvar canKeyTree_1_2_2_canKeyTree = KeyTree;\n\n/**\n * @module {function} can-define-lazy-value\n * @parent can-js-utilities\n * @collection can-infrastructure\n * @package ./package.json\n * @signature `defineLazyValue(obj, prop, fn, writable)`\n *\n * Use Object.defineProperty to define properties whose values will be created lazily when they are first read.\n *\n * ```js\n * var _id = 1;\n * function getId() {\n *     return _id++;\n * }\n *\n * function MyObj(name) {\n *     this.name = name;\n * }\n *\n * defineLazyValue(MyObj.prototype, 'id', getId);\n *\n * var obj1 = new MyObj('obj1');\n * var obj2 = new MyObj('obj2');\n *\n * console.log( obj2 ); // -> { name: \"obj2\" }\n * console.log( obj1 ); // -> { name: \"obj1\" }\n *\n * // the first `id` read will get id `1`\n * console( obj2.id ); // -> 1\n * console( obj1.id ); // -> 2\n *\n * console.log( obj2 ); // -> { name: \"obj2\", id: 1 }\n * console.log( obj1 ); // -> { name: \"obj1\", id: 2 }\n *\n * ```\n *\n * @param {Object} object The object to add the property to.\n * @param {String} prop   The name of the property.\n * @param {Function} fn   A function to get the value the property should be set to.\n * @param {boolean} writable   Whether the field should be writable (false by default).\n */\nvar canDefineLazyValue_1_1_1_defineLazyValue = function defineLazyValue(obj, prop, initializer, writable) {\n\tObject.defineProperty(obj, prop, {\n\t\tconfigurable: true,\n\t\tget: function() {\n\t\t\t// make the property writable\n\t\t\tObject.defineProperty(this, prop, {\n\t\t\t\tvalue: undefined,\n\t\t\t\twritable: true\n\t\t\t});\n\n\t\t\t// get the value from the initializer function\n\t\t\tvar value = initializer.call(this, obj, prop);\n\n\t\t\t// redefine the property to the value property\n\t\t\t// and reset the writable flag\n\t\t\tObject.defineProperty(this, prop, {\n\t\t\t\tvalue: value,\n\t\t\t\twritable: !!writable\n\t\t\t});\n\n\t\t\t// return the value\n\t\t\treturn value;\n\t\t},\n\t\tset: function(value){\n\t\t\tObject.defineProperty(this, prop, {\n\t\t\t\tvalue: value,\n\t\t\t\twritable: !!writable\n\t\t\t});\n\n\t\t\treturn value;\n\t\t}\n\t});\n};\n\nvar mergeValueDependencies = function mergeValueDependencies(obj, source) {\n\tvar sourceValueDeps = source.valueDependencies;\n\n\tif (sourceValueDeps) {\n\t\tvar destValueDeps = obj.valueDependencies;\n\n\t\t// make sure there is a valueDependencies Set\n\t\t// in the [obj] dependency record\n\t\tif (!destValueDeps) {\n\t\t\tdestValueDeps = new Set();\n\t\t\tobj.valueDependencies = destValueDeps;\n\t\t}\n\n\t\tcanReflect_1_19_2_canReflect.eachIndex(sourceValueDeps, function(dep) {\n\t\t\tdestValueDeps.add(dep);\n\t\t});\n\t}\n};\n\nvar mergeKeyDependencies = function mergeKeyDependencies(obj, source) {\n\tvar sourcekeyDeps = source.keyDependencies;\n\n\tif (sourcekeyDeps) {\n\t\tvar destKeyDeps = obj.keyDependencies;\n\n\t\t// make sure there is a keyDependencies Map\n\t\t// in the [obj] dependency record\n\t\tif (!destKeyDeps) {\n\t\t\tdestKeyDeps = new Map();\n\t\t\tobj.keyDependencies = destKeyDeps;\n\t\t}\n\n\t\tcanReflect_1_19_2_canReflect.eachKey(sourcekeyDeps, function(keys, obj) {\n\t\t\tvar entry = destKeyDeps.get(obj);\n\n\t\t\tif (!entry) {\n\t\t\t\tentry = new Set();\n\t\t\t\tdestKeyDeps.set(obj, entry);\n\t\t\t}\n\n\t\t\tcanReflect_1_19_2_canReflect.eachIndex(keys, function(key) {\n\t\t\t\tentry.add(key);\n\t\t\t});\n\t\t});\n\t}\n};\n\n// Merges the key and value dependencies of the source object into the\n// destination object\nvar merge = function mergeDependencyRecords(object, source) {\n\tmergeKeyDependencies(object, source);\n\tmergeValueDependencies(object, source);\n\treturn object;\n};\n\nvar properties = {\n\t/**\n\t * @function can-event-queue/value/value.on on\n\t * @parent can-event-queue/value/value\n\t *\n\t * @description Listen to changes in the observable's value.\n\t *\n\t * @signature `.on( handler[, queue='mutate'] )`\n\t *\n\t * This adds an event handler in the observable's [can-event-queue/value/value.handlers]\n\t * tree. If this is the first handler, the observable's [can-event-queue/value/value.onBound] method is called.\n\t *\n\t * ```js\n\t * observable.on(function(newVal){ ... });\n\t * observable.on(function(newVal){ ... }, \"notify\");\n\t * ```\n\t *\n\t * @param {function(*)} handler(newValue,oldValue) A handler that will be called with the new value of the\n\t * observable and optionally the old value of the observable.\n\t * @param {String} [queue] The [can-queues] queue this event handler should be bound to.  By default the handler will\n\t * be called within the `mutate` queue.\n\t */\n\ton: function(handler, queue) {\n\t\tthis.handlers.add([queue || \"mutate\", handler]);\n\t},\n\t/**\n\t * @function can-event-queue/value/value.off off\n\t * @parent can-event-queue/value/value\n\t *\n\t * @description Stop listening to changes in the observable's value.\n\t *\n\t * @signature `.off( [handler [, queue='mutate']] )`\n\t *\n\t * Removes one or more event handler in the observable's [can-event-queue/value/value.handlers]\n\t * tree. If the las handler is removed, the observable's [can-event-queue/value/value.onUnbound] method is called.\n\t *\n\t * ```js\n\t * observable.off(function(newVal){ ... });\n\t * observable.off(function(newVal){ ... }, \"notify\");\n\t * observable.off();\n\t * observable.off(undefined, \"mutate\");\n\t * ```\n\t *\n\t * @param {function(*)} handler(newValue,oldValue) The handler to be removed.  If no handler is provided and no\n\t * `queue` is provided, all handlers will be removed.\n\t * @param {String} [queue] The [can-queues] queue this event handler should be removed from.\n\t *\n\t *  If a `handler` is\n\t *  provided and no `queue` is provided, the `queue` will default to `\"mutate\"`.\n\t *\n\t *   If a `handler` is not provided, but a `queue` is provided, all handlers for the provided queue will be\n\t *   removed.\n\t */\n\toff: function(handler, queueName) {\n\t\tif (handler === undefined) {\n\t\t\tif (queueName === undefined) {\n\t\t\t\tthis.handlers.delete([]);\n\t\t\t} else {\n\t\t\t\tthis.handlers.delete([queueName]);\n\t\t\t}\n\t\t} else {\n\t\t\tthis.handlers.delete([queueName || \"mutate\", handler]);\n\t\t}\n\t}\n};\n\nvar symbols = {\n\t/**\n\t * @function can-event-queue/value/value.can.onValue @can.onValue\n\t * @parent can-event-queue/value/value\n\t *\n\t * @description Listen to changes in this observable value.\n\t *\n\t * This is an alias for [can-event-queue/value/value.on].  It satisfies [can-reflect].[can-reflect/observe.onValue].\n\t */\n\t\"can.onValue\": properties.on,\n\t/**\n\t * @function can-event-queue/value/value.can.offValue @can.offValue\n\t * @parent can-event-queue/value/value\n\t *\n\t * @description Stop listening to changes in this observable value.\n\t *\n\t * This is an alias for [can-event-queue/value/value.off].  It satisfies [can-reflect].[can-reflect/observe.offValue].\n\t */\n\t\"can.offValue\": properties.off,\n\t/**\n\t * @function can-event-queue/value/value.can.dispatch @can.dispatch\n\t * @parent can-event-queue/value/value\n\t *\n\t * @description Dispatch all event handlers within their appropriate queues.\n\t *\n\t * @signature `@can.dispatch(newValue, oldValue)`\n\t *\n\t * This is a helper method that will dispatch all [can-event-queue/value/value.handlers] within\n\t * their appropriate [can-queues] queue.\n\t *\n\t * Furthermore, it will make sure the handlers include useful meta data for debugging.\n\t *\n\t * ```js\n\t * var observable = mixinValueBindings({});\n\t * observable[canSymbol.for(\"can.dispatch\")]( 2, 1 );\n\t * ```\n\t *\n\t * @param {Any} newValue The new value of the observable.\n\t * @param {Any} oldValue The old value of the observable.\n\t */\n\t\"can.dispatch\": function(value, old) {\n\t\tvar queuesArgs = [];\n\t\tqueuesArgs = [\n\t\t\tthis.handlers.getNode([]),\n\t\t\tthis,\n\t\t\t[value, old]\n\t\t];\n\n\t\t//!steal-remove-start\n\t\tif(process.env.NODE_ENV !== 'production') {\n\t\t\tqueuesArgs = [\n\t\t\t\tthis.handlers.getNode([]),\n\t\t\t\tthis,\n\t\t\t\t[value, old]\n\t\t\t\t/* jshint laxcomma: true */\n\t\t\t\t, null\n\t\t\t\t, [canReflect_1_19_2_canReflect.getName(this), \"changed to\", value, \"from\", old]\n\t\t\t\t/* jshint laxcomma: false */\n\t\t\t];\n\t\t}\n\t\t//!steal-remove-end\n\t\tcanQueues_1_3_2_canQueues.enqueueByQueue.apply(canQueues_1_3_2_canQueues, queuesArgs);\n\t\t//!steal-remove-start\n\t\tif(process.env.NODE_ENV !== 'production') {\n\t\t\tif (typeof this._log === \"function\") {\n\t\t\t\tthis._log(old, value);\n\t\t\t}\n\t\t}\n\t\t//!steal-remove-end\n\t},\n\t/**\n\t * @function can-event-queue/value/value.can.getWhatIChange @can.getWhatIChange\n\t * @parent can-event-queue/value/value\n\t *\n\t * @description Return observables whose values are affected by attached event handlers\n\t * @signature `@can.getWhatIChange()`\n\t *\n\t * The `@@can.getWhatIChange` symbol is added to make sure [can-debug] can report\n\t * all the observables whose values are set by value-like observables.\n\t *\n\t * This function iterates over the event handlers attached to  the observable's value\n\t * event and collects the result of calling `@@can.getChangesDependencyRecord` on each\n\t * handler; this symbol allows the caller to tell what observables are being mutated\n\t * by the event handler when it is executed.\n\t *\n\t * In the following example a [can-simple-observable] instance named `month` is\n\t * created and when its value changes the `age` property of the `map` [can-simple-map]\n\t * instance is set. The event handler that causes the mutation is then decatorated with\n\t * `@@can.getChangesDependencyRecord` to register the mutation dependency.\n\t *\n\t * ```js\n\t * var month = new SimpleObservable(11);\n\t * var map = new SimpleMap({ age: 30 });\n\t * var canReflect = require(\"can-reflect\");\n\t *\n\t * var onValueChange = function onValueChange() {\n\t *\tmap.set(\"age\", 31);\n\t * };\n\t *\n\t * onValueChange[canSymbol.for(\"can.getChangesDependencyRecord\")] = function() {\n\t *\treturn {\n\t *\t\tkeyDependencies: new Map([ [map, new Set([\"age\"])] ])\n\t *\t}\n\t * };\n\t *\n\t * canReflect.onValue(month, onValueChange);\n\t * month[canSymbol.for(\"can.getWhatIChange\")]();\n\t * ```\n\t *\n\t * The dependency records collected from the event handlers are divided into\n\t * two categories:\n\t *\n\t * - mutate: Handlers in the mutate/domUI queues\n\t * - derive: Handlers in the notify queue\n\t *\n\t * Since event handlers are added by default to the \"mutate\" queue, calling\n\t * `@@can.getWhatIChange` on the `month` instance returns an object with a mutate\n\t * property and the `keyDependencies` Map registered on the `onValueChange` handler.\n\t *\n\t * If multiple event handlers were attached to `month`, the dependency records\n\t * of each handler are merged by `@@can.getWhatIChange`. Please check out the\n\t * [can-reflect-dependencies] docs to learn more about how this symbol is used\n\t * to keep track of custom observable dependencies.\n\t */\n\t\"can.getWhatIChange\": function getWhatIChange() {\n\t\t//!steal-remove-start\n\t\tif(process.env.NODE_ENV !== 'production') {\n\t\t\tvar whatIChange = {};\n\n\t\t\tvar notifyHandlers = this.handlers.get([\"notify\"]);\n\t\t\tvar mutateHandlers = [].concat(\n\t\t\t\tthis.handlers.get([\"mutate\"]),\n\t\t\t\tthis.handlers.get([\"domUI\"]),\n\t\t\t\tthis.handlers.get([\"dom\"])\n\t\t\t);\n\n\t\t\tif (notifyHandlers.length) {\n\t\t\t\tnotifyHandlers.forEach(function(handler) {\n\t\t\t\t\tvar changes = canReflect_1_19_2_canReflect.getChangesDependencyRecord(handler);\n\n\t\t\t\t\tif (changes) {\n\t\t\t\t\t\tvar record = whatIChange.derive;\n\t\t\t\t\t\tif (!record) {\n\t\t\t\t\t\t\trecord = (whatIChange.derive = {});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tmerge(record, changes);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (mutateHandlers.length) {\n\t\t\t\tmutateHandlers.forEach(function(handler) {\n\t\t\t\t\tvar changes = canReflect_1_19_2_canReflect.getChangesDependencyRecord(handler);\n\n\t\t\t\t\tif (changes) {\n\t\t\t\t\t\tvar record = whatIChange.mutate;\n\t\t\t\t\t\tif (!record) {\n\t\t\t\t\t\t\trecord = (whatIChange.mutate = {});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tmerge(record, changes);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn Object.keys(whatIChange).length ? whatIChange : undefined;\n\t\t}\n\t\t//!steal-remove-end\n\t},\n\n\t/**\n\t * @function can-event-queue/value/value.can.isBound @can.isBound\n\t * @parent can-event-queue/value/value\n\t */\n\t\"can.isBound\": function isBound() {\n\t\treturn !this.handlers.isEmpty();\n\t}\n};\n\n/**\n * @property {can-key-tree} can-event-queue/value/value.handlers handlers\n * @parent can-event-queue/value/value\n *\n * @description Access the handlers tree directly.\n *\n * @type {can-key-tree}\n *\n *  The handlers property is a [can-define-lazy-value lazily] defined property containing\n *  all handlers bound with [can-event-queue/value/value.on] and\n *  [can-event-queue/value/value.can.onValue].  It is a [can-key-tree] defined like:\n *\n *  ```js\n *  this.handlers = new KeyTree([Object, Array])\n *  ```\n *\n *  It is configured to call [can-event-queue/value/value.onBound] and\n *  [can-event-queue/value/value.onUnbound] on the instances when the first item is\n *  added to the tree and when the tree is emptied.\n */\nfunction defineLazyHandlers(){\n\treturn new canKeyTree_1_2_2_canKeyTree([Object, Array], {\n\t\tonFirst: this.onBound !== undefined && this.onBound.bind(this),\n\t\tonEmpty: this.onUnbound !== undefined && this.onUnbound.bind(this)\n\t});\n}\n\n/**\n * @function can-event-queue/value/value.onBound onBound\n * @parent can-event-queue/value/value\n *\n * @description Perform operations when an observable is gains its first event handler.\n *\n * @signature `.onBound()`\n *\n * This method is not implemented by `can-event-queue/value/value`. Instead, the object\n * should implement it if it wants to perform some actions when it becomes bound.\n *\n * ```js\n * var mixinValueBindings = require(\"can-event-queue/value/value\");\n *\n * var observable = mixinValueBindings({\n *   onBound: function(){\n *     console.log(\"I AM BOUND!\");\n *   }\n * });\n *\n * observable.on(function(){});\n * // Logs: \"I AM BOUND!\"\n * ```\n *\n */\n\n/**\n * @function can-event-queue/value/value.onUnbound onUnbound\n * @parent can-event-queue/value/value\n *\n * @description Perform operations when an observable loses all of its event handlers.\n *\n * @signature `.onBound()`\n *\n * This method is not implemented by `can-event-queue/value/value`. Instead, the object\n * should implement it if it wants to perform some actions when it becomes unbound.\n *\n * ```js\n * var mixinValueBindings = require(\"can-event-queue/value/value\");\n *\n * var observable = mixinValueBindings({\n *   onUnbound: function(){\n *     console.log(\"I AM UNBOUND!\");\n *   }\n * });\n * var handler = function(){}\n * observable.on(function(){});\n * observable.off(function(){});\n * // Logs: \"I AM UNBOUND!\"\n * ```\n */\n\n/**\n * @module {function} can-event-queue/value/value\n * @parent can-event-queue\n *\n * @description Mixin methods and symbols to make this object or prototype object\n * behave like a single-value observable.\n *\n * @signature `mixinValueBindings( obj )`\n *\n * Adds symbols and methods that make `obj` or instances having `obj` on their prototype\n * behave like single-value observables.\n *\n * When `mixinValueBindings` is called on an `obj` like:\n *\n * ```js\n * var mixinValueBindings = require(\"can-event-queue/value/value\");\n *\n * var observable = mixinValueBindings({});\n *\n * observable.on(function(newVal, oldVal){\n *   console.log(newVal);\n * });\n *\n * observable[canSymbol.for(\"can.dispatch\")](2,1);\n * // Logs: 2\n * ```\n *\n * `mixinValueBindings` adds the following properties and symbols to the object:\n *\n * - [can-event-queue/value/value.on]\n * - [can-event-queue/value/value.off]\n * - [can-event-queue/value/value.can.dispatch]\n * - [can-event-queue/value/value.can.getWhatIChange]\n * - [can-event-queue/value/value.handlers]\n *\n * When the object is bound to for the first time with `.on` or `@can.onValue`, it will look for an [can-event-queue/value/value.onBound]\n * function on the object and call it.\n *\n * When the object is has no more handlers, it will look for an [can-event-queue/value/value.onUnbound]\n * function on the object and call it.\n */\nvar mixinValueEventBindings = function(obj) {\n\tcanReflect_1_19_2_canReflect.assign(obj, properties);\n\tcanReflect_1_19_2_canReflect.assignSymbols(obj, symbols);\n\tcanDefineLazyValue_1_1_1_defineLazyValue(obj,\"handlers\",defineLazyHandlers, true);\n\treturn obj;\n};\n\n// callbacks is optional\nmixinValueEventBindings.addHandlers = function(obj, callbacks) {\n\tconsole.warn(\"can-event-queue/value: Avoid using addHandlers. Add onBound and onUnbound methods instead.\");\n\tobj.handlers = new canKeyTree_1_2_2_canKeyTree([Object, Array], callbacks);\n\treturn obj;\n};\n\nvar value = mixinValueEventBindings;\n\n// # Recorder Dependency Helpers\n// This exposes two helpers:\n// - `updateObservations` - binds and unbinds a diff of two observation records\n//   (see can-observation-recorder for details on this data type).\n// - `stopObserving` - unbinds an observation record.\n\n\n\n\n// ## Helpers\n// The following helpers all use `this` to pass additional arguments. This\n// is for performance reasons as it avoids creating new functions.\n\nfunction addNewKeyDependenciesIfNotInOld(event) {\n    // Expects `this` to have:\n    // - `.observable` - the observable we might be binding to.\n    // - `.oldEventSet` - the bound keys on the old dependency record for `observable`.\n    // - `.onDependencyChange` - the handler we will call back when the key is changed.\n    // If there wasn't any keys, or when we tried to delete we couldn't because the key\n    // wasn't in the set, start binding.\n    if(this.oldEventSet === undefined || this.oldEventSet[\"delete\"](event) === false) {\n        canReflect_1_19_2_canReflect.onKeyValue(this.observable, event, this.onDependencyChange,\"notify\");\n    }\n}\n\n// ### addObservablesNewKeyDependenciesIfNotInOld\n// For each event in the `eventSet` of new observables,\n// setup a binding (or delete the key).\nfunction addObservablesNewKeyDependenciesIfNotInOld(eventSet, observable){\n    eventSet.forEach(addNewKeyDependenciesIfNotInOld, {\n        onDependencyChange: this.onDependencyChange,\n        observable: observable,\n        oldEventSet: this.oldDependencies.keyDependencies.get(observable)\n    });\n}\n\nfunction removeKeyDependencies(event) {\n    canReflect_1_19_2_canReflect.offKeyValue(this.observable, event, this.onDependencyChange,\"notify\");\n}\n\nfunction removeObservablesKeyDependencies(oldEventSet, observable){\n    oldEventSet.forEach(removeKeyDependencies, {onDependencyChange: this.onDependencyChange, observable: observable});\n}\n\nfunction addValueDependencies(observable) {\n    // If we were unable to delete the key in the old set, setup a binding.\n    if(this.oldDependencies.valueDependencies.delete(observable) === false) {\n        canReflect_1_19_2_canReflect.onValue(observable, this.onDependencyChange,\"notify\");\n    }\n}\nfunction removeValueDependencies(observable) {\n    canReflect_1_19_2_canReflect.offValue(observable, this.onDependencyChange,\"notify\");\n}\n\n\nvar canObservation_4_2_0_recorderDependencyHelpers = {\n    // ## updateObservations\n    //\n    // Binds `observationData.onDependencyChange` to dependencies in `observationData.newDependencies` that are not currently in\n    // `observationData.oldDependencies`.  Anything in `observationData.oldDependencies`\n    // left over is unbound.\n    //\n    // The algorthim works by:\n    // 1. Loop through the `new` dependencies, checking if an equivalent is in the `old` bindings.\n    //    - If there is an equivalent binding, delete that dependency from `old`.\n    //    - If there is __not__ an equivalent binding, setup a binding from that dependency to `.onDependencyChange`.\n    // 2. Loop through the remaining `old` dependencies, teardown bindings.\n    //\n    // For performance, this method mutates the values in `.oldDependencies`.\n    updateObservations: function(observationData){\n        observationData.newDependencies.keyDependencies.forEach(addObservablesNewKeyDependenciesIfNotInOld, observationData);\n        observationData.oldDependencies.keyDependencies.forEach(removeObservablesKeyDependencies, observationData);\n        observationData.newDependencies.valueDependencies.forEach(addValueDependencies, observationData);\n        observationData.oldDependencies.valueDependencies.forEach(removeValueDependencies, observationData);\n    },\n    stopObserving: function(observationReciever, onDependencyChange){\n        observationReciever.keyDependencies.forEach(removeObservablesKeyDependencies, {onDependencyChange: onDependencyChange});\n        observationReciever.valueDependencies.forEach(removeValueDependencies, {onDependencyChange: onDependencyChange});\n    }\n};\n\nvar temporarilyBoundNoOperation = function(){};\n// A list of temporarily bound computes\nvar observables;\n// Unbinds all temporarily bound computes.\nvar unbindTemporarilyBoundValue = function () {\n\tfor (var i = 0, len = observables.length; i < len; i++) {\n\t\tcanReflect_1_19_2_canReflect.offValue(observables[i], temporarilyBoundNoOperation);\n\t}\n\tobservables = null;\n};\n\n// ### temporarilyBind\n// Binds computes for a moment to cache their value and prevent re-calculating it.\nfunction temporarilyBind(compute) {\n\tvar computeInstance = compute.computeInstance || compute;\n\tcanReflect_1_19_2_canReflect.onValue(computeInstance, temporarilyBoundNoOperation);\n\tif (!observables) {\n\t\tobservables = [];\n\t\tsetTimeout(unbindTemporarilyBoundValue, 10);\n\t}\n\tobservables.push(computeInstance);\n}\n\nvar canObservation_4_2_0_temporarilyBind = temporarilyBind;\n\n/* global require */\n// # can-observation\n\n\n\n\n\n\n\n\n\n\n\n\nvar dispatchSymbol = canSymbol_1_7_0_canSymbol.for(\"can.dispatch\");\nvar getChangesSymbol = canSymbol_1_7_0_canSymbol.for(\"can.getChangesDependencyRecord\");\nvar getValueDependenciesSymbol = canSymbol_1_7_0_canSymbol.for(\"can.getValueDependencies\");\n\n// ## Observation constructor\nfunction Observation(func, context, options){\n\tthis.deriveQueue = canQueues_1_3_2_canQueues.deriveQueue;\n\n\tthis.func = func;\n\tthis.context = context;\n\tthis.options = options || {priority: 0, isObservable: true};\n\t// A flag if we are bound or not\n\tthis.bound = false;\n\n\t// Set _value to undefined so can-view-scope & can-compute can check for it\n\tthis._value = undefined;\n\n\t// These properties will manage what our new and old dependencies are.\n\tthis.newDependencies = canObservationRecorder_1_3_1_canObservationRecorder.makeDependenciesRecord();\n\tthis.oldDependencies = null;\n\n\t// Make functions we need to pass around and maintain `this`.\n\tvar self = this;\n\tthis.onDependencyChange = function(newVal){\n\t\tself.dependencyChange(this, newVal);\n\t};\n\tthis.update = this.update.bind(this);\n\n\n\t// Add debugging names.\n\t//!steal-remove-start\n\tif (process.env.NODE_ENV !== 'production') {\n\t\tthis.onDependencyChange[getChangesSymbol] = function getChanges() {\n\t\t\tvar s = new Set();\n\t\t\ts.add(self);\n\t\t\treturn {\n\t\t\t\tvalueDependencies: s\n\t\t\t};\n\t\t};\n\t\tObject.defineProperty(this.onDependencyChange, \"name\", {\n\t\t\tvalue: canReflect_1_19_2_canReflect.getName(this) + \".onDependencyChange\",\n\t\t});\n\t\tObject.defineProperty(this.update, \"name\", {\n\t\t\tvalue: canReflect_1_19_2_canReflect.getName(this) + \".update\",\n\t\t});\n\t\tthis._name = canReflect_1_19_2_canReflect.getName(this); // cached for performance\n\t}\n\t//!steal-remove-end\n}\n\n// ## Observation prototype methods\n\n// Mixin value event bindings. This is where the following are added:\n// - `.handlers` which call `onBound` and `onUnbound`\n// - `.on` / `.off`\n// - `can.onValue` `can.offValue`\n// - `can.getWhatIChange`\nvalue(Observation.prototype);\n\ncanReflect_1_19_2_canReflect.assign(Observation.prototype, {\n\t// Starts observing changes and adds event listeners.\n\tonBound: function(){\n\t\tthis.bound = true;\n\n\t\t// Store the old dependencies\n\t\tthis.oldDependencies = this.newDependencies;\n\t\t// Start recording dependencies.\n\t\tcanObservationRecorder_1_3_1_canObservationRecorder.start(this._name);\n\t\t// Call the observation's function and update the new value.\n\t\tthis._value = this.func.call(this.context);\n\t\t// Get the new dependencies.\n\t\tthis.newDependencies = canObservationRecorder_1_3_1_canObservationRecorder.stop();\n\n\t\t// Diff and update the bindings. On change, everything will call\n\t\t// `this.onDependencyChange`, which calls `this.dependencyChange`.\n\t\tcanObservation_4_2_0_recorderDependencyHelpers.updateObservations(this);\n\t},\n\t// This is called when any of the dependencies change.\n\t// It queues up an update in the `deriveQueue` to be run after all source\n\t// observables have had time to notify all observables that \"derive\" their value.\n\tdependencyChange: function(context, args){\n\t\tif(this.bound === true) {\n\t\t\tvar queuesArgs = [];\n\t\t\tqueuesArgs = [\n\t\t\t\tthis.update,\n\t\t\t\tthis,\n\t\t\t\t[],\n\t\t\t\t{\n\t\t\t\t\tpriority: this.options.priority,\n\t\t\t\t\telement: this.options.element\n\t\t\t\t}\n\t\t\t];\n\t\t\t//!steal-remove-start\n\t\t\tif (process.env.NODE_ENV !== 'production') {\n\t\t\t\tqueuesArgs = [\n\t\t\t\t\tthis.update,\n\t\t\t\t\tthis,\n\t\t\t\t\t[],\n\t\t\t\t\t{\n\t\t\t\t\t\tpriority: this.options.priority,\n\t\t\t\t\t\telement: this.options.element\n\t\t\t\t\t\t/* jshint laxcomma: true */\n\t\t\t\t\t\t, log: [ canReflect_1_19_2_canReflect.getName(this.update) ]\n\t\t\t\t\t\t/* jshint laxcomma: false */\n\t\t\t\t\t}\n\t\t\t\t\t/* jshint laxcomma: true */\n\t\t\t\t\t, [canReflect_1_19_2_canReflect.getName(context), \"changed\"]\n\t\t\t\t\t/* jshint laxcomma: false */\n\t\t\t\t];\n\t\t\t}\n\t\t\t//!steal-remove-end\n\t\t\t// Update this observation after all `notify` tasks have been run.\n\t\t\tthis.deriveQueue.enqueue.apply(this.deriveQueue, queuesArgs);\n\t\t}\n\t},\n\t// Called to update its value as part of the `derive` queue.\n\tupdate: function() {\n\t\tif (this.bound === true) {\n\t\t\t// Keep the old value.\n\t\t\tvar oldValue = this._value;\n\t\t\tthis.oldValue = null;\n\t\t\t// Re-run `this.func` and update dependency bindings.\n\t\t\tthis.onBound();\n\t\t\t// If our value changed, call the `dispatch` method provided by `can-event-queue/value/value`.\n\t\t\tif (oldValue !== this._value) {\n\t\t\t\tthis[dispatchSymbol](this._value, oldValue);\n\t\t\t}\n\t\t}\n\t},\n\t// Called when nothing is bound to this observation.\n\t// Removes all event listeners on all dependency observables.\n\tonUnbound: function(){\n\t\tthis.bound = false;\n\t\tcanObservation_4_2_0_recorderDependencyHelpers.stopObserving(this.newDependencies, this.onDependencyChange);\n\t\t// Setup newDependencies in case someone binds again to this observable.\n\t\tthis.newDependencies = canObservationRecorder_1_3_1_canObservationRecorder.makeDependenciesRecord();\n\t},\n\t// Reads the value of the observation.\n\tget: function(){\n\n\t\t// If an external observation is tracking observables and\n\t\t// this compute can be listened to by \"function\" based computes ....\n\t\tif( this.options.isObservable && canObservationRecorder_1_3_1_canObservationRecorder.isRecording() ) {\n\n\t\t\t// ... tell the tracking compute to listen to change on this observation.\n\t\t\tcanObservationRecorder_1_3_1_canObservationRecorder.add(this);\n\t\t\t// ... if we are not bound, we should bind so that\n\t\t\t// we don't have to re-read to get the value of this observation.\n\t\t\tif (this.bound === false) {\n\t\t\t\tObservation.temporarilyBind(this);\n\t\t\t}\n\n\t\t}\n\n\n\t\tif(this.bound === true ) {\n\t\t\t// It's possible that a child dependency of this observable might be queued\n\t\t\t// to change. Check all child dependencies and make sure they are up-to-date by\n\t\t\t// possibly running what they have registered in the derive queue.\n\t\t\tif(this.deriveQueue.tasksRemainingCount() > 0) {\n\t\t\t\tObservation.updateChildrenAndSelf(this);\n\t\t\t}\n\n\t\t\treturn this._value;\n\t\t} else {\n\t\t\t// If we are not bound, just call the function.\n\t\t\treturn this.func.call(this.context);\n\t\t}\n\t},\n\n\thasDependencies: function(){\n\t\tvar newDependencies = this.newDependencies;\n\t\treturn this.bound ?\n\t\t\t(newDependencies.valueDependencies.size + newDependencies.keyDependencies.size) > 0  :\n\t\t\tundefined;\n\t},\n\tlog: function() {\n\t\t//!steal-remove-start\n\t\tif (process.env.NODE_ENV !== 'production') {\n\t\t\tvar quoteString = function quoteString(x) {\n\t\t\t\treturn typeof x === \"string\" ? JSON.stringify(x) : x;\n\t\t\t};\n\t\t\tthis._log = function(previous, current) {\n\t\t\t\tdev.log(\n\t\t\t\t\tcanReflect_1_19_2_canReflect.getName(this),\n\t\t\t\t\t\"\\n is  \", quoteString(current),\n\t\t\t\t\t\"\\n was \", quoteString(previous)\n\t\t\t\t);\n\t\t\t};\n\t\t}\n\t\t//!steal-remove-end\n\t}\n});\n\nObject.defineProperty(Observation.prototype, \"value\", {\n\tget: function() {\n\t\treturn this.get();\n\t}\n});\n\nvar observationProto = {\n\t\"can.getValue\": Observation.prototype.get,\n\t\"can.isValueLike\": true,\n\t\"can.isMapLike\": false,\n\t\"can.isListLike\": false,\n\t\"can.valueHasDependencies\": Observation.prototype.hasDependencies,\n\t\"can.getValueDependencies\": function(){\n\t\tif (this.bound === true) {\n\t\t\t// Only provide `keyDependencies` and `valueDependencies` properties\n\t\t\t// if there's actually something there.\n\t\t\tvar deps = this.newDependencies,\n\t\t\t\tresult = {};\n\n\t\t\tif (deps.keyDependencies.size) {\n\t\t\t\tresult.keyDependencies = deps.keyDependencies;\n\t\t\t}\n\n\t\t\tif (deps.valueDependencies.size) {\n\t\t\t\tresult.valueDependencies = deps.valueDependencies;\n\t\t\t}\n\n\t\t\treturn result;\n\t\t}\n\t\treturn undefined;\n\t},\n\t\"can.getPriority\": function(){\n\t\treturn this.options.priority;\n\t},\n\t\"can.setPriority\": function(priority){\n\t\tthis.options.priority = priority;\n\t},\n\t\"can.setElement\": function(element) {\n\t\tthis.options.element = element;\n\t\tthis.deriveQueue = canQueues_1_3_2_canQueues.domQueue || canQueues_1_3_2_canQueues.deriveQueue;\n\t}\n};\n\n//!steal-remove-start\nif (process.env.NODE_ENV !== 'production') {\n\tobservationProto[\"can.getName\"] = function() {\n\t\treturn canReflect_1_19_2_canReflect.getName(this.constructor) + \"<\" + canReflect_1_19_2_canReflect.getName(this.func) + \">\";\n\t};\n}\n//!steal-remove-end\ncanReflect_1_19_2_canReflect.assignSymbols(Observation.prototype, observationProto);\n\n// ## Observation.updateChildrenAndSelf\n// This recursively checks if an observation's dependencies might be in the `derive` queue.\n// If it is, we need to update that value so the reading of this value will be correct.\n// This can happen if an observation suddenly switches to depending on something that has higher\n// priority than itself.  We need to make sure that value is completely updated.\nObservation.updateChildrenAndSelf = function(observation){\n\t// If the observable has an `update` method and it's enqueued, flush that task immediately so\n\t// the value is right.\n\t// > NOTE: This only works for `Observation` right now.  We need a way of knowing how\n\t// > to find what an observable might have in the `deriveQueue`.\n\tif(observation.update !== undefined && observation.deriveQueue.isEnqueued( observation.update ) === true) {\n\t\t// TODO: In the future, we should be able to send log information\n\t\t// to explain why this needed to be updated.\n\t\tobservation.deriveQueue.flushQueuedTask(observation.update);\n\t\treturn true;\n\t}\n\n\t// If we can get dependency values from this observable ...\n\tif(observation[getValueDependenciesSymbol]) {\n\t\t// ... Loop through each dependency and see if any of them (or their children) needed an update.\n\t\tvar childHasChanged = false;\n\t\tvar valueDependencies = observation[getValueDependenciesSymbol]().valueDependencies || [];\n\t\tvalueDependencies.forEach(function(observable){\n\t\t\tif( Observation.updateChildrenAndSelf( observable ) === true) {\n\t\t\t\tchildHasChanged = true;\n\t\t\t}\n\t\t});\n\t\treturn childHasChanged;\n\t} else {\n\t\treturn false;\n\t}\n};\n\n// ## Legacy Stuff\n// Warn when `ObservationRecorder` methods are called on `Observation`.\nvar alias = {addAll: \"addMany\"};\n[\"add\",\"addAll\",\"ignore\",\"trap\",\"trapsCount\",\"isRecording\"].forEach(function(methodName){\n\tObservation[methodName] = function(){\n\t\tvar name = alias[methodName] ? alias[methodName] : methodName;\n\t\tconsole.warn(\"can-observation: Call \"+name+\"() on can-observation-recorder.\");\n\t\treturn canObservationRecorder_1_3_1_canObservationRecorder[name].apply(this, arguments);\n\t};\n});\nObservation.prototype.start = function(){\n\tconsole.warn(\"can-observation: Use .on and .off to bind.\");\n\treturn this.onBound();\n};\nObservation.prototype.stop = function(){\n\tconsole.warn(\"can-observation: Use .on and .off to bind.\");\n\treturn this.onUnbound();\n};\n\n// ### temporarilyBind\n// Will bind an observable value temporarily.  This should be part of queues probably.\nObservation.temporarilyBind = canObservation_4_2_0_temporarilyBind;\n\n\nvar canObservation_4_2_0_canObservation = canNamespace_1_0_0_canNamespace.Observation = Observation;\n\n// DependencyRecord :: { keyDependencies: Map, valueDependencies: Set }\nvar makeDependencyRecord = function makeDependencyRecord() {\n\treturn {\n\t\tkeyDependencies: new Map(),\n\t\tvalueDependencies: new Set()\n\t};\n};\n\nvar makeRootRecord = function makeRootRecord() {\n\treturn {\n\t\t// holds mutated key dependencies of a key-value like object, e.g:\n\t\t// if person.first is mutated by other observable, this map will have a\n\t\t// key `first` (the mutated property) mapped to a DependencyRecord\n\t\tmutateDependenciesForKey: new Map(),\n\n\t\t// holds mutated value dependencies of value-like objects\n\t\tmutateDependenciesForValue: makeDependencyRecord()\n\t};\n};\n\nvar addMutatedBy = function(mutatedByMap) {\n\treturn function addMutatedBy(mutated, key, mutator) {\n\t\tvar gotKey = arguments.length === 3;\n\n\t\t// normalize arguments\n\t\tif (arguments.length === 2) {\n\t\t\tmutator = key;\n\t\t\tkey = undefined;\n\t\t}\n\n\t\t// normalize mutator when shorthand is used\n\t\tif (!mutator.keyDependencies && !mutator.valueDependencies) {\n\t\t\tvar s = new Set();\n\t\t\ts.add(mutator);\n\t\t\tmutator = { valueDependencies:s };\n\t\t}\n\n\t\t// retrieve root record from the state map or create a new one\n\t\tvar root = mutatedByMap.get(mutated);\n\t\tif (!root) {\n\t\t\troot = makeRootRecord();\n\t\t\tmutatedByMap.set(mutated, root);\n\t\t}\n\n\t\t// create a [key] DependencyRecord if [key] was provided\n\t\t// and Record does not already exist\n\t\tif (gotKey && !root.mutateDependenciesForKey.get(key)) {\n\t\t\troot.mutateDependenciesForKey.set(key, makeDependencyRecord());\n\t\t}\n\n\t\t// retrieve DependencyRecord\n\t\tvar dependencyRecord = gotKey ?\n\t\t\troot.mutateDependenciesForKey.get(key) :\n\t\t\troot.mutateDependenciesForValue;\n\n\t\tif (mutator.valueDependencies) {\n\t\t\tcanReflect_1_19_2_canReflect.addValues(\n\t\t\t\tdependencyRecord.valueDependencies,\n\t\t\t\tmutator.valueDependencies\n\t\t\t);\n\t\t}\n\n\t\tif (mutator.keyDependencies) {\n\t\t\tcanReflect_1_19_2_canReflect.each(mutator.keyDependencies, function(keysSet, obj) {\n\t\t\t\tvar entry = dependencyRecord.keyDependencies.get(obj);\n\n\t\t\t\tif (!entry) {\n\t\t\t\t\tentry = new Set();\n\t\t\t\t\tdependencyRecord.keyDependencies.set(obj, entry);\n\t\t\t\t}\n\n\t\t\t\tcanReflect_1_19_2_canReflect.addValues(entry, keysSet);\n\t\t\t});\n\t\t}\n\t};\n};\n\nvar deleteMutatedBy = function(mutatedByMap) {\n\treturn function deleteMutatedBy(mutated, key, mutator) {\n\t\tvar gotKey = arguments.length === 3;\n\t\tvar root = mutatedByMap.get(mutated);\n\n\t\t// normalize arguments\n\t\tif (arguments.length === 2) {\n\t\t\tmutator = key;\n\t\t\tkey = undefined;\n\t\t}\n\n\t\t// normalize mutator when shorthand is used\n\t\tif (!mutator.keyDependencies && !mutator.valueDependencies) {\n\t\t\tvar s = new Set();\n\t\t\ts.add(mutator);\n\t\t\tmutator = { valueDependencies: s };\n\t\t}\n\n\t\tvar dependencyRecord = gotKey ?\n\t\t\troot.mutateDependenciesForKey.get(key) :\n\t\t\troot.mutateDependenciesForValue;\n\n\t\tif (mutator.valueDependencies) {\n\t\t\tcanReflect_1_19_2_canReflect.removeValues(\n\t\t\t\tdependencyRecord.valueDependencies,\n\t\t\t\tmutator.valueDependencies\n\t\t\t);\n\t\t}\n\n\t\tif (mutator.keyDependencies) {\n\t\t\tcanReflect_1_19_2_canReflect.each(mutator.keyDependencies, function(keysSet, obj) {\n\t\t\t\tvar entry = dependencyRecord.keyDependencies.get(obj);\n\n\t\t\t\tif (entry) {\n\t\t\t\t\tcanReflect_1_19_2_canReflect.removeValues(entry, keysSet);\n\t\t\t\t\tif (!entry.size) {\n\t\t\t\t\t\tdependencyRecord.keyDependencies.delete(obj);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t};\n};\n\nvar isFunction = function isFunction(value) {\n\treturn typeof value === \"function\";\n};\n\nvar getWhatIChangeSymbol = canSymbol_1_7_0_canSymbol.for(\"can.getWhatIChange\");\nvar getKeyDependenciesSymbol = canSymbol_1_7_0_canSymbol.for(\"can.getKeyDependencies\");\nvar getValueDependenciesSymbol$1 = canSymbol_1_7_0_canSymbol.for(\"can.getValueDependencies\");\n\nvar getKeyDependencies = function getKeyDependencies(obj, key) {\n\tif (isFunction(obj[getKeyDependenciesSymbol])) {\n\t\treturn canReflect_1_19_2_canReflect.getKeyDependencies(obj, key);\n\t}\n};\n\nvar getValueDependencies = function getValueDependencies(obj) {\n\tif (isFunction(obj[getValueDependenciesSymbol$1])) {\n\t\treturn canReflect_1_19_2_canReflect.getValueDependencies(obj);\n\t}\n};\n\nvar getMutatedKeyDependencies =\n\tfunction getMutatedKeyDependencies(mutatedByMap, obj, key) {\n\t\tvar root = mutatedByMap.get(obj);\n\t\tvar dependencyRecord;\n\n\t\tif (root && root.mutateDependenciesForKey.has(key)) {\n\t\t\tdependencyRecord = root.mutateDependenciesForKey.get(key);\n\t\t}\n\n\t\treturn dependencyRecord;\n\t};\n\nvar getMutatedValueDependencies =\n\tfunction getMutatedValueDependencies( mutatedByMap, obj) {\n\t\tvar result;\n\t\tvar root = mutatedByMap.get(obj);\n\n\t\tif (root) {\n\t\t\tvar\tdependencyRecord = root.mutateDependenciesForValue;\n\n\t\t\tif (dependencyRecord.keyDependencies.size) {\n\t\t\t\tresult = result || {};\n\t\t\t\tresult.keyDependencies = dependencyRecord.keyDependencies;\n\t\t\t}\n\n\t\t\tif (dependencyRecord.valueDependencies.size) {\n\t\t\t\tresult = result || {};\n\t\t\t\tresult.valueDependencies = dependencyRecord.valueDependencies;\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t};\n\nvar getWhatIChange = function getWhatIChange(obj, key) {\n\tif (isFunction(obj[getWhatIChangeSymbol])) {\n\t\tvar gotKey = arguments.length === 2;\n\n\t\treturn gotKey ?\n\t\t\tcanReflect_1_19_2_canReflect.getWhatIChange(obj, key) :\n\t\t\tcanReflect_1_19_2_canReflect.getWhatIChange(obj);\n\t}\n};\n\nvar isEmptyRecord = function isEmptyRecord(record) {\n\treturn (\n\t\trecord == null ||\n\t\t!Object.keys(record).length ||\n\t\t(record.keyDependencies && !record.keyDependencies.size) &&\n\t\t(record.valueDependencies && !record.valueDependencies.size)\n\t);\n};\n\nvar getWhatChangesMe = function getWhatChangesMe(mutatedByMap, obj, key) {\n\tvar gotKey = arguments.length === 3;\n\n\tvar mutate = gotKey ?\n\t\tgetMutatedKeyDependencies(mutatedByMap, obj, key) :\n\t\tgetMutatedValueDependencies(mutatedByMap, obj);\n\n\tvar derive = gotKey ?\n\t\tgetKeyDependencies(obj, key) :\n\t\tgetValueDependencies(obj);\n\n\tif (!isEmptyRecord(mutate) || !isEmptyRecord(derive)) {\n\t\treturn canAssign_1_3_3_canAssign(\n\t\t\tcanAssign_1_3_3_canAssign(\n\t\t\t\t{},\n\t\t\t\tmutate ? { mutate: mutate } : null\n\t\t\t),\n\t\t\tderive ? { derive: derive } : null\n\t\t);\n\t}\n};\n\nvar getDependencyDataOf = function(mutatedByMap) {\n\treturn function getDependencyDataOf(obj, key) {\n\t\tvar gotKey = arguments.length === 2;\n\n\t\tvar whatChangesMe = gotKey ?\n\t\t\tgetWhatChangesMe(mutatedByMap, obj, key) :\n\t\t\tgetWhatChangesMe(mutatedByMap, obj);\n\n\t\tvar whatIChange = gotKey ? getWhatIChange(obj, key) : getWhatIChange(obj);\n\n\t\tif (whatChangesMe || whatIChange) {\n\t\t\treturn canAssign_1_3_3_canAssign(\n\t\t\t\tcanAssign_1_3_3_canAssign(\n\t\t\t\t\t{},\n\t\t\t\t\twhatIChange ? { whatIChange: whatIChange } : null\n\t\t\t\t),\n\t\t\t\twhatChangesMe ? { whatChangesMe: whatChangesMe } : null\n\t\t\t);\n\t\t}\n\t};\n};\n\n// mutatedByMap :: WeakMap<obj, {\n//\tmutateDependenciesForKey:   Map<key, DependencyRecord>,\n//\tmutateDependenciesForValue: DependencyRecord\n// }>\nvar mutatedByMap = new WeakMap();\n\nvar canReflectDependencies_1_1_2_canReflectDependencies = {\n\t// Track mutations between observable as dependencies\n\t// addMutatedBy(obs, obs2);\n\t// addMutatedBy(obs, key, obs2);\n\t// addMutatedBy(obs, { valueDependencies: Set, keyDependencies: Map })\n\t// addMutatedBy(obs, key, { valueDependencies: Set, keyDependencies: Map })\n\taddMutatedBy: addMutatedBy(mutatedByMap),\n\n\t// Call this method with the same arguments as `addMutatedBy`\n\t// to unregister the mutation dependency\n\tdeleteMutatedBy: deleteMutatedBy(mutatedByMap),\n\n\t// Returns an object with the dependecies of the given argument\n\t//\t{\n\t//\t\twhatIChange: { mutate: DependencyRecord, derive: DependencyRecord },\n\t//\t\twhatChangesMe: { mutate: DependencyRecord, derive: DependencyRecord }\n\t//\t}\n\tgetDependencyDataOf: getDependencyDataOf(mutatedByMap)\n};\n\n//!steal-remove-start\nif (process.env.NODE_ENV !== 'production') {\n\tvar canReflectDependencies = canReflectDependencies_1_1_2_canReflectDependencies;\n}\n//!steal-remove-end\n\nvar key = function keyObservable(root, keyPath) {\n\tvar keyPathParts = canKey_1_2_1_utils.parts(keyPath);\n\tvar lastIndex = keyPathParts.length - 1;\n\n\t// Some variables used to build the dependency/mutation graph\n\t//!steal-remove-start\n\tif (process.env.NODE_ENV !== 'production') {\n\t\tvar lastKey;// This stores the last part of the keyPath, e.g. “key” in “outer.inner.key”\n\t\tvar lastParent;// This stores the object that the last key is on, e.g. “outer.inner” in outer: {inner: {\"key\": \"value\"}}\n\t}\n\t//!steal-remove-end\n\n\tvar observation = new canObservation_4_2_0_canObservation(function() {\n\t\tvar value;\n\n\t\t// This needs to be walked every time because the objects along the key path might change\n\t\tcanKey_1_2_1_canKey.walk(root, keyPathParts, function(keyData, i) {\n\t\t\tif (i === lastIndex) {\n\t\t\t\t//!steal-remove-start\n\t\t\t\tif (process.env.NODE_ENV !== 'production') {\n\t\t\t\t\t// observation is mutating keyData.parent\n\t\t\t\t\tif (lastParent && (keyData.key !== lastKey || keyData.parent !== lastParent)) {\n\t\t\t\t\t\tcanReflectDependencies.deleteMutatedBy(lastParent, lastKey, observation);\n\t\t\t\t\t}\n\t\t\t\t\tlastKey = keyData.key;\n\t\t\t\t\tlastParent = keyData.parent;\n\t\t\t\t\tcanReflectDependencies.addMutatedBy(lastParent, lastKey, observation);\n\t\t\t\t}\n\t\t\t\t//!steal-remove-end\n\n\t\t\t\tvalue = keyData.value;\n\t\t\t}\n\t\t});\n\n\t\treturn value;\n\t});\n\n\t// Function for setting the value\n\tvar valueSetter = function(newVal) {\n\t\tcanKey_1_2_1_canKey.set(root, keyPathParts, newVal);\n\t};\n\n\t// The `value` property getter & setter\n\tObject.defineProperty(observation, \"value\", {\n\t\tget: observation.get,\n\t\tset: valueSetter\n\t});\n\n\tvar symbolsToAssign = {\n\t\t\"can.setValue\": valueSetter\n\t};\n\n\t//!steal-remove-start\n\tif (process.env.NODE_ENV !== 'production') {\n\n\t\t// Debug name\n\t\tsymbolsToAssign[\"can.getName\"] = function getName() {\n\t\t\tvar objectName = canReflect_1_19_2_canReflect.getName(root);\n\t\t\treturn \"keyObservable<\" + objectName + \".\" + keyPath + \">\";\n\t\t};\n\n\t\t// Register what this observable changes\n\t\tsymbolsToAssign[\"can.getWhatIChange\"] = function getWhatIChange() {\n\t\t\tvar m = new Map();\n\t\t\tvar s = new Set();\n\t\t\ts.add(lastKey);\n\t\t\tm.set(lastParent, s);\n\t\t\treturn {\n\t\t\t\tmutate: {\n\t\t\t\t\tkeyDependencies: m\n\t\t\t\t}\n\t\t\t};\n\t\t};\n\t}\n\t//!steal-remove-end\n\n\treturn canReflect_1_19_2_canReflect.assignSymbols(observation, symbolsToAssign);\n};\n\n// when printing out strings to the console, quotes are not included which\n// makes it confusing to tell the actual output from static string messages\nfunction quoteString(x) {\n\treturn typeof x === \"string\" ? JSON.stringify(x) : x;\n}\n\n// To add the `.log` function to a observable\n// a.- Add the log function to the propotype:\n//\t   `Observable.propotype.log = log`\n// b.- Make sure `._log` is called by the observable when mutation happens\n//     `_.log` should be passed the current value and the value before the mutation\nvar canSimpleObservable_2_5_0_log = function log() {\n\t//!steal-remove-start\n\tif (process.env.NODE_ENV !== 'production') {\n\t\tthis._log = function(previous, current) {\n\t\t\tdev.log(\n\t\t\t\tcanReflect_1_19_2_canReflect.getName(this),\n\t\t\t\t\"\\n is  \", quoteString(current),\n\t\t\t\t\"\\n was \", quoteString(previous)\n\t\t\t);\n\t\t};\n\t}\n\t//!steal-remove-end\n};\n\nvar dispatchSymbol$1 = canSymbol_1_7_0_canSymbol.for(\"can.dispatch\");\n\n/**\n * @module {function} can-simple-observable\n * @parent can-observables\n * @collection can-infrastructure\n * @package ./package.json\n * @description Create an observable value.\n *\n * @signature `new SimpleObservable(initialValue)`\n *\n * Creates an observable value that can be read, written, and observed using [can-reflect].\n *\n * @param {*} initialValue The initial value of the observable.\n *\n * @return {can-simple-observable} An observable instance\n *\n * @body\n *\n * ## Use\n *\n * ```js\n *  var obs = new SimpleObservable('one');\n *\n *  canReflect.getValue(obs); // -> \"one\"\n *\n *  canReflect.setValue(obs, 'two');\n *  canReflect.getValue(obs); // -> \"two\"\n *\n *  function handler(newValue) {\n *    // -> \"three\"\n *  };\n *  canReflect.onValue(obs, handler);\n *  canReflect.setValue(obs, 'three');\n *\n *  canReflect.offValue(obs, handler);\n * ```\n */\nfunction SimpleObservable(initialValue) {\n\tthis._value = initialValue;\n}\n\n// mix in the value-like object event bindings\nvalue(SimpleObservable.prototype);\n\ncanReflect_1_19_2_canReflect.assignMap(SimpleObservable.prototype, {\n\tlog: canSimpleObservable_2_5_0_log,\n\tget: function(){\n\t\tcanObservationRecorder_1_3_1_canObservationRecorder.add(this);\n\t\treturn this._value;\n\t},\n\tset: function(value$$1){\n\t\tvar old = this._value;\n\t\tthis._value = value$$1;\n\n\t\tthis[dispatchSymbol$1](value$$1, old);\n\t}\n});\nObject.defineProperty(SimpleObservable.prototype,\"value\",{\n\tset: function(value$$1){\n\t\treturn this.set(value$$1);\n\t},\n\tget: function(){\n\t\treturn this.get();\n\t}\n});\n\nvar simpleObservableProto = {\n\t\"can.getValue\": SimpleObservable.prototype.get,\n\t\"can.setValue\": SimpleObservable.prototype.set,\n\t\"can.isMapLike\": false,\n\t\"can.valueHasDependencies\": function(){\n\t\treturn true;\n\t}\n};\n\n//!steal-remove-start\nif (process.env.NODE_ENV !== 'production') {\n\tsimpleObservableProto[\"can.getName\"] = function() {\n\t\tvar value$$1 = this._value;\n\t\tif (typeof value$$1 !== 'object' || value$$1 === null) {\n\t\t\tvalue$$1 = JSON.stringify(value$$1);\n\t\t}\n\t\telse {\n\t\t\tvalue$$1 = '';\n\t\t}\n\n\t\treturn canReflect_1_19_2_canReflect.getName(this.constructor) + \"<\" + value$$1 + \">\";\n\t};\n}\n//!steal-remove-end\n\ncanReflect_1_19_2_canReflect.assignSymbols(SimpleObservable.prototype, simpleObservableProto);\n\nvar canSimpleObservable_2_5_0_canSimpleObservable = canNamespace_1_0_0_canNamespace.SimpleObservable = SimpleObservable;\n\nvar peek = canObservationRecorder_1_3_1_canObservationRecorder.ignore(canReflect_1_19_2_canReflect.getValue.bind(canReflect_1_19_2_canReflect));\n\n// This supports an \"internal\" settable value that the `fn` can derive its value from.\n// It's useful to `can-define`.\n// ```\n// new SettableObservable(function(lastSet){\n//   return lastSet * 5;\n// }, null, 5)\n// ```\nfunction SettableObservable(fn, context, initialValue) {\n\n\tthis.lastSetValue = new canSimpleObservable_2_5_0_canSimpleObservable(initialValue);\n\tfunction observe() {\n\t\treturn fn.call(context, this.lastSetValue.get());\n\t}\n\tthis.handler = this.handler.bind(this);\n\n\t//!steal-remove-start\n\tif (process.env.NODE_ENV !== 'production') {\n\t\tcanReflect_1_19_2_canReflect.assignSymbols(this, {\n\t\t\t\"can.getName\": function() {\n\t\t\t\treturn (\n\t\t\t\t\tcanReflect_1_19_2_canReflect.getName(this.constructor) +\n\t\t\t\t\t\"<\" +\n\t\t\t\t\tcanReflect_1_19_2_canReflect.getName(fn) +\n\t\t\t\t\t\">\"\n\t\t\t\t);\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(this.handler, \"name\", {\n\t\t\tvalue: canReflect_1_19_2_canReflect.getName(this) + \".handler\"\n\t\t});\n\t\tObject.defineProperty(observe, \"name\", {\n\t\t\tvalue: canReflect_1_19_2_canReflect.getName(fn) + \"::\" + canReflect_1_19_2_canReflect.getName(this.constructor)\n\t\t});\n\t}\n\t//!steal-remove-end\n\n\tthis.observation = new canObservation_4_2_0_canObservation(observe, this);\n}\n\nvalue(SettableObservable.prototype);\n\ncanReflect_1_19_2_canReflect.assignMap(SettableObservable.prototype, {\n\t// call `obs.log()` to log observable changes to the browser console\n\t// The observable has to be bound for `.log` to be called\n\tlog: canSimpleObservable_2_5_0_log,\n\tconstructor: SettableObservable,\n\thandler: function(newVal) {\n\t\tvar old = this._value, reasonLog;\n\t\tthis._value = newVal;\n\n\t\t//!steal-remove-start\n\t\tif (process.env.NODE_ENV !== 'production') {\n\t\t\tif (typeof this._log === \"function\") {\n\t\t\t\tthis._log(old, newVal);\n\t\t\t}\n\t\t\treasonLog = [canReflect_1_19_2_canReflect.getName(this),\"set to\", newVal, \"from\", old];\n\t\t}\n\t\t//!steal-remove-end\n\n\t\t// adds callback handlers to be called w/i their respective queue.\n\t\tcanQueues_1_3_2_canQueues.enqueueByQueue(\n\t\t\tthis.handlers.getNode([]),\n\t\t\tthis,\n\t\t\t[newVal, old],\n\t\t\tnull,\n\t\t\treasonLog\n\t\t);\n\t},\n\tonBound: function() {\n\t\t// onBound can be called by `.get` and then later called through\n\t\t// a keyTree binding.\n\t\tif(!this.bound) {\n\t\t\tthis.bound = true;\n\t\t\tthis.activate();\n\t\t}\n\t},\n\tactivate: function(){\n\t\tcanReflect_1_19_2_canReflect.onValue(this.observation, this.handler, \"notify\");\n\t\tthis._value = peek(this.observation);\n\t},\n\tonUnbound: function() {\n\t\tthis.bound = false;\n\t\tcanReflect_1_19_2_canReflect.offValue(this.observation, this.handler, \"notify\");\n\t},\n\tset: function(newVal) {\n\t\tvar oldVal =  this.lastSetValue.get();\n\n\t\tif (\n\t\t\tcanReflect_1_19_2_canReflect.isObservableLike(oldVal) &&\n\t\t\tcanReflect_1_19_2_canReflect.isValueLike(oldVal) &&\n\t\t\t!canReflect_1_19_2_canReflect.isObservableLike(newVal)\n\t\t) {\n\t\t\tcanReflect_1_19_2_canReflect.setValue(oldVal, newVal);\n\t\t} else {\n\t\t\tif (newVal !== oldVal) {\n\t\t\t\tthis.lastSetValue.set(newVal);\n\t\t\t}\n\t\t}\n\t},\n\tget: function() {\n\t\tif (canObservationRecorder_1_3_1_canObservationRecorder.isRecording()) {\n\t\t\tcanObservationRecorder_1_3_1_canObservationRecorder.add(this);\n\t\t\tif (!this.bound) {\n\t\t\t\t// proactively setup bindings\n\t\t\t\tthis.onBound();\n\t\t\t}\n\t\t}\n\n\t\tif (this.bound === true) {\n\t\t\treturn this._value;\n\t\t} else {\n\t\t\treturn this.observation.get();\n\t\t}\n\t},\n\thasDependencies: function() {\n\t\treturn canReflect_1_19_2_canReflect.valueHasDependencies(this.observation);\n\t},\n\tgetValueDependencies: function() {\n\t\treturn canReflect_1_19_2_canReflect.getValueDependencies(this.observation);\n\t}\n});\n\nObject.defineProperty(SettableObservable.prototype,\"value\",{\n\tset: function(value$$1){\n\t\treturn this.set(value$$1);\n\t},\n\tget: function(){\n\t\treturn this.get();\n\t}\n});\n\ncanReflect_1_19_2_canReflect.assignSymbols(SettableObservable.prototype, {\n\t\"can.getValue\": SettableObservable.prototype.get,\n\t\"can.setValue\": SettableObservable.prototype.set,\n\t\"can.isMapLike\": false,\n\t\"can.getPriority\": function() {\n\t\treturn canReflect_1_19_2_canReflect.getPriority(this.observation);\n\t},\n\t\"can.setPriority\": function(newPriority) {\n\t\tcanReflect_1_19_2_canReflect.setPriority(this.observation, newPriority);\n\t},\n\t\"can.valueHasDependencies\": SettableObservable.prototype.hasDependencies,\n\t\"can.getValueDependencies\": SettableObservable.prototype.getValueDependencies\n});\n\nvar settable = SettableObservable;\n\nvar canValue_1_1_2_canValue = canNamespace_1_0_0_canNamespace.value = {\n\tbind: function(object, keyPath) {\n\t\treturn key(object, keyPath);\n\t},\n\n\tfrom: function(object, keyPath) {\n\t\tvar observationFunction = function() {\n\t\t\treturn canKey_1_2_1_canKey.get(object, keyPath);\n\t\t};\n\n\t\t//!steal-remove-start\n\t\tif (process.env.NODE_ENV !== 'production') {\n\t\t\tvar objectName = canReflect_1_19_2_canReflect.getName(object);\n\t\t\tObject.defineProperty(observationFunction, \"name\", {\n\t\t\t\tvalue: \"ValueFrom<\" + objectName + \".\" + keyPath + \">\"\n\t\t\t});\n\t\t}\n\t\t//!steal-remove-end\n\n\t\treturn new canObservation_4_2_0_canObservation(observationFunction);\n\t},\n\n\treturnedBy: function(getter, context, initialValue) {\n\t\tif(getter.length === 1) {\n\t\t\treturn new settable(getter, context, initialValue);\n\t\t} else {\n\t\t\treturn new canObservation_4_2_0_canObservation(getter, context);\n\t\t}\n\t},\n\n\tto: function(object, keyPath) {\n\t\tvar observable = key(object, keyPath);\n\n\t\t//!steal-remove-start\n\t\tif (process.env.NODE_ENV !== 'production') {\n\t\t\tcanReflect_1_19_2_canReflect.assignSymbols(observable.onDependencyChange, {\n\t\t\t\t\"can.getChangesDependencyRecord\": function getChangesDependencyRecord() {\n\t\t\t\t\t// can-simple-observable/key/ creates an observation that walks along\n\t\t\t\t\t// the keyPath. In doing so, it implicitly registers the objects and\n\t\t\t\t\t// keys along the path as mutators of the observation; this means\n\t\t\t\t\t// getDependencyDataOf(...an object and key along the path) returns\n\t\t\t\t\t// whatIChange.derive.valueDependencies = [observable], which is not\n\t\t\t\t\t// true! The observable does not derive its value from the objects\n\t\t\t\t\t// along the keyPath. By implementing getChangesDependencyRecord and\n\t\t\t\t\t// returning undefined, calls to can.getWhatIChange() for any objects\n\t\t\t\t\t// along the keyPath will not include the observable.\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\t//!steal-remove-end\n\n\t\tvar symbolsToAssign = {\n\t\t\t// Remove the getValue symbol so the observable is only a setter\n\t\t\t\"can.getValue\": null\n\t\t};\n\n\t\t//!steal-remove-start\n\t\tif (process.env.NODE_ENV !== 'production') {\n\t\t\tsymbolsToAssign[\"can.getValueDependencies\"] = function getValueDependencies() {\n\t\t\t\t// Normally, getDependencyDataOf(observable) would include\n\t\t\t\t// whatChangesMe.derive.keyDependencies, and it would contain\n\t\t\t\t// the object and anything along keyPath. This symbol returns\n\t\t\t\t// undefined because this observable does not derive its value\n\t\t\t\t// from the object or anything along the keyPath, it only\n\t\t\t\t// mutates the last object in the keyPath.\n\t\t\t};\n\t\t}\n\t\t//!steal-remove-end\n\n\t\treturn canReflect_1_19_2_canReflect.assignSymbols(observable, symbolsToAssign);\n\t},\n\n\twith: function(initialValue) {\n\t\treturn new canSimpleObservable_2_5_0_canSimpleObservable(initialValue);\n\t}\n};\n\n// ##string.js\n// _Miscellaneous string utility functions._\n// Several of the methods in this plugin use code adapted from Prototype\n// Prototype JavaScript framework, version 1.6.0.1.\n// © 2005-2007 Sam Stephenson\nvar strUndHash = /_|-/,\n\tstrColons = /\\=\\=/,\n\tstrWords = /([A-Z]+)([A-Z][a-z])/g,\n\tstrLowUp = /([a-z\\d])([A-Z])/g,\n\tstrDash = /([a-z\\d])([A-Z])/g,\n\tstrQuote = /\"/g,\n\tstrSingleQuote = /'/g,\n\tstrHyphenMatch = /-+(.)?/g,\n\tstrCamelMatch = /[a-z][A-Z]/g,\n\tconvertBadValues = function (content) {\n\t\t// Convert bad values into empty strings\n\t\tvar isInvalid = content === null || content === undefined || isNaN(content) && '' + content === 'NaN';\n\t\treturn '' + (isInvalid ? '' : content);\n\t};\n\nvar string = {\n\t/**\n\t * @function can-string.esc esc\n\t * @signature `string.esc(content)`\n\t * @param  {String} content a string\n\t * @return {String}         the string safely HTML-escaped\n\t *\n\t * ```js\n\t * var string = require(\"can-string\");\n\t *\n\t * string.esc(\"<div>&nbsp;</div>\"); //-> \"&lt;div&gt;&amp;nbsp;&lt;/div&gt;\"\n\t * ```\n\t */\n\tesc: function (content) {\n\t\treturn convertBadValues(content)\n\t\t\t.replace(/&/g, '&amp;')\n\t\t\t.replace(/</g, '&lt;')\n\t\t\t.replace(/>/g, '&gt;')\n\t\t\t.replace(strQuote, '&#34;')\n\t\t\t.replace(strSingleQuote, '&#39;');\n\t},\n\t/**\n\t * @function can-string.capitalize capitalize\n\t * @signature `string.capitalize(s)`\n\t * @param  {String} s     the string to capitalize\n\t * @return {String}       the supplied string with the first character uppercased if it is a letter\n\t *\n\t * ```js\n\t * var string = require(\"can-string\");\n\t *\n\t * console.log(string.capitalize(\"foo\")); // -> \"Foo\"\n\t * console.log(string.capitalize(\"123\")); // -> \"123\"\n\t * ```\n\t */\n\tcapitalize: function (s) {\n\t\t// Used to make newId.\n\t\treturn s.charAt(0)\n\t\t\t.toUpperCase() + s.slice(1);\n\t},\n\t/**\n\t * @function can-string.camelize camelize\n\t * @signature `string.camelize(s)`\n\t * @param  {String} str   the string to camelCase\n\t * @return {String}       the supplied string with hyphens removed and following letters capitalized.\n\t *\n\t * ```js\n\t * var string = require(\"can-string\");\n\t *\n\t * console.log(string.camelize(\"foo-bar\")); // -> \"fooBar\"\n\t * console.log(string.camelize(\"-webkit-flex-flow\")); // -> \"WebkitFlexFlow\"\n\t * ```\n\t */\n\tcamelize: function (str) {\n\t\treturn convertBadValues(str)\n\t\t\t.replace(strHyphenMatch, function (match, chr) {\n\t\t\t\treturn chr ? chr.toUpperCase() : '';\n\t\t\t});\n\t},\n\t/**\n\t * @function can-string.hyphenate hyphenate\n\t * @signature `string.hyphenate(s)`\n\t * @param  {String} str   a string in camelCase\n\t * @return {String}       the supplied string with camelCase converted to hyphen-lowercase digraphs\n\t *\n\t * ```js\n\t * var string = require(\"can-string\");\n\t *\n\t * console.log(string.hyphenate(\"fooBar\")); // -> \"foo-bar\"\n\t * console.log(string.hyphenate(\"WebkitFlexFlow\")); // -> \"Webkit-flex-flow\"\n\t * ```\n\t */\n\thyphenate: function (str) {\n\t\treturn convertBadValues(str)\n\t\t\t.replace(strCamelMatch, function (str) {\n\t\t\t\treturn str.charAt(0) + '-' + str.charAt(1)\n\t\t\t\t\t.toLowerCase();\n\t\t\t});\n\t},\n\t/**\n\t * @function can-string.pascalize pascalize\n\t * @signature `string.pascalize(s)`\n\t * @param  {String} str   the string in hyphen case | camelCase\n\t * @return {String}       the supplied string with hyphens | camelCase converted to PascalCase\n\t *\n\t * ```js\n\t * var string = require(\"can-string\");\n\t *\n\t * console.log(string.pascalize(\"fooBar\")); // -> \"FooBar\"\n\t * console.log(string.pascalize(\"baz-bar\")); // -> \"BazBar\"\n\t * ```\n\t */\n\tpascalize: function (str) {\n\t\treturn string.capitalize(string.camelize(str));\n\t},\n\t/**\n\t * @function can-string.underscore underscore\n\t * @signature `string.underscore(s)`\n\t * @param  {String} str   a string in camelCase\n\t * @return {String}       the supplied string with camelCase converted to underscore-lowercase digraphs\n\t *\n\t * ```js\n\t * var string = require(\"can-string\");\n\t *\n\t * console.log(string.underscore(\"fooBar\")); // -> \"foo_bar\"\n\t * console.log(string.underscore(\"HTMLElement\")); // -> \"html_element\"\n\t * ```\n\t */\n\tunderscore: function (s) {\n\t\treturn s.replace(strColons, '/')\n\t\t\t.replace(strWords, '$1_$2')\n\t\t\t.replace(strLowUp, '$1_$2')\n\t\t\t.replace(strDash, '_')\n\t\t\t.toLowerCase();\n\t},\n\t/**\n\t * @property {RegExp} can-string.strUndHash strUndHash\n\t *\n\t * A regex which matches an underscore or hyphen character\n\t */\n\tundHash: strUndHash\n};\nvar canString_1_1_0_canString = string;\n\nvar inSetupSymbol = canSymbol_1_7_0_canSymbol.for(\"can.initializing\");\n\n//!steal-remove-start\nif(process.env.NODE_ENV !== 'production') {\n\tvar CanString = canString_1_1_0_canString;\n\tvar reservedWords = {\n\t\t\"abstract\": true,\n\t\t\"boolean\": true,\n\t\t\"break\": true,\n\t\t\"byte\": true,\n\t\t\"case\": true,\n\t\t\"catch\": true,\n\t\t\"char\": true,\n\t\t\"class\": true,\n\t\t\"const\": true,\n\t\t\"continue\": true,\n\t\t\"debugger\": true,\n\t\t\"default\": true,\n\t\t\"delete\": true,\n\t\t\"do\": true,\n\t\t\"double\": true,\n\t\t\"else\": true,\n\t\t\"enum\": true,\n\t\t\"export\": true,\n\t\t\"extends\": true,\n\t\t\"false\": true,\n\t\t\"final\": true,\n\t\t\"finally\": true,\n\t\t\"float\": true,\n\t\t\"for\": true,\n\t\t\"function\": true,\n\t\t\"goto\": true,\n\t\t\"if\": true,\n\t\t\"implements\": true,\n\t\t\"import\": true,\n\t\t\"in\": true,\n\t\t\"instanceof\": true,\n\t\t\"int\": true,\n\t\t\"interface\": true,\n\t\t\"let\": true,\n\t\t\"long\": true,\n\t\t\"native\": true,\n\t\t\"new\": true,\n\t\t\"null\": true,\n\t\t\"package\": true,\n\t\t\"private\": true,\n\t\t\"protected\": true,\n\t\t\"public\": true,\n\t\t\"return\": true,\n\t\t\"short\": true,\n\t\t\"static\": true,\n\t\t\"super\": true,\n\t\t\"switch\": true,\n\t\t\"synchronized\": true,\n\t\t\"this\": true,\n\t\t\"throw\": true,\n\t\t\"throws\": true,\n\t\t\"transient\": true,\n\t\t\"true\": true,\n\t\t\"try\": true,\n\t\t\"typeof\": true,\n\t\t\"var\": true,\n\t\t\"void\": true,\n\t\t\"volatile\": true,\n\t\t\"while\": true,\n\t\t\"with\": true\n\t};\n\tvar constructorNameRegex = /[^A-Z0-9_]/gi;\n}\n//!steal-remove-end\n\n// ## construct.js\n// `Construct`\n// _This is a modified version of\n// [John Resig's class](http://ejohn.org/blog/simple-javascript-inheritance/).\n// It provides class level inheritance and callbacks._\n// A private flag used to initialize a new class instance without\n// initializing it's bindings.\nvar initializing = 0;\n\n//!steal-remove-start\nif(process.env.NODE_ENV !== 'production') {\n\tvar namedCtor = (function(cache){\n\t\treturn function(name, fn) {\n\t\t\treturn ((name in cache) ? cache[name] : cache[name] = new Function(\n\t\t\t\t\"__\", \"function \"+name+\"(){return __.apply(this,arguments)};return \"+name\n\t\t\t))( fn );\n\t\t};\n\t}({}));\n}\n//!steal-remove-end\n\n/**\n * @add can-construct\n */\nvar Construct = function () {\n\tif (arguments.length) {\n\t\treturn Construct.extend.apply(Construct, arguments);\n\t}\n};\n\nvar canGetDescriptor;\ntry {\n\tcanGetDescriptor = true;\n} catch(e) {\n\tcanGetDescriptor = false;\n}\n\nvar getDescriptor = function(newProps, name) {\n\t\tvar descriptor = Object.getOwnPropertyDescriptor(newProps, name);\n\t\tif(descriptor && (descriptor.get || descriptor.set)) {\n\t\t\treturn descriptor;\n\t\t}\n\t\treturn null;\n\t},\n\tinheritGetterSetter = function(newProps, oldProps, addTo) {\n\t\taddTo = addTo || newProps;\n\t\tvar descriptor;\n\n\t\tfor (var name in newProps) {\n\t\t\tif( (descriptor = getDescriptor(newProps, name)) ) {\n\t\t\t\tthis._defineProperty(addTo, oldProps, name, descriptor);\n\t\t\t} else {\n\t\t\t\tConstruct._overwrite(addTo, oldProps, name, newProps[name]);\n\t\t\t}\n\t\t}\n\t},\n\tsimpleInherit = function (newProps, oldProps, addTo) {\n\t\taddTo = addTo || newProps;\n\n\t\tfor (var name in newProps) {\n\t\t\tConstruct._overwrite(addTo, oldProps, name, newProps[name]);\n\t\t}\n\t},\n\tdefineNonEnumerable = function(obj, prop, value) {\n\t\tObject.defineProperty(obj, prop, {\n\t\t\tconfigurable: true,\n\t\t\twritable: true,\n\t\t\tenumerable: false,\n\t\t\tvalue: value\n\t\t});\n\t};\n/**\n * @static\n */\ncanReflect_1_19_2_canReflect.assignMap(Construct, {\n\t/**\n\t * @property {Boolean} can-construct.constructorExtends constructorExtends\n\t * @parent can-construct.static\n\t *\n\t * @description\n\t * Toggles the behavior of a constructor function called\n\t * without the `new` keyword to extend the constructor function or\n\t * create a new instance.\n\t *\n\t * ```js\n\t * var animal = Animal();\n\t * // vs\n\t * var animal = new Animal();\n\t * ```\n\t *\n\t * @body\n\t *\n\t * If `constructorExtends` is:\n\t *\n\t *  - `true` - the constructor extends\n\t *  - `false` - a new instance of the constructor is created\n\t *\n\t * This property defaults to false.\n\t *\n\t * Example of constructExtends as `true`:\n\t *\n\t * ```js\n\t * var Animal = Construct.extend({\n\t *   constructorExtends: true // the constructor extends\n\t * },{\n\t *   sayHi: function() {\n\t *     console.log(\"hai!\");\n\t *   }\n\t * });\n\t *\n\t * var Pony = Animal({\n\t *   gallop: function () {\n\t *      console.log(\"Galloping!!\");\n\t *   }\n\t * }); // Pony is now a constructor function extended from Animal\n\t *\n\t * var frank = new Animal(); // frank is a new instance of Animal\n\t *\n\t * var gertrude = new Pony(); // gertrude is a new instance of Pony\n\t * gertrude.sayHi(); // \"hai!\" - sayHi is \"inherited\" from Animal\n\t * gertrude.gallop(); // \"Galloping!!\" - gallop is unique to instances of Pony\n\t *```\n\t *\n\t * The default behavior is shown in the example below:\n\t *\n\t * ```js\n\t * var Animal = Construct.extend({\n\t *   constructorExtends: false // the constructor does NOT extend\n\t * },{\n\t *   sayHi: function() {\n\t *     console.log(\"hai!\");\n\t *   }\n\t * });\n\t *\n\t * var pony = Animal(); // pony is a new instance of Animal\n\t * var frank = new Animal(); // frank is a new instance of Animal\n\t *\n\t * pony.sayHi() // \"hai!\"\n\t * frank.sayHi() // \"hai!\"\n\t *```\n\t * By default to extend a constructor, you must use [can-construct.extend extend].\n\t */\n\tconstructorExtends: true,\n\n\t// This is a hook for adding legacy behaviors\n\t_created: function(){},\n\t/**\n\t * @function can-construct.newInstance newInstance\n\t * @parent can-construct.static\n\t *\n\t * @description Returns an instance of `Construct`. This method\n\t * can be overridden to return a cached instance.\n\t *\n\t * @signature `Construct.newInstance([...args])`\n\t *\n\t * @param {*} [args] arguments that get passed to [can-construct::setup] and [can-construct::init]. Note\n\t * that if [can-construct::setup] returns an array, those arguments will be passed to [can-construct::init]\n\t * instead.\n\t * @return {class} instance of the class\n\t *\n\t * @body\n\t * Creates a new instance of the constructor function. This method is useful for creating new instances\n\t * with arbitrary parameters. Typically, however, you will simply want to call the constructor with the\n\t * __new__ operator.\n\t *\n\t * ## Example\n\t *\n\t * The following creates a `Person` Construct and overrides `newInstance` to cache all\n\t * instances of Person to prevent duplication. If the properties of a new Person match an existing one it\n\t * will return a reference to the previously created object, otherwise it returns a new object entirely.\n\t *\n\t * ```js\n\t * // define and create the Person constructor\n\t * var Person = Construct.extend({\n\t *   init : function(first, middle, last) {\n\t *     this.first = first;\n\t *     this.middle = middle;\n\t *     this.last = last;\n\t *   }\n\t * });\n\t *\n\t * // store a reference to the original newInstance function\n\t * var _newInstance = Person.newInstance;\n\t *\n\t * // override Person's newInstance function\n\t * Person.newInstance = function() {\n\t *   // if cache does not exist make it an new object\n\t *   this.__cache = this.__cache || {};\n\t *   // id is a stingified version of the passed arguments\n\t *   var id = JSON.stringify(arguments);\n\t *\n\t *   // look in the cache to see if the object already exists\n\t *   var cachedInst = this.__cache[id];\n\t *   if(cachedInst) {\n\t *     return cachedInst;\n\t *   }\n\t *\n\t *   //otherwise call the original newInstance function and return a new instance of Person.\n\t *   var newInst = _newInstance.apply(this, arguments);\n\t *   this.__cache[id] = newInst;\n\t *   return newInst;\n\t * };\n\t *\n\t * // create two instances with the same arguments\n\t * var justin = new Person('Justin', 'Barry', 'Meyer'),\n\t *\t\tbrian = new Person('Justin', 'Barry', 'Meyer');\n\t *\n\t * console.log(justin === brian); // true - both are references to the same instance\n\t * ```\n\t *\n\t */\n\tnewInstance: function () {\n\t\t// Get a raw instance object (`init` is not called).\n\t\tvar inst = this.instance(),\n\t\t\targs;\n\t\t// Call `setup` if there is a `setup`\n\t\tif (inst.setup) {\n\t\t\tObject.defineProperty(inst,\"__inSetup\",{\n\t\t\t\tconfigurable: true,\n\t\t\t\tenumerable: false,\n\t\t\t\tvalue: true,\n\t\t\t\twritable: true\n\t\t\t});\n\t\t\tObject.defineProperty(inst, inSetupSymbol, {\n\t\t\t\tconfigurable: true,\n\t\t\t\tenumerable: false,\n\t\t\t\tvalue: true,\n\t\t\t\twritable: true\n\t\t\t});\n\t\t\targs = inst.setup.apply(inst, arguments);\n\t\t\tif (args instanceof Construct.ReturnValue){\n\t\t\t\treturn args.value;\n\t\t\t}\n\t\t\tinst.__inSetup = false;\n\t\t\tinst[inSetupSymbol] = false;\n\t\t}\n\t\t// Call `init` if there is an `init`\n\t\t// If `setup` returned `args`, use those as the arguments\n\t\tif (inst.init) {\n\t\t\tinst.init.apply(inst, args || arguments);\n\t\t}\n\t\treturn inst;\n\t},\n\t// Overwrites an object with methods. Used in the `super` plugin.\n\t// `newProps` - New properties to add.\n\t// `oldProps` - Where the old properties might be (used with `super`).\n\t// `addTo` - What we are adding to.\n\t_inherit: canGetDescriptor ? inheritGetterSetter : simpleInherit,\n\n\t// Adds a `defineProperty` with the given name and descriptor\n\t// Will only ever be called if ES5 is supported\n\t_defineProperty: function(what, oldProps, propName, descriptor) {\n\t\tObject.defineProperty(what, propName, descriptor);\n\t},\n\n\t// used for overwriting a single property.\n\t// this should be used for patching other objects\n\t// the super plugin overwrites this\n\t_overwrite: function (what, oldProps, propName, val) {\n\t\tObject.defineProperty(what, propName, {value: val, configurable: true, enumerable: true, writable: true});\n\t},\n\t// Set `defaults` as the merger of the parent `defaults` and this\n\t// object's `defaults`. If you overwrite this method, make sure to\n\t// include option merging logic.\n\t/**\n\t * @function can-construct.setup setup\n\t * @parent can-construct.static\n\t *\n\t * @description Perform initialization logic for a constructor function.\n\t *\n\t * @signature `Construct.setup(base, fullName, staticProps, protoProps)`\n\t *\n\t * A static `setup` method provides inheritable setup functionality\n\t * for a Constructor function. The following example\n\t * creates a Group constructor function.  Any constructor\n\t * functions that inherit from Group will be added to\n\t * `Group.childGroups`.\n\t *\n\t * ```js\n\t * Group = Construct.extend({\n\t *   setup: function(Construct, fullName, staticProps, protoProps){\n\t *     this.childGroups = [];\n\t *     if(Construct !== Construct){\n\t *       this.childGroups.push(Construct)\n\t *     }\n\t *     Construct.setup.apply(this, arguments)\n\t *   }\n\t * },{})\n\t * var Flock = Group.extend(...)\n\t * Group.childGroups[0] //-> Flock\n\t * ```\n\t * @param {constructor} base The base constructor that is being inherited from.\n\t * @param {String} fullName The name of the new constructor.\n\t * @param {Object} staticProps The static properties of the new constructor.\n\t * @param {Object} protoProps The prototype properties of the new constructor.\n\t *\n\t * @body\n\t * The static `setup` method is called immediately after a constructor\n\t * function is created and\n\t * set to inherit from its base constructor. It is useful for setting up\n\t * additional inheritance work.\n\t * Do not confuse this with the prototype `[can-construct::setup]` method.\n\t *\n\t * ## Example\n\t *\n\t * This `Parent` class adds a reference to its base class to itself, and\n\t * so do all the classes that inherit from it.\n\t *\n\t * ```js\n\t * Parent = Construct.extend({\n\t *   setup : function(base, fullName, staticProps, protoProps){\n\t *     this.base = base;\n\t *\n\t *     // call base functionality\n\t *     Construct.setup.apply(this, arguments)\n\t *   }\n\t * },{});\n\t *\n\t * Parent.base; // Construct\n\t *\n\t * Child = Parent({});\n\t *\n\t * Child.base; // Parent\n\t * ```\n\t */\n\tsetup: function (base) {\n\t\tvar defaults = base.defaults ? canReflect_1_19_2_canReflect.serialize(base.defaults) : {};\n\t\tthis.defaults = canReflect_1_19_2_canReflect.assignDeepMap(defaults,this.defaults);\n\t},\n\t// Create's a new `class` instance without initializing by setting the\n\t// `initializing` flag.\n\tinstance: function () {\n\t\t// Prevents running `init`.\n\t\tinitializing = 1;\n\t\tvar inst = new this();\n\t\t// Allow running `init`.\n\t\tinitializing = 0;\n\t\treturn inst;\n\t},\n\t// Extends classes.\n\t/**\n\t * @function can-construct.extend extend\n\t * @parent can-construct.static\n\t *\n\t * @signature `Construct.extend([name,] [staticProperties,] instanceProperties)`\n\t *\n\t * Extends `Construct`, or constructor functions derived from `Construct`,\n\t * to create a new constructor function. Example:\n\t *\n\t * ```js\n\t * var Animal = Construct.extend({\n\t *   sayHi: function(){\n\t *     console.log(\"hi\")\n\t *   }\n\t * });\n\t *\n\t * var animal = new Animal()\n\t * animal.sayHi();\n\t * ```\n\t *\n\t * @param {String} [name] Adds a name to the constructor function so\n\t * it is nicely labeled in the developer tools. The following:\n\t *\n\t *     Construct.extend(\"ConstructorName\",{})\n\t *\n\t * returns a constructur function that will show up as `ConstructorName`\n\t * in the developer tools.\n\t * It also sets \"ConstructorName\" as [can-construct.shortName shortName].\n\t *\n\t * @param {Object} [staticProperties] Properties that are added the constructor\n\t * function directly. For example:\n\t *\n\t * ```js\n\t * var Animal = Construct.extend({\n\t *   findAll: function(){\n\t *     return can.ajax({url: \"/animals\"})\n\t *   }\n\t * },{}); // need to pass an empty instanceProperties object\n\t *\n\t * Animal.findAll().then(function(json){ ... })\n\t * ```\n\t *\n\t * The [can-construct.setup static setup] method can be used to\n\t * specify inheritable behavior when a Constructor function is created.\n\t *\n\t * @param {Object} instanceProperties Properties that belong to\n\t * instances made with the constructor. These properties are added to the\n\t * constructor's `prototype` object. Example:\n\t *\n\t *     var Animal = Construct.extend({\n\t *\t\t  findAll: function() {\n\t *\t\t\treturn can.ajax({url: \"/animals\"});\n\t *\t\t  }\n\t *     },{\n\t *       init: function(name) {\n\t *         this.name = name;\n\t *       },\n\t *       sayHi: function() {\n\t *         console.log(this.name,\" says hai!\");\n\t *       }\n\t *     })\n\t *     var pony = new Animal(\"Gertrude\");\n\t *     pony.sayHi(); // \"Gertrude says hai!\"\n\t *\n\t * The [can-construct::init init] and [can-construct::setup setup] properties\n\t * are used for initialization.\n\t *\n\t * @return {function} The constructor function.\n\t *\n\t * ```js\n\t *\tvar Animal = Construct.extend(...);\n\t *\tvar pony = new Animal(); // Animal is a constructor function\n\t * ```\n\t * @body\n\t * ## Inheritance\n\t * Creating \"subclasses\" with `Construct` is simple. All you need to do is call the base constructor\n\t * with the new function's static and instance properties. For example, we want our `Snake` to\n\t * be an `Animal`, but there are some differences:\n\t *\n\t *\n\t *     var Snake = Animal.extend({\n\t *         legs: 0\n\t *     }, {\n\t *         init: function() {\n\t *             Animal.prototype.init.call(this, 'ssssss');\n\t *         },\n\t *         slither: function() {\n\t *             console.log('slithering...');\n\t *         }\n\t *     });\n\t *\n\t *     var baslisk = new Snake();\n\t *     baslisk.speak();   // \"ssssss\"\n\t *     baslisk.slither(); // \"slithering...\"\n\t *     baslisk instanceof Snake;  // true\n\t *     baslisk instanceof Animal; // true\n\t *\n\t *\n\t * ## Static properties and inheritance\n\t *\n\t * If you pass all three arguments to Construct, the second one will be attached directy to the\n\t * constructor, allowing you to imitate static properties and functions. You can access these\n\t * properties through the `[can-construct::constructor this.constructor]` property.\n\t *\n\t * Static properties can get overridden through inheritance just like instance properties. In the example below,\n\t * we override both the legs static property as well as the the init function for each instance:\n\t *\n\t * ```js\n\t * var Animal = Construct.extend({\n\t *     legs: 4\n\t * }, {\n\t *     init: function(sound) {\n\t *         this.sound = sound;\n\t *     },\n\t *     speak: function() {\n\t *         console.log(this.sound);\n\t *     }\n\t * });\n\t *\n\t * var Snake = Animal.extend({\n\t *     legs: 0\n\t * }, {\n\t *     init: function() {\n\t *         this.sound = 'ssssss';\n\t *     },\n\t *     slither: function() {\n\t *         console.log('slithering...');\n\t *     }\n\t * });\n\t *\n\t * Animal.legs; // 4\n\t * Snake.legs; // 0\n\t * var dog = new Animal('woof');\n\t * var blackMamba = new Snake();\n\t * dog.speak(); // 'woof'\n\t * blackMamba.speak(); // 'ssssss'\n\t * ```\n\t *\n\t * ## Alternative value for a new instance\n\t *\n\t * Sometimes you may want to return some custom value instead of a new object when creating an instance of your class.\n\t * For example, you want your class to act as a singleton, or check whether an item with the given id was already\n\t * created and return an existing one from your cache store (e.g. using [can-connect/constructor/store/store]).\n\t *\n\t * To achieve this you can return [can-construct.ReturnValue] from `setup` method of your class.\n\t *\n\t * Lets say you have `myStore` to cache all newly created instances. And if an item already exists you want to merge\n\t * the new data into the existing instance and return the updated instance.\n\t *\n\t * ```\n\t * var myStore = {};\n\t *\n\t * var Item = Construct.extend({\n\t *     setup: function(params){\n\t *         if (myStore[params.id]){\n\t *             var item = myStore[params.id];\n\t *\n\t *             // Merge new data to the existing instance:\n\t *             Object.assign(item, params);\n\t *\n\t *             // Return the updated item:\n\t *             return new Construct.ReturnValue( item );\n\t *         } else {\n\t *             // Save to cache store:\n\t *             myStore[this.id] = this;\n\t *\n\t *             return [params];\n\t *         }\n\t *     },\n\t *     init: function(params){\n\t *         Object.assign(this, params);\n\t *     }\n\t * });\n\t *\n\t * var item_1  = new Item( {id: 1, name: \"One\"} );\n\t * var item_1a = new Item( {id: 1, name: \"OnePlus\"} )\n\t * ```\n\t */\n\textend: function (name, staticProperties, instanceProperties) {\n\t\tvar shortName = name,\n\t\t\tklass = staticProperties,\n\t\t\tproto = instanceProperties;\n\n\t\t// Figure out what was passed and normalize it.\n\t\tif (typeof shortName !== 'string') {\n\t\t\tproto = klass;\n\t\t\tklass = shortName;\n\t\t\tname = shortName = null;\n\t\t}\n\t\tif (!proto) {\n\t\t\tproto = klass;\n\t\t\tklass = null;\n\t\t}\n\t\tproto = proto || {};\n\t\tvar _super_class = this,\n\t\t\t_super = this.prototype,\n\t\t\tConstructor, prototype;\n\t\t// Instantiate a base class (but only create the instance,\n\t\t// don't run the init constructor).\n\t\tprototype = this.instance();\n\t\t// Copy the properties over onto the new prototype.\n\t\tConstruct._inherit(proto, _super, prototype);\n\n\t\tif(shortName) {\n\n\t\t} else if(klass && klass.shortName) {\n\t\t\tshortName = klass.shortName;\n\t\t} else if(this.shortName) {\n\t\t\tshortName = this.shortName;\n\t\t}\n\t\t// We want constructor.name to be the same as shortName, within\n\t\t// the bounds of what the JS VM will allow (meaning no non-word characters).\n\t\t// new Function() is significantly faster than eval() here.\n\n\t\t// Strip semicolons\n\t\t//!steal-remove-start\n\t\t// wrapping this var will cause \"used out of scope.\" when linting\n\t\tvar constructorName = shortName ? shortName.replace(constructorNameRegex, '_') : 'Constructor';\n\t\tif(process.env.NODE_ENV !== 'production') {\n\t\t\tif(reservedWords[constructorName]) {\n\t\t\t\tconstructorName = CanString.capitalize(constructorName);\n\t\t\t}\n\t\t}\n\t\t//!steal-remove-end\n\n\t\t// The dummy class constructor.\n\t\tfunction init() {\n\t\t\t/* jshint validthis: true */\n\t\t\t// All construction is actually done in the init method.\n\t\t\tif (!initializing) {\n\t\t\t\t//!steal-remove-start\n\t\t\t\tif(process.env.NODE_ENV !== 'production') {\n\t\t\t\t\tif(!this || (this.constructor !== Constructor) &&\n\t\t\t\t\t// We are being called without `new` or we are extending.\n\t\t\t\t\targuments.length && Constructor.constructorExtends) {\n\t\t\t\t\t\tdev.warn('can/construct/construct.js: extending a Construct without calling extend');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t//!steal-remove-end\n\n\t\t\t\treturn (!this || this.constructor !== Constructor) &&\n\t\t\t\t// We are being called without `new` or we are extending.\n\t\t\t\targuments.length && Constructor.constructorExtends ? Constructor.extend.apply(Constructor, arguments) :\n\t\t\t\t// We are being called with `new`.\n\t\t\t\tConstructor.newInstance.apply(Constructor, arguments);\n\t\t\t}\n\t\t}\n\t\tConstructor = typeof namedCtor === \"function\" ?\n\t\t\tnamedCtor( constructorName, init ) :\n\t\t\tfunction() { return init.apply(this, arguments); };\n\n\t\t// Copy old stuff onto class (can probably be merged w/ inherit)\n\t\tfor (var propName in _super_class) {\n\t\t\tif (_super_class.hasOwnProperty(propName)) {\n\t\t\t\tConstructor[propName] = _super_class[propName];\n\t\t\t}\n\t\t}\n\t\t// Copy new static properties on class.\n\t\tConstruct._inherit(klass, _super_class, Constructor);\n\n\t\t// Set things that shouldn't be overwritten.\n\t\tcanReflect_1_19_2_canReflect.assignMap(Constructor, {\n\t\t\tconstructor: Constructor,\n\t\t\tprototype: prototype\n\t\t\t/**\n\t\t\t * @property {String} can-construct.shortName shortName\n\t\t\t * @parent can-construct.static\n\t\t\t *\n\t\t\t * If you pass a name when creating a Construct, the `shortName` property will be set to the\n\t\t\t * name.\n\t\t\t *\n\t\t\t * ```js\n\t\t\t * var MyConstructor = Construct.extend(\"MyConstructor\",{},{});\n\t\t\t * MyConstructor.shortName // \"MyConstructor\"\n\t\t\t * ```\n\t\t\t */\n\t\t});\n\n\t\tif (shortName !== undefined) {\n\t\t\tif (Object.getOwnPropertyDescriptor) {\n\t\t\t\tvar desc = Object.getOwnPropertyDescriptor(Constructor, 'name');\n\t\t\t\tif (!desc || desc.configurable) {\n\t\t\t\t\tObject.defineProperty(\n\t\t\t\t\t\tConstructor,\n\t\t\t\t\t\t'name',\n\t\t\t\t\t\t{ writable: true, value: shortName, configurable: true }\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t\tConstructor.shortName = shortName;\n\t\t}\n\t\t// Make sure our prototype looks nice.\n\t\tdefineNonEnumerable(Constructor.prototype, \"constructor\", Constructor);\n\n\t\t// Global callback for legacy behaviors\n\t\tConstruct._created(name, Constructor);\n\n\t\t// Call the class `setup` and `init`\n\t\tvar t = [_super_class].concat(Array.prototype.slice.call(arguments)),\n\t\t\targs = Constructor.setup.apply(Constructor, t);\n\t\tif (Constructor.init) {\n\t\t\tConstructor.init.apply(Constructor, args || t);\n\t\t}\n\t\t/**\n\t\t * @prototype\n\t\t */\n\t\treturn Constructor; //\n\t\t/**\n\t\t * @property {Object} can-construct.prototype.constructor constructor\n\t\t * @parent can-construct.prototype\n\t\t *\n\t\t * A reference to the constructor function that created the instance. This allows you to access\n\t\t * the constructor's static properties from an instance.\n\t\t *\n\t\t * @body\n\t\t * ## Example\n\t\t *\n\t\t * This Construct has a static counter that counts how many instances have been created:\n\t\t *\n\t\t * ```js\n\t\t * var Counter = Construct.extend({\n\t\t *     count: 0\n\t\t * }, {\n\t\t *     init: function() {\n\t\t *         this.constructor.count++;\n\t\t *     }\n\t\t * });\n\t\t *\n\t\t * var childCounter = new Counter();\n\t\t * console.log(childCounter.constructor.count); // 1\n\t\t * console.log(Counter.count); // 1\n\t\t * ```\n\t\t */\n\t},\n\t/**\n\t * @function can-construct.ReturnValue ReturnValue\n\t * @parent can-construct.static\n\t *\n\t * Use to overwrite the return value of new Construct(...).\n\t *\n\t * @signature `new Construct.ReturnValue( value )`\n\t *\n\t *   This constructor function can be used for creating a return value of the `setup` method.\n\t *   [can-construct] will check if the return value is an instance of `Construct.ReturnValue`.\n\t *   If it is then its `value` will be used as the new instance.\n\t *\n\t *   @param {Object} value A value to be used for a new instance instead of a new object.\n\t *\n\t *   ```js\n\t *   var Student = function( name, school ){\n\t *       this.name = name;\n\t *       this.school = school;\n\t *   }\n\t *\n\t *   var Person = Construct.extend({\n\t *       setup: function( options ){\n\t *           if (options.school){\n\t *               return new Constructor.ReturnValue( new Student( options.name, options.school ) );\n\t *           } else {\n\t *               return [options];\n\t *           }\n\t *       }\n\t *   });\n\t *\n\t *   var myPerson = new Person( {name: \"Ilya\", school: \"PetrSU\"} );\n\t *\n\t *   myPerson instanceof Student // => true\n\t *   ```\n   */\n\tReturnValue: function(value){\n\t\tthis.value = value;\n\t}\n});\n/**\n * @function can-construct.prototype.setup setup\n * @parent can-construct.prototype\n *\n * @signature `construct.setup(...args)`\n *\n * A setup function for the instantiation of a constructor function.\n *\n * @param {*} args The arguments passed to the constructor.\n *\n * @return {Array|undefined|can-construct.ReturnValue} If an array is returned, the array's items are passed as\n * arguments to [can-construct::init init]. If a [can-construct.ReturnValue] instance is returned, the ReturnValue\n * instance's value will be returned as the result of calling new Construct(). The following example always makes\n * sure that init is called with a jQuery wrapped element:\n *\n * ```js\n * \tWidgetFactory = Construct.extend({\n * \t\t\tsetup: function(element){\n * \t\t\t\t\treturn [$(element)]\n * \t\t\t}\n * \t});\n *\n * \tMyWidget = WidgetFactory.extend({\n * \t\t\tinit: function($el){\n * \t\t\t\t\t$el.html(\"My Widget!!\")\n * \t\t\t}\n * \t});\n *  ```\n *\n * Otherwise, the arguments to the\n * constructor are passed to [can-construct::init] and the return value of `setup` is discarded.\n *\n * @body\n *\n * ## Deciding between `setup` and `init`\n *\n *\n * Usually, you should use [can-construct::init init] to do your constructor function's initialization.\n * You should, instead, use `setup` when:\n *\n *   - there is initialization code that you want to run before the inheriting constructor's\n *     `init` method is called.\n *   - there is initialization code that should run whether or not inheriting constructors\n *     call their base's `init` methods.\n *   - you want to modify the arguments that will get passed to `init`.\n *\n */\ndefineNonEnumerable(Construct.prototype, \"setup\", function () {});\n/**\n * @function can-construct.prototype.init init\n * @parent can-construct.prototype\n *\n * @description Called when a new instance of a Construct is created.\n *\n * @signature `construct.init(...args)`\n * @param {*} args the arguments passed to the constructor (or the items of the array returned from [can-construct::setup])\n *\n * @body\n * If a prototype `init` method is provided, `init` is called when a new Construct is created---\n * after [can-construct::setup]. The `init` method is where the bulk of your initialization code\n * should go. A common thing to do in `init` is save the arguments passed into the constructor.\n *\n * ## Examples\n *\n * First, we'll make a Person constructor that has a first and last name:\n *\n * ```js\n * var Person = Construct.extend({\n *     init: function(first, last) {\n *         this.first = first;\n *         this.last  = last;\n *     }\n * });\n *\n * var justin = new Person(\"Justin\", \"Meyer\");\n * justin.first; // \"Justin\"\n * justin.last; // \"Meyer\"\n * ```\n *\n * Then, we'll extend Person into Programmer, and add a favorite language:\n *\n * ```js\n * var Programmer = Person.extend({\n *     init: function(first, last, language) {\n *         // call base's init\n *         Person.prototype.init.apply(this, arguments);\n *\n *         // other initialization code\n *         this.language = language;\n *     },\n *     bio: function() {\n *         return \"Hi! I'm \" + this.first + \" \" + this.last +\n *             \" and I write \" + this.language + \".\";\n *     }\n * });\n *\n * var brian = new Programmer(\"Brian\", \"Moschel\", 'ECMAScript');\n * brian.bio(); // \"Hi! I'm Brian Moschel and I write ECMAScript.\";\n * ```\n *\n * ## Modified Arguments\n *\n * [can-construct::setup] is able to modify the arguments passed to `init`.\n * If you aren't receiving the arguments you passed to `new Construct(args)`,\n * check that they aren't being changed by `setup` along\n * the inheritance chain.\n */\ndefineNonEnumerable(Construct.prototype, \"init\", function () {});\n\nvar canConstruct_3_5_7_canConstruct = canNamespace_1_0_0_canNamespace.Construct = Construct;\n\nfunction dispatch(key) {\n\t// jshint -W040\n\tvar handlers = this.eventHandlers[key];\n\tif (handlers) {\n\t\tvar handlersCopy = handlers.slice();\n\t\tvar value = this.getKeyValue(key);\n\t\tfor (var i = 0; i < handlersCopy.length; i++) {\n\t\t\thandlersCopy[i](value);\n\t\t}\n\t}\n}\n\nfunction Globals() {\n\tthis.eventHandlers = {};\n\tthis.properties = {};\n}\n\n/**\n * @function define \n * @parent can-globals/methods\n * \n * Create a new global environment variable.\n * \n * @signature `globals.define(key, value[, cache])`\n * \n * Defines a new global called `key`, who's value defaults to `value`.\n * \n * The following example defines the `global` key's default value to the [`window`](https://developer.mozilla.org/en-US/docs/Web/API/Window) object:\n * ```javascript\n * globals.define('global', window);\n * globals.getKeyValue('window') //-> window\n * ```\n * \n * If a function is provided and `cache` is falsy, that function is run every time the key value is read:\n * ```javascript\n * globals.define('isBrowserWindow', function() {\n *   console.log('EVALUATING')\n *   return typeof window !== 'undefined' &&\n *     typeof document !== 'undefined' && typeof SimpleDOM === 'undefined'\n * }, false);\n * globals.get('isBrowserWindow') // logs 'EVALUATING'\n *                                // -> true\n * globals.get('isBrowserWindow') // logs 'EVALUATING' again\n *                                // -> true\n * ```\n * \n * If a function is provided and `cache` is truthy, that function is run only the first time the value is read:\n * ```javascript\n * globals.define('isWebkit', function() {\n *   console.log('EVALUATING')\n *   var div = document.createElement('div')\n *   return 'WebkitTransition' in div.style\n * })\n * globals.getKeyValue('isWebkit') // logs 'EVALUATING'\n * \t\t\t\t\t\t\t\t   // -> true\n * globals.getKeyValue('isWebkit') // Does NOT log again!\n * \t\t\t\t\t\t\t\t   // -> true\n * ```\n * \n * @param {String} key\n * The key value to create.\n * \n * @param {*} value\n * The default value. If this is a function, its return value will be used.\n * \n * @param {Boolean} [cache=true]\n * Enable cache. If false the `value` function is run every time the key value is read.\n * \n * @return {can-globals}\n * Returns the instance of `can-globals` for chaining.\n */\nGlobals.prototype.define = function (key, value, enableCache) {\n\tif (enableCache === undefined) {\n\t\tenableCache = true;\n\t}\n\tif (!this.properties[key]) {\n\t\tthis.properties[key] = {\n\t\t\tdefault: value,\n\t\t\tvalue: value,\n\t\t\tenableCache: enableCache\n\t\t};\n\t}\n\treturn this;\n};\n\n/**\n * @function getKeyValue \n * @parent can-globals/methods\n * \n * Get a global environment variable by name.\n * \n * @signature `globals.getKeyValue(key)`\n * \n * Returns the current value at `key`. If no value has been set, it will return the default value (if it is not a function). If the default value is a function, it will return the output of the function. This execution is cached if the cache flag was set on initialization.\n * \n * ```javascript\n * globals.define('foo', 'bar');\n * globals.getKeyValue('foo'); //-> 'bar'\n * ```\n * \n * @param {String} key\n * The key value to access.\n * \n * @return {*}\n * Returns the value of a given key.\n */\nGlobals.prototype.getKeyValue = function (key) {\n\tvar property = this.properties[key];\n\tif (property) {\n\t\tif (typeof property.value === 'function') {\n\t\t\tif (property.cachedValue) {\n\t\t\t\treturn property.cachedValue;\n\t\t\t}\n\t\t\tif (property.enableCache) {\n\t\t\t\tproperty.cachedValue = property.value();\n\t\t\t\treturn property.cachedValue;\n\t\t\t} else {\n\t\t\t\treturn property.value();\n\t\t\t}\n\t\t}\n\t\treturn property.value;\n\t}\n};\n\nGlobals.prototype.makeExport = function (key) {\n\treturn function (value) {\n\t\tif (arguments.length === 0) {\n\t\t\treturn this.getKeyValue(key);\n\t\t}\n\n\t\tif (typeof value === 'undefined' || value === null) {\n\t\t\tthis.deleteKeyValue(key);\n\t\t} else {\n\t\t\tif (typeof value === 'function') {\n\t\t\t\tthis.setKeyValue(key, function () {\n\t\t\t\t\treturn value;\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthis.setKeyValue(key, value);\n\t\t\t}\n\t\t\treturn value;\n\t\t}\n\t}.bind(this);\n};\n\n/**\n * @function offKeyValue \n * @parent can-globals/methods\n * \n * Remove handler from event queue.\n * \n * @signature `globals.offKeyValue(key, handler)`\n * \n * Removes `handler` from future change events for `key`.\n * \n * \n * ```javascript\n * var handler = (value) => {\n *   value === 'baz' //-> true\n * };\n * globals.define('foo', 'bar');\n * globals.onKeyValue('foo', handler);\n * globals.setKeyValue('foo', 'baz');\n * globals.offKeyValue('foo', handler);\n * ```\n * \n * @param {String} key\n * The key value to observe.\n * \n * @param {Function} handler([value])\n * The observer callback.\n * \n * @return {can-globals}\n * Returns the instance of `can-globals` for chaining.\n */\nGlobals.prototype.offKeyValue = function (key, handler) {\n\tif (this.properties[key]) {\n\t\tvar handlers = this.eventHandlers[key];\n\t\tif (handlers) {\n\t\t\tvar i = handlers.indexOf(handler);\n\t\t\thandlers.splice(i, 1);\n\t\t}\n\t}\n\treturn this;\n};\n\n/**\n * @function onKeyValue \n * @parent can-globals/methods\n * \n * Add handler to event queue.\n * \n * @signature `globals.onKeyValue(key, handler)`\n * \n * Calls `handler` each time the value of `key` is set or reset.\n * \n * ```javascript\n * globals.define('foo', 'bar');\n * globals.onKeyValue('foo', (value) => {\n *   value === 'baz' //-> true\n * });\n * globals.setKeyValue('foo', 'baz');\n * ```\n * \n * @param {String} key\n * The key value to observe.\n * \n * @param {function(*)} handler([value])\n * The observer callback.\n * \n * @return {can-globals}\n * Returns the instance of `can-globals` for chaining.\n */\nGlobals.prototype.onKeyValue = function (key, handler) {\n\tif (this.properties[key]) {\n\t\tif (!this.eventHandlers[key]) {\n\t\t\tthis.eventHandlers[key] = [];\n\t\t}\n\t\tthis.eventHandlers[key].push(handler);\n\t}\n\treturn this;\n};\n\n/**\n * @function deleteKeyValue \n * @parent can-globals/methods\n * \n * Reset global environment variable.\n * \n * @signature `globals.deleteKeyValue(key)`\n * \n * Deletes the current value at `key`. Future `get`s will use the default value.\n * \n * ```javascript\n * globals.define('global', window);\n * globals.setKeyValue('global', {});\n * globals.deleteKeyValue('global');\n * globals.getKeyValue('global') === window; //-> true\n * ```\n * \n * @param {String} key\n * The key value to access.\n * \n * @return {can-globals}\n * Returns the instance of `can-globals` for chaining.\n */\nGlobals.prototype.deleteKeyValue = function (key) {\n\tvar property = this.properties[key];\n\tif (property !== undefined) {\n\t\tproperty.value = property.default;\n\t\tproperty.cachedValue = undefined;\n\t\tdispatch.call(this, key);\n\t}\n\treturn this;\n};\n\n/**\n * @function setKeyValue \n * @parent can-globals/methods\n * \n * Overwrite an existing global environment variable.\n * \n * @signature `globals.setKeyValue(key, value)`\n * \n * ```javascript\n * globals.define('foo', 'bar');\n * globals.setKeyValue('foo', 'baz');\n * globals.getKeyValue('foo'); //-> 'baz'\n * ```\n * \n * Sets the new value at `key`. Will override previously set values, but preserves the default (see `deleteKeyValue`).\n * \n * Setting a key which was not previously defined will call `define` with the key and value.\n * \n * @param {String} key\n * The key value to access.\n * \n * @param {*} value\n * The new value.\n * \n * @return {can-globals}\n * Returns the instance of `can-globals` for chaining.\n */\nGlobals.prototype.setKeyValue = function (key, value) {\n\tif (!this.properties[key]) {\n\t\treturn this.define(key, value);\n\t}\n\tvar property = this.properties[key];\n\tproperty.value = value;\n\tproperty.cachedValue = undefined;\n\tdispatch.call(this, key);\n\treturn this;\n};\n\n/**\n * @function reset \n * @parent can-globals/methods\n * \n * Reset all keys to their default value and clear their caches.\n * \n * @signature `globals.setKeyValue(key, value)`\n * \n * ```javascript\n * globals.define('foo', 'bar');\n * globals.setKeyValue('foo', 'baz');\n * globals.getKeyValue('foo'); //-> 'baz'\n * globals.reset();\n * globals.getKeyValue('foo'); //-> 'bar'\n * ```\n * \n * @return {can-globals}\n * Returns the instance of `can-globals` for chaining.\n */\nGlobals.prototype.reset = function () {\n\tfor (var key in this.properties) {\n\t\tif (this.properties.hasOwnProperty(key)) {\n\t\t\tthis.properties[key].value = this.properties[key].default;\n\t\t\tthis.properties[key].cachedValue = undefined;\n\t\t\tdispatch.call(this, key);\n\t\t}\n\t}\n\treturn this;\n};\n\ncanReflect_1_19_2_canReflect.assignSymbols(Globals.prototype, {\n\t'can.getKeyValue': Globals.prototype.getKeyValue,\n\t'can.setKeyValue': Globals.prototype.setKeyValue,\n\t'can.deleteKeyValue': Globals.prototype.deleteKeyValue,\n\t'can.onKeyValue': Globals.prototype.onKeyValue,\n\t'can.offKeyValue': Globals.prototype.offKeyValue\n});\n\nvar canGlobals_1_2_2_canGlobalsProto = Globals;\n\nvar canGlobals_1_2_2_canGlobalsInstance = createCommonjsModule(function (module) {\n\n\nvar globals = new canGlobals_1_2_2_canGlobalsProto();\n\nif (canNamespace_1_0_0_canNamespace.globals) {\n\tthrow new Error(\"You can't have two versions of can-globals, check your dependencies\");\n} else {\n\tmodule.exports = canNamespace_1_0_0_canNamespace.globals = globals;\n}\n});\n\n/* global self */\n/* global WorkerGlobalScope */\n\n\n\n/**\n * @module {function} can-globals/global/global global\n * @parent can-globals/modules\n * \n * Get the global object for the current context.\n * \n * @signature `GLOBAL([newGlobal])`\n *\n * Optionally sets, and returns the global that this environment provides. It will be one of:\n * \n * ```js\n * var GLOBAL = require('can-globals/global/global');\n * var g = GLOBAL();\n * // In a browser\n * console.log(g === window); // -> true\n * ```\n *\n * - **Browser**: [`window`](https://developer.mozilla.org/en-US/docs/Web/API/window)\n * - **Web Worker**: [`self`](https://developer.mozilla.org/en-US/docs/Web/API/Window/self)\n * - **Node.js**: [`global`](https://nodejs.org/api/globals.html#globals_global)\n * \n * @param {Object} [newGlobal] An optional global-like object to set as the context's global \n *\n * @return {Object} The global object for this JavaScript environment.\n */\ncanGlobals_1_2_2_canGlobalsInstance.define('global', function(){\n\t// Web Worker\n\treturn (typeof WorkerGlobalScope !== 'undefined' && self instanceof WorkerGlobalScope) ? self :\n\n\t\t// Node.js\n\t\ttypeof process === 'object' &&\n\t\t{}.toString.call(process) === '[object process]' ? commonjsGlobal :\n\n\t\t// Browser window\n\t\twindow;\n});\n\nvar global_1 = canGlobals_1_2_2_canGlobalsInstance.makeExport('global');\n\n/**\n * @module {function} can-globals/document/document document\n * @parent can-globals/modules\n * \n * Get the global [`document`](https://developer.mozilla.org/en-US/docs/Web/API/document) object for the current context.\n * \n * @signature `DOCUMENT([newDocument])`\n * \n * Optionally sets, and returns, the [`document`](https://developer.mozilla.org/en-US/docs/Web/API/document) object for the context.\n * \n * ```js\n * var documentShim = { getElementById() {...} };\n * var DOCUMENT = require('can-globals/document/document');\n * DOCUMENT(documentShim); //-> document\n * DOCUMENT().getElementById('foo');\n * ```\n *\n * @param {Object} [newDocument] An optional document-like object to set as the context's document \n * \n * @return {Object} The window object for this JavaScript environment.\n */\ncanGlobals_1_2_2_canGlobalsInstance.define('document', function(){\n\treturn canGlobals_1_2_2_canGlobalsInstance.getKeyValue('global').document;\n});\n\nvar document$1 = canGlobals_1_2_2_canGlobalsInstance.makeExport('document');\n\n/**\n * @module {function} can-globals/is-node/is-node is-node\n * @parent can-globals/modules\n * @description Determines if your code is running in [Node.js](https://nodejs.org).\n * @signature `isNode()`\n *\n * ```js\n * var isNode = require(\"can-globals/is-node/is-node\");\n * var GLOBAL = require(\"can-globals/global/global\");\n *\n * if(isNode()) {\n *   console.log(GLOBAL() === global); // -> true\n * }\n * ```\n *\n * @return {Boolean} True if running in Node.js\n */\n\ncanGlobals_1_2_2_canGlobalsInstance.define('isNode', function(){\n\treturn typeof process === \"object\" &&\n\t\t{}.toString.call(process) === \"[object process]\";\n});\n\nvar isNode = canGlobals_1_2_2_canGlobalsInstance.makeExport('isNode');\n\n// This module depends on isNode being defined\n\n\n/**\n * @module {function} can-globals/is-browser-window/is-browser-window is-browser-window\n * @parent can-globals/modules\n * @signature `isBrowserWindow()`\n *\n * Returns `true` if the code is running within a Browser window. Use this function if you need special code paths for when running in a Browser window, a Web Worker, or another environment (such as Node.js).\n *\n * ```js\n * var isBrowserWindow = require(\"can-globals/is-browser-window/is-browser-window\");\n * var GLOBAL = require(\"can-globals/global/global\");\n *\n * if(isBrowserWindow()) {\n *   console.log(GLOBAL() === window); // -> true\n * }\n * ```\n *\n * @return {Boolean} True if the environment is a Browser window.\n */\n\ncanGlobals_1_2_2_canGlobalsInstance.define('isBrowserWindow', function(){\n\tvar isNode = canGlobals_1_2_2_canGlobalsInstance.getKeyValue('isNode');\n\treturn typeof window !== \"undefined\" &&\n\t\ttypeof document !== \"undefined\" &&\n\t\tisNode === false;\n});\n\nvar isBrowserWindow = canGlobals_1_2_2_canGlobalsInstance.makeExport('isBrowserWindow');\n\nfunction getTargetDocument (target) {\n\treturn target.ownerDocument || document$1();\n}\n\nfunction createEvent (target, eventData, bubbles, cancelable) {\n\tvar doc = getTargetDocument(target);\n\tvar event = doc.createEvent('HTMLEvents');\n\tvar eventType;\n\tif (typeof eventData === 'string') {\n\t\teventType = eventData;\n\t} else {\n\t\teventType = eventData.type;\n\t\tfor (var prop in eventData) {\n\t\t\tif (event[prop] === undefined) {\n\t\t\t\tevent[prop] = eventData[prop];\n\t\t\t}\n\t\t}\n\t}\n\tif (bubbles === undefined) {\n\t\tbubbles = true;\n\t}\n\tevent.initEvent(eventType, bubbles, cancelable);\n\treturn event;\n}\n\n// We do not account for all EventTarget classes,\n// only EventTarget DOM nodes, fragments, and the window.\nfunction isDomEventTarget (obj) {\n\tif (!(obj && obj.nodeName)) {\n\t\treturn obj === window;\n\t}\n\tvar nodeType = obj.nodeType;\n\treturn (\n\t\tnodeType === 1 || // Node.ELEMENT_NODE\n\t\tnodeType === 9 || // Node.DOCUMENT_NODE\n\t\tnodeType === 11 // Node.DOCUMENT_FRAGMENT_NODE\n\t);\n}\n\nfunction addDomContext (context, args) {\n\tif (isDomEventTarget(context)) {\n\t\targs = Array.prototype.slice.call(args, 0);\n\t\targs.unshift(context);\n\t}\n\treturn args;\n}\n\nfunction removeDomContext (context, args) {\n\tif (!isDomEventTarget(context)) {\n\t\targs = Array.prototype.slice.call(args, 0);\n\t\tcontext = args.shift();\n\t}\n\treturn {\n\t\tcontext: context,\n\t\targs: args\n\t};\n}\n\nvar fixSyntheticEventsOnDisabled = false;\n// In FireFox, dispatching a synthetic event on a disabled element throws an error.\n// Other browsers, like IE 10 do not dispatch synthetic events on disabled elements at all.\n// This determines if we have to work around that when dispatching events.\n// https://bugzilla.mozilla.org/show_bug.cgi?id=329509\n(function() {\n\tif(!isBrowserWindow()) {\n\t\treturn;\n\t}\n\n\tvar testEventName = 'fix_synthetic_events_on_disabled_test';\n\tvar input = document.createElement(\"input\");\n\tinput.disabled = true;\n\tvar timer = setTimeout(function() {\n\t\tfixSyntheticEventsOnDisabled = true;\n\t}, 50);\n\tvar onTest = function onTest (){\n\t\tclearTimeout(timer);\n\t\tinput.removeEventListener(testEventName, onTest);\n\t};\n\tinput.addEventListener(testEventName, onTest);\n\ttry {\n\t\tvar event = document.create('HTMLEvents');\n\t\tevent.initEvent(testEventName, false);\n\t\tinput.dispatchEvent(event);\n\t} catch(e) {\n\t\tonTest();\n\t\tfixSyntheticEventsOnDisabled = true;\n\t}\n})();\n\nfunction isDispatchingOnDisabled(element, event) {\n\tvar eventType = event.type;\n\tvar isInsertedOrRemoved = eventType === 'inserted' || eventType === 'removed';\n\tvar isDisabled = !!element.disabled;\n\treturn isInsertedOrRemoved && isDisabled;\n}\n\nfunction forceEnabledForDispatch (element, event) {\n\treturn fixSyntheticEventsOnDisabled && isDispatchingOnDisabled(element, event);\n}\n\nvar util = {\n\tcreateEvent: createEvent,\n\taddDomContext: addDomContext,\n\tremoveDomContext: removeDomContext,\n\tisDomEventTarget: isDomEventTarget,\n\tgetTargetDocument: getTargetDocument,\n\tforceEnabledForDispatch: forceEnabledForDispatch\n};\n\nfunction EventRegistry () {\n\tthis._registry = {};\n}\n\n/**\n * @module can-dom-events/helpers/make-event-registry\n * @parent can-dom-events.helpers\n * @description Create an event registry.\n * @signature `makeEventRegistry()`\n *   @return {can-dom-events/EventRegistry}\n * @hide\n * \n * @body\n *\n * ```js\n * var makeEventRegistry = require('can-dom-events/helpers/make-event-registry');\n * var registry = makeEventRegistry();\n *\n * var radioChange = require('can-events-dom-radiochange');\n * var removeRadioChange = registry.add(radioChange);\n *\n * registry.has('radiochange'); // => true\n * registry.get('radiochange'); // => radioChange\n *\n * removeRadioChange();\n * ```\n */\nvar makeEventRegistry = function makeEventRegistry () {\n\treturn new EventRegistry();\n};\n\n/**\n * @function make-event-registry.has eventRegistry.has\n *\n * Check whether an event type has already been registered.\n *\n * @signature `eventRegistry.has( eventType )`\n * @parent can-dom-events/EventRegistry\n * @param {String} eventType The event type for which to check.\n * @return {Boolean} Whether the event type is registered.\n*/\nEventRegistry.prototype.has = function (eventType) {\n\treturn !!this._registry[eventType];\n};\n\n/**\n * @function make-event-registry.get eventRegistry.get\n *\n * Retrieve an event type which has already been registered.\n *\n * @signature `eventRegistry.get( eventType )`\n * @parent can-dom-events/EventRegistry\n * @param {String} eventType The event type for which to retrieve.\n * @return {EventDefinition} The registered event definition, or undefined if unregistered.\n*/\nEventRegistry.prototype.get = function (eventType) {\n\treturn this._registry[eventType];\n};\n\n/**\n * @function make-event-registry.add eventRegistry.add\n *\n * Add an event to the registry.\n *\n * @signature `eventRegistry.add( event [, eventType ] )`\n * @parent can-dom-events/EventRegistry\n * @param {EventDefinition} event The event definition to register.\n * @param {String} eventType The event type with which to register the event.\n * @return {function} The callback to remove the event from the registry.\n*/\nEventRegistry.prototype.add = function (event, eventType) {\n\tif (!event) {\n\t\tthrow new Error('An EventDefinition must be provided');\n\t}\n\tif (typeof event.addEventListener !== 'function') {\n\t\tthrow new TypeError('EventDefinition addEventListener must be a function');\n\t}\n\tif (typeof event.removeEventListener !== 'function') {\n\t\tthrow new TypeError('EventDefinition removeEventListener must be a function');\n\t}\n\n\teventType = eventType || event.defaultEventType;\n\tif (typeof eventType !== 'string') {\n\t\tthrow new TypeError('Event type must be a string, not ' + eventType);\n\t}\n\n\tif (this.has(eventType)) {\n\t\tif (process.env.NODE_ENV !== 'production') {\n\t\t\t\tdev.warn('Event \"' + eventType + '\" is already registered');\n\t\t\t\treturn;\n\t\t}\n\n\t\tthrow new Error('Event \"' + eventType + '\" is already registered');\n\t}\n\n\tthis._registry[eventType] = event;\n\tvar self = this;\n\treturn function remove () {\n\t\tself._registry[eventType] = undefined;\n\t};\n};\n\n// Some events do not bubble, so delegating them requires registering the handler in the\n// capturing phase.\n// http://www.quirksmode.org/blog/archives/2008/04/delegating_the.html\nvar useCapture = function(eventType) {\n\treturn eventType === 'focus' || eventType === 'blur';\n};\n\nfunction makeDelegator (domEvents) {\n\tvar Delegator = function Delegator (parentKey){\n\t\tthis.element = parentKey; // HTMLElement\n\t\tthis.events = {}; // {[eventType: string]: Array<(event) -> void>}\n\t\tthis.delegated = {}; // {[eventType: string]: (event) -> void}\n\t};\n\n\tcanReflect_1_19_2_canReflect.assignSymbols( Delegator.prototype, {\n\t\t\"can.setKeyValue\": function(eventType, handlersBySelector){\n\t\t\tvar handler = this.delegated[eventType] = function(ev){\n\t\t\t\tvar cur = ev.target;\n\t\t\t\tvar propagate = true;\n\t\t\t\tvar origStopPropagation = ev.stopPropagation;\n\t\t\t\tev.stopPropagation = function() {\n\t\t\t\t\torigStopPropagation.apply(this, arguments);\n\t\t\t\t\tpropagate = false;\n\t\t\t\t};\n\t\t\t\tvar origStopImmediatePropagation = ev.stopImmediatePropagation;\n\t\t\t\tev.stopImmediatePropagation = function() {\n\t\t\t\t\torigStopImmediatePropagation.apply(this, arguments);\n\t\t\t\t\tpropagate = false;\n\t\t\t\t};\n\t\t\t\tdo {\n\t\t\t\t\t// document does not implement `.matches` but documentElement does\n\t\t\t\t\tvar el = cur === document ? document.documentElement : cur;\n\t\t\t\t\tvar matches = el.matches || el.msMatchesSelector;\n\n\t\t\t\t\tcanReflect_1_19_2_canReflect.each(handlersBySelector, function(handlers, selector){\n\t\t\t\t\t\t// Text and comment nodes may be included in mutation event targets\n\t\t\t\t\t\t//  but will never match selectors (and do not implement matches)\n\t\t\t\t\t\tif (matches && matches.call(el, selector)) {\n\t\t\t\t\t\t\thandlers.forEach(function(handler){\n\t\t\t\t\t\t\t\thandler.call(el, ev);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t// since `el` points to `documentElement` when `cur` === document,\n\t\t\t\t\t// we need to continue using `cur` as the loop pointer, otherwhise\n\t\t\t\t\t// it will never end as documentElement.parentNode === document\n\t\t\t\t\tcur = cur.parentNode;\n\t\t\t\t} while ((cur && cur !== ev.currentTarget) && propagate);\n\t\t\t};\n\t\t\tthis.events[eventType] = handlersBySelector;\n\t\t\tdomEvents.addEventListener(this.element, eventType, handler, useCapture(eventType));\n\t\t},\n\t\t\"can.getKeyValue\": function(eventType) {\n\t\t\treturn this.events[eventType];\n\t\t},\n\t\t\"can.deleteKeyValue\": function(eventType) {\n\t\t\tdomEvents.removeEventListener(this.element, eventType, this.delegated[eventType], useCapture(eventType));\n\t\t\tdelete this.delegated[eventType];\n\t\t\tdelete this.events[eventType];\n\t\t},\n\t\t\"can.getOwnEnumerableKeys\": function() {\n\t\t\treturn Object.keys(this.events);\n\t\t}\n\t});\n\n\treturn Delegator;\n}\n\nvar MakeDelegateEventTree = function makeDelegateEventTree (domEvents) {\n\tvar Delegator = makeDelegator(domEvents);\n\treturn new canKeyTree_1_2_2_canKeyTree([Map, Delegator, Object, Array]);\n};\n\nvar domEvents = {\n\t_eventRegistry: makeEventRegistry(),\n\n\t/**\n\t* @function can-dom-events.addEvent addEvent\n\t* @parent can-dom-events.static\n\t*\n\t* Add a custom event to the global event registry.\n\t*\n\t* @signature `addEvent( event [, eventType ] )`\n\t*\n\t* ```js\n\t* var removeReturnEvent = domEvents.addEvent(enterEvent, \"return\");\n\t* ```\n\t*\n\t* @param {can-dom-events/EventDefinition} event The custom event definition.\n\t* @param {String} eventType The event type to associated with the custom event.\n\t* @return {function} The callback to remove the custom event from the registry.\n\t*/\n\taddEvent: function(event, eventType) {\n\t\treturn this._eventRegistry.add(event, eventType);\n\t},\n\n\t/**\n\t* @function can-dom-events.addEventListener addEventListener\n\t*\n\t* Add an event listener for eventType to the target.\n\t*\n\t* @signature `addEventListener( target, eventType, ...eventArgs )`\n\t* @parent can-dom-events.static\n\t* @param {DomEventTarget} target The object to which to add the listener.\n\t* @param {String} eventType The event type with which to register.\n\t* @param {*} eventArgs The arguments which configure the associated event's behavior. This is usually a\n\t* function event handler.\n\t*/\n\taddEventListener: function(target, eventType) {\n\t\tvar hasCustomEvent = domEvents._eventRegistry.has(eventType);\n\t\tif (hasCustomEvent) {\n\t\t\tvar event = domEvents._eventRegistry.get(eventType);\n\t\t\treturn event.addEventListener.apply(domEvents, arguments);\n\t\t}\n\n\t\tvar eventArgs = Array.prototype.slice.call(arguments, 1);\n\t\treturn target.addEventListener.apply(target, eventArgs);\n\t},\n\n\t/**\n\t* @function can-dom-events.removeEventListener removeEventListener\n\t*\n\t* Remove an event listener for eventType from the target.\n\t*\n\t* @signature `removeEventListener( target, eventType, ...eventArgs )`\n\t* @parent can-dom-events.static\n\t* @param {DomEventTarget} target The object from which to remove the listener.\n\t* @param {String} eventType The event type with which to unregister.\n\t* @param {*} eventArgs The arguments which configure the associated event's behavior. This is usually a\n\t* function event handler.\n\t*/\n\tremoveEventListener: function(target, eventType) {\n\t\tvar hasCustomEvent = domEvents._eventRegistry.has(eventType);\n\t\tif (hasCustomEvent) {\n\t\t\tvar event = domEvents._eventRegistry.get(eventType);\n\t\t\treturn event.removeEventListener.apply(domEvents, arguments);\n\t\t}\n\n\t\tvar eventArgs = Array.prototype.slice.call(arguments, 1);\n\t\treturn target.removeEventListener.apply(target, eventArgs);\n\t},\n\n\t/**\n\t* @function can-dom-events.addDelegateListener addDelegateListener\n\t*\n\t* Attach a handler for an event for all elements that match the selector,\n\t* now or in the future, based on a root element.\n\t*\n\t* @signature `addDelegateListener( target, eventType, selector, handler )`\n\t*\n\t* ```js\n\t* // Prevents all anchor elements from changing the page\n\t* domEvents.addDelegateListener(document.body,\"click\", \"a\", function(event){\n\t*   event.preventDefault();\n\t* })\n\t* ```\n\t* @parent can-dom-events.static\n\t* @param {DomEventTarget} root The html element to listen to events that match selector within.\n\t* @param {String} eventType The event name to listen to.\n\t* @param {String} selector A selector to filter the elements that trigger the event.\n\t* @param {function} handler A function to execute at the time the event is triggered.\n\t*/\n\taddDelegateListener: function(root, eventType, selector, handler) {\n\t\tdomEvents._eventTree.add([root, eventType, selector, handler]);\n\t},\n\t/**\n\t* @function can-dom-events.removeDelegateListener removeDelegateListener\n\t*\n\t* Remove a handler for an event for all elements that match the selector.\n\t*\n\t* @signature `removeDelegateListener( target, eventType, selector, handler )`\n\t*\n\t* ```js\n\t* // Prevents all anchor elements from changing the page\n\t* function handler(event) {\n\t*   event.preventDefault();\n\t* }\n\t* domEvents.addDelegateListener(document.body,\"click\", \"a\", handler);\n\t*\n\t* domEvents.removeDelegateListener(document.body,\"click\", \"a\", handler);\n\t* ```\n\t* @parent can-dom-events.static\n\t* @param {DomEventTarget} root The html element to listen to events that match selector within.\n\t* @param {String} eventType The event name to listen to.\n\t* @param {String} selector A selector to filter the elements that trigger the event.\n\t* @param {function} handler A function that was previously passed to `addDelegateListener`.\n\t*/\n\tremoveDelegateListener: function(target, eventType, selector, handler) {\n\t\tdomEvents._eventTree.delete([target, eventType, selector, handler]);\n\t},\n\n\t/**\n\t* @function can-dom-events.dispatch dispatch\n\t*\n\t* Create and dispatch a configured event on the target.\n\t*\n\t* @signature `dispatch( target, eventData [, bubbles ][, cancelable ] )`\n\t* @parent can-dom-events.static\n\t* @param {DomEventTarget} target The object on which to dispatch the event.\n\t* @param {Object | String} eventData The data to be assigned to the event. If it is a string, that will be the event type.\n\t* @param {Boolean} bubbles Whether the event should bubble; defaults to true.\n\t* @param {Boolean} cancelable Whether the event can be cancelled; defaults to false.\n\t* @return {Boolean} notCancelled Whether the event dispatched without being cancelled.\n\t*/\n\tdispatch: function(target, eventData, bubbles, cancelable) {\n\t\tvar event = util.createEvent(target, eventData, bubbles, cancelable);\n\t\tvar enableForDispatch = util.forceEnabledForDispatch(target, event);\n\t\tif(enableForDispatch) {\n\t\t\ttarget.disabled = false;\n\t\t}\n\n\t\tvar ret = target.dispatchEvent(event);\n\t\tif(enableForDispatch) {\n\t\t\ttarget.disabled = true;\n\t\t}\n\n\t\treturn ret;\n\t}\n};\n\ndomEvents._eventTree = MakeDelegateEventTree(domEvents);\n\n\n\n\n\nvar canDomEvents_1_3_13_canDomEvents = canNamespace_1_0_0_canNamespace.domEvents = domEvents;\n\n/**\n * @module {function} can-event-queue/map/map\n * @parent can-event-queue\n * @templateRender true\n *\n * @description Mixin methods and symbols to make this object or prototype object\n * behave like a key-value observable.\n *\n * @signature `mixinMapBindings( obj )`\n *\n * Adds symbols and methods that make `obj` or instances having `obj` on their prototype\n * behave like key-value observables.\n *\n * When `mixinMapBindings` is called on an `obj` like:\n *\n * ```js\n * var mixinMapBindings = require(\"can-event-queue/map/map\");\n *\n * var observable = mixinValueBindings({});\n *\n * observable.on(\"prop\",function(ev, newVal, oldVal){\n *   console.log(newVal);\n * });\n *\n * observable[canSymbol.for(\"can.dispatch\")](\"prop\",[2,1]);\n * // Logs: 2\n * ```\n *\n * `mixinMapBindings` adds the following properties and symbols to the object:\n *\n * {{#each (getChildren [can-event-queue/map/map])}}\n * - [{{name}}] - {{description}}{{/each}}\n *\n * Furthermore, `mixinMapBindings` looks for the following symbols on the object's `.constructor`\n * property:\n *\n * - `@can.dispatchInstanceBoundChange` - Called when the bind status of an instance changes.\n * - `@can.dispatchInstanceOnPatches` - Called if [can-event-queue/map/map.dispatch] is called with `event.patches` as an array of\n *   patches.\n */\n\n\n\n\n\n\n\nvar isDomEventTarget$1 = util.isDomEventTarget;\n\n\n\nvar metaSymbol = canSymbol_1_7_0_canSymbol.for(\"can.meta\"),\n\tdispatchBoundChangeSymbol = canSymbol_1_7_0_canSymbol.for(\"can.dispatchInstanceBoundChange\"),\n\tdispatchInstanceOnPatchesSymbol = canSymbol_1_7_0_canSymbol.for(\"can.dispatchInstanceOnPatches\"),\n\tonKeyValueSymbol$1 = canSymbol_1_7_0_canSymbol.for(\"can.onKeyValue\"),\n\toffKeyValueSymbol = canSymbol_1_7_0_canSymbol.for(\"can.offKeyValue\"),\n\tonEventSymbol = canSymbol_1_7_0_canSymbol.for(\"can.onEvent\"),\n\toffEventSymbol = canSymbol_1_7_0_canSymbol.for(\"can.offEvent\"),\n\tonValueSymbol$1 = canSymbol_1_7_0_canSymbol.for(\"can.onValue\"),\n\toffValueSymbol = canSymbol_1_7_0_canSymbol.for(\"can.offValue\"),\n\tinSetupSymbol$1 = canSymbol_1_7_0_canSymbol.for(\"can.initializing\");\n\nvar legacyMapBindings;\n\nfunction addHandlers(obj, meta) {\n\tif (!meta.handlers) {\n\t\t// Handlers are organized by:\n\t\t// event name - the type of event bound to\n\t\t// binding type - \"event\" for things that expect an event object (legacy), \"onKeyValue\" for reflective bindings.\n\t\t// queue name - mutate, queue, etc\n\t\t// handlers - the handlers.\n\t\tmeta.handlers = new canKeyTree_1_2_2_canKeyTree([Object, Object, Object, Array], {\n\t\t\tonFirst: function() {\n\t\t\t\tif (obj._eventSetup !== undefined) {\n\t\t\t\t\tobj._eventSetup();\n\t\t\t\t}\n\t\t\t\tvar constructor = obj.constructor;\n\t\t\t\tif(constructor[dispatchBoundChangeSymbol] !== undefined && obj instanceof constructor) {\n\t\t\t\t\tconstructor[dispatchBoundChangeSymbol](obj, true);\n\t\t\t\t}\n\t\t\t\t//queues.enqueueByQueue(getLifecycleHandlers(obj).getNode([]), obj, [true]);\n\t\t\t},\n\t\t\tonEmpty: function() {\n\t\t\t\tif (obj._eventTeardown !== undefined) {\n\t\t\t\t\tobj._eventTeardown();\n\t\t\t\t}\n\t\t\t\tvar constructor = obj.constructor;\n\t\t\t\tif(constructor[dispatchBoundChangeSymbol] !== undefined && obj instanceof constructor) {\n\t\t\t\t\tconstructor[dispatchBoundChangeSymbol](obj, false);\n\t\t\t\t}\n\t\t\t\t//queues.enqueueByQueue(getLifecycleHandlers(obj).getNode([]), obj, [false]);\n\t\t\t}\n\t\t});\n\t}\n\n\tif (!meta.listenHandlers) {\n\t\t// context, eventName (might be undefined), queue, handlers\n\t\tmeta.listenHandlers = new canKeyTree_1_2_2_canKeyTree([Map, Map, Object, Array]);\n\t}\n}\n\n\n// getHandlers returns a KeyTree used for event handling.\n// `handlers` will be on the `can.meta` symbol on the object.\n// Ensure the \"obj\" passed as an argument has an object on @@can.meta\nvar ensureMeta = function ensureMeta(obj) {\n\tvar meta = obj[metaSymbol];\n\n\tif (!meta) {\n\t\tmeta = {};\n\t\tcanReflect_1_19_2_canReflect.setKeyValue(obj, metaSymbol, meta);\n\t}\n\taddHandlers(obj, meta);\n\n\treturn meta;\n};\n\nfunction stopListeningArgumentsToKeys(bindTarget, event, handler, queueName) {\n\tif(arguments.length && canReflect_1_19_2_canReflect.isPrimitive(bindTarget)) {\n\t\tqueueName = handler;\n\t\thandler = event;\n\t\tevent = bindTarget;\n\t\tbindTarget = this.context;\n\t}\n\tif(typeof event === \"function\") {\n\t\tqueueName = handler;\n\t\thandler = event;\n\t\tevent = undefined;\n\t}\n\tif(typeof handler === \"string\") {\n\t\tqueueName = handler;\n\t\thandler = undefined;\n\t}\n\tvar keys = [];\n\tif(bindTarget) {\n\t\tkeys.push(bindTarget);\n\t\tif(event || handler || queueName) {\n\t\t\tkeys.push(event);\n\t\t\tif(queueName || handler) {\n\t\t\t\tkeys.push(queueName || this.defaultQueue);\n\t\t\t\tif(handler) {\n\t\t\t\t\tkeys.push(handler);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn keys;\n}\n\n\n// These are the properties we are going to add to objects\nvar props = {\n\t/**\n\t * @function can-event-queue/map/map.dispatch dispatch\n\t * @parent can-event-queue/map/map\n\t *\n\t * @description Dispatch event and key binding handlers.\n\t *\n\t * @signature `obj.dispatch(event, [args])`\n\t *\n\t * Dispatches registered [can-event-queue/map/map.addEventListener] and\n\t * [can-event-queue/map/map.can.onKeyValue] value binding handlers.\n\t *\n\t * The following shows dispatching the `property` event and\n\t * `keyValue` handlers:\n\t *\n\t *\n\t * ```js\n\t * var mixinMapBindings = require(\"can-event-queue/map/map\");\n\t *\n\t * var obj = mixinMapBindings({});\n\t *\n\t * obj.addEventListener(\"property\", function(event, newVal){\n\t *   event.type //-> \"property\"\n\t *   newVal     //-> 5\n\t * });\n\t *\n\t * canReflect.onKeyValue(\"property\", function(newVal){\n\t *   newVal     //-> 5\n\t * })\n\t *\n\t * obj.dispatch(\"property\", [5]);\n\t * ```\n\t *\n\t * > NOTE: Event handlers have an additional `event` argument.\n\t *\n\t * @param {String|Object} event The event to dispatch. If a string is passed,\n\t *   it will be used as the `type` of the event that will be dispatched and dispatch matching\n\t *   [can-event-queue/map/map.can.onKeyValue] bindings:\n\t *\n\t *   ```js\n\t *   obs.dispatch(\"key\")\n\t *   ```\n\t *\n\t *   If `event` is an object, it __MUST__ have a `type` property. The If a string is passed,\n\t *   it will be used as the `type` of the event that will be dispatched and dispatch matching\n\t *   [can-event-queue/map/map.can.onKeyValue] bindings:\n\t *\n\t *   ```js\n\t *   obs.dispatch({type: \"key\"})\n\t *   ```\n\t *\n\t *   The `event` object can also have the following properties and values:\n\t *   - __reasonLog__ `{Array}` - The reason this event happened. This will be passed to\n\t *     [can-queues.enqueueByQueue] for debugging purposes.\n\t *   - __makeMeta__ `{function}` - Details about the handler being called. This will be passed to\n\t *     [can-queues.enqueueByQueue] for debugging purposes.\n\t *   - __patches__ `{Array<Patch>}` - The patch objects this event represents.  The `.patches` value will be\n\t *     passed to the object's `.constructor`'s `@can.dispatchInstanceOnPatches` method.\n\t *\n\t * @param {Array} [args] Additional arguments to pass to event handlers.\n\t * @return {Object} event The resulting event object.\n\t */\n\tdispatch: function(event, args) {\n\t\t//!steal-remove-start\n\t\tif(process.env.NODE_ENV !== 'production') {\n\t\t\tif (arguments.length > 4) {\n\t\t\t\tdev.warn('Arguments to dispatch should be an array, not multiple arguments.');\n\t\t\t\targs = Array.prototype.slice.call(arguments, 1);\n\t\t\t}\n\n\t\t\tif (args && !Array.isArray(args)) {\n\t\t\t\tdev.warn('Arguments to dispatch should be an array.');\n\t\t\t\targs = [args];\n\t\t\t}\n\t\t}\n\t\t//!steal-remove-end\n\n\t\t// Don't send events if initalizing.\n\t\tif (this.__inSetup !== true && this[inSetupSymbol$1] !== true) {\n\t\t\tif (typeof event === 'string') {\n\t\t\t\tevent = {\n\t\t\t\t\ttype: event\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tvar meta = ensureMeta(this);\n\n\t\t\t//!steal-remove-start\n\t\t\tif(process.env.NODE_ENV !== 'production') {\n\t\t\t\tif (!event.reasonLog) {\n\t\t\t\t\tevent.reasonLog = [canReflect_1_19_2_canReflect.getName(this), \"dispatched\", '\"' + event.type + '\"', \"with\"].concat(args);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (typeof meta._log === \"function\") {\n\t\t\t\tmeta._log.call(this, event, args);\n\t\t\t}\n\t\t\t//!steal-remove-end\n\t\t\tvar handlers = meta.handlers;\n\t\t\tvar handlersByType = event.type !== undefined && handlers.getNode([event.type]);\n\t\t\tvar dispatchConstructorPatches = event.patches && this.constructor[dispatchInstanceOnPatchesSymbol];\n\t\t\tvar patchesNode = event.patches !== undefined && handlers.getNode([\"can.patches\",\"onKeyValue\"]);\n\t\t\tvar keysNode = event.keyChanged !== undefined && handlers.getNode([\"can.keys\",\"onKeyValue\"]);\n\t\t\tvar batch = dispatchConstructorPatches || handlersByType || patchesNode || keysNode;\n\t\t\tif ( batch ) {\n\t\t\t\tcanQueues_1_3_2_canQueues.batch.start();\n\t\t\t}\n\t\t\tif(handlersByType) {\n\t\t\t\tif (handlersByType.onKeyValue) {\n\t\t\t\t\tcanQueues_1_3_2_canQueues.enqueueByQueue(handlersByType.onKeyValue, this, args, event.makeMeta, event.reasonLog);\n\t\t\t\t}\n\t\t\t\tif (handlersByType.event) {\n\t\t\t\t\tevent.batchNum = canQueues_1_3_2_canQueues.batch.number();\n\t\t\t\t\tvar eventAndArgs = [event].concat(args);\n\t\t\t\t\tcanQueues_1_3_2_canQueues.enqueueByQueue(handlersByType.event, this, eventAndArgs, event.makeMeta, event.reasonLog);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(keysNode) {\n\t\t\t\tcanQueues_1_3_2_canQueues.enqueueByQueue(keysNode, this, [event.keyChanged], event.makeMeta, event.reasonLog);\n\t\t\t}\n\t\t\tif(patchesNode) {\n\t\t\t\tcanQueues_1_3_2_canQueues.enqueueByQueue(patchesNode, this, [event.patches], event.makeMeta, event.reasonLog);\n\t\t\t}\n\t\t\tif(dispatchConstructorPatches) {\n\t\t\t\tthis.constructor[dispatchInstanceOnPatchesSymbol](this, event.patches);\n\t\t\t}\n\t\t\tif ( batch ) {\n\t\t\t\tcanQueues_1_3_2_canQueues.batch.stop();\n\t\t\t}\n\t\t}\n\t\treturn event;\n\t},\n\t/**\n\t * @function can-event-queue/map/map.addEventListener addEventListener\n\t * @parent can-event-queue/map/map\n\t *\n\t * @description Register an event handler to be called when an event is dispatched.\n\t *\n\t * @signature `obj.addEventListener(eventName, handler(event, ...) [,queueName] )`\n\t *\n\t * Add a event listener to an object.  Handlers attached by `.addEventListener` get\n\t * called back with the [can-event-queue/map/map.dispatch]\n\t * `event` object and any arguments used to dispatch. [can-event-queue/map/map.can.onKeyValue] bindings do\n\t * not get the event object.\n\t *\n\t * ```js\n\t * var mixinMapBindings = require(\"can-event-queue/map/map\");\n\t *\n\t * var obj = mixinMapBindings({});\n\t *\n\t * obj.addEventListener(\"foo\", function(event){ ... });\n\t * ```\n\t *\n\t * @param {String} eventName The name of the event to listen for.\n\t * @param {Function} handler(event,arg...) The handler that will be executed to handle the event.  The handler will be called\n\t *   with the dispatched `event` and `args`.\n\t * @param {String} [queueName='mutate'] The name of the [can-queues] queue the handler will called\n\t *   back within. Defaults to `\"mutate\"`.\n\t * @return {Object} Returns the object `.addEventListener` was called on.\n\t *\n\t */\n\taddEventListener: function(key, handler, queueName) {\n\t\tensureMeta(this).handlers.add([key, \"event\", queueName || \"mutate\", handler]);\n\t\treturn this;\n\t},\n\t/**\n\t * @function can-event-queue/map/map.removeEventListener removeEventListener\n\t * @parent can-event-queue/map/map\n\t *\n\t * @description Unregister an event handler to be called when an event is dispatched.\n\t *\n\t * @signature `obj.removeEventListener(eventName, [handler [,queueName]] )`\n\t *\n\t * Removes one or more handlers from being called when `eventName`\n\t * is [can-event-queue/map/map.dispatch]ed.\n\t *\n\t * ```js\n\t * // Removes `handler` if it is in the notify queue.\n\t * obj.removeEventListener(\"closed\", handler, \"notify\")\n\t *\n\t * // Removes `handler` if it is in the mutate queue.\n\t * obj.removeEventListener(\"closed\", handler)\n\t *\n\t * // Removes all \"closed\" handlers.\n\t * obj.removeEventListener(\"closed\")\n\t * ```\n\t *\n\t * @param {String} eventName The name of the event to remove. If not specified, all events are removed.\n\t * @param {Function} [handler] The handler that will be removed from the event. If not specified, all handlers for the event are removed.\n\t * @param {String} [queueName='mutate'] The name of the [can-queues] queue the handler was registered on. Defaults to `\"mutate\"`.\n\t * @return {Object} Returns the object `.removeEventListener` was called on.\n\t */\n\tremoveEventListener: function(key, handler, queueName) {\n\t\tif(key === undefined) {\n\t\t\t// This isn't super fast, but this pattern isn't used much.\n\t\t\t// We could re-arrange the tree so it would be faster.\n\t\t\tvar handlers = ensureMeta(this).handlers;\n\t\t\tvar keyHandlers = handlers.getNode([]);\n\t\t\tObject.keys(keyHandlers).forEach(function(key){\n\t\t\t\thandlers.delete([key,\"event\"]);\n\t\t\t});\n\t\t} else if (!handler && !queueName) {\n\t\t\tensureMeta(this).handlers.delete([key, \"event\"]);\n\t\t} else if (!handler) {\n\t\t\tensureMeta(this).handlers.delete([key, \"event\", queueName || \"mutate\"]);\n\t\t} else {\n\t\t\tensureMeta(this).handlers.delete([key, \"event\", queueName || \"mutate\", handler]);\n\t\t}\n\t\treturn this;\n\t},\n\t/**\n\t * @function can-event-queue/map/map.one one\n\t * @parent can-event-queue/map/map\n\t *\n\t * @description Register an event handler that gets called only once.\n\t *\n\t * @signature `obj.one(event, handler(event, args...) )`\n\t *\n\t * Adds a basic event listener that listens to an event once and only once.\n\t *\n\t * ```js\n\t * obj.one(\"prop\", function(){\n\t *   console.log(\"prop dispatched\");\n\t * })\n\t *\n\t * obj[canSymbol.for(\"prop\")](\"prop\") //-> logs \"prop dispatched\"\n\t * obj[canSymbol.for(\"prop\")](\"prop\")\n\t * ```\n\t *\n\t * @param {String} eventName The name of the event to listen to.\n\t * @param {Function} handler(event, args...) The handler that will be run when the\n\t *   event is dispached.\n\t * @return {Object} this\n\t */\n\tone: function(event, handler) {\n\t\t// Unbind the listener after it has been executed\n\t\tvar one = function() {\n\t\t\tlegacyMapBindings.off.call(this, event, one);\n\t\t\treturn handler.apply(this, arguments);\n\t\t};\n\n\t\t// Bind the altered listener\n\t\tlegacyMapBindings.on.call(this, event, one);\n\t\treturn this;\n\t},\n\t/**\n\t * @function can-event-queue/map/map.listenTo listenTo\n\t * @parent can-event-queue/map/map\n\t *\n\t * @description Listen to an event and register the binding for simplified unbinding.\n\t *\n\t * @signature `obj.listenTo([bindTarget,] event, handler)`\n\t *\n\t * `.listenTo` is useful for creating bindings that can can be torn down with\n\t * [can-event-queue/map/map.stopListening].  This is useful when creating\n\t * rich behaviors that can't be accomplished using computed values, or if you are trying to\n\t * avoid streams.\n\t *\n\t * For example, the following creates an observable that counts how many times its\n\t * `name` property has changed:\n\t *\n\t * ```js\n\t * class Person {\n\t *   constructor(){\n\t *     this.nameChanged = 0;\n\t *     this.listenTo(\"name\", function(){\n\t *       this.nameChanged++;\n\t *     })\n\t *   },\n\t *   setName(newVal) {\n\t *     this.name = newVal;\n\t *     this.dispatch(\"name\",[newVal])\n\t *   }\n\t * }\n\t * mixinMapBindings(Person.prototype);\n\t *\n\t * var person = new Person();\n\t * person.setName(\"Justin\");\n\t * person.setName(\"Ramiya\");\n\t * person.nameChanged //-> 2\n\t * ```\n\t *\n\t * `.listenTo` event bindings are stored on an observable and MUST be unbound using\n\t * [can-event-queue/map/map.stopListening]. `.stopListening` make it easy to unbind\n\t * all of the `.listenTo` event bindings when the observable is no longer needed:\n\t *\n\t * ```js\n\t * person.stopListening();\n\t * ```\n\t *\n\t * If no `bindTarget` is passed, `.listenTo` binds to the current\n\t * observable.\n\t *\n\t * [can-component]'s `connectedCallback` lifecyle hook is often used to call\n\t * `.listenTo` to setup bindings that update viewmodel properties.\n\t *\n\t *\n\t * @param {Object} [bindTarget] The object to listen for events on.  If `bindTarget` is not provided,\n\t * the observable `.listenTo` was called on will be the `bindTarget`.\n\t * @param {String} event The name of the event to listen for.\n\t * @param {Function} handler The handler that will be executed to handle the event.\n\t * @return {Object} this\n\t */\n\tlistenTo: function (bindTarget, event, handler, queueName) {\n\n\t\tif(canReflect_1_19_2_canReflect.isPrimitive(bindTarget)) {\n\t\t\tqueueName = handler;\n\t\t\thandler = event;\n\t\t\tevent = bindTarget;\n\t\t\tbindTarget = this;\n\t\t}\n\n\t\tif(typeof event === \"function\") {\n\t\t\tqueueName = handler;\n\t\t\thandler = event;\n\t\t\tevent = undefined;\n\t\t}\n\n\t\t// Initialize event cache\n\t\tensureMeta(this).listenHandlers.add([bindTarget, event, queueName || \"mutate\", handler]);\n\n\t\tlegacyMapBindings.on.call(bindTarget, event, handler, queueName || \"mutate\");\n\t\treturn this;\n\t},\n\t/**\n\t * @function can-event-queue/map/map.stopListening stopListening\n\t * @parent can-event-queue/map/map\n\t * @description Stops listening for registered event handlers.\n\t *\n\t * @signature `obj.stopListening( [bindTarget], [event,] handler]] )`\n\t *\n\t * `.stopListening` unbinds on event handlers registered through\n\t * [can-event-queue/map/map.listenTo]. All event handlers\n\t * that match the arguments will be unbound. For example:\n\t *\n\t * ```js\n\t * // Unbinds all .listenTo registered handlers\n\t * obj.stopListening()\n\t *\n\t * // Unbinds all .listenTo registered with `bindTarget`\n\t * obj.stopListening(bindTarget)\n\t *\n\t * // Unbinds all .listenTo registered with `bindTarget`, `event`\n\t * obj.stopListening(bindTarget, event)\n\t *\n\t * // Unbinds the handler registered with `bindTarget`, `event`, `handler`\n\t * obj.stopListening(bindTarget, event, handler)\n\t * ```\n\t *\n\t * `.listenTo` is often returned by [can-component]'s `connectedCallback` lifecyle hook.\n\t *\n\t * @param {Object} [bindTarget] The object we will stop listening to event on. If `bindTarget` is\n\t * not provided, the observable `.stopListening` was called on will be the `bindTarget`.\n\t * @param {String} [event] The name of the event to listen for.\n\t * @param {Function} [handler] The handler that will be executed to handle the event.\n\t * @return {Object} this\n\t *\n\t */\n\tstopListening: function () {\n\t\tvar keys = stopListeningArgumentsToKeys.apply({context: this, defaultQueue: \"mutate\"}, arguments);\n\n\t\tvar listenHandlers = ensureMeta(this).listenHandlers;\n\n\t\tfunction deleteHandler(bindTarget, event, queue, handler){\n\t\t\tlegacyMapBindings.off.call(bindTarget, event, handler, queue);\n\t\t}\n\t\tlistenHandlers.delete(keys, deleteHandler);\n\n\t\treturn this;\n\t},\n\t/**\n\t * @function can-event-queue/map/map.on on\n\t * @parent can-event-queue/map/map\n\t *\n\t * @description A shorthand method for listening to event.\n\t *\n\t * @signature `obj.on( event, handler [, queue] )`\n\t *\n\t * Listen to when `obj` dispatches an event, a [can-reflect/observe.onKeyValue]\n\t * change, or a [can-reflect/observe.onValue] change in that order.\n\t *\n\t * As this is the __legacy__ `.on`, it will look for an `.addEventListener`\n\t * method on the `obj` first, before looking for the [can-symbol/symbols/onKeyValue]\n\t * and then [can-symbol/symbols/onValue] symbol.\n\t *\n\t * @param {String} eventName\n\t * @param {Function} handler\n\t * @param {String} [queue]\n\t * @return {Any} The object `on` was called on.\n\t */\n\ton: function(eventName, handler, queue) {\n\t\tvar listenWithDOM = isDomEventTarget$1(this);\n\t\tif (listenWithDOM) {\n\t\t\tif (typeof handler === 'string') {\n\t\t\t\tcanDomEvents_1_3_13_canDomEvents.addDelegateListener(this, eventName, handler, queue);\n\t\t\t} else {\n\t\t\t\tcanDomEvents_1_3_13_canDomEvents.addEventListener(this, eventName, handler, queue);\n\t\t\t}\n\t\t} else {\n\t\t\tif (this[onEventSymbol]) {\n\t\t\t\tthis[onEventSymbol](eventName, handler, queue);\n\t\t\t} else if (\"addEventListener\" in this) {\n\t\t\t\tthis.addEventListener(eventName, handler, queue);\n\t\t\t} else if (this[onKeyValueSymbol$1]) {\n\t\t\t\tcanReflect_1_19_2_canReflect.onKeyValue(this, eventName, handler, queue);\n\t\t\t} else {\n\t\t\t\tif (!eventName && this[onValueSymbol$1]) {\n\t\t\t\t\tcanReflect_1_19_2_canReflect.onValue(this, handler, queue);\n\t\t\t\t} else {\n\t\t\t\t\tthrow new Error(\"can-event-queue: Unable to bind \" + eventName);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn this;\n\t},\n\t/**\n\t * @function can-event-queue/map/map.off off\n\t * @parent can-event-queue/map/map\n\t *\n\t * @description A shorthand method for unbinding an event.\n\t *\n\t * @signature `obj.on( event, handler [, queue] )`\n\t *\n\t * Listen to when `obj` dispatches an event, a [can-reflect/observe.onKeyValue]\n\t * change, or a [can-reflect/observe.onValue] change in that order.\n\t *\n\t * As this is the __legacy__ `.on`, it will look for an `.addEventListener`\n\t * method on the `obj` first, before looking for the [can-symbol/symbols/onKeyValue]\n\t * and then [can-symbol/symbols/onValue] symbol.\n\t *\n\t * @param {String} eventName\n\t * @param {Function} handler\n\t * @param {String} [queue]\n\t * @return {Any} The object `on` was called on.\n\t */\n\toff: function(eventName, handler, queue) {\n\t\tvar listenWithDOM = isDomEventTarget$1(this);\n\t\tif (listenWithDOM) {\n\t\t\tif (typeof handler === 'string') {\n\t\t\t\tcanDomEvents_1_3_13_canDomEvents.removeDelegateListener(this, eventName, handler, queue);\n\t\t\t} else {\n\t\t\t\tcanDomEvents_1_3_13_canDomEvents.removeEventListener(this, eventName, handler, queue);\n\t\t\t}\n\t\t} else {\n\t\t\tif (this[offEventSymbol]) {\n\t\t\t\tthis[offEventSymbol](eventName, handler, queue);\n\t\t\t} else if (\"removeEventListener\" in this) {\n\t\t\t\tthis.removeEventListener(eventName, handler, queue);\n\t\t\t} else if (this[offKeyValueSymbol]) {\n\t\t\t\tcanReflect_1_19_2_canReflect.offKeyValue(this, eventName, handler, queue);\n\t\t\t} else {\n\t\t\t\tif (!eventName && this[offValueSymbol]) {\n\t\t\t\t\tcanReflect_1_19_2_canReflect.offValue(this, handler, queue);\n\t\t\t\t} else {\n\t\t\t\t\tthrow new Error(\"can-event-queue: Unable to unbind \" + eventName);\n\t\t\t\t}\n\n\t\t\t}\n\t\t}\n\t\treturn this;\n\t}\n};\n\n// The symbols we'll add to objects\nvar symbols$1 = {\n\t/**\n\t * @function can-event-queue/map/map.can.onKeyValue @can.onKeyValue\n\t * @parent can-event-queue/map/map\n\t *\n\t * @description Register an event handler to be called when a key value changes.\n\t *\n\t * @signature `canReflect.onKeyValue( obj, key, handler(newVal) [,queueName] )`\n\t *\n\t * Add a key change handler to an object.  Handlers attached by `.onKeyValue` get\n\t * called back with the new value of the `key`. Handlers attached with [can-event-queue/map/map.can.addEventListener]\n\t * get the event object.\n\t *\n\t * ```js\n\t * var mixinMapBindings = require(\"can-event-queue/map/map\");\n\t *\n\t * var obj = mixinMapBindings({});\n\t *\n\t * canReflect.onKeyValue( obj, \"prop\", function(newPropValue){ ... });\n\t * ```\n\t *\n\t * @param {String} key The name of property to listen to changes in values.\n\t * @param {Function} handler(newVal, oldValue) The handler that will be called\n\t *   back with the new and old value of the key.\n\t * @param {String} [queueName='mutate'] The name of the [can-queues] queue the handler will called\n\t *   back within. Defaults to `\"mutate\"`.\n\t */\n\t\"can.onKeyValue\": function(key, handler, queueName) {\n\t\tensureMeta(this).handlers.add([key, \"onKeyValue\", queueName || \"mutate\", handler]);\n\t},\n\t/**\n\t * @function can-event-queue/map/map.can.offKeyValue @can.offKeyValue\n\t * @parent can-event-queue/map/map\n\t *\n\t * @description Unregister an event handler to be called when an event is dispatched.\n\t *\n\t * @signature `canReflect.offKeyValue( obj, key, handler, queueName )`\n\t *\n\t * Removes a handlers from being called when `key` changes are\n\t * [can-event-queue/map/map.dispatch]ed.\n\t *\n\t * ```js\n\t * // Removes `handler` if it is in the notify queue.\n\t * canReflect.offKeyValue( obj, \"prop\", handler, \"notify\" )\n\t * ```\n\t *\n\t * @param {String} eventName The name of the event to remove. If not specified, all events are removed.\n\t * @param {Function} [handler] The handler that will be removed from the event. If not specified, all handlers for the event are removed.\n\t * @param {String} [queueName='mutate'] The name of the [can-queues] queue the handler was registered on. Defaults to `\"mutate\"`.\n\t */\n\t\"can.offKeyValue\": function(key, handler, queueName) {\n\t\tensureMeta(this).handlers.delete([key, \"onKeyValue\", queueName || \"mutate\", handler]);\n\t},\n\t/**\n\t * @function can-event-queue/map/map.can.isBound @can.isBound\n\t * @parent can-event-queue/map/map\n\t *\n\t * @description Return if the observable is bound to.\n\t *\n\t * @signature `canReflect.isBound(obj)`\n\t *\n\t * The `@can.isBound` symbol is added to make [can-reflect/observe.isBound]\n\t * return if `obj` is bound or not.\n\t *\n\t * @return {Boolean} True if the observable has been bound to with `.onKeyValue` or `.addEventListener`.\n\t */\n\t\"can.isBound\": function() {\n\t\treturn !ensureMeta(this).handlers.isEmpty();\n\t},\n\t/**\n\t * @function can-event-queue/map/map.can.getWhatIChange @can.getWhatIChange\n\t * @parent can-event-queue/map/map\n\t *\n\t * @description Return observables whose values are affected by attached event handlers\n\t * @signature `@can.getWhatIChange(key)`\n\t *\n\t * The `@@can.getWhatIChange` symbol is added to make sure [can-debug] can report\n\t * all the observables whose values are set by a given observable's key.\n\t *\n\t * This function iterates over the event handlers attached to a given `key` and\n\t * collects the result of calling `@@can.getChangesDependencyRecord` on each handler;\n\t * this symbol allows the caller to tell what observables are being mutated by\n\t * the event handler when it is executed.\n\t *\n\t * In the following example a [can-simple-map] instance named `me` is created\n\t * and when its `age` property changes, the value of a [can-simple-observable]\n\t * instance is set. The event handler that causes the mutation is then decatorated\n\t * with `@@can.getChangesDependencyRecord` to register the mutation dependency.\n\t *\n\t * ```js\n\t * var obs = new SimpleObservable(\"a\");\n\t * var me = new SimpleMap({ age: 30 });\n\t * var canReflect = require(\"can-reflect\");\n\t *\n\t * var onAgeChange = function onAgeChange() {\n\t *\tcanReflect.setValue(obs, \"b\");\n\t * };\n\t *\n\t * onAgeChange[canSymbol.for(\"can.getChangesDependencyRecord\")] = function() {\n\t *\treturn {\n\t *\t\tvalueDependencies: new Set([ obs ]);\n\t *\t}\n\t * };\n\t *\n\t * canReflect.onKeyValue(me, \"age\", onAgeChange);\n\t * me[canSymbol.for(\"can.getWhatIChange\")](\"age\");\n\t * ```\n\t *\n\t * The dependency records collected from the event handlers are divided into\n\t * two categories:\n\t *\n\t * - mutate: Handlers in the mutate/domUI queues\n\t * - derive: Handlers in the notify queue\n\t *\n\t * Since event handlers are added by default to the \"mutate\" queue, calling\n\t * `@@can.getWhatIChange` on the `me` instance returns an object with a mutate\n\t * property and the `valueDependencies` Set registered on the `onAgeChange`\n\t * handler.\n\t *\n\t * Please check out the [can-reflect-dependencies] docs to learn more about\n\t * how this symbol is used to keep track of custom observable dependencies.\n\t */\n\t\"can.getWhatIChange\": function getWhatIChange(key) {\n\t\t//!steal-remove-start\n\t\t\tif(process.env.NODE_ENV !== 'production') {\n\t\t\tvar whatIChange = {};\n\t\t\tvar meta = ensureMeta(this);\n\n\t\t\tvar notifyHandlers = [].concat(\n\t\t\t\tmeta.handlers.get([key, \"event\", \"notify\"]),\n\t\t\t\tmeta.handlers.get([key, \"onKeyValue\", \"notify\"])\n\t\t\t);\n\n\t\t\tvar mutateHandlers = [].concat(\n\t\t\t\tmeta.handlers.get([key, \"event\", \"mutate\"]),\n\t\t\t\tmeta.handlers.get([key, \"event\", \"domUI\"]),\n\t\t\t\tmeta.handlers.get([key, \"onKeyValue\", \"mutate\"]),\n\t\t\t\tmeta.handlers.get([key, \"onKeyValue\", \"domUI\"])\n\t\t\t);\n\n\t\t\tif (notifyHandlers.length) {\n\t\t\t\tnotifyHandlers.forEach(function(handler) {\n\t\t\t\t\tvar changes = canReflect_1_19_2_canReflect.getChangesDependencyRecord(handler);\n\n\t\t\t\t\tif (changes) {\n\t\t\t\t\t\tvar record = whatIChange.derive;\n\t\t\t\t\t\tif (!record) {\n\t\t\t\t\t\t\trecord = (whatIChange.derive = {});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tmerge(record, changes);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (mutateHandlers.length) {\n\t\t\t\tmutateHandlers.forEach(function(handler) {\n\t\t\t\t\tvar changes = canReflect_1_19_2_canReflect.getChangesDependencyRecord(handler);\n\n\t\t\t\t\tif (changes) {\n\t\t\t\t\t\tvar record = whatIChange.mutate;\n\t\t\t\t\t\tif (!record) {\n\t\t\t\t\t\t\trecord = (whatIChange.mutate = {});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tmerge(record, changes);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn Object.keys(whatIChange).length ? whatIChange : undefined;\n\t\t}\n\t\t//!steal-remove-end\n\t},\n\t\"can.onPatches\": function(handler, queue) {\n\t\tvar handlers = ensureMeta(this).handlers;\n\t\thandlers.add([\"can.patches\", \"onKeyValue\", queue || \"notify\", handler]);\n\t},\n\t\"can.offPatches\": function(handler, queue) {\n\t\tvar handlers = ensureMeta(this).handlers;\n\t\thandlers.delete([\"can.patches\", \"onKeyValue\", queue || \"notify\", handler]);\n\t}\n};\n\n// This can be removed in a future version.\nfunction defineNonEnumerable$1(obj, prop, value) {\n\tObject.defineProperty(obj, prop, {\n\t\tenumerable: false,\n\t\tvalue: value\n\t});\n}\n\n// The actual legacyMapBindings mixin function\nlegacyMapBindings = function(obj) {\n\t// add properties\n\tcanReflect_1_19_2_canReflect.assignMap(obj, props);\n\t// add symbols\n\treturn canReflect_1_19_2_canReflect.assignSymbols(obj, symbols$1);\n};\n\ndefineNonEnumerable$1(legacyMapBindings, \"addHandlers\", addHandlers);\ndefineNonEnumerable$1(legacyMapBindings, \"stopListeningArgumentsToKeys\", stopListeningArgumentsToKeys);\n\n\n\n// ## LEGACY\n// The following is for compatability with the old can-event\nprops.bind = props.addEventListener;\nprops.unbind = props.removeEventListener;\n\n\n\n// Adds methods directly to method so it can be used like `can-event` used to be used.\ncanReflect_1_19_2_canReflect.assignMap(legacyMapBindings, props);\ncanReflect_1_19_2_canReflect.assignSymbols(legacyMapBindings, symbols$1);\n\ndefineNonEnumerable$1(legacyMapBindings, \"start\", function() {\n\tconsole.warn(\"use can-queues.batch.start()\");\n\tcanQueues_1_3_2_canQueues.batch.start();\n});\ndefineNonEnumerable$1(legacyMapBindings, \"stop\", function() {\n\tconsole.warn(\"use can-queues.batch.stop()\");\n\tcanQueues_1_3_2_canQueues.batch.stop();\n});\ndefineNonEnumerable$1(legacyMapBindings, \"flush\", function() {\n\tconsole.warn(\"use can-queues.flush()\");\n\tcanQueues_1_3_2_canQueues.flush();\n});\n\ndefineNonEnumerable$1(legacyMapBindings, \"afterPreviousEvents\", function(handler) {\n\tconsole.warn(\"don't use afterPreviousEvents\");\n\tcanQueues_1_3_2_canQueues.mutateQueue.enqueue(function afterPreviousEvents() {\n\t\tcanQueues_1_3_2_canQueues.mutateQueue.enqueue(handler);\n\t});\n\tcanQueues_1_3_2_canQueues.flush();\n});\n\ndefineNonEnumerable$1(legacyMapBindings, \"after\", function(handler) {\n\tconsole.warn(\"don't use after\");\n\tcanQueues_1_3_2_canQueues.mutateQueue.enqueue(handler);\n\tcanQueues_1_3_2_canQueues.flush();\n});\n\nvar map$1 = legacyMapBindings;\n\n// Ensure the \"obj\" passed as an argument has an object on @@can.meta\nvar ensureMeta$1 = function ensureMeta(obj) {\n\tvar metaSymbol = canSymbol_1_7_0_canSymbol.for(\"can.meta\");\n\tvar meta = obj[metaSymbol];\n\n\tif (!meta) {\n\t\tmeta = {};\n\t\tcanReflect_1_19_2_canReflect.setKeyValue(obj, metaSymbol, meta);\n\t}\n\n\treturn meta;\n};\n\n// this is a very simple can-map like object\nvar SimpleMap = canConstruct_3_5_7_canConstruct.extend(\"SimpleMap\",\n\t{\n\t\t// ### setup\n\t\t// A setup function for the instantiation of a simple-map.\n\t\tsetup: function(initialData){\n\t\t\tthis._data = {};\n\t\t\tif(initialData && typeof initialData === \"object\") {\n\t\t\t\tthis.attr(initialData);\n\t\t\t}\n\t\t},\n\t\t// ### attr\n\t\t// The main get/set interface simple-map.\n\t\t// Either sets or gets one or more properties depending on how it is called.\n\t\tattr: function(prop, value) {\n\t\t\tvar self = this;\n\n\t\t\tif(arguments.length === 0 ) {\n\t\t\t\tcanObservationRecorder_1_3_1_canObservationRecorder.add(this,\"can.keys\");\n\t\t\t\tvar data = {};\n\t\t\t\tcanReflect_1_19_2_canReflect.eachKey(this._data, function(value, prop){\n\t\t\t\t\tcanObservationRecorder_1_3_1_canObservationRecorder.add(this, prop);\n\t\t\t\t\tdata[prop] = value;\n\t\t\t\t}, this);\n\t\t\t\treturn data;\n\t\t\t}\n\t\t\telse if(arguments.length > 1) {\n\t\t\t\tvar had = this._data.hasOwnProperty(prop);\n\t\t\t\tvar old = this._data[prop];\n\t\t\t\tthis._data[prop] = value;\n\t\t\t\tif(old !== value) {\n\n\n\t\t\t\t\t//!steal-remove-start\n\t\t\t\t\tif (process.env.NODE_ENV !== 'production') {\n\t\t\t\t\t\tif (typeof this._log === \"function\") {\n\t\t\t\t\t\t\tthis._log(prop, value, old);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t//!steal-remove-end\n\n\t\t\t\t\tvar dispatched = {\n\t\t\t\t\t\tkeyChanged: !had ? prop : undefined,\n\t\t\t\t\t\ttype: prop\n\t\t\t\t\t};\n\t\t\t\t\t//!steal-remove-start\n\t\t\t\t\tif (process.env.NODE_ENV !== 'production') {\n\t\t\t\t\t\tdispatched = {\n\t\t\t\t\t\t\tkeyChanged: !had ? prop : undefined,\n\t\t\t\t\t\t\ttype: prop,\n\t\t\t\t\t\t\treasonLog: [ canReflect_1_19_2_canReflect.getName(this) + \"'s\", prop, \"changed to\", value, \"from\", old ],\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t\t//!steal-remove-end\n\n\t\t\t\t\tthis.dispatch(dispatched, [value, old]);\n\t\t\t\t}\n\n\t\t\t}\n\t\t\t// 1 argument\n\t\t\telse if(typeof prop === 'object') {\n\t\t\t\tcanQueues_1_3_2_canQueues.batch.start();\n\t\t\t\tcanReflect_1_19_2_canReflect.eachKey(prop, function(value, key) {\n\t\t\t\t\tself.attr(key, value);\n\t\t\t\t});\n\t\t\t\tcanQueues_1_3_2_canQueues.batch.stop();\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif(prop !== \"constructor\") {\n\t\t\t\t\tcanObservationRecorder_1_3_1_canObservationRecorder.add(this, prop);\n\t\t\t\t\treturn this._data[prop];\n\t\t\t\t}\n\n\t\t\t\treturn this.constructor;\n\t\t\t}\n\t\t},\n\t\tserialize: function(){\n\t\t\treturn canReflect_1_19_2_canReflect.serialize(this, Map);\n\t\t},\n\t\tget: function(){\n\t\t\treturn this.attr.apply(this, arguments);\n\t\t},\n\t\tset: function(){\n\t\t\treturn this.attr.apply(this, arguments);\n\t\t},\n\t\t// call `.log()` to log all property changes\n\t\t// pass a single property to only get logs for said property, e.g: `.log(\"foo\")`\n\t\tlog: function(key) {\n\t\t\t//!steal-remove-start\n\t\t\tif (process.env.NODE_ENV !== 'production') {\n\t\t\t\tvar quoteString = function quoteString(x) {\n\t\t\t\t\treturn typeof x === \"string\" ? JSON.stringify(x) : x;\n\t\t\t\t};\n\t\t\t\tvar meta = ensureMeta$1(this);\n\t\t\t\tmeta.allowedLogKeysSet = meta.allowedLogKeysSet || new Set();\n\n\t\t\t\tif (key) {\n\t\t\t\t\tmeta.allowedLogKeysSet.add(key);\n\t\t\t\t}\n\n\t\t\t\tthis._log = function(prop, current, previous, log) {\n\t\t\t\t\tif (key && !meta.allowedLogKeysSet.has(prop)) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tdev.log(\n\t\t\t\t\t\tcanReflect_1_19_2_canReflect.getName(this),\n\t\t\t\t\t\t\"\\n key \", quoteString(prop),\n\t\t\t\t\t\t\"\\n is  \", quoteString(current),\n\t\t\t\t\t\t\"\\n was \", quoteString(previous)\n\t\t\t\t\t);\n\t\t\t\t};\n\t\t\t}\n\t\t\t//!steal-remove-end\n\t\t}\n\t}\n);\n\nmap$1(SimpleMap.prototype);\n\nvar simpleMapProto = {\n\t// -type-\n\t\"can.isMapLike\": true,\n\t\"can.isListLike\": false,\n\t\"can.isValueLike\": false,\n\n\t// -get/set-\n\t\"can.getKeyValue\": SimpleMap.prototype.get,\n\t\"can.setKeyValue\": SimpleMap.prototype.set,\n\t\"can.deleteKeyValue\": function(prop) {\n\t\tvar dispatched;\n\t\tif( this._data.hasOwnProperty(prop) ) {\n\t\t\tvar old = this._data[prop];\n\t\t\tdelete this._data[prop];\n\n\t\t\t//!steal-remove-start\n\t\t\tif (process.env.NODE_ENV !== 'production') {\n\t\t\t\tif (typeof this._log === \"function\") {\n\t\t\t\t\tthis._log(prop, undefined, old);\n\t\t\t\t}\n\t\t\t}\n\t\t\t//!steal-remove-end\n\t\t\tdispatched = {\n\t\t\t\tkeyChanged: prop,\n\t\t\t\ttype: prop\n\t\t\t};\n\t\t\t//!steal-remove-start\n\t\t\tif (process.env.NODE_ENV !== 'production') {\n\t\t\t\tdispatched = {\n\t\t\t\t\tkeyChanged: prop,\n\t\t\t\t\ttype: prop,\n\t\t\t\t\treasonLog: [ canReflect_1_19_2_canReflect.getName(this) + \"'s\", prop, \"deleted\", old ]\n\t\t\t\t};\n\t\t\t}\n\t\t\t//!steal-remove-end\n\t\t\tthis.dispatch(dispatched, [undefined, old]);\n\t\t}\n\t},\n\n\n\t// -shape\n\t\"can.getOwnEnumerableKeys\": function(){\n\t\tcanObservationRecorder_1_3_1_canObservationRecorder.add(this, 'can.keys');\n\t\treturn Object.keys(this._data);\n\t},\n\n\t// -shape get/set-\n\t\"can.assignDeep\": function(source){\n\t\tcanQueues_1_3_2_canQueues.batch.start();\n\t\t// TODO: we should probably just throw an error instead of cleaning\n\t\tcanReflect_1_19_2_canReflect.assignMap(this, source);\n\t\tcanQueues_1_3_2_canQueues.batch.stop();\n\t},\n\t\"can.updateDeep\": function(source){\n\t\tcanQueues_1_3_2_canQueues.batch.start();\n\t\t// TODO: we should probably just throw an error instead of cleaning\n\t\tcanReflect_1_19_2_canReflect.updateMap(this, source);\n\t\tcanQueues_1_3_2_canQueues.batch.stop();\n\t},\n\t\"can.keyHasDependencies\": function(key) {\n\t\treturn false;\n\t},\n\t\"can.getKeyDependencies\": function(key) {\n\t\treturn undefined;\n\t},\n\t\"can.hasOwnKey\": function(key){\n\t\treturn this._data.hasOwnProperty(key);\n\t}\n};\n\n//!steal-remove-start\nif (process.env.NODE_ENV !== 'production') {\n\tsimpleMapProto[\"can.getName\"] = function() {\n\t\treturn canReflect_1_19_2_canReflect.getName(this.constructor) + \"{}\";\n\t};\n}\n//!steal-remove-end\ncanReflect_1_19_2_canReflect.assignSymbols(SimpleMap.prototype,simpleMapProto);\n\n// Setup other symbols\n\n\nvar canSimpleMap_4_3_3_canSimpleMap = SimpleMap;\n\n/**\n * Creates a constructor function from an ES2015 class, this is a workaround\n * needed to being able to extend a class from code that's transpiled by Babel.\n * See https://github.com/babel/babel/pull/8656\n * @param {*} Type The ES2015 base class used to create the constructor\n * @param {*} Parent The object where the prototype chain walk to copy over\n * symbols and static properties to the constructor stops. If not provided,\n * the chain stops at Object.\n * @returns {Function} Constructor function than can be safely subclassed from\n * transpiled code.\n */\nfunction createConstructorFunction(Type, Parent) {\n\tif (typeof Parent === \"undefined\") {\n\t\tParent = Object.getPrototypeOf(Object);\n\t}\n\n\tfunction TypeConstructor() {\n\t\treturn Reflect.construct(Type, arguments, this.constructor);\n\t}\n\n\tTypeConstructor.prototype = Object.create(Type.prototype);\n\tTypeConstructor.prototype.constructor = TypeConstructor;\n\n\t/**\n\t * Add `prop` to TypeConstructor from `source` if not defined already\n\t * @param {{}} source The object that owns `prop`\n\t * @param {string} prop The name of the property to be defined\n\t */\n\tfunction copyIfMissing(source, prop) {\n\t\tif (!TypeConstructor[prop]) {\n\t\t\tObject.defineProperty(\n\t\t\t\tTypeConstructor,\n\t\t\t\tprop,\n\t\t\t\tObject.getOwnPropertyDescriptor(source, prop)\n\t\t\t);\n\t\t}\n\t}\n\n\t// Walk up the prototype chain to copy over all Symbols and\n\t// static properties to the constructor function\n\tlet Link = Type;\n\twhile (Link !== Parent && Link !== null) {\n\t\tconst props = Object.getOwnPropertyNames(Link);\n\t\tprops.forEach(function(prop) {\n\t\t\tcopyIfMissing(Link, prop);\n\t\t});\n\n\t\tconst symbols = Object.getOwnPropertySymbols(Link);\n\t\tsymbols.forEach(function(symbol) {\n\t\t\tcopyIfMissing(Link, symbol);\n\t\t});\n\n\t\tLink = Object.getPrototypeOf(Link);\n\t}\n\n\treturn TypeConstructor;\n}\n\nvar createConstructorFunction_1 = createConstructorFunction;\n\n// This is an observable that is like `settable`, but passed a `resolve`\n// function that can resolve the value of this observable late.\nfunction AsyncObservable(fn, context, initialValue) {\n\tthis.resolve = this.resolve.bind(this);\n\tthis.lastSetValue = new canSimpleObservable_2_5_0_canSimpleObservable(initialValue);\n\tthis.handler = this.handler.bind(this);\n\n\tfunction observe() {\n\t\tthis.resolveCalled = false;\n\n\t\t// set inGetter flag to avoid calling `resolve` redundantly if it is called\n\t\t// synchronously in the getter\n\t\tthis.inGetter = true;\n\t\tvar newVal = fn.call(\n\t\t\tcontext,\n\t\t\tthis.lastSetValue.get(),\n\t\t\tthis.bound === true ? this.resolve : undefined\n\t\t);\n\t\tthis.inGetter = false;\n\n\t\t// if the getter returned a value, resolve with the value\n\t\tif (newVal !== undefined) {\n\t\t\tthis.resolve(newVal);\n\t\t}\n\t\t// otherwise, if `resolve` was called synchronously in the getter,\n\t\t// resolve with the value passed to `resolve`\n\t\telse if (this.resolveCalled) {\n\t\t\tthis.resolve(this._value);\n\t\t}\n\n\t\t// if bound, the handlers will be called by `resolve`\n\t\t// returning here would cause a duplicate event\n\t\tif (this.bound !== true) {\n\t\t\treturn newVal;\n\t\t}\n\t}\n\n\t//!steal-remove-start\n\tif (process.env.NODE_ENV !== 'production') {\n\t\tcanReflect_1_19_2_canReflect.assignSymbols(this, {\n\t\t\t\"can.getName\": function() {\n\t\t\t\treturn (\n\t\t\t\t\tcanReflect_1_19_2_canReflect.getName(this.constructor) +\n\t\t\t\t\t\"<\" +\n\t\t\t\t\tcanReflect_1_19_2_canReflect.getName(fn) +\n\t\t\t\t\t\">\"\n\t\t\t\t);\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(this.handler, \"name\", {\n\t\t\tvalue: canReflect_1_19_2_canReflect.getName(this) + \".handler\"\n\t\t});\n\t\tObject.defineProperty(observe, \"name\", {\n\t\t\tvalue: canReflect_1_19_2_canReflect.getName(fn) + \"::\" + canReflect_1_19_2_canReflect.getName(this.constructor)\n\t\t});\n\t}\n\t//!steal-remove-end\n\n\tthis.observation = new canObservation_4_2_0_canObservation(observe, this);\n}\nAsyncObservable.prototype = Object.create(settable.prototype);\nAsyncObservable.prototype.constructor = AsyncObservable;\n\nAsyncObservable.prototype.handler = function(newVal) {\n\tif (newVal !== undefined) {\n\t\tsettable.prototype.handler.apply(this, arguments);\n\t}\n};\n\nvar peek$1 = canObservationRecorder_1_3_1_canObservationRecorder.ignore(canReflect_1_19_2_canReflect.getValue.bind(canReflect_1_19_2_canReflect));\nAsyncObservable.prototype.activate = function() {\n\tcanReflect_1_19_2_canReflect.onValue(this.observation, this.handler, \"notify\");\n\tif (!this.resolveCalled) {\n\t\tthis._value = peek$1(this.observation);\n\t}\n};\n\nAsyncObservable.prototype.resolve = function resolve(newVal) {\n\tthis.resolveCalled = true;\n\tvar old = this._value;\n\tthis._value = newVal;\n\n\t//!steal-remove-start\n\tif (process.env.NODE_ENV !== 'production') {\n\t\tif (typeof this._log === \"function\") {\n\t\t\tthis._log(old, newVal);\n\t\t}\n\t}\n\t//!steal-remove-end\n\n\t// if resolve was called synchronously from the getter, do not enqueue changes\n\t// the observation will handle calling resolve again if required\n\tif (!this.inGetter) {\n\t\tvar queuesArgs = [\n\t\tthis.handlers.getNode([]),\n\t\t\tthis,\n\t\t\t[newVal, old],\n\t\t\tnull\n\t\t];\n\t\t//!steal-remove-start\n\t\tif (process.env.NODE_ENV !== 'production') {\n\t\t\tqueuesArgs = [\n\t\t\t\tthis.handlers.getNode([]),\n\t\t\t\tthis,\n\t\t\t\t[newVal, old],\n\t\t\t\tnull\n\t\t\t\t/* jshint laxcomma: true */\n\t\t\t\t, [canReflect_1_19_2_canReflect.getName(this), \"resolved with\", newVal]\n\t\t\t\t/* jshint laxcomma: false */\n\t\t\t];\n\t\t}\n\t\t//!steal-remove-end\n\t\t// adds callback handlers to be called w/i their respective queue.\n\t\tcanQueues_1_3_2_canQueues.enqueueByQueue.apply(canQueues_1_3_2_canQueues, queuesArgs);\n\t}\n};\n\nvar async = AsyncObservable;\n\nvar getChangesSymbol$1 = canSymbol_1_7_0_canSymbol.for(\"can.getChangesDependencyRecord\");\nvar metaSymbol$1 = canSymbol_1_7_0_canSymbol.for(\"can.meta\");\n\nfunction ResolverObservable(resolver, context, initialValue, options) {\n\t// we don't want reads leaking out.  We should be binding to all of this ourselves.\n\tthis.resolver = canObservationRecorder_1_3_1_canObservationRecorder.ignore(resolver);\n\tthis.context = context;\n\tthis._valueOptions = {\n\t\tresolve: this.resolve.bind(this),\n\t\tlistenTo: this.listenTo.bind(this),\n\t\tstopListening: this.stopListening.bind(this),\n\t\tlastSet: new canSimpleObservable_2_5_0_canSimpleObservable(initialValue)\n\t};\n\n\tthis.update = this.update.bind(this);\n\n\tthis.contextHandlers = new WeakMap();\n\tthis.teardown = null;\n\t// a place holder for remembering where we bind\n\tthis.binder = {};\n\t//!steal-remove-start\n\tif (process.env.NODE_ENV !== 'production') {\n\t\tcanReflect_1_19_2_canReflect.assignSymbols(this, {\n\t\t\t\"can.getName\": function() {\n\t\t\t\treturn (\n\t\t\t\t\tcanReflect_1_19_2_canReflect.getName(this.constructor) +\n\t\t\t\t\t\"<\" +\n\t\t\t\t\tcanReflect_1_19_2_canReflect.getName(resolver) +\n\t\t\t\t\t\">\"\n\t\t\t\t);\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(this.update, \"name\", {\n\t\t\tvalue: canReflect_1_19_2_canReflect.getName(this) + \".update\"\n\t\t});\n\n\t\tcanReflect_1_19_2_canReflect.assignSymbols(this._valueOptions.lastSet, {\n\t\t\t\"can.getName\": function() {\n\t\t\t\treturn (\n\t\t\t\t\tcanReflect_1_19_2_canReflect.getName(this.constructor)  +\"::lastSet\"+\n\t\t\t\t\t\"<\" +\n\t\t\t\t\tcanReflect_1_19_2_canReflect.getName(resolver) +\n\t\t\t\t\t\">\"\n\t\t\t\t);\n\t\t\t}\n\t\t});\n\t}\n\t//!steal-remove-end\n\n\tthis[metaSymbol$1] = canReflect_1_19_2_canReflect.assignMap({}, options);\n}\nResolverObservable.prototype = Object.create(settable.prototype);\n\nfunction deleteHandler(bindTarget, event, queue, handler){\n\tmap$1.off.call(bindTarget, event, handler, queue);\n}\n\ncanReflect_1_19_2_canReflect.assignMap(ResolverObservable.prototype, {\n\tconstructor: ResolverObservable,\n\tlistenTo: function(bindTarget, event, handler, queueName) {\n\t\t//Object.defineProperty(this.handler, \"name\", {\n\t\t//\tvalue: canReflect.getName(this) + \".handler\"\n\t\t//});\n\t\tif(canReflect_1_19_2_canReflect.isPrimitive(bindTarget)) {\n\t\t\thandler = event;\n\t\t\tevent = bindTarget;\n\t\t\tbindTarget = this.context;\n\t\t}\n\t\tif(typeof event === \"function\") {\n\t\t\thandler = event;\n\t\t\tevent = undefined;\n\t\t}\n\n\t\tvar resolverInstance = this;\n\n\t\t//!steal-remove-start\n\t\tif (process.env.NODE_ENV !== 'production') {\n\t\t\tif(!handler.name) {\n\t\t\t\tObject.defineProperty(handler, \"name\", {\n\t\t\t\t\tvalue:\n\t\t\t\t\t\t(bindTarget ?\n\t\t\t\t\t\t\t canReflect_1_19_2_canReflect.getName(bindTarget) : \"\")+\n\t\t\t\t\t\t (event ? \".on('\"+event+\"',handler)\" : \".on(handler)\")+\n\t\t\t\t\t\t \"::\"+canReflect_1_19_2_canReflect.getName(this)\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\t//!steal-remove-end\n\n\t\tvar contextHandler = handler.bind(this.context);\n\t\tcontextHandler[getChangesSymbol$1] = function getChangesDependencyRecord() {\n\t\t\tvar s = new Set();\n\t\t\ts.add(resolverInstance);\n\t\t\treturn {\n\t\t\t\tvalueDependencies: s\n\t\t\t};\n\t\t};\n\n\t\tthis.contextHandlers.set(handler, contextHandler);\n\t\tmap$1.listenTo.call(this.binder, bindTarget, event, contextHandler, queueName || \"notify\");\n\t},\n\tstopListening: function(){\n\n\t\tvar meta = this.binder[canSymbol_1_7_0_canSymbol.for(\"can.meta\")];\n\t\tvar listenHandlers = meta && meta.listenHandlers;\n\t\tif(listenHandlers) {\n\t\t\tvar keys = map$1.stopListeningArgumentsToKeys.call({context: this.context, defaultQueue: \"notify\"});\n\n\t\t\tlistenHandlers.delete(keys, deleteHandler);\n\t\t}\n\t\treturn this;\n\t},\n\tresolve: function(newVal) {\n\t\tthis._value = newVal;\n\t\t// if we are setting up the initial binding and we get a resolved value\n\t\t// do not emit events for it.\n\n\t\tif(this.isBinding) {\n\t\t\tthis.lastValue = this._value;\n\t\t\treturn newVal;\n\t\t}\n\n\t\tif(this._value !== this.lastValue) {\n\t\t\tvar enqueueMeta  = {};\n\n\t\t\t//!steal-remove-start\n\t\t\tif (process.env.NODE_ENV !== 'production') {\n\t\t\t\t/* jshint laxcomma: true */\n\t\t\t\tenqueueMeta = {\n\t\t\t\t\tlog: [canReflect_1_19_2_canReflect.getName(this.update)],\n\t\t\t\t\treasonLog: [canReflect_1_19_2_canReflect.getName(this), \"resolved with\", newVal]\n\t\t\t\t};\n\t\t\t\t/* jshint laxcomma: false */\n\t\t\t}\n\t\t\t//!steal-remove-end\n\n\t\t\tcanQueues_1_3_2_canQueues.batch.start();\n\t\t\tcanQueues_1_3_2_canQueues.deriveQueue.enqueue(\n\t\t\t\tthis.update,\n\t\t\t\tthis,\n\t\t\t\t[],\n\t\t\t\tenqueueMeta\n\t\t\t);\n\t\t\tcanQueues_1_3_2_canQueues.batch.stop();\n\t\t}\n\t\treturn newVal;\n\t},\n\tupdate: function(){\n\n\t\tif(this.lastValue !== this._value) {\n\n\t\t\tvar old = this.lastValue;\n\t\t\tthis.lastValue = this._value;\n\t\t\t//!steal-remove-start\n\t\t\tif (process.env.NODE_ENV !== 'production') {\n\t\t\t\tif (typeof this._log === \"function\") {\n\t\t\t\t\tthis._log(old, this._value);\n\t\t\t\t}\n\t\t\t}\n\t\t\t//!steal-remove-end\n\n\t\t\t// adds callback handlers to be called w/i their respective queue.\n\t\t\tcanQueues_1_3_2_canQueues.enqueueByQueue(\n\t\t\t\tthis.handlers.getNode([]),\n\t\t\t\tthis,\n\t\t\t\t[this._value, old]\n\t\t\t);\n\t\t}\n\t},\n\tactivate: function() {\n\t\tthis.isBinding = true;\n\t\tthis.teardown = this.resolver.call(this.context, this._valueOptions);\n\t\tthis.isBinding = false;\n\t},\n\tonUnbound: function() {\n\t\tthis.bound = false;\n\t\tmap$1.stopListening.call(this.binder);\n\t\tif(this.teardown != null) {\n\t\t\tthis.teardown();\n\t\t\tthis.teardown = null;\n\t\t}\n\t},\n\tset: function(value) {\n\t\tthis._valueOptions.lastSet.set(value);\n\n\t\t/*if (newVal !== this.lastSetValue.get()) {\n\t\t\tthis.lastSetValue.set(newVal);\n\t\t}*/\n\t},\n\tget: function() {\n\t\tif (canObservationRecorder_1_3_1_canObservationRecorder.isRecording()) {\n\t\t\tcanObservationRecorder_1_3_1_canObservationRecorder.add(this);\n\t\t\tif (!this.bound) {\n\t\t\t\tthis.onBound();\n\t\t\t}\n\t\t}\n\n\t\tif (this.bound === true) {\n\t\t\treturn this._value;\n\t\t} else {\n\t\t\tif (this[metaSymbol$1].resetUnboundValueInGet) {\n\t\t\t\tthis._value = undefined;\n\t\t\t}\n\n\t\t\tvar handler = function(){};\n\t\t\tthis.on(handler);\n\t\t\tvar val = this._value;\n\t\t\tthis.off(handler);\n\t\t\treturn val;\n\t\t}\n\t},\n\thasDependencies: function hasDependencies() {\n\t\tvar hasDependencies = false;\n\n\t\tif (this.bound) {\n\t\t\tvar meta = this.binder[metaSymbol$1];\n\t\t\tvar listenHandlers = meta && meta.listenHandlers;\n\t\t\thasDependencies = !!listenHandlers.size();\n\t\t}\n\n\t\treturn hasDependencies;\n\t},\n\tgetValueDependencies: function getValueDependencies() {\n\t\tif (this.bound) {\n\t\t\tvar meta = this.binder[canSymbol_1_7_0_canSymbol.for(\"can.meta\")];\n\t\t\tvar listenHandlers = meta && meta.listenHandlers;\n\n\t\t\tvar keyDeps = new Map();\n\t\t\tvar valueDeps = new Set();\n\n\t\t\tif (listenHandlers) {\n\t\t\t\tcanReflect_1_19_2_canReflect.each(listenHandlers.root, function(events, obj) {\n\t\t\t\t\tcanReflect_1_19_2_canReflect.each(events, function(queues, eventName) {\n\t\t\t\t\t\tif (eventName === undefined) {\n\t\t\t\t\t\t\tvalueDeps.add(obj);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tvar entry = keyDeps.get(obj);\n\t\t\t\t\t\t\tif (!entry) {\n\t\t\t\t\t\t\t\tentry = new Set();\n\t\t\t\t\t\t\t\tkeyDeps.set(obj, entry);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tentry.add(eventName);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\n\t\t\t\tif (valueDeps.size || keyDeps.size) {\n\t\t\t\t\tvar result = {};\n\n\t\t\t\t\tif (keyDeps.size) {\n\t\t\t\t\t\tresult.keyDependencies = keyDeps;\n\t\t\t\t\t}\n\t\t\t\t\tif (valueDeps.size) {\n\t\t\t\t\t\tresult.valueDependencies = valueDeps;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n});\n\ncanReflect_1_19_2_canReflect.assignSymbols(ResolverObservable.prototype, {\n\t\"can.getValue\": ResolverObservable.prototype.get,\n\t\"can.setValue\": ResolverObservable.prototype.set,\n\t\"can.isMapLike\": false,\n\t\"can.getPriority\": function() {\n\t\t// TODO: the priority should come from any underlying values\n\t\treturn this.priority || 0;\n\t},\n\t\"can.setPriority\": function(newPriority) {\n\t\tthis.priority = newPriority;\n\t},\n\t\"can.valueHasDependencies\": ResolverObservable.prototype.hasDependencies,\n\t\"can.getValueDependencies\": ResolverObservable.prototype.getValueDependencies\n});\n\n\nvar resolver = ResolverObservable;\n\n/**\n * @module {function} can-event-queue/type/type\n * @parent can-event-queue\n *\n * @description Mixin methods and symbols to make a type constructor function able to\n * broadcast changes in its instances.\n *\n * @signature `mixinTypeBindings( type )`\n *\n * Adds symbols and methods that make `type` work with the following [can-reflect] APIs:\n *\n * - [can-reflect/observe.onInstanceBoundChange] - Observe when instances are bound.\n * - [can-reflect/observe.onInstancePatches] - Observe patche events on all instances.\n *\n * When `mixinTypeBindings` is called on an `Person` _type_ like:\n *\n * ```js\n * var mixinTypeBindings = require(\"can-event-queue/type/type\");\n * var mixinLegacyMapBindings = require(\"can-event-queue/map/map\");\n *\n * class Person {\n *   constructor(data){\n *     this.data = data;\n *   }\n * }\n * mixinTypeBindings(Person);\n * mixinLegacyMapBindings(Person.prototype);\n *\n * var me = new Person({first: \"Justin\", last: \"Meyer\"});\n *\n * // mixinTypeBindings allows you to listen to\n * // when a person instance's bind stache changes\n * canReflect.onInstanceBoundChange(Person, function(person, isBound){\n *    console.log(\"isBound\");\n * });\n *\n * // mixinTypeBindings allows you to listen to\n * // when a patch change happens.\n * canReflect.onInstancePatches(Person, function(person, patches){\n *    console.log(patches[0]);\n * });\n *\n * me.on(\"name\",function(ev, newVal, oldVal){}) //-> logs: \"isBound\"\n *\n * me.dispatch({\n *   type: \"first\",\n *   patches: [{type: \"set\", key: \"first\", value: \"Ramiya\"}]\n * }, [\"Ramiya\",\"Justin\"])\n * //-> logs: {type: \"set\", key: \"first\", value: \"Ramiya\"}\n * ```\n *\n */\n\n\n\n\n\nvar metaSymbol$2 = canSymbol_1_7_0_canSymbol.for(\"can.meta\");\n\nfunction addHandlers$1(obj, meta) {\n    if (!meta.lifecycleHandlers) {\n        meta.lifecycleHandlers = new canKeyTree_1_2_2_canKeyTree([Object, Array]);\n    }\n    if (!meta.instancePatchesHandlers) {\n        meta.instancePatchesHandlers = new canKeyTree_1_2_2_canKeyTree([Object, Array]);\n    }\n}\n\nfunction ensureMeta$2(obj) {\n    var meta = obj[metaSymbol$2];\n\n    if (!meta) {\n        meta = {};\n        canReflect_1_19_2_canReflect.setKeyValue(obj, metaSymbol$2, meta);\n    }\n\n    addHandlers$1(obj, meta);\n    return meta;\n}\n\nvar props$1 = {\n    /**\n     * @function can-event-queue/type/type.can.onInstanceBoundChange @can.onInstanceBoundChange\n     * @parent can-event-queue/type/type\n     * @description Listen to when any instance is bound for the first time or all handlers are removed.\n     *\n     * @signature `canReflect.onInstanceBoundChange(Type, handler(instance, isBound) )`\n     *\n     * ```js\n     * canReflect.onInstanceBoundChange(Person, function(person, isBound){\n     *    console.log(\"isBound\");\n     * });\n     * ```\n     *\n     * @param {function(Any,Boolean)} handler(instance,isBound) A function is called\n     * when an instance is bound or unbound.  `isBound` will be `true` when the instance\n     * becomes bound and `false` when unbound.\n     */\n\n    /**\n     * @function can-event-queue/type/type.can.offInstanceBoundChange @can.offInstanceBoundChange\n     * @parent can-event-queue/type/type\n     *\n     * @description Stop listening to when an instance's bound status changes.\n     *\n     * @signature `canReflect.offInstanceBoundChange(Type, handler )`\n     *\n     * Stop listening to a handler bound with\n     * [can-event-queue/type/type.can.onInstanceBoundChange].\n     */\n\n\n    /**\n     * @function can-event-queue/type/type.can.onInstancePatches @can.onInstancePatches\n     * @parent can-event-queue/type/type\n     *\n     * @description Listen to patch changes on any instance.\n     *\n     * @signature `canReflect.onInstancePatches(Type, handler(instance, patches) )`\n     *\n     * Listen to patch changes on any instance of `Type`. This is used by\n     * [can-connect] to know when a potentially `unbound` instance's `id`\n     * changes. If the `id` changes, the instance can be moved into the store\n     * while it is being saved.\n     *\n     */\n\n    /**\n     * @function can-event-queue/type/type.can.offInstancePatches @can.offInstancePatches\n     * @parent can-event-queue/type/type\n     *\n     * @description Stop listening to patch changes on any instance.\n     *\n     * @signature `canReflect.onInstancePatches(Type, handler )`\n     *\n     * Stop listening to a handler bound with [can-event-queue/type/type.can.onInstancePatches].\n     */\n};\n\nfunction onOffAndDispatch(symbolName, dispatchName, handlersName){\n    props$1[\"can.on\"+symbolName] = function(handler, queueName) {\n        ensureMeta$2(this)[handlersName].add([queueName || \"mutate\", handler]);\n    };\n    props$1[\"can.off\"+symbolName] = function(handler, queueName) {\n        ensureMeta$2(this)[handlersName].delete([queueName || \"mutate\", handler]);\n    };\n    props$1[\"can.\"+dispatchName] = function(instance, arg){\n        canQueues_1_3_2_canQueues.enqueueByQueue(ensureMeta$2(this)[handlersName].getNode([]), this, [instance, arg]);\n    };\n}\n\nonOffAndDispatch(\"InstancePatches\",\"dispatchInstanceOnPatches\",\"instancePatchesHandlers\");\nonOffAndDispatch(\"InstanceBoundChange\",\"dispatchInstanceBoundChange\",\"lifecycleHandlers\");\n\nfunction mixinTypeBindings(obj){\n    return canReflect_1_19_2_canReflect.assignSymbols(obj,props$1);\n}\n\nObject.defineProperty(mixinTypeBindings, \"addHandlers\", {\n    enumerable: false,\n    value: addHandlers$1\n});\n\nvar type$1 = mixinTypeBindings;\n\nvar canType_1_1_6_canType = createCommonjsModule(function (module, exports) {\nvar isMemberSymbol = canSymbol_1_7_0_canSymbol.for(\"can.isMember\");\nvar newSymbol = canSymbol_1_7_0_canSymbol.for(\"can.new\");\nvar getSchemaSymbol = canSymbol_1_7_0_canSymbol.for(\"can.getSchema\");\nvar baseTypeSymbol = canSymbol_1_7_0_canSymbol.for(\"can.baseType\");\nvar strictTypeOfSymbol = canSymbol_1_7_0_canSymbol.for(\"can.strictTypeOf\");\n\nvar type = exports;\n\nfunction makeSchema(values) {\n\treturn function(){\n\t\treturn {\n\t\t\ttype: \"Or\",\n\t\t\tvalues: values\n\t\t};\n\t};\n}\n\n// Default \"can.new\"\nfunction canNew(value) {\n\tif(this[isMemberSymbol](value)) {\n\t\treturn value;\n\t}\n\n\treturn canReflect_1_19_2_canReflect.convert(value, this[baseTypeSymbol]);\n}\n\nfunction strictNew(value) {\n\tvar isMember = this[isMemberSymbol](value);\n\tif(!isMember) {\n\t\treturn check(this[baseTypeSymbol], value);\n\t}\n\treturn value;\n}\n\n// \"can.new\" for Booleans\nfunction booleanNew(value) {\n\tif (value === \"false\" || value=== \"0\") {\n\t\treturn false;\n\t}\n\treturn Boolean(value);\n}\n\nvar maybeValues = Object.freeze([null, undefined]);\n\nfunction check(Type, val) {\n\tvar valueType = canString_1_1_0_canString.capitalize(typeof val);\n\tvar error = new Error('Type value ' + typeof val === \"string\" ? '\"' + val + '\"' : val + ' (' + valueType + ') is not of type ' + canReflect_1_19_2_canReflect.getName(Type) + '.'\t);\n\terror.type = 'can-type-error';\n\tthrow error;\n}\n\nfunction makeIsMember(Type) {\n\tif(isMemberSymbol in Type) {\n\t\treturn Type[isMemberSymbol];\n\t}\n\treturn function(value) {\n\t\treturn value instanceof Type;\n\t};\n}\n\nfunction makeBaseType(Type) {\n\tvar typeObject = {};\n\ttypeObject[newSymbol] = canNew;\n\ttypeObject[isMemberSymbol] = makeIsMember(Type);\n\ttypeObject[baseTypeSymbol] = Type;\n\ttypeObject[getSchemaSymbol] = makeSchema([Type]);\n\tType[strictTypeOfSymbol] = typeObject[strictTypeOfSymbol] = typeObject;\n\treturn typeObject;\n}\n\nfunction makePrimitiveType(Type, typeString) {\n\tvar typeObject = makeBaseType(Type);\n\tif(Type === Boolean) {\n\t\ttypeObject[newSymbol] = booleanNew;\n\t\ttypeObject[getSchemaSymbol] = makeSchema([true, false]);\n\t}\n\ttypeObject[isMemberSymbol] = function(value) {\n\t\treturn typeof value === typeString;\n\t};\n\treturn typeObject;\n}\n\nfunction getBaseType(Type) {\n\tif(typeof Type === \"function\") {\n\t\tif(canReflect_1_19_2_canReflect.hasOwnKey(Type, strictTypeOfSymbol)) {\n\t\t\treturn Type[strictTypeOfSymbol];\n\t\t}\n\t} else if(strictTypeOfSymbol in Type) {\n\t\treturn Type[strictTypeOfSymbol];\n\t}\n\treturn makeBaseType(Type);\n}\n\nfunction makeMaybe(Type) {\n\tvar isMember = Type[isMemberSymbol];\n\treturn function(value) {\n\t\treturn value == null || isMember.call(this, value);\n\t};\n}\n\nfunction makeMaybeSchema(baseType) {\n\tvar baseSchema = canReflect_1_19_2_canReflect.getSchema(baseType);\n\tvar allValues = baseSchema.values.concat(maybeValues);\n\treturn makeSchema(allValues);\n}\n\nfunction inheritFrom(o, Type, property) {\n\tif(property in Type) {\n\t\to[property] = Type[property];\n\t}\n}\n\nfunction wrapName(wrapper, Type) {\n\tvar baseName = canReflect_1_19_2_canReflect.getName(Type);\n\treturn \"type.\" + wrapper + \"(\" + baseName + \")\";\n}\n\ncanReflect_1_19_2_canReflect.each({\n\t\"boolean\": Boolean,\n\t\"number\": Number,\n\t\"string\": String\n}, function(Type, typeString) {\n\tmakePrimitiveType(Type, typeString);\n});\n\nfunction isTypeObject(Type) {\n\tif(canReflect_1_19_2_canReflect.isPrimitive(Type)) {\n\t\treturn false;\n\t}\n\n\treturn (newSymbol in Type) && (isMemberSymbol in Type);\n}\n\nfunction normalize(Type) {\n\tif(canReflect_1_19_2_canReflect.isPrimitive(Type)) {\n\t\tthrow new Error(\"can-type: Unable to normalize primitive values.\");\n\t} else if(isTypeObject(Type)) {\n\t\treturn Type;\n\t} else {\n\t\treturn type.check(Type);\n\t}\n}\n\nfunction late(fn) {\n\tvar lateType = {};\n\tvar underlyingType;\n\tvar unwrap = function() {\n\t\tunderlyingType = type.normalize(fn());\n\t\tunwrap = function() { return underlyingType; };\n\t\treturn underlyingType;\n\t};\n\treturn canReflect_1_19_2_canReflect.assignSymbols(lateType, {\n\t\t\"can.new\": function(val) {\n\t\t\treturn canReflect_1_19_2_canReflect.new(unwrap(), val);\n\t\t},\n\t\t\"can.isMember\": function(val) {\n\t\t\treturn unwrap()[isMemberSymbol](val);\n\t\t}\n\t});\n}\n\nvar Any = canReflect_1_19_2_canReflect.assignSymbols({}, {\n\t\"can.new\": function(val) { return val; },\n\t\"can.isMember\": function() { return true; }\n});\n\nfunction all(typeFn, Type) {\n\tvar typeObject = typeFn(Type);\n\ttypeObject[getSchemaSymbol] = function() {\n\t\tvar parentSchema = canReflect_1_19_2_canReflect.getSchema(Type);\n\t\tvar schema = canReflect_1_19_2_canReflect.assignMap({}, parentSchema);\n\t\tschema.keys = {};\n\t\tcanReflect_1_19_2_canReflect.eachKey(parentSchema.keys, function(value, key) {\n\t\t\tschema.keys[key] = typeFn(value);\n\t\t});\n\t\treturn schema;\n\t};\n\n\tfunction Constructor(values) {\n\t\tvar schema = canReflect_1_19_2_canReflect.getSchema(this);\n\t\tvar keys = schema.keys;\n\t\tvar convertedValues = {};\n\t\tcanReflect_1_19_2_canReflect.eachKey(values || {}, function(value, key) {\n\t\t\tconvertedValues[key] = canReflect_1_19_2_canReflect.convert(value, keys[key]);\n\t\t});\n\t\treturn canReflect_1_19_2_canReflect.new(Type, convertedValues);\n\t}\n\n\tcanReflect_1_19_2_canReflect.setName(Constructor, \"Converted<\" + canReflect_1_19_2_canReflect.getName(Type) + \">\");\n\tConstructor.prototype = typeObject;\n\n\treturn Constructor;\n}\n\nvar Integer = {};\nInteger[newSymbol] = function(value) {\n\t// parseInt(notANumber) returns NaN\n\t// Since we always want an integer returned\n\t// using |0 instead.\n\treturn value | 0;\n};\nInteger[isMemberSymbol] = function(value) {\n\t// “polyfill” for Number.isInteger because it’s not supported in IE11\n\treturn typeof value === \"number\" && isFinite(value) &&\n\t\tMath.floor(value) === value;\n};\nInteger[getSchemaSymbol] = makeSchema([Number]);\ncanReflect_1_19_2_canReflect.setName(Integer, \"Integer\");\n\nfunction makeCache(fn) {\n\tvar cache = new WeakMap();\n\treturn function(Type) {\n\t\tif(cache.has(Type)) {\n\t\t\treturn cache.get(Type);\n\t\t}\n\t\tvar typeObject = fn.call(this, Type);\n\t\tcache.set(Type, typeObject);\n\t\treturn typeObject;\n\t};\n}\n\nexports.check = makeCache(function(Type) {\n\tvar o = Object.create(getBaseType(Type));\n\to[newSymbol] = strictNew;\n\tinheritFrom(o, Type, isMemberSymbol);\n\tinheritFrom(o, Type, getSchemaSymbol);\n\tcanReflect_1_19_2_canReflect.setName(o, wrapName(\"check\", Type));\n\treturn o;\n});\n\nexports.convert = makeCache(function(Type) {\n\tvar o = Object.create(getBaseType(Type));\n\tinheritFrom(o, Type, isMemberSymbol);\n\tinheritFrom(o, Type, getSchemaSymbol);\n\tcanReflect_1_19_2_canReflect.setName(o, wrapName(\"convert\", Type));\n\treturn o;\n});\n\nexports.maybe = makeCache(function(Type) {\n\tvar baseType = getBaseType(Type);\n\tvar desc = {};\n\tdesc[newSymbol] = {\n\t\tvalue: strictNew\n\t};\n\tdesc[isMemberSymbol] = {\n\t\tvalue: makeMaybe(baseType)\n\t};\n\tdesc[getSchemaSymbol] = {\n\t\tvalue: makeMaybeSchema(baseType)\n\t};\n\tvar o = Object.create(baseType, desc);\n\tcanReflect_1_19_2_canReflect.setName(o, wrapName(\"maybe\", Type));\n\treturn o;\n});\n\nexports.maybeConvert = makeCache(function(Type) {\n\tvar baseType = getBaseType(Type);\n\tvar desc = {};\n\tdesc[isMemberSymbol] = {\n\t\tvalue: makeMaybe(baseType)\n\t};\n\tdesc[getSchemaSymbol] = {\n\t\tvalue: makeMaybeSchema(baseType)\n\t};\n\tvar o = Object.create(baseType, desc);\n\tcanReflect_1_19_2_canReflect.setName(o, wrapName(\"maybeConvert\", Type));\n\treturn o;\n});\n\n//!steal-remove-start\n// type checking should not throw in production\nif(process.env.NODE_ENV === 'production') {\n\texports.check = exports.convert;\n\texports.maybe = exports.maybeConvert;\n}\n//!steal-remove-end\n\nexports.Any = Any;\nexports.Integer = Integer;\n\nexports.late = late;\nexports.isTypeObject = isTypeObject;\nexports.normalize = normalize;\nexports.all = all;\nexports.convertAll = all.bind(null, exports.convert);\ncanNamespace_1_0_0_canNamespace.type = exports;\n});\nvar canType_1_1_6_canType_1 = canType_1_1_6_canType.check;\nvar canType_1_1_6_canType_2 = canType_1_1_6_canType.convert;\nvar canType_1_1_6_canType_3 = canType_1_1_6_canType.maybe;\nvar canType_1_1_6_canType_4 = canType_1_1_6_canType.maybeConvert;\nvar canType_1_1_6_canType_5 = canType_1_1_6_canType.Any;\nvar canType_1_1_6_canType_6 = canType_1_1_6_canType.Integer;\nvar canType_1_1_6_canType_7 = canType_1_1_6_canType.late;\nvar canType_1_1_6_canType_8 = canType_1_1_6_canType.isTypeObject;\nvar canType_1_1_6_canType_9 = canType_1_1_6_canType.normalize;\nvar canType_1_1_6_canType_10 = canType_1_1_6_canType.all;\nvar canType_1_1_6_canType_11 = canType_1_1_6_canType.convertAll;\n\nlet define; //jshint ignore:line\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst newSymbol$1 = Symbol.for(\"can.new\"),\n\tserializeSymbol = Symbol.for(\"can.serialize\"),\n\tinSetupSymbol$2 = Symbol.for(\"can.initializing\"),\n\tisMemberSymbol$1 = Symbol.for(\"can.isMember\"),\n\thasBeenDefinedSymbol = Symbol.for(\"can.hasBeenDefined\"),\n\tcanMetaSymbol = Symbol.for(\"can.meta\"),\n\tbaseTypeSymbol = Symbol.for(\"can.baseType\");\n\nlet eventsProto,\n\tmake, makeDefinition, getDefinitionsAndMethods, getDefinitionOrMethod;\n\n// UTILITIES\nfunction isDefineType(func){\n\treturn func && (func.canDefineType === true || func[newSymbol$1] );\n}\n\nfunction observableType() {\n\tthrow new Error(\"This is not currently implemented.\");\n}\n\nlet AsyncFunction;\nconst browserSupportsAsyncFunctions = (function() {\n\ttry {\n\t\tAsyncFunction = (async function(){}).constructor;\n\t\treturn true;\n\t} catch(e) {\n\t\treturn false;\n\t}\n}());\nfunction isAsyncFunction(fn) {\n\tif (!browserSupportsAsyncFunctions) {\n\t\treturn false;\n\t}\n\treturn fn && fn instanceof AsyncFunction;\n}\n\nconst peek$2 = canObservationRecorder_1_3_1_canObservationRecorder.ignore(canReflect_1_19_2_canReflect.getValue.bind(canReflect_1_19_2_canReflect));\n\nlet Object_defineNamedPrototypeProperty = Object.defineProperty;\n//!steal-remove-start\nif(process.env.NODE_ENV !== 'production') {\n\tObject_defineNamedPrototypeProperty = function(obj, prop, definition) {\n\t\tif (definition.get) {\n\t\t\tObject.defineProperty(definition.get, \"name\", {\n\t\t\t\tvalue: \"get \"+canReflect_1_19_2_canReflect.getName(obj) + \".\"+prop,\n\t\t\t\twritable: true,\n\t\t\t\tconfigurable: true\n\t\t\t});\n\t\t}\n\t\tif (definition.set) {\n\t\t\tObject.defineProperty(definition.set, \"name\", {\n\t\t\t\tvalue:  \"set \"+canReflect_1_19_2_canReflect.getName(obj) + \".\"+prop,\n\t\t\t\tconfigurable: true\n\t\t\t});\n\t\t}\n\t\treturn Object.defineProperty(obj, prop, definition);\n\t};\n}\n//!steal-remove-end\n\n\nfunction defineConfigurableAndNotEnumerable(obj, prop, value) {\n\tObject.defineProperty(obj, prop, {\n\t\tconfigurable: true,\n\t\tenumerable: false,\n\t\twritable: true,\n\t\tvalue: value\n\t});\n}\n\nfunction defineNotWritableAndNotEnumerable(obj, prop, value) {\n\tObject.defineProperty(obj, prop, {\n\t\tvalue: value,\n\t\tenumerable: false,\n\t\twritable: false\n\t});\n}\n\nfunction eachPropertyDescriptor(map, cb, ...args){\n\tfor(const prop of Object.getOwnPropertyNames(map)) {\n\t\tif(map.hasOwnProperty(prop)) {\n\t\t\tcb.call(map, prop, Object.getOwnPropertyDescriptor(map, prop), ...args);\n\t\t}\n\t}\n}\n\nfunction getEveryPropertyAndSymbol(obj) {\n\tconst props = Object.getOwnPropertyNames(obj);\n\tconst symbols = (\"getOwnPropertySymbols\" in Object) ?\n\t  Object.getOwnPropertySymbols(obj) : [];\n\treturn props.concat(symbols);\n}\n\nvar define_1 = define = function(typePrototype, defines, baseDefine, propertyDefaults = {}) {\n\t// default property definitions on _data\n\tlet prop,\n\t\tdataInitializers = Object.create(baseDefine ? baseDefine.dataInitializers : null),\n\t\t// computed property definitions on _computed\n\t\tcomputedInitializers = Object.create(baseDefine ? baseDefine.computedInitializers : null),\n\t\trequired = new Set();\n\n\tconst result = getDefinitionsAndMethods(defines, baseDefine, typePrototype, propertyDefaults);\n\tresult.dataInitializers = dataInitializers;\n\tresult.computedInitializers = computedInitializers;\n\tresult.required = required;\n\n\t// Goes through each property definition and creates\n\t// a `getter` and `setter` function for `Object.defineProperty`.\n\tcanReflect_1_19_2_canReflect.eachKey(result.definitions, function(definition, property){\n\t\t// Add this as a required property\n\t\tif(definition.required === true) {\n\t\t\trequired.add(property);\n\t\t}\n\n\t\tdefine.property(typePrototype, property, definition, dataInitializers, computedInitializers, result.defaultDefinition);\n\t});\n\n\t// Places a `_data` on the prototype that when first called replaces itself\n\t// with a `_data` object local to the instance.  It also defines getters\n\t// for any value that has a default value.\n\tif(typePrototype.hasOwnProperty(\"_data\")) {\n\t\tfor (prop in dataInitializers) {\n\t\t\tcanDefineLazyValue_1_1_1_defineLazyValue(typePrototype._data, prop, dataInitializers[prop].bind(typePrototype), true);\n\t\t}\n\t} else {\n\t\tcanDefineLazyValue_1_1_1_defineLazyValue(typePrototype, \"_data\", function() {\n\t\t\tconst map = this;\n\t\t\tconst data = {};\n\t\t\tfor (const prop in dataInitializers) {\n\t\t\t\tcanDefineLazyValue_1_1_1_defineLazyValue(data, prop, dataInitializers[prop].bind(map), true);\n\t\t\t}\n\t\t\treturn data;\n\t\t});\n\t}\n\n\t// Places a `_computed` on the prototype that when first called replaces itself\n\t// with a `_computed` object local to the instance.  It also defines getters\n\t// that will create the property's compute when read.\n\tif(typePrototype.hasOwnProperty(\"_computed\")) {\n\t\tfor (prop in computedInitializers) {\n\t\t\tcanDefineLazyValue_1_1_1_defineLazyValue(typePrototype._computed, prop, computedInitializers[prop].bind(typePrototype));\n\t\t}\n\t} else {\n\t\tcanDefineLazyValue_1_1_1_defineLazyValue(typePrototype, \"_computed\", function() {\n\t\t\tconst map = this;\n\t\t\tconst data = Object.create(null);\n\t\t\tfor (const prop in computedInitializers) {\n\t\t\t\tcanDefineLazyValue_1_1_1_defineLazyValue(data, prop, computedInitializers[prop].bind(map));\n\t\t\t}\n\t\t\treturn data;\n\t\t});\n\t}\n\n\t// Add necessary event methods to this object.\n\tgetEveryPropertyAndSymbol(eventsProto).forEach(function(prop){\n\t\tObject.defineProperty(typePrototype, prop, {\n\t\t\tenumerable: false,\n\t\t\tvalue: eventsProto[prop],\n\t\t\tconfigurable: true,\n\t\t\twritable: true\n\t\t});\n\t});\n\t// also add any symbols\n\t// add so instance defs can be dynamically added\n\tObject.defineProperty(typePrototype,\"_define\",{\n\t\tenumerable: false,\n\t\tvalue: result,\n\t\tconfigurable: true,\n\t\twritable: true\n\t});\n\n\t// Places Symbol.iterator or @@iterator on the prototype\n\t// so that this can be iterated with for/of and canReflect.eachIndex\n\tconst iteratorSymbol = Symbol.iterator || Symbol.for(\"iterator\");\n\tif(!typePrototype[iteratorSymbol]) {\n\t\tdefineConfigurableAndNotEnumerable(typePrototype, iteratorSymbol, function(){\n\t\t\treturn new define.Iterator(this);\n\t\t});\n\t}\n\n\treturn result;\n};\n\nconst onlyType = function(obj){\n\tfor(const prop in obj) {\n\t\tif(prop !== \"type\") {\n\t\t\treturn false;\n\t\t}\n\t}\n\treturn true;\n};\n\nconst callAsync = function(fn) {\n\treturn function asyncResolver(lastSet, resolve){\n\t\tlet newValue = fn.call(this, resolve, lastSet);\n\n\t\t// This should really be happening in can-simple-observable/async/\n\t\t// But that would be a breaking change so putting it here.\n\t\tif(canReflect_1_19_2_canReflect.isPromise(newValue)) {\n\t\t\tnewValue.then(resolve);\n\t\t\treturn undefined;\n\t\t}\n\n\t\treturn newValue;\n\t};\n};\n\ndefine.extensions = function () {};\n\ndefine.isEnumerable = function(definition) {\n\treturn typeof definition !== \"object\" ||\n\t\t(\"serialize\" in definition ?\n\t\t\t!!definition.serialize :\n\t\t\t(!definition.get && !definition.async && !definition.value));\n};\n\n// typePrototype - the prototype of the type we are defining `prop` on.\n// `definition` - the user provided definition\ndefine.property = function(typePrototype, prop, definition, dataInitializers, computedInitializers, defaultDefinition) {\n\tconst propertyDefinition = define.extensions.apply(this, arguments);\n\n\tif (propertyDefinition) {\n\t\tdefinition = makeDefinition(prop, propertyDefinition, defaultDefinition || {}, typePrototype);\n\t}\n\n\tconst type = definition.type;\n\n\t//!steal-remove-start\n\tif(process.env.NODE_ENV !== 'production') {\n\t\tif(!definition.set && definition.get && definition.get.length === 0 && ( \"default\" in definition ) ) {\n\t\t\tdev.warn(\"can-observable-object: default value for property \" +\n\t\t\t\t\tcanReflect_1_19_2_canReflect.getName(typePrototype)+\".\"+ prop +\n\t\t\t\t\t\" ignored, as its definition has a zero-argument getter and no setter\");\n\t\t}\n\n\tif(!definition.set && definition.get && definition.get.length === 0 && ( definition.type && definition.type !== defaultDefinition.type ) ) {\n\t\t\tdev.warn(\"can-observable-object: type value for property \" +\n\t\t\t\t\tcanReflect_1_19_2_canReflect.getName(typePrototype)+\".\"+ prop +\n\t\t\t\t\t\" ignored, as its definition has a zero-argument getter and no setter\");\n\t\t}\n\t}\n\n\tfor (let defFuncProp of ['get', 'set', 'value']) {\n\t\tconst propType = definition[defFuncProp] && typeof definition[defFuncProp];\n\t\tif (propType && propType !== 'function') {\n\t\t\tdev.error(`can-observable-object: \"${defFuncProp}\" for property ${canReflect_1_19_2_canReflect.getName(typePrototype)}.${prop}` +\n\t\t\t\t` is expected to be a function, but it's a ${propType}.`);\n\t\t\treturn;\n\t\t}\n\t}\n\t//!steal-remove-end\n\n\t// Special case definitions that have only `type: \"*\"`.\n\tif (type && onlyType(definition) && type === type.Any) {\n\t\tObject_defineNamedPrototypeProperty(typePrototype, prop, {\n\t\t\tget: make.get.data(prop),\n\t\t\tset: make.set.events(prop, make.get.data(prop), make.set.data(prop), make.eventType.data(prop)),\n\t\t\tenumerable: true,\n\t\t\tconfigurable: true\n\t\t});\n\t\treturn;\n\t}\n\tdefinition.type = type;\n\n\t// Where the value is stored.  If there is a `get` the source of the value\n\t// will be a compute in `this._computed[prop]`.  If not, the source of the\n\t// value will be in `this._data[prop]`.\n\tlet dataProperty = definition.get || definition.async || definition.value ? \"computed\" : \"data\",\n\n\t\t// simple functions that all read/get/set to the right place.\n\t\t// - reader - reads the value but does not observe.\n\t\t// - getter - reads the value and notifies observers.\n\t\t// - setter - sets the value.\n\t\treader = make.read[dataProperty](prop),\n\t\tgetter = make.get[dataProperty](prop),\n\t\tsetter = make.set[dataProperty](prop),\n\t\tgetInitialValue;\n\n\t//!steal-remove-start\n\tif(process.env.NODE_ENV !== 'production') {\n\t\tif (definition.get) {\n\t\t\tObject.defineProperty(definition.get, \"name\", {\n\t\t\t\tvalue: canReflect_1_19_2_canReflect.getName(typePrototype) + \"'s \" + prop + \" getter\",\n\t\t\t\tconfigurable: true\n\t\t\t});\n\t\t}\n\t\tif (definition.set) {\n\t\t\tObject.defineProperty(definition.set, \"name\", {\n\t\t\t\tvalue: canReflect_1_19_2_canReflect.getName(typePrototype) + \"'s \" + prop + \" setter\",\n\t\t\t\tconfigurable: true\n\t\t\t});\n\t\t}\n\t\tif(definition.value) {\n\t\t\tObject.defineProperty(definition.value, \"name\", {\n\t\t\t\tvalue: canReflect_1_19_2_canReflect.getName(typePrototype) + \"'s \" + prop + \" value\",\n\t\t\t\tconfigurable: true\n\t\t\t});\n\t\t}\n\t}\n\t//!steal-remove-end\n\n\t// Determine the type converter\n\tlet typeConvert = function(val) {\n\t\treturn val;\n\t};\n\n\tif (type) {\n\t\ttypeConvert = make.set.type(prop, type, typeConvert);\n\t}\n\n\t// make a setter that's going to fire of events\n\tconst eventsSetter = make.set.events(prop, reader, setter, make.eventType[dataProperty](prop));\n\tif(definition.value) {\n\t\tcomputedInitializers[prop] = make.resolver(prop, definition, typeConvert);\n\t}\n\t// Determine a function that will provide the initial property value.\n\telse if (definition.default !== undefined) {\n\n\t\t//!steal-remove-start\n\t\tif (process.env.NODE_ENV !== 'production') {\n\t\t\t// If value is an object or array, give a warning\n\t\t\tif (definition.default !== null && typeof definition.default === 'object') {\n\t\t\t\tdev.warn(\"can-observable-object: The default value for \" + canReflect_1_19_2_canReflect.getName(typePrototype)+\".\"+prop + \" is set to an object. This will be shared by all instances of the DefineMap. Use a function that returns the object instead.\");\n\t\t\t}\n\t\t\t// If value is a constructor, give a warning\n\t\t\tif (definition.default && canReflect_1_19_2_canReflect.isConstructorLike(definition.default)) {\n\t\t\t\tdev.warn(\"can-observable-object: The \\\"default\\\" for \" + canReflect_1_19_2_canReflect.getName(typePrototype)+\".\"+prop + \" is set to a constructor. Did you mean \\\"Default\\\" instead?\");\n\t\t\t}\n\t\t}\n\t\t//!steal-remove-end\n\n\t\tgetInitialValue = canObservationRecorder_1_3_1_canObservationRecorder.ignore(make.get.defaultValue(prop, definition, typeConvert, eventsSetter));\n\t}\n\n\t// If property has a getter, create the compute that stores its data.\n\tif (definition.get) {\n\t\tcomputedInitializers[prop] = make.compute(prop, definition.get, getInitialValue);\n\t}\n\telse if (definition.async) {\n\t\tcomputedInitializers[prop] = make.compute(prop, callAsync(definition.async), getInitialValue);\n\t}\n\t// If the property isn't a getter, but has an initial value, setup a\n\t// default value on `this._data[prop]`.\n\telse if (getInitialValue) {\n\t\tdataInitializers[prop] = getInitialValue;\n\t}\n\n\t// Define setter behavior.\n\n\t// If there's a `get` and `set`, make the setter get the `lastSetValue` on the\n\t// `get`'s compute.\n\tif (definition.get && definition.set) {\n\t\t// the compute will set off events, so we can use the basic setter\n\t\tsetter = make.set.setter(prop, definition.set, make.read.lastSet(prop), setter, true);\n\t}\n\t// If there's a `set` and no `get`,\n\telse if (definition.set) {\n\t\t// Add `set` functionality to the eventSetter.\n\t\tsetter = make.set.setter(prop, definition.set, reader, eventsSetter, false);\n\t}\n\t// If there's neither `set` or `get` or `value` (resolver)\n\telse if (dataProperty === \"data\") {\n\t\t// make a set that produces events.\n\t\tsetter = eventsSetter;\n\t}\n\t// If there's zero-arg `get` but not `set`, warn on all sets in dev mode\n\telse if (definition.get && definition.get.length < 1) {\n\t\tsetter = function() {\n\t\t\t//!steal-remove-start\n\t\t\tif(process.env.NODE_ENV !== 'production') {\n\t\t\t\tdev.warn(\"can-observable-object: Set value for property \" +\n\t\t\t\t\tcanReflect_1_19_2_canReflect.getName(typePrototype)+\".\"+ prop +\n\t\t\t\t\t\" ignored, as its definition has a zero-argument getter and no setter\");\n\t\t\t}\n\t\t\t//!steal-remove-end\n\t\t};\n\t}\n\n\t// Add type behavior to the setter.\n\tif (type) {\n\t\tsetter = make.set.type(prop, type, setter);\n\t}\n\n\t// Define the property.\n\tObject_defineNamedPrototypeProperty(typePrototype, prop, {\n\t\tget: getter,\n\t\tset: setter,\n\t\tenumerable: define.isEnumerable(definition),\n\t\tconfigurable: true\n\t});\n};\n\ndefine.makeDefineInstanceKey = function(constructor) {\n\tconstructor[Symbol.for(\"can.defineInstanceKey\")] = function(property, value) {\n\t\tdefine.hooks.finalizeClass(this);\n\t\tconst defineResult = this.prototype._define;\n\t\tif(value && typeof value.value !== \"undefined\") {\n\t\t\tvalue.default = value.value;\n\t\t\tvalue.type = canType_1_1_6_canType.Any;\n\t\t\tdelete value.value;\n\t\t}\n\t\tconst definition = getDefinitionOrMethod(property, value, defineResult.defaultDefinition, this);\n\t\tif(definition && typeof definition === \"object\") {\n\t\t\tdefine.property(this.prototype, property, definition, defineResult.dataInitializers, defineResult.computedInitializers, defineResult.defaultDefinition);\n\t\t\tdefineResult.definitions[property] = definition;\n\t\t} else {\n\t\t\tdefineResult.methods[property] = definition;\n\t\t}\n\n\t\tthis.prototype.dispatch({\n\t\t\taction: \"can.keys\",\n\t\t\ttype: \"can.keys\",\n\t\t\ttarget: this.prototype\n\t\t});\n\t};\n};\n\n// Makes a simple constructor function.\ndefine.Constructor = function(defines, sealed) {\n\tconst constructor = function DefineConstructor(props) {\n\t\tObject.defineProperty(this, inSetupSymbol$2, {\n\t\t\tconfigurable: true,\n\t\t\tenumerable: false,\n\t\t\tvalue: true,\n\t\t\twritable: true\n\t\t});\n\t\tdefine.setup.call(this, props, sealed);\n\t\tthis[inSetupSymbol$2] = false;\n\t};\n\tconst result = define(constructor.prototype, defines);\n\ttype$1(constructor);\n\tdefine.makeDefineInstanceKey(constructor, result);\n\treturn constructor;\n};\n\n// A bunch of helper functions that are used to create various behaviors.\nmake = {\n\tcomputeObj: function(map, prop, observable) {\n\t\tconst computeObj = {\n\t\t\toldValue: undefined,\n\t\t\tcompute: observable,\n\t\t\tcount: 0,\n\t\t\thandler: function(newVal) {\n\t\t\t\tlet oldValue = computeObj.oldValue;\n\t\t\t\tcomputeObj.oldValue = newVal;\n\n\t\t\t\tmap.dispatch({\n\t\t\t\t\taction: \"prop\",\n\t\t\t\t\tkey: prop,\n\t\t\t\t\tvalue: newVal,\n\t\t\t\t\toldValue: oldValue,\n\t\t\t\t\ttype: prop,\n\t\t\t\t\ttarget: map\n\t\t\t\t}, [newVal, oldValue]);\n\t\t\t}\n\t\t};\n\t\treturn computeObj;\n\t},\n\tresolver: function(prop, definition, typeConvert) {\n\t\tconst getDefault = make.get.defaultValue(prop, definition, typeConvert);\n\t\treturn function(){\n\t\t\tconst map = this;\n\t\t\tconst defaultValue = getDefault.call(this);\n\t\t\tconst computeObj = make.computeObj(map, prop, new resolver(definition.value, map, defaultValue, {\n\t\t\t\tresetUnboundValueInGet: true\n\t\t\t}));\n\t\t\t//!steal-remove-start\n\t\t\tif(process.env.NODE_ENV !== 'production') {\n\t\t\t\tObject.defineProperty(computeObj.handler, \"name\", {\n\t\t\t\t\tvalue: canReflect_1_19_2_canReflect.getName(definition.value).replace('value', 'event emitter')\n\t\t\t\t});\n\t\t\t}\n\t\t\t//!steal-remove-end\n\t\t\treturn computeObj;\n\t\t};\n\t},\n\t// Returns a function that creates the `_computed` prop.\n\tcompute: function(prop, get, defaultValueFn) {\n\n\t\treturn function() {\n\t\t\tconst map = this;\n\t\t\tconst defaultValue = defaultValueFn && defaultValueFn.call(this);\n\t\t\tlet observable, computeObj;\n\n\t\t\tif(get.length === 0) {\n\t\t\t\tobservable = new canObservation_4_2_0_canObservation(get, map);\n\t\t\t} else if(get.length === 1) {\n\t\t\t\tobservable = new settable(get, map, defaultValue);\n\t\t\t} else {\n\t\t\t\tobservable = new async(get, map, defaultValue);\n\t\t\t}\n\n\t\t\tcomputeObj = make.computeObj(map, prop, observable);\n\n\t\t\t//!steal-remove-start\n\t\t\tif(process.env.NODE_ENV !== 'production') {\n\t\t\t\tObject.defineProperty(computeObj.handler, \"name\", {\n\t\t\t\t\tvalue: canReflect_1_19_2_canReflect.getName(get).replace('getter', 'event emitter')\n\t\t\t\t});\n\t\t\t}\n\t\t\t//!steal-remove-end\n\n\t\t\treturn computeObj;\n\t\t};\n\t},\n\t// Set related helpers.\n\tset: {\n\t\tdata: function(prop) {\n\t\t\treturn function(newVal) {\n\t\t\t\tthis._data[prop] = newVal;\n\t\t\t};\n\t\t},\n\t\tcomputed: function(prop) {\n\t\t\treturn function(val) {\n\t\t\t\tcanReflect_1_19_2_canReflect.setValue( this._computed[prop].compute, val );\n\t\t\t};\n\t\t},\n\t\tevents: function(prop, getCurrent, setData/*, eventType*/) {\n\t\t\treturn function(newVal) {\n\t\t\t\tif (this[inSetupSymbol$2]) {\n\t\t\t\t\tsetData.call(this, newVal);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tconst current = getCurrent.call(this);\n\t\t\t\t\tif (newVal !== current) {\n\t\t\t\t\t\tlet dispatched;\n\t\t\t\t\t\tsetData.call(this, newVal);\n\n\t\t\t\t\t\tdispatched = {\n\t\t\t\t\t\t\tpatches: [{type: \"set\", key: prop, value: newVal}],\n\t\t\t\t\t\t\taction: \"prop\",\n\t\t\t\t\t\t\tkey: prop,\n\t\t\t\t\t\t\tvalue: newVal,\n\t\t\t\t\t\t\toldValue: current,\n\t\t\t\t\t\t\ttype: prop,\n\t\t\t\t\t\t\ttarget: this\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\t//!steal-remove-start\n\t\t\t\t\t\tif(process.env.NODE_ENV !== 'production') {\n\t\t\t\t\t\t\tdispatched.reasonLog = [ canReflect_1_19_2_canReflect.getName(this) + \"'s\", prop, \"changed to\", newVal, \"from\", current ];\n\t\t\t\t\t\t}\n\t\t\t\t\t\t//!steal-remove-end\n\n\t\t\t\t\t\tthis.dispatch(dispatched, [newVal, current]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t},\n\t\teventDispatcher: function(map, prop, current, newVal) {\n\t\t\tif (map[inSetupSymbol$2]) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif (newVal !== current) {\n\t\t\t\t\tconst dispatched = {\n\t\t\t\t\t\tpatches: [{type: \"set\", key: prop, value: newVal}],\n\t\t\t\t\t\taction: \"prop\",\n\t\t\t\t\t\tkey: prop,\n\t\t\t\t\t\tvalue: newVal,\n\t\t\t\t\t\toldValue: current,\n\t\t\t\t\t\ttype: prop,\n\t\t\t\t\t\ttarget: map\n\t\t\t\t\t};\n\n\t\t\t\t\t//!steal-remove-start\n\t\t\t\t\tif(process.env.NODE_ENV !== 'production') {\n\t\t\t\t\t\tdispatched.reasonLog = [ canReflect_1_19_2_canReflect.getName(this) + \"'s\", prop, \"changed to\", newVal, \"from\", current ];\n\t\t\t\t\t}\n\t\t\t\t\t//!steal-remove-end\n\n\t\t\t\t\tmap$1.dispatch.call(map, dispatched, [newVal, current]);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tsetter: function(prop, setter, getCurrent, setEvents, hasGetter) {\n\t\t\treturn function(value) {\n\t\t\t\t//!steal-remove-start\n\t\t\t\tvar asyncTimer;\n\t\t\t\t//!steal-remove-end\n\n\t\t\t\tconst self = this;\n\n\t\t\t\t// call the setter, if returned value is undefined,\n\t\t\t\t// this means the setter is async so we\n\t\t\t\t// do not call update property and return right away\n\n\t\t\t\tcanQueues_1_3_2_canQueues.batch.start();\n\t\t\t\tconst setterCalled = false,\n\t\t\t\t\tcurrent = getCurrent.call(this),\n\t\t\t\t\tsetValue = setter.call(this, value, current);\n\n\t\t\t\tif (setterCalled) {\n\t\t\t\t\tcanQueues_1_3_2_canQueues.batch.stop();\n\t\t\t\t} else {\n\t\t\t\t\tif (hasGetter) {\n\t\t\t\t\t\t// we got a return value\n\t\t\t\t\t\tif (setValue !== undefined) {\n\t\t\t\t\t\t\t// if the current `set` value is returned, don't set\n\t\t\t\t\t\t\t// because current might be the `lastSetVal` of the internal compute.\n\t\t\t\t\t\t\tif (current !== setValue) {\n\t\t\t\t\t\t\t\tsetEvents.call(this, setValue);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tcanQueues_1_3_2_canQueues.batch.stop();\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// this is a side effect, it didn't take a value\n\t\t\t\t\t\t// so use the original set value\n\t\t\t\t\t\telse if (setter.length === 0) {\n\t\t\t\t\t\t\tsetEvents.call(this, value);\n\t\t\t\t\t\t\tcanQueues_1_3_2_canQueues.batch.stop();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// it took a value\n\t\t\t\t\t\telse if (setter.length === 1) {\n\t\t\t\t\t\t\t// if we have a getter, and undefined was returned,\n\t\t\t\t\t\t\t// we should assume this is setting the getters properties\n\t\t\t\t\t\t\t// and we shouldn't do anything.\n\t\t\t\t\t\t\tcanQueues_1_3_2_canQueues.batch.stop();\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// we are expecting something\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t//!steal-remove-start\n\t\t\t\t\t\t\tif(process.env.NODE_ENV !== 'production') {\n\t\t\t\t\t\t\t\tasyncTimer = setTimeout(function() {\n\t\t\t\t\t\t\t\t\tdev.warn('can-observable-object: Setter \"' + canReflect_1_19_2_canReflect.getName(self)+\".\"+prop + '\" did not return a value or call the setter callback.');\n\t\t\t\t\t\t\t\t}, dev.warnTimeout);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t//!steal-remove-end\n\t\t\t\t\t\t\tcanQueues_1_3_2_canQueues.batch.stop();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// we got a return value\n\t\t\t\t\t\tif (setValue !== undefined) {\n\t\t\t\t\t\t\t// if the current `set` value is returned, don't set\n\t\t\t\t\t\t\t// because current might be the `lastSetVal` of the internal compute.\n\t\t\t\t\t\t\tsetEvents.call(this, setValue);\n\t\t\t\t\t\t\tcanQueues_1_3_2_canQueues.batch.stop();\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// this is a side effect, it didn't take a value\n\t\t\t\t\t\t// so use the original set value\n\t\t\t\t\t\telse if (setter.length === 0) {\n\t\t\t\t\t\t\tsetEvents.call(this, value);\n\t\t\t\t\t\t\tcanQueues_1_3_2_canQueues.batch.stop();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// it took a value\n\t\t\t\t\t\telse if (setter.length === 1) {\n\t\t\t\t\t\t\t// if we don't have a getter, we should probably be setting the\n\t\t\t\t\t\t\t// value to undefined\n\t\t\t\t\t\t\tsetEvents.call(this, undefined);\n\t\t\t\t\t\t\tcanQueues_1_3_2_canQueues.batch.stop();\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// we are expecting something\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t//!steal-remove-start\n\t\t\t\t\t\t\tif(process.env.NODE_ENV !== 'production') {\n\t\t\t\t\t\t\t\tasyncTimer = setTimeout(function() {\n\t\t\t\t\t\t\t\t\tdev.warn('can/map/setter.js: Setter \"' + canReflect_1_19_2_canReflect.getName(self)+\".\"+prop + '\" did not return a value or call the setter callback.');\n\t\t\t\t\t\t\t\t}, dev.warnTimeout);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t//!steal-remove-end\n\t\t\t\t\t\t\tcanQueues_1_3_2_canQueues.batch.stop();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t},\n\t\ttype: function(prop, type, set) {\n\t\t\tfunction setter(newValue) {\n\t\t\t\treturn set.call(this, type.call(this, newValue, prop));\n\t\t\t}\n\t\t\tif(isDefineType(type)) {\n\t\t\t\t// TODO: remove this `canDefineType` check in a future release.\n\t\t\t\tif(type.canDefineType) {\n\t\t\t\t\treturn setter;\n\t\t\t\t} else {\n\t\t\t\t\treturn function setter(newValue){\n\t\t\t\t\t\t//!steal-remove-start\n\t\t\t\t\t\tif(process.env.NODE_ENV !== 'production') {\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\treturn set.call(this, canReflect_1_19_2_canReflect.convert(newValue, type));\n\t\t\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\t\t\tif (error.type === 'can-type-error') {\n\t\t\t\t\t\t\t\t\tconst typeName = canReflect_1_19_2_canReflect.getName(type[baseTypeSymbol]);\n\t\t\t\t\t\t\t\t\tconst valueType = typeof newValue;\n\t\t\t\t\t\t\t\t\tlet message  = '\"' + newValue + '\"' +  ' ('+ valueType + ') is not of type ' + typeName + '. Property ' + prop + ' is using \"type: ' + typeName + '\". ';\n\t\t\t\t\t\t\t\t\tmessage += 'Use \"' + prop + ': type.convert(' + typeName + ')\" to automatically convert values to ' + typeName + 's when setting the \"' + prop + '\" property.';\n\t\t\t\t\t\t\t\t\terror.message = message;\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tthrow error;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t//!steal-remove-end\n\t\t\t\t\t\treturn set.call(this, canReflect_1_19_2_canReflect.convert(newValue, type));\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn setter;\n\t\t}\n\t},\n\t// Helpes that indicate what the event type should be.  These probably aren't needed.\n\teventType: {\n\t\tdata: function(prop) {\n\t\t\treturn function(newVal, oldVal) {\n\t\t\t\treturn oldVal !== undefined || this._data.hasOwnProperty(prop) ? \"set\" : \"add\";\n\t\t\t};\n\t\t},\n\t\tcomputed: function() {\n\t\t\treturn function() {\n\t\t\t\treturn \"set\";\n\t\t\t};\n\t\t}\n\t},\n\t// Helpers that read the data in a non-observable way.\n\tread: {\n\t\tdata: function(prop) {\n\t\t\treturn function() {\n\t\t\t\treturn this._data[prop];\n\t\t\t};\n\t\t},\n\t\tcomputed: function(prop) {\n\t\t\t// might want to protect this\n\t\t\treturn function() {\n\t\t\t\treturn canReflect_1_19_2_canReflect.getValue( this._computed[prop].compute );\n\t\t\t};\n\t\t},\n\t\tlastSet: function(prop) {\n\t\t\treturn function() {\n\t\t\t\tconst observable = this._computed[prop].compute;\n\t\t\t\tif(observable.lastSetValue) {\n\t\t\t\t\treturn canReflect_1_19_2_canReflect.getValue(observable.lastSetValue);\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t},\n\t// Helpers that read the data in an observable way.\n\tget: {\n\t\t// uses the default value\n\t\tdefaultValue: function(prop, definition, typeConvert, callSetter) {\n\t\t\treturn function() {\n\t\t\t\tlet value = definition.default;\n\t\t\t\tif (value !== undefined) {\n\t\t\t\t\t// call `get default() { ... }` but not `default() { ... }`\n\t\t\t\t\tif (typeof value === \"function\" && value.isAGetter) {\n\t\t\t\t\t\tvalue = value.call(this);\n\t\t\t\t\t}\n\t\t\t\t\tvalue = typeConvert.call(this, value);\n\t\t\t\t}\n\t\t\t\tif(definition.set) {\n\t\t\t\t\t// TODO: there's almost certainly a faster way of making this happen\n\t\t\t\t\t// But this is maintainable.\n\n\t\t\t\t\tlet VALUE;\n\t\t\t\t\tlet sync = true;\n\n\t\t\t\t\tconst setter = make.set.setter(prop, definition.set, function(){}, function(value){\n\t\t\t\t\t\tif(sync) {\n\t\t\t\t\t\t\tVALUE = value;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tcallSetter.call(this, value);\n\t\t\t\t\t\t}\n\t\t\t\t\t}, definition.get);\n\n\t\t\t\t\tsetter.call(this,value);\n\t\t\t\t\tsync = false;\n\n\t\t\t\t\t// VALUE will be undefined if the callback is never called.\n\t\t\t\t\treturn VALUE;\n\n\n\t\t\t\t}\n\t\t\t\treturn value;\n\t\t\t};\n\t\t},\n\t\tdata: function(prop) {\n\t\t\treturn function() {\n\t\t\t\tif (!this[inSetupSymbol$2]) {\n\t\t\t\t\tcanObservationRecorder_1_3_1_canObservationRecorder.add(this, prop);\n\t\t\t\t}\n\n\t\t\t\treturn this._data[prop];\n\t\t\t};\n\t\t},\n\t\tcomputed: function(prop) {\n\t\t\treturn function(/*val*/) {\n\t\t\t\tconst compute = this._computed[prop].compute;\n\t\t\t\tif (canObservationRecorder_1_3_1_canObservationRecorder.isRecording()) {\n\t\t\t\t\tcanObservationRecorder_1_3_1_canObservationRecorder.add(this, prop);\n\t\t\t\t\tif (!canReflect_1_19_2_canReflect.isBound(compute)) {\n\t\t\t\t\t\tcanObservation_4_2_0_canObservation.temporarilyBind(compute);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn peek$2(compute);\n\t\t\t};\n\t\t}\n\t}\n};\n\ndefine.behaviors = [\"get\", \"set\", \"value\", \"type\", \"serialize\"];\n\n// This cleans up a particular behavior and adds it to the definition\nconst addBehaviorToDefinition = function(definition, behavior, descriptor, def, prop, typePrototype) {\n\tif(behavior === \"enumerable\") {\n\t\t// treat enumerable like serialize\n\t\tdefinition.serialize = !!def[behavior];\n\t}\n\telse if(behavior === \"type\") {\n\t\tconst behaviorDef = def[behavior];\n\t\tif (typeof behaviorDef !== 'undefined') {\n\t\t\tdefinition[behavior] = behaviorDef;\n\t\t}\n\t}\n\telse {\n\t\t// This is a good place to do warnings? This gets called for every behavior\n\t\t// Both by .define() and .property()\n\t\tconst value = descriptor.get || descriptor.value;\n\t\tif (descriptor.get) {\n\t\t\tvalue.isAGetter = true;\n\t\t}\n\t\tif(behavior === \"async\") {\n\t\t\tif(value.length === 1 && isAsyncFunction(value)) {\n\t\t\t\tdev.warn(`${canReflect_1_19_2_canReflect.getName(typePrototype)}: async property [${prop}] should not be an async function and also use the resolve() argument. Remove the argument and return a value from the async function instead.`);\n\t\t\t}\n\t\t}\n\n\t\tdefinition[behavior] = value;\n\t}\n};\n\n// This is called by `define.property` AND `getDefinitionOrMethod` (which is called by `define`)\n// Currently, this is adding default behavior\n// copying `type` over, and even cleaning up the final definition object\nmakeDefinition = function(prop, def, defaultDefinition, typePrototype) {\n\tlet definition = {};\n\n\teachPropertyDescriptor(def, function(behavior, descriptor) {\n\t\taddBehaviorToDefinition(definition, behavior, descriptor, def, prop, typePrototype);\n\t});\n\t// only add default if it doesn't exist\n\tcanReflect_1_19_2_canReflect.eachKey(defaultDefinition, function(value, prop){\n\t\tif(definition[prop] === undefined) {\n\t\t\tif(prop !== \"type\") {\n\t\t\t\tdefinition[prop] = value;\n\t\t\t}\n\t\t}\n\t});\n\n\tif (def.type) {\n\t\tconst value = def.type;\n\t\tconst serialize = value[serializeSymbol];\n\t\tif(serialize) {\n\t\t\tdefinition.serialize = function(val){\n\t\t\t\treturn serialize.call(val);\n\t\t\t};\n\t\t}\n\t\tdefinition.type = canType_1_1_6_canType.normalize(value);\n\t}\n\n\tconst noTypeDefined = !definition.type && (!defaultDefinition.type ||\n\t\tdefaultDefinition.type && defaultDefinition.typeSetByDefault);\n\n\tif (definition.hasOwnProperty(\"default\")) {\n\t\tif (typeof definition.default === \"function\" && !definition.default.isAGetter && noTypeDefined) {\n\t\t\tdefinition.type = canType_1_1_6_canType.normalize(Function);\n\t\t}\n\n\t\tif (canReflect_1_19_2_canReflect.isPrimitive(definition.default) && noTypeDefined) {\n\t\t\tif (definition.default === null || typeof definition.default === 'undefined') {\n\t\t\t\tdefinition.type = canType_1_1_6_canType.Any;\n\t\t\t} else {\n\t\t\t\tdefinition.type = canType_1_1_6_canType.normalize(definition.default.constructor);\n\t\t\t}\n\t\t}\n\t}\n\n\t// if there's no type definition, take it from the defaultDefinition\n\tif(!definition.type) {\n\t\tconst defaultsCopy = canReflect_1_19_2_canReflect.assignMap({}, defaultDefinition);\n\t\tdefinition = canReflect_1_19_2_canReflect.assignMap(defaultsCopy, definition);\n\t}\n\n\tif(canReflect_1_19_2_canReflect.size(definition) === 0) {\n\t\tdefinition.type = canType_1_1_6_canType.Any;\n\t\t// `setByDefault` indicates that the default type can be\n\t\t// overridden by an inferred type\n\t\tdefinition.typeSetByDefault = true;\n\t}\n\n\treturn definition;\n};\n\n// called by `can.defineInstanceKey` and `getDefinitionsAndMethods`\n// returns the value or the definition object.\n// calls makeDefinition\n// This is dealing with a string value\ngetDefinitionOrMethod = function(prop, value, defaultDefinition, typePrototype){\n\t// Clean up the value to make it a definition-like object\n\tlet definition;\n\tlet definitionType;\n\tif(canReflect_1_19_2_canReflect.isPrimitive(value)) {\n\t\tif (value === null || typeof value === 'undefined') {\n\t\t\tdefinitionType = canType_1_1_6_canType.Any;\n\t\t} else {\n\t\t\t// only include type from defaultDefininition\n\t\t\t// if it came from propertyDefaults\n\t\t\tdefinitionType = defaultDefinition.typeSetByDefault ?\n\t\t\t\tcanType_1_1_6_canType.normalize(value.constructor) :\n\t\t\t\tdefaultDefinition.type;\n\t\t}\n\t\tdefinition = {\n\t\t\tdefault: value,\n\t\t\ttype: definitionType\n\t\t};\n\t}\n    // copies a `Type`'s methods over\n\telse if(value && (value[serializeSymbol] || value[newSymbol$1]) ) {\n\t\tif(value[isMemberSymbol$1]) {\n\t\t\tdefinition = { type: value };\n\t\t} else {\n\t\t\tdefinition = { type: canType_1_1_6_canType.normalize(value) };\n\t\t}\n\t}\n\telse if(typeof value === \"function\") {\n\t\tif(canReflect_1_19_2_canReflect.isConstructorLike(value)) {\n\t\t\tdefinition = { type: canType_1_1_6_canType.normalize(value) };\n\t\t} else {\n\t\t\tdefinition = { default: value, type: Function };\n\t\t}\n\t} else if( Array.isArray(value) ) {\n\t\tdefinition = { type: canType_1_1_6_canType.normalize(Array) };\n\t} else if( canReflect_1_19_2_canReflect.isPlainObject(value) ){\n\t\tdefinition = value;\n\t}\n\n\tif(definition) {\n\t\treturn makeDefinition(prop, definition, defaultDefinition, typePrototype);\n\t}\n\telse {\n\t\treturn value;\n\t}\n};\n// called by can.define\ngetDefinitionsAndMethods = function(defines, baseDefines, typePrototype, propertyDefaults) {\n\t// make it so the definitions include base definitions on the proto\n\tconst definitions = Object.create(baseDefines ? baseDefines.definitions : null);\n\tlet methods = {};\n\t// first lets get a default if it exists\n\tlet defaultDefinition;\n\tif(propertyDefaults) {\n\t\tdefaultDefinition = getDefinitionOrMethod(\"*\", propertyDefaults, {}, typePrototype);\n\t} else {\n\t\tdefaultDefinition = Object.create(null);\n\t}\n\n\tfunction addDefinition(prop, propertyDescriptor, skipGetDefinitionForMethods) {\n\t\tlet value;\n\t\tif(propertyDescriptor.get || propertyDescriptor.set) {\n\t\t\tvalue = { get: propertyDescriptor.get, set: propertyDescriptor.set };\n\t\t} else {\n\t\t\tvalue = propertyDescriptor.value;\n\t\t}\n\n\t\tif(prop === \"constructor\" || skipGetDefinitionForMethods && typeof value === \"function\") {\n\t\t\tmethods[prop] = value;\n\t\t\treturn;\n\t\t} else {\n\t\t\tconst result = getDefinitionOrMethod(prop, value, defaultDefinition, typePrototype);\n\t\t\tconst resultType = typeof result;\n\t\t\tif(result && resultType === \"object\" && canReflect_1_19_2_canReflect.size(result) > 0) {\n\t\t\t\tdefinitions[prop] = result;\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// Removed adding raw values that are not functions\n\t\t\t\tif (resultType === \"function\") {\n\t\t\t\t\tmethods[prop] = result;\n\t\t\t\t}\n\t\t\t\t//!steal-remove-start\n\t\t\t\telse if (resultType !== 'undefined') {\n\t\t\t\t\tif(process.env.NODE_ENV !== 'production') {\n\t\t\t\t\t\t// Ex: {prop: 0}\n\t\t\t\t\t\tdev.error(canReflect_1_19_2_canReflect.getName(typePrototype)+\".\"+prop + \" does not match a supported definitionObject. See: https://canjs.com/doc/can-observable-object/object.types.definitionObject.html\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t//!steal-remove-end\n\t\t\t}\n\t\t}\n\t}\n\n\teachPropertyDescriptor(typePrototype, addDefinition, true);\n\teachPropertyDescriptor(defines, addDefinition);\n\tif(propertyDefaults) {\n\t\t// we should move this property off the prototype.\n\t\tdefineConfigurableAndNotEnumerable(defines, \"*\", propertyDefaults);\n\t}\n\treturn { definitions: definitions, methods: methods, defaultDefinition: defaultDefinition };\n};\n\neventsProto = map$1({});\n\nfunction setupComputed(instance, eventName) {\n\tconst computedBinding = instance._computed && instance._computed[eventName];\n\tif (computedBinding && computedBinding.compute) {\n\t\tif (!computedBinding.count) {\n\t\t\tcomputedBinding.count = 1;\n\t\t\tcanReflect_1_19_2_canReflect.onValue(computedBinding.compute, computedBinding.handler, \"notify\");\n\t\t\tcomputedBinding.oldValue = peek$2(computedBinding.compute);\n\t\t} else {\n\t\t\tcomputedBinding.count++;\n\t\t}\n\n\t}\n}\nfunction teardownComputed(instance, eventName){\n\tconst computedBinding = instance._computed && instance._computed[eventName];\n\tif (computedBinding) {\n\t\tif (computedBinding.count === 1) {\n\t\t\tcomputedBinding.count = 0;\n\t\t\tcanReflect_1_19_2_canReflect.offValue(computedBinding.compute, computedBinding.handler,\"notify\");\n\t\t} else {\n\t\t\tcomputedBinding.count--;\n\t\t}\n\t}\n}\n\ncanAssign_1_3_3_canAssign(eventsProto, {\n\t_eventSetup: function() {},\n\t_eventTeardown: function() {},\n\taddEventListener: function(eventName/*, handler, queue*/) {\n\t\tsetupComputed(this, eventName);\n\t\treturn map$1.addEventListener.apply(this, arguments);\n\t},\n\n\t// ### unbind\n\t// Stops listening to an event.\n\t// If this is the last listener of a computed property,\n\t// stop forwarding events of the computed property to this map.\n\tremoveEventListener: function(eventName/*, handler*/) {\n\t\tteardownComputed(this, eventName);\n\t\treturn map$1.removeEventListener.apply(this, arguments);\n\n\t}\n});\neventsProto.on = eventsProto.bind = eventsProto.addEventListener;\neventsProto.off = eventsProto.unbind = eventsProto.removeEventListener;\n\n\nconst onKeyValueSymbol$2 = Symbol.for(\"can.onKeyValue\");\nconst offKeyValueSymbol$1 = Symbol.for(\"can.offKeyValue\");\n\ncanReflect_1_19_2_canReflect.assignSymbols(eventsProto,{\n\t\"can.onKeyValue\": function(key){\n\t\tsetupComputed(this, key);\n\t\treturn map$1[onKeyValueSymbol$2].apply(this, arguments);\n\t},\n\t\"can.offKeyValue\": function(key){\n\t\tteardownComputed(this, key);\n\t\treturn map$1[offKeyValueSymbol$1].apply(this, arguments);\n\t}\n});\n\ndelete eventsProto.one;\n\ndefine.finalizeInstance = function() {\n\tdefineNotWritableAndNotEnumerable(this, \"constructor\", this.constructor);\n\tdefineNotWritableAndNotEnumerable(this, canMetaSymbol, Object.create(null));\n};\n\ndefine.setup = function(props, sealed) {\n\tconst requiredButNotProvided = new Set(this._define.required);\n\tconst definitions = this._define.definitions;\n\tconst instanceDefinitions = Object.create(null);\n\tconst map = this;\n\tcanReflect_1_19_2_canReflect.eachKey(props, function(value, prop){\n\t\tif(requiredButNotProvided.has(prop)) {\n\t\t\trequiredButNotProvided.delete(prop);\n\t\t}\n\t\tif(definitions[prop] !== undefined) {\n\t\t\tmap[prop] = value;\n\t\t} else {\n\t\t\tif(sealed) {\n\t\t\t\tthrow new Error(`The type ${canReflect_1_19_2_canReflect.getName(map.constructor)} is sealed, but the property [${prop}] has no definition.`);\n\t\t\t}\n\n\t\t\tdefine.expando(map, prop, value);\n\t\t}\n\t});\n\tif(canReflect_1_19_2_canReflect.size(instanceDefinitions) > 0) {\n\t\tdefineConfigurableAndNotEnumerable(this, \"_instanceDefinitions\", instanceDefinitions);\n\t}\n\tif(requiredButNotProvided.size) {\n\t\tlet msg;\n\t\tconst missingProps = Array.from(requiredButNotProvided);\n\t\tlet thisName = canReflect_1_19_2_canReflect.getName(this);\n\t\tif(requiredButNotProvided.size === 1) {\n\t\t\tmsg = `${thisName}: Missing required property [${missingProps[0]}].`;\n\t\t} else {\n\t\t\tmsg = `${thisName}: Missing required properties [${missingProps.join(\", \")}].`;\n\t\t}\n\n\t\tthrow new Error(msg);\n\t}\n};\n\n\nconst returnFirstArg = function(arg){\n\treturn arg;\n};\n\n// TODO Why is this exported, does it need to be?\ndefine.normalizeTypeDefinition = canType_1_1_6_canType.normalize;\n\ndefine.expando = function(map, prop, value) {\n\tif(define._specialKeys[prop]) {\n\t\t// ignores _data and _computed\n\t\treturn true;\n\t}\n\t// first check if it's already a constructor define\n\tconst constructorDefines = map._define.definitions;\n\tif(constructorDefines && constructorDefines[prop]) {\n\t\treturn;\n\t}\n\t// next if it's already on this instances\n\tlet instanceDefines = map._instanceDefinitions;\n\tif(!instanceDefines) {\n\t\tif(Object.isSealed(map)) {\n\t\t\tlet errorMessage = `Cannot set property [${prop}] on sealed instance of ${canReflect_1_19_2_canReflect.getName(map)}`;\n\t\t\tthrow new Error(errorMessage);\n\t\t}\n\t\tObject.defineProperty(map, \"_instanceDefinitions\", {\n\t\t\tconfigurable: true,\n\t\t\tenumerable: false,\n\t\t\twritable: true,\n\t\t\tvalue: {}\n\t\t});\n\t\tinstanceDefines = map._instanceDefinitions;\n\t}\n\tif(!instanceDefines[prop]) {\n\t\tconst defaultDefinition = map._define.defaultDefinition || { type: observableType };\n\t\tdefine.property(map, prop, defaultDefinition, {},{});\n\t\t// possibly convert value to List or DefineMap\n\t\tif(defaultDefinition.type) {\n\t\t\tmap._data[prop] = define.make.set.type(prop, defaultDefinition.type, returnFirstArg).call(map, value);\n\t\t} else {\n\t\t\tmap._data[prop] = observableType(value);\n\t\t}\n\n\t\tinstanceDefines[prop] = defaultDefinition;\n\t\tif(!map[inSetupSymbol$2]) {\n\t\t\tcanQueues_1_3_2_canQueues.batch.start();\n\t\t\tmap.dispatch({\n\t\t\t\taction: \"can.keys\",\n\t\t\t\ttype: \"can.keys\",\n\t\t\t\ttarget: map\n\t\t\t});\n\t\t\tif(Object.prototype.hasOwnProperty.call(map._data, prop)) {\n\t\t\t\tmap.dispatch({\n\t\t\t\t\taction: \"add\",\n\t\t\t\t\tkey: prop,\n\t\t\t\t\ttype: prop,\n\t\t\t\t\tvalue: map._data[prop],\n\t\t\t\t\ttarget: map,\n\t\t\t\t\tpatches: [{type: \"add\", key: prop, value: map._data[prop]}],\n\t\t\t\t},[map._data[prop], undefined]);\n\t\t\t} else {\n\t\t\t\tmap.dispatch({\n\t\t\t\t\taction: \"set\",\n\t\t\t\t\ttype: \"set\",\n\t\t\t\t\tvalue: map._data[prop],\n\t\t\t\t\ttarget: map,\n\t\t\t\t\tpatches: [{type: \"add\", key: prop, value: map._data[prop]}],\n\t\t\t\t},[map._data[prop], undefined]);\n\t\t\t}\n\t\t\tcanQueues_1_3_2_canQueues.batch.stop();\n\t\t}\n\t\treturn true;\n\t}\n};\ndefine.replaceWith = canDefineLazyValue_1_1_1_defineLazyValue;\ndefine.eventsProto = eventsProto;\ndefine.defineConfigurableAndNotEnumerable = defineConfigurableAndNotEnumerable;\ndefine.make = make;\ndefine.getDefinitionOrMethod = getDefinitionOrMethod;\ndefine._specialKeys = {_data: true, _computed: true};\nlet simpleGetterSetters = {};\ndefine.makeSimpleGetterSetter = function(prop){\n\tif(simpleGetterSetters[prop] === undefined) {\n\n\t\tconst setter = make.set.events(prop, make.get.data(prop), make.set.data(prop), make.eventType.data(prop) );\n\n\t\tsimpleGetterSetters[prop] = {\n\t\t\tget: make.get.data(prop),\n\t\t\tset: function(newVal){\n\t\t\t\treturn setter.call(this, observableType(newVal));\n\t\t\t},\n\t\t\tenumerable: true,\n            configurable: true\n\t\t};\n\t}\n\treturn simpleGetterSetters[prop];\n};\n\ndefine.Iterator = function(obj){\n\tthis.obj = obj;\n\tthis.definitions = Object.keys(obj._define.definitions);\n\tthis.instanceDefinitions = obj._instanceDefinitions ?\n\t\tObject.keys(obj._instanceDefinitions) :\n\t\tObject.keys(obj);\n\tthis.hasGet = typeof obj.get === \"function\";\n};\n\ndefine.Iterator.prototype.next = function(){\n\tlet key;\n\tif(this.definitions.length) {\n\t\tkey = this.definitions.shift();\n\n\t\t// Getters should not be enumerable\n\t\tconst def = this.obj._define.definitions[key];\n\t\tif(def.get) {\n\t\t\treturn this.next();\n\t\t}\n\t} else if(this.instanceDefinitions.length) {\n\t\tkey = this.instanceDefinitions.shift();\n\t} else {\n\t\treturn {\n\t\t\tvalue: undefined,\n\t\t\tdone: true\n\t\t};\n\t}\n\n\treturn {\n\t\tvalue: [\n\t\t\tkey,\n\t\t\tthis.hasGet ? this.obj.get(key) : this.obj[key]\n\t\t],\n\t\tdone: false\n\t};\n};\n\ndefine.updateSchemaKeys = function(schema, definitions) {\n\tfor(const prop in definitions) {\n\t\tconst definition = definitions[prop];\n\t\tif(definition.serialize !== false ) {\n\t\t\tif(definition.type) {\n\t\t\t\tschema.keys[prop] = definition.type;\n\t\t\t} else {\n\t\t\t\tschema.keys[prop] = function(val){ return val; };\n\t\t\t}\n\t\t\t // some unknown type\n\t\t\tif(definitions[prop].identity === true) {\n\t\t\t\tschema.identity.push(prop);\n\t\t\t}\n\t\t}\n\t}\n\treturn schema;\n};\n\n\ndefine.hooks = {\n\tfinalizeClass: function(Type) {\n\t\tlet hasBeenDefined = Type.hasOwnProperty(hasBeenDefinedSymbol);\n\t\tif(!hasBeenDefined) {\n\t\t\tlet prototypeObject = Type.prototype;\n\t\t\t// check for `static props = {}`\n\t\t\t// fall back to `static define = {}` if `props` doesn't exist\n\t\t\tlet defines = typeof Type.props === \"object\" ?\n\t\t\t\tType.props :\n\t\t\t\ttypeof Type.define === \"object\" ?\n\t\t\t\t\tType.define :\n\t\t\t\t\t{};\n\t\t\tdefine(prototypeObject, defines, null, Type.propertyDefaults);\n\t\t\tType[hasBeenDefinedSymbol] = true;\n\t\t}\n\t},\n\tinitialize: function(instance, props) {\n\t\tconst firstInitialize = !instance.hasOwnProperty(canMetaSymbol);\n\t\tconst sealed = instance.constructor.seal;\n\n\t\tif (firstInitialize) {\n\t\t\tdefine.finalizeInstance.call(instance);\n\t\t}\n\n\t\tif (!instance[canMetaSymbol].initialized) {\n\t\t\tdefineConfigurableAndNotEnumerable(instance, inSetupSymbol$2, true);\n\n\t\t\tdefine.setup.call(instance, props, sealed);\n\n\t\t\t// set inSetup to false so events can be dispatched\n\t\t\tinstance[inSetupSymbol$2] = false;\n\n\t\t\t// set instance as initialized so this is only called once\n\t\t\tinstance[canMetaSymbol].initialized = true;\n\t\t}\n\n\t\t// only seal in dev mode for performance reasons.\n\t\t//!steal-remove-start\n\t\tif(process.env.NODE_ENV !== 'production') {\n\t\t\t// only seal the first time initialize is called\n\t\t\t// even if meta.initialized is reset to false\n\t\t\tif (firstInitialize) {\n\t\t\t\t/* jshint -W030 */\n\t\t\t\tinstance._data;\n\t\t\t\tinstance._computed;\n\t\t\t\tif(sealed === true) {\n\t\t\t\t\tObject.seal(instance);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t//!steal-remove-end\n\t},\n\texpando: define.expando,\n\tnormalizeTypeDefinition: canType_1_1_6_canType.normalize //define.normalizeTypeDefinition\n};\n\n// Ensure the \"obj\" passed as an argument has an object on @@can.meta\nvar ensureMeta$3 = function ensureMeta(obj) {\n\tconst metaSymbol = Symbol.for(\"can.meta\");\n\tlet meta = obj[metaSymbol];\n\n\tif (!meta) {\n\t\tmeta = {};\n\t\tcanReflect_1_19_2_canReflect.setKeyValue(obj, metaSymbol, meta);\n\t}\n\n\treturn meta;\n};\n\n/*jshint -W079 */\n\n\n\n\n\n\nconst defineHelpers = {\n\t// returns `true` if the value was defined and set\n\tdefineExpando: define_1.expando,\n\treflectSerialize: function(unwrapped){\n\t\tconst constructorDefinitions = this._define.definitions;\n\t\tconst defaultDefinition = this._define.defaultDefinition;\n\t\tthis.forEach(function(val, name){\n\t\t\tconst propDef = constructorDefinitions[name];\n\n\t\t\tif(propDef && typeof propDef.serialize === \"function\") {\n\t\t\t\tval = propDef.serialize.call(this, val, name);\n\t\t\t}\n\t\t\telse if(defaultDefinition && typeof defaultDefinition.serialize === \"function\") {\n\t\t\t\tval =  defaultDefinition.serialize.call(this, val, name);\n\t\t\t} else {\n\t\t\t\tval = canReflect_1_19_2_canReflect.serialize(val);\n\t\t\t}\n\t\t\tif(val !== undefined) {\n\t\t\t\tunwrapped[name] = val;\n\t\t\t}\n\t\t}, this);\n\t\treturn unwrapped;\n\t},\n\treflectUnwrap: function(unwrapped){\n\t\tthis.forEach(function(value, key){\n\t\t\tif(value !== undefined) {\n\t\t\t\tunwrapped[key] = canReflect_1_19_2_canReflect.unwrap(value);\n\t\t\t}\n\t\t});\n\t\treturn unwrapped;\n\t},\n\tlog: function(key) {\n\t\tconst instance = this;\n\n\t\tconst quoteString = function quoteString(x) {\n\t\t\treturn typeof x === \"string\" ? JSON.stringify(x) : x;\n\t\t};\n\n\t\tconst meta = ensureMeta$3(instance);\n\t\tconst allowed = meta.allowedLogKeysSet || new Set();\n\t\tmeta.allowedLogKeysSet = allowed;\n\n\t\tif (key) {\n\t\t\tallowed.add(key);\n\t\t}\n\n\t\tmeta._log = function(event, data) {\n\t\t\tconst type = event.type;\n\n\t\t\tif (\n\t\t\t\ttype === \"can.onPatches\" || (key && !allowed.has(type)) ||\n\t\t\t\ttype === \"can.keys\" || (key && !allowed.has(type))\n\t\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (type === \"add\" || type === \"remove\") {\n\t\t\t\tdev.log(\n\t\t\t\t\tcanReflect_1_19_2_canReflect.getName(instance),\n\t\t\t\t\t\"\\n how   \", quoteString(type),\n\t\t\t\t\t\"\\n what  \", quoteString(data[0]),\n\t\t\t\t\t\"\\n index \", quoteString(data[1])\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\t// log `length` and `propertyName` events\n\t\t\t\tdev.log(\n\t\t\t\t\tcanReflect_1_19_2_canReflect.getName(instance),\n\t\t\t\t\t\"\\n key \", quoteString(type),\n\t\t\t\t\t\"\\n is  \", quoteString(data[0]),\n\t\t\t\t\t\"\\n was \", quoteString(data[1])\n\t\t\t\t);\n\t\t\t}\n\t\t};\n\t},\n\tdeleteKey: function(prop){\n\t\tconst instanceDefines = this._instanceDefinitions;\n\t\tif(instanceDefines && Object.prototype.hasOwnProperty.call(instanceDefines, prop) && !Object.isSealed(this)) {\n\t\t\tdelete instanceDefines[prop];\n\t\t\tdelete this[prop];\n\t\t\tcanQueues_1_3_2_canQueues.batch.start();\n\t\t\tthis.dispatch({\n\t\t\t\taction: \"can.keys\",\n\t\t\t\ttype: \"can.keys\",\n\t\t\t\ttarget: this\n\t\t\t});\n\t\t\tconst oldValue = this._data[prop];\n\t\t\tif(oldValue !== undefined) {\n\t\t\t\tdelete this._data[prop];\n\t\t\t\t//delete this[prop];\n\t\t\t\tthis.dispatch({\n\t\t\t\t\taction: \"delete\",\n\t\t\t\t\tkey: prop,\n\t\t\t\t\toldValue: oldValue,\n\t\t\t\t\ttype: prop,\n\t\t\t\t\ttarget: this,\n\t\t\t\t\tpatches: [{type: \"delete\", key: prop}],\n\t\t\t\t},[undefined,oldValue]);\n\t\t\t}\n\t\t\tcanQueues_1_3_2_canQueues.batch.stop();\n\t\t} else {\n\t\t\tthis.set(prop, undefined);\n\t\t}\n\t\treturn this;\n\t}\n};\n\nvar defineHelpers_1 = defineHelpers;\n\nconst { updateSchemaKeys, hooks, isEnumerable } = define_1;\n\n\n\n\n\n\n\nconst getSchemaSymbol$1 = Symbol.for(\"can.getSchema\");\n\nfunction keysForDefinition(definitions) {\n\tconst keys = [];\n\tfor(let prop in definitions) {\n\t\tif(isEnumerable(definitions[prop])) {\n\t\t\tkeys.push(prop);\n\t\t}\n\t}\n\treturn keys;\n}\n\nfunction assign(source) {\n\tcanQueues_1_3_2_canQueues.batch.start();\n\tcanReflect_1_19_2_canReflect.assignMap(this, source || {});\n\tcanQueues_1_3_2_canQueues.batch.stop();\n}\nfunction update(source) {\n\tcanQueues_1_3_2_canQueues.batch.start();\n\tif (canReflect_1_19_2_canReflect.isListLike(source)) {\n\t\tcanReflect_1_19_2_canReflect.updateList(this, source);\n\t} else {\n\t\tcanReflect_1_19_2_canReflect.updateMap(this, source || {});\n\t}\n\tcanQueues_1_3_2_canQueues.batch.stop();\n}\nfunction assignDeep(source){\n\tcanQueues_1_3_2_canQueues.batch.start();\n\t// TODO: we should probably just throw an error instead of cleaning\n\tcanReflect_1_19_2_canReflect.assignDeepMap(this, source || {});\n\tcanQueues_1_3_2_canQueues.batch.stop();\n}\nfunction updateDeep(source){\n\tcanQueues_1_3_2_canQueues.batch.start();\n\tif (canReflect_1_19_2_canReflect.isListLike(source)) {\n\t\tcanReflect_1_19_2_canReflect.updateDeepList(this, source);\n\t} else {\n\t\t// TODO: we should probably just throw an error instead of cleaning\n\t\tcanReflect_1_19_2_canReflect.updateDeepMap(this, source || {});\n\t}\n\tcanQueues_1_3_2_canQueues.batch.stop();\n}\nfunction setKeyValue(key, value) {\n\tconst defined = defineHelpers_1.defineExpando(this, key, value);\n\tif(!defined) {\n\t\tthis[key] = value;\n\t}\n}\nfunction getKeyValue(key) {\n\tconst value = this[key];\n\tif(value !== undefined || key in this || Object.isSealed(this)) {\n\t\treturn value;\n\t} else {\n\t\tcanObservationRecorder_1_3_1_canObservationRecorder.add(this, key);\n\t\treturn this[key];\n\t}\n}\n\nvar mixinMapprops = function(Type) {\n\treturn class extends Type {\n\t\tstatic [getSchemaSymbol$1]() {\n\t\t\thooks.finalizeClass(this);\n\t\t\tlet def = this.prototype._define;\n\t\t\tlet definitions = def ? def.definitions : {};\n\t\t\tlet schema = {\n\t\t\t\ttype: \"map\",\n\t\t\t\tidentity: [],\n\t\t\t\tkeys: {}\n\t\t\t};\n\t\t\treturn updateSchemaKeys(schema, definitions);\n\t\t}\n\n\t\tget(prop){\n\t\t\tif(prop) {\n\t\t\t\treturn getKeyValue.call(this, prop);\n\t\t\t} else {\n\t\t\t\treturn canReflect_1_19_2_canReflect.unwrap(this, Map);\n\t\t\t}\n\t\t}\n\n\t\tset(prop, value){\n\t\t\tif(typeof prop === \"object\") {\n\t\t\t\t//!steal-remove-start\n\t\t\t\tif(process.env.NODE_ENV !== 'production') {\n\t\t\t\t\tdev.warn('can-define/map/map.prototype.set is deprecated; please use can-define/map/map.prototype.assign or can-define/map/map.prototype.update instead');\n\t\t\t\t}\n\t\t\t\t//!steal-remove-end\n\t\t\t\tif(value === true) {\n\t\t\t\t\tupdateDeep.call(this, prop);\n\t\t\t\t} else {\n\t\t\t\t\tassignDeep.call(this, prop);\n\t\t\t\t}\n\n\t\t\t} else {\n\t\t\t\tsetKeyValue.call(this, prop, value);\n\t\t\t}\n\n\t\t\treturn this;\n\t\t}\n\n\t\tassignDeep(prop) {\n\t\t\tassignDeep.call(this, prop);\n\t\t\treturn this;\n\t\t}\n\n\t\tupdateDeep(prop) {\n\t\t\tupdateDeep.call(this, prop);\n\t\t\treturn this;\n\t\t}\n\n\t\tassign(prop) {\n\t\t\tassign.call(this, prop);\n\t\t\treturn this;\n\t\t}\n\n\t\tupdate(prop) {\n\t\t\tupdate.call(this, prop);\n\t\t\treturn this;\n\t\t}\n\n\t\tserialize () {\n\t\t\treturn canReflect_1_19_2_canReflect.serialize(this, Map);\n\t\t}\n\n\t\tdeleteKey() {\n\t\t\treturn defineHelpers_1.deleteKey.apply(this, arguments);\n\t\t}\n\n\t\tforEach(cb, thisarg, observe) {\n\t\t\tfunction forEach(list, cb, thisarg){\n\t\t\t\treturn canReflect_1_19_2_canReflect.eachKey(list, cb, thisarg);\n\t\t\t}\n\n\t\t\tif(observe === false) {\n\t\t\t\tcanObservationRecorder_1_3_1_canObservationRecorder.ignore(forEach)(this, cb, thisarg);\n\t\t\t} else {\n\t\t\t\treturn forEach(this, cb, thisarg);\n\t\t\t}\n\t\t}\n\n\t\tstatic [Symbol.for(\"can.new\")](...args) {\n\t\t\treturn new this(...args);\n\t\t}\n\n\t\tget [Symbol.for(\"can.isMapLike\")]() {\n\t\t\treturn true;\n\t\t}\n\n\t\tget [Symbol.for(\"can.isListLike\")]() {\n\t\t\treturn false;\n\t\t}\n\n\t\tget [Symbol.for(\"can.isValueLike\")]() {\n\t\t\treturn false;\n\t\t}\n\n\t\t[Symbol.for(\"can.getKeyValue\")](...args) {\n\t\t\treturn getKeyValue.apply(this, args);\n\t\t}\n\n\t\t[Symbol.for(\"can.deleteKeyValue\")](...args) {\n\t\t\treturn defineHelpers_1.deleteKey.call(this, ...args);\n\t\t}\n\n\t\t[Symbol.for(\"can.getOwnKeys\")]() {\n\t\t\tconst keys = canReflect_1_19_2_canReflect.getOwnEnumerableKeys(this);\n\t\t\tif(this._computed) {\n\t\t\t\tconst computedKeys = canReflect_1_19_2_canReflect.getOwnKeys(this._computed);\n\n\t\t\t\tlet key;\n\t\t\t\tfor (let i=0; i<computedKeys.length; i++) {\n\t\t\t\t\tkey = computedKeys[i];\n\t\t\t\t\tif (keys.indexOf(key) < 0) {\n\t\t\t\t\t\tkeys.push(key);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn keys;\n\t\t}\n\n\t\t[Symbol.for(\"can.getOwnEnumerableKeys\")]() {\n\t\t\tcanObservationRecorder_1_3_1_canObservationRecorder.add(this, 'can.keys');\n\t\t\tcanObservationRecorder_1_3_1_canObservationRecorder.add(Object.getPrototypeOf(this), 'can.keys');\n\t\t\treturn keysForDefinition(this._define.definitions).concat(keysForDefinition(this._instanceDefinitions) );\n\t\t}\n\n\t\t[Symbol.for(\"can.serialize\")](...args) {\n\t\t\treturn defineHelpers_1.reflectSerialize.apply(this, args);\n\t\t}\n\n\t\t[Symbol.for(\"can.unwrap\")](...args) {\n\t\t\treturn defineHelpers_1.reflectUnwrap.apply(this, args);\n\t\t}\n\n\t\t[Symbol.for(\"can.hasKey\")](key) {\n\t\t\treturn (key in this._define.definitions) || (this._instanceDefinitions !== undefined && key in this._instanceDefinitions);\n\t\t}\n\n\t\t[Symbol.for(\"can.updateDeep\")](...args) {\n\t\t\treturn this.updateDeep(...args);\n\t\t}\n\t};\n};\n\nconst eventDispatcher = define_1.make.set.eventDispatcher;\nconst inSetupSymbol$3 = canSymbol_1_7_0_canSymbol.for(\"can.initializing\");\n\n\n\n// A bug in Safari means that __proto__ key is sent. This causes problems\n// When addEventListener is called on a non-element.\n// https://github.com/tc39/test262/pull/2203\nlet isProtoReadOnSuper = false;\n(function(){\n\tif(typeof Proxy === \"function\") {\n\t\tlet par = class { fn() { } };\n\t\tlet base = new Proxy(par, {\n\t\t\tget(t, k, r) {\n\t\t\t\tif(k === \"__proto__\") { isProtoReadOnSuper = true; }\n\t\t\t\treturn Reflect.get(t, k, r);\n\t\t\t}\n\t\t});\n\t\tlet chi = class extends base { fn() { super.fn(); } };\n\t\t(new chi()).fn();\n\t}\n})();\n\nlet wasLogged = false;\nfunction logNotSupported() {\n\tif (!wasLogged && (typeof Proxy !== \"function\")) {\n\t\twasLogged = true;\n\t\tdev.warn(\"can-observable-mixin/mixin-proxy requires ES Proxies which are not supported by your JS runtime.\");\n\t}\n}\n\nfunction proxyPrototype(Base) {\n\tconst instances = new WeakSet();\n\n\tfunction LateDefined() {\n\t\t//!steal-remove-start\n\t\tif(process.env.NODE_ENV !== \"production\") {\n\t\t\tlogNotSupported();\n\t\t}\n\t\t//!steal-remove-end\n\n\t\tlet inst = Reflect.construct(Base, arguments, this.constructor);\n\t\tinstances.add(inst);\n\t\treturn inst;\n\t}\n\n\tLateDefined.instances = instances;\n\n\tconst underlyingPrototypeObject = Object.create(Base.prototype);\n\n\tconst getHandler = isProtoReadOnSuper ?\n\t\tfunction(target, key, receiver) {\n\t\t\tif (!this[inSetupSymbol$3] && typeof key !== \"symbol\" && key !== \"__proto__\") {\n\t\t\t\tcanObservationRecorder_1_3_1_canObservationRecorder.add(receiver, key);\n\t\t\t}\n\t\t\treturn Reflect.get(target, key, receiver);\n\t\t} :\n\t\tfunction(target, key, receiver) {\n\t\t\tif (!this[inSetupSymbol$3] && typeof key !== \"symbol\") {\n\t\t\t\tcanObservationRecorder_1_3_1_canObservationRecorder.add(receiver, key);\n\t\t\t}\n\t\t\treturn Reflect.get(target, key, receiver);\n\t\t};\n\n\tconst proxyHandlers = {\n\t\tget: getHandler,\n\t\tset(target, key, value, receiver) {\n\t\t\t// Symbols are not observable, so just set the value\n\t\t\tif (typeof key === \"symbol\") {\n\t\t\t\tReflect.set(target, key, value, receiver);\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\t// We decided to punt on making the prototype observable, so anything\n\t\t\t// set on a prototype just gets set.\n\t\t\tif(key in target || !instances.has(receiver)) {\n\t\t\t\tlet current = Reflect.get(target, key, receiver);\n\t\t\t\tReflect.set(target, key, value, receiver);\n\t\t\t\teventDispatcher(receiver, key, current, value);\n\t\t\t} else {\n\t\t\t\tdefine_1.expando(receiver, key, value);\n\t\t\t}\n\n\t\t\treturn true;\n\t\t}\n\t};\n\n\tLateDefined.prototype = (typeof Proxy === \"function\") ?\n\t\tnew Proxy(underlyingPrototypeObject, proxyHandlers) :\n\t\tunderlyingPrototypeObject;\n\n\treturn LateDefined;\n}\n\nvar mixinProxy = proxyPrototype;\n\nfunction mixinTypeEvents(Type) {\n\tlet Child = class extends Type {};\n\ttype$1(Child);\n\tmap$1(Child);\n\treturn Child;\n}\n\nvar mixinTypeevents = mixinTypeEvents;\n\nconst { hooks: hooks$1, makeDefineInstanceKey } = define_1;\n\n\n\n\nconst constructorPropsSymbol = Symbol.for(\"can.constructorProps\");\nconst renderedSymbol = Symbol.for(\"can.rendered\");\n\nvar mixinElement = function mixinElement(BaseElement){\n\tlet Element = class extends mixinProxy(BaseElement) {\n\t\tconstructor(props) {\n\t\t\tsuper();\n\t\t\thooks$1.finalizeClass(this.constructor);\n\t\t\tthis[constructorPropsSymbol] = props;\n\t\t}\n\n\t\tinitialize(props) {\n\t\t\tif(super.initialize) {\n\t\t\t\tsuper.initialize(props);\n\t\t\t}\n\t\t\thooks$1.initialize(this, props || this[constructorPropsSymbol]);\n\t\t}\n\n\t\trender(props) {\n\t\t\tif(super.render) {\n\t\t\t\tsuper.render(props);\n\t\t\t}\n\t\t\thooks$1.initialize(this, props || this[constructorPropsSymbol]);\n\t\t\tthis[renderedSymbol] = true;\n\t\t}\n\n\t\tconnectedCallback() {\n\t\t\tif(super.connectedCallback) {\n\t\t\t\tsuper.connectedCallback();\n\t\t\t}\n\t\t\tif(!this[renderedSymbol]) {\n\t\t\t\tthis.render();\n\t\t\t}\n\t\t}\n\t};\n\n\tElement = mixinTypeevents(mixinMapprops(Element));\n\tmakeDefineInstanceKey(Element);\n\n\treturn Element;\n};\n\nvar createConstructorFunction_1$1 = createConstructorFunction_1;\n\nvar makeDefineInstanceKey$1 = define_1.makeDefineInstanceKey;\nvar mixins_1 = define_1.hooks;\n\nvar mixinElement_1 = mixinElement;\nvar mixinMapProps_1 = mixinMapprops;\nvar mixinProxy_1 = mixinProxy;\nvar mixinTypeEvents_1 = mixinTypeevents;\n\nvar mixins = {\n\tcreateConstructorFunction: createConstructorFunction_1$1,\n\tmakeDefineInstanceKey: makeDefineInstanceKey$1,\n\tmixins: mixins_1,\n\tmixinElement: mixinElement_1,\n\tmixinMapProps: mixinMapProps_1,\n\tmixinProxy: mixinProxy_1,\n\tmixinTypeEvents: mixinTypeEvents_1\n};\n\nconst {\n\tcreateConstructorFunction: createConstructorFunction$1,\n\tmakeDefineInstanceKey: makeDefineInstanceKey$2,\n\tmixins: mixins$1,\n\tmixinMapProps,\n\tmixinProxy: mixinProxy$1,\n\tmixinTypeEvents: mixinTypeEvents$1\n} = mixins;\n\n\nlet ObservableObject = class extends mixinProxy$1(Object) {\n\tconstructor(props) {\n\t\tsuper();\n\t\tmixins$1.finalizeClass(this.constructor);\n\t\tmixins$1.initialize(this, props);\n\t\t\n\t\t// Define class fields observables \n\t\t//and return the proxy\n\t\tconst proxiedInstance =  new Proxy(this, {\n\t\t\tdefineProperty(target, prop, descriptor) {\n\t\t\t\tconst props = target.constructor.props;\n\t\t\t\tlet value = descriptor.value;\n\n\t\t\t\t// do not create expando properties for special keys set by can-observable-mixin\n\t\t\t\tconst specialKeys = ['_instanceDefinitions', '_data', '_computed'];\n\t\t\t\tif (specialKeys.indexOf(prop) >= 0) {\n\t\t\t\t\treturn Reflect.defineProperty(target, prop, descriptor);\n\t\t\t\t}\n\n\t\t\t\tif (value) {\n\t\t\t\t\t// do not create expando properties for properties that are described\n\t\t\t\t\t// by `static props` or `static propertyDefaults`\n\t\t\t\t\tif (props && props[prop] || target.constructor.propertyDefaults) {\n\t\t\t\t\t\ttarget.set(prop, value);\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\t// create expandos to make all other properties observable\n\t\t\t\t\treturn mixins$1.expando(target, prop, value);\n\t\t\t\t}\n\n\t\t\t\t// Prevent dispatching more than one event with canReflect.setKeyValue\n\t\t\t\treturn Reflect.defineProperty(target, prop, descriptor);\n\t\t\t}\n\t\t});\n\n\t\t// Adding the instance to observable-mixin \n\t\t// prevents additional event dispatching \n\t\t// https://github.com/canjs/can-observable-object/issues/35\n\t\tthis.constructor.instances.add(proxiedInstance);\n\t\treturn proxiedInstance;\n\t}\n\n};\n\nObservableObject = mixinTypeEvents$1(mixinMapProps(ObservableObject));\nmakeDefineInstanceKey$2(ObservableObject);\n\n// Export a constructor function to workaround an issue where ES2015 classes\n// cannot be extended in code that's transpiled by Babel.\nvar canObservableObject = canNamespace_1_0_0_canNamespace.ObservableObject = createConstructorFunction$1(\n\tObservableObject\n);\n\nconst { mixins: mixins$2 } = mixins;\n\n\nconst metaSymbol$3 = Symbol.for(\"can.meta\");\n\nconst helpers$1 = {\n\tassignNonEnumerable: function(obj, key, value) {\n\t\treturn Object.defineProperty(obj, key, {\n\t\t    enumerable: false,\n\t\t    writable: true,\n\t\t    configurable: true,\n\t\t    value: value\n\t\t});\n\t},\n\tshouldRecordObservationOnAllKeysExceptFunctionsOnProto: function(keyInfo, meta){\n\t\treturn meta.preventSideEffects === 0 && !keyInfo.isAccessor && (\n\t\t\t// it's on us\n\t\t\t(// it's on our proto, but not a function\n\t\t\t(keyInfo.targetHasOwnKey ) ||\n\t\t\t// it's \"missing\", and we are not sealed\n\t\t\t(!keyInfo.protoHasKey && !Object.isSealed(meta.target)) || keyInfo.protoHasKey && (typeof targetValue !== \"function\"))\n\t\t);\n\t},\n\t/*\n\t * dispatch an event when an index changes\n\t */\n\tdispatchIndexEvent: function(attr, how, newVal, oldVal) {\n\t\tvar index = +attr;\n\t\t// Make sure this is not nested and not an expando\n\t\tif (!isNaN(index)) {\n\t\t\tvar itemsDefinition = this._define.definitions[\"#\"];\n\t\t\tif (how === 'set') {\n\t\t\t\tthis.dispatch({\n\t\t\t\t\ttype: index,\n\t\t\t\t\taction: how,\n\t\t\t\t\tkey: index,\n\t\t\t\t\tvalue: newVal,\n\t\t\t\t\toldValue: oldVal\n\t\t\t\t}, [ newVal, oldVal ]);\n\n\t\t\t\t// if event is being set through an ObservableArray.prototype method,\n\t\t\t\t// do not dispatch length or patch events.\n\t\t\t\t// This will be handled by ObservableArray.prototype method.\n\t\t\t\tlet meta = this[metaSymbol$3];\n\t\t\t\tif (!(\"preventSideEffects\" in meta) || meta.preventSideEffects === 0) {\n\t\t\t\t\tlet patches = [{\n\t\t\t\t\t\tindex: index,\n\t\t\t\t\t\tdeleteCount: 1,\n\t\t\t\t\t\tinsert: [ newVal ],\n\t\t\t\t\t\ttype: \"splice\"\n\t\t\t\t\t}];\n\t\t\t\t\thelpers$1.dispatchLengthPatch.call(this, how, patches, this.length, this.length);\n\t\t\t\t}\n\t\t\t} else if (how === 'add') {\n\t\t\t\tif (itemsDefinition && typeof itemsDefinition.added === 'function') {\n\t\t\t\t\tcanObservationRecorder_1_3_1_canObservationRecorder.ignore(itemsDefinition.added).call(this, newVal, index);\n\t\t\t\t}\n\n\t\t\t\tthis.dispatch({\n\t\t\t\t\ttype: index,\n\t\t\t\t\taction: how,\n\t\t\t\t\tkey: index,\n\t\t\t\t\tvalue: newVal,\n\t\t\t\t\toldValue: oldVal\n\t\t\t\t}, [ newVal, oldVal ]);\n\n\t\t\t\t// if event is being set through an ObservableArray.prototype method,\n\t\t\t\t// do not dispatch length or patch events.\n\t\t\t\t// This will be handled by ObservableArray.prototype method.\n\t\t\t\tlet meta = this[metaSymbol$3];\n\t\t\t\tif (!(\"preventSideEffects\" in meta) || meta.preventSideEffects === 0) {\n\t\t\t\t\tlet patches = [{\n\t\t\t\t\t\tindex: index,\n\t\t\t\t\t\tdeleteCount: 0,\n\t\t\t\t\t\tinsert: [ newVal ],\n\t\t\t\t\t\ttype: \"splice\"\n\t\t\t\t\t}];\n\t\t\t\t\thelpers$1.dispatchLengthPatch.call(this, how, patches, this.length, this.length - 1);\n\t\t\t\t}\n\t\t\t} else if (how === 'remove') {\n\t\t\t\tif (itemsDefinition && typeof itemsDefinition.removed === 'function') {\n\t\t\t\t\tcanObservationRecorder_1_3_1_canObservationRecorder.ignore(itemsDefinition.removed).call(this, oldVal, index);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tvar key = \"\" + attr;\n\t\t\tthis.dispatch({\n\t\t\t\ttype: key,\n\t\t\t\tkey: key,\n\t\t\t\taction: how,\n\t\t\t\tvalue: newVal,\n\t\t\t\toldValue: oldVal,\n\t\t\t\ttarget: this\n\t\t\t}, [ newVal, oldVal ]);\n\t\t}\n\t},\n\t/*\n\t * Dispatch a `type: \"splice\"` patch and a `length` event\n\t */\n\tdispatchLengthPatch: function(how, patches, newLength, oldLength) {\n\t\tconst dispatchArgs = {\n\t\t\ttype: \"length\",\n\t\t\tkey: \"length\",\n\t\t\taction: how,\n\t\t\tvalue: newLength,\n\t\t\toldValue: oldLength,\n\t\t\tpatches: patches\n\t\t};\n\n\t\t//!steal-remove-start\n\t\tif(process.env.NODE_ENV !== \"production\") {\n\t\t\tdispatchArgs.reasonLog = [canReflect_1_19_2_canReflect.getName(this) + \".\" + how + \" called with\", arguments];\n\t\t}\n\t\t//!steal-remove-end\n\n\t\tmap$1.dispatch.call(this, dispatchArgs, [newLength, oldLength]);\n\t},\n\n\tconvertItem: function(Constructor, item) {\n\t\tif(Constructor.items) {\n\t\t\tconst definition = mixins$2.normalizeTypeDefinition(Constructor.items.type || Constructor.items);\n\t\t\treturn canReflect_1_19_2_canReflect.convert(item, definition);\n\t\t}\n\t\treturn item;\n\t},\n\n\tconvertItems: function(Constructor, items) {\n\t\tif(items.length) {\n\t\t\tif(Constructor.items) {\n\t\t\t\tfor(let i = 0, len = items.length; i < len; i++) {\n\t\t\t\t\titems[i] = helpers$1.convertItem(Constructor, items[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn items;\n\t}\n};\n\nvar helpers_1$1 = helpers$1;\n\nvar canMeta = Symbol.for(\"can.meta\");\nconst computedPropertyDefinitionSymbol = Symbol.for(\"can.computedPropertyDefinitions\");\nconst onKeyValueSymbol$3 = Symbol.for(\"can.onKeyValue\");\nconst offKeyValueSymbol$2 = Symbol.for(\"can.offKeyValue\");\n\n// ## ComputedObjectObservationData\n// Instances of this are created to wrap the observation.\n// The `.bind` and `.unbind` methods should be called when the\n// instance's prop is bound or unbound.\nfunction ComputedObjectObservationData(instance, prop, observation){\n\tthis.instance = instance;\n    this.prop = prop;\n    this.observation = observation;\n\tthis.forward = this.forward.bind(this);\n}\n\nComputedObjectObservationData.prototype.bind = function(){\n    this.bindingCount++;\n    if(this.bindingCount === 1) {\n        this.observation.on(this.forward, \"notify\");\n    }\n};\n\nComputedObjectObservationData.prototype.unbind = function(){\n    this.bindingCount--;\n    if(this.bindingCount === 0) {\n        this.observation.off(this.forward, \"notify\");\n    }\n};\n\nComputedObjectObservationData.prototype.forward = function(newValue, oldValue){\n\tmap$1.dispatch.call(this.instance, {\n\t\ttype: this.prop,\n\t\tkey: this.prop,\n\t\ttarget: this.instance,\n\t\tvalue: newValue,\n\t\toldValue: oldValue\n\n\t\t// patches: [{\n\t\t// \tkey: this.prop,\n\t\t// \ttype: \"set\",\n\t\t// \tvalue: newValue\n\t\t// }]\n\t\t// keyChanged: undefined\n\t}, [newValue, oldValue]);\n};\n\nComputedObjectObservationData.prototype.bindingCount = 0;\n\nfunction findComputed(instance, key) {\n\tvar meta = instance[canMeta];\n\tvar target = meta.target;\n\n\tvar computedPropertyDefinitions = target[computedPropertyDefinitionSymbol];\n\tif (computedPropertyDefinitions === undefined) {\n\t\treturn;\n\t}\n\tvar computedPropertyDefinition = computedPropertyDefinitions[key];\n\tif (computedPropertyDefinition === undefined) {\n\t\treturn;\n\t}\n\n\tif (meta.computedKeys[key] === undefined) {\n\t\tmeta.computedKeys[key] = new ComputedObjectObservationData(\n\t\t\tinstance, key,\n\t\t\tcomputedPropertyDefinition(instance, key)\n\t\t);\n\t}\n\n\treturn meta.computedKeys[key];\n}\n\nconst computedHelpers = {\n\tbind: function(instance, key) {\n\t\tlet computedObj = findComputed(instance, key);\n\t\tif (computedObj === undefined) {\n\t\t\treturn;\n\t\t}\n\n\t\tcomputedObj.bind();\n\t},\n\taddKeyDependencies: function(proxyKeys) {\n\t\tlet onKeyValue = proxyKeys[onKeyValueSymbol$3];\n\t\tlet offKeyValue = proxyKeys[offKeyValueSymbol$2];\n\n\t\tcanReflect_1_19_2_canReflect.assignSymbols(proxyKeys, {\n\t\t\t\"can.onKeyValue\": function(key) {\n\t\t\t\tcomputedHelpers.bind(this, key);\n\t\t\t\treturn onKeyValue.apply(this, arguments);\n\t\t\t},\n\t\t\t\"can.offKeyValue\": function(key) {\n\t\t\t\tcomputedHelpers.unbind(this, key);\n\t\t\t\treturn offKeyValue.apply(this, arguments);\n\t\t\t},\n\t\t\t\"can.getKeyDependencies\": function(key) {\n\t\t\t\tvar computedObj = findComputed(this, key);\n\t\t\t\tif (computedObj === undefined) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\treturn {\n\t\t\t\t\tvalueDependencies: new Set([ computedObj.observation ])\n\t\t\t\t};\n\t\t\t},\n\t\t});\n\t}\n};\n\nvar computedHelpers_1 = computedHelpers;\n\nconst {\n\tassignNonEnumerable,\n\tconvertItem,\n\tdispatchIndexEvent,\n\tshouldRecordObservationOnAllKeysExceptFunctionsOnProto\n} = helpers_1$1;\nconst { mixins: mixins$3 } = mixins;\n\nconst hasOwn = Object.prototype.hasOwnProperty;\nconst { isSymbolLike: isSymbolLike$1 } = canReflect_1_19_2_canReflect;\nconst metaSymbol$4 = Symbol.for(\"can.meta\");\n\nconst proxiedObjects = new WeakMap();\nconst proxies = new WeakSet();\n\nconst proxyKeys = Object.create(null);\nObject.getOwnPropertySymbols(map$1).forEach(function(symbol){\n\tassignNonEnumerable(proxyKeys, symbol, map$1[symbol]);\n});\ncomputedHelpers_1.addKeyDependencies(proxyKeys);\n\nconst mutateMethods = {\n\t\"push\": function(arr, args) {\n\t\treturn [{\n\t\t\tindex: arr.length - args.length,\n\t\t\tdeleteCount: 0,\n\t\t\tinsert: args,\n\t\t\ttype: \"splice\"\n\t\t}];\n\t},\n\t\"pop\": function(arr) {\n\t\treturn [{\n\t\t\tindex: arr.length,\n\t\t\tdeleteCount: 1,\n\t\t\tinsert: [],\n\t\t\ttype: \"splice\"\n\t\t}];\n\t},\n\t\"shift\": function() {\n\t\treturn [{\n\t\t\tindex: 0,\n\t\t\tdeleteCount: 1,\n\t\t\tinsert: [],\n\t\t\ttype: \"splice\"\n\t\t}];\n\t},\n\t\"unshift\": function(arr, args) {\n\t\treturn [{\n\t\t\tindex: 0,\n\t\t\tdeleteCount: 0,\n\t\t\tinsert: args,\n\t\t\ttype: \"splice\"\n\t\t}];\n\t},\n\t\"splice\": function(arr, args) {\n\t\treturn [{\n\t\t\tindex: args[0],\n\t\t\tdeleteCount: args[1],\n\t\t\tinsert: args.slice(2),\n\t\t\ttype: \"splice\"\n\t\t}];\n\t},\n\t\"sort\": function(arr) {\n\t\t// The array replaced everything.\n\t\treturn [{\n\t\t\tindex: 0,\n\t\t\tdeleteCount: arr.length,\n\t\t\tinsert: arr,\n\t\t\ttype: \"splice\"\n\t\t}];\n\t},\n\t\"reverse\": function(arr) {\n\t\t// The array replaced everything.\n\t\treturn [{\n\t\t\tindex: 0,\n\t\t\tdeleteCount: arr.length,\n\t\t\tinsert: arr,\n\t\t\ttype: \"splice\"\n\t\t}];\n\t}\n};\n\n// Overwrite Array's methods that mutate to:\n// - prevent other events from being fired off (index events and length events.)\n// - dispatch patches events.\ncanReflect_1_19_2_canReflect.eachKey(mutateMethods, function(makePatches, prop){\n\tvar protoFn = Array.prototype[prop];\n\tvar mutateMethod = function() {\n\t\tvar meta = this[metaSymbol$4],\n\t\t\t// Capture if this function should be making sideEffects\n\t\t\tmakeSideEffects = meta.preventSideEffects === 0,\n\t\t\toldLength = meta.target.length;\n\n\t\t// Prevent proxy from calling ObservationRecorder and sending events.\n\t\tmeta.preventSideEffects++;\n\n\t\t// Call the function -- note that *this* is the Proxy here, so\n\t\t// accesses in the function still go through `get()` and `set()`.\n\t\tvar ret = protoFn.apply(meta.target, arguments);\n\t\tvar patches = makePatches(meta.target, Array.from(arguments), oldLength);\n\n\t\tif (makeSideEffects === true) {\n\t\t\t//!steal-remove-start\n\t\t\tvar reasonLog = [canReflect_1_19_2_canReflect.getName(meta.proxy)+\".\"+prop+\" called with\", arguments];\n\t\t\t//!steal-remove-end\n\t\t\tvar dispatchArgs = {\n\t\t\t\ttype: \"length\",\n\t\t\t\tkey: \"length\",\n\t\t\t\tvalue: meta.target.length,\n\t\t\t\toldValue: oldLength,\n\t\t\t\tpatches: patches\n\t\t\t};\n\n\t\t\t//!steal-remove-start\n\t\t\tif(process.env.NODE_ENV !== 'production') {\n\t\t\t\tdispatchArgs.reasonLog = reasonLog;\n\t\t\t}\n\t\t\t//!steal-remove-end\n\n\t\t\tmap$1.dispatch.call( meta.proxy, dispatchArgs , [meta.target.length, oldLength]);\n\t\t}\n\n\t\tmeta.preventSideEffects--;\n\t\treturn ret;\n\t};\n\t//!steal-remove-start\n\tif(process.env.NODE_ENV !== 'production') {\n\t\tObject.defineProperty(mutateMethod, \"name\", {\n\t\t\tvalue: prop\n\t\t});\n\t}\n\t//!steal-remove-end\n\n\t// Store the proxied method so it will be used instead of the\n\t// prototype method.\n\tproxiedObjects.set(protoFn, mutateMethod);\n\tproxies.add(mutateMethod);\n});\n\nfunction setValueAndOnChange(key, value, target, proxy, onChange) {\n\tlet old, change;\n\tlet hadOwn = hasOwn.call(target, key);\n\n\tlet descriptor = Object.getOwnPropertyDescriptor(target, key);\n\t// call the setter on the Proxy to properly do any side-effect sets (and run corresponding handlers)\n\t// -- setters do not return values, so it is unnecessary to check for changes.\n\tif (descriptor && descriptor.set) {\n\t\tdescriptor.set.call(proxy, value);\n\t} else {\n\t\t// otherwise check for a changed value\n\t\told = target[key];\n\t\tchange = old !== value;\n\t\tif (change) {\n\t\t\tlet keyType = typeof key;\n\t\t\tlet keyIsString = keyType === \"string\";\n\n\t\t\t// String keys added to the instance (and is not \"length\")\n\t\t\t// Are newly defined properties and have propertyDefaults provided.\n\t\t\tif(keyIsString && !(key in target)) {\n\t\t\t\tmixins$3.expando(target, key, value);\n\t\t\t} else {\n\t\t\t\t// arr[0] = { foo: 'bar' } should convert to MyArray.items\n\t\t\t\tif(keyType === \"number\") {\n\t\t\t\t\tvalue = convertItem(target.constructor, value);\n\t\t\t\t}\n\n\t\t\t\ttarget[key] = value;\n\t\t\t\tonChange(hadOwn, old);\n\t\t\t}\n\t\t}\n\t}\n}\n\nconst proxyHandlers = {\n\tget(target, key, receiver) {\n\t\tif (isSymbolLike$1(key)) {\n\t\t\treturn target[key];\n\t\t}\n\n\t\tlet proxy = proxiedObjects.get(target);\n\t\tcanObservationRecorder_1_3_1_canObservationRecorder.add(proxy, key.toString());\n\n\t\tconst numberKey = !isSymbolLike$1(key) && +key;\n\t\tif (Number.isInteger(numberKey)) {\n\t\t\tcanObservationRecorder_1_3_1_canObservationRecorder.add(proxy, \"length\");\n\t\t}\n\t\t\n\t\tlet value = Reflect.get(target, key, receiver);\n\t\treturn value;\n\t},\n\n\tset(target, key, newValue, receiver) {\n\t\tlet proxy = proxiedObjects.get(target);\n\t\tlet numberKey = !isSymbolLike$1(key) && +key;\n\n\t\tif (Number.isInteger(numberKey)) {\n\t\t\tkey = numberKey;\n\t\t}\n\n\t\tsetValueAndOnChange(key, newValue, target, proxy, function onChange(hadOwn, oldValue) {\n\n\t\t\tif (Number.isInteger(key)) {\n\t\t\t\tdispatchIndexEvent.call(\n\t\t\t\t\treceiver,\n\t\t\t\t\tkey,\n\t\t\t\t\thadOwn ? (typeof newValue !== 'undefined' ? \"set\" : \"remove\") : \"add\",\n\t\t\t\t\tnewValue,\n\t\t\t\t\toldValue\n\t\t\t\t);\n\t\t\t}\n\t\t});\n\n\t\treturn true;\n\t},\n\tdeleteProperty(target, key) {\n\t\tlet old = this.target[key];\n\t\tlet deleteSuccessful = delete this.target[key];\n\n\t\t// Fire event handlers if we were able to delete and the value changed.\n\t\tif (deleteSuccessful && this.preventSideEffects === 0 && old !== undefined) {\n\t\t\tdispatchIndexEvent.call(\n\t\t\t\tthis.proxy,\n\t\t\t\tkey,\n\t\t\t\t\"remove\",\n\t\t\t\tundefined,\n\t\t\t\told\n\t\t\t);\n\t\t}\n\n\t\treturn deleteSuccessful;\n\t},\n\townKeys() {\n\t\tcanObservationRecorder_1_3_1_canObservationRecorder.add(this.proxy, \"can.keys\");\n\n\t\tlet keysSet = new Set(\n\t\t\tObject.getOwnPropertyNames(this.target)\n\t\t\t\t.concat(Object.getOwnPropertySymbols(this.target))\n\t\t\t\t.concat(Object.getOwnPropertySymbols(this.proxyKeys))\n\t\t);\n\n\t\treturn Array.from(keysSet);\n\t}\n};\n\nfunction makeObservable(array, options) {\n\tlet meta = {\n\t\ttarget: array,\n\t\tproxyKeys: options.proxyKeys !== undefined ? options.proxyKeys : Object.create(proxyKeys),\n\t\tcomputedKeys: Object.create(null),\n\t\toptions: options,\n\t\t// `preventSideEffects` is a counter used to \"turn off\" the proxy.  This is incremented when some\n\t\t// function (like `Array.splice`) wants to handle event dispatching and/or calling\n\t\t// `ObservationRecorder` itself for performance reasons.\n\t\tpreventSideEffects: 0\n\t};\n\tmeta.proxyKeys[metaSymbol$4] = meta;\n\n\tmeta.proxy = new Proxy(array, {\n\t\tget: proxyHandlers.get.bind(meta),\n\t\tset: proxyHandlers.set.bind(meta),\n\t\townKeys: proxyHandlers.ownKeys.bind(meta),\n\t\tdeleteProperty: proxyHandlers.deleteProperty.bind(meta),\n\t\tmeta: meta\n\t});\n\tmap$1.addHandlers(meta.proxy, meta);\n\treturn meta.proxy;\n}\n\nfunction proxyArray() {\n\treturn class ProxyArray extends Array {\n\t\tconstructor(...items) {\n\t\t\tsuper(...items);\n\n\t\t\tlet localProxyKeys = Object.create(proxyKeys);\n        \tlocalProxyKeys.constructor = this.constructor;\n\n\t\t\tlet observable = makeObservable(this, {\n\t\t\t\t//observe: makeObserve.observe,\n \t\t\t\tproxyKeys: localProxyKeys,\n \t\t\t\tshouldRecordObservation: shouldRecordObservationOnAllKeysExceptFunctionsOnProto\n\t\t\t});\n\t\t\tproxiedObjects.set(this, observable);\n\t\t\tproxies.add(observable);\n\t\t\treturn observable;\n\t\t}\n\t};\n}\n\nvar proxyArray_1 = proxyArray;\n\nconst {\n\tcreateConstructorFunction: createConstructorFunction$2,\n\tmakeDefineInstanceKey: makeDefineInstanceKey$3,\n\tmixins: mixins$4,\n\tmixinMapProps: mixinMapProps$1,\n\tmixinTypeEvents: mixinTypeEvents$2\n} = mixins;\nconst {\n\tconvertItem: convertItem$1,\n\tconvertItems,\n\tdispatchLengthPatch\n} = helpers_1$1;\n\nconst ProxyArray = proxyArray_1();\n\n\n\n// symbols aren't enumerable ... we'd need a version of Object that treats them that way\nconst localOnPatchesSymbol = \"can.patches\";\nconst onKeyValueSymbol$4 = Symbol.for(\"can.onKeyValue\");\nconst offKeyValueSymbol$3 = Symbol.for(\"can.offKeyValue\");\nconst metaSymbol$5 = Symbol.for(\"can.meta\");\n\nfunction isListLike$1(items) {\n\treturn canReflect_1_19_2_canReflect.isListLike(items) && typeof items !== \"string\";\n}\n\nconst MixedInArray = mixinTypeEvents$2(mixinMapProps$1(ProxyArray));\n\nclass ObservableArray extends MixedInArray {\n\t// TODO define stuff here\n\tconstructor(items, props) {\n\t\t// Arrays can be passed a length like `new Array(15)`\n\t\tlet isLengthArg = typeof items === \"number\";\n\t\tif(isLengthArg) {\n\t\t\tsuper(items);\n\t\t} else if(arguments.length > 0 && !isListLike$1(items)) {\n\t\t\tthrow new Error(\"can-observable-array: Unexpected argument: \" + typeof items);\n\t\t} else {\n\t\t\tsuper();\n\t\t}\n\n\t\tmixins$4.finalizeClass(this.constructor);\n\t\tmixins$4.initialize(this, props || {});\n\n\t\tfor(let i = 0, len = items && items.length; i < len; i++) {\n\t\t\tthis[i] = convertItem$1(this.constructor, items[i]);\n\t\t}\n\n\t\t// Define class fields observables\n\t\t//and return the proxy\n\t\treturn new Proxy(this, {\n\t\t\tdefineProperty(target, prop, descriptor) {\n\t\t\t\tif ('items' === prop) {\n\t\t\t\t\tthrow new Error('ObservableArray does not support a class field named items. Try using a different name or using static items');\n\t\t\t\t}\n\n\t\t\t\t// do not create expando properties for special keys set by can-observable-mixin\n\t\t\t\tif (prop === '_instanceDefinitions') {\n\t\t\t\t\treturn Reflect.defineProperty(target, prop, descriptor);\n\t\t\t\t}\n\n\t\t\t\tlet value = descriptor.value;\n\n\t\t\t\t// do not create expando properties for properties that are described\n\t\t\t\t// by `static props` or `static propertyDefaults`\n\t\t\t\tconst props = target.constructor.props;\n\t\t\t\tif (props && props[prop] || target.constructor.propertyDefaults) {\n\t\t\t\t\tif (value) {\n\t\t\t\t\t\ttarget.set(prop, value);\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\treturn Reflect.defineProperty(target, prop, descriptor);\n\t\t\t\t}\n\n\t\t\t\t// create expandos to make all other properties observable\n\t\t\t\treturn mixins$4.expando(target, prop, value);\n\t\t\t}\n\t\t});\n\t}\n\n\tstatic get [Symbol.species]() {\n\t\treturn this;\n\t}\n\n\tstatic [Symbol.for(\"can.new\")](items) {\n\t\tlet array = items || [];\n\t\treturn new this(array);\n\t}\n\n\tpush(...items) {\n\t\treturn super.push(...items);\n\t}\n\n\tunshift(...items) {\n\t\treturn super.unshift(...items);\n\t}\n\n\tfilter(callback) {\n\t\tif(typeof callback === \"object\") {\n\t\t\tlet props = callback;\n\t\t\tcallback = function(item) {\n\t\t\t\tfor (let prop in props) {\n\t\t\t\t\tif (item[prop] !== props[prop]) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t};\n\t\t}\n\n\t\treturn super.filter(callback);\n\t}\n\n\tforEach(...args) {\n\t\treturn Array.prototype.forEach.apply(this, args);\n\t}\n\n\tsplice(...args) {\n\t\tlet index = args[0],\n\t\t\thowMany = args[1],\n\t\t\tadded = [],\n\t\t\ti, len, listIndex,\n\t\t\tallSame = args.length > 2;\n\n\t\tindex = index || 0;\n\n\t\t// converting the arguments to the right type\n\t\tfor (i = 0, len = args.length - 2; i < len; i++) {\n\t\t\tlistIndex = i + 2;\n\t\t\tadded.push(args[listIndex]);\n\n\t\t\t// Now lets check if anything will change\n\t\t\tif (this[i + index] !== args[listIndex]) {\n\t\t\t\tallSame = false;\n\t\t\t}\n\t\t}\n\n\t\t// if nothing has changed, then return\n\t\tif (allSame && this.length <= added.length) {\n\t\t\treturn added;\n\t\t}\n\n\t\t// default howMany if not provided\n\t\tif (howMany === undefined) {\n\t\t\thowMany = args[1] = this.length - index;\n\t\t}\n\n\t\tcanQueues_1_3_2_canQueues.batch.start();\n\t\tvar removed = super.splice.apply(this, args);\n\t\tcanQueues_1_3_2_canQueues.batch.stop();\n\t\treturn removed;\n\t}\n\n\tstatic convertsTo(Type) {\n\t\tconst ConvertedType = canType_1_1_6_canType.convert(Type);\n\n\t\tconst ArrayType = class extends this {\n\t\t\tstatic get items() {\n\t\t\t\treturn ConvertedType;\n\t\t\t}\n\t\t};\n\n\t\tconst name = `ConvertedObservableArray<${canReflect_1_19_2_canReflect.getName(Type)}>`;\n\t\tcanReflect_1_19_2_canReflect.setName(ArrayType, name);\n\n\t\treturn ArrayType;\n\t}\n\n\t/* Symbols */\n\t[Symbol.for(\"can.splice\")](index, deleteCount, insert){\n\t\treturn this.splice(...[index, deleteCount].concat(insert));\n\t}\n\n\t[Symbol.for(\"can.onPatches\")](handler, queue){\n\t\tthis[onKeyValueSymbol$4](localOnPatchesSymbol, handler,queue);\n\t}\n\n\t[Symbol.for(\"can.offPatches\")](handler, queue) {\n\t\tthis[offKeyValueSymbol$3](localOnPatchesSymbol, handler, queue);\n\t}\n\n\tget [Symbol.for(\"can.isListLike\")]() {\n\t\treturn true;\n\t}\n\n\t[Symbol.for(\"can.getOwnEnumerableKeys\")]() {\n\t\tlet base = super[Symbol.for(\"can.getOwnEnumerableKeys\")]();\n\t\tlet keysSet = new Set([...Object.keys(this), ...base]);\n\t\treturn Array.from(keysSet);\n\t}\n}\n\nvar mutateMethods$1 = {\n\t\"push\": function(arr, args) {\n\t\treturn [{\n\t\t\tindex: arr.length - args.length,\n\t\t\tdeleteCount: 0,\n\t\t\tinsert: args,\n\t\t\ttype: \"splice\"\n\t\t}];\n\t},\n\t\"pop\": function(arr, args, oldLength) {\n\t\treturn [{\n\t\t\tindex: arr.length,\n\t\t\tdeleteCount: oldLength > 0 ? 1 : 0,\n\t\t\ttype: \"splice\"\n\t\t}];\n\t},\n\t\"shift\": function(arr, args, oldLength) {\n\t\treturn [{\n\t\t\tindex: 0,\n\t\t\tdeleteCount: oldLength > 0 ? 1 : 0,\n\t\t\ttype: \"splice\"\n\t\t}];\n\t},\n\t\"unshift\": function(arr, args) {\n\t\treturn [{\n\t\t\tindex: 0,\n\t\t\tdeleteCount: 0,\n\t\t\tinsert: args,\n\t\t\ttype: \"splice\"\n\t\t}];\n\t},\n\t\"splice\": function(arr, args, oldLength) {\n\t\tconst index = args[0] < 0 ?\n\t\t\tMath.max(oldLength + args[0], 0) :\n\t\t\tMath.min(oldLength, args[0]);\n\t\treturn [{\n\t\t\tindex,\n\t\t\tdeleteCount: Math.max(0, Math.min(args[1], oldLength - index)),\n\t\t\tinsert: args.slice(2),\n\t\t\ttype: \"splice\"\n\t\t}];\n\t},\n\t\"sort\": function(arr) {\n\t\treturn [{\n\t\t\tindex: 0,\n\t\t\tdeleteCount: arr.length,\n\t\t\tinsert: arr,\n\t\t\ttype: \"splice\"\n\t\t}];\n\t},\n\t\"reverse\": function(arr) {\n\t\treturn [{\n\t\t\tindex: 0,\n\t\t\tdeleteCount: arr.length,\n\t\t\tinsert: arr,\n\t\t\ttype: \"splice\"\n\t\t}];\n\t}\n};\n\nconst convertArgs = {\n\t\"push\": function(arr, args) {\n\t\treturn convertItems(arr.constructor, args);\n\t},\n\t\"unshift\": function(arr, args) {\n\t\treturn convertItems(arr.constructor, args);\n\t},\n\t\"splice\": function(arr, args) {\n\t\treturn args.slice(0, 2).concat(convertItems(arr.constructor, args.slice(2)));\n\t}\n};\n\ncanReflect_1_19_2_canReflect.eachKey(mutateMethods$1, function(makePatches, prop) {\n\tconst protoFn = ObservableArray.prototype[prop];\n\tObservableArray.prototype[prop] = function() {\n\t\tconst oldLength = this.length;\n\t\tlet args = Array.from(arguments);\n\t\tif(convertArgs[prop]) {\n\t\t\targs = convertArgs[prop](this, args);\n\t\t}\n\n\t\t// prevent `length` event from being dispatched by get/set proxy hooks\n\t\tthis[metaSymbol$5].preventSideEffects = (this[metaSymbol$5].preventSideEffects || 0) + 1;\n\t\tconst result = protoFn.apply(this, args);\n\t\tthis[metaSymbol$5].preventSideEffects--;\n\n\t\tconst patches = makePatches(this, args, oldLength);\n\t\tdispatchLengthPatch.call(this, prop, patches, this.length, oldLength);\n\t\treturn result;\n\t};\n});\n\nmakeDefineInstanceKey$3(ObservableArray);\n\n// Export a constructor function to workaround an issue where ES2015 classes\n// cannot be extended in code that's transpiled by Babel.\nvar canObservableArray = canNamespace_1_0_0_canNamespace.ObservableArray = createConstructorFunction$2(\n\tObservableArray\n);\n\n//!steal-remove-start\nif(process.env.NODE_ENV !== 'production') {\n\tvar canLog = dev;\n\tvar canReflectDeps = canReflectDependencies_1_1_2_canReflectDependencies;\n}\n//!steal-remove-end\n\n// Symbols\nvar getChangesSymbol$2 = canSymbol_1_7_0_canSymbol.for(\"can.getChangesDependencyRecord\");\nvar getValueSymbol$1 = canSymbol_1_7_0_canSymbol.for(\"can.getValue\");\nvar onValueSymbol$2 = canSymbol_1_7_0_canSymbol.for(\"can.onValue\");\nvar onEmitSymbol = canSymbol_1_7_0_canSymbol.for(\"can.onEmit\");\nvar offEmitSymbol = canSymbol_1_7_0_canSymbol.for(\"can.offEmit\");\nvar setValueSymbol$2 = canSymbol_1_7_0_canSymbol.for(\"can.setValue\");\nvar canElementSymbol$1 = canSymbol_1_7_0_canSymbol.for(\"can.element\");\n\n// Default implementations for setting the child and parent values\nfunction defaultSetValue(newValue, observable) {\n\tcanReflect_1_19_2_canReflect.setValue(observable, newValue);\n}\n\n// onEmit function\nfunction onEmit (listenToObservable, updateFunction, queue) {\n\treturn listenToObservable[onEmitSymbol](updateFunction, queue);\n}\n\n// offEmit function\nfunction offEmit (listenToObservable, updateFunction, queue) {\n\treturn listenToObservable[offEmitSymbol](updateFunction, queue);\n}\n\n// Given an observable, stop listening to it and tear down the mutation dependencies\nfunction turnOffListeningAndUpdate(listenToObservable, updateObservable, updateFunction, queue) {\n\tvar offValueOrOffEmitFn;\n\n\t// Use either offValue or offEmit depending on which Symbols are on the `observable`\n\tif (listenToObservable[onValueSymbol$2]) {\n\t\toffValueOrOffEmitFn = canReflect_1_19_2_canReflect.offValue;\n\t} else if (listenToObservable[onEmitSymbol]) {\n\t\toffValueOrOffEmitFn = offEmit;\n\t}\n\n\tif (offValueOrOffEmitFn) {\n\t\toffValueOrOffEmitFn(listenToObservable, updateFunction, queue);\n\n\t\t//!steal-remove-start\n\t\tif(process.env.NODE_ENV !== 'production') {\n\n\t\t\t// The updateObservable is no longer mutated by listenToObservable\n\t\t\tcanReflectDeps.deleteMutatedBy(updateObservable, listenToObservable);\n\n\t\t\t// The updateFunction no longer mutates anything\n\t\t\tupdateFunction[getChangesSymbol$2] = function getChangesDependencyRecord() {\n\t\t\t};\n\n\t\t}\n\t\t//!steal-remove-end\n\t}\n}\n\n// Given an observable, start listening to it and set up the mutation dependencies\nfunction turnOnListeningAndUpdate(listenToObservable, updateObservable, updateFunction, queue) {\n\tvar onValueOrOnEmitFn;\n\n\t// Use either onValue or onEmit depending on which Symbols are on the `observable`\n\tif (listenToObservable[onValueSymbol$2]) {\n\t\tonValueOrOnEmitFn = canReflect_1_19_2_canReflect.onValue;\n\t} else if (listenToObservable[onEmitSymbol]) {\n\t\tonValueOrOnEmitFn = onEmit;\n\t}\n\n\tif (onValueOrOnEmitFn) {\n\t\tonValueOrOnEmitFn(listenToObservable, updateFunction, queue);\n\n\t\t//!steal-remove-start\n\t\tif(process.env.NODE_ENV !== 'production') {\n\n\t\t\t// The updateObservable is mutated by listenToObservable\n\t\t\tcanReflectDeps.addMutatedBy(updateObservable, listenToObservable);\n\n\t\t\t// The updateFunction mutates updateObservable\n\t\t\tupdateFunction[getChangesSymbol$2] = function getChangesDependencyRecord() {\n\t\t\t\tvar s = new Set();\n\t\t\t\ts.add(updateObservable);\n\t\t\t\treturn {\n\t\t\t\t\tvalueDependencies: s\n\t\t\t\t};\n\t\t\t};\n\n\t\t}\n\n\t\t//!steal-remove-end\n\t}\n}\n\n// Semaphores are used to keep track of updates to the child & parent\n// For debugging purposes, Semaphore and Bind are highly coupled.\nfunction Semaphore(binding, type) {\n\tthis.value = 0;\n\tthis._binding = binding;\n\tthis._type = type;\n}\ncanAssign_1_3_3_canAssign(Semaphore.prototype, {\n\tdecrement: function() {\n\t\tthis.value -= 1;\n\t},\n\tincrement: function(args) {\n\t\tthis._incremented = true;\n\t\tthis.value += 1;\n\t\t//!steal-remove-start\n\t\tif(process.env.NODE_ENV !== 'production') {\n\t\t\tif(this.value === 1) {\n\t\t\t\tthis._binding._debugSemaphores = [];\n\t\t\t}\n\t\t\tvar semaphoreData = {\n\t\t\t\ttype: this._type,\n\t\t\t\taction: \"increment\",\n\t\t\t\tobservable: args.observable,\n\t\t\t\tnewValue: args.newValue,\n\t\t\t\tvalue: this.value,\n\t\t\t\tlastTask: canQueues_1_3_2_canQueues.lastTask()\n\t\t\t};\n\t\t\tthis._binding._debugSemaphores.push(semaphoreData);\n\t\t}\n\t\t//!steal-remove-end\n\t}\n});\n\nfunction Bind(options) {\n\tthis._options = options;\n\n\t// These parameters must be supplied\n\t//!steal-remove-start\n\tif(process.env.NODE_ENV !== 'production') {\n\t\tif (options.child === undefined) {\n\t\t\tthrow new TypeError(\"You must supply a child\");\n\t\t}\n\t\tif (options.parent === undefined) {\n\t\t\tthrow new TypeError(\"You must supply a parent\");\n\t\t}\n\t\tif (options.queue && [\"notify\", \"derive\", \"domUI\",\"dom\"].indexOf(options.queue) === -1) {\n\t\t\tthrow new RangeError(\"Invalid queue; must be one of notify, derive, dom, or domUI\");\n\t\t}\n\t}\n\t//!steal-remove-end\n\n\t// queue; by default, domUI\n\tif (options.queue === undefined) {\n\t\tif(options.element) {\n\t\t\toptions.queue = \"dom\";\n\t\t} else {\n\t\t\toptions.queue = \"domUI\";\n\t\t}\n\n\t}\n\n\t// cycles: when an observable is set in a two-way binding, it can update the\n\t// other bound observable, which can then update the original observable the\n\t// “cycles” number of times. For example, a child is set and updates the parent;\n\t// with cycles: 0, the parent could not update the child;\n\t// with cycles: 1, the parent could update the child, which can update the parent\n\t// with cycles: 2, the parent can update the child again, and so on and so forth…\n\tif (options.cycles > 0 === false) {\n\t\toptions.cycles = 0;\n\t}\n\n\t// onInitDoNotUpdateChild is false by default\n\toptions.onInitDoNotUpdateChild =\n\t\ttypeof options.onInitDoNotUpdateChild === \"boolean\" ?\n\t\t\toptions.onInitDoNotUpdateChild\n\t\t\t: false;\n\n\t// onInitDoNotUpdateParent is false by default\n\toptions.onInitDoNotUpdateParent =\n\t\ttypeof options.onInitDoNotUpdateParent === \"boolean\" ?\n\t\t\toptions.onInitDoNotUpdateParent\n\t\t\t: false;\n\n\t// onInitSetUndefinedParentIfChildIsDefined is true by default\n\toptions.onInitSetUndefinedParentIfChildIsDefined =\n\t\ttypeof options.onInitSetUndefinedParentIfChildIsDefined === \"boolean\" ?\n\t\t\toptions.onInitSetUndefinedParentIfChildIsDefined\n\t\t\t: true;\n\n\t// The way the cycles are tracked is through semaphores; currently, when\n\t// either the child or parent is updated, we increase their respective\n\t// semaphore so that if it’s two-way binding, then the “other” observable\n\t// will only update if the total count for both semaphores is less than or\n\t// equal to twice the number of cycles (because a cycle means two updates).\n\tvar childSemaphore = new Semaphore(this,\"child\");\n\tvar parentSemaphore = new Semaphore(this,\"parent\");\n\n\t// Determine if this is a one-way or two-way binding; by default, accept\n\t// whatever options are passed in, but if they’re not defined, then check for\n\t// the getValue and setValue symbols on the child and parent values.\n\tvar childToParent = true;\n\tif (typeof options.childToParent === \"boolean\") {\n\t\t// Always let the option override any checks\n\t\tchildToParent = options.childToParent;\n\t} else if (options.child[getValueSymbol$1] == null) {\n\t\t// Child to parent won’t work if we can’t get the child’s value\n\t\tchildToParent = false;\n\t} else if (options.setParent === undefined && options.parent[setValueSymbol$2] == null) {\n\t\t// Child to parent won’t work if we can’t set the parent’s value\n\t\tchildToParent = false;\n\t}\n\tvar parentToChild = true;\n\tif (typeof options.parentToChild === \"boolean\") {\n\t\t// Always let the option override any checks\n\t\tparentToChild = options.parentToChild;\n\t} else if (options.parent[getValueSymbol$1] == null) {\n\t\t// Parent to child won’t work if we can’t get the parent’s value\n\t\tparentToChild = false;\n\t} else if (options.setChild === undefined && options.child[setValueSymbol$2] == null) {\n\t\t// Parent to child won’t work if we can’t set the child’s value\n\t\tparentToChild = false;\n\t}\n\tif (childToParent === false && parentToChild === false) {\n\t\tthrow new Error(\"Neither the child nor parent will be updated; this is a no-way binding\");\n\t}\n\tthis._childToParent = childToParent;\n\tthis._parentToChild = parentToChild;\n\n\t// Custom child & parent setters can be supplied; if they aren’t provided,\n\t// then create our own.\n\tif (options.setChild === undefined) {\n\t\toptions.setChild = defaultSetValue;\n\t}\n\tif (options.setParent === undefined) {\n\t\toptions.setParent = defaultSetValue;\n\t}\n\n\t// Set the observables’ priority\n\tif (options.priority !== undefined) {\n\t\tcanReflect_1_19_2_canReflect.setPriority(options.child, options.priority);\n\t\tcanReflect_1_19_2_canReflect.setPriority(options.parent, options.priority);\n\t}\n\n\t// These variables keep track of how many updates are allowed in a cycle.\n\t// cycles is multipled by two because one update is allowed for each side of\n\t// the binding, child and parent. One more update is allowed depending on the\n\t// sticky option; if it’s sticky, then one more update needs to be allowed.\n\tvar allowedUpdates = options.cycles * 2;\n\tvar allowedChildUpdates = allowedUpdates + (options.sticky === \"childSticksToParent\" ? 1 : 0);\n\tvar allowedParentUpdates = allowedUpdates + (options.sticky === \"parentSticksToChild\" ? 1 : 0);\n\n\t// This keeps track of whether we’re bound to the child and/or parent; this\n\t// allows startParent() to be called first and on() can be called later to\n\t// finish setting up the child binding. This is also checked when updating\n\t// values; if stop() has been called but updateValue() is called, then we\n\t// ignore the update.\n\tthis._bindingState = {\n\t\tchild: false,\n\t\tparent: false\n\t};\n\n\t// This is the listener that’s called when the parent changes\n\tthis._updateChild = function(newValue) {\n\t\tupdateValue.call(this, {\n\t\t\tbindingState: this._bindingState,\n\t\t\tnewValue: newValue,\n\n\t\t\t// Some options used for debugging\n\t\t\tdebugObservableName: \"child\",\n\t\t\tdebugPartnerName: \"parent\",\n\n\t\t\t// Main observable values\n\t\t\tobservable: options.child,\n\t\t\tsetValue: options.setChild,\n\t\t\tsemaphore: childSemaphore,\n\n\t\t\t// If the sum of the semaphores is less than or equal to this number, then\n\t\t\t// it’s ok to update the child with the new value.\n\t\t\tallowedUpdates: allowedChildUpdates,\n\n\t\t\t// If options.sticky === \"parentSticksToChild\", then after the parent sets\n\t\t\t// the child, check to see if the child matches the parent; if not, then\n\t\t\t// set the parent to the child’s value. This is used in cases where the\n\t\t\t// child modifies its own value and the parent should be kept in sync with\n\t\t\t// the child.\n\t\t\tsticky: options.sticky === \"parentSticksToChild\",\n\n\t\t\t// Partner observable values\n\t\t\tpartner: options.parent,\n\t\t\tsetPartner: options.setParent,\n\t\t\tpartnerSemaphore: parentSemaphore\n\t\t});\n\t}.bind(this);\n\n\t// This is the listener that’s called when the child changes\n\tthis._updateParent = function(newValue) {\n\t\tupdateValue.call(this, {\n\t\t\tbindingState: this._bindingState,\n\t\t\tnewValue: newValue,\n\n\t\t\t// Some options used for debugging\n\t\t\tdebugObservableName: \"parent\",\n\t\t\tdebugPartnerName: \"child\",\n\n\t\t\t// Main observable values\n\t\t\tobservable: options.parent,\n\t\t\tsetValue: options.setParent,\n\t\t\tsemaphore: parentSemaphore,\n\n\t\t\t// If the sum of the semaphores is less than or equal to this number, then\n\t\t\t// it’s ok to update the parent with the new value.\n\t\t\tallowedUpdates: allowedParentUpdates,\n\n\t\t\t// If options.sticky === \"childSticksToParent\", then after the child sets\n\t\t\t// the parent, check to see if the parent matches the child; if not, then\n\t\t\t// set the child to the parent’s value. This is used in cases where the\n\t\t\t// parent modifies its own value and the child should be kept in sync with\n\t\t\t// the parent.\n\t\t\tsticky: options.sticky === \"childSticksToParent\",\n\n\t\t\t// Partner observable values\n\t\t\tpartner: options.child,\n\t\t\tsetPartner: options.setChild,\n\t\t\tpartnerSemaphore: childSemaphore\n\t\t});\n\t}.bind(this);\n\n\tif(options.element) {\n\t\tthis._updateChild[canElementSymbol$1] = this._updateParent[canElementSymbol$1] = options.element;\n\t}\n\n\t//!steal-remove-start\n\tif(process.env.NODE_ENV !== 'production') {\n\n\t\tObject.defineProperty(this._updateChild, \"name\", {\n\t\t\tvalue: options.updateChildName ? options.updateChildName : \"update \"+canReflect_1_19_2_canReflect.getName(options.child),\n\t\t\tconfigurable: true\n\t\t});\n\n\t\tObject.defineProperty(this._updateParent, \"name\", {\n\t\t\tvalue: options.updateParentName ? options.updateParentName : \"update \"+canReflect_1_19_2_canReflect.getName(options.parent),\n\t\t\tconfigurable: true\n\t\t});\n\t}\n\t//!steal-remove-end\n\n}\n\nObject.defineProperty(Bind.prototype, \"parentValue\", {\n\tget: function() {\n\t\treturn canReflect_1_19_2_canReflect.getValue(this._options.parent);\n\t}\n});\n\ncanAssign_1_3_3_canAssign(Bind.prototype, {\n\n\t// Turn on any bindings that haven’t already been enabled;\n\t// also update the child or parent if need be.\n\tstart: function() {\n\t\tvar childValue;\n\t\tvar options = this._options;\n\t\tvar parentValue;\n\n\t\t// The tests don’t show that it matters which is bound first, but we’ll\n\t\t// bind to the parent first to stay consistent with how\n\t\t// can-stache-bindings did things.\n\t\tthis.startParent();\n\t\tthis.startChild();\n\n\t\t// Initialize the child & parent values\n\t\tif (this._childToParent === true && this._parentToChild === true) {\n\t\t\t// Two-way binding\n\t\t\tparentValue = canReflect_1_19_2_canReflect.getValue(options.parent);\n\t\t\tif (parentValue === undefined) {\n\t\t\t\tchildValue = canReflect_1_19_2_canReflect.getValue(options.child);\n\t\t\t\tif (childValue === undefined) {\n\t\t\t\t\t// Check if updating the child is allowed\n\t\t\t\t\tif (options.onInitDoNotUpdateChild === false) {\n\t\t\t\t\t\tthis._updateChild(parentValue);\n\t\t\t\t\t}\n\t\t\t\t} else if (options.onInitDoNotUpdateParent === false && options.onInitSetUndefinedParentIfChildIsDefined === true) {\n\t\t\t\t\tthis._updateParent(childValue);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Check if updating the child is allowed\n\t\t\t\tif (options.onInitDoNotUpdateChild === false) {\n\t\t\t\t\tthis._updateChild(parentValue);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//!steal-remove-start\n\t\t\tif(process.env.NODE_ENV !== 'production'){\n\t\t\t\t// Here we want to do a dev-mode check to see whether the child does type conversions on\n\t\t\t\t//  any two-way bindings.  This will be ignored and the child and parent will be desynched.\n\t\t\t\tvar parentContext = options.parent.observation && options.parent.observation.func || options.parent;\n\t\t\t\tvar childContext = options.child.observation && options.child.observation.func || options.child;\n\t\t\t\tparentValue = canReflect_1_19_2_canReflect.getValue(options.parent);\n\t\t\t\tchildValue = canReflect_1_19_2_canReflect.getValue(options.child);\n\t\t\t\tif (options.sticky && childValue !== parentValue) {\n\t\t\t\t\tcanLog.warn(\n\t\t\t\t\t\t\"can-bind: The \" +\n\t\t\t\t\t\t(options.sticky === \"parentSticksToChild\" ? \"parent\" : \"child\") +\n\t\t\t\t\t\t\" of the sticky two-way binding \" +\n\t\t\t\t\t\t(options.debugName || (canReflect_1_19_2_canReflect.getName(parentContext) + \"<->\" + canReflect_1_19_2_canReflect.getName(childContext))) +\n\t\t\t\t\t\t\" is changing or converting its value when set. Conversions should only be done on the binding \" +\n\t\t\t\t\t\t(options.sticky === \"parentSticksToChild\" ? \"child\" : \"parent\") +\n\t\t\t\t\t\t\" to preserve synchronization. \" +\n\t\t\t\t\t\t\"See https://canjs.com/doc/can-stache-bindings.html#StickyBindings for more about sticky bindings\"\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t\t//!steal-remove-end\n\n\t\t} else if (this._childToParent === true) {\n\t\t\t// One-way child -> parent, so update the parent\n\t\t\t// Check if we are to initialize the parent\n\t\t\tif (options.onInitDoNotUpdateParent === false) {\n\t\t\t\tchildValue = canReflect_1_19_2_canReflect.getValue(options.child);\n\t\t\t\tthis._updateParent(childValue);\n\t\t\t}\n\n\t\t} else if (this._parentToChild === true) {\n\t\t\t// One-way parent -> child, so update the child\n\t\t\t// Check if updating the child is allowed\n\t\t\tif (options.onInitDoNotUpdateChild === false) {\n\t\t\t\tparentValue = canReflect_1_19_2_canReflect.getValue(options.parent);\n\t\t\t\tthis._updateChild(parentValue);\n\t\t\t}\n\t\t}\n\t},\n\n\t// Listen for changes to the child observable and update the parent\n\tstartChild: function() {\n\t\tif (this._bindingState.child === false && this._childToParent === true) {\n\t\t\tvar options = this._options;\n\t\t\tthis._bindingState.child = true;\n\t\t\tturnOnListeningAndUpdate(options.child, options.parent, this._updateParent, options.queue);\n\t\t}\n\t},\n\n\t// Listen for changes to the parent observable and update the child\n\tstartParent: function() {\n\t\tif (this._bindingState.parent === false && this._parentToChild === true) {\n\t\t\tvar options = this._options;\n\t\t\tthis._bindingState.parent = true;\n\t\t\tturnOnListeningAndUpdate(options.parent, options.child, this._updateChild, options.queue);\n\t\t}\n\t},\n\n\t// Turn off all the bindings\n\tstop: function() {\n\t\tvar bindingState = this._bindingState;\n\t\tvar options = this._options;\n\n\t\t// Turn off the parent listener\n\t\tif (bindingState.parent === true && this._parentToChild === true) {\n\t\t\tbindingState.parent = false;\n\t\t\tturnOffListeningAndUpdate(options.parent, options.child, this._updateChild, options.queue);\n\t\t}\n\n\t\t// Turn off the child listener\n\t\tif (bindingState.child === true && this._childToParent === true) {\n\t\t\tbindingState.child = false;\n\t\t\tturnOffListeningAndUpdate(options.child, options.parent, this._updateParent, options.queue);\n\t\t}\n\t}\n\n});\n\n[\"parent\", \"child\"].forEach(function(property){\n\tObject.defineProperty(Bind.prototype, property, {\n\t\tget: function(){\n\t\t\treturn this._options[property];\n\t\t}\n\t});\n});\n\n\n\n// updateValue is a helper function that’s used by updateChild and updateParent\nfunction updateValue(args) {\n\t/* jshint validthis: true */\n\t// Check to see whether the binding is active; ignore updates if it isn’t active\n\tvar bindingState = args.bindingState;\n\tif (bindingState.child === false && bindingState.parent === false) {\n\t\t// We don’t warn the user about this because it’s a common occurrence in\n\t\t// can-stache-bindings, e.g. {{#if value}}<input value:bind=\"value\"/>{{/if}}\n\t\treturn;\n\t}\n\n\t// Now check the semaphore; if this change is happening because the partner\n\t// observable was just updated, we only want to update this observable again\n\t// if the total count for both semaphores is less than or equal to the number\n\t// of allowed updates.\n\tvar semaphore = args.semaphore;\n\tif ((semaphore.value + args.partnerSemaphore.value) <= args.allowedUpdates) {\n\t\tcanQueues_1_3_2_canQueues.batch.start();\n\n\t\t// Increase the semaphore so that when the batch ends, if an update to the\n\t\t// partner observable’s value is made, then it won’t update this observable\n\t\t// again unless cycles are allowed.\n\t\tsemaphore.increment(args);\n\n\t\t// Update the observable’s value; this uses either a custom function passed\n\t\t// in when the binding was initialized or canReflect.setValue.\n\t\targs.setValue(args.newValue, args.observable);\n\n\n\n\t\t// Decrease the semaphore after all other updates have occurred\n\t\tcanQueues_1_3_2_canQueues.mutateQueue.enqueue(semaphore.decrement, semaphore, []);\n\n\t\tcanQueues_1_3_2_canQueues.batch.stop();\n\n\t\t// Stickiness is used in cases where the call to args.setValue above might\n\t\t// have resulted in the observable being set to a different value than what\n\t\t// was passed into this function (args.newValue). If sticky:true, then set\n\t\t// the partner observable’s value so they’re kept in sync.\n\t\tif (args.sticky) {\n\t\t\tvar observableValue = canReflect_1_19_2_canReflect.getValue(args.observable);\n\t\t\tif (observableValue !== canReflect_1_19_2_canReflect.getValue(args.partner)) {\n\t\t\t\targs.setPartner(observableValue, args.partner);\n\t\t\t}\n\t\t}\n\n\t} else {\n\t\t// It’s natural for this “else” block to be hit in two-way bindings; as an\n\t\t// example, if a parent gets set and the child gets updated, the child’s\n\t\t// listener to update the parent will be called, but it’ll be ignored if we\n\t\t// don’t want cycles. HOWEVER, if this gets called and the parent is not the\n\t\t// same value as the child, then their values are going to be out of sync,\n\t\t// probably unintentionally. This is worth pointing out to developers\n\t\t// because it can cause unexpected behavior… some people call those bugs. :)\n\n\t\t//!steal-remove-start\n\t\tif(process.env.NODE_ENV !== 'production'){\n\t\t\tvar currentValue = canReflect_1_19_2_canReflect.getValue(args.observable);\n\t\t\tif (currentValue !== args.newValue) {\n\t\t\t\tvar warningParts = [\n\t\t\t\t\t\"can-bind: attempting to update \" + args.debugObservableName + \" \" + canReflect_1_19_2_canReflect.getName(args.observable) + \" to new value: %o\",\n\t\t\t\t\t\"…but the \" + args.debugObservableName + \" semaphore is at \" + semaphore.value + \" and the \" + args.debugPartnerName + \" semaphore is at \" + args.partnerSemaphore.value + \". The number of allowed updates is \" + args.allowedUpdates + \".\",\n\t\t\t\t\t\"The \" + args.debugObservableName + \" value will remain unchanged; it’s currently: %o. \",\n\t\t\t\t\t\"Read https://canjs.com/doc/can-bind.html#Warnings for more information. Printing mutation history:\"\n\t\t\t\t];\n\t\t\t\tcanLog.warn(warningParts.join(\"\\n\"), args.newValue, currentValue);\n\t\t\t\tif(console.groupCollapsed) {\n\t\t\t\t\t// stores the last stack we've seen so we only need to show what's happened since the\n\t\t\t\t\t// last increment.\n\t\t\t\t\tvar lastStack = [];\n\t\t\t\t\tvar getFromLastStack = function(stack){\n\t\t\t\t\t\tif(lastStack.length) {\n\t\t\t\t\t\t\t// walk backwards\n\t\t\t\t\t\t\tfor(var i = lastStack.length - 1; i >= 0 ; i--) {\n\t\t\t\t\t\t\t\tvar index = stack.indexOf(lastStack[i]);\n\t\t\t\t\t\t\t\tif(index !== - 1) {\n\t\t\t\t\t\t\t\t\treturn stack.slice(i+1);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn stack;\n\t\t\t\t\t};\n\t\t\t\t\t// Loop through all the debug information\n\t\t\t\t\t// And print out what caused increments.\n\t\t\t\t\tthis._debugSemaphores.forEach(function(semaphoreMutation){\n\t\t\t\t\t\tif(semaphoreMutation.action === \"increment\") {\n\t\t\t\t\t\t\tconsole.groupCollapsed(semaphoreMutation.type+\" \"+canReflect_1_19_2_canReflect.getName(semaphoreMutation.observable)+\" set.\");\n\t\t\t\t\t\t\tvar stack = canQueues_1_3_2_canQueues.stack(semaphoreMutation.lastTask);\n\t\t\t\t\t\t\tvar printStack = getFromLastStack(stack);\n\t\t\t\t\t\t\tlastStack = stack;\n\t\t\t\t\t\t\t// This steals how `logStack` logs information.\n\t\t\t\t\t\t\tcanQueues_1_3_2_canQueues.logStack.call({\n\t\t\t\t\t\t\t\tstack: function(){\n\t\t\t\t\t\t\t\t\treturn printStack;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tconsole.log(semaphoreMutation.type+ \" semaphore incremented to \"+semaphoreMutation.value+\".\");\n\t\t\t\t\t\t\tconsole.log(canReflect_1_19_2_canReflect.getName(semaphoreMutation.observable),semaphoreMutation.observable,\"set to \", semaphoreMutation.newValue);\n\t\t\t\t\t\t\tconsole.groupEnd();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tconsole.groupCollapsed(args.debugObservableName+\" \"+canReflect_1_19_2_canReflect.getName(args.observable)+\" NOT set.\");\n\t\t\t\t\tvar stack = getFromLastStack(canQueues_1_3_2_canQueues.stack());\n\t\t\t\t\tcanQueues_1_3_2_canQueues.logStack.call({\n\t\t\t\t\t\tstack: function(){\n\t\t\t\t\t\t\treturn stack;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tconsole.log(args.debugObservableName+\" semaphore (\"+semaphore.value+\n\t\t\t\t\t \") + \"+args.debugPartnerName+\" semaphore (\"+args.partnerSemaphore.value+ \") IS NOT <= allowed updates (\"+\n\t\t\t\t\t args.allowedUpdates+\")\");\n\t\t\t\t\tconsole.log(\"Prevented from setting \"+canReflect_1_19_2_canReflect.getName(args.observable), args.observable, \"to\", args.newValue);\n\t\t\t\t\tconsole.groupEnd();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t//!steal-remove-end\n\t}\n}\n\nvar canBind_1_5_1_canBind = canNamespace_1_0_0_canNamespace.Bind = Bind;\n\nconst value$1 = canValue_1_1_2_canValue;\n\n\n\n\n\n//!steal-remove-start\nif(process.env.NODE_ENV !== 'production') {\n\tvar Observation$1 = canObservation_4_2_0_canObservation;\n}\n//!steal-remove-end\n\nconst metaSymbol$6 = Symbol.for(\"can.meta\");\n\nfunction isJSONLike (obj) {\n\treturn (canReflect_1_19_2_canReflect.isFunctionLike(obj.parse) &&\n\t\t\tcanReflect_1_19_2_canReflect.isFunctionLike(obj.stringify));\n}\n\nfunction initializeFromAttribute (propertyName, ctr, converter, attributeName) {\n\tif (ctr[metaSymbol$6] === undefined) {\n\t\tctr[metaSymbol$6] = {};\n\t}\n\t// Create array for all attributes we want to listen to change events for\n\tif (ctr[metaSymbol$6]._observedAttributes === undefined) {\n\t\tctr[metaSymbol$6]._observedAttributes = [];\n\t}\n\t// Create object for attributeChangedCallback for each prop\n\tif (ctr[metaSymbol$6]._attributeChangedCallbackHandler === undefined) {\n\t\tctr[metaSymbol$6]._attributeChangedCallbackHandler = {};\n\t}\n\n\tif (attributeName === undefined) {\n\t\tattributeName = propertyName;\n\t}\n\t// Ensure the attributeName is hyphen case\n\tattributeName = canString_1_1_0_canString.hyphenate(attributeName);\n\n\t// Modify the class prototype here\n\tif (!ctr[metaSymbol$6]._hasInitializedAttributeBindings) {\n\t\t// Set up the static getter for `observedAttributes`\n\t\tObject.defineProperty(ctr, \"observedAttributes\", {\n\t\t\tget() {\n\t\t\t\treturn ctr[metaSymbol$6]._observedAttributes;\n\t\t\t}\n\t\t});\n\n\t\tctr.prototype.attributeChangedCallback = function (prop) {\n\t\t\tctr[metaSymbol$6]._attributeChangedCallbackHandler[prop].apply(this, arguments);\n\t\t};\n\n\t\tctr[metaSymbol$6]._hasInitializedAttributeBindings = true;\n\t}\n\t// Push into `_observedAttributes` for `observedAttributes` getter\n\tctr[metaSymbol$6]._observedAttributes.push(attributeName);\n\n\t// Create the attributeChangedCallback handler\n\tctr[metaSymbol$6]._attributeChangedCallbackHandler[attributeName] = function (prop, oldVal, newVal) {\n\t\tif (this[metaSymbol$6] && this[metaSymbol$6]._attributeBindings && newVal !== oldVal) {\n\t\t\tcanReflect_1_19_2_canReflect.setValue(this[metaSymbol$6]._attributeBindings[prop], newVal);\n\t\t}\n\t};\n\n\tvar lazyGetType = function() {\n\t\tvar Type;\n\t\tvar schema = canReflect_1_19_2_canReflect.getSchema(ctr);\n\t\tif(schema) {\n\t\t\tType = schema.keys[propertyName];\n\t\t}\n\t\tif(!Type) {\n\t\t\tType = canType_1_1_6_canType.Any;\n\t\t}\n\t\tType = canType_1_1_6_canType.convert(Type);\n\t\tlazyGetType = function() { return Type; };\n\t\treturn Type;\n\t};\n\tfunction convertToValue(value) {\n\t\tif (converter) {\n\t\t\tvalue = converter.parse(value);\n\t\t}\n\t\treturn canReflect_1_19_2_canReflect.convert(value, lazyGetType());\n\t}\n\n\treturn function fromAttributeBind (instance) {\n\t\t// Child binding used by `attributeChangedCallback` to update the value when an attribute change occurs\n\t\tconst childValue = value$1.to(instance, propertyName);\n\t\tconst intermediateValue = {};\n\t\tcanReflect_1_19_2_canReflect.assignSymbols(intermediateValue, {\n\t\t\t\"can.setValue\": function(value) {\n\t\t\t\tcanReflect_1_19_2_canReflect.setValue(childValue, convertToValue(value) );\n\t\t\t}\n\t\t});\n\t\tconst parentValue = value$1.from(instance.hasAttribute(attributeName) ?  convertToValue(instance.getAttribute(attributeName)) : undefined);\n\n\t\t//!steal-remove-start\n\t\tif(process.env.NODE_ENV !== 'production') {\n\t\t\t// Ensure pretty names for dep graph\n\t\t\tcanReflect_1_19_2_canReflect.assignSymbols(parentValue, {\n\t\t\t\t\"can.getName\": function getName() {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t\"FromAttribute<\" +\n\t\t\t\t\t\tinstance.nodeName.toLowerCase() +\n\t\t\t\t\t\t\".\" +\n\t\t\t\t\t\tattributeName +\n\t\t\t\t\t\t\">\"\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t});\n\t\t\tcanReflect_1_19_2_canReflect.assignSymbols(childValue, {\n\t\t\t\t\"can.getName\": function getName() {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t\"Observation<\" +\n\t\t\t\t\t\tcanReflect_1_19_2_canReflect.getName(parentValue) +\n\t\t\t\t\t\t\">\"\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t});\n\t\t\t// Create temporary binding to initialize dep graph\n\t\t\tObservation$1.temporarilyBind(childValue);\n\t\t}\n\t\t//!steal-remove-end\n\t\tconst bind = new canBind_1_5_1_canBind({\n\t\t\tparent: parentValue,\n\t\t\tchild: intermediateValue,\n\t\t\tqueue: \"dom\",\n\t\t\t// During initialization prevent update of child\n\t\t\tonInitDoNotUpdateChild: true\n\t\t});\n\n\t\tif (instance[metaSymbol$6] === undefined) {\n\t\t\tinstance[metaSymbol$6] = {};\n\t\t}\n\t\tif (instance[metaSymbol$6]._attributeBindings === undefined) {\n\t\t\tinstance[metaSymbol$6]._attributeBindings = {};\n\t\t}\n\n\t\t// Push binding so it can be used within `attributeChangedCallback`\n\t\tinstance[metaSymbol$6]._attributeBindings[attributeName] = intermediateValue;\n\n\t\treturn bind;\n\t};\n}\n\nvar canObservableBindings_1_3_3_fromAttribute = function fromAttribute (attributeName, ctr) {\n\tvar converter;\n\t// Handle the class constructor\n\tif (arguments.length === 2 && canReflect_1_19_2_canReflect.isConstructorLike(ctr) && !isJSONLike(ctr)) {\n\t\treturn initializeFromAttribute(attributeName, ctr);\n\t} else if (arguments.length === 1 && typeof attributeName === 'object') {\n\t\t// Handle fromAttribute(JSON)\n\t\tconverter = attributeName;\n\t\tattributeName = undefined;\n\t} else if (typeof ctr === 'object' && isJSONLike(ctr)) {\n\t\t// Handle the case where an attribute name\n\t\t// and JSON like converter is passed\n\t\t// fromAttribute('attr', JSON)\n\t\tconverter = ctr;\n\t}\n\t//!steal-remove-start\n\tif(process.env.NODE_ENV !== 'production') {\n\t\tif (converter && !isJSONLike(converter)) {\n\t\t\tthrow new Error('The passed converter object is wrong! The object must have \"parse\" and \"stringify\" methods!');\n\t\t}\n\t}\n\t//!steal-remove-end\n\treturn function (propertyName, ctr) {\n\t\treturn initializeFromAttribute(propertyName, ctr, converter, attributeName);\n\t};\n};\n\nvar setElementSymbol = canSymbol_1_7_0_canSymbol.for(\"can.setElement\");\n\n// SetterObservable's call a function when set. Their getter is backed up by an\n// observation.\nfunction SetterObservable(getter, setter) {\n\tthis.setter = setter;\n\tthis.observation = new canObservation_4_2_0_canObservation(getter);\n\tthis.handler = this.handler.bind(this);\n\n\t//!steal-remove-start\n\tif (process.env.NODE_ENV !== 'production') {\n\t\tcanReflect_1_19_2_canReflect.assignSymbols(this, {\n\t\t\t\"can.getName\": function() {\n\t\t\t\treturn (\n\t\t\t\t\tcanReflect_1_19_2_canReflect.getName(this.constructor) +\n\t\t\t\t\t\"<\" +\n\t\t\t\t\tcanReflect_1_19_2_canReflect.getName(getter) +\n\t\t\t\t\t\">\"\n\t\t\t\t);\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(this.handler, \"name\", {\n\t\t\tvalue: canReflect_1_19_2_canReflect.getName(this) + \".handler\"\n\t\t});\n\t}\n\t//!steal-remove-end\n}\n\nSetterObservable.prototype = Object.create(settable.prototype);\nSetterObservable.prototype.constructor = SetterObservable;\nSetterObservable.prototype.set = function(newVal) {\n\tthis.setter(newVal);\n};\nSetterObservable.prototype.hasDependencies = function() {\n\treturn canReflect_1_19_2_canReflect.valueHasDependencies(this.observation);\n};\ncanReflect_1_19_2_canReflect.assignSymbols(SetterObservable.prototype, {\n\t\"can.setValue\": SetterObservable.prototype.set,\n\t\"can.valueHasDependencies\": SetterObservable.prototype.hasDependencies,\n\t\"can.setElement\": function(el) {\n\t\tthis.observation[setElementSymbol](el);\n\t}\n});\n\nvar setter = SetterObservable;\n\nconst lifecycleStatusSymbol = Symbol.for(\"can.lifecycleStatus\");\nconst inSetupSymbol$4 = Symbol.for(\"can.initializing\");\nconst teardownHandlersSymbol = Symbol.for(\"can.teardownHandlers\");\n\nfunction defineConfigurableNonEnumerable(obj, prop, value) {\n\tObject.defineProperty(obj, prop, {\n\t\tconfigurable: true,\n\t\tenumerable: false,\n\t\twritable: true,\n\t\tvalue: value\n\t});\n}\n\nvar mixinLifecycleMethods = function mixinLifecycleMethods(BaseElement = HTMLElement) {\n\treturn class LifecycleElement extends BaseElement {\n\t\tconstructor() {\n\t\t\tsuper();\n\t\t\tif (arguments.length) {\n\t\t\t\tthrow new Error(\"can-stache-element: Do not pass arguments to the constructor. Initial property values should be passed to the `initialize` hook.\");\n\t\t\t}\n\n\t\t\t// add inSetup symbol to prevent events being dispatched\n\t\t\tdefineConfigurableNonEnumerable(this, inSetupSymbol$4, true);\n\n\t\t\t// add lifecycle status symbol\n\t\t\tdefineConfigurableNonEnumerable(this, lifecycleStatusSymbol, {\n\t\t\t\tinitialized: false,\n\t\t\t\trendered: false,\n\t\t\t\tconnected: false,\n\t\t\t\tdisconnected: false\n\t\t\t});\n\n\t\t\t// add a place to store additional teardownHandlers\n\t\t\tdefineConfigurableNonEnumerable(this, teardownHandlersSymbol, []);\n\t\t}\n\n\t\t// custom element lifecycle methods\n\t\tconnectedCallback(props) {\n\t\t\tthis.initialize(props);\n\t\t\tthis.render();\n\t\t\tthis.connect();\n\t\t\treturn this;\n\t\t}\n\n\t\tdisconnectedCallback() {\n\t\t\tthis.disconnect();\n\t\t\treturn this;\n\t\t}\n\n\t\t// custom lifecycle methods\n\t\tinitialize(props) {\n\t\t\tconst lifecycleStatus = this[lifecycleStatusSymbol];\n\n\t\t\tif (lifecycleStatus.initialized) {\n\t\t\t\treturn this;\n\t\t\t}\n\n\t\t\t// Overwrite ... this means that this initialize\n\t\t\t// can't be inherited (super.initialize).\n\t\t\tthis[inSetupSymbol$4] = true;\n\n\t\t\tif (super.initialize) {\n\t\t\t\tsuper.initialize(props);\n\t\t\t}\n\n\t\t\tthis[inSetupSymbol$4] = false;\n\n\t\t\tlifecycleStatus.initialized = true;\n\n\t\t\treturn this;\n\t\t}\n\n\t\trender(props) {\n\t\t\tconst lifecycleStatus = this[lifecycleStatusSymbol];\n\n\t\t\tif (lifecycleStatus.rendered) {\n\t\t\t\treturn this;\n\t\t\t}\n\n\t\t\tif (!lifecycleStatus.initialized) {\n\t\t\t\tthis.initialize(props);\n\t\t\t}\n\n\t\t\tif (super.render) {\n\t\t\t\tsuper.render(props);\n\t\t\t}\n\n\t\t\tlifecycleStatus.rendered = true;\n\n\t\t\treturn this;\n\t\t}\n\n\t\tconnect(props) {\n\t\t\tconst lifecycleStatus = this[lifecycleStatusSymbol];\n\n\t\t\tif (lifecycleStatus.connected) {\n\t\t\t\treturn this;\n\t\t\t}\n\n\t\t\tif (!lifecycleStatus.initialized) {\n\t\t\t\tthis.initialize(props);\n\t\t\t}\n\n\t\t\tif (!lifecycleStatus.rendered) {\n\t\t\t\tthis.render(props);\n\t\t\t}\n\n\t\t\tif (super.connect) {\n\t\t\t\tsuper.connect(props);\n\t\t\t}\n\n\t\t\tif (this.connected) {\n\t\t\t\tlet connectedTeardown = this.connected();\n\t\t\t\tif (typeof connectedTeardown === \"function\") {\n\t\t\t\t\tthis[teardownHandlersSymbol].push(connectedTeardown);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlifecycleStatus.connected = true;\n\t\t\tlifecycleStatus.disconnected = false;\n\n\t\t\treturn this;\n\t\t}\n\n\t\tdisconnect() {\n\t\t\tconst lifecycleStatus = this[lifecycleStatusSymbol];\n\n\t\t\tif (lifecycleStatus.disconnected) {\n\t\t\t\treturn this;\n\t\t\t}\n\n\t\t\tif (super.disconnect) {\n\t\t\t\tsuper.disconnect();\n\t\t\t}\n\n\t\t\tif (this.stopListening) {\n\t\t\t\tthis.stopListening();\n\t\t\t}\n\n\t\t\tfor (let handler of this[teardownHandlersSymbol]) {\n\t\t\t\thandler.call(this);\n\t\t\t}\n\n\t\t\tif (this.disconnected) {\n\t\t\t\tthis.disconnected();\n\t\t\t}\n\n\t\t\tthis[lifecycleStatusSymbol] = {\n\t\t\t\tinitialized: false,\n\t\t\t\trendered: false,\n\t\t\t\tconnected: false,\n\t\t\t\tdisconnected: true\n\t\t\t};\n\n\t\t\treturn this;\n\t\t}\n\t};\n};\n\nconst { mixinElement: mixinElement$1, mixins: mixins$5 } = mixins;\n\n\nconst eventTargetInstalledSymbol = Symbol.for(\"can.eventTargetInstalled\");\n\nvar mixinProps = function mixinDefine(Base = HTMLElement) {\n\tconst realAddEventListener = Base.prototype.addEventListener;\n\tconst realRemoveEventListener = Base.prototype.removeEventListener;\n\n\tfunction installEventTarget(Type) {\n\t\tif(Type[eventTargetInstalledSymbol]) {\n\t\t\treturn;\n\t\t}\n\t\tconst eventQueueAddEventListener = Type.prototype.addEventListener;\n\t\tconst eventQueueRemoveEventListener = Type.prototype.removeEventListener;\n\t\tType.prototype.addEventListener = function() {\n\t\t\teventQueueAddEventListener.apply(this, arguments);\n\t\t\treturn realAddEventListener.apply(this, arguments);\n\t\t};\n\t\tType.prototype.removeEventListener = function() {\n\t\t\teventQueueRemoveEventListener.apply(this, arguments);\n\t\t\treturn realRemoveEventListener.apply(this, arguments);\n\t\t};\n\t\tType[eventTargetInstalledSymbol] = true;\n\t}\n\n\t// Warn on special properties\n\t//!steal-remove-start\n\tfunction raisePropWarnings(Type, Base) {\n\t\tif(process.env.NODE_ENV !== 'production') {\n\t\t\t// look for `static props`and fall back to `static define` if `props` doesn't exist\n\t\t\tlet props = typeof Type.props === \"object\" ?\n\t\t\t\tType.props :\n\t\t\t\ttypeof Type.define === \"object\" ?\n\t\t\t\t\tType.define :\n\t\t\t\t\t{};\n\t\t\t\n\t\t\tObject.keys(props).forEach(function(key) {\n\t\t\t\tif(\"on\" + key in Type.prototype) {\n\t\t\t\t\tdev.warn(`${canReflect_1_19_2_canReflect.getName(Type)}: The defined property [${key}] matches the name of a DOM event. This property could update unexpectedly. Consider renaming.`);\n\t\t\t\t}\n\t\t\t\telse if(key in Base.prototype) {\n\t\t\t\t\tdev.warn(`${canReflect_1_19_2_canReflect.getName(Type)}: The defined property [${key}] matches the name of a property on the type being extended, ${canReflect_1_19_2_canReflect.getName(Base)}. This could lead to errors by changing the expected behaviour of that property. Consider renaming.`);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\t//!steal-remove-end\n\n\tclass DefinedClass extends mixinElement$1(Base) {\n\t\tconstructor() {\n\t\t\tsuper();\n\t\t\t//!steal-remove-start\n\t\t\traisePropWarnings(this.constructor, Base);\n\t\t\t//!steal-remove-end\n\t\t\tinstallEventTarget(this.constructor);\n\t\t}\n\n\t\tinitialize(props) {\n\t\t\tsuper.initialize(props);\n\t\t\tlet prop, staticProps;\n\n\t\t\tif (this.constructor.props) {\n\t\t\t\tstaticProps = Object.keys(this.constructor.props);\n\t\t\t}\n\n\t\t\tfor (prop in this) {\n\t\t\t\tif (this.hasOwnProperty(prop)) {\n\t\t\t\t\tif (staticProps && staticProps.includes(prop)) {\n\t\t\t\t\t\tconst val = this[prop];\n\t\t\t\t\t\tdelete this[prop];\n\t\t\t\t\t\tthis[prop] = val;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tmixins$5.expando(this, prop, this[prop]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\t}\n\n\treturn DefinedClass;\n};\n\nvar canAttributeEncoder_1_1_4_canAttributeEncoder = createCommonjsModule(function (module) {\n\n\n\n/**\n * @module {{}} can-attribute-encoder can-attribute-encoder\n * @parent can-dom-utilities\n * @collection can-infrastructure\n * @package ./package.json\n *\n * Encode and decode attribute names.\n *\n * @option {Object} An object with the methods:\n * [can-attribute-encoder.encode] and [can-attribute-encoder.decode].\n *\n */\n\n\nfunction each(items, callback){\n\tfor ( var i = 0; i < items.length; i++ ) {\n\t\tcallback(items[i], i);\n\t}\n}\n\nfunction makeMap(str){\n\tvar obj = {}, items = str.split(\",\");\n\teach(items, function(name){\n\t\tobj[name] = true;\n\t});\n\treturn obj;\n}\n\n// Attributes for which the case matters - shouldn’t be lowercased.\nvar caseMattersAttributes = makeMap(\"allowReorder,attributeName,attributeType,autoReverse,baseFrequency,baseProfile,calcMode,clipPathUnits,contentScriptType,contentStyleType,diffuseConstant,edgeMode,externalResourcesRequired,filterRes,filterUnits,glyphRef,gradientTransform,gradientUnits,kernelMatrix,kernelUnitLength,keyPoints,keySplines,keyTimes,lengthAdjust,limitingConeAngle,markerHeight,markerUnits,markerWidth,maskContentUnits,maskUnits,patternContentUnits,patternTransform,patternUnits,pointsAtX,pointsAtY,pointsAtZ,preserveAlpha,preserveAspectRatio,primitiveUnits,repeatCount,repeatDur,requiredExtensions,requiredFeatures,specularConstant,specularExponent,spreadMethod,startOffset,stdDeviation,stitchTiles,surfaceScale,systemLanguage,tableValues,textLength,viewBox,viewTarget,xChannelSelector,yChannelSelector,controlsList\");\n\nfunction camelCaseToSpinalCase(match, lowerCaseChar, upperCaseChar) {\n\treturn lowerCaseChar + \"-\" + upperCaseChar.toLowerCase();\n}\n\nfunction startsWith(allOfIt, startsWith) {\n\treturn allOfIt.indexOf(startsWith) === 0;\n}\n\nfunction endsWith(allOfIt, endsWith) {\n\treturn (allOfIt.length - allOfIt.lastIndexOf(endsWith)) === endsWith.length;\n}\n\nvar regexes = {\n\tleftParens: /\\(/g,\n\trightParens: /\\)/g,\n\tleftBrace: /\\{/g,\n\trightBrace: /\\}/g,\n\tcamelCase: /([a-z]|[0-9]|^)([A-Z])/g,\n\tforwardSlash: /\\//g,\n\tspace: /\\s/g,\n\tuppercase: /[A-Z]/g,\n\tuppercaseDelimiterThenChar: /:u:([a-z])/g,\n\tcaret: /\\^/g,\n\tdollar: /\\$/g,\n\tat: /@/g\n};\n\nvar delimiters = {\n\tprependUppercase: ':u:',\n\treplaceSpace: ':s:',\n\treplaceForwardSlash: ':f:',\n\treplaceLeftParens: ':lp:',\n\treplaceRightParens: ':rp:',\n\treplaceLeftBrace: ':lb:',\n\treplaceRightBrace: ':rb:',\n\treplaceCaret: ':c:',\n\treplaceDollar: ':d:',\n\treplaceAt: ':at:'\n};\n\nvar encoder = {};\n\n/**\n * @function can-attribute-encoder.encode encode\n * @parent can-attribute-encoder\n * @description Encode an attribute name\n *\n * @signature `encoder.encode(attributeName)`\n *\n * Note: specific encoding may change, but encoded attributes\n * can always be decoded using [can-attribute-encoder.decode].\n *\n * @body\n *\n * ```js\n * var encodedAttributeName = encoder.encode(\"{(^$foo/bar baz)}\");\n * div.setAttribute(encodedAttributeName, \"attribute value\");\n * ```\n *\n * @param {String} attributeName The attribute name.\n * @return {String} The encoded attribute name.\n *\n */\nencoder.encode = function(name) {\n\tvar encoded = name;\n\n\t// encode or convert camelCase attributes unless in list of attributes\n\t// where case matters\n\tif (!caseMattersAttributes[encoded] && encoded.match(regexes.camelCase)) {\n\t\t// encode uppercase characters in new bindings\n\t\t// - on:fooBar, fooBar:to, fooBar:from, fooBar:bind\n\t\tif (\n\t\t\tstartsWith(encoded, 'on:') ||\n\t\t\tendsWith(encoded, ':to') ||\n\t\t\tendsWith(encoded, ':from') ||\n\t\t\tendsWith(encoded, ':bind') ||\n\t\t\tendsWith(encoded, ':raw')\n\t\t) {\n\t\t\tencoded = encoded\n\t\t\t\t.replace(regexes.uppercase, function(char) {\n\t\t\t\t\treturn delimiters.prependUppercase + char.toLowerCase();\n\t\t\t\t});\n\t\t} else if(startsWith(encoded, '(') || startsWith(encoded, '{')) {\n\t\t\t// convert uppercase characters in older bindings to kebab-case\n\t\t\t// - {fooBar}, (fooBar), {(fooBar)}\n\t\t\tencoded = encoded.replace(regexes.camelCase, camelCaseToSpinalCase);\n\t\t\t//!steal-remove-start\n\t\t\tif(process.env.NODE_ENV !== 'production') {\n\t\t\t\tdev.warn(\"can-attribute-encoder: Found attribute with name: \" + name + \". Converting to: \" + encoded + '.');\n\t\t\t}\n\t\t\t//!steal-remove-end\n\t\t}\n\t}\n\n\t//encode spaces\n\tencoded = encoded.replace(regexes.space, delimiters.replaceSpace)\n\t\t//encode forward slashes\n\t\t.replace(regexes.forwardSlash, delimiters.replaceForwardSlash)\n\t\t// encode left parentheses\n\t\t.replace(regexes.leftParens, delimiters.replaceLeftParens)\n\t\t// encode right parentheses\n\t\t.replace(regexes.rightParens, delimiters.replaceRightParens)\n\t\t// encode left braces\n\t\t.replace(regexes.leftBrace, delimiters.replaceLeftBrace)\n\t\t// encode left braces\n\t\t.replace(regexes.rightBrace, delimiters.replaceRightBrace)\n\t\t// encode ^\n\t\t.replace(regexes.caret, delimiters.replaceCaret)\n\t\t// encode $\n\t\t.replace(regexes.dollar, delimiters.replaceDollar)\n\t\t// encode @\n\t\t.replace(regexes.at, delimiters.replaceAt);\n\n\treturn encoded;\n};\n\n/**\n * @function can-attribute-encoder.decode decode\n * @parent can-attribute-encoder\n * @description Decode an attribute name encoded by [can-attribute-encoder.encode]\n * @signature `encoder.decode(attributeName)`\n *\n * @body\n *\n * ```js\n * encoder.decode(attributeName); // -> \"{(^$foo/bar baz)}\"\n *\n * ```\n *\n * @param {String} attributeName The encoded attribute name.\n * @return {String} The decoded attribute name.\n *\n */\nencoder.decode = function(name) {\n\tvar decoded = name;\n\n\t// decode uppercase characters in new bindings\n\tif (!caseMattersAttributes[decoded] && regexes.uppercaseDelimiterThenChar.test(decoded)) {\n\t\tif (\n\t\t\tstartsWith(decoded, 'on:') ||\n\t\t\tendsWith(decoded, ':to') ||\n\t\t\tendsWith(decoded, ':from') ||\n\t\t\tendsWith(decoded, ':bind') ||\n\t\t\tendsWith(decoded, ':raw')\n\t\t) {\n\t\t\tdecoded = decoded\n\t\t\t\t.replace(regexes.uppercaseDelimiterThenChar, function(match, char) {\n\t\t\t\t\treturn char.toUpperCase();\n\t\t\t\t});\n\t\t}\n\t}\n\n\t// decode left parentheses\n\tdecoded = decoded.replace(delimiters.replaceLeftParens, '(')\n\t\t// decode right parentheses\n\t\t.replace(delimiters.replaceRightParens, ')')\n\t\t// decode left braces\n\t\t.replace(delimiters.replaceLeftBrace, '{')\n\t\t// decode left braces\n\t\t.replace(delimiters.replaceRightBrace, '}')\n\t\t// decode forward slashes\n\t\t.replace(delimiters.replaceForwardSlash, '/')\n\t\t// decode spaces\n\t\t.replace(delimiters.replaceSpace, ' ')\n\t\t// decode ^\n\t\t.replace(delimiters.replaceCaret, '^')\n\t\t//decode $\n\t\t.replace(delimiters.replaceDollar, '$')\n\t\t//decode @\n\t\t.replace(delimiters.replaceAt, '@');\n\n\treturn decoded;\n};\n\nif (canNamespace_1_0_0_canNamespace.encoder) {\n\tthrow new Error(\"You can't have two versions of can-attribute-encoder, check your dependencies\");\n} else {\n\tmodule.exports = canNamespace_1_0_0_canNamespace.encoder = encoder;\n}\n});\n\n/* jshint maxdepth:7,node:true, latedef:false */\n\n\nfunction each(items, callback){\n\tfor ( var i = 0; i < items.length; i++ ) {\n\t\tcallback(items[i], i);\n\t}\n}\n\nfunction makeMap$1(str){\n\tvar obj = {}, items = str.split(\",\");\n\teach(items, function(name){\n\t\tobj[name] = true;\n\t});\n\treturn obj;\n}\n\nfunction handleIntermediate(intermediate, handler){\n\tfor(var i = 0, len = intermediate.length; i < len; i++) {\n\t\tvar item = intermediate[i];\n\t\thandler[item.tokenType].apply(handler, item.args);\n\t}\n\treturn intermediate;\n}\n\n//!steal-remove-start\nif (process.env.NODE_ENV !== 'production') {\n\t//assign the function to a var to avoid jshint\n\t//\"Function declarations should not be placed in blocks\"\n\tvar countLines = function countLines(input) {\n\t\t// TODO: optimize?\n\t\treturn input.split('\\n').length - 1;\n\t};\n}\n//!steal-remove-end\n\nvar alphaNumeric = \"A-Za-z0-9\",\n\talphaNumericHU = \"-:_\"+alphaNumeric,\n\tmagicStart = \"{{\",\n\tendTag = new RegExp(\"^<\\\\/([\"+alphaNumericHU+\"]+)[^>]*>\"),\n\tmagicMatch = new RegExp(\"\\\\{\\\\{(![\\\\s\\\\S]*?!|[\\\\s\\\\S]*?)\\\\}\\\\}\\\\}?\",\"g\"),\n\tspace = /\\s/,\n\talphaRegex = new RegExp('['+ alphaNumeric + ']'),\n\tattributeRegexp = new RegExp(\"[\"+alphaNumericHU+\"]+\\s*=\\s*(\\\"[^\\\"]*\\\"|'[^']*')\");\n\n// Empty Elements - HTML 5\nvar empty = makeMap$1(\"area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed\");\n\n// Elements for which tag case matters - shouldn't be lowercased.\nvar caseMattersElements = makeMap$1(\"altGlyph,altGlyphDef,altGlyphItem,animateColor,animateMotion,animateTransform,clipPath,feBlend,feColorMatrix,feComponentTransfer,feComposite,feConvolveMatrix,feDiffuseLighting,feDisplacementMap,feDistantLight,feFlood,feFuncA,feFuncB,feFuncG,feFuncR,feGaussianBlur,feImage,feMerge,feMergeNode,feMorphology,feOffset,fePointLight,feSpecularLighting,feSpotLight,feTile,feTurbulence,foreignObject,glyphRef,linearGradient,radialGradient,textPath\");\n\n// Elements that you can, intentionally, leave open\n// (and which close themselves)\nvar closeSelf = makeMap$1(\"colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr\");\n\n// Special Elements (can contain anything)\nvar special = makeMap$1(\"script\");\n\n// Callback names on `handler`.\nvar tokenTypes = \"start,end,close,attrStart,attrEnd,attrValue,chars,comment,special,done\".split(\",\");\n\n//maps end characters to start characters\nvar startOppositesMap = {\"{\": \"}\", \"(\":\")\"};\n\nvar fn = function(){};\n\nvar HTMLParser = function (html, handler, returnIntermediate) {\n\tif(typeof html === \"object\") {\n\t\treturn handleIntermediate(html, handler);\n\t}\n\n\tvar intermediate = [];\n\thandler = handler || {};\n\tif(returnIntermediate) {\n\t\t// overwrite handlers so they add to intermediate\n\t\teach(tokenTypes, function(name){\n\t\t\tvar callback = handler[name] || fn;\n\t\t\thandler[name] = function(){\n\t\t\t\tif( callback.apply(this, arguments) !== false ) {\n\t\t\t\t\tvar end = arguments.length;\n\n\t\t\t\t\t// the intermediate is stringified in the compiled stache templates\n\t\t\t\t\t// so we want to trim the last item if it is the line number\n\t\t\t\t\tif (arguments[end - 1] === undefined) {\n\t\t\t\t\t\tend = arguments.length - 1;\n\t\t\t\t\t}\n\n\t\t\t\t\t//!steal-remove-start\n\t\t\t\t\tif (process.env.NODE_ENV !== 'production') {\n\t\t\t\t\t\t// but restore line number in dev mode\n\t\t\t\t\t\tend = arguments.length;\n\t\t\t\t\t}\n\t\t\t\t\t//!steal-remove-end\n\n\t\t\t\t\tintermediate.push({\n\t\t\t\t\t\ttokenType: name,\n\t\t\t\t\t\targs: [].slice.call(arguments, 0, end),\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t};\n\t\t});\n\t}\n\n\tfunction parseStartTag(tag, tagName, rest, unary) {\n\t\ttagName = caseMattersElements[tagName] ? tagName : tagName.toLowerCase();\n\n\t\tif (closeSelf[tagName] && stack.last() === tagName) {\n\t\t\tparseEndTag(\"\", tagName);\n\t\t}\n\n\t\tunary = empty[tagName] || !!unary;\n\t\thandler.start(tagName, unary, lineNo);\n\t\tif (!unary) {\n\t\t\tstack.push(tagName);\n\t\t}\n\n\t\t// find attribute or special\n\t\tHTMLParser.parseAttrs(rest, handler, lineNo);\n\n\t\t//!steal-remove-start\n\t\tif (process.env.NODE_ENV !== 'production') {\n\t\t\tlineNo += countLines(tag);\n\t\t}\n\t\t//!steal-remove-end\n\n\n\t\thandler.end(tagName, unary, lineNo);\n\n\t\tif(tagName === \"html\") {\n\t\t\tskipChars = true;\n\t\t}\n\t}\n\n\tfunction parseEndTag(tag, tagName) {\n\t\t// If no tag name is provided, clean shop\n\t\tvar pos;\n\t\tif (!tagName) {\n\t\t\tpos = 0;\n\t\t}\n\t\t// Find the closest opened tag of the same type\n\t\telse {\n\t\t\ttagName = caseMattersElements[tagName] ? tagName : tagName.toLowerCase();\n\t\t\tfor (pos = stack.length - 1; pos >= 0; pos--) {\n\t\t\t\tif (stack[pos] === tagName) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t//!steal-remove-start\n\t\tif (process.env.NODE_ENV !== 'production') {\n\t\t\tif (typeof tag === 'undefined') {\n\t\t\t\tif (stack.length > 0) {\n\t\t\t\t\tif (handler.filename) {\n\t\t\t\t\t\tdev.warn(handler.filename + \": expected closing tag </\" + stack[pos] + \">\");\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tdev.warn(\"expected closing tag </\" + stack[pos] + \">\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (pos < 0 || pos !== stack.length - 1) {\n\t\t\t\tif (stack.length > 0) {\n\t\t\t\t\tif (handler.filename) {\n\t\t\t\t\t\tdev.warn(handler.filename + \":\" + lineNo + \": unexpected closing tag \" + tag + \" expected </\" + stack[stack.length - 1] + \">\");\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tdev.warn(lineNo + \": unexpected closing tag \" + tag + \" expected </\" + stack[stack.length - 1] + \">\");\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (handler.filename) {\n\t\t\t\t\t\tdev.warn(handler.filename + \":\" + lineNo + \": unexpected closing tag \" + tag);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tdev.warn(lineNo + \": unexpected closing tag \" + tag);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t//!steal-remove-end\n\n\t\tif (pos >= 0) {\n\t\t\t// Close all the open elements, up the stack\n\t\t\tfor (var i = stack.length - 1; i >= pos; i--) {\n\t\t\t\tif (handler.close) {\n\t\t\t\t\thandler.close(stack[i], lineNo);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Remove the open elements from the stack\n\t\t\tstack.length = pos;\n\n\t\t\t// Don't add TextNodes after the <body> tag\n\t\t\tif(tagName === \"body\") {\n\t\t\t\tskipChars = true;\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction parseMustache(mustache, inside){\n\t\tif(handler.special){\n\t\t\thandler.special(inside, lineNo);\n\t\t}\n\t}\n\n\tvar callChars = function(){\n\t\tif(charsText && !skipChars) {\n\t\t\tif(handler.chars) {\n\t\t\t\thandler.chars(charsText, lineNo);\n\t\t\t}\n\n\t\t\t//!steal-remove-start\n\t\t\tif (process.env.NODE_ENV !== 'production') {\n\t\t\t\tlineNo += countLines(charsText);\n\t\t\t}\n\t\t\t//!steal-remove-end\n\t\t}\n\n\t\tskipChars = false;\n\t\tcharsText = \"\";\n\t};\n\n\tvar index,\n\t\tchars,\n\t\tskipChars,\n\t\tmatch,\n\t\tlineNo,\n\t\tstack = [],\n\t\tlast = html,\n\t\t// an accumulating text for the next .chars callback\n\t\tcharsText = \"\";\n\n\t//!steal-remove-start\n\tif (process.env.NODE_ENV !== 'production') {\n\t\tlineNo = 1;\n\t}\n\t//!steal-remove-end\n\n\tstack.last = function () {\n\t\treturn this[this.length - 1];\n\t};\n\n\twhile (html) {\n\n\t\tchars = true;\n\n\t\t// Make sure we're not in a script or style element\n\t\tif (!stack.last() || !special[stack.last()]) {\n\n\t\t\t// Comment\n\t\t\tif (html.indexOf(\"<!--\") === 0) {\n\t\t\t\tindex = html.indexOf(\"-->\");\n\n\t\t\t\tif (index >= 0) {\n\t\t\t\t\tcallChars();\n\t\t\t\t\tif (handler.comment) {\n\t\t\t\t\t\thandler.comment(html.substring(4, index), lineNo);\n\t\t\t\t\t}\n\n\t\t\t\t\t//!steal-remove-start\n\t\t\t\t\tif (process.env.NODE_ENV !== 'production') {\n\t\t\t\t\t\tlineNo += countLines(html.substring(0, index + 3));\n\t\t\t\t\t}\n\t\t\t\t\t//!steal-remove-end\n\n\t\t\t\t\thtml = html.substring(index + 3);\n\t\t\t\t\tchars = false;\n\t\t\t\t}\n\n\t\t\t\t// end tag\n\t\t\t} else if (html.indexOf(\"</\") === 0) {\n\t\t\t\tmatch = html.match(endTag);\n\n\t\t\t\tif (match) {\n\t\t\t\t\tcallChars();\n\t\t\t\t\tmatch[0].replace(endTag, parseEndTag);\n\n\t\t\t\t\t//!steal-remove-start\n\t\t\t\t\tif (process.env.NODE_ENV !== 'production') {\n\t\t\t\t\t\tlineNo += countLines(html.substring(0, match[0].length));\n\t\t\t\t\t}\n\t\t\t\t\t//!steal-remove-end\n\n\t\t\t\t\thtml = html.substring(match[0].length);\n\t\t\t\t\tchars = false;\n\t\t\t\t}\n\n\t\t\t\t// start tag\n\t\t\t} else if (html.indexOf(\"<\") === 0) {\n\t\t\t\tvar res = HTMLParser.searchStartTag(html);\n\n\t\t\t\tif(res) {\n\t\t\t\t\tcallChars();\n\t\t\t\t\tparseStartTag.apply(null, res.match);\n\n\t\t\t\t\thtml = res.html;\n\t\t\t\t\tchars = false;\n\t\t\t\t}\n\n\t\t\t\t// magic tag\n\t\t\t} else if (html.indexOf(magicStart) === 0 ) {\n\t\t\t\tmatch = html.match(magicMatch);\n\n\t\t\t\tif (match) {\n\t\t\t\t\tcallChars();\n\t\t\t\t\tmatch[0].replace(magicMatch, parseMustache);\n\n\t\t\t\t\t//!steal-remove-start\n\t\t\t\t\tif (process.env.NODE_ENV !== 'production') {\n\t\t\t\t\t\tlineNo += countLines(html.substring(0, match[0].length));\n\t\t\t\t\t}\n\t\t\t\t\t//!steal-remove-end\n\n\t\t\t\t\thtml = html.substring(match[0].length);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (chars) {\n\t\t\t\tindex = findBreak(html, magicStart);\n\t\t\t\tif(index === 0 && html === last) {\n\t\t\t\t\tcharsText += html.charAt(0);\n\t\t\t\t\thtml = html.substr(1);\n\t\t\t\t\tindex = findBreak(html, magicStart);\n\t\t\t\t}\n\n\t\t\t\tvar text = index < 0 ? html : html.substring(0, index);\n\t\t\t\thtml = index < 0 ? \"\" : html.substring(index);\n\n\t\t\t\tif (text) {\n\t\t\t\t\tcharsText += text;\n\t\t\t\t}\n\t\t\t}\n\n\t\t} else {\n\t\t\thtml = html.replace(new RegExp(\"([\\\\s\\\\S]*?)<\\/\" + stack.last() + \"[^>]*>\"), function (all, text) {\n\t\t\t\ttext = text.replace(/<!--([\\s\\S]*?)-->|<!\\[CDATA\\[([\\s\\S]*?)]]>/g, \"$1$2\");\n\t\t\t\tif (handler.chars) {\n\t\t\t\t\thandler.chars(text, lineNo);\n\t\t\t\t}\n\n\t\t\t\t//!steal-remove-start\n\t\t\t\tif (process.env.NODE_ENV !== 'production') {\n\t\t\t\t\tlineNo += countLines(text);\n\t\t\t\t}\n\t\t\t\t//!steal-remove-end\n\n\t\t\t\treturn \"\";\n\t\t\t});\n\n\t\t\tparseEndTag(\"\", stack.last());\n\t\t}\n\n\t\tif (html === last) {\n\t\t\tthrow new Error(\"Parse Error: \" + html);\n\t\t}\n\n\t\tlast = html;\n\t}\n\tcallChars();\n\t// Clean up any remaining tags\n\tparseEndTag();\n\n\n\thandler.done(lineNo);\n\treturn intermediate;\n};\n\nvar callAttrStart = function(state, curIndex, handler, rest, lineNo){\n\tvar attrName = rest.substring(typeof state.nameStart === \"number\" ? state.nameStart : curIndex, curIndex),\n\t\tnewAttrName = canAttributeEncoder_1_1_4_canAttributeEncoder.encode(attrName);\n\n\tstate.attrStart = newAttrName;\n\thandler.attrStart(state.attrStart, lineNo);\n\tstate.inName = false;\n};\n\nvar callAttrEnd = function(state, curIndex, handler, rest, lineNo){\n\tif(state.valueStart !== undefined && state.valueStart < curIndex) {\n\t\tvar val = rest.substring(state.valueStart, curIndex);\n\t\t//!steal-remove-start\n\t\tif (process.env.NODE_ENV !== 'production') {\n\t\t\tvar quotedVal, closedQuote;\n\t\t\tquotedVal = rest.substring(state.valueStart - 1, curIndex + 1);\n\t\t\tquotedVal = quotedVal.trim();\n\t\t\tclosedQuote = quotedVal.charAt(quotedVal.length - 1);\n\n\t\t\tif (state.inQuote !== closedQuote) {\n\t\t\t\tif (handler.filename) {\n\t\t\t\t\tdev.warn(handler.filename + \":\" + lineNo + \": End quote is missing for \" + val);\n\t\t\t\t} else {\n\t\t\t\t\tdev.warn(lineNo + \": End quote is missing for \" + val);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t//!steal-remove-end\n\t\thandler.attrValue(val, lineNo);\n\t}\n\t// if this never got to be inValue, like `DISABLED` then send a attrValue\n\t// else if(!state.inValue){\n\t// \thandler.attrValue(state.attrStart, lineNo);\n\t// }\n\n\thandler.attrEnd(state.attrStart, lineNo);\n\tstate.attrStart = undefined;\n\tstate.valueStart = undefined;\n\tstate.inValue = false;\n\tstate.inName = false;\n\tstate.lookingForEq = false;\n\tstate.inQuote = false;\n\tstate.lookingForName = true;\n};\n\nvar findBreak = function(str, magicStart) {\n\tvar magicLength = magicStart.length;\n\tfor(var i = 0, len = str.length; i < len; i++) {\n\t\tif(str[i] === \"<\" || str.substr(i, magicLength) === magicStart) {\n\t\t\treturn i;\n\t\t}\n\t}\n\treturn -1;\n};\n\nHTMLParser.parseAttrs = function(rest, handler, lineNo){\n\tif(!rest) {\n\t\treturn;\n\t}\n\n\tvar i = 0;\n\tvar curIndex;\n\tvar state = {\n\t\tinName: false,\n\t\tnameStart: undefined,\n\t\tinValue: false,\n\t\tvalueStart: undefined,\n\t\tinQuote: false,\n\t\tattrStart: undefined,\n\t\tlookingForName: true,\n\t\tlookingForValue: false,\n\t\tlookingForEq : false\n\t};\n\n\twhile(i < rest.length) {\n\t\tcurIndex = i;\n\t\tvar cur = rest.charAt(i);\n\t\ti++;\n\n\t\tif(magicStart === rest.substr(curIndex, magicStart.length) ) {\n\t\t\tif(state.inValue && curIndex > state.valueStart) {\n\t\t\t\thandler.attrValue(rest.substring(state.valueStart, curIndex), lineNo);\n\t\t\t}\n\t\t\t// `{{#foo}}DISABLED{{/foo}}`\n\t\t\telse if(state.inName && state.nameStart < curIndex) {\n\t\t\t\tcallAttrStart(state, curIndex, handler, rest, lineNo);\n\t\t\t\tcallAttrEnd(state, curIndex, handler, rest, lineNo);\n\t\t\t}\n\t\t\t// foo={{bar}}\n\t\t\telse if(state.lookingForValue){\n\t\t\t\tstate.inValue = true;\n\t\t\t}\n\t\t\t// a {{bar}}\n\t\t\telse if(state.lookingForEq && state.attrStart) {\n\t\t\t\tcallAttrEnd(state, curIndex, handler, rest, lineNo);\n\t\t\t}\n\n\t\t\tmagicMatch.lastIndex = curIndex;\n\t\t\tvar match = magicMatch.exec(rest);\n\t\t\tif(match) {\n\t\t\t\thandler.special(match[1], lineNo);\n\t\t\t\t// i is already incremented\n\t\t\t\ti = curIndex + (match[0].length);\n\t\t\t\tif(state.inValue) {\n\t\t\t\t\tstate.valueStart = curIndex+match[0].length;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse if(state.inValue) {\n\t\t\tif(state.inQuote) {\n\t\t\t\tif(cur === state.inQuote) {\n\t\t\t\t\tcallAttrEnd(state, curIndex, handler, rest, lineNo);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if(space.test(cur)) {\n\t\t\t\tcallAttrEnd(state, curIndex, handler, rest, lineNo);\n\t\t\t}\n\t\t}\n\t\t// if we hit an = outside a value\n\t\telse if(cur === \"=\" && (state.lookingForEq || state.lookingForName || state.inName)) {\n\t\t\t// if we haven't yet started this attribute `{{}}=foo` case:\n\t\t\tif(!state.attrStart) {\n\t\t\t\tcallAttrStart(state, curIndex, handler, rest, lineNo);\n\t\t\t}\n\t\t\tstate.lookingForValue = true;\n\t\t\tstate.lookingForEq = false;\n\t\t\tstate.lookingForName = false;\n\t\t}\n\t\t// if we are currently in a name:\n\t\t//  when the name starts with `{` or `(`\n\t\t//  it isn't finished until the matching end character is found\n\t\t//  otherwise, a space finishes the name\n\t\telse if(state.inName) {\n\t\t\tvar started = rest[ state.nameStart ],\n\t\t\t\t\totherStart, otherOpposite;\n\t\t\tif(startOppositesMap[started] === cur) {\n\t\t\t\t//handle mismatched brackets: `{(})` or `({)}`\n\t\t\t\totherStart = started === \"{\" ? \"(\" : \"{\";\n\t\t\t\totherOpposite = startOppositesMap[otherStart];\n\n\t\t\t\tif(rest[curIndex+1] === otherOpposite){\n\t\t\t\t\tcallAttrStart(state, curIndex+2, handler, rest, lineNo);\n\t\t\t\t\ti++;\n\t\t\t\t}else{\n\t\t\t\t\tcallAttrStart(state, curIndex+1, handler, rest, lineNo);\n\t\t\t\t}\n\n\t\t\t\tstate.lookingForEq = true;\n\t\t\t}\n\t\t\telse if(space.test(cur) && started !== \"{\" && started !== \"(\") {\n\t\t\t\t\tcallAttrStart(state, curIndex, handler, rest, lineNo);\n\t\t\t\t\tstate.lookingForEq = true;\n\t\t\t}\n\t\t}\n\t\telse if(state.lookingForName) {\n\t\t\tif(!space.test(cur)) {\n\t\t\t\t// might have just started a name, we need to close it\n\t\t\t\tif(state.attrStart) {\n\t\t\t\t\tcallAttrEnd(state, curIndex, handler, rest, lineNo);\n\t\t\t\t}\n\t\t\t\tstate.nameStart = curIndex;\n\t\t\t\tstate.inName = true;\n\t\t\t}\n\t\t}\n\t\telse if(state.lookingForValue) {\n\t\t\tif(!space.test(cur)) {\n\t\t\t\tstate.lookingForValue = false;\n\t\t\t\tstate.inValue = true;\n\t\t\t\tif(cur === \"'\" || cur === '\"') {\n\t\t\t\t\tstate.inQuote = cur;\n\t\t\t\t\tstate.valueStart = curIndex+1;\n\t\t\t\t} else {\n\t\t\t\t\tstate.valueStart = curIndex;\n\t\t\t\t}\n\t\t\t\t// if we are looking for a value\n\t\t\t\t// at the end of the loop we need callAttrEnd\n\t\t\t} else if (i === rest.length){\n\t\t\t\tcallAttrEnd(state, curIndex, handler, rest, lineNo);\n\t\t\t}\n\t\t}\n\t}\n\n\tif(state.inName) {\n\t\tcallAttrStart(state, curIndex+1, handler, rest, lineNo);\n\t\tcallAttrEnd(state, curIndex+1, handler, rest, lineNo);\n\t} else if(state.lookingForEq || state.lookingForValue || state.inValue) {\n\t\tcallAttrEnd(state, curIndex+1, handler, rest, lineNo);\n\t}\n\tmagicMatch.lastIndex = 0;\n};\n\nHTMLParser.searchStartTag = function (html) {\n\tvar closingIndex = html.indexOf('>');\n\n\t// The first closing bracket we find might be in an attribute value.\n\t// Move through the attributes by regexp.\n\tvar attributeRange = attributeRegexp.exec(html.substring(1));\n\tvar afterAttributeOffset = 1;\n\t// if the closing index is after the next attribute...\n\twhile(attributeRange && closingIndex >= afterAttributeOffset + attributeRange.index) {\n\n\t\t// prepare to move to the attribute after this one by increasing the offset\n\t\tafterAttributeOffset += attributeRange.index + attributeRange[0].length;\n\t\t// if the closing index is before the new offset, then this closing index is inside\n\t\t//  an attribute value and should be ignored.  Find the *next* closing character.\n\t\twhile(closingIndex < afterAttributeOffset) {\n\t\t\tclosingIndex += html.substring(closingIndex + 1).indexOf('>') + 1;\n\t\t}\n\n\t\t// find the next attribute by starting from the new offset.\n\t\tattributeRange = attributeRegexp.exec(html.substring(afterAttributeOffset));\n\t}\n\n\t// if there is no closing bracket\n\t// <input class=\n\t// or if the tagName does not start with alphaNumer character\n\t// <_iaois>\n\t// it is not a startTag\n\tif(closingIndex === -1 || !(alphaRegex.test(html[1]))){\n\t\treturn null;\n\t}\n\n\tvar tagName, tagContent, match, rest = '', unary = '';\n\tvar startTag = html.substring(0, closingIndex + 1);\n\tvar isUnary = startTag[startTag.length-2] === '/';\n\tvar spaceIndex = startTag.search(space);\n\n\tif(isUnary){\n\t\tunary = '/';\n\t\ttagContent = startTag.substring(1, startTag.length-2).trim();\n\t} else {\n\t\ttagContent = startTag.substring(1, startTag.length-1).trim();\n\t}\n\n\tif(spaceIndex === -1){\n\t\ttagName = tagContent;\n\t} else {\n\t\t//spaceIndex needs to shift one to the left\n\t\tspaceIndex--;\n\t\ttagName = tagContent.substring(0, spaceIndex);\n\t\trest = tagContent.substring(spaceIndex);\n\t}\n\n\tmatch = [startTag, tagName, rest, unary];\n\n\treturn {\n\t\tmatch: match,\n\t\thtml: html.substring(startTag.length),\n\t};\n\n\n};\n\nvar canViewParser_4_1_3_canViewParser = canNamespace_1_0_0_canNamespace.HTMLParser = HTMLParser;\n\n/**\n * @module {function} can-globals/location/location location\n * @parent can-globals/modules\n * \n * Get the global [`location`](https://developer.mozilla.org/en-US/docs/Web/API/Window/location) object for the current context.\n * \n * @signature `LOCATION([newLocation])`\n * \n * Optionally sets, and returns, the [`location`](https://developer.mozilla.org/en-US/docs/Web/API/Window/location) object for the context.\n * \n * ```js\n * var locationShim = { path: '/' };\n * var LOCATION = require('can-globals/location/location');\n * LOCATION(locationShim);\n * LOCATION().path; // -> '/'\n * ```\n *\n * @param {Object} location An optional location-like object to set as the context's location\n *\n * @return {Object} The location object for this JavaScript environment.\n */\ncanGlobals_1_2_2_canGlobalsInstance.define('location', function(){\n\treturn canGlobals_1_2_2_canGlobalsInstance.getKeyValue('global').location;\n});\n\nvar location_1 = canGlobals_1_2_2_canGlobalsInstance.makeExport('location');\n\n/**\n * @module {function} can-globals/mutation-observer/mutation-observer mutation-observer\n * @parent can-globals/modules\n * \n * Get the global [`MutationObserver`](https://developer.mozilla.org/en-US/docs/Web/API/MutationObserver) object for the current context.\n * \n * @signature `MUTATIONOBSERVER([newMutationObserver])`\n * \n * Optionally sets, and returns, the [`MutationObserver`](https://developer.mozilla.org/en-US/docs/Web/API/MutationObserver) object for the context.\n * \n * ```js\n * var mutationObserverShim = require('can-globals/mutation-observer/mutation-observer');\n * MUTATIONOBSERVER(mutationObserverShim);\n * MUTATIONOBSERVER() //-> MutationObserver\n * ```\n *\n * @param {Object} MutationObserver An optional MutationObserver-like object to set as the context's MutationObserver\n *\n * @return {Object} The MutationObserver object for this JavaScript environment.\n */\n\ncanGlobals_1_2_2_canGlobalsInstance.define('MutationObserver', function(){\n\tvar GLOBAL = canGlobals_1_2_2_canGlobalsInstance.getKeyValue('global');\n\treturn GLOBAL.MutationObserver || GLOBAL.WebKitMutationObserver || GLOBAL.MozMutationObserver;\n});\n\nvar mutationObserver = canGlobals_1_2_2_canGlobalsInstance.makeExport('MutationObserver');\n\n/**\n * @module {function} can-globals/custom-elements/custom-elements custom-elements\n * @parent can-globals/modules\n *\n * Get the global [`customElements`](https://developer.mozilla.org/en-US/docs/Web/API/Window/customElements) object for the current context.\n *\n * @signature `CUSTOMELEMENTS([newCustomElements])`\n *\n * Optionally sets, and returns, the [`customElements`](https://developer.mozilla.org/en-US/docs/Web/API/Window/customElements) object for the context.\n *\n * ```js\n * var customElementsShim = require('some-custom-elements-shim');\n * CUSTOMELEMENTS(customElementsShim);\n * CUSTOMELEMENTS() //-> customElementsShim\n * ```\n *\n * @param {Object} customElements An optional CustomElementRegistry-like object to set as the context's customElements\n *\n * @return {Object} The customElements object for this JavaScript environment.\n */\n\ncanGlobals_1_2_2_canGlobalsInstance.define('customElements', function(){\n\tvar GLOBAL = canGlobals_1_2_2_canGlobalsInstance.getKeyValue('global');\n\treturn GLOBAL.customElements;\n});\n\nvar customElements = canGlobals_1_2_2_canGlobalsInstance.makeExport('customElements');\n\nvar canGlobals_1_2_2_canGlobals = canGlobals_1_2_2_canGlobalsInstance;\n\nfunction eliminate(array, item) {\n\tvar index = array.indexOf(item);\n\tif (index >= 0) {\n\t\tarray.splice(index, 1);\n\t}\n}\nfunction wasNotInSet(item, set) {\n\tvar inSet = set.has(item);\n\tif(inSet === false) {\n\t\tset.add(item);\n\t}\n\treturn !inSet;\n}\n\n\nfunction contains(parent, child){\n\tif(child && child.nodeType === Node.TEXT_NODE) {\n\t\treturn contains(parent, child.parentNode);\n\t}\n\tif(parent.contains) {\n\t\treturn parent.contains(child);\n\t}\n\tif(parent.nodeType === Node.DOCUMENT_NODE && parent.documentElement) {\n\t\treturn contains(parent.documentElement, child);\n\t} else {\n\t\tchild = child.parentNode;\n\t\tif(child === parent) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n}\n\nfunction isDocumentElement (node) {\n\treturn document$1().documentElement === node;\n}\n\nfunction isFragment (node) {\n\treturn !!(node && node.nodeType === 11);\n}\n\nfunction isElementNode (node) {\n\treturn !!(node && node.nodeType === 1);\n}\n\nfunction getChildren (parentNode) {\n\tvar nodes = [];\n\tvar node = parentNode.firstChild;\n\twhile (node) {\n\t\tnodes.push(node);\n\t\tnode = node.nextSibling;\n\t}\n\treturn nodes;\n}\n\nfunction getParents (node) {\n\tvar nodes;\n\tif (isFragment(node)) {\n\t\tnodes = getChildren(node);\n\t} else {\n\t\tnodes = [node];\n\t}\n\treturn nodes;\n}\n\n\nfunction getNodesLegacyB(node) {\n\tvar skip, tmp;\n\n\tvar depth = 0;\n\n\tvar items = isFragment(node) ? [] : [node];\n\tif(node.firstChild == null) {\n\t\treturn items;\n\t}\n\n\t// Always start with the initial element.\n\tdo {\n\t\tif ( !skip && (tmp = node.firstChild) ) {\n\t\t\tdepth++;\n\t\t\titems.push(tmp);\n\t\t} else if ( tmp = node.nextSibling ) {\n\t\t\tskip = false;\n\t\t\titems.push(tmp);\n\t\t} else {\n\t\t\t// Skipped or no first child and no next sibling, so traverse upwards,\n\t\t\ttmp = node.parentNode;\n\t\t\t// and decrement the depth.\n\t\t\tdepth--;\n\t\t\t// Enable skipping, so that in the next loop iteration, the children of\n\t\t\t// the now-current node (parent node) aren't processed again.\n\t\t\tskip = true;\n\t\t}\n\n\t\t// Instead of setting node explicitly in each conditional block, use the\n\t\t// tmp var and set it here.\n\t\tnode = tmp;\n\n\t\t// Stop if depth comes back to 0 (or goes below zero, in conditions where\n\t\t// the passed node has neither children nore next siblings).\n\t} while ( depth > 0 );\n\n\treturn items;\n}\n\n// IE11 requires a filter parameter for createTreeWalker\n// it also must be an object with an `acceptNode` property\nfunction treeWalkerFilterFunction() {\n\treturn NodeFilter.FILTER_ACCEPT;\n}\nvar treeWalkerFilter = treeWalkerFilterFunction;\ntreeWalkerFilter.acceptNode = treeWalkerFilterFunction;\n\nfunction getNodesWithTreeWalker(rootNode) {\n\tvar result = isFragment(rootNode) ? [] : [rootNode];\n\n\t// IE11 throws if createTreeWalker is called on a non-ElementNode\n\tvar walker = isElementNode(rootNode) && document$1().createTreeWalker(\n\t\trootNode,\n\t\tNodeFilter.SHOW_TEXT | NodeFilter.SHOW_ELEMENT | NodeFilter.SHOW_COMMENT,\n\t\ttreeWalkerFilter,\n\t\tfalse\n\t);\n\n\tvar node;\n\twhile(node = walker && walker.nextNode()) {\n\t\tresult.push(node);\n\t}\n\treturn result;\n}\n\nfunction getAllNodes (node) {\n\tif( document$1().createTreeWalker !== undefined ) {\n\t\treturn getNodesWithTreeWalker(node);\n\t} else {\n\t\treturn getNodesLegacyB(node);\n\t}\n}\n\nfunction subscription (fn) {\n\treturn function _subscription () {\n\t\tvar disposal = fn.apply(this, arguments);\n\t\tvar isDisposed = false;\n\t\treturn function _disposal () {\n\t\t\tif (isDisposed) {\n\t\t\t\tvar fnName = fn.name || fn.displayName || 'an anonymous function';\n\t\t\t\tvar message = 'Disposal function returned by ' + fnName + ' called more than once.';\n\t\t\t\tthrow new Error(message);\n\t\t\t}\n\t\t\tdisposal.apply(this, arguments);\n\t\t\tisDisposed = true;\n\t\t};\n\t};\n}\n\nvar canDomMutate_2_0_9_Util = {\n\teliminate: eliminate,\n\tgetDocument: document$1,\n\tisDocumentElement: isDocumentElement,\n\tisFragment: isFragment,\n\tgetParents: getParents,\n\tgetAllNodes: getAllNodes,\n\tgetChildren: getChildren,\n\tsubscription: subscription,\n\twasNotInSet: wasNotInSet,\n\tcontains: contains\n};\n\nvar contains$1 = canDomMutate_2_0_9_Util.contains;\nvar mutate = {};\nvar isConnected;\nfunction getIsConnectedFromNode(node) {\n\treturn node.isConnected;\n}\nfunction getIsConnectedFromDocument(node) {\n\tvar doc = node.ownerDocument;\n\t// if node *is* the document, ownerDocument is null\n\t// However, CanSimpleDom implements this incorrectly, and a document's ownerDocument is itself,\n\t//   so make both checks\n\treturn doc === null || doc === node || contains$1(doc, node);\n}\n\nfunction setIsConnected(doc) {\n\tif(doc) {\n\t\tvar node = doc.createTextNode(\"\");\n\t\tisConnected = 'isConnected' in node.constructor.prototype ?\n\t\t\tgetIsConnectedFromNode :\n\t\t\tgetIsConnectedFromDocument;\n\t\tif(mutate) {\n\t\t\tmutate.isConnected = isConnected;\n\t\t}\n\t} else {\n\t\tmutate.isConnected = getIsConnectedFromNode;\n\t}\n}\nsetIsConnected(canGlobals_1_2_2_canGlobals.getKeyValue(\"document\"));\ncanGlobals_1_2_2_canGlobals.onKeyValue(\"document\", setIsConnected);\n\nvar canDomMutate_2_0_9_IsConnected = mutate;\n\nvar eliminate$1 = canDomMutate_2_0_9_Util.eliminate;\nvar subscription$1 = canDomMutate_2_0_9_Util.subscription;\nvar isDocumentElement$1 = canDomMutate_2_0_9_Util.isDocumentElement;\nvar getAllNodes$1 = canDomMutate_2_0_9_Util.getAllNodes;\n\nvar domMutate,\n\tdispatchNodeInserted,\n\tdispatchNodeConnected,\n\tdispatchGlobalConnected,\n\tdispatchNodeRemoved,\n\tdispatchNodeDisconnected,\n\tdispatchGlobalDisconnected,\n\tdispatchAttributeChange;\n\nvar dataStore = new WeakMap();\n\n\nvar queue;\n\nfunction getRelatedData(node, key) {\n\tvar data = dataStore.get(node);\n\tif (data) {\n\t\treturn data[key];\n\t}\n}\n\nfunction setRelatedData(node, key, targetListenersMap) {\n\tvar data = dataStore.get(node);\n\tif (!data) {\n\t\tdata = {};\n\t\tdataStore.set(node, data);\n\t}\n\tdata[key] = targetListenersMap;\n}\n\nfunction deleteRelatedData(node, key) {\n\tvar data = dataStore.get(node);\n\treturn delete data[key];\n}\n\nfunction toMutationEvent(node, mutation) {\n\treturn {target: node, sourceMutation: mutation};\n}\n\nfunction getDocumentListeners (target, key) {\n\t// TODO: it's odd these functions read DOCUMENT() instead of\n\t// target.ownerDocument.  To change to ownerDocument, we might need a \"is document\"\n\t// check.\n\tvar doc = document$1();\n\tvar data = getRelatedData(doc, key);\n\tif (data) {\n\t\treturn data.listeners;\n\t}\n}\n\nfunction getTargetListeners (target, key) {\n\tvar doc = document$1();\n\tvar targetListenersMap = getRelatedData(doc, key);\n\tif (!targetListenersMap) {\n\t\treturn;\n\t}\n\n\treturn targetListenersMap.get(target);\n}\n\nfunction addTargetListener (target, key, listener) {\n\tvar doc = document$1();\n\tvar targetListenersMap = getRelatedData(doc, key);\n\tif (!targetListenersMap) {\n\t\ttargetListenersMap = new WeakMap();\n\t\tsetRelatedData(doc, key, targetListenersMap);\n\t}\n\tvar targetListeners = targetListenersMap.get(target);\n\tif (!targetListeners) {\n\t\ttargetListeners = [];\n\t\ttargetListenersMap.set(target, targetListeners);\n\t}\n\ttargetListeners.push(listener);\n}\n\nfunction removeTargetListener (target, key, listener) {\n\tvar doc = document$1();\n\tvar targetListenersMap = getRelatedData(doc, key);\n\tif (!targetListenersMap) {\n\t\treturn;\n\t}\n\tvar targetListeners = targetListenersMap.get(target);\n\tif (!targetListeners) {\n\t\treturn;\n\t}\n\teliminate$1(targetListeners, listener);\n\tif (targetListeners.length === 0) {\n\t\ttargetListenersMap['delete'](target);\n\t\tif (targetListenersMap.size === 0) {\n\t\t\tdeleteRelatedData(doc, key);\n\t\t}\n\t}\n}\n\nvar promise = Promise.resolve();\nfunction nextTick(handler) {\n\tpromise.then(handler);\n}\n\n//var recordsAndCallbacks = null;\n\nfunction flushCallbacks(callbacks, arg){\n\tvar callbacksCount = callbacks.length;\n\tvar safeCallbacks = callbacks.slice(0);\n\tfor(var c = 0; c < callbacksCount; c++){\n\t\tsafeCallbacks[c](arg);\n\t}\n}\n\nfunction dispatch$1(getListeners, targetKey) {\n\n\treturn function dispatchEvents(event) {\n\t\tvar targetListeners = getListeners(event.target, targetKey);\n\n\t\tif (targetListeners) {\n\t\t\tflushCallbacks(targetListeners, event);\n\t\t}\n\t};\n}\n\nvar count = 0;\n\nfunction observeMutations(target, observerKey, config, handler) {\n\n\tvar observerData = getRelatedData(target, observerKey);\n\tif (!observerData) {\n\t\tobserverData = {\n\t\t\tobservingCount: 0\n\t\t};\n\t\tsetRelatedData(target, observerKey, observerData);\n\t}\n\n\tvar setupObserver = function () {\n\t\t// disconnect the old one\n\t\tif (observerData.observer) {\n\t\t\tobserverData.observer.disconnect();\n\t\t\tobserverData.observer = null;\n\t\t}\n\n\t\tvar MutationObserver = mutationObserver();\n\t\tif (MutationObserver) {\n\t\t\tvar Node = global_1().Node;\n\t\t\tvar isRealNode = !!(Node && target instanceof Node);\n\t\t\tif (isRealNode) {\n\t\t\t\tvar targetObserver = new MutationObserver(handler);\n\t\t\t\ttargetObserver.id = count++;\n\t\t\t\ttargetObserver.observe(target, config);\n\t\t\t\tobserverData.observer = targetObserver;\n\t\t\t}\n\t\t}\n\t};\n\n\tif (observerData.observingCount === 0) {\n\t\tcanGlobals_1_2_2_canGlobals.onKeyValue('MutationObserver', setupObserver);\n\t\tsetupObserver();\n\t}\n\n\tobserverData.observingCount++;\n\treturn function stopObservingMutations() {\n\t\tvar observerData = getRelatedData(target, observerKey);\n\t\tif (observerData) {\n\t\t\tobserverData.observingCount--;\n\t\t\tif (observerData.observingCount <= 0) {\n\t\t\t\tif (observerData.observer) {\n\t\t\t\t\tobserverData.observer.disconnect();\n\t\t\t\t}\n\t\t\t\tdeleteRelatedData(target, observerKey);\n\t\t\t\tcanGlobals_1_2_2_canGlobals.offKeyValue('MutationObserver', setupObserver);\n\t\t\t}\n\t\t}\n\t};\n}\n\nvar treeMutationConfig = {\n\tsubtree: true,\n\tchildList: true\n};\n\nvar attributeMutationConfig = {\n\tattributes: true,\n\tattributeOldValue: true\n};\n\nfunction addNodeListener(listenerKey, observerKey, isAttributes) {\n\treturn subscription$1(function _addNodeListener(target, listener) {\n\t\t// DocumentFragment\n\t\tif(target.nodeType === 11) {\n\t\t\t// This returns a noop without actually doing anything.\n\t\t\t// We should probably warn about passing a DocumentFragment here,\n\t\t\t// but since can-stache does so currently we are ignoring until that is\n\t\t\t// fixed.\n\t\t\treturn Function.prototype;\n\t\t}\n\n\t\tvar stopObserving;\n\t\tif (isAttributes) {\n\t\t\tstopObserving = observeMutations(target, observerKey, attributeMutationConfig, queue.enqueueAndFlushMutations);\n\t\t} else {\n\t\t\tstopObserving = observeMutations(document$1(), observerKey, treeMutationConfig, queue.enqueueAndFlushMutations);\n\t\t}\n\n\t\taddTargetListener(target, listenerKey, listener);\n\t\treturn function removeNodeListener() {\n\t\t\tif(stopObserving) {\n\t\t\t\tstopObserving();\n\t\t\t}\n\n\t\t\tremoveTargetListener(target, listenerKey, listener);\n\t\t};\n\t});\n}\n\nfunction addGlobalListener(globalDataKey, addNodeListener) {\n\treturn subscription$1(function addGlobalGroupListener(documentElement, listener) {\n\t\tif (!isDocumentElement$1(documentElement)) {\n\t\t\tthrow new Error('Global mutation listeners must pass a documentElement');\n\t\t}\n\n\t\tvar doc = document$1();\n\t\tvar documentData = getRelatedData(doc, globalDataKey);\n\t\tif (!documentData) {\n\t\t\tdocumentData = {listeners: []};\n\t\t\tsetRelatedData(doc, globalDataKey, documentData);\n\t\t}\n\n\t\tvar listeners = documentData.listeners;\n\t\tif (listeners.length === 0) {\n\t\t\t// We need at least on listener for mutation events to propagate\n\t\t\tdocumentData.removeListener = addNodeListener(doc, function () {});\n\t\t}\n\n\t\tlisteners.push(listener);\n\n\t\treturn function removeGlobalGroupListener() {\n\t\t\tvar documentData = getRelatedData(doc, globalDataKey);\n\t\t\tif (!documentData) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar listeners = documentData.listeners;\n\t\t\teliminate$1(listeners, listener);\n\t\t\tif (listeners.length === 0) {\n\t\t\t\tdocumentData.removeListener();\n\t\t\t\tdeleteRelatedData(doc, globalDataKey);\n\t\t\t}\n\t\t};\n\t});\n}\n\n\n\nvar domMutationPrefix = 'domMutation';\n\n// target listener keys\nvar connectedDataKey = domMutationPrefix + 'ConnectedData';\nvar disconnectedDataKey = domMutationPrefix + 'DisconnectedData';\nvar insertedDataKey = domMutationPrefix + 'InsertedData';\nvar removedDataKey = domMutationPrefix + 'RemovedData';\nvar attributeChangeDataKey = domMutationPrefix + 'AttributeChangeData';\n\n// document listener keys\nvar documentConnectedDataKey = domMutationPrefix + 'DocumentConnectedData';\nvar documentDisconnectedDataKey = domMutationPrefix + 'DocumentDisconnectedData';\nvar documentAttributeChangeDataKey = domMutationPrefix + 'DocumentAttributeChangeData';\n\n// observer keys\nvar treeDataKey = domMutationPrefix + 'TreeData';\nvar attributeDataKey = domMutationPrefix + 'AttributeData';\n\ndispatchNodeInserted = dispatch$1(getTargetListeners, insertedDataKey);\ndispatchNodeConnected = dispatch$1(getTargetListeners, connectedDataKey);\ndispatchGlobalConnected = dispatch$1(getDocumentListeners, documentConnectedDataKey);\n\ndispatchNodeRemoved = dispatch$1(getTargetListeners, removedDataKey);\ndispatchNodeDisconnected = dispatch$1(getTargetListeners, disconnectedDataKey);\ndispatchGlobalDisconnected = dispatch$1(getDocumentListeners, documentDisconnectedDataKey);\n\ndispatchAttributeChange = dispatch$1(getTargetListeners, attributeChangeDataKey);\n\n// node listeners\nvar addNodeConnectedListener = addNodeListener(connectedDataKey, treeDataKey);\nvar addNodeDisconnectedListener = addNodeListener(disconnectedDataKey, treeDataKey);\nvar addNodeInsertedListener = addNodeListener(insertedDataKey, treeDataKey);\nvar addNodeRemovedListener = addNodeListener(removedDataKey, treeDataKey);\nvar addNodeAttributeChangeListener = addNodeListener(attributeChangeDataKey, attributeDataKey, true);\n\n// global listeners\nvar addConnectedListener = addGlobalListener(\n\tdocumentConnectedDataKey,\n\taddNodeConnectedListener\n);\nvar addDisconnectedListener = addGlobalListener(\n\tdocumentDisconnectedDataKey,\n\taddNodeDisconnectedListener\n);\nvar addAttributeChangeListener = addGlobalListener(\n\tdocumentAttributeChangeDataKey,\n\taddNodeAttributeChangeListener\n);\n\n// ==========================================\nfunction dispatchTreeMutation(mutation, processedState) {\n\t// was the mutation connected\n\tvar wasConnected = mutation.isConnected === true || mutation.isConnected === undefined;\n\n\t// there are\n\t// - the global connected\n\t// - individual connected\n\t// - individual inserted\n\tvar removedCount = mutation.removedNodes.length;\n\tfor (var r = 0; r < removedCount; r++) {\n\t\t// get what already isn't in `removed`\n\n\t\t// see if \"removed\"\n\t\t// if wasConnected .. dispatch disconnected\n\t\tvar removedNodes = getAllNodes$1(mutation.removedNodes[r]);\n\t\tremovedNodes.forEach(function(node){\n\t\t\tvar event = toMutationEvent(node, mutation);\n\n\t\t\tif( canDomMutate_2_0_9_Util.wasNotInSet(node, processedState.removed) ) {\n\t\t\t\tdispatchNodeRemoved( event );\n\t\t\t}\n\t\t\tif(wasConnected && canDomMutate_2_0_9_Util.wasNotInSet(node, processedState.disconnected) ) {\n\t\t\t\tdispatchNodeDisconnected( event );\n\t\t\t\tdispatchGlobalDisconnected( event );\n\t\t\t}\n\t\t});\n\t}\n\n\tvar addedCount = mutation.addedNodes.length;\n\tfor (var a = 0; a < addedCount; a++) {\n\t\tvar insertedNodes = getAllNodes$1(mutation.addedNodes[a]);\n\t\tinsertedNodes.forEach(function(node){\n\t\t\tvar event = toMutationEvent(node, mutation);\n\n\t\t\tif(canDomMutate_2_0_9_Util.wasNotInSet(node, processedState.inserted)) {\n\t\t\t\tdispatchNodeInserted( event );\n\t\t\t}\n\t\t\tif(wasConnected && canDomMutate_2_0_9_Util.wasNotInSet(node, processedState.connected) ) {\n\t\t\t\tdispatchNodeConnected( event );\n\t\t\t\tdispatchGlobalConnected( event );\n\t\t\t}\n\t\t});\n\t}\n\t// run mutation\n}\n\n\nvar FLUSHING_MUTATIONS = [];\nvar IS_FLUSHING = false;\n\nvar IS_FLUSH_PENDING = false;\nvar ENQUEUED_MUTATIONS = [];\n\nqueue = {\n\t// This is used to dispatch mutations immediately.\n\t// This is usually called by the result of a mutation observer.\n\tenqueueAndFlushMutations: function(mutations) {\n\t\tif(IS_FLUSH_PENDING) {\n\t\t\tFLUSHING_MUTATIONS = FLUSHING_MUTATIONS.concat(ENQUEUED_MUTATIONS);\n\t\t\tIS_FLUSH_PENDING = false;\n\t\t\tENQUEUED_MUTATIONS = [];\n\t\t}\n\n\t\tFLUSHING_MUTATIONS = FLUSHING_MUTATIONS.concat(mutations);\n\t\tif(IS_FLUSHING) {\n\t\t\treturn;\n\t\t}\n\n\t\tIS_FLUSHING = true;\n\n\t\tvar index = 0;\n\n\t\tvar processedState = {\n\t\t\tconnected: new Set(),\n\t\t\tdisconnected: new Set(),\n\t\t\tinserted: new Set(),\n\t\t\tremoved: new Set()\n\t\t};\n\n\t\twhile(index < FLUSHING_MUTATIONS.length) {\n\t\t\tvar mutation = FLUSHING_MUTATIONS[index];\n\t\t\t// process mutation\n\t\t\tif(mutation.type === \"childList\") {\n\t\t\t\tdispatchTreeMutation(mutation, processedState);\n\t\t\t} else if(mutation.type === \"attributes\") {\n\t\t\t\tdispatchAttributeChange(mutation);\n\t\t\t}\n\t\t\tindex++;\n\n\t\t}\n\t\tFLUSHING_MUTATIONS = [];\n\t\tIS_FLUSHING = false;\n\t},\n\t// called to dipatch later unless we are already dispatching.\n\tenqueueMutationsAndFlushAsync: function(mutations){\n\t\tENQUEUED_MUTATIONS = ENQUEUED_MUTATIONS.concat(mutations);\n\n\t\t// if there are currently dispatching mutations, this should happen sometime after\n\t\tif(!IS_FLUSH_PENDING) {\n\t\t\tIS_FLUSH_PENDING = true;\n\t\t\tnextTick(function(){\n\t\t\t\tif(IS_FLUSH_PENDING) {\n\t\t\t\t\tIS_FLUSH_PENDING = false;\n\t\t\t\t\tvar pending = ENQUEUED_MUTATIONS;\n\t\t\t\t\tENQUEUED_MUTATIONS = [];\n\t\t\t\t\tqueue.enqueueAndFlushMutations(pending);\n\t\t\t\t} else {\n\t\t\t\t\t// Someone called enqueueAndFlushMutations before this finished.\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n};\n\n\n// ==========================================\n\n\ndomMutate = {\n\t/**\n\t* @function can-dom-mutate.dispatchNodeInsertion dispatchNodeInsertion\n\t* @hide\n\t*\n\t* Dispatch an insertion mutation on the given node.\n\t*\n\t* @signature `dispatchNodeInsertion( node [, callback ] )`\n\t* @parent can-dom-mutate.static\n\t* @param {Node} node The node on which to dispatch an insertion mutation.\n\t*/\n\tdispatchNodeInsertion: function (node, target) {\n\t\tqueue.enqueueMutationsAndFlushAsync(\n\t\t\t[{\n\t\t\t\ttype: \"childList\",\n\t\t\t\ttarget: target,\n\t\t\t\taddedNodes: [node],\n\t\t\t\tisConnected: canDomMutate_2_0_9_IsConnected.isConnected(target),\n\t\t\t\tremovedNodes: []\n\t\t\t}]\n\t\t);\n\t\t/*\n\t\tvar nodes = new Set();\n\t\tutil.addToSet( getAllNodes(node), nodes);\n\t\tvar events = toMutationEvents( canReflect.toArray(nodes) );\n\t\t// this is basically an array of every single child of node including node\n\t\tdispatchInsertion(events, callback, dispatchConnected, flushAsync);*/\n\t},\n\n\t/**\n\t* @function can-dom-mutate.dispatchNodeRemoval dispatchNodeRemoval\n\t* @hide\n\t*\n\t* Dispatch a removal mutation on the given node.\n\t*\n\t* @signature `dispatchNodeRemoval( node [, callback ] )`\n\t* @parent can-dom-mutate.static\n\t* @param {Node} node The node on which to dispatch a removal mutation.\n\t* @param {function} callback The optional callback called after the mutation is dispatched.\n\t*/\n\tdispatchNodeRemoval: function (node, target) {\n\t\tqueue.enqueueMutationsAndFlushAsync(\n\t\t\t[{\n\t\t\t\ttype: \"childList\",\n\t\t\t\ttarget: target,\n\t\t\t\taddedNodes: [],\n\t\t\t\tremovedNodes: [node],\n\t\t\t\tisConnected: canDomMutate_2_0_9_IsConnected.isConnected(target)\n\t\t\t}]\n\t\t);\n\t\t/*\n\t\tvar nodes = new Set();\n\t\tutil.addToSet( getAllNodes(node), nodes);\n\t\tvar events = toMutationEvents( canReflect.toArray(nodes) );\n\t\tdispatchRemoval(events, callback, dispatchConnected, flushAsync);*/\n\t},\n\n\t/**\n\t* @function can-dom-mutate.dispatchNodeAttributeChange dispatchNodeAttributeChange\n\t* @parent can-dom-mutate.static\n\t* @hide\n\t*\n\t* Dispatch an attribute change mutation on the given node.\n\t*\n\t* @signature `dispatchNodeAttributeChange( node, attributeName, oldValue [, callback ] )`\n\t*\n\t* ```\n\t* input.setAttribute(\"value\", \"newValue\")\n\t* domMutate.dispatchNodeAttributeChange(input, \"value\",\"oldValue\")\n\t* ```\n\t*\n\t*\n\t* @param {Node} target The node on which to dispatch an attribute change mutation.\n\t* @param {String} attributeName The attribute name whose value has changed.\n\t* @param {String} oldValue The attribute value before the change.\n\t*/\n\tdispatchNodeAttributeChange: function (target, attributeName, oldValue) {\n\t\tqueue.enqueueMutationsAndFlushAsync(\n\t\t\t[{\n\t\t\t\ttype: \"attributes\",\n\t\t\t\ttarget: target,\n\t\t\t\tattributeName: attributeName,\n\t\t\t\toldValue: oldValue\n\t\t\t}]\n\t\t);\n\t},\n\n\t/**\n\t* @function can-dom-mutate.onNodeConnected onNodeConnected\n\t*\n\t* Listen for insertion mutations on the given node.\n\t*\n\t* @signature `onNodeConnected( node, callback )`\n\t* @parent can-dom-mutate.static\n\t* @param {Node} node The node on which to listen for insertion mutations.\n\t* @param {function} callback The callback called when an insertion mutation is dispatched.\n\t* @return {function} The callback to remove the mutation listener.\n\t*/\n\tonNodeConnected: addNodeConnectedListener,\n\tonNodeInsertion: function(){\n\t\t// TODO: remove in prod\n\t\tconsole.warn(\"can-dom-mutate: Use onNodeConnected instead of onNodeInsertion\");\n\t\treturn addNodeConnectedListener.apply(this, arguments);\n\t},\n\t/**\n\t* @function can-dom-mutate.onNodeDisconnected onNodeDisconnected\n\t*\n\t* Listen for removal mutations on the given node.\n\t*\n\t* @signature `onNodeDisconnected( node, callback )`\n\t* @parent can-dom-mutate.static\n\t* @param {Node} node The node on which to listen for removal mutations.\n\t* @param {function} callback The callback called when a removal mutation is dispatched.\n\t* @return {function} The callback to remove the mutation listener.\n\t*/\n\tonNodeDisconnected: addNodeDisconnectedListener,\n\tonNodeRemoval: function(){\n\t\t// TODO: remove in prod\n\t\tconsole.warn(\"can-dom-mutate: Use onNodeDisconnected instead of onNodeRemoval\");\n\t\treturn addNodeDisconnectedListener.apply(this, arguments);\n\t},\n\t/**\n\t* @function can-dom-mutate.onNodeAttributeChange onNodeAttributeChange\n\t*\n\t* Listen for attribute change mutations on the given node.\n\t*\n\t* @signature `onNodeAttributeChange( node, callback )`\n\t* @parent can-dom-mutate.static\n\t* @param {Node} node The node on which to listen for attribute change mutations.\n\t* @param {function} callback The callback called when an attribute change mutation is dispatched.\n\t* @return {function} The callback to remove the mutation listener.\n\t*/\n\tonNodeAttributeChange: addNodeAttributeChangeListener,\n\n\t/**\n\t* @function can-dom-mutate.onDisconnected onDisconnected\n\t*\n\t* Listen for removal mutations on any node within the documentElement.\n\t*\n\t* @signature `onDisconnected( documentElement, callback )`\n\t* @parent can-dom-mutate.static\n\t* @param {Node} documentElement The documentElement on which to listen for removal mutations.\n\t* @param {function} callback The callback called when a removal mutation is dispatched.\n\t* @return {function} The callback to remove the mutation listener.\n\t*/\n\tonDisconnected: addDisconnectedListener,\n\tonRemoval: function(){\n\t\t// TODO: remove in prod\n\t\tconsole.warn(\"can-dom-mutate: Use onDisconnected instead of onRemoval\");\n\t\treturn addDisconnectedListener.apply(this, arguments);\n\t},\n\t/**\n\t* @function can-dom-mutate.onConnected onConnected\n\t*\n\t* Listen for insertion mutations on any node within the documentElement.\n\t*\n\t* @signature `onConnected( documentElement, callback )`\n\t* @parent can-dom-mutate.static\n\t* @param {Node} documentElement The documentElement on which to listen for removal mutations.\n\t* @param {function} callback The callback called when a insertion mutation is dispatched.\n\t* @return {function} The callback to remove the mutation listener.\n\t*/\n\tonConnected: addConnectedListener,\n\tonInsertion: function(){\n\t\t// TODO: remove in prod\n\t\tconsole.warn(\"can-dom-mutate: Use onConnected instead of onInsertion\");\n\t\treturn addConnectedListener.apply(this, arguments);\n\t},\n\t/**\n\t* @function can-dom-mutate.onAttributeChange onAttributeChange\n\t*\n\t* Listen for attribute change mutations on any node within the documentElement.\n\t*\n\t* @signature `onAttributeChange( documentElement, callback )`\n\t* @parent can-dom-mutate.static\n\t* @param {Node} documentElement The documentElement on which to listen for removal mutations.\n\t* @param {function} callback The callback called when an attribute change mutation is dispatched.\n\t* @return {function} The callback to remove the mutation listener.\n\t*/\n\tonAttributeChange: addAttributeChangeListener,\n\n\tflushRecords: function(doc){\n\t\tdoc = doc || document$1();\n\t\tvar data = dataStore.get(doc),\n\t\t\trecords = [];\n\t\tif(data) {\n\t\t\tif(data.domMutationTreeData && data.domMutationTreeData.observer) {\n\t\t\t\trecords = data.domMutationTreeData.observer.takeRecords();\n\t\t\t}\n\t\t}\n\t\tqueue.enqueueAndFlushMutations(records);\n\t},\n\tonNodeInserted: addNodeInsertedListener,\n\tonNodeRemoved: addNodeRemovedListener\n};\n\n//!steal-remove-start\nif(process.env.NODE_ENV !== \"production\") {\n\tdomMutate.dataStore = dataStore;\n}\n//!steal-remove-end\n\nvar canDomMutate_2_0_9_canDomMutate = canNamespace_1_0_0_canNamespace.domMutate = domMutate;\n\nvar getParents$1 = canDomMutate_2_0_9_Util.getParents;\n\n\n\nvar compat = {\n\treplaceChild: function (newChild, oldChild) {\n\t\tvar newChildren = getParents$1(newChild);\n\t\tvar result = this.replaceChild(newChild, oldChild);\n\t\tcanDomMutate_2_0_9_canDomMutate.dispatchNodeRemoval(oldChild, this);\n\t\tfor (var i = 0; i < newChildren.length; i++) {\n\t\t\tcanDomMutate_2_0_9_canDomMutate.dispatchNodeInsertion(newChildren[i], this);\n\t\t}\n\t\treturn result;\n\t},\n\tsetAttribute: function (name, value) {\n\t\tvar oldAttributeValue = this.getAttribute(name);\n\t\tvar result = this.setAttribute(name, value);\n\t\tvar newAttributeValue = this.getAttribute(name);\n\t\tif (oldAttributeValue !== newAttributeValue) {\n\t\t\tcanDomMutate_2_0_9_canDomMutate.dispatchNodeAttributeChange(this, name, oldAttributeValue);\n\t\t}\n\t\treturn result;\n\t},\n\tsetAttributeNS: function (namespace, name, value) {\n\t\tvar oldAttributeValue = this.getAttribute(name);\n\t\tvar result = this.setAttributeNS(namespace, name, value);\n\t\tvar newAttributeValue = this.getAttribute(name);\n\t\tif (oldAttributeValue !== newAttributeValue) {\n\t\t\tcanDomMutate_2_0_9_canDomMutate.dispatchNodeAttributeChange(this, name, oldAttributeValue);\n\t\t}\n\t\treturn result;\n\t},\n\tremoveAttribute: function (name) {\n\t\tvar oldAttributeValue = this.getAttribute(name);\n\t\tvar result = this.removeAttribute(name);\n\t\tif (oldAttributeValue) {\n\t\t\tcanDomMutate_2_0_9_canDomMutate.dispatchNodeAttributeChange(this, name, oldAttributeValue);\n\t\t}\n\t\treturn result;\n\t}\n};\n\nvar compatData = [\n\t['appendChild', 'Insertion'],\n\t['insertBefore', 'Insertion'],\n\t['removeChild', 'Removal']\n];\ncompatData.forEach(function (pair) {\n\tvar nodeMethod = pair[0];\n\tvar dispatchMethod = 'dispatchNode' + pair[1];\n\tcompat[nodeMethod] = function (node) {\n\t\tvar nodes = getParents$1(node);\n\t\tvar result = this[nodeMethod].apply(this, arguments);\n\t\tfor (var i = 0; i < nodes.length; i++) {\n\t\t\tcanDomMutate_2_0_9_canDomMutate[dispatchMethod](nodes[i], this);\n\t\t}\n\t\treturn result;\n\t};\n});\n\nvar normal = {};\nvar nodeMethods = ['appendChild', 'insertBefore', 'removeChild', 'replaceChild', 'setAttribute', 'setAttributeNS', 'removeAttribute'];\nnodeMethods.forEach(function (methodName) {\n\tnormal[methodName] = function () {\n\t\tif(canDomMutate_2_0_9_IsConnected.isConnected(this)) {\n\t\t\treturn this[methodName].apply(this, arguments);\n\t\t} else {\n\t\t\treturn compat[methodName].apply(this, arguments);\n\t\t}\n\t};\n});\n\n/**\n* @module {{}} can-dom-mutate/node node\n* @parent can-dom-mutate/modules\n*\n* Append, insert, and remove DOM nodes. Also, change node attributes.\n* This allows mutations to be dispatched in environments where MutationObserver is not supported.\n* @signature `mutateNode`\n*\n* Exports an `Object` with methods that shouhld be used to mutate HTML.\n*\n* ```js\n* var mutateNode = require('can-dom-mutate/node');\n* var el = document.createElement('div');\n*\n* mutateNode.appendChild.call(document.body, el);\n*\n* ```\n*/\nvar mutate$1 = {};\n\n/**\n* @function can-dom-mutate/node.appendChild appendChild\n* @parent can-dom-mutate/node\n*\n* Append a node to an element, effectively `Node.prototype.appendChild`.\n*\n* @signature `mutate.appendChild.call(parent, child)`\n*\n* @param {Node} parent The parent into which the child is inserted.\n* @param {Node} child The child which will be inserted into the parent.\n* @return {Node} The appended child.\n*/\n\n/**\n* @function can-dom-mutate/node.insertBefore insertBefore\n* @parent can-dom-mutate/node\n*\n* Insert a node before a given reference node in an element, effectively `Node.prototype.insertBefore`.\n*\n* @signature `mutate.insertBefore.call(parent, child, reference)`\n* @param {Node} parent The parent into which the child is inserted.\n* @param {Node} child The child which will be inserted into the parent.\n* @param {Node} reference The reference which the child will be placed before.\n* @return {Node} The inserted child.\n*/\n\n/**\n* @function can-dom-mutate/node.removeChild removeChild\n* @parent can-dom-mutate/node\n*\n* Remove a node from an element, effectively `Node.prototype.removeChild`.\n*\n* @signature `mutate.removeChild.call(parent, child)`\n*\n* @param {Node} parent The parent from which the child is removed.\n* @param {Node} child The child which will be removed from the parent.\n* @return {Node} The removed child.\n*/\n\n/**\n* @function can-dom-mutate/node.replaceChild replaceChild\n* @parent can-dom-mutate/node\n*\n* Insert a node before a given reference node in an element, effectively `Node.prototype.replaceChild`.\n*\n* @signature `mutate.replaceChild.call(parent, newChild, oldChild)`\n*\n* @param {Node} parent The parent into which the newChild is inserted.\n* @param {Node} newChild The child which is inserted into the parent.\n* @param {Node} oldChild The child which is removed from the parent.\n* @return {Node} The replaced child.\n*/\n\n/**\n* @function can-dom-mutate/node.setAttribute setAttribute\n* @parent can-dom-mutate/node\n*\n* Set an attribute value on an element, effectively `Element.prototype.setAttribute`.\n*\n* @signature `mutate.setAttribute.call(element, name, value)`\n*\n* @param {Element} element The element on which to set the attribute.\n* @param {String} name The name of the attribute to set.\n* @param {String} value The value to set on the attribute.\n*/\n\n/**\n* @function can-dom-mutate/node.removeAttribute removeAttribute\n* @parent can-dom-mutate/node\n*\n* Removes an attribute from an element, effectively `Element.prototype.removeAttribute`.\n*\n* @signature `mutate.removeAttribute.call(element, name, value)`\n*\n* @param {Element} element The element from which to remove the attribute.\n* @param {String} name The name of the attribute to remove.\n*/\n\nfunction setMutateStrategy(observer) {\n\tvar strategy = observer ? normal : compat;\n\n\tfor (var key in strategy) {\n\t\tmutate$1[key] = strategy[key];\n\t}\n}\n\nvar mutationObserverKey = 'MutationObserver';\nsetMutateStrategy(canGlobals_1_2_2_canGlobals.getKeyValue(mutationObserverKey));\ncanGlobals_1_2_2_canGlobals.onKeyValue(mutationObserverKey, setMutateStrategy);\n\nvar node = canNamespace_1_0_0_canNamespace.domMutateNode = canDomMutate_2_0_9_canDomMutate.node = mutate$1;\n\n// backwards compatibility\nvar canDomMutate_2_0_9_node = canNamespace_1_0_0_canNamespace.node = node;\n\n/**\n * @module {function} can-child-nodes\n * @parent can-dom-utilities\n * @collection can-infrastructure\n * @package ./package.json\n * \n * @signature `childNodes(node)`\n *\n * Get all of the childNodes of a given node.\n *\n * ```js\n * var stache = require(\"can-stache\");\n * var childNodes = require(\"can-util/child-nodes/child-nodes\");\n *\n * var html = \"<div><h1><span></span></h1></div>\";\n * var frag = stache(html)();\n *\n * console.log(childNodes(frag)[0].nodeName); // -> DIV\n * ```\n *\n * @param {Object} node The Node that you want child nodes for.\n */\n\nfunction childNodes(node) {\n\tvar childNodes = node.childNodes;\n\tif (\"length\" in childNodes) {\n\t\treturn childNodes;\n\t} else {\n\t\tvar cur = node.firstChild;\n\t\tvar nodes = [];\n\t\twhile (cur) {\n\t\t\tnodes.push(cur);\n\t\t\tcur = cur.nextSibling;\n\t\t}\n\t\treturn nodes;\n\t}\n}\n\nvar canChildNodes_1_2_1_canChildNodes = canNamespace_1_0_0_canNamespace.childNodes = childNodes;\n\n/**\n@module {function} can-fragment\n@parent can-dom-utilities\n@collection can-infrastructure\n@package ./package.json\n\nConvert a String, HTMLElement, documentFragment, contentArray, or object with a `can.toDOM` symbol into a documentFragment.\n\n@signature `fragment(item, doc)`\n\n@param {String|HTMLElement|documentFragment|contentArray} item\n@param {Document} doc   an optional DOM document in which to build the fragment\n\n@return {documentFragment}\n\n@body\n\n## Use\n\nContentArrays can be used to combine multiple HTMLElements into a single document fragment.  For example:\n\n    var fragment = require(\"can-fragment\");\n\n    var p = document.createElement(\"p\");\n    p.innerHTML = \"Welcome to <b>CanJS</b>\";\n    var contentArray = [\"<h1>Hi There</h1>\", p];\n    var fragment = fragment( contentArray )\n\n`fragment` will be a documentFragment with the following elements:\n\n    <h1>Hi There</h1>\n    <p>Welcome to <b>CanJS</b></p>\n\n */\n\n\n// fragment.js\n// ---------\n// _DOM Fragment support._\nvar fragmentRE = /^\\s*<(\\w+)[^>]*>/,\n\ttoString = {}.toString,\n\ttoDOMSymbol = canSymbol_1_7_0_canSymbol.for(\"can.toDOM\");\n\nfunction makeFragment(html, name, doc) {\n\tif (name === undefined) {\n\t\tname = fragmentRE.test(html) && RegExp.$1;\n\t}\n\tif (html && toString.call(html.replace) === \"[object Function]\") {\n\t\t// Fix \"XHTML\"-style tags in all browsers\n\t\thtml = html.replace(/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\\w:]+)[^>]*)\\/>/gi, '<$1></$2>');\n\t}\n\tvar container = doc.createElement('div'),\n\t\ttemp = doc.createElement('div');\n\t// IE's parser will strip any `<tr><td>` tags when `innerHTML`\n\t// is called on a `tbody`. To get around this, we construct a\n\t// valid table with a `tbody` that has the `innerHTML` we want.\n\t// Then the container is the `firstChild` of the `tbody`.\n\t// [source](http://www.ericvasilik.com/2006/07/code-karma.html).\n\tif (name === 'tbody' || name === 'tfoot' || name === 'thead' || name === 'colgroup') {\n\t\ttemp.innerHTML = '<table>' + html + '</table>';\n\t\tcontainer = temp.firstChild.nodeType === 3 ? temp.lastChild : temp.firstChild;\n\t} else if (name === 'col') {\n\t\ttemp.innerHTML = '<table><colgroup>' + html + '</colgroup></table>';\n\t\tcontainer = temp.firstChild.nodeType === 3 ? temp.lastChild : temp.firstChild.firstChild;\n\t} else if (name === 'tr') {\n\t\ttemp.innerHTML = '<table><tbody>' + html + '</tbody></table>';\n\t\tcontainer = temp.firstChild.nodeType === 3 ? temp.lastChild : temp.firstChild.firstChild;\n\t} else if (name === 'td' || name === 'th') {\n\t\ttemp.innerHTML = '<table><tbody><tr>' + html + '</tr></tbody></table>';\n\t\tcontainer = temp.firstChild.nodeType === 3 ? temp.lastChild : temp.firstChild.firstChild.firstChild;\n\t} else if (name === 'option') {\n\t\ttemp.innerHTML = '<select>' + html + '</select>';\n\t\tcontainer = temp.firstChild.nodeType === 3 ? temp.lastChild : temp.firstChild;\n\t} else {\n\t\tcontainer.innerHTML = '' + html;\n\t}\n\n\treturn [].slice.call(canChildNodes_1_2_1_canChildNodes(container));\n}\n\nfunction fragment(html, doc) {\n\tif (html && html.nodeType === 11) {\n\t\treturn html;\n\t}\n\tif (!doc) {\n\t\tdoc = document$1();\n\t} else if (doc.length) {\n\t\tdoc = doc[0];\n\t}\n\n\tvar parts = makeFragment(html, undefined, doc),\n\t\tfrag = (doc || document).createDocumentFragment();\n\tfor (var i = 0, length = parts.length; i < length; i++) {\n\t\tfrag.appendChild(parts[i]);\n\t}\n\treturn frag;\n}\n\nvar makeFrag = function(item, doc) {\n\tvar document = doc || document$1();\n\tvar frag;\n\tif (!item || typeof item === \"string\") {\n\t\tfrag = fragment(item == null ? \"\" : \"\" + item, document);\n\t\t// If we have an empty frag...\n\t} else if(typeof item[toDOMSymbol] === \"function\") {\n\t\treturn makeFrag(item[toDOMSymbol]());\n\t}\n\telse if (item.nodeType === 11) {\n\t\treturn item;\n\t} else if (typeof item.nodeType === \"number\") {\n\t\tfrag = document.createDocumentFragment();\n\t\tfrag.appendChild(item);\n\t\treturn frag;\n\t} else if (canReflect_1_19_2_canReflect.isListLike(item)) {\n\t\tfrag = document.createDocumentFragment();\n\t\tcanReflect_1_19_2_canReflect.eachIndex(item, function(item) {\n\t\t\tfrag.appendChild(makeFrag(item));\n\t\t});\n\t} else {\n\t\tfrag = fragment(\"\" + item, document);\n\t}\n    if (!canChildNodes_1_2_1_canChildNodes(frag).length) {\n        frag.appendChild(document.createTextNode(''));\n    }\n    return frag;\n};\n\nvar canFragment_1_3_1_canFragment = canNamespace_1_0_0_canNamespace.fragment = canNamespace_1_0_0_canNamespace.frag = makeFrag;\n\nvar canViewCallbacks_5_0_0_canViewCallbacks = createCommonjsModule(function (module) {\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar callbackMapSymbol = canSymbol_1_7_0_canSymbol.for('can.callbackMap');\nvar initializeSymbol = canSymbol_1_7_0_canSymbol.for('can.initialize');\n\n//!steal-remove-start\nif (process.env.NODE_ENV !== 'production') {\n\tvar requestedAttributes = {};\n}\n//!steal-remove-end\n\nvar tags = {};\n\n// WeakSet containing elements that have been rendered already\n// and therefore do not need to be rendered again\n\nvar automountEnabled = function(){\n\tvar document = canGlobals_1_2_2_canGlobals.getKeyValue(\"document\");\n\tif(document == null || document.documentElement == null) {\n\t\treturn false;\n\t}\n\treturn document.documentElement.getAttribute(\"data-can-automount\") !== \"false\";\n};\n\nvar renderedElements = new WeakMap();\n\nvar mountElement = function (node) {\n\tvar tagName = node.tagName && node.tagName.toLowerCase();\n\tvar tagHandler = tags[tagName];\n\n\t// skip elements that already have a viewmodel or elements whose tags don't match a registered tag\n\t// or elements that have already been rendered\n\tif (tagHandler) {\n\t\tcallbacks.tagHandler(node, tagName, {});\n\t}\n};\n\nvar mutationObserverEnabled = false;\nvar disableMutationObserver;\nvar enableMutationObserver = function() {\n\tvar docEl = document$1().documentElement;\n\n\tif (mutationObserverEnabled) {\n\t\tif (mutationObserverEnabled === docEl) {\n\t\t\treturn;\n\t\t}\n\t\t// if the document has changed, re-enable mutationObserver\n\t\tdisableMutationObserver();\n\t}\n\n\tvar undoOnInsertionHandler = canDomMutate_2_0_9_canDomMutate.onConnected(docEl, function(mutation) {\n\t\tmountElement(mutation.target);\n\t});\n\tmutationObserverEnabled = true;\n\n\tdisableMutationObserver = function() {\n\t\tundoOnInsertionHandler();\n\t\tmutationObserverEnabled = false;\n\t};\n};\n\nvar renderTagsInDocument = function(tagName) {\n\tvar nodes = document$1().getElementsByTagName(tagName);\n\n\tfor (var i=0, node; (node = nodes[i]) !== undefined; i++) {\n\t\tmountElement(node);\n\t}\n};\n\nvar attr = function (attributeName, attrHandler) {\n\tif(attrHandler) {\n\t\tif (typeof attributeName === \"string\") {\n\t\t\tattributes[attributeName] = attrHandler;\n\t\t\t//!steal-remove-start\n\t\t\tif (process.env.NODE_ENV !== 'production') {\n\t\t\t\tif(requestedAttributes[attributeName]) {\n\t\t\t\t\tdev.warn(\"can-view-callbacks: \" + attributeName+ \" custom attribute behavior requested before it was defined.  Make sure \"+attributeName+\" is defined before it is needed.\");\n\t\t\t\t}\n\t\t\t}\n\t\t\t//!steal-remove-end\n\t\t} else {\n\t\t\tregExpAttributes.push({\n\t\t\t\tmatch: attributeName,\n\t\t\t\thandler: attrHandler\n\t\t\t});\n\n\t\t\t//!steal-remove-start\n\t\t\tif (process.env.NODE_ENV !== 'production') {\n\t\t\t\tObject.keys(requestedAttributes).forEach(function(requested){\n\t\t\t\t\tif(attributeName.test(requested)) {\n\t\t\t\t\t\tdev.warn(\"can-view-callbacks: \" + requested+ \" custom attribute behavior requested before it was defined.  Make sure \"+requested+\" is defined before it is needed.\");\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\t//!steal-remove-end\n\t\t}\n\t} else {\n\t\tvar cb = attributes[attributeName];\n\t\tif( !cb ) {\n\n\t\t\tfor( var i = 0, len = regExpAttributes.length; i < len; i++) {\n\t\t\t\tvar attrMatcher = regExpAttributes[i];\n\t\t\t\tif(attrMatcher.match.test(attributeName)) {\n\t\t\t\t\treturn attrMatcher.handler;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t//!steal-remove-start\n\t\tif (process.env.NODE_ENV !== 'production') {\n\t\t\trequestedAttributes[attributeName] = true;\n\t\t}\n\t\t//!steal-remove-end\n\n\t\treturn cb;\n\t}\n};\n\nvar attrs = function(attrMap) {\n\tvar map = canReflect_1_19_2_canReflect.getKeyValue(attrMap, callbackMapSymbol) || attrMap;\n\n\t// Only add bindings once.\n\tif(attrMaps.has(map)) {\n\t\treturn;\n\t} else {\n\t\t// Would prefer to use WeakSet but IE11 doesn't support it.\n\t\tattrMaps.set(map, true);\n\t}\n\n\tcanReflect_1_19_2_canReflect.eachKey(map, function(callback, exp){\n\t\tattr(exp, callback);\n\t});\n};\n\nvar attributes = {},\n\tregExpAttributes = [],\n\tattrMaps = new WeakMap(),\n\tautomaticCustomElementCharacters = /[-\\:]/;\nvar defaultCallback = function () {};\n\nvar tag = function (tagName, tagHandler) {\n\tif(tagHandler) {\n\t\tvar validCustomElementName = automaticCustomElementCharacters.test(tagName),\n\t\t\ttagExists = typeof tags[tagName.toLowerCase()] !== 'undefined',\n\t\t\tcustomElementExists;\n\n\t\t//!steal-remove-start\n\t\tif (process.env.NODE_ENV !== 'production') {\n\t\t\tif (tagExists) {\n\t\t\t\tdev.warn(\"Custom tag: \" + tagName.toLowerCase() + \" is already defined\");\n\t\t\t}\n\n\t\t\tif (!validCustomElementName && tagName !== \"content\") {\n\t\t\t\tdev.warn(\"Custom tag: \" + tagName.toLowerCase() + \" hyphen missed\");\n\t\t\t}\n\t\t}\n\t\t//!steal-remove-end\n\n\t\ttags[tagName.toLowerCase()] = tagHandler;\n\n\t\tif(automountEnabled()) {\n\t\t\tvar customElements = canGlobals_1_2_2_canGlobals.getKeyValue(\"customElements\");\n\n\t\t\t// automatically render elements that have tagHandlers\n\t\t\t// If browser supports customElements, register the tag as a custom element\n\t\t\tif (customElements) {\n\t\t\t\tcustomElementExists = customElements.get(tagName.toLowerCase());\n\n\t\t\t\tif (validCustomElementName && !customElementExists) {\n\t\t\t\t\tvar CustomElement = function() {\n\t\t\t\t\t\treturn Reflect.construct(HTMLElement, [], CustomElement);\n\t\t\t\t\t};\n\n\t\t\t\t\tCustomElement.prototype = Object.create(HTMLElement.prototype);\n\t\t\t\t\tCustomElement.prototype.constructor = CustomElement;\n\n\t\t\t\t\tCustomElement.prototype.connectedCallback = function() {\n\t\t\t\t\t\tcallbacks.tagHandler(this, tagName.toLowerCase(), {});\n\t\t\t\t\t};\n\n\t\t\t\t\tcustomElements.define(tagName, CustomElement);\n\t\t\t\t}\n\t\t\t}\n\t\t\t// If browser doesn't support customElements, set up MutationObserver for\n\t\t\t// rendering elements when they are inserted in the page\n\t\t\t// and rendering elements that are already in the page\n\t\t\telse {\n\t\t\t\tenableMutationObserver();\n\t\t\t\trenderTagsInDocument(tagName);\n\t\t\t}\n\t\t} else if(mutationObserverEnabled) {\n\t\t\tdisableMutationObserver();\n\t\t}\n\t} else {\n\t\tvar cb;\n\n\t\t// if null is passed as tagHandler, remove tag\n\t\tif (tagHandler === null) {\n\t\t\tdelete tags[tagName.toLowerCase()];\n\t\t} else {\n\t\t\tcb = tags[tagName.toLowerCase()];\n\t\t}\n\n\t\tif(!cb && automaticCustomElementCharacters.test(tagName)) {\n\t\t\t// empty callback for things that look like special tags\n\t\t\tcb = defaultCallback;\n\t\t}\n\t\treturn cb;\n\t}\n\n};\n\nvar callbacks = {\n\t_tags: tags,\n\t_attributes: attributes,\n\t_regExpAttributes: regExpAttributes,\n\tdefaultCallback: defaultCallback,\n\ttag: tag,\n\tattr: attr,\n\tattrs: attrs,\n\t// handles calling back a tag callback\n\ttagHandler: function(el, tagName, tagData){\n\t\t// skip elements that have already been rendered\n\t\tif (renderedElements.has(el)) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar scope = tagData.scope,\n\t\t\thelperTagCallback = scope && scope.templateContext.tags.get(tagName),\n\t\t\ttagCallback = helperTagCallback || tags[tagName] || el[initializeSymbol],\n\t\t\tres;\n\n\t\t// If this was an element like <foo-bar> that doesn't have a component, just render its content\n\t\tif(tagCallback) {\n\t\t\tres = canObservationRecorder_1_3_1_canObservationRecorder.ignore(tagCallback)(el, tagData);\n\n\t\t\t// add the element to the Set of elements that have had their handlers called\n\t\t\t// this will prevent the handler from being called again when the element is inserted\n\t\t\trenderedElements.set(el, true);\n\t\t} else {\n\t\t\tres = scope;\n\t\t}\n\n\t\t//!steal-remove-start\n\t\tif (process.env.NODE_ENV !== 'production') {\n\t\t\tif (!tagCallback) {\n\t\t\t\tvar GLOBAL = global_1();\n\t\t\t\tvar ceConstructor = document$1().createElement(tagName).constructor;\n\t\t\t\t// If not registered as a custom element, the browser will use default constructors\n\t\t\t\tif (ceConstructor === GLOBAL.HTMLElement || ceConstructor === GLOBAL.HTMLUnknownElement) {\n\t\t\t\t\tdev.warn('can-view-callbacks: No custom element found for ' + tagName);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t//!steal-remove-end\n\n\t\t// If the tagCallback gave us something to render with, and there is content within that element\n\t\t// render it!\n\t\tif (res && tagData.subtemplate) {\n\t\t\tif (scope !== res) {\n\t\t\t\tscope = scope.add(res);\n\t\t\t}\n\n\t\t\t//var nodeList = nodeLists.register([], undefined, tagData.parentNodeList || true, false);\n\t\t\t//nodeList.expression = \"<\" + el.tagName + \">\";\n\n\t\t\tvar result = tagData.subtemplate(scope, tagData.options);\n\t\t\tvar frag = typeof result === \"string\" ? canFragment_1_3_1_canFragment(result) : result;\n\t\t\tcanDomMutate_2_0_9_node.appendChild.call(el, frag);\n\t\t}\n\t}\n};\n\ncanNamespace_1_0_0_canNamespace.view = canNamespace_1_0_0_canNamespace.view || {};\n\nif (canNamespace_1_0_0_canNamespace.view.callbacks) {\n\tthrow new Error(\"You can't have two versions of can-view-callbacks, check your dependencies\");\n} else {\n\tmodule.exports = canNamespace_1_0_0_canNamespace.view.callbacks = callbacks;\n}\n});\n\n/* jshint maxdepth:7 */\n/* jshint latedef:false */\n\n\n\n\n\n// if an object or a function\n// convert into what it should look like\n// then the modification can happen in place\n// but it has to have more than the current node\n// blah!\nvar processNodes = function(nodes, paths, location, document){\n\tvar frag = document.createDocumentFragment();\n\n\tfor(var i = 0, len = nodes.length; i < len; i++) {\n\t\tvar node = nodes[i];\n\t\tfrag.appendChild( processNode(node,paths,location.concat(i), document) );\n\t}\n\treturn frag;\n},\n\tkeepsTextNodes =  typeof document !== \"undefined\" && (function(){\n\t\tvar testFrag = document.createDocumentFragment();\n\t\tvar div = document.createElement(\"div\");\n\n\t\tdiv.appendChild(document.createTextNode(\"\"));\n\t\tdiv.appendChild(document.createTextNode(\"\"));\n\t\ttestFrag.appendChild(div);\n\n\t\tvar cloned  = testFrag.cloneNode(true);\n\n\t\treturn cloned.firstChild.childNodes.length === 2;\n\t})(),\n\tclonesWork = typeof document !== \"undefined\" && (function(){\n\t\t// Since html5shiv is required to support custom elements, assume cloning\n\t\t// works in any browser that doesn't have html5shiv\n\n\t\t// Clone an element containing a custom tag to see if the innerHTML is what we\n\t\t// expect it to be, or if not it probably was created outside of the document's\n\t\t// namespace.\n\t\tvar el = document.createElement('a');\n\t\tel.innerHTML = \"<xyz></xyz>\";\n\t\tvar clone = el.cloneNode(true);\n\t\tvar works = clone.innerHTML === \"<xyz></xyz>\";\n\t\tvar MO, observer;\n\n\t\tif(works) {\n\t\t\t// Cloning text nodes with dashes seems to create multiple nodes in IE11 when\n\t\t\t// MutationObservers of subtree modifications are used on the documentElement.\n\t\t\t// Since this is not what we expect we have to include detecting it here as well.\n\t\t\tel = document.createDocumentFragment();\n\t\t\tel.appendChild(document.createTextNode('foo-bar'));\n\n\t\t\tMO = mutationObserver();\n\n\t\t\tif (MO) {\n\t\t\t\tobserver = new MO(function() {});\n\t\t\t\tobserver.observe(document.documentElement, { childList: true, subtree: true });\n\n\t\t\t\tclone = el.cloneNode(true);\n\n\t\t\t\tobserver.disconnect();\n\t\t\t} else {\n\t\t\t\tclone = el.cloneNode(true);\n\t\t\t}\n\n\t\t\treturn clone.childNodes.length === 1;\n\t\t}\n\n\t\treturn works;\n\t})(),\n\tnamespacesWork = typeof document !== \"undefined\" && !!document.createElementNS;\n\n/**\n * @function cloneNode\n * @hide\n *\n * A custom cloneNode function to be used in browsers that properly support cloning\n * of custom tags (IE8 for example). Fixes it by doing some manual cloning that\n * uses innerHTML instead, which has been shimmed.\n *\n * @param {DocumentFragment} frag A document fragment to clone\n * @return {DocumentFragment} a new fragment that is a clone of the provided argument\n */\nvar cloneNode = clonesWork ?\n\tfunction(el){\n\t\treturn el.cloneNode(true);\n\t} :\n\tfunction(node){\n\t\tvar document = node.ownerDocument;\n\t\tvar copy;\n\n\t\tif(node.nodeType === 1) {\n\t\t\tif(node.namespaceURI !== 'http://www.w3.org/1999/xhtml' && namespacesWork && document.createElementNS) {\n\t\t\t\tcopy = document.createElementNS(node.namespaceURI, node.nodeName);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tcopy = document.createElement(node.nodeName);\n\t\t\t}\n\t\t} else if(node.nodeType === 3){\n\t\t\tcopy = document.createTextNode(node.nodeValue);\n\t\t} else if(node.nodeType === 8) {\n\t\t\tcopy = document.createComment(node.nodeValue);\n\t\t} else if(node.nodeType === 11) {\n\t\t\tcopy = document.createDocumentFragment();\n\t\t}\n\n\t\tif(node.attributes) {\n\t\t\tvar attributes = node.attributes;\n\t\t\tfor (var i = 0; i < attributes.length; i++) {\n\t\t\t\tvar attribute = attributes[i];\n\t\t\t\tif (attribute && attribute.specified) {\n\t\t\t\t\t// If the attribute has a namespace set the namespace \n\t\t\t\t\t// otherwise it will be set to null\n\t\t\t\t\tif (attribute.namespaceURI) {\n\t\t\t\t\t\tcopy.setAttributeNS(attribute.namespaceURI, attribute.nodeName || attribute.name, attribute.nodeValue || attribute.value);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcopy.setAttribute(attribute.nodeName || attribute.name, attribute.nodeValue || attribute.value);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif(node && node.firstChild) {\n\t\t\tvar child = node.firstChild;\n\n\t\t\twhile(child) {\n\t\t\t\tcopy.appendChild( cloneNode(child) );\n\t\t\t\tchild = child.nextSibling;\n\t\t\t}\n\t\t}\n\n\t\treturn copy;\n\t};\n\nfunction processNode(node, paths, location, document){\n\tvar callback,\n\t\tloc = location,\n\t\tnodeType = typeof node,\n\t\tel,\n\t\tp,\n\t\ti , len;\n\tvar getCallback = function(){\n\t\tif(!callback) {\n\t\t\tcallback  = {\n\t\t\t\tpath: location,\n\t\t\t\tcallbacks: []\n\t\t\t};\n\t\t\tpaths.push(callback);\n\t\t\tloc = [];\n\t\t}\n\t\treturn callback;\n\t};\n\n\tif(nodeType === \"object\") {\n\t\tif( node.tag ) {\n\t\t\tif(namespacesWork && node.namespace) {\n\t\t\t\tel = document.createElementNS(node.namespace, node.tag);\n\t\t\t} else {\n\t\t\t\tel = document.createElement(node.tag);\n\t\t\t}\n\n\t\t\tif(node.attrs) {\n\t\t\t\tfor(var attrName in node.attrs) {\n\t\t\t\t\tvar value = node.attrs[attrName];\n\t\t\t\t\tif(typeof value === \"function\"){\n\t\t\t\t\t\tgetCallback().callbacks.push({\n\t\t\t\t\t\t\tcallback:  value\n\t\t\t\t\t\t});\n\t\t\t\t\t} else if (value !== null && typeof value === \"object\" && value.namespaceURI) {\n\t\t\t\t\t\tel.setAttributeNS(value.namespaceURI,attrName,value.value);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcanDomMutate_2_0_9_node.setAttribute.call(el, attrName, value);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(node.attributes) {\n\t\t\t\tfor(i = 0, len = node.attributes.length; i < len; i++ ) {\n\t\t\t\t\tgetCallback().callbacks.push({callback: node.attributes[i]});\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(node.children && node.children.length) {\n\t\t\t\t// add paths\n\t\t\t\tif(callback) {\n\t\t\t\t\tp = callback.paths = [];\n\t\t\t\t} else {\n\t\t\t\t\tp = paths;\n\t\t\t\t}\n\n\t\t\t\tel.appendChild( processNodes(node.children, p, loc, document) );\n\t\t\t}\n\t\t} else if(node.comment) {\n\t\t\tel = document.createComment(node.comment);\n\n\t\t\tif(node.callbacks) {\n\t\t\t\tfor(i = 0, len = node.callbacks.length; i < len; i++ ) {\n\t\t\t\t\tgetCallback().callbacks.push({callback: node.callbacks[i]});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\n\t} else if(nodeType === \"string\"){\n\n\t\tel = document.createTextNode(node);\n\n\t} else if(nodeType === \"function\") {\n\n\t\tif(keepsTextNodes) {\n\t\t\tel = document.createTextNode(\"\");\n\t\t\tgetCallback().callbacks.push({\n\t\t\t\tcallback: node\n\t\t\t});\n\t\t} else {\n\t\t\tel = document.createComment(\"~\");\n\t\t\tgetCallback().callbacks.push({\n\t\t\t\tcallback: function(){\n\t\t\t\t\tvar el = document.createTextNode(\"\");\n\t\t\t\t\tcanDomMutate_2_0_9_node.replaceChild.call(this.parentNode, el, this);\n\t\t\t\t\treturn node.apply(el,arguments );\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t}\n\treturn el;\n}\n\nfunction getCallbacks(el, pathData, elementCallbacks){\n\tvar path = pathData.path,\n\t\tcallbacks = pathData.callbacks,\n\t\tpaths = pathData.paths,\n\t\tchild = el,\n\t\tpathLength = path ? path.length : 0,\n\t\tpathsLength = paths ? paths.length : 0;\n\n\tfor(var i = 0; i < pathLength; i++) {\n\t\tchild = child.childNodes.item(path[i]);\n\t}\n\n\tfor( i= 0 ; i < pathsLength; i++) {\n\t\tgetCallbacks(child, paths[i], elementCallbacks);\n\t}\n\n\telementCallbacks.push({element: child, callbacks: callbacks});\n}\n\nfunction hydrateCallbacks(callbacks, args) {\n\tvar len = callbacks.length,\n\t\tcallbacksLength,\n\t\tcallbackElement,\n\t\tcallbackData;\n\n\tfor(var i = 0; i < len; i++) {\n\t\tcallbackData = callbacks[i];\n\t\tcallbacksLength = callbackData.callbacks.length;\n\t\tcallbackElement = callbackData.element;\n\t\tfor(var c = 0; c < callbacksLength; c++) {\n\t\t\tcallbackData.callbacks[c].callback.apply(callbackElement, args);\n\t\t}\n\t}\n}\n\nfunction makeTarget(nodes, doc){\n\tvar paths = [];\n\tvar frag = processNodes(nodes, paths, [], doc || document$1());\n\treturn {\n\t\tpaths: paths,\n\t\tclone: frag,\n\t\thydrate: function(){\n\t\t\tvar cloned = cloneNode(this.clone);\n\t\t\tvar args = [];\n\t\t\tfor (var a = 0, ref = args.length = arguments.length; a < ref; a++) {\n\t\t\t\targs[a] = arguments[a];\n\t\t\t} // see https://jsperf.com/nodelist-to-array\n\n\t\t\tvar callbacks = [];\n\t\t\tfor(var i = 0; i < paths.length; i++) {\n\t\t\t\tgetCallbacks(cloned, paths[i], callbacks);\n\t\t\t}\n\t\t\thydrateCallbacks(callbacks, args);\n\n\t\t\treturn cloned;\n\t\t}\n\t};\n}\nmakeTarget.keepsTextNodes = keepsTextNodes;\nmakeTarget.cloneNode = cloneNode;\n\ncanNamespace_1_0_0_canNamespace.view = canNamespace_1_0_0_canNamespace.view || {};\nvar canViewTarget_5_0_0_canViewTarget = canNamespace_1_0_0_canNamespace.view.target = makeTarget;\n\nvar getKeyValueSymbol$2 = canSymbol_1_7_0_canSymbol.for(\"can.getKeyValue\"),\n\tobserveDataSymbol = canSymbol_1_7_0_canSymbol.for(\"can.meta\");\n\nvar promiseDataPrototype = {\n\tisPending: true,\n\tstate: \"pending\",\n\tisResolved: false,\n\tisRejected: false,\n\tvalue: undefined,\n\treason: undefined\n};\n\nfunction setVirtualProp(promise, property, value) {\n\tvar observeData = promise[observeDataSymbol];\n\tvar old = observeData[property];\n\tobserveData[property] = value;\n\tcanQueues_1_3_2_canQueues.enqueueByQueue(observeData.handlers.getNode([property]), promise, [value,old], function() {\n\t\treturn {};\n\t},[\"Promise\", promise, \"resolved with value\", value, \"and changed virtual property: \"+property]);\n}\n\nfunction initPromise(promise) {\n\tvar observeData = promise[observeDataSymbol];\n\tif(!observeData) {\n\t\tObject.defineProperty(promise, observeDataSymbol, {\n\t\t\tenumerable: false,\n\t\t\tconfigurable: false,\n\t\t\twritable: false,\n\t\t\tvalue: Object.create(promiseDataPrototype)\n\t\t});\n\t\tobserveData = promise[observeDataSymbol];\n\t\tobserveData.handlers = new canKeyTree_1_2_2_canKeyTree([Object, Object, Array]);\n\t}\n\tpromise.then(function(value){\n\t\tcanQueues_1_3_2_canQueues.batch.start();\n\t\tsetVirtualProp(promise, \"isPending\", false);\n\t\tsetVirtualProp(promise, \"isResolved\", true);\n\t\tsetVirtualProp(promise, \"value\", value);\n\t\tsetVirtualProp(promise, \"state\", \"resolved\");\n\t\tcanQueues_1_3_2_canQueues.batch.stop();\n\t}, function(reason){\n\t\tcanQueues_1_3_2_canQueues.batch.start();\n\t\tsetVirtualProp(promise, \"isPending\", false);\n\t\tsetVirtualProp(promise, \"isRejected\", true);\n\t\tsetVirtualProp(promise, \"reason\", reason);\n\t\tsetVirtualProp(promise, \"state\", \"rejected\");\n\t\tcanQueues_1_3_2_canQueues.batch.stop();\n\n\t\t//!steal-remove-start\n\t\tif (process.env.NODE_ENV !== 'production') {\n\t\t\tdev.error(\"Failed promise:\", reason);\n\t\t}\n\t\t//!steal-remove-end\n\t});\n}\n\nfunction setupPromise(value) {\n\tvar oldPromiseFn;\n\tvar proto = \"getPrototypeOf\" in Object ? Object.getPrototypeOf(value) : value.__proto__; //jshint ignore:line\n\n\tif(value[getKeyValueSymbol$2] && value[observeDataSymbol]) {\n\t\t// promise has already been set up.  Don't overwrite.\n\t\treturn;\n\t}\n\n\tif(proto === null || proto === Object.prototype) {\n\t\t// promise type is a plain object or dictionary.  Set up object instead of proto.\n\t\tproto = value;\n\n\t\tif(typeof proto.promise === \"function\") {\n\t\t\t// Duck-type identification as a jQuery.Deferred;\n\t\t\t// In that case, the promise() function returns a new object\n\t\t\t//  that needs to be decorated.\n\t\t\toldPromiseFn = proto.promise;\n\t\t\tproto.promise = function() {\n\t\t\t\tvar result = oldPromiseFn.call(proto);\n\t\t\t\tsetupPromise(result);\n\t\t\t\treturn result;\n\t\t\t};\n\t\t}\n\t}\n\n\tcanReflect_1_19_2_canReflect.assignSymbols(proto, {\n\t\t\"can.getKeyValue\": function(key) {\n\t\t\tif(!this[observeDataSymbol]) {\n\t\t\t\tinitPromise(this);\n\t\t\t}\n\n\t\t\tcanObservationRecorder_1_3_1_canObservationRecorder.add(this, key);\n\t\t\tswitch(key) {\n\t\t\t\tcase \"state\":\n\t\t\t\tcase \"isPending\":\n\t\t\t\tcase \"isResolved\":\n\t\t\t\tcase \"isRejected\":\n\t\t\t\tcase \"value\":\n\t\t\t\tcase \"reason\":\n\t\t\t\treturn this[observeDataSymbol][key];\n\t\t\t\tdefault:\n\t\t\t\treturn this[key];\n\t\t\t}\n\t\t},\n\t\t\"can.getValue\": function() {\n\t\t\treturn this[getKeyValueSymbol$2](\"value\");\n\t\t},\n\t\t\"can.isValueLike\": false,\n\t\t\"can.onKeyValue\": function(key, handler, queue) {\n\t\t\tif(!this[observeDataSymbol]) {\n\t\t\t\tinitPromise(this);\n\t\t\t}\n\t\t\tthis[observeDataSymbol].handlers.add([key, queue || \"mutate\", handler]);\n\t\t},\n\t\t\"can.offKeyValue\": function(key, handler, queue) {\n\t\t\tif(!this[observeDataSymbol]) {\n\t\t\t\tinitPromise(this);\n\t\t\t}\n\t\t\tthis[observeDataSymbol].handlers.delete([key, queue || \"mutate\", handler]);\n\t\t},\n\t\t\"can.hasOwnKey\": function(key) {\n\t\t\tif (!this[observeDataSymbol]) {\n\t\t\t\tinitPromise(this);\n\t\t\t}\n\t\t\treturn (key in this[observeDataSymbol]);\n\t\t}\n\t});\n}\n\nvar canReflectPromise_2_2_1_canReflectPromise = setupPromise;\n\nvar getValueSymbol$2 = canSymbol_1_7_0_canSymbol.for(\"can.getValue\");\nvar setValueSymbol$3 = canSymbol_1_7_0_canSymbol.for(\"can.setValue\");\n\nvar isValueLikeSymbol = canSymbol_1_7_0_canSymbol.for(\"can.isValueLike\");\nvar peek$3 = canObservationRecorder_1_3_1_canObservationRecorder.ignore(canReflect_1_19_2_canReflect.getKeyValue.bind(canReflect_1_19_2_canReflect));\nvar observeReader;\nvar isPromiseLike = canObservationRecorder_1_3_1_canObservationRecorder.ignore(function isPromiseLike(value){\n\treturn typeof value === \"object\" && value && typeof value.then === \"function\";\n});\n\nvar bindName = Function.prototype.bind;\n//!steal-remove-start\nif (process.env.NODE_ENV !== 'production') {\n\tbindName = function(source){\n\t\tvar fn = Function.prototype.bind.call(this, source);\n\t\tObject.defineProperty(fn, \"name\", {\n\t\t\tvalue: canReflect_1_19_2_canReflect.getName(source) + \".\"+canReflect_1_19_2_canReflect.getName(this)\n\t\t});\n\t\treturn fn;\n\t};\n}\n//!steal-remove-end\n\nvar isAt = function(index, reads) {\n\tvar prevRead = reads[index-1];\n\treturn prevRead && prevRead.at;\n};\n\nvar readValue = function(value, index, reads, options, state, prev){\n\t// if the previous read is AT false ... we shouldn't be doing this;\n\tvar usedValueReader;\n\tdo {\n\n\t\tusedValueReader = false;\n\t\tfor(var i =0, len = observeReader.valueReaders.length; i < len; i++){\n\t\t\tif( observeReader.valueReaders[i].test(value, index, reads, options) ) {\n\t\t\t\tvalue = observeReader.valueReaders[i].read(value, index, reads, options, state, prev);\n\t\t\t\t//usedValueReader = true;\n\t\t\t}\n\t\t}\n\t} while(usedValueReader);\n\n\treturn value;\n};\n\nvar specialRead = {index: true, key: true, event: true, element: true, viewModel: true};\n\nvar checkForObservableAndNotify = function(options, state, getObserves, value, index){\n\tif(options.foundObservable && !state.foundObservable) {\n\t\tif(canObservationRecorder_1_3_1_canObservationRecorder.trapsCount()) {\n\t\t\tcanObservationRecorder_1_3_1_canObservationRecorder.addMany( getObserves() );\n\t\t\toptions.foundObservable(value, index);\n\t\t\tstate.foundObservable = true;\n\t\t}\n\t}\n};\n\nvar objHasKeyAtIndex = function(obj, reads, index) {\n\treturn !!(\n\t\treads && reads.length &&\n\t\tcanReflect_1_19_2_canReflect.hasKey(obj, reads[index].key)\n\t);\n};\n\nobserveReader = {\n\t// there are things that you need to evaluate when you get them back as a property read\n\t// for example a compute or a function you might need to call to get the next value to\n\t// actually check\n\t// - readCompute - can be set to `false` to prevent reading an ending compute.  This is used by component to get a\n\t//   compute as a delegate.  In 3.0, this should be removed and force people to write \"{@prop} change\"\n\t// - callMethodsOnObservables - this is an overwrite ... so normal methods won't be called, but observable ones will.\n\t// - executeAnonymousFunctions - call a function if it's found, defaults to true\n\t// - proxyMethods - if the last read is a method, return a function so `this` will be correct.\n\t// - args - arguments to call functions with.\n\t//\n\t// Callbacks\n\t// - earlyExit - called if a value could not be found\n\t// - foundObservable - called when an observable value is found\n\tread: function (parent, reads, options) {\n\t\toptions = options || {};\n\t\tvar state = {\n\t\t\tfoundObservable: false\n\t\t};\n\t\tvar getObserves;\n\t\tif(options.foundObservable) {\n\t\t\tgetObserves = canObservationRecorder_1_3_1_canObservationRecorder.trap();\n\t\t}\n\n\t\t// `cur` is the current value.\n\t\tvar cur = readValue(parent, 0, reads, options, state),\n\t\t\t// `prev` is the object we are reading from.\n\t\t\tprev,\n\t\t\t// `foundObs` did we find an observable.\n\t\t\treadLength = reads.length,\n\t\t\ti = 0,\n\t\t\tparentHasKey;\n\n\t\tcheckForObservableAndNotify(options, state, getObserves, parent, 0);\n\n\t\twhile( i < readLength ) {\n\t\t\tprev = cur;\n\t\t\t// try to read the property\n\t\t\tfor(var r=0, readersLength = observeReader.propertyReaders.length; r < readersLength; r++) {\n\t\t\t\tvar reader = observeReader.propertyReaders[r];\n\t\t\t\tif(reader.test(cur)) {\n\t\t\t\t\tcur = reader.read(cur, reads[i], i, options, state);\n\t\t\t\t\tbreak; // there can be only one reading of a property\n\t\t\t\t}\n\t\t\t}\n\t\t\tcheckForObservableAndNotify(options, state, getObserves, prev, i);\n\t\t\ti = i+1;\n\t\t\t// read the value if it is a compute or function\n\t\t\tcur = readValue(cur, i, reads, options, state, prev);\n\n\t\t\tcheckForObservableAndNotify(options, state, getObserves, prev, i-1);\n\t\t\t// early exit if need be\n\t\t\tif (i < reads.length && (cur === null || cur === undefined )) {\n\t\t\t\tparentHasKey = objHasKeyAtIndex(prev, reads, i - 1);\n\t\t\t\tif (options.earlyExit && !parentHasKey) {\n\t\t\t\t\toptions.earlyExit(prev, i - 1, cur);\n\t\t\t\t}\n\t\t\t\t// return undefined so we know this isn't the right value\n\t\t\t\treturn {\n\t\t\t\t\tvalue: undefined,\n\t\t\t\t\tparent: prev,\n\t\t\t\t\tparentHasKey: parentHasKey,\n\t\t\t\t\tfoundLastParent: false\n\t\t\t\t};\n\t\t\t}\n\n\t\t}\n\n\t\tparentHasKey = objHasKeyAtIndex(prev, reads, reads.length - 1);\n\t\t// if we don't have a value, exit early.\n\t\tif (cur === undefined && !parentHasKey) {\n\t\t\tif (options.earlyExit) {\n\t\t\t\toptions.earlyExit(prev, i - 1);\n\t\t\t}\n\t\t}\n\t\treturn {\n\t\t\tvalue: cur,\n\t\t\tparent: prev,\n\t\t\tparentHasKey: parentHasKey,\n\t\t\tfoundLastParent: true\n\t\t};\n\t},\n\tget: function(parent, reads, options){\n\t\treturn observeReader.read(parent, observeReader.reads(reads), options || {}).value;\n\t},\n\tvalueReadersMap: {},\n\t// an array of types that might have a value inside them like functions\n\t// value readers check the current value\n\t// and get a new value from it\n\t// ideally they would keep calling until\n\t// none of these passed\n\tvalueReaders: [\n\t\t{\n\t\t\tname: \"function\",\n\t\t\t// if this is a function before the last read and its not a constructor function\n\t\t\ttest: function(value){\n\t\t\t\treturn value && canReflect_1_19_2_canReflect.isFunctionLike(value) && !canReflect_1_19_2_canReflect.isConstructorLike(value);\n\t\t\t},\n\t\t\tread: function(value, i, reads, options, state, prev){\n\t\t\t\tif(options.callMethodsOnObservables && canReflect_1_19_2_canReflect.isObservableLike(prev) && canReflect_1_19_2_canReflect.isMapLike(prev)) {\n\t\t\t\t\tdev.warn(\"can-stache-key: read() called with `callMethodsOnObservables: true`.\");\n\n\t\t\t\t\treturn value.apply(prev, options.args || []);\n\t\t\t\t}\n\n\t\t\t\treturn options.proxyMethods !== false ? bindName.call(value, prev) : value;\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\tname: \"isValueLike\",\n\t\t\t// compute value reader\n\t\t\ttest: function(value, i, reads, options) {\n\t\t\t\treturn value && value[getValueSymbol$2] && value[isValueLikeSymbol] !== false && (options.foundAt || !isAt(i, reads) );\n\t\t\t},\n\t\t\tread: function(value, i, reads, options){\n\t\t\t\tif(options.readCompute === false && i === reads.length ) {\n\t\t\t\t\treturn value;\n\t\t\t\t}\n\t\t\t\treturn canReflect_1_19_2_canReflect.getValue(value);\n\t\t\t},\n\t\t\twrite: function(base, newVal){\n\t\t\t\tif(base[setValueSymbol$3]) {\n\t\t\t\t\tbase[setValueSymbol$3](newVal);\n\t\t\t\t} else if(base.set) {\n\t\t\t\t\tbase.set(newVal);\n\t\t\t\t} else {\n\t\t\t\t\tbase(newVal);\n\t\t\t\t}\n\t\t\t}\n\t\t}],\n\tpropertyReadersMap: {},\n\t// an array of things that might have a property\n\tpropertyReaders: [\n\t\t{\n\t\t\tname: \"map\",\n\t\t\ttest: function(value){\n\t\t\t\t// the first time we try reading from a promise, set it up for\n\t\t\t\t//  special reflections.\n\t\t\t\tif(canReflect_1_19_2_canReflect.isPromise(value) ||\n\t\t\t\t\tisPromiseLike(value)) {\n\t\t\t\t\tcanReflectPromise_2_2_1_canReflectPromise(value);\n\t\t\t\t}\n\n\t\t\t\treturn canReflect_1_19_2_canReflect.isObservableLike(value) && canReflect_1_19_2_canReflect.isMapLike(value);\n\t\t\t},\n\t\t\tread: function(value, prop){\n\t\t\t\tvar res = canReflect_1_19_2_canReflect.getKeyValue(value, prop.key);\n\t\t\t\tif(res !== undefined) {\n\t\t\t\t\treturn res;\n\t\t\t\t} else {\n\t\t\t\t\treturn value[prop.key];\n\t\t\t\t}\n\t\t\t},\n\t\t\twrite: canReflect_1_19_2_canReflect.setKeyValue\n\t\t},\n\n\t\t// read a normal object\n\t\t{\n\t\t\tname: \"object\",\n\t\t\t// this is the default\n\t\t\ttest: function(){return true;},\n\t\t\tread: function(value, prop, i, options){\n\t\t\t\tif(value == null) {\n\t\t\t\t\treturn undefined;\n\t\t\t\t} else {\n\t\t\t\t\tif(typeof value === \"object\") {\n\t\t\t\t\t\tif(prop.key in value) {\n\t\t\t\t\t\t\treturn value[prop.key];\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// TODO: remove in 5.0.\n\t\t\t\t\t\t//!steal-remove-start\n\t\t\t\t\t\tif (process.env.NODE_ENV !== 'production') {\n\t\t\t\t\t\t\tif( prop.at && specialRead[prop.key] && ( (\"@\"+prop.key) in value)) {\n\t\t\t\t\t\t\t\toptions.foundAt = true;\n\t\t\t\t\t\t\t\tdev.warn(\"Use %\"+prop.key+\" in place of @\"+prop.key+\".\");\n\t\t\t\t\t\t\t\treturn undefined;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t//!steal-remove-end\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn value[prop.key];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\twrite: function(base, prop, newVal){\n\t\t\t\tvar propValue = base[prop];\n\t\t\t\t// if newVal is observable object, lets try to update\n\t\t\t\tif(newVal != null && typeof newVal === \"object\" && canReflect_1_19_2_canReflect.isMapLike(propValue) ) {\n\t\t\t\t\tdev.warn(\"can-stache-key: Merging data into \\\"\" + prop + \"\\\" because its parent is non-observable\");\n\t\t\t\t\tcanReflect_1_19_2_canReflect.update(propValue, newVal);\n\t\t\t\t} else if(propValue != null && propValue[setValueSymbol$3] !== undefined){\n\t\t\t\t\tcanReflect_1_19_2_canReflect.setValue(propValue, newVal);\n\t\t\t\t} else {\n\t\t\t\t\tbase[prop] = newVal;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t],\n\treads: function(keyArg) {\n\t\tvar key = \"\"+keyArg;\n\t\tvar keys = [];\n\t\tvar last = 0;\n\t\tvar at = false;\n\t\tif( key.charAt(0) === \"@\" ) {\n\t\t\tlast = 1;\n\t\t\tat = true;\n\t\t}\n\t\tvar keyToAdd = \"\";\n\t\tfor(var i = last; i < key.length; i++) {\n\t\t\tvar character = key.charAt(i);\n\t\t\tif(character === \".\" || character === \"@\") {\n\t\t\t\tif( key.charAt(i -1) !== \"\\\\\" ) {\n\t\t\t\t\tkeys.push({\n\t\t\t\t\t\tkey: keyToAdd,\n\t\t\t\t\t\tat: at\n\t\t\t\t\t});\n\t\t\t\t\tat = character === \"@\";\n\t\t\t\t\tkeyToAdd = \"\";\n\t\t\t\t} else {\n\t\t\t\t\tkeyToAdd = keyToAdd.substr(0,keyToAdd.length - 1) + \".\";\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tkeyToAdd += character;\n\t\t\t}\n\t\t}\n\t\tkeys.push({\n\t\t\tkey: keyToAdd,\n\t\t\tat: at\n\t\t});\n\n\t\treturn keys;\n\t},\n\t// This should be able to set a property similar to how read works.\n\twrite: function(parent, key, value, options) {\n\t\tvar keys = typeof key === \"string\" ? observeReader.reads(key) : key;\n\t\tvar last;\n\n\t\toptions = options || {};\n\t\tif(keys.length > 1) {\n\t\t\tlast = keys.pop();\n\t\t\tparent = observeReader.read(parent, keys, options).value;\n\t\t\tkeys.push(last);\n\t\t} else {\n\t\t\tlast = keys[0];\n\t\t}\n\t\tif(!parent) {\n\t\t\treturn;\n\t\t}\n\t\tvar keyValue = peek$3(parent, last.key);\n\t\t// here's where we need to figure out the best way to write\n\n\t\t// if property being set points at a compute, set the compute\n\t\tif( observeReader.valueReadersMap.isValueLike.test(keyValue, keys.length - 1, keys, options) ) {\n\t\t\tobserveReader.valueReadersMap.isValueLike.write(keyValue, value, options);\n\t\t} else {\n\t\t\tif(observeReader.valueReadersMap.isValueLike.test(parent, keys.length - 1, keys, options) ) {\n\t\t\t\tparent = parent[getValueSymbol$2]();\n\t\t\t}\n\t\t\tif(observeReader.propertyReadersMap.map.test(parent)) {\n\t\t\t\tobserveReader.propertyReadersMap.map.write(parent, last.key, value, options);\n\t\t\t}\n\t\t\telse if(observeReader.propertyReadersMap.object.test(parent)) {\n\t\t\t\tobserveReader.propertyReadersMap.object.write(parent, last.key, value, options);\n\t\t\t\tif(options.observation) {\n\t\t\t\t\toptions.observation.update();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n};\nobserveReader.propertyReaders.forEach(function(reader){\n\tobserveReader.propertyReadersMap[reader.name] = reader;\n});\nobserveReader.valueReaders.forEach(function(reader){\n\tobserveReader.valueReadersMap[reader.name] = reader;\n});\nobserveReader.set = observeReader.write;\n\nvar canStacheKey_1_4_3_canStacheKey = observeReader;\n\nvar TemplateContext = function(options) {\n\toptions = options || {};\n\tthis.vars = new canSimpleMap_4_3_3_canSimpleMap(options.vars || {});\n\tthis.helpers = new canSimpleMap_4_3_3_canSimpleMap(options.helpers || {});\n\tthis.partials = new canSimpleMap_4_3_3_canSimpleMap(options.partials || {});\n\tthis.tags = new canSimpleMap_4_3_3_canSimpleMap(options.tags || {});\n};\n\nvar canViewScope_4_13_7_templateContext = TemplateContext;\n\nvar canCid_1_3_1_canCid = createCommonjsModule(function (module) {\n\n/**\n * @module {function} can-cid\n * @parent can-typed-data\n * @collection can-infrastructure\n * @package ./package.json\n * @description Utility for getting a unique identifier for an object.\n * @signature `cid(object, optionalObjectType)`\n *\n * Get a unique identifier for the object, optionally prefixed by a type name.\n *\n * Once set, the unique identifier does not change, even if the type name\n * changes on subsequent calls.\n *\n * ```js\n * var cid = require(\"can-cid\");\n * var x = {};\n * var y = {};\n *\n * console.log(cid(x, \"demo\")); // -> \"demo1\"\n * console.log(cid(x, \"prod\")); // -> \"demo1\"\n * console.log(cid(y));         // -> \"2\"\n * ```\n *\n * @param {Object} object The object to uniquely identify.\n * @param {String} name   An optional type name with which to prefix the identifier\n *\n * @return {String} Returns the unique identifier\n */\nvar _cid = 0;\n// DOM nodes shouldn't all use the same property\nvar domExpando = \"can\" + new Date();\nvar cid = function (object, name) {\n\tvar propertyName = object.nodeName ? domExpando : \"_cid\";\n\n\tif (!object[propertyName]) {\n\t\t_cid++;\n\t\tobject[propertyName] = (name || '') + _cid;\n\t}\n\treturn object[propertyName];\n};\ncid.domExpando = domExpando;\ncid.get = function(object){\n\tvar type = typeof object;\n\tvar isObject = type !== null && (type === \"object\" || type === \"function\");\n\treturn isObject ? cid(object) : (type + \":\" + object);\n};\n\nif (canNamespace_1_0_0_canNamespace.cid) {\n\tthrow new Error(\"You can't have two versions of can-cid, check your dependencies\");\n} else {\n\tmodule.exports = canNamespace_1_0_0_canNamespace.cid = cid;\n}\n});\n\nvar singleReference;\n\nfunction getKeyName(key, extraKey) {\n\tvar keyName = extraKey ? canCid_1_3_1_canCid(key) + \":\" + extraKey : canCid_1_3_1_canCid(key);\n\treturn keyName || key;\n}\n\n// weak maps are slow\n/* if(typeof WeakMap !== \"undefined\") {\n\tvar globalMap = new WeakMap();\n\tsingleReference = {\n\t\tset: function(obj, key, value){\n\t\t\tvar localMap = globalMap.get(obj);\n\t\t\tif( !localMap ) {\n\t\t\t\tglobalMap.set(obj, localMap = new WeakMap());\n\t\t\t}\n\t\t\tlocalMap.set(key, value);\n\t\t},\n\t\tgetAndDelete: function(obj, key){\n\t\t\treturn globalMap.get(obj).get(key);\n\t\t},\n\t\treferences: globalMap\n\t};\n} else {*/\nsingleReference = {\n\t// obj is a function ... we need to place `value` on it so we can retreive it\n\t// we can't use a global map\n\tset: function(obj, key, value, extraKey){\n\t\t// check if it has a single reference map\n\t\tobj[getKeyName(key, extraKey)] = value;\n\t},\n\n\tgetAndDelete: function(obj, key, extraKey){\n\t\tvar keyName = getKeyName(key, extraKey);\n\t\tvar value = obj[keyName];\n\t\tdelete obj[keyName];\n\t\treturn value;\n\t}\n};\n/*}*/\n\nvar canSingleReference_1_3_0_canSingleReference = singleReference;\n\nvar Compute = function(newVal){\n\tif(arguments.length) {\n\t\treturn canReflect_1_19_2_canReflect.setValue(this, newVal);\n\t} else {\n\t\treturn canReflect_1_19_2_canReflect.getValue(this);\n\t}\n};\n\nvar canViewScope_4_13_7_makeComputeLike = function(observable) {\n    var compute = Compute.bind(observable);\n\n\t//!steal-remove-start\n\tif (process.env.NODE_ENV !== 'production') {\n\t\tObject.defineProperty(compute, \"name\", {\n\t\t\tvalue: \"Compute<\"+canReflect_1_19_2_canReflect.getName(observable) + \">\",\n\t\t});\n\t}\n\t//!steal-remove-end\n\n    compute.on = compute.bind = compute.addEventListener = function(event, handler) {\n        var translationHandler = function(newVal, oldVal) {\n            handler.call(compute, {type:'change'}, newVal, oldVal);\n        };\n        canSingleReference_1_3_0_canSingleReference.set(handler, this, translationHandler);\n        observable.on(translationHandler);\n    };\n    compute.off = compute.unbind = compute.removeEventListener = function(event, handler) {\n        observable.off( canSingleReference_1_3_0_canSingleReference.getAndDelete(handler, this) );\n    };\n\n    canReflect_1_19_2_canReflect.assignSymbols(compute, {\n        \"can.getValue\": function(){\n            return canReflect_1_19_2_canReflect.getValue(observable);\n        },\n        \"can.setValue\": function(newVal){\n            return canReflect_1_19_2_canReflect.setValue(observable, newVal);\n        },\n        \"can.onValue\": function(handler, queue){\n            return canReflect_1_19_2_canReflect.onValue(observable, handler, queue);\n        },\n        \"can.offValue\": function(handler, queue){\n            return canReflect_1_19_2_canReflect.offValue(observable, handler, queue);\n        },\n        \"can.valueHasDependencies\": function(){\n            return canReflect_1_19_2_canReflect.valueHasDependencies(observable);\n        },\n        \"can.getPriority\": function(){\n    \t\treturn canReflect_1_19_2_canReflect.getPriority( observable );\n    \t},\n    \t\"can.setPriority\": function(newPriority){\n    \t\tcanReflect_1_19_2_canReflect.setPriority( observable, newPriority );\n    \t},\n\t\t\"can.isValueLike\": true,\n\t\t\"can.isFunctionLike\": false\n    });\n    compute.isComputed = true;\n    return compute;\n};\n\nvar canStacheHelpers_1_2_0_canStacheHelpers = createCommonjsModule(function (module) {\n\n\nif (canNamespace_1_0_0_canNamespace.stacheHelpers) {\n\tthrow new Error(\"You can't have two versions of can-stache-helpers, check your dependencies\");\n} else {\n\tmodule.exports = canNamespace_1_0_0_canNamespace.stacheHelpers = {};\n}\n});\n\nvar dispatchSymbol$2 = canSymbol_1_7_0_canSymbol.for(\"can.dispatch\");\nvar setElementSymbol$1 = canSymbol_1_7_0_canSymbol.for(\"can.setElement\");\n\n// The goal of this is to create a high-performance compute that represents a key value from can.view.Scope.\n// If the key value is something like {{name}} and the context is a can.Map, a faster\n// binding path will be used where new rebindings don't need to be looked for with every change of\n// the observable property.\n// However, if the property changes to a compute, then the slower `can.compute.read` method of\n// observing values will be used.\n\n// ideally, we would know the order things were read.  If the last thing read\n// was something we can observe, and the value of it matched the value of the observation,\n// and the key matched the key of the observation\n// it's a fair bet that we can just listen to that last object.\n// If the `this` is not that object ... freak out.  Though `this` is not necessarily part of it.  can-observation could make\n// this work.\n\n\nvar getFastPathRoot = canObservationRecorder_1_3_1_canObservationRecorder.ignore(function(computeData){\n\tif( computeData.reads &&\n\t\t\t\t// a single property read\n\t\t\t\tcomputeData.reads.length === 1 ) {\n\t\tvar root = computeData.root;\n\t\tif( root && root[canSymbol_1_7_0_canSymbol.for(\"can.getValue\")] ) {\n\t\t\troot = canReflect_1_19_2_canReflect.getValue(root);\n\t\t}\n\t\t// on a map\n\t\treturn root && canReflect_1_19_2_canReflect.isObservableLike(root) && canReflect_1_19_2_canReflect.isMapLike(root) &&\n\t\t\t// that isn't calling a function\n\t\t\ttypeof root[computeData.reads[0].key] !== \"function\" && root;\n\t}\n\treturn;\n});\n\nvar isEventObject = function(obj){\n\treturn obj && typeof obj.batchNum === \"number\" && typeof obj.type === \"string\";\n};\n\nfunction getMutated(scopeKeyData){\n\t// The _thisArg is the value before the last `.`. For example if the key was `foo.bar.zed`,\n\t// _thisArg would be the value at foo.bar.\n\t// This should be improved as `foo.bar` might not be observable.\n\tvar value$$1 = canObservationRecorder_1_3_1_canObservationRecorder.peekValue(scopeKeyData._thisArg);\n\n\t// Something like `string@split` would provide a primitive which can't be a mutated subject\n\treturn !canReflect_1_19_2_canReflect.isPrimitive(value$$1) ? value$$1 : scopeKeyData.root;\n}\n\nfunction callMutateWithRightArgs(method, mutated, reads, mutator){\n\tif(reads.length) {\n\t\tmethod.call(canReflectDependencies_1_1_2_canReflectDependencies,mutated, reads[ reads.length - 1 ].key ,mutator);\n\t} else {\n\t\tmethod.call(canReflectDependencies_1_1_2_canReflectDependencies,mutated ,mutator);\n\t}\n}\n\n\n\n\nvar warnOnUndefinedProperty;\n//!steal-remove-start\nif (process.env.NODE_ENV !== 'production') {\n\twarnOnUndefinedProperty = function(options) {\n\t\tif ( options.key !== \"debugger\" && !options.parentHasKey) {\n\t\t\tvar filename = options.scope.peek('scope.filename');\n\t\t\tvar lineNumber = options.scope.peek('scope.lineNumber');\n\n\t\t\tvar reads = canStacheKey_1_4_3_canStacheKey.reads(options.key);\n\t\t\tvar firstKey = reads[0].key;\n\t\t\tvar key = reads.map(function(read) {\n\t\t\t\treturn read.key + (read.at ? \"()\" : \"\");\n\t\t\t}).join(\".\");\n\t\t\tvar pathsForKey = options.scope.getPathsForKey(firstKey);\n\t\t\tvar paths = Object.keys( pathsForKey );\n\t\t\tvar firstKeyValue = options.scope.get(firstKey);\n\n\t\t\tvar includeSuggestions = paths.length && (paths.indexOf(firstKey) < 0);\n\n\t\t\tvar warning = [\n\t\t\t\t(filename ? filename + ':' : '') +\n\t\t\t\t\t(lineNumber ? lineNumber + ': ' : '') +\n\t\t\t\t\t'Unable to find key \"' + key + '\".'\n\t\t\t];\n\n\t\t\tif (includeSuggestions) {\n\t\t\t\twarning[0] = warning[0] + ' Did you mean' + (paths.length > 1 ? ' one of these' : '') + '?\\n';\n\t\t\t\tpaths.forEach(function(path) {\n\t\t\t\t\twarning.push('\\t\"' + path + '\" which will read from');\n\t\t\t\t\twarning.push(pathsForKey[path]);\n\t\t\t\t\twarning.push(\"\\n\");\n\t\t\t\t});\n\t\t\t} else if (firstKeyValue) {\n\t\t\t\twarning[0] = warning[0] + ' Found \"' + firstKey + '\" with value: %o\\n';\n\t\t\t}\n\n\t\t\tif (firstKeyValue) {\n\t\t\t\tdev.warn.apply(dev, [warning.join(\"\\n\"), firstKeyValue]);\n\t\t\t} else {\n\t\t\t\tdev.warn.apply(dev,\n\t\t\t\t\twarning\n\t\t\t\t);\n\t\t\t}\n\n\t\t}\n\t};\n}\n//!steal-remove-end\n\n// could we make this an observation first ... and have a getter for the compute?\n\n// This is a fast-path enabled Observation wrapper use many places in can-stache.\n// The goal of this is to:\n//\n// 1.  Make something that can be passed to can-view-live directly, hopefully\n//     avoiding creating expensive computes.  Instead we will only be creating\n//     `ScopeKeyData` which are thin wrappers.\nvar ScopeKeyData = function(scope, key, options){\n\n\tthis.startingScope = scope;\n\tthis.key = key;\n\tthis.read = this.read.bind(this);\n\tthis.dispatch = this.dispatch.bind(this);\n\n\t// special case debugger helper so that it is called with helperOtions\n\t// when you do {{debugger}} as it already is with {{debugger()}}\n\tif (key === \"debugger\") {\n\t\t// prevent \"Unable to find key\" warning\n\t\tthis.startingScope = { _context: canStacheHelpers_1_2_0_canStacheHelpers };\n\n\t\tthis.read = function() {\n\t\t\tvar helperOptions = { scope: scope };\n\t\t\tvar debuggerHelper = canStacheHelpers_1_2_0_canStacheHelpers[\"debugger\"];\n\t\t\treturn debuggerHelper(helperOptions);\n\t\t};\n\t}\n\n\t//!steal-remove-start\n\tif (process.env.NODE_ENV !== 'production') {\n\t\tObject.defineProperty(this.read, \"name\", {\n\t\t\tvalue: canReflect_1_19_2_canReflect.getName(this) + \".read\",\n\t\t});\n\t\tObject.defineProperty(this.dispatch, \"name\", {\n\t\t\tvalue: canReflect_1_19_2_canReflect.getName(this) + \".dispatch\",\n\t\t});\n\t}\n\t//!steal-remove-end\n\n\tvar observation = this.observation = new canObservation_4_2_0_canObservation(this.read, this);\n\tthis.options = canAssign_1_3_3_canAssign({ observation: this.observation }, options);\n\n\t// things added later\n\tthis.fastPath = undefined;\n\tthis.root = undefined;\n\tthis.reads = undefined;\n\tthis.setRoot = undefined;\n\t// This is read by call expressions so it needs to be observable\n\tthis._thisArg = new canSimpleObservable_2_5_0_canSimpleObservable();\n\tthis.parentHasKey = undefined;\n\tvar valueDependencies = new Set();\n\tvalueDependencies.add(observation);\n\tthis.dependencies = {valueDependencies: valueDependencies};\n\n\t// This is basically what .get() should give, but it\n\t// isn't used to figure out the last value.\n\tthis._latestValue = undefined;\n};\n\nvalue(ScopeKeyData.prototype);\n\nfunction fastOnBoundSet_Value() {\n\tthis._value = this.newVal;\n}\n\nfunction fastOnBoundSetValue() {\n\tthis.value = this.newVal;\n}\n\ncanAssign_1_3_3_canAssign(ScopeKeyData.prototype, {\n\tconstructor: ScopeKeyData,\n\tdispatch: function dispatch(newVal){\n\t\tvar old = this.value;\n\t\tthis._latestValue = this.value = newVal;\n\t\t// call the base implementation in can-event-queue\n\t\tthis[dispatchSymbol$2].call(this, this.value, old);\n\t},\n\tonBound: function onBound(){\n\t\tthis.bound = true;\n\t\tcanReflect_1_19_2_canReflect.onValue(this.observation, this.dispatch, \"notify\");\n\t\t// TODO: we should check this sometime in the background.\n\t\tvar fastPathRoot = getFastPathRoot(this);\n\t\tif( fastPathRoot ) {\n\t\t\t// rewrite the observation to call its event handlers\n\t\t\tthis.toFastPath(fastPathRoot);\n\t\t}\n\t\tthis._latestValue = this.value = canObservationRecorder_1_3_1_canObservationRecorder.peekValue(this.observation);\n\t},\n\tonUnbound: function onUnbound() {\n\t\tthis.bound = false;\n\t\tcanReflect_1_19_2_canReflect.offValue(this.observation, this.dispatch, \"notify\");\n\t\tthis.toSlowPath();\n\t},\n\tset: function(newVal){\n\t\tvar root = this.root || this.setRoot;\n\t\tif(root) {\n\t\t\tif(this.reads.length) {\n\t\t\t\tcanStacheKey_1_4_3_canStacheKey.write(root, this.reads, newVal, this.options);\n\t\t\t} else {\n\t\t\t\tcanReflect_1_19_2_canReflect.setValue(root,newVal);\n\t\t\t}\n\t\t} else {\n\t\t\tthis.startingScope.set(this.key, newVal, this.options);\n\t\t}\n\t},\n\tget: function() {\n\t\tif (canObservationRecorder_1_3_1_canObservationRecorder.isRecording()) {\n\t\t\tcanObservationRecorder_1_3_1_canObservationRecorder.add(this);\n\t\t\tif (!this.bound) {\n\t\t\t\tcanObservation_4_2_0_canObservation.temporarilyBind(this);\n\t\t\t}\n\t\t}\n\n\t\tif (this.bound === true && this.fastPath === true) {\n\t\t\treturn this._latestValue;\n\t\t} else {\n\t\t\treturn canObservationRecorder_1_3_1_canObservationRecorder.peekValue(this.observation);\n\t\t}\n\t},\n\ttoFastPath: function(fastPathRoot){\n\t\tvar self = this,\n\t\t\tobservation = this.observation;\n\n\t\tthis.fastPath = true;\n\n\t\t// there won't be an event in the future ...\n\t\tobservation.dependencyChange = function(target, newVal){\n\t\t\tif(isEventObject(newVal)) {\n\t\t\t\tthrow \"no event objects!\";\n\t\t\t}\n\t\t\t// but I think we will be able to get at it b/c there should only be one\n\t\t\t// dependency we are binding to ...\n\t\t\tif(target === fastPathRoot && typeof newVal !== \"function\") {\n\t\t\t\tself._latestValue = newVal;\n\t\t\t\tthis.newVal = newVal;\n\t\t\t} else {\n\t\t\t\t// restore\n\t\t\t\tself.toSlowPath();\n\t\t\t}\n\n\t\t\treturn canObservation_4_2_0_canObservation.prototype.dependencyChange.apply(this, arguments);\n\t\t};\n\n\t\tif (observation.hasOwnProperty(\"_value\")) {// can-observation 4.1+\n\t\t\tobservation.onBound = fastOnBoundSet_Value;\n\t\t} else {// can-observation < 4.1\n\t\t\tobservation.onBound = fastOnBoundSetValue;\n\t\t}\n\t},\n\ttoSlowPath: function(){\n\t\tthis.observation.dependencyChange = canObservation_4_2_0_canObservation.prototype.dependencyChange;\n\t\tthis.observation.onBound = canObservation_4_2_0_canObservation.prototype.onBound;\n\t\tthis.fastPath = false;\n\t},\n\tread: function(){\n\t\tvar data;\n\n\t\tif (this.root) {\n\t\t\t// if we've figured out a root observable, start reading from there\n\t\t\tdata = canStacheKey_1_4_3_canStacheKey.read(this.root, this.reads, this.options);\n\n\t\t\t//!steal-remove-start\n\t\t\tif (process.env.NODE_ENV !== 'production') {\n\t\t\t\t// remove old dependency\n\t\t\t\tif(this.reads.length) {\n\t\t\t\t\tcallMutateWithRightArgs(canReflectDependencies_1_1_2_canReflectDependencies.deleteMutatedBy, getMutated(this), this.reads,this);\n\t\t\t\t}\n\n\t\t\t}\n\t\t\t//!steal-remove-end\n\n\t\t\t// update thisArg and add new dependency\n\t\t\tthis.thisArg = data.parent;\n\n\t\t\t//!steal-remove-start\n\t\t\tif (process.env.NODE_ENV !== 'production') {\n\t\t\t\tvar valueDeps = new Set();\n\t\t\t\tvalueDeps.add(this);\n\t\t\t\tcallMutateWithRightArgs(canReflectDependencies_1_1_2_canReflectDependencies.addMutatedBy, data.parent || this.root, this.reads,{\n\t\t\t\t\tvalueDependencies: valueDeps\n\t\t\t\t});\n\t\t\t}\n\t\t\t//!steal-remove-end\n\n\t\t\treturn data.value;\n\t\t}\n\t\t// If the key has not already been located in a observable then we need to search the scope for the\n\t\t// key.  Once we find the key then we need to return it's value and if it is found in an observable\n\t\t// then we need to store the observable so the next time this compute is called it can grab the value\n\t\t// directly from the observable.\n\t\tdata = this.startingScope.read(this.key, this.options);\n\n\n\t\tthis.scope = data.scope;\n\t\tthis.reads = data.reads;\n\t\tthis.root = data.rootObserve;\n\t\tthis.setRoot = data.setRoot;\n\t\tthis.thisArg = data.thisArg;\n\t\tthis.parentHasKey = data.parentHasKey;\n\n\t\t//!steal-remove-start\n\t\tif (process.env.NODE_ENV !== 'production') {\n\t\t\tif (data.rootObserve) {\n\t\t\t\tvar rootValueDeps = new Set();\n\t\t\t\trootValueDeps.add(this);\n\t\t\t\tcallMutateWithRightArgs(canReflectDependencies_1_1_2_canReflectDependencies.addMutatedBy, getMutated(this), data.reads,{\n\t\t\t\t\tvalueDependencies: rootValueDeps\n\t\t\t\t});\n\t\t\t}\n\t\t\tif(data.value === undefined && this.options.warnOnMissingKey === true) {\n\t\t\t\twarnOnUndefinedProperty({\n\t\t\t\t\tscope: this.startingScope,\n\t\t\t\t\tkey: this.key,\n\t\t\t\t\tparentHasKey: data.parentHasKey\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\t//!steal-remove-end\n\n\t\treturn data.value;\n\t},\n\thasDependencies: function(){\n\t\t// ScopeKeyData is unique in that when these things are read, it will temporarily bind\n\t\t// to make sure the right value is returned. This is for can-stache.\n\t\t// Helpers warns about a missing helper.\n\t\tif (!this.bound) {\n\t\t\tcanObservation_4_2_0_canObservation.temporarilyBind(this);\n\t\t}\n\t\treturn canReflect_1_19_2_canReflect.valueHasDependencies( this.observation );\n\t}\n});\n\nObject.defineProperty(ScopeKeyData.prototype, \"thisArg\", {\n\tget: function(){\n\t\treturn this._thisArg.get();\n\t},\n\tset: function(newVal) {\n\t\tthis._thisArg.set(newVal);\n\t}\n});\n\nvar scopeKeyDataPrototype = {\n\t\"can.getValue\": ScopeKeyData.prototype.get,\n\t\"can.setValue\": ScopeKeyData.prototype.set,\n\t\"can.valueHasDependencies\": ScopeKeyData.prototype.hasDependencies,\n\t\"can.getValueDependencies\": function() {\n\t\treturn this.dependencies;\n\t},\n\t\"can.getPriority\": function(){\n\t\treturn canReflect_1_19_2_canReflect.getPriority( this.observation );\n\t},\n\t\"can.setPriority\": function(newPriority){\n\t\tcanReflect_1_19_2_canReflect.setPriority( this.observation, newPriority );\n\t},\n\t\"can.setElement\": function(element) {\n\t\tthis.observation[setElementSymbol$1](element);\n\t}\n};\n\n//!steal-remove-start\nif (process.env.NODE_ENV !== 'production') {\n\tscopeKeyDataPrototype[\"can.getName\"] = function() {\n\t\treturn canReflect_1_19_2_canReflect.getName(this.constructor) + \"{{\" + this.key + \"}}\";\n\t};\n}\n//!steal-remove-end\ncanReflect_1_19_2_canReflect.assignSymbols(ScopeKeyData.prototype, scopeKeyDataPrototype);\n\n// Creates a compute-like for legacy reasons ...\nObject.defineProperty(ScopeKeyData.prototype, \"compute\", {\n\tget: function(){\n\t\tvar compute = canViewScope_4_13_7_makeComputeLike(this);\n\n\t\tObject.defineProperty(this, \"compute\", {\n\t\t\tvalue: compute,\n\t\t\twritable: false,\n\t\t\tconfigurable: false\n\t\t});\n\t\treturn compute;\n\t},\n\tconfigurable: true\n});\n\nObject.defineProperty(ScopeKeyData.prototype, \"initialValue\", {\n\tget: function(){\n\t\tif (!this.bound) {\n\t\t\tcanObservation_4_2_0_canObservation.temporarilyBind(this);\n\t\t}\n\t\treturn canObservationRecorder_1_3_1_canObservationRecorder.peekValue(this);\n\t},\n\tset: function(){\n\t\tthrow new Error(\"initialValue should not be set\");\n\t},\n\tconfigurable: true\n});\n\nvar canViewScope_4_13_7_scopeKeyData = ScopeKeyData;\n\nvar canViewScope_4_13_7_compute_data = function(scope, key, options){\n\treturn new canViewScope_4_13_7_scopeKeyData(scope, key, options || {\n\t\targs: []\n\t});\n};\n\n// ### LetContext\n// Instances of this are used to create a `let` variable context.\n\n// Like Object.create, but only keeps Symbols and properties in `propertiesToKeep`\nfunction objectCreateWithSymbolsAndSpecificProperties(obj, propertiesToKeep) {\n\tvar newObj = {};\n\n\t// copy over all Symbols from obj\n\tif (\"getOwnPropertySymbols\" in Object) {\n\t\tObject.getOwnPropertySymbols(obj).forEach(function(key) {\n\t\t\tnewObj[key] = obj[key];\n\t\t});\n\t}\n\n\t// copy over specific properties from obj (also fake Symbols properties for IE support);\n\tObject.getOwnPropertyNames(obj).forEach(function(key) {\n\t\tif (propertiesToKeep.indexOf(key) >= 0 || key.indexOf(\"@@symbol\") === 0) {\n\t\t\tnewObj[key] = obj[key];\n\t\t}\n\t});\n\n\treturn Object.create(newObj);\n}\n\nvar LetContext = canSimpleMap_4_3_3_canSimpleMap.extend(\"LetContext\", {});\nLetContext.prototype = objectCreateWithSymbolsAndSpecificProperties(canSimpleMap_4_3_3_canSimpleMap.prototype, [\n\t// SimpleMap properties\n\t\"setup\",\n\t\"attr\",\n\t\"serialize\",\n\t\"get\",\n\t\"set\",\n\t\"log\",\n\t// required by SimpleMap properties\n\t\"dispatch\",\n\t// Construct properties (not added by can-event-queue)\n\t\"constructorExtends\",\n\t\"newInstance\",\n\t\"_inherit\",\n\t\"_defineProperty\",\n\t\"_overwrite\",\n\t\"instance\",\n\t\"extend\",\n\t\"ReturnValue\",\n\t\"setup\",\n\t\"init\"\n]);\nLetContext.prototype.constructor = LetContext;\n\nvar canViewScope_4_13_7_letContext = LetContext;\n\n// # can-view-scope.js\n//\n// This provides the ability to lookup values across a higherarchy of objects.  This is similar to\n// how closures work in JavaScript.\n//\n// This is done with the `Scope` type. It works by having a `_context` reference to\n// an object whose properties can be searched for values.  It also has a `_parent` reference\n// to the next Scope in which to check.  In this way, `Scope` is used to form a tree-like\n// structure.  Leaves and Nodes in the tree only point to their parent.\n\n\n\n\n\n\n\n\n\n\n\n\n\n// ## Helpers\n\nfunction canHaveProperties(obj){\n\treturn obj != null;\n}\nfunction returnFalse(){\n\treturn false;\n}\n\n// ## Scope\n// Represents a node in the scope tree.\nfunction Scope(context, parent, meta) {\n\t// The object that will be looked on for values.\n\t// If the type of context is TemplateContext, there will be special rules for it.\n\tthis._context = context;\n\t// The next Scope object whose context should be looked on for values.\n\tthis._parent = parent;\n\t// If this is a special context, it can be labeled here.\n\t// Options are:\n\t// - `viewModel` - This is a viewModel. This is mostly used by can-component to make `scope.vm` work.\n\t// - `notContext` - This can't be looked within using `./` and `../`. It will be skipped.\n\t//   This is for virtual contexts like those used by `%index`. This is very much like\n\t//   `variable`.  Most things should switch to `variable` in the future.\n\t// - `special` - This can't be looked within using `./` and `../`. It will be skipped.\n\t//   This is for reading properties on the scope {{scope.index}}. It's different from variable\n\t//   because it's never lookup up like {{key}}.\n\t// - `variable` - This is used to define a variable (as opposed to \"normal\" context). These\n\t//   will also be skipped when using `./` and `../`.\n\tthis._meta = meta || {};\n\n\t// A cache that can be used to store computes used to look up within this scope.\n\t// For example if someone creates a compute to lookup `name`, another compute does not\n\t// need to be created.\n\tthis.__cache = {};\n}\n\nvar parentContextSearch = /(\\.\\.\\/)|(\\.\\/)|(this[\\.@])/g;\n\n// ## Static Methods\n// The following methods are exposed mostly for testing purposes.\ncanAssign_1_3_3_canAssign(Scope, {\n\t// ### Scope.read\n\t// Scope.read was moved to can-stache-key.read\n\t// can-stache-key.read reads properties from a parent. A much more complex version of getObject.\n\tread: canStacheKey_1_4_3_canStacheKey.read,\n\tTemplateContext: canViewScope_4_13_7_templateContext,\n\t// ### keyInfo(key)\n\t// Returns an object that details what the `key` means with the following:\n\t// ```js\n\t// {\n\t//   remainingKey, // what would be read on a context (or this)\n\t//   isScope, // if the scope itself is being read\n\t//   inScope, // if a key on the scope is being read\n\t//   parentContextWalkCount, // how many ../\n\t//   isContextBased // if a \"normal\" context is explicitly being read\n\t// }\n\t// ```\n\tkeyInfo: function(attr){\n\n\t\tif (attr === \"./\") {\n\t\t\tattr = \"this\";\n\t\t}\n\n\t\tvar info = {remainingKey: attr};\n\n\t\t// handle scope stuff first\n\t\tinfo.isScope = attr === \"scope\";\n\t\tif(info.isScope) {\n\t\t\treturn info;\n\t\t}\n\t\tvar firstSix = attr.substr(0, 6);\n\t\tinfo.isInScope =\n\t\t\tfirstSix === \"scope.\" ||\n\t\t\tfirstSix === \"scope@\";\n\t\tif(info.isInScope) {\n\t\t\tinfo.remainingKey = attr.substr(6);\n\t\t\treturn info;\n\t\t} else if(firstSix === \"scope/\") {\n\t\t\tinfo.walkScope = true;\n\t\t\tinfo.remainingKey = attr.substr(6);\n\t\t\treturn info;\n\t\t} else if(attr.substr(0, 7) === \"@scope/\") {\n\t\t\tinfo.walkScope = true;\n\t\t\tinfo.remainingKey = attr.substr(7);\n\t\t\treturn info;\n\t\t}\n\n\t\tinfo.parentContextWalkCount = 0;\n\t\t// Searches for `../` and other context specifiers\n\t\tinfo.remainingKey = attr.replace(parentContextSearch, function(token, parentContext, dotSlash, thisContext, index){\n\t\t\tinfo.isContextBased = true;\n\t\t\tif(parentContext !== undefined) {\n\t\t\t\tinfo.parentContextWalkCount++;\n\t\t\t}\n\t\t\treturn \"\";\n\t\t});\n\t\t// ../..\n\t\tif(info.remainingKey === \"..\") {\n\t\t\tinfo.parentContextWalkCount++;\n\t\t\tinfo.remainingKey = \"this\";\n\t\t}\n\t\telse if(info.remainingKey === \".\" || info.remainingKey === \"\") {\n\t\t\tinfo.remainingKey = \"this\";\n\t\t}\n\n\t\tif(info.remainingKey === \"this\") {\n\t\t\tinfo.isContextBased = true;\n\t\t}\n\t\treturn info;\n\t},\n\t// ### isTemplateContextOrCanNotHaveProperties\n\t// Returns `true` if a template context or a `null` or `undefined`\n\t// context.\n\tisTemplateContextOrCanNotHaveProperties: function(currentScope){\n\t\tvar currentContext = currentScope._context;\n\t\tif(currentContext instanceof canViewScope_4_13_7_templateContext) {\n\t\t\treturn true;\n\t\t} else if( !canHaveProperties(currentContext) ) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t},\n\t// ### shouldSkipIfSpecial\n\t// Return `true` if special.\n\tshouldSkipIfSpecial: function(currentScope){\n\t\tvar isSpecialContext = currentScope._meta.special === true;\n\t\tif (isSpecialContext === true) {\n\t\t\treturn true;\n\t\t}\n\t\tif( Scope.isTemplateContextOrCanNotHaveProperties(currentScope) ) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t},\n\t// ### shouldSkipEverythingButSpecial\n\t// Return `true` if not special.\n\tshouldSkipEverythingButSpecial: function(currentScope){\n\t\tvar isSpecialContext = currentScope._meta.special === true;\n\t\tif (isSpecialContext === false) {\n\t\t\treturn true;\n\t\t}\n\t\tif( Scope.isTemplateContextOrCanNotHaveProperties(currentScope) ) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t},\n\t// ### makeShouldExitOnSecondNormalContext\n\t// This will keep checking until we hit a second \"normal\" context.\n\tmakeShouldExitOnSecondNormalContext: function(){\n\t\tvar foundNormalContext = false;\n\t\treturn function shouldExitOnSecondNormalContext(currentScope){\n\t\t\tvar isNormalContext = !currentScope.isSpecial();\n\t\t\tvar shouldExit = isNormalContext && foundNormalContext;\n\t\t\t// leaks some state\n\t\t\tif(isNormalContext) {\n\t\t\t\tfoundNormalContext = true;\n\t\t\t}\n\t\t\treturn shouldExit;\n\t\t};\n\t},\n\t// ### makeShouldExitAfterFirstNormalContext\n\t// This will not check anything after the first normal context.\n\tmakeShouldExitAfterFirstNormalContext: function(){\n\t\tvar foundNormalContext = false;\n\t\treturn function shouldExitAfterFirstNormalContext(currentScope){\n\t\t\tif(foundNormalContext) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tvar isNormalContext = !currentScope.isSpecial();\n\t\t\t// leaks some state\n\t\t\tif(isNormalContext) {\n\t\t\t\tfoundNormalContext = true;\n\t\t\t}\n\t\t\treturn false;\n\t\t};\n\t},\n\t// ### makeShouldSkipSpecialContexts\n\t// Skips `parentContextWalkCount` contexts. This is used to\n\t// walk past scopes when `../` is used.\n\tmakeShouldSkipSpecialContexts: function(parentContextWalkCount){\n\t\tvar walkCount = parentContextWalkCount || 0;\n\t\treturn function shouldSkipSpecialContexts(currentScope){\n\t\t\t// after walking past the correct number of contexts,\n\t\t\t// should not skip notContext scopes\n\t\t\t// so that ../foo can be used to read from a notContext scope\n\t\t\tif (walkCount < 0 && currentScope._meta.notContext) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif(currentScope.isSpecial()) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\twalkCount--;\n\n\t\t\tif(walkCount < 0) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn true;\n\t\t};\n\t}\n});\n\n// ## Prototype methods\ncanAssign_1_3_3_canAssign(Scope.prototype, {\n\n\t// ### scope.add\n\t// Creates a new scope and sets the current scope to be the parent.\n\t// ```\n\t// var scope = new can.view.Scope([\n\t//   {name:\"Chris\"},\n\t//   {name: \"Justin\"}\n\t// ]).add({name: \"Brian\"});\n\t// scope.attr(\"name\") //-> \"Brian\"\n\t// ```\n\tadd: function(context, meta) {\n\t\tif (context !== this._context) {\n\t\t\treturn new this.constructor(context, this, meta);\n\t\t} else {\n\t\t\treturn this;\n\t\t}\n\t},\n\n\t// ### scope.find\n\t// This is the equivalent of Can 3's scope walking.\n\tfind: function(attr, options) {\n\n\t\tvar keyReads = canStacheKey_1_4_3_canStacheKey.reads(attr);\n\t\tvar howToRead = {\n\t\t\tshouldExit: returnFalse,\n\t\t\tshouldSkip: Scope.shouldSkipIfSpecial,\n\t\t\tshouldLookForHelper: true,\n\t\t\tread: canStacheKey_1_4_3_canStacheKey.read\n\t\t};\n\t\tvar result = this._walk(keyReads, options, howToRead);\n\n\t\treturn result.value;\n\n\t},\n\t// ### scope.readFromSpecialContext\n\treadFromSpecialContext: function(key) {\n\t\treturn this._walk(\n\t\t\t[{key: key, at: false }],\n\t\t\t{ special: true },\n\t\t\t{\n\t\t\t\tshouldExit: returnFalse,\n\t\t\t\tshouldSkip: Scope.shouldSkipEverythingButSpecial,\n\t\t\t\tshouldLookForHelper: false,\n\t\t\t\tread: canStacheKey_1_4_3_canStacheKey.read\n\t\t\t}\n\t\t);\n\t},\n\n\t// ### scope.readFromTemplateContext\n\treadFromTemplateContext: function(key, readOptions) {\n\t\tvar keyReads = canStacheKey_1_4_3_canStacheKey.reads(key);\n\t\treturn canStacheKey_1_4_3_canStacheKey.read(this.templateContext, keyReads, readOptions);\n\t},\n\n\t// ### Scope.prototype.read\n\t// Reads from the scope chain and returns the first non-`undefined` value.\n\t// `read` deals mostly with setting up \"context based\" keys to start reading\n\t// from the right scope. Once the right scope is located, `_walk` is called.\n\t/**\n\t * @hide\n\t * @param {can.stache.key} attr A dot-separated path. Use `\"\\.\"` if you have a property name that includes a dot.\n\t * @param {can.view.Scope.readOptions} options that configure how this gets read.\n\t * @return {{}}\n\t *   @option {Object} parent the value's immediate parent\n\t *   @option {can.Map|can.compute} rootObserve the first observable to read from.\n\t *   @option {Array<String>} reads An array of properties that can be used to read from the rootObserve to get the value.\n\t *   @option {*} value the found value\n\t */\n\tread: function(attr, options) {\n\t\toptions = options || {};\n\t\treturn this.readKeyInfo(Scope.keyInfo(attr), options || {});\n\t},\n\treadKeyInfo: function(keyInfo, options){\n\n\t\t// Identify context based keys. Context based keys try to\n\t\t// specify a particular context a key should be within.\n\t\tvar readValue,\n\t\t\tkeyReads,\n\t\t\thowToRead = {\n\t\t\t\tread: options.read || canStacheKey_1_4_3_canStacheKey.read\n\t\t\t};\n\n\t\t// 1.A. Handle reading the scope itself\n\t\tif (keyInfo.isScope) {\n\t\t\treturn { value: this };\n\t\t}\n\t\t// 1.B. Handle reading something on the scope\n\t\telse if (keyInfo.isInScope) {\n\t\t\tkeyReads = canStacheKey_1_4_3_canStacheKey.reads(keyInfo.remainingKey);\n\t\t\t// check for a value on Scope.prototype\n\t\t\treadValue = canStacheKey_1_4_3_canStacheKey.read(this, keyReads, options);\n\n\t\t\t// otherwise, check the templateContext\n\t\t\tif (typeof readValue.value === 'undefined' && !readValue.parentHasKey) {\n\t\t\t\treadValue = this.readFromTemplateContext(keyInfo.remainingKey, options);\n\t\t\t}\n\n\t\t\treturn canAssign_1_3_3_canAssign(readValue, {\n\t\t\t\tthisArg: keyReads.length > 0 ? readValue.parent : undefined\n\t\t\t});\n\t\t}\n\t\t// 1.C. Handle context-based reads. They should skip over special stuff.\n\t\t// this.key, ../.., .././foo\n\t\telse if (keyInfo.isContextBased) {\n\t\t\t// TODO: REMOVE\n\t\t\t// options && options.special === true && console.warn(\"SPECIAL!!!!\");\n\n\t\t\tif(keyInfo.remainingKey !== \"this\") {\n\t\t\t\tkeyReads = canStacheKey_1_4_3_canStacheKey.reads(keyInfo.remainingKey);\n\t\t\t} else {\n\t\t\t\tkeyReads = [];\n\t\t\t}\n\t\t\thowToRead.shouldExit = Scope.makeShouldExitOnSecondNormalContext();\n\t\t\thowToRead.shouldSkip = Scope.makeShouldSkipSpecialContexts(keyInfo.parentContextWalkCount);\n\t\t\thowToRead.shouldLookForHelper = true;\n\n\t\t\treturn this._walk(keyReads, options, howToRead);\n\t\t}\n\t\t// 1.D. Handle scope walking with scope/key\n\t\telse if(keyInfo.walkScope) {\n\t\t\thowToRead.shouldExit = returnFalse;\n\t\t\thowToRead.shouldSkip = Scope.shouldSkipIfSpecial;\n\t\t\thowToRead.shouldLookForHelper = true;\n\t\t\tkeyReads = canStacheKey_1_4_3_canStacheKey.reads(keyInfo.remainingKey);\n\n\t\t\treturn this._walk(keyReads, options, howToRead);\n\t\t}\n\t\t// 1.E. Handle reading without context clues\n\t\t// {{foo}}\n\t\telse {\n\t\t\tkeyReads = canStacheKey_1_4_3_canStacheKey.reads(keyInfo.remainingKey);\n\n\t\t\tvar isSpecialRead = options && options.special === true;\n\t\t\t// TODO: remove\n\t\t\t// options && options.special === true && console.warn(\"SPECIAL!!!!\");\n\n\t\t\thowToRead.shouldExit = Scope.makeShouldExitOnSecondNormalContext();\n\t\t\thowToRead.shouldSkip = isSpecialRead ? Scope.shouldSkipEverythingButSpecial : Scope.shouldSkipIfSpecial;\n\t\t\thowToRead.shouldLookForHelper = isSpecialRead ? false : true;\n\n\t\t\treturn this._walk(keyReads, options, howToRead);\n\t\t}\n\t},\n\n\n\t// ### scope._walk\n\t// This is used to walk up the scope chain.\n\t_walk: function(keyReads, options, howToRead) {\n\t\t// The current scope and context we are trying to find \"keyReads\" within.\n\t\tvar currentScope = this,\n\t\t\tcurrentContext,\n\n\t\t\t// If no value can be found, this is a list of of every observed\n\t\t\t// object and property name to observe.\n\t\t\tundefinedObserves = [],\n\n\t\t\t// Tracks the first found observe.\n\t\t\tcurrentObserve,\n\t\t\t// Tracks the reads to get the value from `currentObserve`.\n\t\t\tcurrentReads,\n\n\t\t\t// Tracks the most likely observable to use as a setter.\n\t\t\tsetObserveDepth = -1,\n\t\t\tcurrentSetReads,\n\t\t\tcurrentSetObserve,\n\n\t\t\treadOptions = canAssign_1_3_3_canAssign({\n\t\t\t\t/* Store found observable, incase we want to set it as the rootObserve. */\n\t\t\t\tfoundObservable: function(observe, nameIndex) {\n\t\t\t\t\tcurrentObserve = observe;\n\t\t\t\t\tcurrentReads = keyReads.slice(nameIndex);\n\t\t\t\t},\n\t\t\t\tearlyExit: function(parentValue, nameIndex) {\n\t\t\t\t\tvar isVariableScope = currentScope._meta.variable === true,\n\t\t\t\t\t\tupdateSetObservable = false;\n\t\t\t\t\tif(isVariableScope === true && nameIndex === 0) {\n\t\t\t\t\t\t// we MUST have pre-defined the key in a variable scope\n\t\t\t\t\t\tupdateSetObservable = canReflect_1_19_2_canReflect.hasKey( parentValue, keyReads[nameIndex].key);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tupdateSetObservable =\n\t\t\t\t\t\t\t// Has more matches\n\t\t\t\t\t\t\tnameIndex > setObserveDepth ||\n\t\t\t\t\t\t\t// The same number of matches but it has the key\n\t\t\t\t\t\t\tnameIndex === setObserveDepth && (typeof parentValue === \"object\" && canReflect_1_19_2_canReflect.hasOwnKey( parentValue, keyReads[nameIndex].key));\n\t\t\t\t\t}\n\t\t\t\t\tif ( updateSetObservable ) {\n\t\t\t\t\t\tcurrentSetObserve = currentObserve;\n\t\t\t\t\t\tcurrentSetReads = currentReads;\n\t\t\t\t\t\tsetObserveDepth = nameIndex;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, options);\n\n\n\n\t\tvar isRecording = canObservationRecorder_1_3_1_canObservationRecorder.isRecording(),\n\t\t\treadAContext = false;\n\n\t\t// Goes through each scope context provided until it finds the key (attr). Once the key is found\n\t\t// then it's value is returned along with an observe, the current scope and reads.\n\t\t// While going through each scope context searching for the key, each observable found is returned and\n\t\t// saved so that either the observable the key is found in can be returned, or in the case the key is not\n\t\t// found in an observable the closest observable can be returned.\n\t\twhile (currentScope) {\n\n\t\t\tif(howToRead.shouldSkip(currentScope) === true) {\n\t\t\t\tcurrentScope = currentScope._parent;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif(howToRead.shouldExit(currentScope) === true) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\treadAContext = true;\n\n\t\t\tcurrentContext = currentScope._context;\n\n\n\t\t\t// Prevent computes from temporarily observing the reading of observables.\n\t\t\tvar getObserves = canObservationRecorder_1_3_1_canObservationRecorder.trap();\n\n\t\t\tvar data = howToRead.read(currentContext, keyReads, readOptions);\n\n\t\t\t// Retrieve the observes that were read.\n\t\t\tvar observes = getObserves();\n\t\t\t// If a **value was was found**, return value and location data.\n\t\t\tif (data.value !== undefined || data.parentHasKey) {\n\n\t\t\t\tif(!observes.length && isRecording) {\n\t\t\t\t\t// if we didn't actually observe anything\n\t\t\t\t\t// the reads and currentObserve don't mean anything\n\t\t\t\t\t// we just point to the current object so setting is fast\n\t\t\t\t\tcurrentObserve = data.parent;\n\t\t\t\t\tcurrentReads = keyReads.slice(keyReads.length - 1);\n\t\t\t\t} else {\n\t\t\t\t\tcanObservationRecorder_1_3_1_canObservationRecorder.addMany(observes);\n\t\t\t\t}\n\n\t\t\t\treturn {\n\t\t\t\t\tscope: currentScope,\n\t\t\t\t\trootObserve: currentObserve,\n\t\t\t\t\tvalue: data.value,\n\t\t\t\t\treads: currentReads,\n\t\t\t\t\tthisArg: data.parent,\n\t\t\t\t\tparentHasKey: data.parentHasKey\n\t\t\t\t};\n\t\t\t}\n\t\t\t// Otherwise, save all observables that were read. If no value\n\t\t\t// is found, we will observe on all of them.\n\t\t\telse {\n\t\t\t\tundefinedObserves.push.apply(undefinedObserves, observes);\n\t\t\t}\n\n\t\t\tcurrentScope = currentScope._parent;\n\t\t}\n\n\t\t// The **value was not found** in the scope\n\t\t// if not looking for a \"special\" key, check in can-stache-helpers\n\t\tif (howToRead.shouldLookForHelper) {\n\t\t\tvar helper = this.getHelperOrPartial(keyReads);\n\n\t\t\tif (helper) {\n\t\t\t\t// Don't return parent so `.bind` is not used.\n\t\t\t\treturn {value: helper};\n\t\t\t}\n\t\t}\n\n\t\t// The **value was not found**, return `undefined` for the value.\n\t\t// Make sure we listen to everything we checked for when the value becomes defined.\n\t\t// Once it becomes defined, we won't have to listen to so many things.\n\t\tcanObservationRecorder_1_3_1_canObservationRecorder.addMany(undefinedObserves);\n\t\treturn {\n\t\t\tsetRoot: currentSetObserve,\n\t\t\treads: currentSetReads,\n\t\t\tvalue: undefined,\n\t\t\tnoContextAvailable: !readAContext\n\t\t};\n\t},\n\t// ### scope.getDataForScopeSet\n\t// Returns an object with data needed by `.set` to figure out what to set,\n\t// and how.\n\t// {\n\t//   parent: what is being set\n\t//   key: try setting a key value\n\t//   how: \"setValue\" | \"set\" | \"updateDeep\" | \"write\" | \"setKeyValue\"\n\t// }\n\t// This works by changing how `readKeyInfo` will read individual scopes.\n\t// Specifically, with something like `{{foo.bar}}` it will read `{{foo}}` and\n\t// only check if a `bar` property exists.\n\tgetDataForScopeSet: function getDataForScopeSet(key, options) {\n\t\tvar keyInfo = Scope.keyInfo(key);\n\t\tvar firstSearchedContext;\n\n\t\t// Overwrite the options to use this read.\n\t\tvar opts = canAssign_1_3_3_canAssign({\n\t\t\t// This read is used by `._walk` to read from the scope.\n\t\t\t// This will use `hasKey` on the last property instead of reading it.\n\t\t\tread: function(context, keys){\n\n\t\t\t\t// If nothing can be found with the keys we are looking for, save the\n\t\t\t\t// first possible match.  This is where we will write to.\n\t\t\t\tif(firstSearchedContext === undefined && !(context instanceof canViewScope_4_13_7_letContext)) {\n\t\t\t\t\tfirstSearchedContext = context;\n\t\t\t\t}\n\t\t\t\t// If we have multiple keys ...\n\t\t\t\tif(keys.length > 1) {\n\t\t\t\t\t// see if we can find the parent ...\n\t\t\t\t\tvar parentKeys = keys.slice(0, keys.length-1);\n\t\t\t\t\tvar parent = canStacheKey_1_4_3_canStacheKey.read(context, parentKeys, options).value;\n\n\t\t\t\t\t// If there is a parent, see if it has the last key\n\t\t\t\t\tif( parent != null && canReflect_1_19_2_canReflect.hasKey(parent, keys[keys.length-1].key ) ) {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tparent: parent,\n\t\t\t\t\t\t\tparentHasKey: true,\n\t\t\t\t\t\t\tvalue: undefined\n\t\t\t\t\t\t};\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn {};\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// If we have only one key, try to find a context with this key\n\t\t\t\telse if(keys.length === 1) {\n\t\t\t\t\tif( canReflect_1_19_2_canReflect.hasKey(context, keys[0].key ) ) {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tparent: context,\n\t\t\t\t\t\t\tparentHasKey: true,\n\t\t\t\t\t\t\tvalue: undefined\n\t\t\t\t\t\t};\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn {};\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// If we have no keys, we are reading `this`.\n\t\t\t\telse {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tvalue: context\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\t\t},options);\n\n\n\t\t// Use the read above to figure out what we are probably writing to.\n\t\tvar readData = this.readKeyInfo(keyInfo, opts);\n\n\t\tif(keyInfo.remainingKey === \"this\") {\n\t\t\t// If we are setting a context, then return that context\n\t\t\treturn { parent: readData.value, how: \"setValue\" };\n\t\t}\n\t\t// Now we are trying to set a property on something.  Parent will\n\t\t// be the something we are setting a property on.\n\t\tvar parent;\n\n\t\tvar props = keyInfo.remainingKey.split(\".\");\n\t\tvar propName = props.pop();\n\n\t\t// If we got a `thisArg`, that's the parent.\n\t\tif(readData.thisArg) {\n\t\t\tparent = readData.thisArg;\n\t\t}\n\t\t// Otherwise, we didn't find anything, use the first searched context.\n\t\t// TODO: there is likely a bug here when trying to set foo.bar where nothing in the scope\n\t\t// has a foo.\n\t\telse if(firstSearchedContext) {\n\t\t\tparent = firstSearchedContext;\n\t\t}\n\n\t\tif (parent === undefined) {\n\t\t\treturn {\n\t\t\t\terror: \"Attempting to set a value at \" +\n\t\t\t\t\tkey + \" where the context is undefined.\"\n\t\t\t};\n\t\t}\n\t\t// Now we need to figure out how we would update this value.  The following does that.\n\t\tif(!canReflect_1_19_2_canReflect.isObservableLike(parent) && canReflect_1_19_2_canReflect.isObservableLike(parent[propName])) {\n\t\t\tif(canReflect_1_19_2_canReflect.isMapLike(parent[propName])) {\n\t\t\t\treturn {\n\t\t\t\t\tparent: parent,\n\t\t\t\t\tkey: propName,\n\t\t\t\t\thow: \"updateDeep\",\n\t\t\t\t\twarn: \"can-view-scope: Merging data into \\\"\" +\n\t\t\t\t\t\tpropName + \"\\\" because its parent is non-observable\"\n\t\t\t\t};\n\t\t\t}\n\t\t\telse if(canReflect_1_19_2_canReflect.isValueLike(parent[propName])){\n\t\t\t\treturn { parent: parent, key: propName, how: \"setValue\" };\n\t\t\t} else {\n\t\t\t\treturn { parent: parent, how: \"write\", key: propName, passOptions: true };\n\t\t\t}\n\t\t} else {\n\t\t\treturn { parent: parent, how: \"write\", key: propName, passOptions: true };\n\t\t}\n\t},\n\n\t// ### scope.getHelper\n\t// read a helper from the templateContext or global helpers list\n\tgetHelper: function(keyReads) {\n\t\tconsole.warn(\".getHelper is deprecated, use .getHelperOrPartial\");\n\t\treturn this.getHelperOrPartial(keyReads);\n\t},\n\tgetHelperOrPartial: function(keyReads) {\n\t\t// try every template context\n\t\tvar scope = this, context, helper;\n\t\twhile (scope) {\n\t\t\tcontext = scope._context;\n\t\t\tif (context instanceof canViewScope_4_13_7_templateContext) {\n\t\t\t\thelper = canStacheKey_1_4_3_canStacheKey.read(context.helpers, keyReads, { proxyMethods: false });\n\t\t\t\tif(helper.value !== undefined) {\n\t\t\t\t\treturn helper.value;\n\t\t\t\t}\n\t\t\t\thelper = canStacheKey_1_4_3_canStacheKey.read(context.partials, keyReads, { proxyMethods: false });\n\t\t\t\tif(helper.value !== undefined) {\n\t\t\t\t\treturn helper.value;\n\t\t\t\t}\n\t\t\t}\n\t\t\tscope = scope._parent;\n\t\t}\n\n\t\treturn canStacheKey_1_4_3_canStacheKey.read(canStacheHelpers_1_2_0_canStacheHelpers, keyReads, { proxyMethods: false }).value;\n\t},\n\n\t// ### scope.get\n\t// Gets a value from the scope without being observable.\n\tget: function(key, options) {\n\n\t\toptions = canAssign_1_3_3_canAssign({\n\t\t\tisArgument: true\n\t\t}, options);\n\n\t\tvar res = this.read(key, options);\n\t\treturn res.value;\n\t},\n\tpeek: canObservationRecorder_1_3_1_canObservationRecorder.ignore(function(key, options) {\n\t\treturn this.get(key, options);\n\t}),\n\t// TODO: Remove in 6.0\n\tpeak: canObservationRecorder_1_3_1_canObservationRecorder.ignore(function(key, options) {\n\t\t//!steal-remove-start\n\t\tif (process.env.NODE_ENV !== 'production') {\n\t\t\tdev.warn('peak is deprecated, please use peek instead');\n\t\t}\n\t\t//!steal-remove-end\n\t\treturn this.peek(key, options);\n\t}),\n\t// ### scope.getScope\n\t// Returns the first scope that passes the `tester` function.\n\tgetScope: function(tester) {\n\t\tvar scope = this;\n\t\twhile (scope) {\n\t\t\tif (tester(scope)) {\n\t\t\t\treturn scope;\n\t\t\t}\n\t\t\tscope = scope._parent;\n\t\t}\n\t},\n\t// ### scope.getContext\n\t// Returns the first context whose scope passes the `tester` function.\n\tgetContext: function(tester) {\n\t\tvar res = this.getScope(tester);\n\t\treturn res && res._context;\n\t},\n\t// ### scope.getTemplateContext\n\t// Returns the template context scope\n\t// This function isn't named right.\n\tgetTemplateContext: function() {\n\t\tvar lastScope;\n\n\t\t// find the first reference scope\n\t\tvar templateContext = this.getScope(function(scope) {\n\t\t\tlastScope = scope;\n\t\t\treturn scope._context instanceof canViewScope_4_13_7_templateContext;\n\t\t});\n\n\t\t// if there is no reference scope, add one as the root\n\t\tif(!templateContext) {\n\t\t\ttemplateContext = new Scope(new canViewScope_4_13_7_templateContext());\n\n\t\t\t// add templateContext to root of the scope chain so it\n\t\t\t// can be found using `getScope` next time it is looked up\n\t\t\tlastScope._parent = templateContext;\n\t\t}\n\t\treturn templateContext;\n\t},\n\taddTemplateContext: function(){\n\t\treturn this.add(new canViewScope_4_13_7_templateContext());\n\t},\n\taddLetContext: function(values){\n\t\treturn this.add(new canViewScope_4_13_7_letContext(values || {}), {variable: true});\n\t},\n\t// ### scope.getRoot\n\t// Returns the top most context that is not a references scope.\n\t// Used by `.read` to provide `%root`.\n\tgetRoot: function() {\n\t\tvar cur = this,\n\t\t\tchild = this;\n\n\t\twhile (cur._parent) {\n\t\t\tchild = cur;\n\t\t\tcur = cur._parent;\n\t\t}\n\n\t\tif (cur._context instanceof canViewScope_4_13_7_templateContext) {\n\t\t\tcur = child;\n\t\t}\n\t\treturn cur._context;\n\t},\n\n\t// first viewModel scope\n\tgetViewModel: function() {\n\t\tvar vmScope = this.getScope(function(scope) {\n\t\t\treturn scope._meta.viewModel;\n\t\t});\n\n\t\treturn vmScope && vmScope._context;\n\t},\n\n\t// _top_ viewModel scope\n\tgetTop: function() {\n\t\tvar top;\n\n\t\tthis.getScope(function(scope) {\n\t\t\tif (scope._meta.viewModel) {\n\t\t\t\ttop = scope;\n\t\t\t}\n\n\t\t\t// walk entire scope tree\n\t\t\treturn false;\n\t\t});\n\n\t\treturn top && top._context;\n\t},\n\n\t// ### scope.getPathsForKey\n\t// Finds all paths that will return a value for a specific key\n\t// NOTE: this is for development purposes only and is removed in production\n\tgetPathsForKey: function getPathsForKey(key) {\n\t\t//!steal-remove-start\n\t\t\tif (process.env.NODE_ENV !== 'production') {\n\t\t\tvar paths = {};\n\n\t\t\tvar getKeyDefinition = function(obj, key) {\n\t\t\t\tif (!obj || typeof obj !== \"object\") {\n\t\t\t\t\treturn {};\n\t\t\t\t}\n\n\t\t\t\tvar keyExistsOnObj = key in obj;\n\t\t\t\tvar objHasKey = canReflect_1_19_2_canReflect.hasKey(obj, key);\n\n\t\t\t\treturn {\n\t\t\t\t\tisDefined: keyExistsOnObj || objHasKey,\n\t\t\t\t\tisFunction: keyExistsOnObj && typeof obj[key] === \"function\"\n\t\t\t\t};\n\t\t\t};\n\n\t\t\t// scope.foo@bar -> bar\n\t\t\tvar reads = canStacheKey_1_4_3_canStacheKey.reads(key);\n\t\t\tvar keyParts = reads.map(function(read) {\n\t\t\t\treturn read.key;\n\t\t\t});\n\t\t\tvar scopeIndex = keyParts.indexOf(\"scope\");\n\n\t\t\tif (scopeIndex > -1) {\n\t\t\t\tkeyParts.splice(scopeIndex, 2);\n\t\t\t}\n\t\t\tvar normalizedKey = keyParts.join(\".\");\n\n\t\t\t// check scope.vm.<key>\n\t\t\tvar vm = this.getViewModel();\n\t\t\tvar vmKeyDefinition = getKeyDefinition(vm, normalizedKey);\n\n\t\t\tif (vmKeyDefinition.isDefined) {\n\t\t\t\tpaths[\"scope.vm.\" + normalizedKey + (vmKeyDefinition.isFunction ? \"()\" : \"\")] = vm;\n\t\t\t}\n\n\t\t\t// check scope.top.<key>\n\t\t\tvar top = this.getTop();\n\t\t\tvar topKeyDefinition = getKeyDefinition(top, normalizedKey);\n\n\t\t\tif (topKeyDefinition.isDefined) {\n\t\t\t\tpaths[\"scope.top.\" + normalizedKey + (topKeyDefinition.isFunction ? \"()\" : \"\")] = top;\n\t\t\t}\n\n\t\t\t// find specific paths (like ../key)\n\t\t\tvar cur = \"\";\n\n\t\t\tthis.getScope(function(scope) {\n\t\t\t\t// `notContext` and `special` contexts can't be read using `../`\n\t\t\t\tvar canBeRead = !scope.isSpecial();\n\n\t\t\t\tif (canBeRead) {\n\t\t\t\t\tvar contextKeyDefinition = getKeyDefinition(scope._context, normalizedKey);\n\t\t\t\t\tif (contextKeyDefinition.isDefined) {\n\t\t\t\t\t\tpaths[cur + normalizedKey + (contextKeyDefinition.isFunction ? \"()\" : \"\")] = scope._context;\n\t\t\t\t\t}\n\n\t\t\t\t\tcur += \"../\";\n\t\t\t\t}\n\n\t\t\t\t// walk entire scope tree\n\t\t\t\treturn false;\n\t\t\t});\n\n\t\t\treturn paths;\n\t\t}\n\t\t//!steal-remove-end\n\t},\n\n\t// ### scope.hasKey\n\t// returns whether or not this scope has the key\n\thasKey: function hasKey(key) {\n\t\tvar reads = canStacheKey_1_4_3_canStacheKey.reads(key);\n\t\tvar readValue;\n\n\t\tif (reads[0].key === \"scope\") {\n\t\t\t// read properties like `scope.vm.foo` directly from the scope\n\t\t\treadValue = canStacheKey_1_4_3_canStacheKey.read(this, reads.slice(1), key);\n\t\t} else {\n\t\t\t// read normal properties from the scope's context\n\t\t\treadValue = canStacheKey_1_4_3_canStacheKey.read(this._context, reads, key);\n\t\t}\n\n\t\treturn readValue.foundLastParent && readValue.parentHasKey;\n\t},\n\n\tset: function(key, value, options) {\n\t\toptions = options || {};\n\n\t\tvar data = this.getDataForScopeSet(key, options);\n\t\tvar parent = data.parent;\n\n\t\t//!steal-remove-start\n\t\tif (process.env.NODE_ENV !== 'production') {\n\t\t\tif (data.error) {\n\t\t\t\treturn dev.error(data.error);\n\t\t\t}\n\t\t}\n\t\t//!steal-remove-end\n\n\t\tif (data.warn) {\n\t\t\tdev.warn(data.warn);\n\t\t}\n\n\t\tswitch (data.how) {\n\t\t\tcase \"set\":\n\t\t\t\tparent.set(data.key, value, data.passOptions ? options : undefined);\n\t\t\t\tbreak;\n\n\t\t\tcase \"write\":\n\t\t\t\tcanStacheKey_1_4_3_canStacheKey.write(parent, data.key, value, options);\n\t\t\t\tbreak;\n\n\t\t\tcase \"setValue\":\n\t\t\t\tcanReflect_1_19_2_canReflect.setValue(\"key\" in data ? parent[data.key] : parent, value);\n\t\t\t\tbreak;\n\n\t\t\tcase \"setKeyValue\":\n\t\t\t\tcanReflect_1_19_2_canReflect.setKeyValue(parent, data.key, value);\n\t\t\t\tbreak;\n\n\t\t\tcase \"updateDeep\":\n\t\t\t\tcanReflect_1_19_2_canReflect.updateDeep(parent[data.key], value);\n\t\t\t\tbreak;\n\t\t}\n\t},\n\n\t// ### scope.attr\n\t// Gets or sets a value in the scope without being observable.\n\tattr: canObservationRecorder_1_3_1_canObservationRecorder.ignore(function(key, value, options) {\n\t\tdev.warn(\"can-view-scope::attr is deprecated, please use peek, get or set\");\n\n\t\toptions = canAssign_1_3_3_canAssign({\n\t\t\tisArgument: true\n\t\t}, options);\n\n\t\t// Allow setting a value on the context\n\t\tif (arguments.length === 2) {\n\t\t\treturn this.set(key, value, options);\n\n\t\t} else {\n\t\t\treturn this.get(key, options);\n\t\t}\n\t}),\n\n\t// ### scope.computeData\n\t// Finds the first location of the key in the scope and then provides a get-set compute that represents the key's value\n\t// and other information about where the value was found.\n\tcomputeData: function(key, options) {\n\t\treturn canViewScope_4_13_7_compute_data(this, key, options);\n\t},\n\n\t// ### scope.compute\n\t// Provides a get-set compute that represents a key's value.\n\tcompute: function(key, options) {\n\t\treturn this.computeData(key, options)\n\t\t\t.compute;\n\t},\n\t// ### scope.cloneFromRef\n\t//\n\t// This takes a scope and essentially copies its chain from\n\t// right before the last TemplateContext. And it does not include the ref.\n\t// this is a helper function to provide lexical semantics for refs.\n\t// This will not be needed for leakScope: false.\n\tcloneFromRef: function() {\n\t\tvar scopes = [];\n\t\tvar scope = this,\n\t\t\tcontext,\n\t\t\tparent;\n\t\twhile (scope) {\n\t\t\tcontext = scope._context;\n\t\t\tif (context instanceof canViewScope_4_13_7_templateContext) {\n\t\t\t\tparent = scope._parent;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tscopes.unshift(scope);\n\t\t\tscope = scope._parent;\n\t\t}\n\t\tif (parent) {\n\t\t\tscopes.forEach(function(scope) {\n\t\t\t\t// For performance, re-use _meta, don't copy it.\n\t\t\t\tparent = parent.add(scope._context, scope._meta);\n\t\t\t});\n\t\t\treturn parent;\n\t\t} else {\n\t\t\treturn this;\n\t\t}\n\t},\n\tisSpecial: function(){\n\t\treturn this._meta.notContext || this._meta.special || (this._context instanceof canViewScope_4_13_7_templateContext) || this._meta.variable;\n\t}\n});\n// Legacy name for _walk.\nScope.prototype._read = Scope.prototype._walk;\n\ncanReflect_1_19_2_canReflect.assignSymbols(Scope.prototype, {\n\t\"can.hasKey\": Scope.prototype.hasKey,\n\t\"can.isScopeLike\": true\n});\n\nvar templateContextPrimitives = [\n\t\"filename\", \"lineNumber\"\n];\n\n// create getters/setters for primitives on the templateContext\n// scope.filename -> scope.readFromTemplateContext(\"filename\")\ntemplateContextPrimitives.forEach(function(key) {\n\tObject.defineProperty(Scope.prototype, key, {\n\t\tget: function() {\n\t\t\treturn this.readFromTemplateContext(key).value;\n\t\t},\n\t\tset: function(val) {\n\t\t\tthis.templateContext[key] = val;\n\t\t}\n\t});\n});\n\ncanDefineLazyValue_1_1_1_defineLazyValue(Scope.prototype, 'templateContext', function() {\n\treturn this.getTemplateContext()._context;\n});\n\ncanDefineLazyValue_1_1_1_defineLazyValue(Scope.prototype, 'root', function() {\n\tdev.warn('`scope.root` is deprecated. Use either `scope.top`: https://canjs.com/doc/can-stache/keys/scope.html#scope_top or `scope.vm`: https://canjs.com/doc/can-stache/keys/scope.html#scope_vm instead.');\n\treturn this.getRoot();\n});\n\ncanDefineLazyValue_1_1_1_defineLazyValue(Scope.prototype, 'vm', function() {\n\treturn this.getViewModel();\n});\n\ncanDefineLazyValue_1_1_1_defineLazyValue(Scope.prototype, 'top', function() {\n\treturn this.getTop();\n});\n\ncanDefineLazyValue_1_1_1_defineLazyValue(Scope.prototype, 'helpers', function() {\n\treturn canStacheHelpers_1_2_0_canStacheHelpers;\n});\n\nvar specialKeywords = [\n\t'index', 'key', 'element',\n\t'event', 'viewModel','arguments',\n\t'helperOptions', 'args'\n];\n\n// create getters for \"special\" keys\n// scope.index -> scope.readFromSpecialContext(\"index\")\nspecialKeywords.forEach(function(key) {\n\tObject.defineProperty(Scope.prototype, key, {\n\t\tget: function() {\n\t\t\treturn this.readFromSpecialContext(key).value;\n\t\t}\n\t});\n});\n\n\n//!steal-remove-start\nif (process.env.NODE_ENV !== 'production') {\n\tScope.prototype.log = function() {\n\t\tvar scope = this;\n\t    var indent = \"\";\n\t\tvar contextType = \"\";\n\t\twhile(scope) {\n\t\t\tcontextType = scope._meta.notContext ? \" (notContext)\" :\n\t\t\t\tscope._meta.special ? \" (special)\" : \"\";\n\t\t\tconsole.log(indent, canReflect_1_19_2_canReflect.getName(scope._context) + contextType, scope._context);\n\t        scope = scope._parent;\n\t        indent += \" \";\n\t    }\n\t};\n}\n//!steal-remove-end\n\n\ncanNamespace_1_0_0_canNamespace.view = canNamespace_1_0_0_canNamespace.view || {};\nvar canViewScope_4_13_7_canViewScope = canNamespace_1_0_0_canNamespace.view.Scope = Scope;\n\nfunction KeyObservable(root, key){\n    key = \"\"+key;\n    this.key = key;\n    this.root = root;\n    settable.call(this, function(){\n        return canStacheKey_1_4_3_canStacheKey.get(this,key);\n    }, root);\n}\n\nKeyObservable.prototype = Object.create(settable.prototype);\n\nKeyObservable.prototype.set = function(newVal) {\n    canStacheKey_1_4_3_canStacheKey.set(this.root,this.key, newVal);\n};\n\n\nvar keyObservable = KeyObservable;\n\nvar isViewSymbol = canSymbol_1_7_0_canSymbol.for(\"can.isView\");\n\n// this creates a noop that marks that a renderer was called\n// this is for situations where a helper function calls a renderer\n// that was not provided such as\n// {{#if false}} ... {{/if}}\n// with no {{else}}\nvar createNoOpRenderer = function (metadata) {\n\treturn function noop() {\n\t\tif (metadata) {\n\t\t\tmetadata.rendered = true;\n\t\t}\n\t};\n};\n\nvar utils$1 = {\n\tlast: function(arr){\n\t\treturn arr !=null && arr[arr.length-1];\n\t},\n\t// A generic empty function\n\temptyHandler: function(){},\n\t// Converts a string like \"1\" into 1. \"null\" into null, etc.\n\t// This doesn't have to do full JSON, so removing eval would be good.\n\tjsonParse: function(str){\n\t\t// if it starts with a quote, assume a string.\n\t\tif(str[0] === \"'\") {\n\t\t\treturn str.substr(1, str.length -2);\n\t\t} else if(str === \"undefined\") {\n\t\t\treturn undefined;\n\t\t} else {\n\t\t\treturn JSON.parse(str);\n\t\t}\n\t},\n\tmixins: {\n\t\tlast: function(){\n\t\t\treturn this.stack[this.stack.length - 1];\n\t\t},\n\t\tadd: function(chars){\n\t\t\tthis.last().add(chars);\n\t\t},\n\t\tsubSectionDepth: function(){\n\t\t\treturn this.stack.length - 1;\n\t\t}\n\t},\n\t// Sets .fn and .inverse on a helperOptions object and makes sure\n\t// they can reference the current scope and options.\n\tcreateRenderers: function(helperOptions, scope, truthyRenderer, falseyRenderer, isStringOnly){\n\t\thelperOptions.fn = truthyRenderer ? this.makeRendererConvertScopes(truthyRenderer, scope, isStringOnly, helperOptions.metadata) : createNoOpRenderer(helperOptions.metadata);\n\t\thelperOptions.inverse = falseyRenderer ? this.makeRendererConvertScopes(falseyRenderer, scope, isStringOnly, helperOptions.metadata) : createNoOpRenderer(helperOptions.metadata);\n\t\thelperOptions.isSection = !!(truthyRenderer || falseyRenderer);\n\t},\n\t// Returns a new renderer function that makes sure any data or helpers passed\n\t// to it are converted to a can.view.Scope and a can.view.Options.\n\tmakeRendererConvertScopes: function (renderer, parentScope, observeObservables, metadata) {\n\t\tvar convertedRenderer = function (newScope, newOptions) {\n\t\t\t// prevent binding on fn.\n\t\t\t// If a non-scope value is passed, add that to the parent scope.\n\t\t\tif (newScope !== undefined && !(newScope instanceof canViewScope_4_13_7_canViewScope)) {\n\t\t\t\tif (parentScope) {\n\t\t\t\t\tnewScope = parentScope.add(newScope);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tnewScope = new canViewScope_4_13_7_canViewScope(newScope || {});\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (metadata) {\n\t\t\t\tmetadata.rendered = true;\n\t\t\t}\n\n\t\t\tvar result = renderer(newScope || parentScope );\n\t\t\treturn result;\n\t\t};\n\t\treturn observeObservables ? convertedRenderer :\n\t\t\tcanObservationRecorder_1_3_1_canObservationRecorder.ignore(convertedRenderer);\n\t},\n\tmakeView: function(renderer){\n\t\tvar view = canObservationRecorder_1_3_1_canObservationRecorder.ignore(function(scope){\n\t\t\tif(!(scope instanceof canViewScope_4_13_7_canViewScope)) {\n\t\t\t\tscope = new canViewScope_4_13_7_canViewScope(scope);\n\t\t\t}\n\t\t\treturn renderer(scope);\n\t\t});\n\t\tview[isViewSymbol] = true;\n\t\treturn view;\n\t},\n\t// Calls the truthy subsection for each item in a list and returning them in a string.\n\tgetItemsStringContent: function(items, isObserveList, helperOptions){\n\t\tvar txt = \"\",\n\t\t\tlen = canStacheKey_1_4_3_canStacheKey.get(items, 'length'),\n\t\t\tisObservable = canReflect_1_19_2_canReflect.isObservableLike(items);\n\n\t\tfor (var i = 0; i < len; i++) {\n\t\t\tvar item = isObservable ? new keyObservable(items, i) :items[i];\n\t\t\ttxt += helperOptions.fn(item);\n\t\t}\n\t\treturn txt;\n\t},\n\t// Calls the truthy subsection for each item in a list and returns them in a document Fragment.\n\tgetItemsFragContent: function(items, helperOptions, scope) {\n\t\tvar result = [],\n\t\t\tlen = canStacheKey_1_4_3_canStacheKey.get(items, 'length'),\n\t\t\tisObservable = canReflect_1_19_2_canReflect.isObservableLike(items),\n\t\t\thashExprs = helperOptions.exprData && helperOptions.exprData.hashExprs,\n\t\t\thashOptions;\n\n\t\t// Check if using hash\n\t\tif (canReflect_1_19_2_canReflect.size(hashExprs) > 0) {\n\t\t\thashOptions = {};\n\t\t\tcanReflect_1_19_2_canReflect.eachKey(hashExprs, function (exprs, key) {\n\t\t\t\thashOptions[exprs.key] = key;\n\t\t\t});\n\t\t}\n\n\t\tfor (var i = 0; i < len; i++) {\n\t\t\tvar aliases = {};\n\n\t\t\tvar item = isObservable ? new keyObservable(items, i) :items[i];\n\n\t\t\tif (canReflect_1_19_2_canReflect.size(hashOptions) > 0) {\n\t\t\t\tif (hashOptions.value) {\n\t\t\t\t\taliases[hashOptions.value] = item;\n\t\t\t\t}\n\t\t\t\tif (hashOptions.index) {\n\t\t\t\t\taliases[hashOptions.index] = i;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tresult.push(helperOptions.fn(\n\t\t\t\tscope\n\t\t\t\t.add(aliases, { notContext: true })\n\t\t\t\t.add({ index: i }, { special: true })\n\t\t\t\t.add(item))\n\t\t\t);\n\t\t}\n\t\treturn result;\n\t}\n};\n\nvar last = utils$1.last;\n\nvar decodeHTML = typeof document !== \"undefined\" && (function(){\n\tvar el = document$1().createElement('div');\n\treturn function(html){\n\t\tif(html.indexOf(\"&\") === -1) {\n\t\t\treturn html.replace(/\\r\\n/g,\"\\n\");\n\t\t}\n\t\tel.innerHTML = html;\n\t\treturn el.childNodes.length === 0 ? \"\" : el.childNodes.item(0).nodeValue;\n\t};\n})();\n// ## HTMLSectionBuilder\n//\n// Contains a stack of HTMLSections.\n// An HTMLSection is created everytime a subsection is found. For example:\n//\n//     {{#if(items)}} {{#items}} X\n//\n// At the point X was being processed, there would be 2 HTMLSections in the\n// stack.  One for the content of `{{#if(items)}}` and the other for the\n// content of `{{#items}}`\nvar HTMLSectionBuilder = function(filename){\n\tif (filename) {\n\t\tthis.filename = filename;\n\t}\n\tthis.stack = [new HTMLSection()];\n};\n\n\ncanAssign_1_3_3_canAssign(HTMLSectionBuilder.prototype,utils$1.mixins);\n\ncanAssign_1_3_3_canAssign(HTMLSectionBuilder.prototype,{\n\tstartSubSection: function(process){\n\t\tvar newSection = new HTMLSection(process);\n\t\tthis.stack.push(newSection);\n\t\treturn newSection;\n\t},\n\t// Ends the current section and returns a renderer.\n\t// But only returns a renderer if there is a template.\n\tendSubSectionAndReturnRenderer: function(){\n\t\tif(this.last().isEmpty()) {\n\t\t\tthis.stack.pop();\n\t\t\treturn null;\n\t\t} else {\n\t\t\tvar htmlSection = this.endSection();\n\t\t\treturn utils$1.makeView(htmlSection.compiled.hydrate.bind(htmlSection.compiled));\n\t\t}\n\t},\n\tstartSection: function( process, commentName ) {\n\t\tvar newSection = new HTMLSection(process);\n\t\tthis.last().add({\n\t\t\tcomment: commentName || \"#section\",\n\t\t\tcallbacks: [newSection.targetCallback]\n\t\t});\n\t\tthis.last().add({\n\t\t\tcomment: \"can-end-placeholder\"\n\t\t});\n\t\t// adding a section within a section ...\n\t\t// the stack has section ...\n\t\tthis.stack.push(newSection);\n\t},\n\tendSection: function(){\n\t\tthis.last().compile();\n\t\treturn this.stack.pop();\n\t},\n\tinverse: function(){\n\t\tthis.last().inverse();\n\t},\n\tcompile: function(){\n\t\tvar compiled = this.stack.pop().compile();\n\t\t// ignore observations here.  the render fn\n\t\t//  itself doesn't need to be observable.\n\t\treturn utils$1.makeView( compiled.hydrate.bind(compiled) );\n\t},\n\tpush: function(chars){\n\t\tthis.last().push(chars);\n\t},\n\tpop: function(){\n\t\treturn this.last().pop();\n\t},\n\tremoveCurrentNode: function() {\n\t\tthis.last().removeCurrentNode();\n\t}\n});\n\nvar HTMLSection = function(process){\n\tthis.data = \"targetData\";\n\tthis.targetData = [];\n\t// A record of what targetData element we are within.\n\tthis.targetStack = [];\n\tvar self = this;\n\tthis.targetCallback = function(scope){\n\t\tprocess.call(this,\n\t\t\tscope,\n\t\t\tself.compiled.hydrate.bind(self.compiled),\n\t\t\tself.inverseCompiled && self.inverseCompiled.hydrate.bind(self.inverseCompiled)  ) ;\n\t};\n};\ncanAssign_1_3_3_canAssign(HTMLSection.prototype,{\n\tinverse: function(){\n\t\tthis.inverseData = [];\n\t\tthis.data = \"inverseData\";\n\t},\n\t// Adds a DOM node.\n\tpush: function(data){\n\t\tthis.add(data);\n\t\tthis.targetStack.push(data);\n\t},\n\tpop: function(){\n\t\treturn this.targetStack.pop();\n\t},\n\tadd: function(data){\n\t\tif(typeof data === \"string\"){\n\t\t\tdata = decodeHTML(data);\n\t\t}\n\t\tif(this.targetStack.length) {\n\t\t\tlast(this.targetStack).children.push(data);\n\t\t} else {\n\t\t\tthis[this.data].push(data);\n\t\t}\n\t},\n\tcompile: function(){\n\t\tthis.compiled = canViewTarget_5_0_0_canViewTarget(this.targetData, document$1());\n\t\tif(this.inverseData) {\n\t\t\tthis.inverseCompiled = canViewTarget_5_0_0_canViewTarget(this.inverseData, document$1());\n\t\t\tdelete this.inverseData;\n\t\t}\n\t\tthis.targetStack = this.targetData = null;\n\t\treturn this.compiled;\n\t},\n\tremoveCurrentNode: function() {\n\t\tvar children = this.children();\n\t\treturn children.pop();\n\t},\n\tchildren: function(){\n\t\tif(this.targetStack.length) {\n\t\t\treturn last(this.targetStack).children;\n\t\t} else {\n\t\t\treturn this[this.data];\n\t\t}\n\t},\n\t// Returns if a section is empty\n\tisEmpty: function(){\n\t\treturn !this.targetData.length;\n\t}\n});\nHTMLSectionBuilder.HTMLSection = HTMLSection;\n\nvar html_section = HTMLSectionBuilder;\n\nvar canDomData_1_0_3_canDomData = createCommonjsModule(function (module) {\n\n\nvar isEmptyObject = function(obj){\n\t/* jshint -W098 */\n\tfor(var prop in obj) {\n\t\treturn false;\n\t}\n\treturn true;\n};\n\nvar data = new WeakMap();\n\n// delete this node's `data`\n// returns true if the node was deleted.\nvar deleteNode = function(node) {\n\tvar nodeDeleted = false;\n\tif (data.has(node)) {\n\t\tnodeDeleted = true;\n\t\tdata.delete(node);\n\t}\n\treturn nodeDeleted;\n};\n\nvar setData = function(node, name, value) {\n\tvar store = data.get(node);\n\tif (store === undefined) {\n\t\tstore = {};\n\t\tdata.set(node, store);\n\t}\n\tif (name !== undefined) {\n\t\tstore[name] = value;\n\t}\n\treturn store;\n};\n\n/*\n * Core of domData that does not depend on mutationDocument\n * This is separated in order to prevent circular dependencies\n */\nvar domData = {\n\t_data: data,\n\n\tget: function(node, key) {\n\t\tvar store = data.get(node);\n\t\treturn key === undefined ? store : store && store[key];\n\t},\n\n\tset: setData,\n\n\tclean: function(node, prop) {\n\t\tvar itemData = data.get(node);\n\t\tif (itemData && itemData[prop]) {\n\t\t\tdelete itemData[prop];\n\t\t}\n\t\tif (isEmptyObject(itemData)) {\n\t\t\tdeleteNode(node);\n\t\t}\n\t},\n\n\tdelete: deleteNode\n};\n\nif (canNamespace_1_0_0_canNamespace.domData) {\n\tthrow new Error(\"You can't have two versions of can-dom-data, check your dependencies\");\n} else {\n\tmodule.exports = canNamespace_1_0_0_canNamespace.domData = domData;\n}\n});\n\nvar slice$1 = [].slice;\n// a b c\n// a b c d\n// [[2,0, d]]\n\n\nfunction defaultIdentity(a, b){\n    return a === b;\n}\n\nfunction makeIdentityFromMapSchema(typeSchema) {\n    if(typeSchema.identity && typeSchema.identity.length) {\n        return function identityCheck(a, b) {\n            var aId = canReflect_1_19_2_canReflect.getIdentity(a, typeSchema),\n                bId = canReflect_1_19_2_canReflect.getIdentity(b, typeSchema);\n            return aId === bId;\n        };\n    } else {\n        return defaultIdentity;\n    }\n}\n\nfunction makeIdentityFromListSchema(listSchema) {\n    return listSchema.values != null ?\n        makeIdentityFromMapSchema( canReflect_1_19_2_canReflect.getSchema(listSchema.values) ) :\n        defaultIdentity;\n}\n\nfunction makeIdentity(oldList, oldListLength) {\n    var listSchema = canReflect_1_19_2_canReflect.getSchema(oldList),\n        typeSchema;\n    if(listSchema != null) {\n        if(listSchema.values != null) {\n            typeSchema = canReflect_1_19_2_canReflect.getSchema(listSchema.values);\n        } else {\n            return defaultIdentity;\n        }\n    }\n    if(typeSchema == null && oldListLength > 0) {\n        typeSchema = canReflect_1_19_2_canReflect.getSchema( canReflect_1_19_2_canReflect.getKeyValue(oldList, 0) );\n    }\n    if(typeSchema) {\n        return makeIdentityFromMapSchema(typeSchema);\n    } else {\n        return defaultIdentity;\n    }\n}\n\n\n\nfunction reverseDiff(oldDiffStopIndex, newDiffStopIndex, oldList, newList, identity) {\n\tvar oldIndex = oldList.length - 1,\n\t\tnewIndex =  newList.length - 1;\n\n\twhile( oldIndex > oldDiffStopIndex && newIndex > newDiffStopIndex) {\n\t\tvar oldItem = oldList[oldIndex],\n\t\t\tnewItem = newList[newIndex];\n\n\t\tif( identity( oldItem, newItem, oldIndex ) ) {\n\t\t\toldIndex--;\n\t\t\tnewIndex--;\n\t\t\tcontinue;\n\t\t} else {\n\t\t\t// use newIndex because it reflects any deletions\n\t\t\treturn [{\n                type: \"splice\",\n\t\t\t\tindex: newDiffStopIndex,\n\t\t\t \tdeleteCount: (oldIndex-oldDiffStopIndex+1),\n\t\t\t \tinsert: slice$1.call(newList, newDiffStopIndex,newIndex+1)\n\t\t\t}];\n\t\t}\n\t}\n\t// if we've reached of either the new or old list\n\t// we simply return\n\treturn [{\n        type: \"splice\",\n\t\tindex: newDiffStopIndex,\n\t\tdeleteCount: (oldIndex-oldDiffStopIndex+1),\n\t\tinsert: slice$1.call(newList, newDiffStopIndex,newIndex+1)\n\t}];\n\n}\n\n/**\n * @module {function} can-diff/list/list\n * @parent can-diff\n *\n * @description Return a difference of two lists.\n *\n * @signature `diffList( oldList, newList, [identity] )`\n *\n * Compares two lists and produces a sequence of patches that can be applied to make `oldList` take\n * the shape of `newList`.\n *\n * ```js\n * var diffList = require(\"can-diff/list/list\");\n *\n * console.log(diff([1], [1, 2])); // -> [{type: \"splice\", index: 1, deleteCount: 0, insert: [2]}]\n * console.log(diff([1, 2], [1])); // -> [{type: \"splice\", index: 1, deleteCount: 1, insert: []}]\n *\n * // with an optional identity function:\n * diffList(\n *     [{id:1},{id:2}],\n *     [{id:1},{id:3}],\n *     (a,b) => a.id === b.id\n * ); // -> [{type: \"splice\", index: 1, deleteCount: 1, insert: [{id:3}]}]\n * ```\n *\n * The patch algorithm is linear with respect to the length of the lists and therefore does not produce a\n * [perfect edit distance](https://en.wikipedia.org/wiki/Edit_distance) (which would be at least quadratic).\n *\n * It is designed to work with most common list change scenarios, when items are inserted or removed\n * to a list (as opposed to moved with in the last).\n *\n * For example, it is able to produce the following patches:\n *\n * ```js\n * diffList(\n *     [\"a\",\"b\",\"c\",\"d\"],\n *     [\"a\",\"b\",\"X\",\"Y\",\"c\",\"d\"]\n * ); // -> [{type: \"splice\", index: 2, deleteCount: 0, insert: [\"X\",\"Y\"]}]\n * ```\n *\n * @param  {ArrayLike} oldList The source array or list to diff from.\n * @param  {ArrayLike} newList The array or list to diff to.\n * @param  {function|can-reflect.getSchema} schemaOrIdentity An optional identity function or a schema with\n * an identity property for comparing elements.  If a `schemaOrIdentity` is not provided, the schema of\n * the `oldList` will be used.  If a schema can not be found, items a default identity function will be created\n * that checks if the two values are strictly equal `===`.\n * @return {Array} An array of [can-symbol/types/Patch] objects representing the differences\n *\n * Returns the difference between two ArrayLike objects (that have nonnegative\n * integer keys and the `length` property) as an array of patch objects.\n *\n * A patch object returned by this function has the following properties:\n * - **type**: the type of patch (`\"splice\"`).\n * - **index**:  the index of newList where the patch begins\n * - **deleteCount**: the number of items deleted from that index in newList\n * - **insert**: an Array of items newly inserted at that index in newList\n *\n * Patches should be applied in the order they are returned.\n */\n\nvar list = function(oldList, newList, schemaOrIdentity){\n    var oldIndex = 0,\n\t\tnewIndex =  0,\n\t\toldLength = canReflect_1_19_2_canReflect.size( oldList ),\n\t\tnewLength = canReflect_1_19_2_canReflect.size( newList ),\n\t\tpatches = [];\n\n    var schemaType = typeof schemaOrIdentity,\n        identity;\n    if(schemaType === \"function\") {\n        identity = schemaOrIdentity;\n    } else if(schemaOrIdentity != null) {\n        if(schemaOrIdentity.type === \"map\") {\n            identity = makeIdentityFromMapSchema(schemaOrIdentity);\n        } else {\n            identity = makeIdentityFromListSchema(schemaOrIdentity);\n        }\n    } else {\n        identity = makeIdentity(oldList, oldLength);\n    }\n\n\n\n\twhile(oldIndex < oldLength && newIndex < newLength) {\n\t\tvar oldItem = oldList[oldIndex],\n\t\t\tnewItem = newList[newIndex];\n\n\t\tif( identity( oldItem, newItem, oldIndex ) ) {\n\t\t\toldIndex++;\n\t\t\tnewIndex++;\n\t\t\tcontinue;\n\t\t}\n\t\t// look for single insert, does the next newList item equal the current oldList.\n\t\t// 1 2 3\n\t\t// 1 2 4 3\n\t\tif(  newIndex+1 < newLength && identity( oldItem, newList[newIndex+1], oldIndex ) ) {\n\t\t\tpatches.push({index: newIndex, deleteCount: 0, insert: [ newList[newIndex] ], type: \"splice\"});\n\t\t\toldIndex++;\n\t\t\tnewIndex += 2;\n\t\t\tcontinue;\n\t\t}\n\t\t// look for single removal, does the next item in the oldList equal the current newList item.\n\t\t// 1 2 3\n\t\t// 1 3\n\t\telse if( oldIndex+1 < oldLength  && identity( oldList[oldIndex+1], newItem, oldIndex+1 ) ) {\n\t\t\tpatches.push({index: newIndex, deleteCount: 1, insert: [], type: \"splice\"});\n\t\t\toldIndex += 2;\n\t\t\tnewIndex++;\n\t\t\tcontinue;\n\t\t}\n\t\t// just clean up the rest and exit\n\t\t// 1 2 3\n\t\t// 1 2 5 6 7\n\t\telse {\n\t\t\t// iterate backwards to `newIndex`\n\t\t\t// \"a\", \"b\", \"c\", \"d\", \"e\"\n\t\t\t// \"a\", \"x\", \"y\", \"z\", \"e\"\n\t\t\t// -> {}\n\t\t\tpatches.push.apply(patches, reverseDiff(oldIndex, newIndex , oldList, newList, identity) );\n\n\n\t\t\treturn patches;\n\t\t}\n\t}\n\tif( (newIndex === newLength) && (oldIndex === oldLength) ) {\n\t\treturn patches;\n\t}\n\t// a b\n\t// a b c d e\n\tpatches.push(\n\t\t\t\t{type: \"splice\", index: newIndex,\n\t\t\t\t deleteCount: oldLength-oldIndex,\n\t\t\t\t insert: slice$1.call(newList, newIndex) } );\n\n\treturn patches;\n};\n\nvar global$1 = global_1();\n\n\n\n\n\n\n\n\n\nvar xmlnsAttrNamespaceURI = \"http://www.w3.org/2000/xmlns/\";\nvar xlinkHrefAttrNamespaceURI =  \"http://www.w3.org/1999/xlink\";\nvar attrsNamespacesURI = {\n\t'xmlns': xmlnsAttrNamespaceURI,\n\t'xlink:href': xlinkHrefAttrNamespaceURI\n};\n\n\nvar formElements = {\"INPUT\": true, \"TEXTAREA\": true, \"SELECT\": true, \"BUTTON\": true},\n\t// Used to convert values to strings.\n\ttoString$1 = function(value){\n\t\tif(value == null) {\n\t\t\treturn \"\";\n\t\t} else {\n\t\t\treturn \"\"+value;\n\t\t}\n\t},\n\tisSVG = function(el){\n\t\treturn el.namespaceURI === \"http://www.w3.org/2000/svg\";\n\t},\n\ttruthy = function() { return true; },\n\tgetSpecialTest = function(special){\n\t\treturn (special && special.test) || truthy;\n\t},\n\tpropProp = function(prop, obj){\n\t\tobj = obj || {};\n\t\tobj.get = function(){\n\t\t\treturn this[prop];\n\t\t};\n\t\tobj.set = function(value){\n\t\t\tif(this[prop] !== value) {\n\t\t\t\tthis[prop] = value;\n\t\t\t}\n\t\t};\n\t\treturn obj;\n\t},\n\tbooleanProp = function(prop){\n\t\treturn {\n\t\t\tisBoolean: true,\n\t\t\tset: function(value){\n\t\t\t\tif(prop in this) {\n\t\t\t\t\tthis[prop] = value;\n\t\t\t\t} else {\n\t\t\t\t\tcanDomMutate_2_0_9_node.setAttribute.call(this, prop, \"\");\n\t\t\t\t}\n\t\t\t},\n\t\t\tremove: function(){\n\t\t\t\tthis[prop] = false;\n\t\t\t}\n\t\t};\n\t},\n\tsetupMO = function(el, callback){\n\t\tvar attrMO = canDomData_1_0_3_canDomData.get(el, \"attrMO\");\n\t\tif(!attrMO) {\n\t\t\tvar onMutation = function(){\n\t\t\t\tcallback.call(el);\n\t\t\t};\n\t\t\tvar MO = mutationObserver();\n\t\t\tif(MO) {\n\t\t\t\tvar observer = new MO(onMutation);\n\t\t\t\tobserver.observe(el, {\n\t\t\t\t\tchildList: true,\n\t\t\t\t\tsubtree: true\n\t\t\t\t});\n\t\t\t\tcanDomData_1_0_3_canDomData.set(el, \"attrMO\", observer);\n\t\t\t} else {\n\t\t\t\tcanDomData_1_0_3_canDomData.set(el, \"attrMO\", true);\n\t\t\t\tcanDomData_1_0_3_canDomData.set(el, \"canBindingCallback\", {onMutation: onMutation});\n\t\t\t}\n\t\t}\n\t},\n\t_findOptionToSelect = function (parent, value) {\n\t\tvar child = parent.firstChild;\n\t\twhile (child) {\n\t\t\tif (child.nodeName === \"OPTION\" && value === child.value) {\n\t\t\t\treturn child;\n\t\t\t}\n\t\t\tif (child.nodeName === \"OPTGROUP\") {\n\t\t\t\tvar groupChild = _findOptionToSelect(child, value);\n\t\t\t\tif (groupChild) {\n\t\t\t\t\treturn groupChild;\n\t\t\t\t}\n\t\t\t}\n\t\t\tchild = child.nextSibling;\n\t\t}\n\t},\n\tsetChildOptions = function(el, value){\n\t\tvar option;\n\t\tif (value != null) {\n\t\t\toption = _findOptionToSelect(el, value);\n\t\t}\n\t\tif (option) {\n\t\t\toption.selected = true;\n\t\t} else {\n\t\t\tel.selectedIndex = -1;\n\t\t}\n\t},\n\tforEachOption = function (parent, fn) {\n\t\tvar child = parent.firstChild;\n\t\twhile (child) {\n\t\t\tif (child.nodeName === \"OPTION\") {\n\t\t\t\tfn(child);\n\t\t\t}\n\t\t\tif (child.nodeName === \"OPTGROUP\") {\n\t\t\t\tforEachOption(child, fn);\n\t\t\t}\n\t\t\tchild = child.nextSibling;\n\t\t}\n\t},\n\tcollectSelectedOptions = function (parent) {\n\t\tvar selectedValues = [];\n\t\tforEachOption(parent, function (option) {\n\t\t\tif (option.selected) {\n\t\t\t\tselectedValues.push(option.value);\n\t\t\t}\n\t\t});\n\t\treturn selectedValues;\n\t},\n\tmarkSelectedOptions = function (parent, values) {\n\t\tforEachOption(parent, function (option) {\n\t\t\toption.selected = values.indexOf(option.value) !== -1;\n\t\t});\n\t},\n\t// Create a handler, only once, that will set the child options any time\n\t// the select's value changes.\n\tsetChildOptionsOnChange = function(select, aEL){\n\t\tvar handler = canDomData_1_0_3_canDomData.get(select, \"attrSetChildOptions\");\n\t\tif(handler) {\n\t\t\treturn Function.prototype;\n\t\t}\n\t\thandler = function(){\n\t\t\tsetChildOptions(select, select.value);\n\t\t};\n\t\tcanDomData_1_0_3_canDomData.set(select, \"attrSetChildOptions\", handler);\n\t\taEL.call(select, \"change\", handler);\n\t\treturn function(rEL){\n\t\t\tcanDomData_1_0_3_canDomData.clean(select, \"attrSetChildOptions\");\n\t\t\trEL.call(select, \"change\", handler);\n\t\t};\n\t},\n\t// cache of rules already calculated by `attr.getRule`\n\tbehaviorRules = new Map(),\n\t// # isPropWritable\n\t// check if a property is writable on an element by finding its property descriptor\n\t// on the element or its prototype chain\n\tisPropWritable = function(el, prop) {\n\t\t   var desc = Object.getOwnPropertyDescriptor(el, prop);\n\n\t\t   if (desc) {\n\t\t\t\t   return desc.writable || desc.set;\n\t\t   } else {\n\t\t\t\t   var proto = Object.getPrototypeOf(el);\n\t\t\t\t   if (proto) {\n\t\t\t\t\t\t   return isPropWritable(proto, prop);\n\t\t\t\t   }\n\t\t   }\n\n\t\t   return false;\n\t},\n\t// # cacheRule\n\t// add a rule to the rules Map so it does not need to be calculated more than once\n\tcacheRule = function(el, attrOrPropName, rule) {\n\t\t   var rulesForElementType;\n\n\t\t   rulesForElementType = behaviorRules.get(el.prototype);\n\n\t\t   if (!rulesForElementType) {\n\t\t\t\t   rulesForElementType = {};\n\t\t\t\t   behaviorRules.set(el.constructor, rulesForElementType);\n\t\t   }\n\n\t\t   rulesForElementType[attrOrPropName] = rule;\n\n\t\t   return rule;\n\t};\n\nvar specialAttributes = {\n\tchecked: {\n\t\tget: function(){\n\t\t\treturn this.checked;\n\t\t},\n\t\tset: function(val){\n\t\t\t// - `set( truthy )` => TRUE\n\t\t\t// - `set( \"\" )`     => TRUE\n\t\t\t// - `set()`         => TRUE\n\t\t\t// - `set(undefined)` => false.\n\t\t\tvar notFalse = !!val || val === \"\" || arguments.length === 0;\n\t\t\tthis.checked = notFalse;\n\t\t\tif(notFalse && this.type === \"radio\") {\n\t\t\t\tthis.defaultChecked = true;\n\t\t\t}\n\t\t},\n\t\tremove: function(){\n\t\t\tthis.checked = false;\n\t\t},\n\t\ttest: function(){\n\t\t\treturn this.nodeName === \"INPUT\";\n\t\t}\n\t},\n\t\"class\": {\n\t\tget: function(){\n\t\t\tif(isSVG(this)) {\n\t\t\t\treturn this.getAttribute(\"class\");\n\t\t\t}\n\t\t\treturn this.className;\n\t\t},\n\t\tset: function(val){\n\t\t\tval = val || \"\";\n\n\t\t\tif(isSVG(this)) {\n\t\t\t\tcanDomMutate_2_0_9_node.setAttribute.call(this, \"class\", \"\" + val);\n\t\t\t} else {\n\t\t\t\tthis.className = val;\n\t\t\t}\n\t\t}\n\t},\n\tdisabled: booleanProp(\"disabled\"),\n\tfocused: {\n\t\tget: function(){\n\t\t\treturn this === document.activeElement;\n\t\t},\n\t\tset: function(val){\n\t\t\tvar cur = attr.get(this, \"focused\");\n\t\t\tvar docEl = this.ownerDocument.documentElement;\n\t\t\tvar element = this;\n\t\t\tfunction focusTask() {\n\t\t\t\tif (val) {\n\t\t\t\t\telement.focus();\n\t\t\t\t} else {\n\t\t\t\t\telement.blur();\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (cur !== val) {\n\t\t\t\tif (!docEl.contains(element)) {\n\t\t\t\t\tvar connectionDisposal = canDomMutate_2_0_9_canDomMutate.onNodeConnected(element, function () {\n\t\t\t\t\t\tconnectionDisposal();\n\t\t\t\t\t\tfocusTask();\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\t// THIS MIGHT NEED TO BE PUT IN THE MUTATE QUEUE\n\t\t\t\t\tcanQueues_1_3_2_canQueues.enqueueByQueue({\n\t\t\t\t\t\tmutate: [focusTask]\n\t\t\t\t\t}, null, []);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t},\n\t\taddEventListener: function(eventName, handler, aEL){\n\t\t\taEL.call(this, \"focus\", handler);\n\t\t\taEL.call(this, \"blur\", handler);\n\t\t\treturn function(rEL){\n\t\t\t\trEL.call(this, \"focus\", handler);\n\t\t\t\trEL.call(this, \"blur\", handler);\n\t\t\t};\n\t\t},\n\t\ttest: function(){\n\t\t\treturn this.nodeName === \"INPUT\";\n\t\t}\n\t},\n\t\"for\": propProp(\"htmlFor\"),\n\tinnertext: propProp(\"innerText\"),\n\tinnerhtml: propProp(\"innerHTML\"),\n\tinnerHTML: propProp(\"innerHTML\", {\n\t\taddEventListener: function(eventName, handler, aEL){\n\t\t\tvar handlers = [];\n\t\t\tvar el = this;\n\t\t\t[\"change\", \"blur\"].forEach(function(eventName){\n\t\t\t\tvar localHandler = function(){\n\t\t\t\t\thandler.apply(this, arguments);\n\t\t\t\t};\n\t\t\t\tcanDomEvents_1_3_13_canDomEvents.addEventListener(el, eventName, localHandler);\n\t\t\t\thandlers.push([eventName, localHandler]);\n\t\t\t});\n\n\t\t\treturn function(rEL){\n\t\t\t\thandlers.forEach( function(info){\n\t\t\t\t\trEL.call(el, info[0], info[1]);\n\t\t\t\t});\n\t\t\t};\n\t\t}\n\t}),\n\trequired: booleanProp(\"required\"),\n\treadonly: booleanProp(\"readOnly\"),\n\tselected: {\n\t\tget: function(){\n\t\t\treturn this.selected;\n\t\t},\n\t\tset: function(val){\n\t\t\tval = !!val;\n\t\t\tcanDomData_1_0_3_canDomData.set(this, \"lastSetValue\", val);\n\t\t\tthis.selected = val;\n\t\t},\n\t\taddEventListener: function(eventName, handler, aEL){\n\t\t\tvar option = this;\n\t\t\tvar select = this.parentNode;\n\t\t\tvar lastVal = option.selected;\n\t\t\tvar localHandler = function(changeEvent){\n\t\t\t\tvar curVal = option.selected;\n\t\t\t\tlastVal = canDomData_1_0_3_canDomData.get(option, \"lastSetValue\") || lastVal;\n\t\t\t\tif(curVal !== lastVal) {\n\t\t\t\t\tlastVal = curVal;\n\n\t\t\t\t\tcanDomEvents_1_3_13_canDomEvents.dispatch(option, eventName);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tvar removeChangeHandler = setChildOptionsOnChange(select, aEL);\n\t\t\tcanDomEvents_1_3_13_canDomEvents.addEventListener(select, \"change\", localHandler);\n\t\t\taEL.call(option, eventName, handler);\n\n\t\t\treturn function(rEL){\n\t\t\t\tremoveChangeHandler(rEL);\n\t\t\t\tcanDomEvents_1_3_13_canDomEvents.removeEventListener(select, \"change\", localHandler);\n\t\t\t\trEL.call(option, eventName, handler);\n\t\t\t};\n\t\t},\n\t\ttest: function(){\n\t\t\treturn this.nodeName === \"OPTION\" && this.parentNode &&\n\t\t\t\tthis.parentNode.nodeName === \"SELECT\";\n\t\t}\n\t},\n\tstyle: {\n\t\tset: (function () {\n\t\t\tvar el = global$1.document && document$1().createElement(\"div\");\n\t\t\tif ( el && el.style && (\"cssText\" in el.style) ) {\n\t\t\t\treturn function (val) {\n\t\t\t\t\tthis.style.cssText = (val || \"\");\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\treturn function (val) {\n\t\t\t\t\tcanDomMutate_2_0_9_node.setAttribute.call(this, \"style\", val);\n\t\t\t\t};\n\t\t\t}\n\t\t})()\n\t},\n\ttextcontent: propProp(\"textContent\"),\n\tvalue: {\n\t\tget: function(){\n\t\t\tvar value = this.value;\n\t\t\tif(this.nodeName === \"SELECT\") {\n\t\t\t\tif((\"selectedIndex\" in this) && this.selectedIndex === -1) {\n\t\t\t\t\tvalue = undefined;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn value;\n\t\t},\n\t\tset: function(value){\n\t\t\tvar providedValue = value;\n\t\t\tvar nodeName = this.nodeName.toLowerCase();\n\t\t\tif(nodeName === \"input\" || nodeName === \"textarea\") {\n\t\t\t\t// Do some input types support non string values?\n\t\t\t\tvalue = toString$1(value);\n\t\t\t}\n\t\t\tif(this.value !== value || nodeName === \"option\") {\n\t\t\t\tthis.value = value;\n\t\t\t}\n\t\t\tif (nodeName === \"input\" || nodeName === \"textarea\") {\n\t\t\t\tthis.defaultValue = value;\n\t\t\t}\n\t\t\tif(nodeName === \"select\") {\n\t\t\t\tcanDomData_1_0_3_canDomData.set(this, \"attrValueLastVal\", value);\n\t\t\t\t//If it's null then special case\n\t\t\t\tsetChildOptions(this, value === null ? value : this.value);\n\n\t\t\t\t// If not in the document reset the value when inserted.\n\t\t\t\tvar docEl = this.ownerDocument.documentElement;\n\t\t\t\tif(!docEl.contains(this)) {\n\t\t\t\t\tvar select = this;\n\t\t\t\t\tvar connectionDisposal = canDomMutate_2_0_9_canDomMutate.onNodeConnected(select, function () {\n\t\t\t\t\t\tconnectionDisposal();\n\t\t\t\t\t\tsetChildOptions(select, value === null ? value : select.value);\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\t// MO handler is only set up **ONCE**\n\t\t\t\tsetupMO(this, function(){\n\t\t\t\t\tvar value = canDomData_1_0_3_canDomData.get(this, \"attrValueLastVal\");\n\t\t\t\t\tattr.set(this, \"value\", value);\n\t\t\t\t\tcanDomEvents_1_3_13_canDomEvents.dispatch(this, \"change\");\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// Warnings area\n\t\t\t//!steal-remove-start\n\t\t\tif(process.env.NODE_ENV !== \"production\") {\n\t\t\t\tvar settingADateInputToADate = nodeName === \"input\" && this.type === \"date\" && (providedValue instanceof Date);\n\t\t\t\tif(settingADateInputToADate) {\n\t\t\t\t\tdev.warn(\"Binding a Date to the \\\"value\\\" property on an <input type=\\\"date\\\"> will not work as expected. Use valueAsDate:bind instead. See https://canjs.com/doc/guides/forms.html#Dateinput for more information.\");\n\t\t\t\t}\n\t\t\t}\n\t\t\t//!steal-remove-end\n\t\t},\n\t\ttest: function(){\n\t\t\treturn formElements[this.nodeName];\n\t\t}\n\t},\n\tvalues: {\n\t\tget: function(){\n\t\t\treturn collectSelectedOptions(this);\n\t\t},\n\t\tset: function(values){\n\t\t\tvalues = values || [];\n\n\t\t\t// set new DOM state\n\t\t\tmarkSelectedOptions(this, values);\n\n\t\t\t// store new DOM state\n\t\t\tcanDomData_1_0_3_canDomData.set(this, \"stickyValues\", attr.get(this,\"values\") );\n\n\t\t\t// MO handler is only set up **ONCE**\n\t\t\t// TODO: should this be moved into addEventListener?\n\t\t\tsetupMO(this, function(){\n\n\t\t\t\t// Get the previous sticky state\n\t\t\t\tvar previousValues = canDomData_1_0_3_canDomData.get(this,\n\t\t\t\t\t\"stickyValues\");\n\n\t\t\t\t// Set DOM to previous sticky state\n\t\t\t\tattr.set(this, \"values\", previousValues);\n\n\t\t\t\t// Get the new result after trying to maintain the sticky state\n\t\t\t\tvar currentValues = canDomData_1_0_3_canDomData.get(this,\n\t\t\t\t\t\"stickyValues\");\n\n\t\t\t\t// If there are changes, trigger a `values` event.\n\t\t\t\tvar changes = list(previousValues.slice().sort(),\n\t\t\t\t\tcurrentValues.slice().sort());\n\n\t\t\t\tif (changes.length) {\n\t\t\t\t\tcanDomEvents_1_3_13_canDomEvents.dispatch(this, \"values\");\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\taddEventListener: function(eventName, handler, aEL){\n\t\t\tvar localHandler = function(){\n\t\t\t\tcanDomEvents_1_3_13_canDomEvents.dispatch(this, \"values\");\n\t\t\t};\n\n\t\t\tcanDomEvents_1_3_13_canDomEvents.addEventListener(this, \"change\", localHandler);\n\t\t\taEL.call(this, eventName, handler);\n\n\t\t\treturn function(rEL){\n\t\t\t\tcanDomEvents_1_3_13_canDomEvents.removeEventListener(this, \"change\", localHandler);\n\t\t\t\trEL.call(this, eventName, handler);\n\t\t\t};\n\t\t}\n\t}\n};\n\nvar attr = {\n\t// cached rules (stored on `attr` for testing purposes)\n\trules: behaviorRules,\n\n\t// special attribute behaviors (stored on `attr` for testing purposes)\n\tspecialAttributes: specialAttributes,\n\n\t// # attr.getRule\n\t//\n\t// get the behavior rule for an attribute or property on an element\n\t//\n\t// Rule precendence:\n\t//   1. \"special\" behaviors - use the special behavior getter/setter\n\t//   2. writable properties - read and write as a property\n\t//   3. all others - read and write as an attribute\n\t//\n\t// Once rule is determined it will be cached for all elements of the same type\n\t// so that it does not need to be calculated again\n\tgetRule: function(el, attrOrPropName) {\n\t\tvar special = specialAttributes[attrOrPropName];\n\t\t// always use \"special\" if available\n\t\t// these are not cached since they would have to be cached separately\n\t\t// for each element type and it is faster to just look up in the\n\t\t// specialAttributes object\n\t\tif (special) {\n\t\t\treturn special;\n\t\t}\n\n\t\t// next use rules cached in a previous call to getRule\n\t\tvar rulesForElementType = behaviorRules.get(el.constructor);\n\t\tvar cached = rulesForElementType && rulesForElementType[attrOrPropName];\n\n\t\tif (cached) {\n\t\t\treturn cached;\n\t\t}\n\n\t\t// if the element doesn't have a property of this name, it must be an attribute\n\t\tif (!(attrOrPropName in el)) {\n\t\t\treturn this.attribute(attrOrPropName);\n\t\t}\n\n\t\t// if there is a property, check if it is writable\n\t\tvar newRule = isPropWritable(el, attrOrPropName) ?\n\t\t\tthis.property(attrOrPropName) :\n\t\t\tthis.attribute(attrOrPropName);\n\n\t\t// cache the new rule and return it\n\t\treturn cacheRule(el, attrOrPropName, newRule);\n\t},\n\n\tattribute: function(attrName) {\n\t\treturn {\n\t\t\tget: function() {\n\t\t\t\treturn this.getAttribute(attrName);\n\t\t\t},\n\t\t\tset: function(val) {\n\t\t\t\tif (attrsNamespacesURI[attrName]) {\n\t\t\t\t\tcanDomMutate_2_0_9_node.setAttributeNS.call(this, attrsNamespacesURI[attrName], attrName, val);\n\t\t\t\t} else {\n\t\t\t\t\tcanDomMutate_2_0_9_node.setAttribute.call(this, attrName, val);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t},\n\n\tproperty: function(propName) {\n\t\treturn {\n\t\t\tget: function() {\n\t\t\t\treturn this[propName];\n\t\t\t},\n\t\t\tset: function(val) {\n\t\t\t\tthis[propName] = val;\n\t\t\t}\n\t\t};\n\t},\n\n\tfindSpecialListener: function(attributeName) {\n\t\treturn specialAttributes[attributeName] && specialAttributes[attributeName].addEventListener;\n\t},\n\n\tsetAttrOrProp: function(el, attrName, val){\n\t\treturn this.set(el, attrName, val);\n\t},\n\t// ## attr.set\n\t// Set the value an attribute on an element.\n\tset: function (el, attrName, val) {\n\t\tvar rule = this.getRule(el, attrName);\n\t\tvar setter = rule && rule.set;\n\n\t\tif (setter) {\n\t\t\treturn setter.call(el, val);\n\t\t}\n\t},\n\t// ## attr.get\n\t// Gets the value of an attribute or property.\n\t// First checks if the property is an `specialAttributes` and if so calls the special getter.\n\t// Then checks if the attribute or property is a property on the element.\n\t// Otherwise uses `getAttribute` to retrieve the value.\n\tget: function (el, attrName) {\n\t\tvar rule = this.getRule(el, attrName);\n\t\tvar getter = rule && rule.get;\n\n\t\tif (getter) {\n\t\t\treturn rule.test ?\n\t\t\t\trule.test.call(el) && getter.call(el) :\n\t\t\t\tgetter.call(el);\n\t\t}\n\t},\n\t// ## attr.remove\n\t// Removes an attribute from an element. First checks specialAttributes to see if the attribute is special and has a setter. If so calls the setter with `undefined`. Otherwise `removeAttribute` is used.\n\t// If the attribute previously had a value and the browser doesn't support MutationObservers we then trigger an \"attributes\" event.\n\tremove: function (el, attrName) {\n\t\tattrName = attrName.toLowerCase();\n\t\tvar special = specialAttributes[attrName];\n\t\tvar setter = special && special.set;\n\t\tvar remover = special && special.remove;\n\t\tvar test = getSpecialTest(special);\n\n\t\tif(typeof remover === \"function\" && test.call(el)) {\n\t\t\tremover.call(el);\n\t\t} else if(typeof setter === \"function\" && test.call(el)) {\n\t\t\tsetter.call(el, undefined);\n\t\t} else {\n\t\t\tcanDomMutate_2_0_9_node.removeAttribute.call(el, attrName);\n\t\t}\n\t}\n};\n\nvar canAttributeObservable_2_0_2_behaviors = attr;\n\nvar setElementSymbol$2 = canSymbol_1_7_0_canSymbol.for(\"can.setElement\");\nvar elementSymbol = canSymbol_1_7_0_canSymbol.for(\"can.element\");\n\nfunction ListenUntilRemovedAndInitialize(\n\tobservable,\n\thandler,\n\tplaceholder,\n\tqueueName,\n\thandlerName\n) {\n\tthis.observable = observable;\n\tthis.handler = handler;\n\tthis.placeholder = placeholder;\n\tthis.queueName = queueName;\n\tthis.handler[elementSymbol] = placeholder;\n\n\tif( observable[setElementSymbol$2] ) {\n\t\tobservable[setElementSymbol$2](placeholder);\n\t} else {\n\t\tconsole.warn(\"no can.setElement symbol on observable\", observable);\n\t}\n\n\t//!steal-remove-start\n\tif(process.env.NODE_ENV !== 'production') {\n\t\t// register that the handler changes the parent element\n\t\tcanReflect_1_19_2_canReflect.assignSymbols(handler, {\n\t\t\t\"can.getChangesDependencyRecord\": function() {\n\t\t\t\tvar s = new Set();\n\t\t\t\ts.add(placeholder);\n\t\t\t\treturn {\n\t\t\t\t\tvalueDependencies: s\n\t\t\t\t};\n\t\t\t}\n\t\t});\n\n\t\tObject.defineProperty(handler, \"name\", {\n\t\t\tvalue: handlerName,\n\t\t});\n\n\t}\n\t//!steal-remove-end\n\n\tthis.setup();\n}\nListenUntilRemovedAndInitialize.prototype.setup = function() {\n\t// reinsertion case, not applicable during initial setup\n\tif(this.setupNodeReinserted) {\n\t\t// do not set up again if disconnected\n\t\tif(!canDomMutate_2_0_9_IsConnected.isConnected(this.placeholder)) {\n\t\t\treturn;\n\t\t}\n\t\tthis.setupNodeReinserted();\n\t}\n\tthis.teardownNodeRemoved = canDomMutate_2_0_9_canDomMutate.onNodeRemoved(this.placeholder,\n\t\tthis.teardown.bind(this));\n\n\n\t//!steal-remove-start\n\tif(process.env.NODE_ENV !== 'production') {\n\t\tcanReflectDependencies_1_1_2_canReflectDependencies.addMutatedBy(this.placeholder, this.observable);\n\t}\n\t//!steal-remove-end\n\n\tcanReflect_1_19_2_canReflect.onValue(this.observable, this.handler, this.queueName);\n\tthis.handler(  canReflect_1_19_2_canReflect.getValue(this.observable) );\n\n};\nListenUntilRemovedAndInitialize.prototype.teardown = function(){\n\t// do not teardown if still connected.\n\tif(canDomMutate_2_0_9_IsConnected.isConnected(this.placeholder)) {\n\t\treturn;\n\t}\n\tthis.teardownNodeRemoved();\n\tthis.setupNodeReinserted = canDomMutate_2_0_9_canDomMutate.onNodeInserted(this.placeholder,\n\t\tthis.setup.bind(this));\n\n\t//!steal-remove-start\n\tif(process.env.NODE_ENV !== 'production') {\n\t\tcanReflectDependencies_1_1_2_canReflectDependencies.deleteMutatedBy(this.placeholder, this.observable);\n\t}\n\t//!steal-remove-end\n\tcanReflect_1_19_2_canReflect.offValue(this.observable, this.handler, this.queueName);\n};\n\n\nvar helpers$2 = {\n\trange: {\n\t\tcreate: function(el, rangeName){\n\t\t\tvar start, end, next;\n\n\t\t\tif(el.nodeType === Node.COMMENT_NODE) {\n\t\t\t\tstart = el;\n\t\t\t\tnext = el.nextSibling;\n\t\t\t\tif(next && next.nodeType === Node.COMMENT_NODE && next.nodeValue === \"can-end-placeholder\") {\n\t\t\t\t\tend = next;\n\t\t\t\t\tend.nodeValue = \"/\" + (start.nodeValue = rangeName);\n\t\t\t\t} else {\n\t\t\t\t\tdev.warn(\"can-view-live: creating an end comment for \", rangeName, el);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tdev.warn(\"can-view-live: forcing a comment range for \", rangeName, el);\n\t\t\t\tstart = el.ownerDocument.createComment( rangeName );\n\t\t\t\tel.parentNode.replaceChild( start, el );\n\t\t\t}\n\n\t\t\tif(!end) {\n\t\t\t\tend = el.ownerDocument.createComment( \"/\" + rangeName );\n\t\t\t\tstart.parentNode.insertBefore(end, start.nextSibling);\n\t\t\t}\n\n\t\t\treturn {start: start, end: end};\n\t\t},\n\t\tremove: function ( range ) {\n\t\t\t// TODO: Ideally this would be able to remove from the end, but\n\t\t\t// dispatch in the right order.\n\t\t\t// For now, we might want to remove nodes in the right order.\n\t\t\tvar parentNode = range.start.parentNode,\n\t\t\t\tcur = range.end.previousSibling,\n\t\t\t\tremove;\n\t\t\twhile(cur && cur !== range.start) {\n\t\t\t\tremove = cur;\n\t\t\t\tcur = cur.previousSibling;\n\t\t\t\tcanDomMutate_2_0_9_node.removeChild.call(parentNode, remove );\n\t\t\t}\n\n\t\t\tcanDomMutate_2_0_9_canDomMutate.flushRecords();\n\t\t},\n\n\t\tupdate: function ( range, frag ) {\n\t\t\tvar parentNode = range.start.parentNode;\n\t\t\tif(parentNode) {\n\t\t\t\tcanDomMutate_2_0_9_node.insertBefore.call(parentNode, frag, range.end);\n\t\t\t\t// this makes it so `connected` events will be called immediately\n\t\t\t\tcanDomMutate_2_0_9_canDomMutate.flushRecords();\n\t\t\t}\n\t\t}\n\t},\n\tListenUntilRemovedAndInitialize: ListenUntilRemovedAndInitialize,\n\tgetAttributeParts: function(newVal) {\n\t\tvar attrs = {},\n\t\t\tattr;\n\t\tcanViewParser_4_1_3_canViewParser.parseAttrs(newVal, {\n\t\t\tattrStart: function(name) {\n\t\t\t\tattrs[name] = \"\";\n\t\t\t\tattr = name;\n\t\t\t},\n\t\t\tattrValue: function(value) {\n\t\t\t\tattrs[attr] += value;\n\t\t\t},\n\t\t\tattrEnd: function() {}\n\t\t});\n\t\treturn attrs;\n\t},\n\t// #### addTextNodeIfNoChildren\n\t// Append an empty text node to a parent with no children;\n\t//  do nothing if the parent already has children.\n\taddTextNodeIfNoChildren: function(frag) {\n\t\tif (!frag.firstChild) {\n\t\t\tfrag.appendChild(frag.ownerDocument.createTextNode(\"\"));\n\t\t}\n\t},\n\t// #### makeString\n\t// any -> string converter (including nullish)\n\tmakeString: function(txt) {\n\t\treturn txt == null ? \"\" : \"\" + txt;\n\t}\n};\n\n/**\n * @function can-view-live.attr attr\n * @parent can-view-live\n *\n * @signature `live.attr(el, attributeName, observable)`\n *\n * Keep an attribute live to a [can-reflect]-ed observable.\n *\n * ```js\n * var div = document.createElement('div');\n * var value = new SimpleObservable(\"foo bar\");\n * live.attr(div,\"class\", value);\n * ```\n *\n * @param {HTMLElement} el The element whos attribute will be kept live.\n * @param {String} attributeName The attribute name.\n * @param {Object} observable An observable value.\n *\n * @body\n *\n * ## How it works\n *\n * This listens for the changes in the observable and uses those changes to\n * set the specified attribute.\n */\nvar attr_1 = function(el, attributeName, compute) {\n\tvar handlerName = \"\";\n\t//!steal-remove-start\n\tif(process.env.NODE_ENV !== 'production') {\n\t\t// register that the handler changes the parent element\n\t\thandlerName = \"live.attr update::\"+canReflect_1_19_2_canReflect.getName(compute);\n\t}\n\t//!steal-remove-end\n\n\tnew helpers$2.ListenUntilRemovedAndInitialize(compute,\n\t\t\tfunction liveUpdateAttr(newVal) {\n\t\t\t\tcanAttributeObservable_2_0_2_behaviors.set(el,attributeName, newVal);\n\t\t\t},\n\t\t\tel,\n\t\t\t\"dom\",\n\t\t\thandlerName\n\t\t);\n};\n\n// This provides live binding for stache attributes.\n\n\n\n\n\n\nvar attrs = function(el, compute, scope, options) {\n\tvar handlerName = \"\";\n\tif (!canReflect_1_19_2_canReflect.isObservableLike(compute)) {\n\t\t// Non-live case (`compute` was not a compute):\n\t\t//  set all attributes on the element and don't\n\t\t//  worry about setting up live binding since there\n\t\t//  is not compute to bind on.\n\t\tvar attrs = helpers$2.getAttributeParts(compute);\n\t\tfor (var name in attrs) {\n\t\t\tcanDomMutate_2_0_9_node.setAttribute.call(el, name, attrs[name]);\n\t\t}\n\t\treturn;\n\t}\n\n\t//!steal-remove-start\n\tif(process.env.NODE_ENV !== 'production') {\n\t\thandlerName = \"live.attrs update::\"+canReflect_1_19_2_canReflect.getName(compute);\n\t}\n\t//!steal-remove-end\n\n\n\t// last set of attributes\n\tvar oldAttrs = {};\n\n\n\tnew helpers$2.ListenUntilRemovedAndInitialize(compute,\n\t\tfunction canViewLive_updateAttributes(newVal) {\n\t\t\tvar newAttrs = helpers$2.getAttributeParts(newVal),\n\t\t\t\tname;\n\t\t\tfor (name in newAttrs) {\n\t\t\t\tvar newValue = newAttrs[name],\n\t\t\t\t\t// `oldAttrs` was set on the last run of setAttrs in this context\n\t\t\t\t\t//  (for this element and compute)\n\t\t\t\t\toldValue = oldAttrs[name];\n\t\t\t\t// Only fire a callback\n\t\t\t\t//  if the value of the attribute has changed\n\t\t\t\tif (newValue !== oldValue) {\n\t\t\t\t\t// set on DOM attributes (dispatches an \"attributes\" event as well)\n\t\t\t\t\tcanDomMutate_2_0_9_node.setAttribute.call(el, name, newValue);\n\t\t\t\t\t// get registered callback for attribute name and fire\n\t\t\t\t\tvar callback = canViewCallbacks_5_0_0_canViewCallbacks.attr(name);\n\t\t\t\t\tif (callback) {\n\t\t\t\t\t\tcallback(el, {\n\t\t\t\t\t\t\tattributeName: name,\n\t\t\t\t\t\t\tscope: scope,\n\t\t\t\t\t\t\toptions: options\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// remove key found in new attrs from old attrs\n\t\t\t\tdelete oldAttrs[name];\n\t\t\t}\n\t\t\t// any attrs left at this point are not set on the element now,\n\t\t\t// so remove them.\n\t\t\tfor (name in oldAttrs) {\n\t\t\t\tcanDomMutate_2_0_9_node.removeAttribute.call(el, name);\n\t\t\t}\n\t\t\toldAttrs = newAttrs;\n\t\t},\n\t\tel,\n\t\t\"dom\",\n\t\thandlerName);\n\n};\n\nvar viewInsertSymbol = canSymbol_1_7_0_canSymbol.for(\"can.viewInsert\");\n\nfunction makeCommentFragment(comment) {\n\t\tvar doc = document$1();\n\t\treturn canFragment_1_3_1_canFragment([\n\t\t\tdoc.createComment(comment),\n\t\t\tdoc.createComment(\"can-end-placeholder\")\n\t\t]);\n}\n\n/**\n * @function can-view-live.html html\n * @parent can-view-live\n * @release 2.0.4\n *\n * Live binds a compute's value to a collection of elements.\n *\n * @signature `live.html(el, compute, [parentNode])`\n *\n * `live.html` is used to setup incremental live-binding on a block of html.\n *\n * ```js\n * // a compute that changes its list\n * var greeting = compute(function(){\n *   return \"Welcome <i>\"+me.attr(\"name\")+\"</i>\"\n * });\n *\n * var placeholder = document.createTextNode(\" \");\n * $(\"#greeting\").append(placeholder);\n *\n * live.html(placeholder, greeting);\n * ```\n *\n * @param {HTMLElement} el An html element to replace with the live-section.\n *\n * @param {can.compute} compute A [can.compute] whose value is HTML.\n *\n * @param {HTMLElement} [parentNode] An overwritable parentNode if `el`'s parent is\n * a documentFragment.\n *\n *\n */\nvar html = function(el, compute, viewInsertSymbolOptions) {\n\n\tvar observableName = \"\";\n\tvar updateRange = helpers$2.range.update;\n\n\t//!steal-remove-start\n\tif(process.env.NODE_ENV !== 'production') {\n\t\t// register that the handler changes the parent element\n\t\tupdateRange = helpers$2.range.update.bind(null);\n\t\tobservableName = canReflect_1_19_2_canReflect.getName(compute);\n\t\tObject.defineProperty(updateRange, \"name\", {\n\t\t\tvalue: \"live.html update::\"+observableName,\n\t\t});\n\t}\n\t//!steal-remove-end\n\n\tif (el.nodeType !== Node.COMMENT_NODE) {\n\t\tvar commentFrag = makeCommentFragment(observableName);\n\t\tvar startCommentNode = commentFrag.firstChild;\n\t\tel.parentNode.replaceChild(commentFrag, el);\n\t\tel = startCommentNode;\n\t}\n\n\t// replace element with a comment node\n\tvar range = helpers$2.range.create(el, observableName);\n\n\tvar useQueue = false;\n\tnew helpers$2.ListenUntilRemovedAndInitialize(compute,\n\t\tfunction canViewLive_updateHTML(val) {\n\n\t\t\t// If val has the can.viewInsert symbol, call it and get something usable for val back\n\t\t\tif (val && typeof val[viewInsertSymbol] === \"function\") {\n\t\t\t\tval = val[viewInsertSymbol](viewInsertSymbolOptions);\n\t\t\t}\n\n\t\t\tvar isFunction = typeof val === \"function\";\n\n\t\t\t// translate val into a document fragment if it's DOM-like\n\t\t\tvar frag = isFunction ?\n\t\t\t\tmakeCommentFragment(observableName) :\n\t\t\t\tcanFragment_1_3_1_canFragment(val);\n\n\t\t\tif(isFunction) {\n\t\t\t\tval(frag.firstChild);\n\t\t\t}\n\n\t\t\tif(useQueue === true) {\n\t\t\t\thelpers$2.range.remove(range);\n\t\t\t\tupdateRange(range, frag);\n\t\t\t} else {\n\t\t\t\thelpers$2.range.update(range, frag);\n\t\t\t\tuseQueue = true;\n\t\t\t}\n\t\t},\n\t\trange.start,\n\t\t\"dom\",\n\t\t\"live.html replace::\" + observableName);\n\n};\n\nvar onValueSymbol$3 = canSymbol_1_7_0_canSymbol.for(\"can.onValue\");\nvar offValueSymbol$1 = canSymbol_1_7_0_canSymbol.for(\"can.offValue\");\nvar onPatchesSymbol$1 = canSymbol_1_7_0_canSymbol.for(\"can.onPatches\");\nvar offPatchesSymbol = canSymbol_1_7_0_canSymbol.for(\"can.offPatches\");\n\n// Patcher takes a observable that might wrap a list type.\n// When the observable changes, it will diff, and emit patches,\n// and if the list emits patches, it will emit those too.\n// It is expected that only `domUI` handlers are registered.\n/*\nvar observable = new SimpleObservable( new DefineList([ \"a\", \"b\", \"c\" ]) )\nvar patcher = new Patcher(observable)\ncanReflect.onPatches( patcher,function(patches){\n  console.log(patches) // a patch removing c, then a\n})\nvar newList = new DefineList([\"a\",\"b\"]);\nobservable.set(newList);\nnewList.unshift(\"X\");\n[\n    {type: \"splice\", index: 2, deleteCount: 1}\n]\nvar patches2 = [\n    {type: \"splice\", index: 0, deleteCount: 0, inserted: [\"X\"]}\n]\n */\nvar Patcher = function(observableOrList, priority) {\n\t// stores listeners for this patcher\n\tthis.handlers = new canKeyTree_1_2_2_canKeyTree([Object, Array], {\n\t\t// call setup when the first handler is bound\n\t\tonFirst: this.setup.bind(this),\n\t\t// call teardown when the last handler is removed\n\t\tonEmpty: this.teardown.bind(this)\n\t});\n\n\t// save this value observable or patch emitter (list)\n\tthis.observableOrList = observableOrList;\n\t// if we were passed an observable value that we need to read its array for changes\n\tthis.isObservableValue = canReflect_1_19_2_canReflect.isValueLike(this.observableOrList) || canReflect_1_19_2_canReflect.isObservableLike(this.observableOrList);\n\tif(this.isObservableValue) {\n\t    this.priority = canReflect_1_19_2_canReflect.getPriority(observableOrList);\n\t} else {\n\t    this.priority = priority || 0;\n\t}\n\tthis.onList = this.onList.bind(this);\n\tthis.onPatchesNotify = this.onPatchesNotify.bind(this);\n\t// needs to be unique so the derive queue doesn't only add one.\n\tthis.onPatchesDerive = this.onPatchesDerive.bind(this);\n\n\t// stores patches that have happened between notification and\n\t// when we queue the  `onPatches` handlers in the `domUI` queue\n\tthis.patches = [];\n\n\n\t//!steal-remove-start\n\tif(process.env.NODE_ENV !== 'production') {\n\t\tObject.defineProperty(this.onList, \"name\", {\n\t\t\tvalue: \"live.list new list::\"+canReflect_1_19_2_canReflect.getName(observableOrList),\n\t\t});\n\t\tObject.defineProperty(this.onPatchesNotify, \"name\", {\n\t\t\tvalue: \"live.list notify::\"+canReflect_1_19_2_canReflect.getName(observableOrList),\n\t\t});\n\t\tObject.defineProperty(this.onPatchesDerive, \"name\", {\n\t\t\tvalue: \"live.list derive::\"+canReflect_1_19_2_canReflect.getName(observableOrList),\n\t\t});\n\t}\n\t//!steal-remove-end\n};\n\n\nPatcher.prototype = {\n\tconstructor: Patcher,\n\tsetup: function() {\n\t\tif (this.observableOrList[onValueSymbol$3]) {\n\t\t\t// if we have an observable value, listen to when it changes to get a\n\t\t\t// new list.\n\t\t\tcanReflect_1_19_2_canReflect.onValue(this.observableOrList, this.onList, \"notify\");\n\t\t\t// listen on the current value (which shoudl be a list) if there is one\n\t\t\tthis.setupList(canReflect_1_19_2_canReflect.getValue(this.observableOrList));\n\t\t} else {\n\t\t\tthis.setupList(this.observableOrList);\n\t\t}\n\t},\n\tteardown: function() {\n\t\tif (this.observableOrList[offValueSymbol$1]) {\n\t\t\tcanReflect_1_19_2_canReflect.offValue(this.observableOrList, this.onList, \"notify\");\n\t\t}\n\t\tif (this.currentList && this.currentList[offPatchesSymbol]) {\n\t\t\tthis.currentList[offPatchesSymbol](this.onPatchesNotify, \"notify\");\n\t\t}\n\t},\n\t// listen to the list for patches\n\tsetupList: function(list$$1) {\n\t\tthis.currentList = list$$1;\n\t\tif (list$$1 && list$$1[onPatchesSymbol$1]) {\n\t\t\t// If observable, set up bindings on list changes\n\t\t\tlist$$1[onPatchesSymbol$1](this.onPatchesNotify, \"notify\");\n\t\t}\n\t},\n\t// when the list changes, teardown the old list bindings\n\t// and setup the new list\n\tonList: function onList(newList) {\n\t\tvar current = this.currentList || [];\n\t\tnewList = newList || [];\n\t\tif (current[offPatchesSymbol]) {\n\t\t\tcurrent[offPatchesSymbol](this.onPatchesNotify, \"notify\");\n\t\t}\n\t\tvar patches = list(current, newList);\n\t\tthis.currentList = newList;\n\t\tthis.onPatchesNotify(patches);\n\t\tif (newList[onPatchesSymbol$1]) {\n\t\t\t// If observable, set up bindings on list changes\n\t\t\tnewList[onPatchesSymbol$1](this.onPatchesNotify, \"notify\");\n\t\t}\n\t},\n\t// This is when we get notified of patches on the underlying list.\n\t// Save the patches and queue up a `derive` task that will\n\t// call `domUI` updates.\n\tonPatchesNotify: function onPatchesNotify(patches) {\n\t\t// we are going to collect all patches\n\t\tthis.patches.push.apply(this.patches, patches);\n\t\t// TODO: share priority\n\t\tcanQueues_1_3_2_canQueues.deriveQueue.enqueue(this.onPatchesDerive, this, [], {\n\t\t\tpriority: this.priority\n\t\t});\n\t},\n\t// Let handlers (which should only be registered in `domUI`) know about patches\n\t// that they can apply.\n\tonPatchesDerive: function onPatchesDerive() {\n\t\tvar patches = this.patches;\n\t\tthis.patches = [];\n\t\tcanQueues_1_3_2_canQueues.enqueueByQueue(this.handlers.getNode([]), this.currentList, [patches, this.currentList], null,[\"Apply patches\", patches]);\n\t}\n};\n\ncanReflect_1_19_2_canReflect.assignSymbols(Patcher.prototype, {\n\t\"can.onPatches\": function(handler, queue) {\n\t\tthis.handlers.add([queue || \"mutate\", handler]);\n\t},\n\t\"can.offPatches\": function(handler, queue) {\n\t\tthis.handlers.delete([queue || \"mutate\", handler]);\n\t}\n});\n\nvar patcher = Patcher;\n\nvar patchSort = function(patches) {\n\t//!steal-remove-start\n\tif(process.env.NODE_ENV !== 'production') {\n\t\tvar deletes =[],\n\t\t\tinserts = [],\n\t\t\tmoves = [];\n\t\tpatches.forEach(function(patch){\n\t\t\tif (patch.type === \"move\") {\n\t\t\t\tmoves.push(patch);\n\t\t\t} else {\n\t\t\t\tif (patch.deleteCount) {\n\t\t\t\t\tdeletes.push(patch);\n\t\t\t\t}\n\t\t\t\tif (patch.insert && patch.insert.length) {\n\t\t\t\t\tinserts.push(inserts);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tif(deletes.length + inserts.length > 2) {\n\t\t\tconsole.error(\"unable to group patches\",patches);\n\t\t\tthrow new Error(\"unable to group patches\");\n\t\t}\n\t\tif(moves.length &&(deletes.length || inserts.length)) {\n\t\t\tconsole.error(\"unable to sort a move with a delete or insert\");\n\t\t\tthrow new Error(\"unable to sort a move with a delete or insert\");\n\t\t}\n\t}\n\t//!steal-remove-end\n\n\n\tvar splitPatches = [];\n\tpatches.forEach(function(patch){\n\t\tif (patch.type === \"move\") {\n\t\t\tsplitPatches.push( {patch: patch, kind: \"move\"} );\n\t\t} else {\n\t\t\tif (patch.deleteCount) {\n\t\t\t\tsplitPatches.push({\n\t\t\t\t\ttype: \"splice\",\n\t\t\t\t\tindex: patch.index,\n\t\t\t\t\tdeleteCount: patch.deleteCount,\n\t\t\t\t\tinsert: [],\n\t\t\t\t});\n\t\t\t}\n\t\t\tif (patch.insert && patch.insert.length) {\n\t\t\t\tsplitPatches.push({\n\t\t\t\t\ttype: \"splice\",\n\t\t\t\t\tindex: patch.index,\n\t\t\t\t\tdeleteCount: 0,\n\t\t\t\t\tinsert: patch.insert\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t});\n\tif(patches.length !== 2) {\n\t\treturn patches;\n\t}\n\tvar first = splitPatches[0],\n\t\tsecond = splitPatches[1];\n\t// if insert before a delete\n\tif(first.insert && first.insert.length && second.deleteCount) {\n\t\t// lets swap the order.\n\t\tvar insert = first,\n\t\t\tremove = second;\n\t\tif(insert.index < remove.index) {\n\t\t\tremove.index = remove.index - insert.insert.length;\n\t\t} else if(insert.index > remove.index) {\n\t\t\tinsert.index = insert.index - remove.deleteCount;\n\t\t} else {\n\t\t\tthrow \"indexes the same!\"\n\t\t}\n\t\treturn [remove, insert];\n\t}\n\treturn patches;\n};\n\nfunction SetObservable(initialValue, setter) {\n\tthis.setter = setter;\n\n\tcanSimpleObservable_2_5_0_canSimpleObservable.call(this, initialValue);\n}\n\nSetObservable.prototype = Object.create(canSimpleObservable_2_5_0_canSimpleObservable.prototype);\nSetObservable.prototype.constructor = SetObservable;\nSetObservable.prototype.set = function(newVal) {\n\tthis.setter(newVal);\n};\n\n\ncanReflect_1_19_2_canReflect.assignSymbols(SetObservable.prototype, {\n\t\"can.setValue\": SetObservable.prototype.set\n});\n\nvar setObservable = SetObservable;\n\nvar splice = [].splice;\n\n// #### renderAndAddRangeNode\n// a helper function that renders something and adds its nodeLists to newNodeLists\n// in the right way for stache.\nvar renderAndAddRangeNode = function(render, context, args, document) {\n\t\t// call the renderer, passing in the new nodeList as the last argument\n\t\tvar itemHTML = render.apply(context, args.concat()),\n\t\t\t// and put the output into a document fragment\n\t\t\titemFrag = canFragment_1_3_1_canFragment(itemHTML);\n\n\t\tvar rangeNode = document.createTextNode(\"\");\n\t\titemFrag.appendChild(rangeNode);\n\t\treturn itemFrag;\n\t};\n\n\nfunction getFrag(first, last){\n\tvar frag = first.ownerDocument.createDocumentFragment();\n\tvar current,\n\t\tlastInserted;\n\t// hopefully this doesn't dispatch removed?\n\twhile(last !== first) {\n\t\tcurrent = last;\n\t\tlast = current.previousSibling;\n\t\tfrag.insertBefore(current, lastInserted);\n\t\tlastInserted = current;\n\t}\n\tfrag.insertBefore(last, lastInserted);\n\treturn frag;\n}\n\nvar onPatchesSymbol$2 = canSymbol_1_7_0_canSymbol.for(\"can.onPatches\");\nvar offPatchesSymbol$1 = canSymbol_1_7_0_canSymbol.for(\"can.offPatches\");\n\nfunction ListDOMPatcher(el, compute, render, context, falseyRender) {\n\tthis.patcher = new patcher(compute);\n\tvar observableName = canReflect_1_19_2_canReflect.getName(compute);\n\n\t// argument cleanup\n\n\t// function callback binding\n\n\t// argument saving -----\n\tthis.value = compute;\n\tthis.render = render;\n\tthis.context = context;\n\tthis.falseyRender = falseyRender;\n\tthis.range = helpers$2.range.create(el, observableName);\n\n\t// A mapping of indices to observables holding that index.\n\tthis.indexMap = [];\n\t// A mapping of each item's end node\n\tthis.itemEndNode = [];\n\n\t// A mapping of each item to its pending patches.\n\tthis.domQueue = [];\n\n\tthis.isValueLike = canReflect_1_19_2_canReflect.isValueLike(this.value);\n\tthis.isObservableLike = canReflect_1_19_2_canReflect.isObservableLike(this.value);\n\n\t// Setup binding and teardown to add and remove events\n\tthis.onPatches = this.onPatches.bind(this);\n\tthis.processDomQueue = this.processDomQueue.bind(this);\n\tthis.teardownValueBinding = this.teardownValueBinding.bind(this);\n\n\tthis.meta = {reasonLog: \"live.html add::\"+observableName, element: this.range.start};\n\n\t//!steal-remove-start\n\tif(process.env.NODE_ENV !== 'production') {\n\t\tObject.defineProperty(this.onPatches, \"name\", {\n\t\t\tvalue: \"live.list update::\"+canReflect_1_19_2_canReflect.getName(compute),\n\t\t});\n\t}\n\t//!steal-remove-end\n\n\tthis.setupValueBinding();\n}\n\nvar onPatchesSymbol$2 = canSymbol_1_7_0_canSymbol.for(\"can.onPatches\");\nvar offPatchesSymbol$1 = canSymbol_1_7_0_canSymbol.for(\"can.offPatches\");\n\nListDOMPatcher.prototype = {\n\tsetupValueBinding: function() {\n\t\t// Teardown when the placeholder element is removed.\n\t\tthis.teardownNodeRemoved = canDomMutate_2_0_9_canDomMutate.onNodeRemoved(this.range.start, this.teardownValueBinding);\n\n\t\t// Listen to when the patcher produces patches.\n\t\tthis.patcher[onPatchesSymbol$2](this.onPatches, \"notify\");\n\n\t\t// Initialize with the patcher's value\n\t\tif (this.patcher.currentList && this.patcher.currentList.length) {\n\t\t\tthis.add(this.patcher.currentList, 0);\n\t\t} else {\n\t\t\tthis.addFalseyIfEmpty();\n\t\t}\n\t\t//!steal-remove-start\n\t\tif(process.env.NODE_ENV !== 'production') {\n\t\t\tcanReflectDependencies_1_1_2_canReflectDependencies.addMutatedBy(this.range.start, this.patcher.observableOrList);\n\t\t}\n\t\t//!steal-remove-end\n\t},\n\tteardownValueBinding: function() {\n\n\t\tthis.exit = true;\n\t\t// Stop listening for teardowns\n\t\tthis.teardownNodeRemoved();\n\t\tthis.patcher[offPatchesSymbol$1](this.onPatches, \"notify\");\n\t\t// Todo: I bet this is no longer necessary?\n\t\t//this.remove({\n\t\t//\tlength: this.patcher.currentList ? this.patcher.currentList.length : 0\n\t\t//}, 0, true);\n\t\t//!steal-remove-start\n\t\tif(process.env.NODE_ENV !== 'production') {\n\t\t\tcanReflectDependencies_1_1_2_canReflectDependencies.deleteMutatedBy(this.range.start, this.patcher.observableOrList);\n\t\t}\n\t\t//!steal-remove-end\n\t},\n\tonPatches: function ListDOMPatcher_onPatches(patches) {\n\t\tif (this.exit) {\n\t\t\treturn;\n\t\t}\n\t\tvar sortedPatches = [];\n\t\tpatches.forEach(function(patch) {\n\t\t\tsortedPatches.push.apply(sortedPatches, patchSort([patch]));\n\t\t});\n\n\t\t// adjust so things can happen\n\t\tfor (var i = 0, patchLen = sortedPatches.length; i < patchLen; i++) {\n\t\t\tvar patch = sortedPatches[i];\n\t\t\tif (patch.type === \"move\") {\n\t\t\t\tthis.addToDomQueue(\n\t\t\t\t\tthis.move,\n\t\t\t\t\t[patch.toIndex, patch.fromIndex]\n\t\t\t\t);\n\t\t\t} else if (patch.type === \"splice\") {\n\t\t\t\tif (patch.deleteCount) {\n\t\t\t\t\t// Remove any items scheduled for deletion from the patch.\n\t\t\t\t\tthis.addToDomQueue(this.remove, [{\n\t\t\t\t\t\tlength: patch.deleteCount\n\t\t\t\t\t}, patch.index]);\n\t\t\t\t}\n\t\t\t\tif (patch.insert && patch.insert.length) {\n\t\t\t\t\t// Insert any new items at the index\n\t\t\t\t\tthis.addToDomQueue(this.add, [patch.insert, patch.index]);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// all other patch types are ignored\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t}\n\t},\n\taddToDomQueue: function(fn, args) {\n\t\tthis.domQueue.push({\n\t\t\tfn: fn,\n\t\t\targs: args\n\t\t});\n\t\tcanQueues_1_3_2_canQueues.domQueue.enqueue(this.processDomQueue, this, [this.domQueue], this.meta);\n\t},\n\tprocessDomQueue: function() {\n\t\tthis.domQueue.forEach(function(queueItem) {\n\t\t\tvar fn = queueItem.fn;\n\t\t\tvar args = queueItem.args;\n\t\t\tfn.apply(this, args);\n\t\t}.bind(this));\n\t\tthis.domQueue = [];\n\t},\n\tadd: function(items, index) {\n\t\t//if (!afterPreviousEvents) {\n\t\t//\treturn;\n\t\t//}\n\t\t// Collect new html and mappings\n\t\tvar ownerDocument = this.range.start.ownerDocument,\n\t\t\tfrag = ownerDocument.createDocumentFragment(),\n\t\t\tnewEndNodes = [],\n\t\t\tnewIndicies = [],\n\t\t\trender = this.render,\n\t\t\tcontext = this.context;\n\t\t// For each new item,\n\t\titems.forEach( function(item, key) {\n\n\t\t\tvar itemIndex = new canSimpleObservable_2_5_0_canSimpleObservable(key + index),\n\t\t\t\titemCompute = new setObservable(item, function(newVal) {\n\t\t\t\t\tcanReflect_1_19_2_canReflect.setKeyValue(this.patcher.currentList, itemIndex.get(), newVal );\n\t\t\t\t}.bind(this)),\n\t\t\t\titemFrag = renderAndAddRangeNode(render, context, [itemCompute, itemIndex], ownerDocument);\n\n\t\t\tnewEndNodes.push(itemFrag.lastChild);\n\t\t\t// Hookup the fragment (which sets up child live-bindings) and\n\t\t\t// add it to the collection of all added elements.\n\t\t\tfrag.appendChild(itemFrag);\n\t\t\t// track indicies;\n\t\t\tnewIndicies.push(itemIndex);\n\t\t}, this);\n\t\t// The position of elements is always after the initial text placeholder node\n\n\t\t// TODO: this should probably happen earlier.\n\t\t// remove falsey if there's something there\n\t\tif (!this.indexMap.length) {\n\t\t\t// remove all leftover things\n\t\t\thelpers$2.range.remove(this.range);\n\t\t\tthis.itemEndNode = [];\n\t\t}\n\t\t// figure out where we are placing things.\n\t\tvar placeholder,\n\t\t\tendNodesLength = this.itemEndNode.length;\n\t\tif(index === endNodesLength ) {\n\t\t\tplaceholder = this.range.end;\n\t\t} else if(index === 0) {\n\t\t\tplaceholder = this.range.start.nextSibling;\n\t\t} else if(index < endNodesLength) {\n\t\t\tplaceholder = this.itemEndNode[index - 1].nextSibling;\n\t\t} else {\n\t\t\tthrow new Error(\"Unable to place item\");\n\t\t}\n\n\t\tcanDomMutate_2_0_9_node.insertBefore.call(placeholder.parentNode,frag,placeholder);\n\n\t\tsplice.apply(this.itemEndNode, [\n\t\t\tindex,\n\t\t\t0\n\t\t].concat(newEndNodes));\n\n\t\t// update indices after insert point\n\t\tsplice.apply(this.indexMap, [\n\t\t\tindex,\n\t\t\t0\n\t\t].concat(newIndicies));\n\n\t\tfor (var i = index + newIndicies.length, len = this.indexMap.length; i < len; i++) {\n\t\t\tthis.indexMap[i].set(i);\n\t\t}\n\t},\n\tremove: function(items, index) {\n\t\t//if (!afterPreviousEvents) {\n\t\t//\treturn;\n\t\t//}\n\n\t\t// If this is because an element was removed, we should\n\t\t// check to make sure the live elements are still in the page.\n\t\t// If we did this during a teardown, it would cause an infinite loop.\n\t\t//if (!duringTeardown && this.data.teardownCheck(this.placeholder.parentNode)) {\n\t\t//\treturn;\n\t\t//}\n\t\tif (index < 0) {\n\t\t\tindex = this.indexMap.length + index;\n\t\t}\n\t\tvar removeStart;\n\t\tvar removeEnd;\n\t\tvar removeCount = items.length;\n\t\tvar endIndex = index + removeCount - 1;\n\t\tif(index === 0) {\n\t\t\tremoveStart = this.range.start;\n\t\t} else {\n\t\t\tremoveStart = this.itemEndNode[index - 1];\n\t\t}\n\t\tremoveEnd = this.itemEndNode[endIndex].nextSibling;\n\n\t\tthis.itemEndNode.splice(index, items.length);\n\n\t\tif (removeStart && removeEnd) {\n\t\t\thelpers$2.range.remove({start: removeStart, end: removeEnd});\n\t\t}\n\n\t\tvar indexMap = this.indexMap;\n\n\t\t// update indices after remove point\n\t\tindexMap.splice(index, items.length);\n\t\tfor (var i = index, len = indexMap.length; i < len; i++) {\n\t\t\tindexMap[i].set(i);\n\t\t}\n\n\t\t// don't remove elements during teardown.  Something else will probably be doing that.\n\t\tif (!this.exit) {\n\t\t\t// adds the falsey section if the list is empty\n\t\t\tthis.addFalseyIfEmpty();\n\t\t} else {\n\t\t\t// This probably isn't needed anymore as element removal will be propagated\n\t\t\t// nodeLists.unregister(this.masterNodeList);\n\t\t}\n\t},\n\t// #### addFalseyIfEmpty\n\t// Add the results of redering the \"falsey\" or inverse case render to the\n\t// master nodeList and the DOM if the live list is empty\n\taddFalseyIfEmpty: function() {\n\t\tif (this.falseyRender && this.indexMap.length === 0) {\n\t\t\t// If there are no items ... we should render the falsey template\n\t\t\tvar falseyFrag = renderAndAddRangeNode(this.falseyRender, this.currentList, [this.currentList], this.range.start.ownerDocument);\n\t\t\thelpers$2.range.update(this.range, falseyFrag);\n\t\t}\n\t},\n\tmove: function move(newIndex, currentIndex) {\n\t\t//if (!afterPreviousEvents) {\n\t\t//\treturn;\n\t\t//}\n\t\t// The position of elements is always after the initial text\n\t\t// placeholder node\n\n\n\t\tvar currentFirstNode,\n\t\t\tcurrentEndNode = this.itemEndNode[currentIndex];\n\t\tif( currentIndex > 0 ) {\n\t\t\tcurrentFirstNode = this.itemEndNode[currentIndex - 1].nextSibling;\n\t\t} else {\n\t\t\tcurrentFirstNode = this.range.start.nextSibling;\n\t\t}\n\t\tvar newIndexFirstNode;\n\t\tif (currentIndex < newIndex) {\n\t\t\t// we need to advance one spot, because removing at\n\t\t\t// current index will shift everything left\n\t\t\tnewIndexFirstNode = this.itemEndNode[newIndex].nextSibling;\n\t\t} else {\n\t\t\tif( newIndex > 0 ) {\n\t\t\t\tnewIndexFirstNode = this.itemEndNode[newIndex - 1].nextSibling;\n\t\t\t} else {\n\t\t\t\tnewIndexFirstNode = this.range.start.nextSibling;\n\t\t\t}\n\t\t}\n\t\t// need to put this at the newIndex\n\n\n\n\t\tvar frag = getFrag(currentFirstNode, currentEndNode);\n\t\tnewIndexFirstNode.parentNode.insertBefore(frag, newIndexFirstNode);\n\n\t\t// update endNodes\n\t\tthis.itemEndNode.splice(currentIndex, 1);\n\t\tthis.itemEndNode.splice(newIndex, 0,currentEndNode);\n\n\n\t\t// Update indexMap\n\t\tnewIndex = newIndex + 1;\n\t\tcurrentIndex = currentIndex + 1;\n\n\t\tvar indexMap = this.indexMap;\n\n\t\t// Convert back to a zero-based array index\n\t\tnewIndex = newIndex - 1;\n\t\tcurrentIndex = currentIndex - 1;\n\n\t\t// Grab the index compute from the `indexMap`\n\t\tvar indexCompute = indexMap[currentIndex];\n\n\t\t// Remove the index compute from the `indexMap`\n\t\t[].splice.apply(indexMap, [currentIndex, 1]);\n\n\t\t// Move the index compute to the correct index in the `indexMap`\n\t\t[].splice.apply(indexMap, [newIndex, 0, indexCompute]);\n\n\t\tvar i = Math.min(currentIndex, newIndex);\n\t\tvar len = indexMap.length;\n\n\t\tfor (len; i < len; i++) {\n\t\t\t// set each compute to have its current index in the map as its value\n\t\t\tindexMap[i].set(i);\n\t\t}\n\t}\n};\n\n\n\n/**\n * @function can-view-live.list list\n * @parent can-view-live\n * @release 2.0.4\n *\n * @signature `live.list(el, list, render, context)`\n *\n * Live binds a compute's list incrementally.\n *\n * ```js\n * // a compute that change's it's list\n * var todos = compute(function(){\n *   return new Todo.List({page: can.route.attr(\"page\")})\n * })\n *\n * var placeholder = document.createTextNode(\" \");\n * $(\"ul#todos\").append(placeholder);\n *\n * can.view.live.list(\n *   placeholder,\n *   todos,\n *   function(todo, index){\n *     return \"<li>\"+todo.attr(\"name\")+\"</li>\"\n *   });\n * ```\n *\n * @param {HTMLElement} el An html element to replace with the live-section.\n *\n * @param {Object} list An observable value or list type. If an observable value, it should contain\n * a falsey value or a list type.\n *\n * @param {function(this:*,*,index):String} render(index, index) A function that when called with\n * the incremental item to render and the index of the item in the list.\n *\n * @param {Object} context The `this` the `render` function will be called with.\n *\n * @body\n *\n * ## How it works\n *\n * If `list` is an observable value, `live.list` listens to changes in in that\n * observable value.  It will generally change from one list type (often a list type that implements `onPatches`)\n * to another.  When the value changes, a diff will be performed and the DOM updated.  Also, `live.list`\n * will listen to `.onPatches` on the new list and apply any patches emitted from it.\n *\n *\n */\nvar list$1 = function(el, list, render, context, falseyRender) {\n\tnew ListDOMPatcher(el, list, render, context, falseyRender);\n};\n\n/**\n * @function can-view-live.text text\n * @parent can-view-live\n * @release 2.0.4\n *\n * @signature `live.text(el, compute)`\n *\n * Replaces one element with some content while keeping [can-view-live.nodeLists nodeLists] data correct.\n */\nvar text = function(el, compute) {\n\tvar handlerName = \"\";\n\n\t//!steal-remove-start\n\tif(process.env.NODE_ENV !== 'production') {\n\t\tif(arguments.length > 2) {\n\t\t\t// TODO: remove\n\t\t\tthrow new Error(\"too many arguments\");\n\n\t\t}\n\t\thandlerName = \"live.text update::\"+canReflect_1_19_2_canReflect.getName(compute);\n\t}\n\t//!steal-remove-end\n\n\t// TODO: we can remove this at some point\n\tif (el.nodeType !== Node.TEXT_NODE) {\n\t\tvar textNode;\n\n\t\ttextNode = document.createTextNode(\"\");\n\t\tel.parentNode.replaceChild(textNode, el);\n\t\tel = textNode;\n\n\t}\n\n\tnew helpers$2.ListenUntilRemovedAndInitialize(compute, function liveTextUpdateTextNode(newVal) {\n\t\tel.nodeValue = helpers$2.makeString(newVal);\n\t},\n\tel,\n\t\"dom\", // TODO: should this still be domUI?\n\thandlerName);\n};\n\n/**\t\n * @module {{}} can-view-live can-view-live\t\n * @parent can-views\t\n * @collection can-infrastructure\t\n * @package ./package.json\t\n *\t\n * Setup live-binding between the DOM and a compute manually.\t\n *\t\n * @option {Object} An object with the live-binding methods:\t\n * [can-view-live.html], [can-view-live.list], [can-view-live.text], and\t\n * [can-view-live.attr].\t\n *\n *\t\n * @body\t\n *\t\n * ## Use\t\n *\t\n *  [can-view-live] is an object with utility methods for setting up\t\n *  live-binding in relation to different parts of the DOM and DOM elements.  For\t\n *  example, to make an `<h2>`'s text stay live with\t\n *  a compute:\t\n *\t\n *  ```js\t\n *  var live = require(\"can-view-live\");\t\n *  var text = canCompute(\"Hello World\");\t\n *  var textNode = $(\"h2\").text(\" \")[0].childNodes[0];\t\n *  live.text(textNode, text);\t\n *  ```\t\n *\t\n */\nvar live = {};\nlive.attr = attr_1;\nlive.attrs = attrs;\nlive.html = html;\nlive.list = list$1;\nlive.text = text;\n\n\nvar canViewLive_5_0_5_canViewLive = live;\n\nvar noop = function(){};\n\nvar TextSectionBuilder = function(filename){\n\tif (filename) {\n\t\tthis.filename = filename;\n\t}\n\tthis.stack = [new TextSection()];\n};\n\ncanAssign_1_3_3_canAssign(TextSectionBuilder.prototype,utils$1.mixins);\n\ncanAssign_1_3_3_canAssign(TextSectionBuilder.prototype,{\n\t// Adds a subsection.\n\tstartSection: function(process){\n\t\tvar subSection = new TextSection();\n\t\tthis.last().add({process: process, truthy: subSection});\n\t\tthis.stack.push(subSection);\n\t},\n\tendSection: function(){\n\t\tthis.stack.pop();\n\t},\n\tinverse: function(){\n\t\tthis.stack.pop();\n\t\tvar falseySection = new TextSection();\n\t\tthis.last().last().falsey = falseySection;\n\t\tthis.stack.push(falseySection);\n\t},\n\tcompile: function(state){\n\n\t\tvar renderer = this.stack[0].compile();\n\t\t//!steal-remove-start\n\t\tif (process.env.NODE_ENV !== 'production') {\n\t\t\tObject.defineProperty(renderer,\"name\",{\n\t\t\t\tvalue: \"textSectionRenderer<\"+state.tag+\".\"+state.attr+\">\"\n\t\t\t});\n\t\t}\n\t\t//!steal-remove-end\n\n\t\treturn function(scope){\n\t\t\tfunction textSectionRender(){\n\t\t\t\treturn renderer(scope);\n\t\t\t}\n\t\t\t//!steal-remove-start\n\t\t\tif (process.env.NODE_ENV !== 'production') {\n\t\t\t\tObject.defineProperty(textSectionRender,\"name\",{\n\t\t\t\t\tvalue: \"textSectionRender<\"+state.tag+\".\"+state.attr+\">\"\n\t\t\t\t});\n\t\t\t}\n\t\t\t//!steal-remove-end\n\t\t\tvar observation = new canObservation_4_2_0_canObservation(textSectionRender, null, {isObservable: false});\n\n\t\t\tcanReflect_1_19_2_canReflect.onValue(observation, noop);\n\n\t\t\tvar value = canReflect_1_19_2_canReflect.getValue(observation);\n\t\t\tif( canReflect_1_19_2_canReflect.valueHasDependencies( observation ) ) {\n\t\t\t\tif(state.textContentOnly) {\n\t\t\t\t\tcanViewLive_5_0_5_canViewLive.text(this, observation);\n\t\t\t\t}\n\t\t\t\telse if(state.attr) {\n\t\t\t\t\tcanViewLive_5_0_5_canViewLive.attr(this, state.attr, observation);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tcanViewLive_5_0_5_canViewLive.attrs(this, observation, scope);\n\t\t\t\t}\n\t\t\t\tcanReflect_1_19_2_canReflect.offValue(observation, noop);\n\t\t\t} else {\n\t\t\t\tif(state.textContentOnly) {\n\t\t\t\t\tthis.nodeValue = value;\n\t\t\t\t}\n\t\t\t\telse if(state.attr) {\n\t\t\t\t\tcanDomMutate_2_0_9_node.setAttribute.call(this, state.attr, value);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tcanViewLive_5_0_5_canViewLive.attrs(this, value);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}\n});\n\nvar passTruthyFalsey = function(process, truthy, falsey){\n\treturn function(scope){\n\t\treturn process.call(this, scope, truthy, falsey);\n\t};\n};\n\nvar TextSection = function(){\n\tthis.values = [];\n};\n\ncanAssign_1_3_3_canAssign( TextSection.prototype, {\n\tadd: function(data){\n\t\tthis.values.push(data);\n\t},\n\tlast: function(){\n\t\treturn this.values[this.values.length - 1];\n\t},\n\tcompile: function(){\n\t\tvar values = this.values,\n\t\t\tlen = values.length;\n\n\t\tfor(var i = 0 ; i < len; i++) {\n\t\t\tvar value = this.values[i];\n\t\t\tif(typeof value === \"object\") {\n\t\t\t\tvalues[i] = passTruthyFalsey( value.process,\n\t\t\t\t    value.truthy && value.truthy.compile(),\n\t\t\t\t    value.falsey && value.falsey.compile());\n\t\t\t}\n\t\t}\n\n\t\treturn function(scope){\n\t\t\tvar txt = \"\",\n\t\t\t\tvalue;\n\t\t\tfor(var i = 0; i < len; i++){\n\t\t\t\tvalue = values[i];\n\t\t\t\ttxt += typeof value === \"string\" ? value : value.call(this, scope);\n\t\t\t}\n\t\t\treturn txt;\n\t\t};\n\t}\n});\n\nvar text_section = TextSectionBuilder;\n\n// ### Arg\n// `new Arg(Expression [,modifierOptions] )`\n// Used to identify an expression that should return a value.\nvar Arg = function(expression, modifiers){\n\tthis.expr = expression;\n\tthis.modifiers = modifiers || {};\n\tthis.isCompute = false;\n};\nArg.prototype.value = function(){\n\treturn this.expr.value.apply(this.expr, arguments);\n};\n//!steal-remove-start\nif (process.env.NODE_ENV !== 'production') {\n\tArg.prototype.sourceText = function(){\n\t\treturn (this.modifiers.compute ? \"~\" : \"\")+ this.expr.sourceText();\n\t};\n}\n//!steal-remove-end\n\nvar arg = Arg;\n\n// ### Literal\n// For inline static values like `{{\"Hello World\"}}`\nvar Literal = function(value){\n\tthis._value = value;\n};\nLiteral.prototype.value = function(){\n\treturn this._value;\n};\n//!steal-remove-start\nif (process.env.NODE_ENV !== 'production') {\n\tLiteral.prototype.sourceText = function(){\n\t\treturn JSON.stringify(this._value);\n\t};\n}\n//!steal-remove-end\n\nvar literal = Literal;\n\n// ## Helpers\n\nfunction getObservableValue_fromDynamicKey_fromObservable(key, root, helperOptions, readOptions) {\n\t// This needs to return something similar to a ScopeKeyData with intialValue and parentHasKey\n\tvar getKeys = function(){\n\t\treturn canStacheKey_1_4_3_canStacheKey.reads((\"\" + canReflect_1_19_2_canReflect.getValue(key)).replace(/\\./g, \"\\\\.\"));\n\t};\n\tvar parentHasKey;\n\tvar computeValue = new setter(function getDynamicKey() {\n\t\tvar readData = canStacheKey_1_4_3_canStacheKey.read( canReflect_1_19_2_canReflect.getValue(root) , getKeys());\n\t\tparentHasKey = readData.parentHasKey;\n\t\treturn readData.value;\n\t}, function setDynamicKey(newVal){\n\t\tcanStacheKey_1_4_3_canStacheKey.write(canReflect_1_19_2_canReflect.getValue(root), getKeys(), newVal);\n\t});\n\t// This prevents lazy evalutaion\n\tcanObservation_4_2_0_canObservation.temporarilyBind(computeValue);\n\n\t// peek so no observable that might call getObservableValue_fromDynamicKey_fromObservable will re-evaluate if computeValue changes.\n\tcomputeValue.initialValue = canObservationRecorder_1_3_1_canObservationRecorder.peekValue(computeValue);\n\tcomputeValue.parentHasKey = parentHasKey;\n\t// Todo:\n\t// 1. We should warn here if `initialValue` is undefined.  We can expose the warning function\n\t//    in can-view-scope and call it here.\n\t// 2. We should make this lazy if possible.  We can do that by making getter/setters for\n\t//    initialValue and parentHasKey (and possibly @@can.valueHasDependencies)\n\treturn computeValue;\n}\n\n// If not a Literal or an Arg, convert to an arg for caching.\nfunction convertToArgExpression(expr) {\n\tif(!(expr instanceof arg) && !(expr instanceof literal)) {\n\t\treturn new arg(expr);\n\t} else {\n\t\treturn expr;\n\t}\n}\n\nfunction toComputeOrValue(value) {\n\t// convert to non observable value\n\tif(canReflect_1_19_2_canReflect.isObservableLike(value)) {\n\t\t// we only want to do this for things that `should` have dependencies, but dont.\n\t\tif(canReflect_1_19_2_canReflect.isValueLike(value) && canReflect_1_19_2_canReflect.valueHasDependencies(value) === false) {\n\t\t\treturn canReflect_1_19_2_canReflect.getValue(value);\n\t\t}\n\t\t// if compute data\n\t\tif(value.compute) {\n\t\t\treturn value.compute;\n\t\t} else {\n\t\t\treturn canViewScope_4_13_7_makeComputeLike(value);\n\t\t}\n\t}\n\treturn value;\n}\n\n// try to make it a compute no matter what.  This is useful for\n// ~ operator.\nfunction toCompute(value) {\n\tif(value) {\n\n\t\tif(value.isComputed) {\n\t\t\treturn value;\n\t\t}\n\t\tif(value.compute) {\n\t\t\treturn value.compute;\n\t\t} else {\n\t\t\treturn canViewScope_4_13_7_makeComputeLike(value);\n\t\t}\n\t}\n\treturn value;\n}\n\nvar expressionHelpers = {\n\tgetObservableValue_fromDynamicKey_fromObservable: getObservableValue_fromDynamicKey_fromObservable,\n\tconvertToArgExpression: convertToArgExpression,\n\ttoComputeOrValue: toComputeOrValue,\n\ttoCompute: toCompute\n};\n\nvar Hashes = function(hashes){\n\tthis.hashExprs = hashes;\n};\nHashes.prototype.value = function(scope, helperOptions){\n\tvar hash = {};\n\tfor(var prop in this.hashExprs) {\n\t\tvar val = expressionHelpers.convertToArgExpression(this.hashExprs[prop]),\n\t\t\tvalue = val.value.apply(val, arguments);\n\n\t\thash[prop] = {\n\t\t\tcall: !val.modifiers || !val.modifiers.compute,\n\t\t\tvalue: value\n\t\t};\n\t}\n\treturn new canObservation_4_2_0_canObservation(function(){\n\t\tvar finalHash = {};\n\t\tfor(var prop in hash) {\n\t\t\tfinalHash[prop] = hash[prop].call ? canReflect_1_19_2_canReflect.getValue( hash[prop].value ) : expressionHelpers.toComputeOrValue( hash[prop].value );\n\t\t}\n\t\treturn finalHash;\n\t});\n};\n//!steal-remove-start\nif (process.env.NODE_ENV !== 'production') {\n\tHashes.prototype.sourceText = function(){\n\t\tvar hashes = [];\n\t\tcanReflect_1_19_2_canReflect.eachKey(this.hashExprs, function(expr, prop){\n\t\t\thashes.push( prop+\"=\"+expr.sourceText() );\n\t\t});\n\t\treturn hashes.join(\" \");\n\t};\n}\n//!steal-remove-end\n\nvar hashes = Hashes;\n\n//!steal-remove-start\nif (process.env.NODE_ENV !== 'production') {\n\tvar canSymbol = canSymbol_1_7_0_canSymbol;\n}\n//!steal-remove-end\n\n\n// ### Bracket\n// For accessing properties using bracket notation like `foo[bar]`\nvar Bracket = function (key, root, originalKey) {\n\tthis.root = root;\n\tthis.key = key;\n\t//!steal-remove-start\n\tif (process.env.NODE_ENV !== 'production') {\n\t\tthis[canSymbol.for(\"can-stache.originalKey\")] = originalKey;\n\t}\n\t//!steal-remove-end\n};\nBracket.prototype.value = function (scope, helpers) {\n\tvar root = this.root ? this.root.value(scope, helpers) : scope.peek(\"this\");\n\treturn expressionHelpers.getObservableValue_fromDynamicKey_fromObservable(this.key.value(scope, helpers), root, scope, helpers, {});\n};\n//!steal-remove-start\nif (process.env.NODE_ENV !== 'production') {\n\tBracket.prototype.sourceText = function(){\n\t\tif(this.rootExpr) {\n\t\t\treturn this.rootExpr.sourceText()+\"[\"+this.key+\"]\";\n\t\t} else {\n\t\t\treturn \"[\"+this.key+\"]\";\n\t\t}\n\t};\n}\n//!steal-remove-end\n\nBracket.prototype.closingTag = function() {\n\t//!steal-remove-start\n\tif (process.env.NODE_ENV !== 'production') {\n\t\treturn this[canSymbol.for('can-stache.originalKey')] || '';\n\t}\n\t//!steal-remove-end\n};\n\nvar bracket = Bracket;\n\nvar setIdentifier = function SetIdentifier(value){\n\tthis.value = value;\n};\n\nvar sourceTextSymbol = canSymbol_1_7_0_canSymbol.for(\"can-stache.sourceText\");\nvar isViewSymbol$1 = canSymbol_1_7_0_canSymbol.for(\"can.isView\");\n\n\n\n// ### Call\n// `new Call( new Lookup(\"method\"), [new ScopeExpr(\"name\")], {})`\n// A call expression like `method(arg1, arg2)` that, by default,\n// calls `method` with non compute values.\nvar Call = function(methodExpression, argExpressions){\n\tthis.methodExpr = methodExpression;\n\tthis.argExprs = argExpressions.map(expressionHelpers.convertToArgExpression);\n};\nCall.prototype.args = function(scope, ignoreArgLookup) {\n\tvar hashExprs = {};\n\tvar args = [];\n\tvar gotIgnoreFunction = typeof ignoreArgLookup === \"function\";\n\n\tfor (var i = 0, len = this.argExprs.length; i < len; i++) {\n\t\tvar arg = this.argExprs[i];\n\t\tif(arg.expr instanceof hashes){\n\t\t\tcanAssign_1_3_3_canAssign(hashExprs, arg.expr.hashExprs);\n\t\t}\n\t\tif (!gotIgnoreFunction || !ignoreArgLookup(i)) {\n\t\t\tvar value = arg.value.apply(arg, arguments);\n\t\t\targs.push({\n\t\t\t\t// always do getValue unless compute is false\n\t\t\t\tcall: !arg.modifiers || !arg.modifiers.compute,\n\t\t\t\tvalue: value\n\t\t\t});\n\t\t}\n\t}\n\treturn function(doNotWrapArguments){\n\t\tvar finalArgs = [];\n\t\tif(canReflect_1_19_2_canReflect.size(hashExprs) > 0){\n\t\t\tfinalArgs.hashExprs = hashExprs;\n\t\t}\n\t\tfor(var i = 0, len = args.length; i < len; i++) {\n\t\t\tif (doNotWrapArguments) {\n\t\t\t\tfinalArgs[i] = args[i].value;\n\t\t\t} else {\n\t\t\t\tfinalArgs[i] = args[i].call ?\n\t\t\t\t\tcanReflect_1_19_2_canReflect.getValue( args[i].value ) :\n\t\t\t\t\texpressionHelpers.toCompute( args[i].value );\n\t\t\t}\n\t\t}\n\t\treturn finalArgs;\n\t};\n};\n\nCall.prototype.value = function(scope, helperOptions){\n\tvar callExpression = this;\n\n\t// proxyMethods must be false so that the `requiresOptionsArgument` and any\n\t// other flags stored on the function are preserved\n\tvar method = this.methodExpr.value(scope, { proxyMethods: false });\n\tcanObservation_4_2_0_canObservation.temporarilyBind(method);\n\tvar func = canReflect_1_19_2_canReflect.getValue( method );\n\n\tvar getArgs = callExpression.args(scope , func && func.ignoreArgLookup);\n\n\tvar computeFn = function(newVal){\n\t\tvar func = canReflect_1_19_2_canReflect.getValue( method );\n\t\tif(typeof func === \"function\") {\n\t\t\tif (canReflect_1_19_2_canReflect.isObservableLike(func)) {\n\t\t\t\tfunc = canReflect_1_19_2_canReflect.getValue(func);\n\t\t\t}\n\t\t\tvar args = getArgs(\n\t\t\t\tfunc.isLiveBound\n\t\t\t);\n\n\t\t\tif (func.requiresOptionsArgument) {\n\t\t\t\tif(args.hashExprs && helperOptions && helperOptions.exprData){\n\t\t\t\t\thelperOptions.exprData.hashExprs = args.hashExprs;\n\t\t\t\t}\n\t\t\t\t// For #581\n\t\t\t\tif(helperOptions !== undefined) {\n\t\t\t\t\targs.push(helperOptions);\n\t\t\t\t}\n\t\t\t}\n\t\t\t// we are calling a view!\n\t\t\tif(func[isViewSymbol$1] === true) {\n\t\t\t\t// if not a scope, we should create a scope that\n\t\t\t\t// includes the template scope\n\t\t\t\tif(!(args[0] instanceof canViewScope_4_13_7_canViewScope)){\n\t\t\t\t\targs[0] = scope.getTemplateContext().add(args[0]);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(arguments.length) {\n\t\t\t\targs.unshift(new setIdentifier(newVal));\n\t\t\t}\n\n\t\t\t// if this is a call like `foo.bar()` the method.thisArg will be set to `foo`\n\t\t\t// for a call like `foo()`, method.thisArg will not be set and we will default\n\t\t\t// to setting the scope as the context of the function\n\t\t\treturn func.apply(method.thisArg || scope.peek(\"this\"), args);\n\t\t}\n\t};\n\t//!steal-remove-start\n\tif (process.env.NODE_ENV !== 'production') {\n\t\tObject.defineProperty(computeFn, \"name\", {\n\t\t\tvalue: \"{{\" + this.sourceText() + \"}}\"\n\t\t});\n\t}\n\t//!steal-remove-end\n\n\tif (helperOptions && helperOptions.doNotWrapInObservation) {\n\t\treturn computeFn();\n\t} else {\n\t\tvar computeValue = new setter(computeFn, computeFn);\n\n\t\treturn computeValue;\n\t}\n};\n//!steal-remove-start\nif (process.env.NODE_ENV !== 'production') {\n\tCall.prototype.sourceText = function(){\n\t\tvar args = this.argExprs.map(function(arg){\n\t\t\treturn arg.sourceText();\n\t\t});\n\t\treturn this.methodExpr.sourceText()+\"(\"+args.join(\",\")+\")\";\n\t};\n}\n//!steal-remove-end\nCall.prototype.closingTag = function() {\n\t//!steal-remove-start\n\tif (process.env.NODE_ENV !== 'production') {\n\t\tif(this.methodExpr[sourceTextSymbol]) {\n\t\t\treturn this.methodExpr[sourceTextSymbol];\n\t\t}\n\t}\n\t//!steal-remove-end\n\treturn this.methodExpr.key;\n};\n\nvar call$1 = Call;\n\nvar Helper = function(methodExpression, argExpressions, hashExpressions){\n\tthis.methodExpr = methodExpression;\n\tthis.argExprs = argExpressions;\n\tthis.hashExprs = hashExpressions;\n\tthis.mode = null;\n};\nHelper.prototype.args = function(scope){\n\tvar args = [];\n\tfor(var i = 0, len = this.argExprs.length; i < len; i++) {\n\t\tvar arg = this.argExprs[i];\n\t\t// TODO: once we know the helper, we should be able to avoid compute conversion\n\t\targs.push( expressionHelpers.toComputeOrValue( arg.value.apply(arg, arguments) ) );\n\t}\n\treturn args;\n};\nHelper.prototype.hash = function(scope){\n\tvar hash = {};\n\tfor(var prop in this.hashExprs) {\n\t\tvar val = this.hashExprs[prop];\n\t\t// TODO: once we know the helper, we should be able to avoid compute conversion\n\t\thash[prop] = expressionHelpers.toComputeOrValue( val.value.apply(val, arguments) );\n\t}\n\treturn hash;\n};\n\nHelper.prototype.value = function(scope, helperOptions){\n\t// If a literal, this means it should be treated as a key. But helpers work this way for some reason.\n\t// TODO: fix parsing so numbers will also be assumed to be keys.\n\tvar methodKey = this.methodExpr instanceof literal ?\n\t\t\"\" + this.methodExpr._value :\n\t\tthis.methodExpr.key,\n\t\thelperInstance = this,\n\t\t// proxyMethods must be false so that the `requiresOptionsArgument` and any\n\t\t// other flags stored on the function are preserved\n\t\thelperFn = scope.computeData(methodKey,  { proxyMethods: false }),\n\t\tinitialValue = helperFn && helperFn.initialValue,\n\t\tthisArg = helperFn && helperFn.thisArg;\n\n\tif (typeof initialValue === \"function\") {\n\t\thelperFn = function helperFn() {\n\t\t\tvar args = helperInstance.args(scope),\n\t\t\t\thelperOptionArg = canAssign_1_3_3_canAssign(canAssign_1_3_3_canAssign({}, helperOptions), {\n\t\t\t\t\thash: helperInstance.hash(scope),\n\t\t\t\t\texprData: helperInstance\n\t\t\t\t});\n\n\t\t\targs.push(helperOptionArg);\n\n\t\t\treturn initialValue.apply(thisArg || scope.peek(\"this\"), args);\n\t\t};\n\t\t//!steal-remove-start\n\t\tif (process.env.NODE_ENV !== 'production') {\n\t\t\tObject.defineProperty(helperFn, \"name\", {\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: canReflect_1_19_2_canReflect.getName(this)\n\t\t\t});\n\t\t}\n\t\t//!steal-remove-end\n\t}\n\t//!steal-remove-start\n\telse if (process.env.NODE_ENV !== 'production') {\n\t\tvar filename = scope.peek('scope.filename');\n\t\t\tvar lineNumber = scope.peek('scope.lineNumber');\n\t\t\tdev.warn(\n\t\t\t\t(filename ? filename + ':' : '') +\n\t\t\t\t(lineNumber ? lineNumber + ': ' : '') +\n\t\t\t\t'Unable to find helper \"' + methodKey + '\".');\n\t}\n\t//!steal-remove-end\n\n\treturn  helperFn;\n};\n\nHelper.prototype.closingTag = function() {\n\treturn this.methodExpr.key;\n};\n\n//!steal-remove-start\nif (process.env.NODE_ENV !== 'production') {\n\tHelper.prototype.sourceText = function(){\n\t\tvar text = [this.methodExpr.sourceText()];\n\t\tif(this.argExprs.length) {\n\t\t\ttext.push( this.argExprs.map(function(arg){\n\t\t\t\treturn arg.sourceText();\n\t\t\t}).join(\" \") );\n\t\t}\n\t\tif(canReflect_1_19_2_canReflect.size(this.hashExprs) > 0){\n\t\t\ttext.push( hashes.prototype.sourceText.call(this) );\n\t\t}\n\t\treturn text.join(\" \");\n\t};\n\n\tcanReflect_1_19_2_canReflect.assignSymbols(Helper.prototype,{\n\t\t\"can.getName\": function() {\n\t\t\treturn canReflect_1_19_2_canReflect.getName(this.constructor) + \"{{\" + (this.sourceText()) + \"}}\";\n\t\t}\n\t});\n}\n//!steal-remove-end\n\nvar helper = Helper;\n\nvar sourceTextSymbol$1 = canSymbol_1_7_0_canSymbol.for(\"can-stache.sourceText\");\n\n\n// ### Lookup\n// `new Lookup(String, [Expression])`\n// Finds a value in the scope or a helper.\nvar Lookup = function(key, root, sourceText) {\n\tthis.key = key;\n\tthis.rootExpr = root;\n\tcanReflect_1_19_2_canReflect.setKeyValue(this, sourceTextSymbol$1, sourceText);\n};\nLookup.prototype.value = function(scope, readOptions){\n\tif (this.rootExpr) {\n\t\treturn expressionHelpers.getObservableValue_fromDynamicKey_fromObservable(this.key, this.rootExpr.value(scope), scope, {}, {});\n\t} else {\n\t\treturn scope.computeData(this.key, canAssign_1_3_3_canAssign({\n\t\t\twarnOnMissingKey: true\n\t\t},readOptions));\n\t}\n};\n//!steal-remove-start\nif (process.env.NODE_ENV !== 'production') {\n\tLookup.prototype.sourceText = function(){\n\t\tif(this[sourceTextSymbol$1]) {\n\t\t\treturn this[sourceTextSymbol$1];\n\t\t} else if(this.rootExpr) {\n\t\t\treturn this.rootExpr.sourceText()+\".\"+this.key;\n\t\t} else {\n\t\t\treturn this.key;\n\t\t}\n\t};\n}\n//!steal-remove-end\n\nvar lookup = Lookup;\n\n// ## Expression Types\n//\n// These expression types return a value. They are assembled by `expression.parse`.\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar last$1 = utils$1.last;\n\n\n\nvar sourceTextSymbol$2 = canSymbol_1_7_0_canSymbol.for(\"can-stache.sourceText\");\n\n// ### Hash\n// A placeholder. This isn't actually used.\nvar Hash = function(){ }; // jshint ignore:line\n\n// NAME - \\w\n// KEY - foo, foo.bar, foo@bar, %foo (special), &foo (references), ../foo, ./foo\n// ARG - ~KEY, KEY, CALLEXPRESSION, PRIMITIVE\n// CALLEXPRESSION = KEY(ARG,ARG, NAME=ARG)\n// HELPEREXPRESSION = KEY ARG ARG NAME=ARG\n// DOT .NAME\n// AT @NAME\n//\nvar keyRegExp = /[\\w\\.\\\\\\-_@\\/\\&%]+/,\n\ttokensRegExp = /('.*?'|\".*?\"|=|[\\w\\.\\\\\\-_@\\/*%\\$]+|[\\(\\)]|,|\\~|\\[|\\]\\s*|\\s*(?=\\[))/g,\n\tbracketSpaceRegExp = /\\]\\s+/,\n\tliteralRegExp = /^('.*?'|\".*?\"|-?[0-9]+\\.?[0-9]*|true|false|null|undefined)$/;\n\nvar isTokenKey = function(token){\n\treturn keyRegExp.test(token);\n};\n\nvar testDot = /^[\\.@]\\w/;\nvar isAddingToExpression = function(token) {\n\n\treturn isTokenKey(token) && testDot.test(token);\n};\n\nvar ensureChildren = function(type) {\n\tif(!type.children) {\n\t\ttype.children = [];\n\t}\n\treturn type;\n};\n\nvar Stack = function(){\n\n\tthis.root = {children: [], type: \"Root\"};\n\tthis.current = this.root;\n\tthis.stack = [this.root];\n};\ncanAssign_1_3_3_canAssign(Stack.prototype,{\n\ttop: function(){\n\t\treturn last$1(this.stack);\n\t},\n\tisRootTop: function(){\n\t\treturn this.top() === this.root;\n\t},\n\tpopTo: function(types){\n\t\tthis.popUntil(types);\n\t\tthis.pop();\n\t},\n\tpop: function() {\n\t\tif(!this.isRootTop()) {\n\t\t\tthis.stack.pop();\n\t\t}\n\t},\n\tfirst: function(types){\n\t\tvar curIndex = this.stack.length - 1;\n\t\twhile( curIndex > 0 && types.indexOf(this.stack[curIndex].type) === -1 ) {\n\t\t\tcurIndex--;\n\t\t}\n\t\treturn this.stack[curIndex];\n\t},\n\tfirstParent: function(types){\n\t\tvar curIndex = this.stack.length - 2;\n\t\twhile( curIndex > 0 && types.indexOf(this.stack[curIndex].type) === -1 ) {\n\t\t\tcurIndex--;\n\t\t}\n\t\treturn this.stack[curIndex];\n\t},\n\tpopUntil: function(types){\n\t\twhile( types.indexOf(this.top().type) === -1 && !this.isRootTop() ) {\n\t\t\tthis.stack.pop();\n\t\t}\n\t\treturn this.top();\n\t},\n\taddTo: function(types, type){\n\t\tvar cur = this.popUntil(types);\n\t\tensureChildren(cur).children.push(type);\n\t},\n\taddToAndPush: function(types, type){\n\t\tthis.addTo(types, type);\n\t\tthis.stack.push(type);\n\t},\n\tpush: function(type) {\n\t\tthis.stack.push(type);\n\t},\n\ttopLastChild: function(){\n\t\treturn last$1(this.top().children);\n\t},\n\treplaceTopLastChild: function(type){\n\t\tvar children = ensureChildren(this.top()).children;\n\t\tchildren.pop();\n\t\tchildren.push(type);\n\t\treturn type;\n\t},\n\treplaceTopLastChildAndPush: function(type) {\n\t\tthis.replaceTopLastChild(type);\n\t\tthis.stack.push(type);\n\t},\n\treplaceTopAndPush: function(type){\n\t\tvar children;\n\t\tif(this.top() === this.root) {\n\t\t\tchildren = ensureChildren(this.top()).children;\n\t\t} else {\n\t\t\tthis.stack.pop();\n\t\t\t// get parent and clean\n\t\t\tchildren = ensureChildren(this.top()).children;\n\t\t}\n\n\t\tchildren.pop();\n\t\tchildren.push(type);\n\t\tthis.stack.push(type);\n\t\treturn type;\n\t}\n});\n\n// converts\n// - \"../foo\" -> \"../@foo\",\n// - \"foo\" -> \"@foo\",\n// - \".foo\" -> \"@foo\",\n// - \"./foo\" -> \"./@foo\"\n// - \"foo.bar\" -> \"foo@bar\"\nvar convertKeyToLookup = function(key){\n\tvar lastPath = key.lastIndexOf(\"./\");\n\tvar lastDot = key.lastIndexOf(\".\");\n\tif(lastDot > lastPath) {\n\t\treturn key.substr(0, lastDot)+\"@\"+key.substr(lastDot+1);\n\t}\n\tvar firstNonPathCharIndex = lastPath === -1 ? 0 : lastPath+2;\n\tvar firstNonPathChar = key.charAt(firstNonPathCharIndex);\n\tif(firstNonPathChar === \".\" || firstNonPathChar === \"@\" ) {\n\t\treturn key.substr(0, firstNonPathCharIndex)+\"@\"+key.substr(firstNonPathCharIndex+1);\n\t} else {\n\t\treturn key.substr(0, firstNonPathCharIndex)+\"@\"+key.substr(firstNonPathCharIndex);\n\t}\n};\nvar convertToAtLookup = function(ast){\n\tif(ast.type === \"Lookup\") {\n\t\tcanReflect_1_19_2_canReflect.setKeyValue(ast, sourceTextSymbol$2, ast.key);\n\t\tast.key = convertKeyToLookup(ast.key);\n\t}\n\treturn ast;\n};\n\nvar convertToHelperIfTopIsLookup = function(stack){\n\tvar top = stack.top();\n\t// if two scopes, that means a helper\n\tif(top && top.type === \"Lookup\") {\n\n\t\tvar base = stack.stack[stack.stack.length - 2];\n\t\t// That lookup shouldn't be part of a Helper already or\n\t\tif(base.type !== \"Helper\" && base) {\n\t\t\tstack.replaceTopAndPush({\n\t\t\t\ttype: \"Helper\",\n\t\t\t\tmethod: top\n\t\t\t});\n\t\t}\n\t}\n};\n\nvar expression = {\n\ttoComputeOrValue: expressionHelpers.toComputeOrValue,\n\tconvertKeyToLookup: convertKeyToLookup,\n\n\tLiteral: literal,\n\tLookup: lookup,\n\tArg: arg,\n\tHash: Hash,\n\tHashes: hashes,\n\tCall: call$1,\n\tHelper: helper,\n\tBracket: bracket,\n\n\tSetIdentifier: setIdentifier,\n\ttokenize: function(expression){\n\t\tvar tokens = [];\n\t\t(expression.trim() + ' ').replace(tokensRegExp, function (whole, arg$$1) {\n\t\t\tif (bracketSpaceRegExp.test(arg$$1)) {\n\t\t\t\ttokens.push(arg$$1[0]);\n\t\t\t\ttokens.push(arg$$1.slice(1));\n\t\t\t} else {\n\t\t\t\ttokens.push(arg$$1);\n\t\t\t}\n\t\t});\n\t\treturn tokens;\n\t},\n\tlookupRules: {\n\t\t\"default\": function(ast, methodType, isArg){\n\t\t\treturn ast.type === \"Helper\" ? helper : lookup;\n\t\t},\n\t\t\"method\": function(ast, methodType, isArg){\n\t\t\treturn lookup;\n\t\t}\n\t},\n\tmethodRules: {\n\t\t\"default\": function(ast){\n\t\t\treturn ast.type === \"Call\" ? call$1 : helper;\n\t\t},\n\t\t\"call\": function(ast){\n\t\t\treturn call$1;\n\t\t}\n\t},\n\t// ## expression.parse\n\t//\n\t// - {String} expressionString - A stache expression like \"abc foo()\"\n\t// - {Object} options\n\t//   - baseMethodType - Treat this like a Helper or Call.  Default to \"Helper\"\n\t//   - lookupRule - \"default\" or \"method\"\n\t//   - methodRule - \"default\" or \"call\"\n\tparse: function(expressionString, options){\n\t\toptions =  options || {};\n\t\tvar ast = this.ast(expressionString);\n\n\t\tif(!options.lookupRule) {\n\t\t\toptions.lookupRule = \"default\";\n\t\t}\n\t\tif(typeof options.lookupRule === \"string\") {\n\t\t\toptions.lookupRule = expression.lookupRules[options.lookupRule];\n\t\t}\n\t\tif(!options.methodRule) {\n\t\t\toptions.methodRule = \"default\";\n\t\t}\n\t\tif(typeof options.methodRule === \"string\") {\n\t\t\toptions.methodRule = expression.methodRules[options.methodRule];\n\t\t}\n\n\t\tvar expr = this.hydrateAst(ast, options, options.baseMethodType || \"Helper\");\n\n\t\treturn expr;\n\t},\n\thydrateAst: function(ast, options, methodType, isArg){\n\t\tvar hashes$$1;\n\t\tif(ast.type === \"Lookup\") {\n\t\t\tvar LookupRule = options.lookupRule(ast, methodType, isArg);\n\t\t\tvar lookup$$1 = new LookupRule(ast.key, ast.root && this.hydrateAst(ast.root, options, methodType), ast[sourceTextSymbol$2] );\n\t\t\treturn lookup$$1;\n\t\t}\n\t\telse if(ast.type === \"Literal\") {\n\t\t\treturn new literal(ast.value);\n\t\t}\n\t\telse if(ast.type === \"Arg\") {\n\t\t\treturn new arg(this.hydrateAst(ast.children[0], options, methodType, isArg),{compute: true});\n\t\t}\n\t\telse if(ast.type === \"Hash\") {\n\t\t\tthrow new Error(\"\");\n\t\t}\n\t\telse if(ast.type === \"Hashes\") {\n\t\t\thashes$$1 = {};\n\t\t\tast.children.forEach(function(hash){\n\t\t\t\thashes$$1[hash.prop] = this.hydrateAst( hash.children[0], options, methodType, true );\n\t\t\t}, this);\n\t\t\treturn new hashes(hashes$$1);\n\t\t}\n\t\telse if(ast.type === \"Call\" || ast.type === \"Helper\") {\n\t\t\t//get all arguments and hashes\n\t\t\thashes$$1 = {};\n\t\t\tvar args = [],\n\t\t\t\tchildren = ast.children,\n\t\t\t\tExpressionType = options.methodRule(ast);\n\t\t\tif(children) {\n\t\t\t\tfor(var i = 0 ; i <children.length; i++) {\n\t\t\t\t\tvar child = children[i];\n\t\t\t\t\tif(child.type === \"Hashes\" && ast.type === \"Helper\" &&\n\t\t\t\t\t\t(ExpressionType !== call$1)) {\n\n\t\t\t\t\t\tchild.children.forEach(function(hash){\n\t\t\t\t\t\t\thashes$$1[hash.prop] = this.hydrateAst( hash.children[0], options, ast.type, true );\n\t\t\t\t\t\t}, this);\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\targs.push( this.hydrateAst(child, options, ast.type, true) );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\n\t\t\treturn new ExpressionType(this.hydrateAst(ast.method, options, ast.type),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\targs, hashes$$1);\n\t\t} else if (ast.type === \"Bracket\") {\n\t\t\tvar originalKey;\n\t\t\t//!steal-remove-start\n\t\t\tif (process.env.NODE_ENV !== 'production') {\n\t\t\t\toriginalKey = ast[canSymbol_1_7_0_canSymbol.for(\"can-stache.originalKey\")];\n\t\t\t}\n\t\t\t//!steal-remove-end\n\t\t\treturn new bracket(\n\t\t\t\tthis.hydrateAst(ast.children[0], options),\n\t\t\t\tast.root ? this.hydrateAst(ast.root, options) : undefined,\n\t\t\t\toriginalKey\n\t\t\t);\n\t\t}\n\t},\n\tast: function(expression){\n\t\tvar tokens = this.tokenize(expression);\n\t\treturn this.parseAst(tokens, {\n\t\t\tindex: 0\n\t\t});\n\t},\n\tparseAst: function(tokens, cursor) {\n\t\t// jshint maxdepth: 6\n\t\tvar stack = new Stack(),\n\t\t\ttop,\n\t\t\tfirstParent,\n\t\t\tlastToken;\n\n\t\twhile(cursor.index < tokens.length) {\n\t\t\tvar token = tokens[cursor.index],\n\t\t\t\tnextToken = tokens[cursor.index+1];\n\n\t\t\tcursor.index++;\n\n\t\t\t// Hash\n\t\t\tif(nextToken === \"=\") {\n\t\t\t\t//convertToHelperIfTopIsLookup(stack);\n\t\t\t\ttop = stack.top();\n\n\t\t\t\t// If top is a Lookup, we might need to convert to a helper.\n\t\t\t\tif(top && top.type === \"Lookup\") {\n\t\t\t\t\t// Check if current Lookup is part of a Call, Helper, or Hash\n\t\t\t\t\t// If it happens to be first within a Call or Root, that means\n\t\t\t\t\t// this is helper syntax.\n\t\t\t\t\tfirstParent = stack.firstParent([\"Call\",\"Helper\",\"Hash\"]);\n\t\t\t\t\tif(firstParent.type === \"Call\" || firstParent.type === \"Root\") {\n\n\t\t\t\t\t\tstack.popUntil([\"Call\"]);\n\t\t\t\t\t\ttop = stack.top();\n\t\t\t\t\t\tstack.replaceTopAndPush({\n\t\t\t\t\t\t\ttype: \"Helper\",\n\t\t\t\t\t\t\tmethod: top.type === \"Root\" ? last$1(top.children) : top\n\t\t\t\t\t\t});\n\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfirstParent = stack.first([\"Call\",\"Helper\",\"Hashes\",\"Root\"]);\n\t\t\t\t// makes sure we are adding to Hashes if there already is one\n\t\t\t\t// otherwise we create one.\n\t\t\t\tvar hash = {type: \"Hash\", prop: token};\n\t\t\t\tif(firstParent.type === \"Hashes\") {\n\t\t\t\t\tstack.addToAndPush([\"Hashes\"], hash);\n\t\t\t\t} else {\n\t\t\t\t\tstack.addToAndPush([\"Helper\", \"Call\",\"Root\"], {\n\t\t\t\t\t\ttype: \"Hashes\",\n\t\t\t\t\t\tchildren: [hash]\n\t\t\t\t\t});\n\t\t\t\t\tstack.push(hash);\n\t\t\t\t}\n\t\t\t\tcursor.index++;\n\n\t\t\t}\n\t\t\t// Literal\n\t\t\telse if(literalRegExp.test( token )) {\n\t\t\t\tconvertToHelperIfTopIsLookup(stack);\n\t\t\t\t// only add to hash if there's not already a child.\n\t\t\t\tfirstParent = stack.first([\"Helper\", \"Call\", \"Hash\", \"Bracket\"]);\n\t\t\t\tif(firstParent.type === \"Hash\" && (firstParent.children && firstParent.children.length > 0)) {\n\t\t\t\t\tstack.addTo([\"Helper\", \"Call\", \"Bracket\"], {type: \"Literal\", value: utils$1.jsonParse( token )});\n\t\t\t\t} else if(firstParent.type === \"Bracket\" && (firstParent.children && firstParent.children.length > 0)) {\n\t\t\t\t\tstack.addTo([\"Helper\", \"Call\", \"Hash\"], {type: \"Literal\", value: utils$1.jsonParse( token )});\n\t\t\t\t} else {\n\t\t\t\t\tstack.addTo([\"Helper\", \"Call\", \"Hash\", \"Bracket\"], {type: \"Literal\", value: utils$1.jsonParse( token )});\n\t\t\t\t}\n\n\t\t\t}\n\t\t\t// Lookup\n\t\t\telse if(keyRegExp.test(token)) {\n\t\t\t\tlastToken = stack.topLastChild();\n\t\t\t\tfirstParent = stack.first([\"Helper\", \"Call\", \"Hash\", \"Bracket\"]);\n\n\t\t\t\t// if we had `foo().bar`, we need to change to a Lookup that looks up from lastToken.\n\t\t\t\tif(lastToken && (lastToken.type === \"Call\" || lastToken.type === \"Bracket\" ) && isAddingToExpression(token)) {\n\t\t\t\t\tstack.replaceTopLastChildAndPush({\n\t\t\t\t\t\ttype: \"Lookup\",\n\t\t\t\t\t\troot: lastToken,\n\t\t\t\t\t\tkey: token.slice(1) // remove leading `.`\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse if(firstParent.type === 'Bracket') {\n\t\t\t\t\t// a Bracket expression without children means we have\n\t\t\t\t\t// parsed `foo[` of an expression like `foo[bar]`\n\t\t\t\t\t// so we know to add the Lookup as a child of the Bracket expression\n\t\t\t\t\tif (!(firstParent.children && firstParent.children.length > 0)) {\n\t\t\t\t\t\tstack.addToAndPush([\"Bracket\"], {type: \"Lookup\", key: token});\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// check if we are adding to a helper like `eq foo[bar] baz`\n\t\t\t\t\t\t// but not at the `.baz` of `eq foo[bar].baz xyz`\n\t\t\t\t\t\tif(stack.first([\"Helper\", \"Call\", \"Hash\", \"Arg\"]).type === 'Helper' && token[0] !== '.') {\n\t\t\t\t\t\t\tstack.addToAndPush([\"Helper\"], {type: \"Lookup\", key: token});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// otherwise, handle the `.baz` in expressions like `foo[bar].baz`\n\t\t\t\t\t\t\tstack.replaceTopAndPush({\n\t\t\t\t\t\t\t\ttype: \"Lookup\",\n\t\t\t\t\t\t\t\tkey: token.slice(1),\n\t\t\t\t\t\t\t\troot: firstParent\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t// if two scopes, that means a helper\n\t\t\t\t\tconvertToHelperIfTopIsLookup(stack);\n\n\t\t\t\t\tstack.addToAndPush([\"Helper\", \"Call\", \"Hash\", \"Arg\", \"Bracket\"], {type: \"Lookup\", key: token});\n\t\t\t\t}\n\n\t\t\t}\n\t\t\t// Arg\n\t\t\telse if(token === \"~\") {\n\t\t\t\tconvertToHelperIfTopIsLookup(stack);\n\t\t\t\tstack.addToAndPush([\"Helper\", \"Call\", \"Hash\"], {type: \"Arg\", key: token});\n\t\t\t}\n\t\t\t// Call\n\t\t\t// foo[bar()]\n\t\t\telse if(token === \"(\") {\n\t\t\t\ttop = stack.top();\n\t\t\t\tlastToken = stack.topLastChild();\n\t\t\t\tif(top.type === \"Lookup\") {\n\t\t\t\t\tstack.replaceTopAndPush({\n\t\t\t\t\t\ttype: \"Call\",\n\t\t\t\t\t\tmethod: convertToAtLookup(top)\n\t\t\t\t\t});\n\n\t\t\t\t// Nested Call\n\t\t\t\t// foo()()\n\t\t\t\t} else if (lastToken && lastToken.type === \"Call\") {\n\t\t\t\t\tstack.replaceTopAndPush({\n\t\t\t\t\t\ttype: \"Call\",\n\t\t\t\t\t\tmethod: lastToken\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tthrow new Error(\"Unable to understand expression \"+tokens.join(''));\n\t\t\t\t}\n\t\t\t}\n\t\t\t// End Call\n\t\t\telse if(token === \")\") {\n\t\t\t\tstack.popTo([\"Call\"]);\n\t\t\t}\n\t\t\t// End Call argument\n\t\t\telse if(token === \",\") {\n\t\t\t\t// The {{let foo=zed, bar=car}} helper is not in a call\n\t\t\t\t// expression.\n\t\t\t\tvar call = stack.first([\"Call\"]);\n\t\t\t\tif(call.type !== \"Call\") {\n\t\t\t\t\tstack.popUntil([\"Hash\"]);\n\t\t\t\t} else {\n\t\t\t\t\tstack.popUntil([\"Call\"]);\n\t\t\t\t}\n\n\t\t\t}\n\t\t\t// Bracket\n\t\t\telse if(token === \"[\") {\n\t\t\t\ttop = stack.top();\n\t\t\t\tlastToken = stack.topLastChild();\n\n\t\t\t\t// foo()[bar] => top -> root, lastToken -> {t: call, m: \"@foo\"}\n\t\t\t\t// foo()[bar()] => same as above last thing we see was a call expression \"rotate\"\n\t\t\t\t// test['foo'][0] => lastToken => {root: test, t: Bracket, c: 'foo' }\n\t\t\t\t// log(thing['prop'][0]) =>\n\t\t\t\t//\n\t\t\t\t//     top -> {Call, children|args: [Bracket(Lookup(thing), c: ['[prop]'])]}\n\t\t\t\t//     last-> Bracket(Lookup(thing), c: ['[prop]'])\n\t\t\t\tif (lastToken && (lastToken.type === \"Call\" || lastToken.type === \"Bracket\"  )  ) {\n\t\t\t\t\t// must be on top of the stack as it recieves new stuff ...\n\t\t\t\t\t// however, what we really want is to\n\t\t\t\t\tstack.replaceTopLastChildAndPush({type: \"Bracket\", root: lastToken});\n\t\t\t\t} else if (top.type === \"Lookup\" || top.type === \"Bracket\") {\n\t\t\t\t\tvar bracket$$1 = {type: \"Bracket\", root: top};\n\t\t\t\t\t//!steal-remove-start\n\t\t\t\t\tif (process.env.NODE_ENV !== 'production') {\n\t\t\t\t\t\tcanReflect_1_19_2_canReflect.setKeyValue(bracket$$1, canSymbol_1_7_0_canSymbol.for(\"can-stache.originalKey\"), top.key);\n\t\t\t\t\t}\n\t\t\t\t\t//!steal-remove-end\n\t\t\t\t\tstack.replaceTopAndPush(bracket$$1);\n\t\t\t\t} else if (top.type === \"Call\") {\n\t\t\t\t\tstack.addToAndPush([\"Call\"], { type: \"Bracket\" });\n\t\t\t\t} else if (top === \" \") {\n\t\t\t\t\tstack.popUntil([\"Lookup\", \"Call\"]);\n\t\t\t\t\tconvertToHelperIfTopIsLookup(stack);\n\t\t\t\t\tstack.addToAndPush([\"Helper\", \"Call\", \"Hash\"], {type: \"Bracket\"});\n\t\t\t\t} else {\n\t\t\t\t\tstack.replaceTopAndPush({type: \"Bracket\"});\n\t\t\t\t}\n\t\t\t}\n\t\t\t// End Bracket\n\t\t\telse if(token === \"]\") {\n\t\t\t\tstack.pop();\n\t\t\t}\n\t\t\telse if(token === \" \") {\n\t\t\t\tstack.push(token);\n\t\t\t}\n\t\t}\n\t\treturn stack.root.children[0];\n\t}\n};\n\nvar expression_1 = expression;\n\n//\n// This provides helper utilities for Mustache processing. Currently,\n// only stache uses these helpers.  Ideally, these utilities could be used\n// in other libraries implementing Mustache-like features.\n\n\n\n\n\n\nvar expression$1 = expression_1;\n\n\n\n\n\n\n\n\nvar toDOMSymbol$1 = canSymbol_1_7_0_canSymbol.for(\"can.toDOM\");\n\n// Lazily lookup the context only if it's needed.\nfunction HelperOptions(scope, exprData, stringOnly) {\n\tthis.metadata = { rendered: false };\n\tthis.stringOnly = stringOnly;\n\tthis.scope = scope;\n\tthis.exprData = exprData;\n}\ncanDefineLazyValue_1_1_1_defineLazyValue(HelperOptions.prototype,\"context\", function(){\n\treturn this.scope.peek(\"this\");\n});\n\n\n\n\n// ## Helpers\n\nvar mustacheLineBreakRegExp = /(?:(^|\\r?\\n)(\\s*)(\\{\\{([\\s\\S]*)\\}\\}\\}?)([^\\S\\n\\r]*)($|\\r?\\n))|(\\{\\{([\\s\\S]*)\\}\\}\\}?)/g,\n\tmustacheWhitespaceRegExp = /\\s*\\{\\{--\\}\\}\\s*|\\s*(\\{\\{\\{?)-|-(\\}\\}\\}?)\\s*/g,\n\tk = function(){};\nvar viewInsertSymbol$1 = canSymbol_1_7_0_canSymbol.for(\"can.viewInsert\");\n\n\n// DOM, safeString or the insertSymbol can opt-out of updating as text\nfunction valueShouldBeInsertedAsHTML(value) {\n\treturn value !== null && typeof value === \"object\" && (\n\t\ttypeof value[toDOMSymbol$1] === \"function\" ||\n\t\ttypeof value[viewInsertSymbol$1] === \"function\" ||\n\t\ttypeof value.nodeType === \"number\" );\n}\n\n\n\n\nvar core = {\n\texpression: expression$1,\n\t// ## mustacheCore.makeEvaluator\n\t// Given a scope and expression, returns a function that evaluates that expression in the scope.\n\t//\n\t// This function first reads lookup values in the args and hash.  Then it tries to figure out\n\t// if a helper is being called or a value is being read.  Finally, depending on\n\t// if it's a helper, or not, and which mode the expression is in, it returns\n\t// a function that can quickly evaluate the expression.\n\t/**\n\t * @hide\n\t * Given a mode and expression data, returns a function that evaluates that expression.\n\t * @param {can-view-scope} The scope in which the expression is evaluated.\n\t * @param {can.view.Options} The option helpers in which the expression is evaluated.\n\t * @param {String} mode Either null, #, ^. > is handled elsewhere\n\t * @param {Object} exprData Data about what was in the mustache expression\n\t * @param {renderer} [truthyRenderer] Used to render a subsection\n\t * @param {renderer} [falseyRenderer] Used to render the inverse subsection\n\t * @param {String} [stringOnly] A flag to indicate that only strings will be returned by subsections.\n\t * @return {Function} An 'evaluator' function that evaluates the expression.\n\t */\n\tmakeEvaluator: function (scope, mode, exprData, truthyRenderer, falseyRenderer, stringOnly) {\n\n\t\tif(mode === \"^\") {\n\t\t\tvar temp = truthyRenderer;\n\t\t\ttruthyRenderer = falseyRenderer;\n\t\t\tfalseyRenderer = temp;\n\t\t}\n\n\t\tvar value,\n\t\t\thelperOptions = new HelperOptions(scope , exprData, stringOnly);\n\t\t\t// set up renderers\n\t\t\tutils$1.createRenderers(helperOptions, scope ,truthyRenderer, falseyRenderer, stringOnly);\n\n\t\tif(exprData instanceof expression$1.Call) {\n\t\t\tvalue = exprData.value(scope, helperOptions);\n\t\t} else if (exprData instanceof expression$1.Bracket) {\n\t\t\tvalue = exprData.value(scope);\n\t\t} else if (exprData instanceof expression$1.Lookup) {\n\t\t\tvalue = exprData.value(scope);\n\t\t} else if (exprData instanceof expression$1.Literal) {\n\t\t\tvalue = exprData.value.bind(exprData);\n\t\t} else if (exprData instanceof expression$1.Helper && exprData.methodExpr instanceof expression$1.Bracket) {\n\t\t\t// Brackets get wrapped in Helpers when used in attributes\n\t\t\t// like `<p class=\"{{ foo[bar] }}\" />`\n\t\t\tvalue = exprData.methodExpr.value(scope, helperOptions);\n\t\t} else {\n\t\t\tvalue = exprData.value(scope, helperOptions);\n\t\t\tif (typeof value === \"function\") {\n\t\t\t\treturn value;\n\t\t\t}\n\t\t}\n\t\t// {{#something()}}foo{{/something}}\n\t\t// return evaluator for no mode or rendered value if a renderer was called\n\t\tif(!mode || helperOptions.metadata.rendered) {\n\t\t\treturn value;\n\t\t} else if( mode === \"#\" || mode === \"^\" ) {\n\n\t\t\treturn function(){\n\t\t\t\t// Get the value\n\t\t\t\tvar finalValue = canReflect_1_19_2_canReflect.getValue(value);\n\t\t\t\tvar result;\n\n\t\t\t\t// if options.fn or options.inverse was called, we take the observable's return value\n\t\t\t\t// as what should be put in the DOM.\n\t\t\t\tif(helperOptions.metadata.rendered) {\n\t\t\t\t\tresult = finalValue;\n\t\t\t\t}\n\t\t\t\t// If it's an array, render.\n\t\t\t\telse if ( typeof finalValue !== \"string\" && canReflect_1_19_2_canReflect.isListLike(finalValue) ) {\n\t\t\t\t\tvar isObserveList = canReflect_1_19_2_canReflect.isObservableLike(finalValue) &&\n\t\t\t\t\t\tcanReflect_1_19_2_canReflect.isListLike(finalValue);\n\n\t\t\t\t\tif(canReflect_1_19_2_canReflect.getKeyValue(finalValue, \"length\")) {\n\t\t\t\t\t\tif (stringOnly) {\n\t\t\t\t\t\t\tresult = utils$1.getItemsStringContent(finalValue, isObserveList, helperOptions);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tresult = canFragment_1_3_1_canFragment(utils$1.getItemsFragContent(finalValue, helperOptions, scope));\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresult = helperOptions.inverse(scope);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tresult = finalValue ? helperOptions.fn(finalValue || scope) : helperOptions.inverse(scope);\n\t\t\t\t}\n\t\t\t\t// We always set the rendered result back to false.\n\t\t\t\t// - Future calls might change from returning a value to calling `.fn`\n\t\t\t\t// - We are calling `.fn` and `.inverse` ourselves.\n\t\t\t\thelperOptions.metadata.rendered = false;\n\t\t\t\treturn result;\n\t\t\t};\n\t\t} else {\n\t\t\t// not supported!\n\t\t}\n\t},\n\t// ## mustacheCore.makeLiveBindingPartialRenderer\n\t// Returns a renderer function that live binds a partial.\n\t/**\n\t * @hide\n\t * Returns a renderer function that live binds a partial.\n\t * @param {String} expressionString\n\t * @param {Object} state The html state of where the expression was found.\n\t * @return {function(this:HTMLElement,can-view-scope,can.view.Options)} A renderer function\n\t * live binds a partial.\n\t */\n\tmakeLiveBindingPartialRenderer: function(expressionString, state){\n\t\texpressionString = expressionString.trim();\n\t\tvar exprData,\n\t\t\t\tpartialName = expressionString.split(/\\s+/).shift();\n\n\t\tif(partialName !== expressionString) {\n\t\t\texprData = core.expression.parse(expressionString);\n\t\t}\n\n\t\treturn function(scope){\n\t\t\t//!steal-remove-start\n\t\t\tif (process.env.NODE_ENV !== 'production') {\n\t\t\t\tscope.set('scope.filename', state.filename);\n\t\t\t\tscope.set('scope.lineNumber', state.lineNo);\n\t\t\t}\n\t\t\t//!steal-remove-end\n\n\t\t\tvar partialFrag = new canObservation_4_2_0_canObservation(function(){\n\t\t\t\tvar localPartialName = partialName;\n\t\t\t\tvar partialScope = scope;\n\t\t\t\t// If the second parameter of a partial is a custom context\n\t\t\t\tif(exprData && exprData.argExprs.length === 1) {\n\t\t\t\t\tvar newContext = canReflect_1_19_2_canReflect.getValue( exprData.argExprs[0].value(scope) );\n\t\t\t\t\tif(typeof newContext === \"undefined\") {\n\t\t\t\t\t\t//!steal-remove-start\n\t\t\t\t\t\tif (process.env.NODE_ENV !== 'production') {\n\t\t\t\t\t\t\tdev.warn('The context ('+ exprData.argExprs[0].key +') you passed into the' +\n\t\t\t\t\t\t\t\t'partial ('+ partialName +') is not defined in the scope!');\n\t\t\t\t\t\t}\n\t\t\t\t\t\t//!steal-remove-end\n\t\t\t\t\t}else{\n\t\t\t\t\t\tpartialScope = scope.add(newContext);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// Look up partials in templateContext first\n\t\t\t\tvar partial = canReflect_1_19_2_canReflect.getKeyValue(partialScope.templateContext.partials, localPartialName);\n\t\t\t\tvar renderer;\n\n\t\t\t\tif (partial) {\n\t\t\t\t\trenderer = function() {\n\t\t\t\t\t\treturn partial.render ? partial.render(partialScope)\n\t\t\t\t\t\t\t: partial(partialScope);\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\t// Use can.view to get and render the partial.\n\t\t\t\telse {\n\t\t\t\t\tvar scopePartialName = partialScope.read(localPartialName, {\n\t\t\t\t\t\tisArgument: true\n\t\t\t\t\t}).value;\n\n\t\t\t\t\tif (scopePartialName === null || !scopePartialName && localPartialName[0] === '*') {\n\t\t\t\t\t\treturn canFragment_1_3_1_canFragment(\"\");\n\t\t\t\t\t}\n\t\t\t\t\tif (scopePartialName) {\n\t\t\t\t\t\tlocalPartialName = scopePartialName;\n\t\t\t\t\t}\n\n\t\t\t\t\trenderer = function() {\n\t\t\t\t\t\tif(typeof localPartialName === \"function\"){\n\t\t\t\t\t\t\treturn localPartialName(partialScope, {});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tvar domRenderer = core.getTemplateById(localPartialName);\n\t\t\t\t\t\t\t//!steal-remove-start\n\t\t\t\t\t\t\tif (process.env.NODE_ENV !== 'production') {\n\t\t\t\t\t\t\t\tif (!domRenderer) {\n\t\t\t\t\t\t\t\t\tdev.warn(\n\t\t\t\t\t\t\t\t\t\t(state.filename ? state.filename + ':' : '') +\n\t\t\t\t\t\t\t\t\t\t(state.lineNo ? state.lineNo + ': ' : '') +\n\t\t\t\t\t\t\t\t\t\t'Unable to find partial \"' + localPartialName + '\".');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t//!steal-remove-end\n\t\t\t\t\t\t\treturn domRenderer ? domRenderer(partialScope, {}) : document$1().createDocumentFragment();\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tvar res = canObservationRecorder_1_3_1_canObservationRecorder.ignore(renderer)();\n\t\t\t\treturn canFragment_1_3_1_canFragment(res);\n\t\t\t});\n\n\t\t\tcanViewLive_5_0_5_canViewLive.html(this, partialFrag);\n\t\t};\n\t},\n\t// ## mustacheCore.makeStringBranchRenderer\n\t// Return a renderer function that evalutes to a string and caches\n\t// the evaluator on the scope.\n\t/**\n\t * @hide\n\t * Return a renderer function that evaluates to a string.\n\t * @param {String} mode\n\t * @param {can.stache.Expression} expression\n\t * @param {Object} state The html state of where the expression was found.\n\t * @return {function(can.view.Scope,can.view.Options, can-stache.view, can.view.renderer)}\n\t */\n\tmakeStringBranchRenderer: function(mode, expressionString, state){\n\t\tvar exprData = core.expression.parse(expressionString),\n\t\t\t// Use the full mustache expression as the cache key.\n\t\t\tfullExpression = mode+expressionString;\n\n\t\t// A branching renderer takes truthy and falsey renderer.\n\t\tvar branchRenderer = function branchRenderer(scope, truthyRenderer, falseyRenderer){\n\t\t\t//!steal-remove-start\n\t\t\tif (process.env.NODE_ENV !== 'production') {\n\t\t\t\tscope.set('scope.filename', state.filename);\n\t\t\t\tscope.set('scope.lineNumber', state.lineNo);\n\t\t\t}\n\t\t\t//!steal-remove-end\n\t\t\t// Check the scope's cache if the evaluator already exists for performance.\n\t\t\tvar evaluator = scope.__cache[fullExpression];\n\t\t\tif(mode || !evaluator) {\n\t\t\t\tevaluator = makeEvaluator( scope, mode, exprData, truthyRenderer, falseyRenderer, true);\n\t\t\t\tif(!mode) {\n\t\t\t\t\tscope.__cache[fullExpression] = evaluator;\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar gotObservableValue = evaluator[canSymbol_1_7_0_canSymbol.for(\"can.onValue\")],\n\t\t\t\tres;\n\n\t\t\t// Run the evaluator and return the result.\n\t\t\tif(gotObservableValue) {\n\t\t\t\tres = canReflect_1_19_2_canReflect.getValue(evaluator);\n\t\t\t} else {\n\t\t\t\tres = evaluator();\n\t\t\t}\n\n\t\t\tif (res == null) {\n\t\t\t\treturn \"\";\n\t\t\t}\n\t\t\treturn res.nodeType === 11 ? res.textContent : \"\"+res;\n\t\t};\n\n\t\tbranchRenderer.exprData = exprData;\n\n\t\treturn branchRenderer;\n\t},\n\t// ## mustacheCore.makeLiveBindingBranchRenderer\n\t// Return a renderer function that evaluates the mustache expression and\n\t// sets up live binding if a compute with dependencies is found. Otherwise,\n\t// the element's value is set.\n\t//\n\t// This function works by creating a `can.compute` from the mustache expression.\n\t// If the compute has dependent observables, it passes the compute to `can.view.live`; otherwise,\n\t// it updates the element's property based on the compute's value.\n\t/**\n\t * @hide\n\t * Returns a renderer function that evaluates the mustache expression.\n\t * @param {String} mode\n\t * @param {can.stache.Expression} expression\n\t * @param {Object} state The html state of where the expression was found.\n\t */\n\tmakeLiveBindingBranchRenderer: function(mode, expressionString, state){\n\t\t// Pre-process the expression.\n\t\tvar exprData = core.expression.parse(expressionString);\n\n\t\t// A branching renderer takes truthy and falsey renderer.\n\t\tvar branchRenderer = function branchRenderer(scope, truthyRenderer, falseyRenderer){\n\t\t\t// If this is within a tag, make sure we only get string values.\n\t\t\tvar stringOnly = state.tag;\n\t\t\t//!steal-remove-start\n\t\t\tif (process.env.NODE_ENV !== 'production') {\n\t\t\t\tscope.set('scope.filename', state.filename);\n\t\t\t\tscope.set('scope.lineNumber', state.lineNo);\n\t\t\t}\n\t\t\t//!steal-remove-end\n\n\t\t\t// Get the evaluator. This does not need to be cached (probably) because if there\n\t\t\t// an observable value, it will be handled by `can.view.live`.\n\t\t\tvar evaluator = makeEvaluator( scope, mode, exprData, truthyRenderer, falseyRenderer, stringOnly );\n\n\t\t\t// Create a compute that can not be observed by other\n\t\t\t// computes. This is important because this renderer is likely called by\n\t\t\t// parent expressions.  If this value changes, the parent expressions should\n\t\t\t// not re-evaluate. We prevent that by making sure this compute is ignored by\n\t\t\t// everyone else.\n\t\t\t//var compute = can.compute(evaluator, null, false);\n\t\t\tvar gotObservableValue = evaluator[canSymbol_1_7_0_canSymbol.for(\"can.onValue\")];\n\t\t\tvar observable;\n\t\t\tif(gotObservableValue) {\n\t\t\t\tobservable = evaluator;\n\t\t\t} else {\n\t\t\t\t//!steal-remove-start\n\t\t\t\tif (process.env.NODE_ENV !== 'production') {\n\t\t\t\t\tObject.defineProperty(evaluator,\"name\",{\n\t\t\t\t\t\tvalue: \"{{\"+(mode || \"\")+expressionString+\"}}\"\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\t//!steal-remove-end\n\t\t\t\tobservable = new canObservation_4_2_0_canObservation(evaluator,null,{isObservable: false});\n\t\t\t}\n\n\t\t\t// Bind on the computeValue to set the cached value. This helps performance\n\t\t\t// so live binding can read a cached value instead of re-calculating.\n\t\t\tcanReflect_1_19_2_canReflect.onValue(observable, k);\n\n\t\t\tvar value = canReflect_1_19_2_canReflect.getValue(observable);\n\n\t\t\t// If value is a function and not a Lookup ({{foo}}),\n\t\t\t// it's a helper that returned a function and should be called.\n\t\t\tif(typeof value === \"function\" && !(exprData instanceof expression$1.Lookup)) {\n\n\t\t\t\t// A helper function should do it's own binding.  Similar to how\n\t\t\t\t// we prevented this function's compute from being noticed by parent expressions,\n\t\t\t\t// we hide any observables read in the function by saving any observables that\n\t\t\t\t// have been read and then setting them back which overwrites any `can.__observe` calls\n\t\t\t\t// performed in value.\n\t\t\t\tcanObservationRecorder_1_3_1_canObservationRecorder.ignore(value)(this);\n\n\t\t\t}\n\t\t\t// If the computeValue has observable dependencies, setup live binding.\n\t\t\telse if( canReflect_1_19_2_canReflect.valueHasDependencies(observable) ) {\n\t\t\t\t// Depending on where the template is, setup live-binding differently.\n\t\t\t\tif(state.attr) {\n\t\t\t\t\tcanViewLive_5_0_5_canViewLive.attr(this, state.attr, observable);\n\t\t\t\t}\n\t\t\t\telse if( state.tag )  {\n\t\t\t\t\tcanViewLive_5_0_5_canViewLive.attrs( this, observable );\n\t\t\t\t}\n\t\t\t\telse if(state.text && !valueShouldBeInsertedAsHTML(value)) {\n\t\t\t\t\t//!steal-remove-start\n\t\t\t\t\tif (process.env.NODE_ENV !== 'production') {\n\t\t\t\t\t\tif(value !== null && typeof value === \"object\") {\n\t\t\t\t\t\t\tdev.warn(\"Previously, the result of \"+\n\t\t\t\t\t\t\t\texpressionString+\" in \"+state.filename+\":\"+state.lineNo+\n\t\t\t\t\t\t\t\t\", was being inserted as HTML instead of TEXT. Please use stache.safeString(obj) \"+\n\t\t\t\t\t\t\t\t\"if you would like the object to be treated as HTML.\");\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t//!steal-remove-end\n\t\t\t\t\tcanViewLive_5_0_5_canViewLive.text(this, observable);\n\t\t\t\t} else {\n\t\t\t\t\tcanViewLive_5_0_5_canViewLive.html(this, observable);\n\t\t\t\t}\n\t\t\t}\n\t\t\t// If the computeValue has no observable dependencies, just set the value on the element.\n\t\t\telse {\n\n\t\t\t\tif(state.attr) {\n\t\t\t\t\tcanDomMutate_2_0_9_canDomMutate.setAttribute(this, state.attr, value);\n\t\t\t\t}\n\t\t\t\telse if(state.tag) {\n\t\t\t\t\tcanViewLive_5_0_5_canViewLive.attrs(this, value);\n\t\t\t\t}\n\t\t\t\telse if(state.text && !valueShouldBeInsertedAsHTML(value)) {\n\t\t\t\t\tthis.nodeValue = helpers$2.makeString(value);\n\t\t\t\t}\n\t\t\t\telse if( value != null ){\n\t\t\t\t\tif (typeof value[viewInsertSymbol$1] === \"function\") {\n\t\t\t\t\t\tvar insert = value[viewInsertSymbol$1]({});\n\t\t\t\t\t\tthis.parentNode.replaceChild( insert, this );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.parentNode.replaceChild(canFragment_1_3_1_canFragment(value, this.ownerDocument), this);\n\t\t\t\t\t\t//domMutateNode.replaceChild.call(this.parentNode, frag(value, this.ownerDocument), this);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Unbind the compute.\n\t\t\tcanReflect_1_19_2_canReflect.offValue(observable, k);\n\t\t};\n\n\t\tbranchRenderer.exprData = exprData;\n\n\t\treturn branchRenderer;\n\t},\n\t// ## mustacheCore.splitModeFromExpression\n\t// Returns the mustache mode split from the rest of the expression.\n\t/**\n\t * @hide\n\t * Returns the mustache mode split from the rest of the expression.\n\t * @param {can.stache.Expression} expression\n\t * @param {Object} state The state of HTML where the expression was found.\n\t */\n\tsplitModeFromExpression: function(expression, state){\n\t\texpression = expression.trim();\n\t\tvar mode = expression.charAt(0);\n\n\t\tif( \"#/{&^>!<\".indexOf(mode) >= 0 ) {\n\t\t\texpression =  expression.substr(1).trim();\n\t\t} else {\n\t\t\tmode = null;\n\t\t}\n\t\t// Triple braces do nothing within a tag.\n\t\tif(mode === \"{\" && state.node) {\n\t\t\tmode = null;\n\t\t}\n\t\treturn {\n\t\t\tmode: mode,\n\t\t\texpression: expression\n\t\t};\n\t},\n\t// ## mustacheCore.cleanLineEndings\n\t// Removes line breaks accoding to the mustache specification.\n\t/**\n\t * @hide\n\t * Prunes line breaks accoding to the mustache specification.\n\t * @param {String} template\n\t * @return {String}\n\t */\n\tcleanLineEndings: function(template){\n\n\t\t// Finds mustache tags with space around them or no space around them.\n\t\treturn template.replace( mustacheLineBreakRegExp,\n\t\t\tfunction(whole,\n\t\t\t\treturnBefore,\n\t\t\t\tspaceBefore,\n\t\t\t\tspecial,\n\t\t\t\texpression,\n\t\t\t\tspaceAfter,\n\t\t\t\treturnAfter,\n\t\t\t\t// A mustache magic tag that has no space around it.\n\t\t\t\tspaceLessSpecial,\n\t\t\t\tspaceLessExpression,\n\t\t\t\tmatchIndex){\n\n\t\t\t// IE 8 will provide undefined\n\t\t\tspaceAfter = (spaceAfter || \"\");\n\t\t\treturnBefore = (returnBefore || \"\");\n\t\t\tspaceBefore = (spaceBefore || \"\");\n\n\t\t\tvar modeAndExpression = splitModeFromExpression(expression || spaceLessExpression,{});\n\n\t\t\t// If it's a partial or tripple stache, leave in place.\n\t\t\tif(spaceLessSpecial || \">{\".indexOf( modeAndExpression.mode) >= 0) {\n\t\t\t\treturn whole;\n\t\t\t}  else if( \"^#!/\".indexOf(  modeAndExpression.mode ) >= 0 ) {\n\t\t\t\t// Return the magic tag and a trailing linebreak if this did not\n\t\t\t\t// start a new line and there was an end line.\n\t\t\t\t// Add a normalized leading space, if there was any leading space, in case this abuts a tag name\n\t\t\t\tspaceBefore = (returnBefore + spaceBefore) && \" \";\n\t\t\t\treturn spaceBefore+special+( matchIndex !== 0 && returnAfter.length ? returnBefore+\"\\n\" :\"\");\n\n\n\t\t\t} else {\n\t\t\t\t// There is no mode, return special with spaces around it.\n\t\t\t\treturn spaceBefore+special+spaceAfter+(spaceBefore.length || matchIndex !== 0 ? returnBefore+\"\\n\" : \"\");\n\t\t\t}\n\n\t\t});\n\t},\n\t// ## mustacheCore.cleanWhitespaceControl\n\t// Removes whitespace according to the whitespace control.\n\t/**\n\t * @hide\n\t * Prunes whitespace according to the whitespace control.\n\t * @param {String} template\n\t * @return {String}\n\t */\n\tcleanWhitespaceControl: function(template) {\n\t\treturn template.replace(mustacheWhitespaceRegExp, \"$1$2\");\n\t},\n\tgetTemplateById: function(){}\n};\n\n// ## Local Variable Cache\n//\n// The following creates slightly more quickly accessible references of the following\n// core functions.\nvar makeEvaluator = core.makeEvaluator,\n\tsplitModeFromExpression = core.splitModeFromExpression;\n\nvar mustache_core = core;\n\n/**\n * @module {function} can-globals/base-url/base-url base-url\n * @parent can-globals/modules\n *\n * @signature `baseUrl(optionalBaseUrlToSet)`\n *\n * Get and/or set the \"base\" (containing path) of the document.\n *\n * ```js\n * var baseUrl = require(\"can-globals/base-url/base-url\");\n *\n * console.log(baseUrl());           // -> \"http://localhost:8080\"\n * console.log(baseUrl(baseUrl() + \"/foo/bar\")); // -> \"http://localhost:8080/foo/bar\"\n * console.log(baseUrl());           // -> \"http://localhost:8080/foo/bar\"\n * ```\n *\n * @param {String} setUrl An optional base url to override reading the base URL from the known path.\n *\n * @return {String} Returns the set or computed base URL\n */\n\ncanGlobals_1_2_2_canGlobalsInstance.define('base-url', function(){\n\tvar global = canGlobals_1_2_2_canGlobalsInstance.getKeyValue('global');\n\tvar domDocument = canGlobals_1_2_2_canGlobalsInstance.getKeyValue('document');\n\tif (domDocument && 'baseURI' in domDocument) {\n\t\treturn domDocument.baseURI;\n\t} else if(global.location) {\n\t\tvar href = global.location.href;\n\t\tvar lastSlash = href.lastIndexOf(\"/\");\n\t\treturn lastSlash !== -1 ? href.substr(0, lastSlash) : href;\n\t} else if(typeof process !== \"undefined\") {\n\t\treturn process.cwd();\n\t}\n});\n\nvar baseUrl = canGlobals_1_2_2_canGlobalsInstance.makeExport('base-url');\n\n/**\n * @module {function} can-parse-uri can-parse-uri\n * @parent can-js-utilities\n * @collection can-infrastructure\n * @package ./package.json\n * @signature `parseURI(url)`\n *\n * Parse a URI into its components.\n *\n * ```js\n * import {parseURI} from \"can\"\n * parseURI(\"http://foo:8080/bar.html?query#change\")\n * //-> {\n * //  authority: \"//foo:8080\",\n * //  hash: \"#change\",\n * //  host: \"foo:8080\",\n * //  hostname: \"foo\",\n * //  href: \"http://foo:8080/bar.html?query#change\",\n * //  pathname: \"/bar.html\",\n * //  port: \"8080\",\n * //  protocol: \"http:\",\n * //  search: \"?query\"\n * // }\n * ```\n *\n * @param {String} url The URL you want to parse.\n *\n * @return {Object} Returns an object with properties for each part of the URL. `null`\n * is returned if the url can not be parsed.\n */\n\nvar canParseUri_1_2_2_canParseUri = canNamespace_1_0_0_canNamespace.parseURI = function(url){\n\t\tvar m = String(url).replace(/^\\s+|\\s+$/g, '').match(/^([^:\\/?#]+:)?(\\/\\/(?:[^:@]*(?::[^:@]*)?@)?(([^:\\/?#]*)(?::(\\d*))?))?([^?#]*)(\\?[^#]*)?(#[\\s\\S]*)?/);\n\t\t\t// authority = '//' + user + ':' + pass '@' + hostname + ':' port\n\t\treturn (m ? {\n\t\t\thref     : m[0] || '',\n\t\t\tprotocol : m[1] || '',\n\t\t\tauthority: m[2] || '',\n\t\t\thost     : m[3] || '',\n\t\t\thostname : m[4] || '',\n\t\t\tport     : m[5] || '',\n\t\t\tpathname : m[6] || '',\n\t\t\tsearch   : m[7] || '',\n\t\t\thash     : m[8] || ''\n\t\t} : null);\n\t};\n\nvar canJoinUris_1_2_0_canJoinUris = canNamespace_1_0_0_canNamespace.joinURIs = function(base, href) {\n\tfunction removeDotSegments(input) {\n\t\tvar output = [];\n\t\tinput.replace(/^(\\.\\.?(\\/|$))+/, '')\n\t\t\t.replace(/\\/(\\.(\\/|$))+/g, '/')\n\t\t\t.replace(/\\/\\.\\.$/, '/../')\n\t\t\t.replace(/\\/?[^\\/]*/g, function (p) {\n\t\t\t\tif (p === '/..') {\n\t\t\t\t\toutput.pop();\n\t\t\t\t} else {\n\t\t\t\t\toutput.push(p);\n\t\t\t\t}\n\t\t\t});\n\t\treturn output.join('').replace(/^\\//, input.charAt(0) === '/' ? '/' : '');\n\t}\n\n\thref = canParseUri_1_2_2_canParseUri(href || '');\n\tbase = canParseUri_1_2_2_canParseUri(base || '');\n\n\treturn !href || !base ? null : (href.protocol || base.protocol) +\n\t\t(href.protocol || href.authority ? href.authority : base.authority) +\n\t\tremoveDotSegments(href.protocol || href.authority || href.pathname.charAt(0) === '/' ? href.pathname : (href.pathname ? ((base.authority && !base.pathname ? '/' : '') + base.pathname.slice(0, base.pathname.lastIndexOf('/') + 1) + href.pathname) : base.pathname)) +\n\t\t\t(href.protocol || href.authority || href.pathname ? href.search : (href.search || base.search)) +\n\t\t\thref.hash;\n};\n\nfunction noop$1 () {}\nvar resolveValue = noop$1;\nvar evaluateArgs = noop$1;\nvar __testing = {};\n\n//!steal-remove-start\nif (process.env.NODE_ENV !== 'production') {\n\tvar canReflect = canReflect_1_19_2_canReflect;\n\n\tvar canSymbol$1 = canSymbol_1_7_0_canSymbol;\n\n\t__testing = {\n\t\tallowDebugger: true\n\t};\n\n\tresolveValue = function (value) {\n\t\tif (value && value[canSymbol$1.for(\"can.getValue\")]) {\n\t\t\treturn canReflect.getValue(value);\n\t\t}\n\t\treturn value;\n\t};\n\n\tevaluateArgs = function (left, right) {\n\t\tswitch (arguments.length) {\n\t\t\tcase 0: return true;\n\t\t\tcase 1: return !!resolveValue(left);\n\t\t\tcase 2: return resolveValue(left) === resolveValue(right);\n\t\t\tdefault:\n\t\t\t\tcanLog_1_0_2_canLog.log([\n\t\t\t\t\t'Usage:',\n\t\t\t\t\t'  {{debugger}}: break any time this helper is evaluated',\n\t\t\t\t\t'  {{debugger condition}}: break when `condition` is truthy',\n\t\t\t\t\t'  {{debugger left right}}: break when `left` === `right`'\n\t\t\t\t].join('\\n'));\n\t\t\t\tthrow new Error('{{debugger}} must have less than three arguments');\n\t\t}\n\t};\n}\n//!steal-remove-end\n\nfunction debuggerHelper (left, right) {\n\t//!steal-remove-start\n\tif (process.env.NODE_ENV !== 'production') {\n\t\tvar shouldBreak = evaluateArgs.apply(null, Array.prototype.slice.call(arguments, 0, -1));\n\t\tif (!shouldBreak) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar options = arguments[arguments.length - 1],\n\t\t\tscope = options && options.scope;\n\t\tvar get = function (path) {\n\t\t\treturn scope.get(path);\n\t\t};\n\t\t// This makes sure `get`, `options` and `scope` are available\n\t\tdebuggerHelper._lastGet = get;\n\n\t\tcanLog_1_0_2_canLog.log('Use `get(<path>)` to debug this template');\n\n\t\tvar allowDebugger = __testing.allowDebugger;\n\t\t// forgotten debugger\n\t\t// jshint -W087\n\t\tif (allowDebugger) {\n\t\t\tdebugger;\n\t\t\treturn;\n\t\t}\n\t\t// jshint +W087\n\t}\n\t//!steal-remove-end\n\n\tcanLog_1_0_2_canLog.warn('Forgotten {{debugger}} helper');\n}\ndebuggerHelper.requiresOptionsArgument = true;\n\nvar Debugger = {\n\thelper: debuggerHelper,\n\tevaluateArgs: evaluateArgs,\n\tresolveValue: resolveValue,\n\n\t// used only for testing purposes\n\t__testing: __testing\n};\n\nvar truthyObservable = function(observable){\n    return new canObservation_4_2_0_canObservation(function truthyObservation(){\n        var val = canReflect_1_19_2_canReflect.getValue(observable);\n\n        return !!val;\n    });\n};\n\nfunction makeConverter(getterSetter){\n\tgetterSetter = getterSetter || {};\n\treturn function(newVal, source) {\n\t\tvar args = canReflect_1_19_2_canReflect.toArray(arguments);\n\t\tif(newVal instanceof setIdentifier) {\n\t\t\treturn typeof getterSetter.set === \"function\" ?\n\t\t\t\tgetterSetter.set.apply(this, [newVal.value].concat(args.slice(1))) :\n\t\t\t\tsource(newVal.value);\n\t\t} else {\n\t\t\treturn typeof getterSetter.get === \"function\" ?\n\t\t\t\tgetterSetter.get.apply(this, args) :\n\t\t\t\targs[0];\n\t\t}\n\t};\n}\n\nvar converter = makeConverter;\n\nvar bindAndRead = function (value) {\n\tif ( value && canReflect_1_19_2_canReflect.isValueLike(value) ) {\n\t\tcanObservation_4_2_0_canObservation.temporarilyBind(value);\n\t\treturn canReflect_1_19_2_canReflect.getValue(value);\n\t} else {\n\t\treturn value;\n\t}\n};\n\nfunction forOfInteger(integer, variableName, options) {\n\tvar result = [];\n\tfor (var i = 0; i < integer; i++) {\n\t\tvar variableScope = {};\n\t\tif(variableName !== undefined){\n\t\t\tvariableScope[variableName] = i;\n\t\t}\n\t\tresult.push(\n\t\t\toptions.fn( options.scope\n\t\t\t\t.add({ index: i }, { special: true })\n\t\t\t\t.addLetContext(variableScope) )\n\t\t);\n\t}\n\n\treturn options.stringOnly ? result.join('') : result;\n}\n\nfunction forOfObject(object, variableName, options){\n\tvar result = [];\n\tcanReflect_1_19_2_canReflect.each(object, function(val, key){\n\t\t// Allow key to contain a dot, for example: \"My.key.has.dot\"\n\t\tvar value = new keyObservable(object, key.replace(/\\./g, \"\\\\.\"));\n\t\tvar variableScope = {};\n\t\tif(variableName !== undefined){\n\t\t\tvariableScope[variableName] = value;\n\t\t}\n\t\tresult.push(\n\t\t\toptions.fn( options.scope\n\t\t\t\t.add({ key: key }, { special: true })\n\t\t\t\t.addLetContext(variableScope) )\n\t\t);\n\t});\n\n\treturn options.stringOnly ? result.join('') : result;\n}\n\n// this is called with the ast ... we are going to use that to our advantage.\nvar forHelper = function(helperOptions) {\n\t// lookup\n\n\t// TODO: remove in prod\n\t// make sure we got called with the right stuff\n\tif(helperOptions.exprData.argExprs.length !== 1) {\n\t\tthrow new Error(\"for(of) broken syntax\");\n\t}\n\n\t// TODO: check if an instance of helper;\n\n\tvar helperExpr = helperOptions.exprData.argExprs[0].expr;\n\tvar variableName, valueLookup, valueObservable;\n\tif(helperExpr instanceof expression_1.Lookup) {\n\n\t\tvalueObservable = helperExpr.value(helperOptions.scope);\n\n\t} else if(helperExpr instanceof expression_1.Helper) {\n\t\t// TODO: remove in prod\n\t\tvar inLookup = helperExpr.argExprs[0];\n\t\tif(inLookup.key !== \"of\") {\n\t\t\tthrow new Error(\"for(of) broken syntax\");\n\t\t}\n\t\tvariableName = helperExpr.methodExpr.key;\n\t\tvalueLookup = helperExpr.argExprs[1];\n\t\tvalueObservable = valueLookup.value(helperOptions.scope);\n\t}\n\n\tvar items =  valueObservable;\n\n\tvar args = [].slice.call(arguments),\n\t\toptions = args.pop(),\n\t\tresolved = bindAndRead(items);\n\n\tif(resolved && resolved === Math.floor(resolved)) {\n\t\treturn forOfInteger(resolved, variableName, helperOptions);\n\t}\n\tif(resolved && !canReflect_1_19_2_canReflect.isListLike(resolved)) {\n\t\treturn forOfObject(resolved,variableName, helperOptions);\n\t}\n\tif(options.stringOnly) {\n\t\tvar parts = [];\n\t\tcanReflect_1_19_2_canReflect.eachIndex(resolved, function(value, index){\n\t\t\tvar variableScope = {};\n\t\t\tif(variableName !== undefined){\n\t\t\t\tvariableScope[variableName] = value;\n\t\t\t}\n\t\t\tparts.push(\n\t\t\t\thelperOptions.fn( options.scope\n\t\t\t\t\t.add({ index: index }, { special: true })\n\t\t\t\t\t.addLetContext(variableScope) )\n\t\t\t);\n\t\t});\n\t\treturn parts.join(\"\");\n\t} else {\n\t\t// Tells that a helper has been called, this function should be returned through\n\t\t// checking its value.\n\t\toptions.metadata.rendered = true;\n\t\treturn function(el){\n\n\t\t\tvar cb = function (item, index) {\n\t\t\t\tvar variableScope = {};\n\t\t\t\tif(variableName !== undefined){\n\t\t\t\t\tvariableScope[variableName] = item;\n\t\t\t\t}\n\t\t\t\treturn options.fn(\n\t\t\t\t\toptions.scope\n\t\t\t\t\t.add({ index: index }, { special: true })\n\t\t\t\t\t.addLetContext(variableScope),\n\t\t\t\t\toptions.options\n\t\t\t\t);\n\t\t\t};\n\n\t\t\tcanViewLive_5_0_5_canViewLive.list(el, items, cb, options.context, function(list){\n\t\t\t\treturn options.inverse(options.scope, options.options);\n\t\t\t});\n\t\t};\n\t}\n};\nforHelper.isLiveBound = true;\nforHelper.requiresOptionsArgument = true;\nforHelper.ignoreArgLookup = function ignoreArgLookup(index) {\n\treturn index === 0;\n};\n\nvar ForOf = forHelper;\n\nfunction isVariable(scope) {\n\treturn scope._meta.variable === true;\n}\n\n// This sets variables so it needs to not causes changes.\nvar letHelper = canObservationRecorder_1_3_1_canObservationRecorder.ignore(function(options){\n\tif(options.isSection){\n\t\treturn options.fn( options.scope.addLetContext( options.hash ) );\n\t}\n\tvar variableScope = options.scope.getScope(isVariable);\n\tif(!variableScope) {\n\t\tthrow new Error(\"There is no variable scope!\");\n\t}\n\n\tcanReflect_1_19_2_canReflect.assignMap(variableScope._context, options.hash);\n\treturn document.createTextNode(\"\");\n});\n\nvar Let = letHelper;\n\nvar keepNodeSymbol = canSymbol_1_7_0_canSymbol.for(\"done.keepNode\");\n\nfunction portalHelper(elementObservable, options){\n\tvar debugName = \"portal(\" + canReflect_1_19_2_canReflect.getName(elementObservable) + \")\";\n\n\tfunction portalContents() {\n\t\tvar frag = options.fn(\n\t\t\toptions.scope\n\t\t\t.addLetContext({}),\n\t\t\toptions.options\n\t\t);\n\n\t\tvar child = frag.firstChild;\n\t\twhile(child) {\n\t\t\t// makes sure DoneJS does not remove these nodes\n\t\t\tchild[keepNodeSymbol] = true;\n\t\t\tchild = child.nextSibling;\n\t\t}\n\n\n\t\treturn frag;\n\t}\n\n\t//!steal-remove-start\n\tif(process.env.NODE_ENV !== 'production') {\n\t\tObject.defineProperty(portalContents,\"name\",{\n\t\t\tvalue: debugName+\" contents\"\n\t\t});\n\t}\n\t//!steal-remove-end\n\n\n\t// Where we are portalling\n\tvar portalElement,\n\t\tstartPortalledPlaceholder,\n\t\tendPortalledPlaceholder,\n\t\tcommentPlaceholderDispose;\n\tfunction teardownPortalledContent() {\n\n\t\tif(portalElement) {\n\t\t\tcanReflect_1_19_2_canReflect.offValue(elementObservable, getElementAndRender);\n\t\t\tportalElement = null;\n\t\t}\n\n\t\tif(startPortalledPlaceholder && endPortalledPlaceholder) {\n\t\t\tvar parentNode = startPortalledPlaceholder.parentNode;\n\t\t\tif(parentNode) {\n\t\t\t\thelpers$2.range.remove({start: startPortalledPlaceholder, end: endPortalledPlaceholder});\n\t\t\t\tcanDomMutate_2_0_9_node.removeChild.call(parentNode, startPortalledPlaceholder );\n\t\t\t\tcanDomMutate_2_0_9_node.removeChild.call(parentNode, endPortalledPlaceholder );\n\t\t\t\tstartPortalledPlaceholder = endPortalledPlaceholder = null;\n\t\t\t}\n\t\t}\n\t}\n\tfunction teardownEverything(){\n\t\tif(commentPlaceholderDispose) {\n\t\t\tcommentPlaceholderDispose();\n\t\t}\n\t\tteardownPortalledContent();\n\t}\n\t// The element has changed\n\tfunction getElementAndRender() {\n\t\t// remove the old rendered content and unbind if we've bound before\n\t\tteardownPortalledContent();\n\n\t\tcanReflect_1_19_2_canReflect.onValue(elementObservable, getElementAndRender);\n\n\t\tportalElement = canReflect_1_19_2_canReflect.getValue(elementObservable);\n\n\t\tif(portalElement) {\n\t\t\tstartPortalledPlaceholder = portalElement.ownerDocument.createComment(debugName+\" contents\");\n\t\t\tendPortalledPlaceholder = portalElement.ownerDocument.createComment(\"can-end-placeholder\");\n\t\t\tstartPortalledPlaceholder[keepNodeSymbol] = true;\n\t\t\tendPortalledPlaceholder[keepNodeSymbol] = true;\n\t\t\tportalElement.appendChild(startPortalledPlaceholder);\n\t\t\tportalElement.appendChild(endPortalledPlaceholder);\n\n\t\t\tvar observable = new canObservation_4_2_0_canObservation(portalContents, null, {isObservable: false});\n\n\t\t\tcanViewLive_5_0_5_canViewLive.html(startPortalledPlaceholder, observable);\n\t\t} else {\n\t\t\toptions.metadata.rendered = true;\n\t\t}\n\n\t}\n\n\tgetElementAndRender();\n\n\treturn function(placeholderElement) {\n\t\tvar commentPlaceholder = placeholderElement.ownerDocument.createComment(debugName);\n\n\t\tplaceholderElement.parentNode.replaceChild(commentPlaceholder, placeholderElement);\n\t\tcommentPlaceholderDispose = canDomMutate_2_0_9_canDomMutate.onNodeRemoved(commentPlaceholder, teardownEverything);\n\t\treturn commentPlaceholder;\n\t};\n}\n\nportalHelper.isLiveBound = true;\nportalHelper.requiresOptionsArgument = true;\n\nvar Portal = portalHelper;\n\nvar debuggerHelper$1 = Debugger.helper;\n\n\n\n\n\n\n\n\n\n\n\n\nvar builtInHelpers = {};\nvar builtInConverters = {};\nvar converterPackages = new WeakMap();\n\n// ## Helpers\nvar helpersCore = {\n\tlooksLikeOptions: function(options){\n\t\treturn options && typeof options.fn === \"function\" && typeof options.inverse === \"function\";\n\t},\n\tresolve: function(value) {\n\t\tif (value && canReflect_1_19_2_canReflect.isValueLike(value)) {\n\t\t\treturn canReflect_1_19_2_canReflect.getValue(value);\n\t\t} else {\n\t\t\treturn value;\n\t\t}\n\t},\n\tresolveHash: function(hash){\n\t\tvar params = {};\n\t\tfor(var prop in hash) {\n\t\t\tparams[prop] = helpersCore.resolve(hash[prop]);\n\t\t}\n\t\treturn params;\n\t},\n\tbindAndRead: function (value) {\n\t\tif ( value && canReflect_1_19_2_canReflect.isValueLike(value) ) {\n\t\t\tcanObservation_4_2_0_canObservation.temporarilyBind(value);\n\t\t\treturn canReflect_1_19_2_canReflect.getValue(value);\n\t\t} else {\n\t\t\treturn value;\n\t\t}\n\t},\n\tregisterHelper: function(name, callback){\n\t\t//!steal-remove-start\n\t\tif (process.env.NODE_ENV !== 'production') {\n\t\t\tif (canStacheHelpers_1_2_0_canStacheHelpers[name]) {\n\t\t\t\tdev.warn('The helper ' + name + ' has already been registered.');\n\t\t\t}\n\t\t}\n\t\t//!steal-remove-end\n\n\t\t// mark passed in helper so it will be automatically passed\n\t\t// helperOptions (.fn, .inverse, etc) when called as Call Expressions\n\t\tcallback.requiresOptionsArgument = true;\n\n\t\t// store on global helpers list\n\t\tcanStacheHelpers_1_2_0_canStacheHelpers[name] = callback;\n\t},\n\tregisterHelpers: function(helpers) {\n\t\tvar name, callback;\n\t\tfor(name in helpers) {\n\t\t\tcallback = helpers[name];\n\t\t\thelpersCore.registerHelper(name, helpersCore.makeSimpleHelper(callback));\n\t\t}\n\t},\n\tregisterConverter: function(name, getterSetter) {\n\t\thelpersCore.registerHelper(name, converter(getterSetter));\n\t},\n\tmakeSimpleHelper: function(fn) {\n\t\treturn function() {\n\t\t\tvar realArgs = [];\n\t\t\tcanReflect_1_19_2_canReflect.eachIndex(arguments, function(val) {\n\t\t\t\trealArgs.push(helpersCore.resolve(val));\n\t\t\t});\n\t\t\treturn fn.apply(this, realArgs);\n\t\t};\n\t},\n\taddHelper: function(name, callback) {\n\t\tif(typeof name === \"object\") {\n\t\t\treturn helpersCore.registerHelpers(name);\n\t\t}\n\t\treturn helpersCore.registerHelper(name, helpersCore.makeSimpleHelper(callback));\n\t},\n\taddConverter: function(name, getterSetter) {\n\t\tif(typeof name === \"object\") {\n\t\t\tif(!converterPackages.has(name)) {\n\t\t\t\tconverterPackages.set(name, true);\n\t\t\t\tcanReflect_1_19_2_canReflect.eachKey(name, function(getterSetter, name) {\n\t\t\t\t\thelpersCore.addConverter(name, getterSetter);\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\tvar helper = converter(getterSetter);\n\t\thelper.isLiveBound = true;\n\t\thelpersCore.registerHelper(name, helper);\n\t},\n\n\t// add helpers that set up their own internal live-binding\n\t// these helpers will not be wrapped in computes and will\n\t// receive observable arguments when called with Call Expressions\n\taddLiveHelper: function(name, callback) {\n\t\tcallback.isLiveBound = true;\n\t\treturn helpersCore.registerHelper(name, callback);\n\t},\n\n\tgetHelper: function(name, scope) {\n\t\tvar helper = scope && scope.getHelper(name);\n\n\t\tif (!helper) {\n\t\t\thelper = canStacheHelpers_1_2_0_canStacheHelpers[name];\n\t\t}\n\n\t\treturn helper;\n\t},\n\t__resetHelpers: function() {\n\t\t// remove all helpers from can-stache-helpers object\n\t\tfor (var helper in canStacheHelpers_1_2_0_canStacheHelpers) {\n\t\t\tdelete canStacheHelpers_1_2_0_canStacheHelpers[helper];\n\t\t}\n\t\t// Clear converterPackages map before re-adding converters\n\t\tconverterPackages.delete(builtInConverters);\n\n\t\thelpersCore.addBuiltInHelpers();\n\t\thelpersCore.addBuiltInConverters();\n\t},\n\taddBuiltInHelpers: function() {\n\t\tcanReflect_1_19_2_canReflect.each(builtInHelpers, function(helper, helperName) {\n\t\t\tcanStacheHelpers_1_2_0_canStacheHelpers[helperName] = helper;\n\t\t});\n\t},\n\taddBuiltInConverters: function () {\n\t\thelpersCore.addConverter(builtInConverters);\n\t},\n\t_makeLogicHelper: function(name, logic){\n\t\tvar logicHelper =  canAssign_1_3_3_canAssign(function() {\n\t\t\tvar args = Array.prototype.slice.call(arguments, 0),\n\t\t\t\toptions;\n\n\t\t\tif( helpersCore.looksLikeOptions(args[args.length - 1]) ){\n\t\t\t\toptions = args.pop();\n\t\t\t}\n\n\t\t\tfunction callLogic(){\n\t\t\t\t// if there are options, we want to prevent re-rendering if values are still truthy\n\t\t\t\tif(options) {\n\t\t\t\t\treturn logic(args) ? true: false;\n\t\t\t\t} else {\n\t\t\t\t\treturn logic(args);\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t//!steal-remove-start\n\t\t\tif (process.env.NODE_ENV !== 'production') {\n\t\t\t\tObject.defineProperty(callLogic, \"name\", {\n\t\t\t\t\tvalue: name+\"(\"+args.map(function(arg){\n\t\t\t\t\t\treturn canReflect_1_19_2_canReflect.getName(arg);\n\t\t\t\t\t}).join(\",\")+\")\",\n\t\t\t\t\tconfigurable: true\n\t\t\t\t});\n\t\t\t}\n\t\t\t//!steal-remove-end\n\t\t\tvar callFn = new canObservation_4_2_0_canObservation(callLogic);\n\n\t\t\tif(options) {\n\t\t\t\treturn callFn.get() ? options.fn() : options.inverse();\n\t\t\t} else {\n\t\t\t\treturn callFn.get();\n\t\t\t}\n\n\t\t},{requiresOptionsArgument: true, isLiveBound: true});\n\n\t\t//!steal-remove-start\n\t\tif (process.env.NODE_ENV !== 'production') {\n\t\t\tObject.defineProperty(logicHelper, \"name\", {\n\t\t\t\tvalue: name,\n\t\t\t\tconfigurable: true\n\t\t\t});\n\t\t}\n\t\t//!steal-remove-end\n\n\t\treturn logicHelper;\n\t}\n};\n\n\n\n// ## IF HELPER\nvar ifHelper = canAssign_1_3_3_canAssign(function ifHelper(expr, options) {\n\tvar value;\n\t// if it's a function, wrap its value in a compute\n\t// that will only change values from true to false\n\tif (expr && canReflect_1_19_2_canReflect.isValueLike(expr)) {\n\t\tvalue = canReflect_1_19_2_canReflect.getValue(new truthyObservable(expr));\n\t} else {\n\t\tvalue = !! helpersCore.resolve(expr);\n\t}\n\n\tif (options) {\n\t\treturn value ? options.fn(options.scope || this) : options.inverse(options.scope || this);\n\t}\n\n\treturn !!value;\n}, {requiresOptionsArgument: true, isLiveBound: true});\n\n\n\n\n//## EQ/IS HELPER\nvar isHelper = helpersCore._makeLogicHelper(\"eq\", function eqHelper(args){\n\tvar curValue, lastValue;\n\tfor (var i = 0; i < args.length; i++) {\n\t\tcurValue = helpersCore.resolve(args[i]);\n\t\tcurValue = typeof curValue === \"function\" ? curValue() : curValue;\n\n\t\tif (i > 0) {\n\t\t\tif (curValue !== lastValue) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\tlastValue = curValue;\n\t}\n\treturn true;\n});\n\nvar andHelper = helpersCore._makeLogicHelper(\"and\", function andHelper(args){\n\tif(args.length === 0 ) {\n\t\treturn false;\n\t}\n\tvar last;\n\tfor (var i = 0, len = args.length; i < len; i++) {\n\t\tlast = helpersCore.resolve(args[i]);\n\t\tif( !last  ) {\n\t\t\treturn last;\n\t\t}\n\t}\n\treturn last;\n});\n\nvar orHelper = helpersCore._makeLogicHelper(\"or\", function orHelper(args){\n\tif(args.length === 0 ) {\n\t\treturn false;\n\t}\n\tvar last;\n\tfor (var i = 0, len = args.length; i < len; i++) {\n\t\tlast = helpersCore.resolve(args[i]);\n\t\tif( last  ) {\n\t\t\treturn last;\n\t\t}\n\t}\n\treturn last;\n});\n\n\nvar switchHelper = function(expression, options){\n\thelpersCore.resolve(expression);\n\tvar found = false;\n\n\tvar caseHelper = function(value, options) {\n\t\tif(!found && helpersCore.resolve(expression) === helpersCore.resolve(value)) {\n\t\t\tfound = true;\n\t\t\treturn options.fn(options.scope);\n\t\t}\n\t};\n\tcaseHelper.requiresOptionsArgument = true;\n\n\t// create default helper as a value-like function\n\t// so that either {{#default}} or {{#default()}} will work\n\tvar defaultHelper = function(options) {\n\t\tif (!found) {\n\t\t\treturn options ? options.scope.peek('this') : true;\n\t\t}\n\t};\n\tdefaultHelper.requiresOptionsArgument = true;\n\tcanReflect_1_19_2_canReflect.assignSymbols(defaultHelper, {\n\t\t\"can.isValueLike\": true,\n\t\t\"can.isFunctionLike\": false,\n\t\t\"can.getValue\": function() {\n\t\t\t// pass the helperOptions passed to {{#switch}}\n\t\t\treturn this(options);\n\t\t}\n\t});\n\n\tvar newScope = options.scope.add({\n\t\tcase: caseHelper,\n\t\tdefault: defaultHelper\n\t}, { notContext: true });\n\n\treturn options.fn(newScope, options);\n};\nswitchHelper.requiresOptionsArgument = true;\n\n\n// ## ODD HELPERS\n\nvar domDataHelper = function(attr, value) {\n\tvar data = (helpersCore.looksLikeOptions(value) ? value.context : value) || this;\n\treturn function setDomData(el) {\n\t\tcanDomData_1_0_3_canDomData.set( el, attr, data );\n\t};\n};\n\nvar joinBaseHelper = function(firstExpr/* , expr... */){\n\tvar args = [].slice.call(arguments);\n\tvar options = args.pop();\n\n\tvar moduleReference = args.map( function(expr){\n\t\tvar value = helpersCore.resolve(expr);\n\t\treturn typeof value === \"function\" ? value() : value;\n\t}).join(\"\");\n\n\tvar templateModule = canReflect_1_19_2_canReflect.getKeyValue(options.scope.templateContext.helpers, 'module');\n\tvar parentAddress = templateModule ? templateModule.uri: undefined;\n\n\tvar isRelative = moduleReference[0] === \".\";\n\n\tif(isRelative && parentAddress) {\n\t\treturn canJoinUris_1_2_0_canJoinUris(parentAddress, moduleReference);\n\t} else {\n\t\tvar baseURL = (typeof System !== \"undefined\" &&\n\t\t\t(System.renderingBaseURL || System.baseURL)) ||\tbaseUrl();\n\n\t\t// Make sure one of them has a needed /\n\t\tif(moduleReference[0] !== \"/\" && baseURL[baseURL.length - 1] !== \"/\") {\n\t\t\tbaseURL += \"/\";\n\t\t}\n\n\t\treturn canJoinUris_1_2_0_canJoinUris(baseURL, moduleReference);\n\t}\n};\njoinBaseHelper.requiresOptionsArgument = true;\n\n// ## LEGACY HELPERS\n\n// ### each\nvar eachHelper = function(items) {\n\tvar args = [].slice.call(arguments),\n\t\toptions = args.pop(),\n\t\thashExprs = options.exprData.hashExprs,\n\t\tresolved = helpersCore.bindAndRead(items),\n\t\thashOptions,\n\t\taliases;\n\n\t// Check if using hash\n\tif (canReflect_1_19_2_canReflect.size(hashExprs) > 0) {\n\t\thashOptions = {};\n\t\tcanReflect_1_19_2_canReflect.eachKey(hashExprs, function (exprs, key) {\n\t\t\thashOptions[exprs.key] = key;\n\t\t});\n\t}\n\n\tif ((\n\t\tcanReflect_1_19_2_canReflect.isObservableLike(resolved) && canReflect_1_19_2_canReflect.isListLike(resolved) ||\n\t\t\t( canReflect_1_19_2_canReflect.isListLike(resolved) && canReflect_1_19_2_canReflect.isValueLike(items) )\n\t) && !options.stringOnly) {\n\t\t// Tells that a helper has been called, this function should be returned through\n\t\t// checking its value.\n\t\toptions.metadata.rendered = true;\n\t\treturn function(el){\n\t\t\tvar cb = function (item, index) {\n\t\t\t\tvar aliases = {};\n\n\t\t\t\tif (canReflect_1_19_2_canReflect.size(hashOptions) > 0) {\n\t\t\t\t\tif (hashOptions.value) {\n\t\t\t\t\t\taliases[hashOptions.value] = item;\n\t\t\t\t\t}\n\t\t\t\t\tif (hashOptions.index) {\n\t\t\t\t\t\taliases[hashOptions.index] = index;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn options.fn(\n\t\t\t\t\toptions.scope\n\t\t\t\t\t.add(aliases, { notContext: true })\n\t\t\t\t\t.add({ index: index }, { special: true })\n\t\t\t\t\t.add(item),\n\t\t\t\toptions.options\n\t\t\t\t);\n\t\t\t};\n\n\t\t\tcanViewLive_5_0_5_canViewLive.list(el, items, cb, options.context , function(list){\n\t\t\t\treturn options.inverse(options.scope.add(list), options.options);\n\t\t\t});\n\t\t};\n\t}\n\n\tvar expr = helpersCore.resolve(items),\n\t\tresult;\n\n\tif (!!expr && canReflect_1_19_2_canReflect.isListLike(expr)) {\n\t\tresult = utils$1.getItemsFragContent(expr, options, options.scope);\n\t\treturn options.stringOnly ? result.join('') : result;\n\t} else if (canReflect_1_19_2_canReflect.isObservableLike(expr) && canReflect_1_19_2_canReflect.isMapLike(expr) || expr instanceof Object) {\n\t\tresult = [];\n\t\tcanReflect_1_19_2_canReflect.each(expr, function(val, key){\n\t\t\tvar value = new keyObservable(expr, key);\n\t\t\taliases = {};\n\n\t\t\tif (canReflect_1_19_2_canReflect.size(hashOptions) > 0) {\n\t\t\t\tif (hashOptions.value) {\n\t\t\t\t\taliases[hashOptions.value] = value;\n\t\t\t\t}\n\t\t\t\tif (hashOptions.key) {\n\t\t\t\t\taliases[hashOptions.key] = key;\n\t\t\t\t}\n\t\t\t}\n\t\t\tresult.push(options.fn(\n\t\t\t\toptions.scope\n\t\t\t\t.add(aliases, { notContext: true })\n\t\t\t\t.add({ key: key }, { special: true })\n\t\t\t\t.add(value)\n\t\t\t));\n\t\t});\n\n\t\treturn options.stringOnly ? result.join('') : result;\n\t}\n};\neachHelper.isLiveBound = true;\neachHelper.requiresOptionsArgument = true;\neachHelper.ignoreArgLookup = function ignoreArgLookup(index) {\n\treturn index === 1;\n};\n\n// ### index\n// This is legacy for `{{index(5)}}`\nvar indexHelper = canAssign_1_3_3_canAssign(function indexHelper(offset, options) {\n\tif (!options) {\n\t\toptions = offset;\n\t\toffset = 0;\n\t}\n\tvar index = options.scope.peek(\"scope.index\");\n\treturn \"\"+((typeof(index) === \"function\" ? index() : index) + offset);\n}, {requiresOptionsArgument: true});\n\n// ### WITH HELPER\nvar withHelper = function (expr, options) {\n\tvar ctx = expr;\n\tif(!options) {\n\t\t// hash-only case if no current context expression\n\t\toptions = expr;\n\t\texpr = true;\n\t\tctx = options.hash;\n\t} else {\n\t\texpr = helpersCore.resolve(expr);\n\t\tif(options.hash && canReflect_1_19_2_canReflect.size(options.hash) > 0) {\n\t\t\t// presumably rare case of both a context object AND hash keys\n\t\t\t// Leaving it undocumented for now, but no reason not to support it.\n\t\t\tctx = options.scope.add(options.hash, { notContext: true }).add(ctx);\n\t\t}\n\t}\n\treturn options.fn(ctx || {});\n};\nwithHelper.requiresOptionsArgument = true;\n\n// ### data helper\nvar dataHelper = function(attr, value) {\n\tvar data = (helpersCore.looksLikeOptions(value) ? value.context : value) || this;\n\treturn function setData(el) {\n\t\t//!steal-remove-start\n\t\tif (process.env.NODE_ENV !== 'production') {\n\t\t\tdev.warn('The {{data}} helper has been deprecated; use {{domData}} instead: https://canjs.com/doc/can-stache.helpers.domData.html');\n\t\t}\n\t\t//!steal-remove-end\n\t\tcanDomData_1_0_3_canDomData.set( el, attr, data );\n\t};\n};\n\n// ## UNLESS HELPER\nvar unlessHelper = function (expr, options) {\n\tif(!options) {\n\t\treturn !ifHelper.apply(this, [expr]);\n\t}\n\treturn ifHelper.apply(this, [expr, canAssign_1_3_3_canAssign(canAssign_1_3_3_canAssign({}, options), {\n\t\tfn: options.inverse,\n\t\tinverse: options.fn\n\t})]);\n};\nunlessHelper.requiresOptionsArgument = true;\nunlessHelper.isLiveBound = true;\n\n\n// ## Converters\n// ## NOT converter\nvar notConverter = {\n\tget: function(obs, options){\n\t\tif(helpersCore.looksLikeOptions(options)) {\n\t\t\treturn canReflect_1_19_2_canReflect.getValue(obs) ? options.inverse() : options.fn();\n\t\t} else {\n\t\t\treturn !canReflect_1_19_2_canReflect.getValue(obs);\n\t\t}\n\t},\n\tset: function(newVal, obs){\n\t\tcanReflect_1_19_2_canReflect.setValue(obs, !newVal);\n\t}\n};\n\n// ## Register as defaults\n\ncanAssign_1_3_3_canAssign(builtInHelpers, {\n\t'debugger': debuggerHelper$1,\n\teach: eachHelper,\n\teachOf: eachHelper,\n\tindex: indexHelper,\n\t'if': ifHelper,\n\tis: isHelper,\n\teq: isHelper,\n\tunless: unlessHelper,\n\t'with': withHelper,\n\tconsole: console,\n\tdata: dataHelper,\n\tdomData: domDataHelper,\n\t'switch': switchHelper,\n\tjoinBase: joinBaseHelper,\n\tand: andHelper,\n\tor: orHelper,\n\t'let': Let,\n\t'for': ForOf,\n\tportal: Portal\n});\n\ncanAssign_1_3_3_canAssign(builtInConverters, {\n\t'not': notConverter\n});\n\n// add all the built-in helpers when stache is loaded\nhelpersCore.addBuiltInHelpers();\nhelpersCore.addBuiltInConverters();\n\nvar core$1 = helpersCore;\n\nvar mustacheLineBreakRegExp$1 = /(?:(^|\\r?\\n)(\\s*)(\\{\\{([\\s\\S]*)\\}\\}\\}?)([^\\S\\n\\r]*)($|\\r?\\n))|(\\{\\{([\\s\\S]*)\\}\\}\\}?)/g,\n\tmustacheWhitespaceRegExp$1 = /(\\s*)(\\{\\{\\{?)(-?)([\\s\\S]*?)(-?)(\\}\\}\\}?)(\\s*)/g;\n\nfunction splitModeFromExpression$1(expression, state){\n\texpression = expression.trim();\n\tvar mode = expression.charAt(0);\n\n\tif( \"#/{&^>!<\".indexOf(mode) >= 0 ) {\n\t\texpression =  expression.substr(1).trim();\n\t} else {\n\t\tmode = null;\n\t}\n\t// Triple braces do nothing within a tag.\n\tif(mode === \"{\" && state.node) {\n\t\tmode = null;\n\t}\n\treturn {\n\t\tmode: mode,\n\t\texpression: expression\n\t};\n}\n\nfunction cleanLineEndings(template) {\n\t\t// Finds mustache tags with space around them or no space around them.\n\t\treturn template.replace( mustacheLineBreakRegExp$1,\n\t\t\tfunction(whole,\n\t\t\t\treturnBefore,\n\t\t\t\tspaceBefore,\n\t\t\t\tspecial,\n\t\t\t\texpression,\n\t\t\t\tspaceAfter,\n\t\t\t\treturnAfter,\n\t\t\t\t// A mustache magic tag that has no space around it.\n\t\t\t\tspaceLessSpecial,\n\t\t\t\tspaceLessExpression,\n\t\t\t\tmatchIndex){\n\n\t\t\t// IE 8 will provide undefined\n\t\t\tspaceAfter = (spaceAfter || \"\");\n\t\t\treturnBefore = (returnBefore || \"\");\n\t\t\tspaceBefore = (spaceBefore || \"\");\n\n\t\t\tvar modeAndExpression = splitModeFromExpression$1(expression || spaceLessExpression,{});\n\n\t\t\t// If it's a partial or tripple stache, leave in place.\n\t\t\tif(spaceLessSpecial || \">{\".indexOf( modeAndExpression.mode) >= 0) {\n\t\t\t\treturn whole;\n\t\t\t}  else if( \"^#!/\".indexOf(  modeAndExpression.mode ) >= 0 ) {\n\t\t\t\t// Return the magic tag and a trailing linebreak if this did not\n\t\t\t\t// start a new line and there was an end line.\n\t\t\t\t// Add a normalized leading space, if there was any leading space, in case this abuts a tag name\n\t\t\t\tspaceBefore = (returnBefore + spaceBefore) && \" \";\n\t\t\t\treturn spaceBefore+special+( matchIndex !== 0 && returnAfter.length ? returnBefore+\"\\n\" :\"\");\n\n\n\t\t\t} else {\n\t\t\t\t// There is no mode, return special with spaces around it.\n\t\t\t\treturn spaceBefore+special+spaceAfter+(spaceBefore.length || matchIndex !== 0 ? returnBefore+\"\\n\" : \"\");\n\t\t\t}\n\t\t});\n}\n\nfunction whiteSpaceReplacement(\n\twhole,\n\tspaceBefore,\n\tbracketBefore,\n\tcontrolBefore,\n\texpression,\n\tcontrolAfter,\n\tbracketAfter,\n\tspaceAfter\n) {\n\n\tif (controlBefore === '-') {\n\t\tspaceBefore = '';\n\t}\n\n\tif (controlAfter === '-') {\n\t\tspaceAfter = '';\n\t}\n\n\treturn spaceBefore + bracketBefore + expression + bracketAfter + spaceAfter;\n}\n\nfunction cleanWhitespaceControl(template) {\n\treturn template.replace(mustacheWhitespaceRegExp$1, whiteSpaceReplacement);\n}\n\nvar cleanLineEndings_1 = cleanLineEndings;\nvar cleanWhitespaceControl_1 = cleanWhitespaceControl;\n\nvar canStacheAst_1_1_0_controls = {\n\tcleanLineEndings: cleanLineEndings_1,\n\tcleanWhitespaceControl: cleanWhitespaceControl_1\n};\n\nvar parse = function(filename, source){\n\tif (arguments.length === 1) {\n\t\tsource = arguments[0];\n\t\tfilename = undefined;\n\t}\n\n\tvar template = source;\n\ttemplate = canStacheAst_1_1_0_controls.cleanWhitespaceControl(template);\n\ttemplate = canStacheAst_1_1_0_controls.cleanLineEndings(template);\n\n\tvar imports = [],\n\t\tdynamicImports = [],\n\t\timportDeclarations = [],\n\t\tases = {},\n\t\tattributes = new Map(),\n\t\tinImport = false,\n\t\tinFrom = false,\n\t\tinAs = false,\n\t\tisUnary = false,\n\t\timportIsDynamic = false,\n\t\tcurrentAs = \"\",\n\t\tcurrentFrom = \"\",\n\t\tcurrentAttrName = null;\n\n\tfunction processImport(line) {\n\t\tif(currentAs) {\n\t\t\tases[currentAs] = currentFrom;\n\t\t\tcurrentAs = \"\";\n\t\t}\n\t\tif(importIsDynamic) {\n\t\t\tdynamicImports.push(currentFrom);\n\t\t} else {\n\t\t\timports.push(currentFrom);\n\t\t}\n\t\timportDeclarations.push({\n\t\t\tspecifier: currentFrom,\n\t\t\tloc: {\n\t\t\t\tline: line\n\t\t\t},\n\t\t\tattributes: attributes\n\t\t});\n\n\t\t// Reset this scope value so that the next import gets new attributes.\n\t\tattributes = new Map();\n\t}\n\n\tvar program = canViewParser_4_1_3_canViewParser(template, {\n\t\tfilename: filename,\n\t\tstart: function( tagName, unary ){\n\t\t\tif(tagName === \"can-import\") {\n\t\t\t\tisUnary = unary;\n\t\t\t\timportIsDynamic = false; // assume static import unless there is content (chars/tags/special).\n\t\t\t\tinImport = true;\n\t\t\t} else if(tagName === \"can-dynamic-import\") {\n\t\t\t\tisUnary = unary;\n\t\t\t\timportIsDynamic = true;\n\t\t\t\tinImport = true;\n\t\t\t} else if(inImport) {\n\t\t\t\timportIsDynamic = true;  // found content inside can-import tag.\n\t\t\t\tinImport = false;\n\t\t\t}\n\t\t},\n\t\tattrStart: function( attrName ){\n\t\t\tcurrentAttrName = attrName;\n\t\t\t// Default to a boolean attribute, the attrValue hook will replace that.\n\t\t\tattributes.set(currentAttrName, true);\n\n\t\t\tif(attrName === \"from\") {\n\t\t\t\tinFrom = true;\n\t\t\t} else if(attrName === \"as\" || attrName === \"export-as\") {\n\t\t\t\tinAs = true;\n\t\t\t}\n\t\t},\n\t\tattrEnd: function( attrName ){\n\t\t\tif(attrName === \"from\") {\n\t\t\t\tinFrom = false;\n\t\t\t} else if(attrName === \"as\" || attrName === \"export-as\") {\n\t\t\t\tinAs = false;\n\t\t\t}\n\t\t},\n\t\tattrValue: function( value ){\n\t\t\tif(inImport) {\n\t\t\t\tattributes.set(currentAttrName, value);\n\t\t\t}\n\t\t\tif(inFrom && inImport) {\n\t\t\t\tcurrentFrom = value;\n\t\t\t} else if(inAs && inImport) {\n\t\t\t\tcurrentAs = value;\n\t\t\t}\n\t\t},\n\t\tend: function(tagName, unary, line){\n\t\t\tif((tagName === \"can-import\" || tagName === \"can-dynamic-import\") && isUnary) {\n\t\t\t\tprocessImport(line);\n\t\t\t}\n\t\t},\n\t\tclose: function(tagName, unary, line){\n\t\t\tif((tagName === \"can-import\" || tagName === \"can-dynamic-import\")) {\n\t\t\t\tprocessImport(line);\n\t\t\t}\n\t\t},\n\t\tchars: function(text) {\n\t\t\tif(text.trim().length > 0) {\n\t\t\t\timportIsDynamic = true;\n\t\t\t}\n\t\t},\n\t\tspecial: function() {\n\t\t\timportIsDynamic = true;\n\t\t}\n\t}, true);\n\n\treturn {\n\t\tintermediate: program,\n\t\tprogram: program,\n\t\timports: imports,\n\t\tdynamicImports: dynamicImports,\n\t\timportDeclarations: importDeclarations,\n\t\tases: ases,\n\t\texports: ases\n\t};\n};\n\nvar canStacheAst_1_1_0_canStacheAst = {\n\tparse: parse\n};\n\nvar global$2 = global_1();\n\nvar stealOptimized = function(moduleName, parentName){\n\tif (typeof global$2.stealRequire !== \"undefined\") {\n\t\treturn steal.import(moduleName, { name: parentName });\n\t}\n};\n\nvar global$3 = global_1();\n\nfunction isFunction$1(fn) {\n\treturn typeof fn === \"function\";\n}\n// since stealJS uses a SystemJS fork and SystemJS is exposed globally we can use this loader for SystemJS or stealJS\nvar system = function(moduleName, parentName) {\n\tif(typeof global$3.System === \"object\" && isFunction$1(global$3.System[\"import\"])) {\n\t\treturn global$3.System[\"import\"](moduleName, {\n\t\t\tname: parentName\n\t\t});\n\t}\n};\n\nvar es6 = createCommonjsModule(function (module) {\n// check for `noModule` in HTMLScriptElement. if its present, then the browser can handle dynamic loading because if\n// HTMLScriptElement.noModule is `true` the browser used to run fallback scripts in older browsers that do not support JavaScript modules\nif (\"HTMLScriptElement\" in global_1() && \"noModule\" in HTMLScriptElement.prototype) {\n\t// \"import()\" is a syntax error on some platforms and will cause issues if this module is bundled\n\t//  into a larger script bundle, so only eval it to code if the platform is known to support it.\n\tmodule.exports = new Function(\n\t\t\"moduleName\",\n\t\t// if moduleName has no extension, treat it as a javascript file and add .js extension\n\t\t\"if (!(moduleName.match(/[^\\\\\\\\\\\\/]\\\\.([^.\\\\\\\\\\\\/]+)$/) || [null]).pop()) {\\n\" +\n\t\t\t\"moduleName += '.js';\\n\" +\n\t\t\"}\\n\" +\n\t\t\"return import(moduleName.replace(/['\\\"]+/g, ''));\\n\"\n\t);\n} else {\n\tmodule.exports = function() {};\n}\n});\n\nvar node$1 = function(moduleName) {\n\tif (isNode()) {\n\t\treturn Promise.resolve(commonjsRequire(moduleName));\n\t}\n};\n\nvar global$4 = global_1();\n\n// AMD loader\nvar require = function(moduleName){\n\tif(global$4.define && global$4.define.amd){\n\t\treturn new Promise(function(resolve, reject) {\n\t\t\tglobal$4.require([moduleName], function(value){\n\t\t\t\tresolve(value);\n\t\t\t});\n\t\t});\n\t}\n};\n\n/**\n * @module {function} can-util/js/import/import import\n * @parent can-util/js\n * @signature `importModule(moduleName, parentName)`\n * @hide\n *\n * ```js\n * var importModule = require(\"can-util/js/import/import\");\n *\n * importModule(\"foo.stache\").then(function(){\n *   // module was imported\n * });\n * ```\n *\n * @param {String} moduleName The module to be imported.\n * @param {String} [parentName] A parent module that will be used as a reference for resolving relative module imports.\n * @return {Promise} A Promise that will resolve when the module has been imported.\n */\n\n// array of loader functions, last in first out\nvar loader = [];\n\n/**\n * add a loader-function to the list of loader\n * the function should return a promise that resolves when the module has been loaded\n * otherwise the loader function should return null or undefined\n * \n * @signature `import.addLoader(loader)`\n * @param fn callable\n */\nfunction addLoader(fn){\n\tif(typeof fn === \"function\"){\n\t\tloader.push(fn);\n\t}\n}\n\n/**\n * clear the list of loaders\n */\nfunction flushLoader(){\n\tloader = [];\n}\n\n/**\n * a bunch of presets that can be used in a certain environment \n * \n * @param preset string\n */\nfunction preset(preset){\n\tflushLoader();\n\t\n\tswitch (preset){\n\t\tcase \"stealjs\":\n\t\t\taddLoader(stealOptimized);\n\t\t\taddLoader(system);\n\t\t\tbreak;\n\t\tcase \"ES2020\":\n\t\tcase \"es2020\":\n\t\tcase \"dynamic-import\":\n\t\t\taddLoader(es6);\n\t\t\tbreak;\n\t\tcase \"node\":\n\t\t\taddLoader(node$1);\n\t\t\tbreak;\n\t\tcase \"all\":\n\t\tdefault:\n\t\t\taddLoader(stealOptimized);\n\t\t\taddLoader(es6);\n\t\t\taddLoader(node$1);\n\t\t\taddLoader(require);\n\t\t\taddLoader(system);\n\t\t\tbreak;\n\t}\n}\n\n// by default, add all available loaders to the list\npreset('all');\n\nvar canImportModule_1_3_2_canImportModule = canNamespace_1_0_0_canNamespace.import = function(moduleName, parentName) {\n\treturn new Promise(function(resolve, reject) {\n\t\ttry {\n\t\t\tvar loaderPromise;\n\t\t\t// last added loader will be called first\n\t\t\tfor (var i = loader.length - 1; i >= 0; i--) {\n\t\t\t\tloaderPromise = loader[i](moduleName, parentName);\n\t\t\t\tif (loaderPromise) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(loaderPromise){\n\t\t\t\tloaderPromise.then(resolve, reject);\n\t\t\t}else{\n\t\t\t\treject(\"no proper module-loader available\");\n\t\t\t}\n\t\t} catch(err) {\n\t\t\treject(err);\n\t\t}\n\t});\n};\nvar addLoader_1 = addLoader;\nvar flushLoader_1 = flushLoader;\nvar preset_1 = preset;\ncanImportModule_1_3_2_canImportModule.addLoader = addLoader_1;\ncanImportModule_1_3_2_canImportModule.flushLoader = flushLoader_1;\ncanImportModule_1_3_2_canImportModule.preset = preset_1;\n\n/* jshint undef: false */\n\n\n\n\n\n\n\n\nvar getIntermediateAndImports = canStacheAst_1_1_0_canStacheAst.parse;\n\nvar makeRendererConvertScopes = utils$1.makeRendererConvertScopes;\nvar last$2 = utils$1.last;\n\n\n\n\n\n\n\n\n\n\n\n\n// Make sure that we can also use our modules with Stache as a plugin\n\n\n\n\nif(!canViewCallbacks_5_0_0_canViewCallbacks.tag(\"content\")) {\n\t// This was moved from the legacy view/scanner.js to here.\n\t// This makes sure content elements will be able to have a callback.\n\tcanViewCallbacks_5_0_0_canViewCallbacks.tag(\"content\", function(el, tagData) {\n\t\treturn tagData.scope;\n\t});\n}\n\nvar isViewSymbol$2 = canSymbol_1_7_0_canSymbol.for(\"can.isView\");\n\nvar wrappedAttrPattern = /[{(].*[)}]/;\nvar colonWrappedAttrPattern = /^on:|(:to|:from|:bind)$|.*:to:on:.*/;\nvar svgNamespace = \"http://www.w3.org/2000/svg\",\nxmlnsAttrNamespaceURI$1 = \"http://www.w3.org/2000/xmlns/\",\nxlinkHrefAttrNamespaceURI$1 =  \"http://www.w3.org/1999/xlink\";\nvar namespaces = {\n\t\"svg\": svgNamespace,\n\t// this allows a partial to start with g.\n\t\"g\": svgNamespace,\n\t\"defs\": svgNamespace,\n\t\"path\": svgNamespace,\n\t\"filter\": svgNamespace,\n\t\"feMorphology\": svgNamespace,\n\t\"feGaussianBlur\": svgNamespace,\n\t\"feOffset\": svgNamespace,\n\t\"feComposite\": svgNamespace,\n\t\"feColorMatrix\": svgNamespace,\n\t\"use\": svgNamespace\n},\n\tattrsNamespacesURI$1 = {\n\t\t'xmlns': xmlnsAttrNamespaceURI$1,\n\t\t'xlink:href': xlinkHrefAttrNamespaceURI$1\n\t},\n\ttextContentOnlyTag = {style: true, script: true};\n\nfunction stache (filename, template) {\n\tif (arguments.length === 1) {\n\t\ttemplate = arguments[0];\n\t\tfilename = undefined;\n\t}\n\n\tvar inlinePartials = {};\n\n\t// Remove line breaks according to mustache's specs.\n\tif(typeof template === \"string\") {\n\t\ttemplate = mustache_core.cleanWhitespaceControl(template);\n\t\ttemplate = mustache_core.cleanLineEndings(template);\n\t}\n\n\t// The HTML section that is the root section for the entire template.\n\tvar section = new html_section(filename),\n\t\t// Tracks the state of the parser.\n\t\tstate = {\n\t\t\tnode: null,\n\t\t\tattr: null,\n\t\t\t// A stack of which node / section we are in.\n\t\t\t// There is probably a better way of doing this.\n\t\t\tsectionElementStack: [],\n\t\t\t// If text should be inserted and HTML escaped\n\t\t\ttext: false,\n\t\t\t// which namespace we are in\n\t\t\tnamespaceStack: [],\n\t\t\t// for style and script tags\n\t\t\t// we create a special TextSectionBuilder and add things to that\n\t\t\t// when the element is done, we compile the text section and\n\t\t\t// add it as a callback to `section`.\n\t\t\ttextContentOnly: null\n\n\t\t},\n\n\t\t// This function is a catch all for taking a section and figuring out\n\t\t// how to create a \"renderer\" that handles the functionality for a\n\t\t// given section and modify the section to use that renderer.\n\t\t// For example, if an HTMLSection is passed with mode `#` it knows to\n\t\t// create a liveBindingBranchRenderer and pass that to section.add.\n\t\t// jshint maxdepth:5\n\t\tmakeRendererAndUpdateSection = function(section, mode, stache, lineNo){\n\n\t\t\tif(mode === \">\") {\n\t\t\t\t// Partials use liveBindingPartialRenderers\n\t\t\t\tsection.add(mustache_core.makeLiveBindingPartialRenderer(stache, copyState({ filename: section.filename, lineNo: lineNo })));\n\n\t\t\t} else if(mode === \"/\") {\n\n\t\t\t\tvar createdSection = section.last();\n\t\t\t\tif ( createdSection.startedWith === \"<\" ) {\n\t\t\t\t\tinlinePartials[ stache ] = section.endSubSectionAndReturnRenderer();\n\t\t\t\t\t// Remove *TWO* nodes because we now have a start and an end comment for the section....\n\t\t\t\t\tsection.removeCurrentNode();\n\t\t\t\t\tsection.removeCurrentNode();\n\t\t\t\t} else {\n\t\t\t\t\tsection.endSection();\n\t\t\t\t}\n\n\t\t\t\t// to avoid \"Blocks are nested too deeply\" when linting\n\t\t\t\t//!steal-remove-start\n\t\t\t\tif (process.env.NODE_ENV !== 'production') {\n\t\t\t\t\tif(section instanceof html_section) {\n\t\t\t\t\t\tvar last = state.sectionElementStack[state.sectionElementStack.length - 1];\n\t\t\t\t\t\tif (last.tag && last.type === \"section\" && stache !== \"\" && stache !== last.tag) {\n\t\t\t\t\t\t\tif (filename) {\n\t\t\t\t\t\t\t\tdev.warn(filename + \":\" + lineNo + \": unexpected closing tag {{/\" + stache + \"}} expected {{/\" + last.tag + \"}}\");\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tdev.warn(lineNo + \": unexpected closing tag {{/\" + stache + \"}} expected {{/\" + last.tag + \"}}\");\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t//!steal-remove-end\n\n\t\t\t\tif(section instanceof html_section) {\n\t\t\t\t\tstate.sectionElementStack.pop();\n\t\t\t\t}\n\t\t\t} else if(mode === \"else\") {\n\n\t\t\t\tsection.inverse();\n\n\t\t\t} else {\n\n\t\t\t\t// If we are an HTMLSection, we will generate a\n\t\t\t\t// a LiveBindingBranchRenderer; otherwise, a StringBranchRenderer.\n\t\t\t\t// A LiveBindingBranchRenderer function processes\n\t\t\t\t// the mustache text, and sets up live binding if an observable is read.\n\t\t\t\t// A StringBranchRenderer function processes the mustache text and returns a\n\t\t\t\t// text value.\n\t\t\t\tvar makeRenderer = section instanceof html_section ?\n\t\t\t\t\tmustache_core.makeLiveBindingBranchRenderer:\n\t\t\t\t\tmustache_core.makeStringBranchRenderer;\n\n\t\t\t\tif(mode === \"{\" || mode === \"&\") {\n\n\t\t\t\t\t// Adds a renderer function that just reads a value or calls a helper.\n\t\t\t\t\tsection.add(makeRenderer(null,stache, copyState({ filename: section.filename, lineNo: lineNo })));\n\n\t\t\t\t} else if(mode === \"#\" || mode === \"^\" || mode === \"<\") {\n\t\t\t\t\t// Adds a renderer function and starts a section.\n\t\t\t\t\tvar renderer = makeRenderer(mode, stache, copyState({ filename: section.filename, lineNo: lineNo }));\n\t\t\t\t\tvar sectionItem = {\n\t\t\t\t\t\ttype: \"section\"\n\t\t\t\t\t};\n\t\t\t\t\tsection.startSection(renderer, stache);\n\t\t\t\t\tsection.last().startedWith = mode;\n\n\t\t\t\t\t// If we are a directly nested section, count how many we are within\n\t\t\t\t\tif(section instanceof html_section) {\n\t\t\t\t\t\t//!steal-remove-start\n\t\t\t\t\t\tif (process.env.NODE_ENV !== 'production') {\n\t\t\t\t\t\t\tvar tag = typeof renderer.exprData.closingTag === 'function' ?\n\t\t\t\t\t\t\t\trenderer.exprData.closingTag() : stache;\n\t\t\t\t\t\t\tsectionItem.tag = tag;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t//!steal-remove-end\n\n\t\t\t\t\t\tstate.sectionElementStack.push(sectionItem);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// Adds a renderer function that only updates text.\n\t\t\t\t\tsection.add(makeRenderer(null, stache, copyState({text: true, filename: section.filename, lineNo: lineNo })));\n\t\t\t\t}\n\n\t\t\t}\n\t\t},\n\t\tisDirectlyNested = function() {\n\t\t\tvar lastElement = state.sectionElementStack[state.sectionElementStack.length - 1];\n\t\t\treturn state.sectionElementStack.length ?\n\t\t\t\tlastElement.type === \"section\" || lastElement.type === \"custom\": true;\n\t\t},\n\t\t// Copys the state object for use in renderers.\n\t\tcopyState = function(overwrites){\n\n\t\t\tvar cur = {\n\t\t\t\ttag: state.node && state.node.tag,\n\t\t\t\tattr: state.attr && state.attr.name,\n\t\t\t\t// <content> elements should be considered direclty nested\n\t\t\t\tdirectlyNested: isDirectlyNested(),\n\t\t\t\ttextContentOnly: !!state.textContentOnly\n\t\t\t};\n\t\t\treturn overwrites ? canAssign_1_3_3_canAssign(cur, overwrites) : cur;\n\t\t},\n\t\taddAttributesCallback = function(node, callback){\n\t\t\tif( !node.attributes ) {\n\t\t\t\tnode.attributes = [];\n\t\t\t}\n\t\t\tnode.attributes.unshift(callback);\n\t\t};\n\n\tcanViewParser_4_1_3_canViewParser(template, {\n\t\tfilename: filename,\n\t\tstart: function(tagName, unary, lineNo){\n\t\t\tvar matchedNamespace = namespaces[tagName];\n\n\t\t\tif (matchedNamespace && !unary ) {\n\t\t\t\tstate.namespaceStack.push(matchedNamespace);\n\t\t\t}\n\n\t\t\t// either add templates: {} here or check below and decorate\n\t\t\t// walk up the stack/targetStack until you find the first node\n\t\t\t// with a templates property, and add the popped renderer\n\t\t\tstate.node = {\n\t\t\t\ttag: tagName,\n\t\t\t\tchildren: [],\n\t\t\t\tnamespace: matchedNamespace || last$2(state.namespaceStack)\n\t\t\t};\n\t\t},\n\t\tend: function(tagName, unary, lineNo){\n\t\t\tvar isCustomTag =  canViewCallbacks_5_0_0_canViewCallbacks.tag(tagName);\n\t\t\tvar directlyNested = isDirectlyNested();\n\t\t\tif(unary){\n\t\t\t\t// If it's a custom tag with content, we need a section renderer.\n\t\t\t\tsection.add(state.node);\n\t\t\t\tif(isCustomTag) {\n\t\t\t\t\t// Call directlyNested now as it's stateful.\n\t\t\t\t\taddAttributesCallback(state.node, function(scope){\n\t\t\t\t\t\t//!steal-remove-start\n\t\t\t\t\t\tif (process.env.NODE_ENV !== 'production') {\n\t\t\t\t\t\t\tscope.set('scope.lineNumber', lineNo);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t//!steal-remove-end\n\t\t\t\t\t\tcanViewCallbacks_5_0_0_canViewCallbacks.tagHandler(this,tagName, {\n\t\t\t\t\t\t\tscope: scope,\n\t\t\t\t\t\t\tsubtemplate: null,\n\t\t\t\t\t\t\ttemplateType: \"stache\",\n\t\t\t\t\t\t\tdirectlyNested: directlyNested\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tsection.push(state.node);\n\n\t\t\t\tstate.sectionElementStack.push({\n\t\t\t\t\ttype: isCustomTag ? \"custom\" : null,\n\t\t\t\t\ttag: isCustomTag ? null : tagName,\n\t\t\t\t\ttemplates: {},\n\t\t\t\t\tdirectlyNested: directlyNested\n\t\t\t\t});\n\n\t\t\t\t// If it's a custom tag with content, we need a section renderer.\n\t\t\t\tif( isCustomTag ) {\n\t\t\t\t\tsection.startSubSection();\n\t\t\t\t} else if(textContentOnlyTag[tagName]) {\n\t\t\t\t\tstate.textContentOnly = new text_section(filename);\n\t\t\t\t}\n\t\t\t}\n\n\n\t\t\tstate.node =null;\n\n\t\t},\n\t\tclose: function(tagName, lineNo) {\n\t\t\tvar matchedNamespace = namespaces[tagName];\n\n\t\t\tif (matchedNamespace  ) {\n\t\t\t\tstate.namespaceStack.pop();\n\t\t\t}\n\n\t\t\tvar isCustomTag = canViewCallbacks_5_0_0_canViewCallbacks.tag(tagName),\n\t\t\t\trenderer;\n\n\t\t\tif( isCustomTag ) {\n\t\t\t\trenderer = section.endSubSectionAndReturnRenderer();\n\t\t\t}\n\n\t\t\tif(textContentOnlyTag[tagName]) {\n\t\t\t\tsection.last().add(state.textContentOnly.compile(copyState()));\n\t\t\t\tstate.textContentOnly = null;\n\t\t\t}\n\n\t\t\tvar oldNode = section.pop();\n\t\t\tif( isCustomTag ) {\n\t\t\t\tif (tagName === \"can-template\") {\n\t\t\t\t\t// If we find a can-template we want to go back 2 in the stack to get it's inner content\n\t\t\t\t\t// rather than the <can-template> element itself\n\t\t\t\t\tvar parent = state.sectionElementStack[state.sectionElementStack.length - 2];\n\t\t\t\t\tif (renderer) {// Only add the renderer if the template has content\n\t\t\t\t\t\tparent.templates[oldNode.attrs.name] = makeRendererConvertScopes(renderer);\n\t\t\t\t\t}\n\t\t\t\t\tsection.removeCurrentNode();\n\t\t\t\t} else {\n\t\t\t\t\t// Get the last element in the stack\n\t\t\t\t\tvar current = state.sectionElementStack[state.sectionElementStack.length - 1];\n\t\t\t\t\taddAttributesCallback(oldNode, function(scope){\n\t\t\t\t\t\t//!steal-remove-start\n\t\t\t\t\t\tif (process.env.NODE_ENV !== 'production') {\n\t\t\t\t\t\t\tscope.set('scope.lineNumber', lineNo);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t//!steal-remove-end\n\t\t\t\t\t\tcanViewCallbacks_5_0_0_canViewCallbacks.tagHandler(this,tagName, {\n\t\t\t\t\t\t\tscope: scope,\n\t\t\t\t\t\t\tsubtemplate: renderer  ? makeRendererConvertScopes(renderer) : renderer,\n\t\t\t\t\t\t\ttemplateType: \"stache\",\n\t\t\t\t\t\t\ttemplates: current.templates,\n\t\t\t\t\t\t\tdirectlyNested: current.directlyNested\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t\tstate.sectionElementStack.pop();\n\t\t},\n\t\tattrStart: function(attrName, lineNo){\n\t\t\tif(state.node.section) {\n\t\t\t\tstate.node.section.add(attrName+\"=\\\"\");\n\t\t\t} else {\n\t\t\t\tstate.attr = {\n\t\t\t\t\tname: attrName,\n\t\t\t\t\tvalue: \"\"\n\t\t\t\t};\n\t\t\t}\n\n\t\t},\n\t\tattrEnd: function(attrName, lineNo){\n\t\t\tvar matchedAttrNamespacesURI = attrsNamespacesURI$1[attrName];\n\t\t\tif(state.node.section) {\n\t\t\t\tstate.node.section.add(\"\\\" \");\n\t\t\t} else {\n\t\t\t\tif(!state.node.attrs) {\n\t\t\t\t\tstate.node.attrs = {};\n\t\t\t\t}\n\n\t\t\t\tif (state.attr.section) {\n\t\t\t\t\tstate.node.attrs[state.attr.name] = state.attr.section.compile(copyState());\n\t\t\t\t} else if (matchedAttrNamespacesURI) {\n\t\t\t\t\tstate.node.attrs[state.attr.name] = {\n\t\t\t\t\t\tvalue: state.attr.value,\n\t\t\t\t\t\tnamespaceURI: attrsNamespacesURI$1[attrName]\n\t\t\t\t\t};\n\t\t\t\t} else {\n\t\t\t\t\tstate.node.attrs[state.attr.name] = state.attr.value;\n\t\t\t\t}\n\n\t\t\t\tvar attrCallback = canViewCallbacks_5_0_0_canViewCallbacks.attr(attrName);\n\n\t\t\t\t//!steal-remove-start\n\t\t\t\tif (process.env.NODE_ENV !== 'production') {\n\t\t\t\t\tvar decodedAttrName = canAttributeEncoder_1_1_4_canAttributeEncoder.decode(attrName);\n\t\t\t\t\tvar weirdAttribute = !!wrappedAttrPattern.test(decodedAttrName) || !!colonWrappedAttrPattern.test(decodedAttrName);\n\t\t\t\t\tif (weirdAttribute && !attrCallback) {\n\t\t\t\t\t\tdev.warn(\"unknown attribute binding \" + decodedAttrName + \". Is can-stache-bindings imported?\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t//!steal-remove-end\n\n\t\t\t\tif(attrCallback) {\n\t\t\t\t\tif( !state.node.attributes ) {\n\t\t\t\t\t\tstate.node.attributes = [];\n\t\t\t\t\t}\n\t\t\t\t\tstate.node.attributes.push(function(scope){\n\t\t\t\t\t\t//!steal-remove-start\n\t\t\t\t\t\tif (process.env.NODE_ENV !== 'production') {\n\t\t\t\t\t\t\tscope.set('scope.lineNumber', lineNo);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t//!steal-remove-end\n\t\t\t\t\t\tattrCallback(this,{\n\t\t\t\t\t\t\tattributeName: attrName,\n\t\t\t\t\t\t\tscope: scope\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tstate.attr = null;\n\t\t\t}\n\t\t},\n\t\tattrValue: function(value, lineNo){\n\t\t\tvar section = state.node.section || state.attr.section;\n\t\t\tif(section){\n\t\t\t\tsection.add(value);\n\t\t\t} else {\n\t\t\t\tstate.attr.value += value;\n\t\t\t}\n\t\t},\n\t\tchars: function(text, lineNo) {\n\t\t\t(state.textContentOnly || section).add(text);\n\t\t},\n\t\tspecial: function(text, lineNo){\n\t\t\tvar firstAndText = mustache_core.splitModeFromExpression(text, state),\n\t\t\t\tmode = firstAndText.mode,\n\t\t\t\texpression = firstAndText.expression;\n\n\n\t\t\tif(expression === \"else\") {\n\t\t\t\tvar inverseSection;\n\t\t\t\tif(state.attr && state.attr.section) {\n\t\t\t\t\tinverseSection = state.attr.section;\n\t\t\t\t} else if(state.node && state.node.section ) {\n\t\t\t\t\tinverseSection = state.node.section;\n\t\t\t\t} else {\n\t\t\t\t\tinverseSection = state.textContentOnly || section;\n\t\t\t\t}\n\t\t\t\tinverseSection.inverse();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif(mode === \"!\") {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif(state.node && state.node.section) {\n\n\t\t\t\tmakeRendererAndUpdateSection(state.node.section, mode, expression, lineNo);\n\n\t\t\t\tif(state.node.section.subSectionDepth() === 0){\n\t\t\t\t\tstate.node.attributes.push( state.node.section.compile(copyState()) );\n\t\t\t\t\tdelete state.node.section;\n\t\t\t\t}\n\n\t\t\t}\n\t\t\t// `{{}}` in an attribute like `class=\"{{}}\"`\n\t\t\telse if(state.attr) {\n\n\t\t\t\tif(!state.attr.section) {\n\t\t\t\t\tstate.attr.section = new text_section(filename);\n\t\t\t\t\tif(state.attr.value) {\n\t\t\t\t\t\tstate.attr.section.add(state.attr.value);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tmakeRendererAndUpdateSection(state.attr.section, mode, expression, lineNo);\n\n\t\t\t}\n\t\t\t// `{{}}` in a tag like `<div {{}}>`\n\t\t\telse if(state.node) {\n\n\t\t\t\tif(!state.node.attributes) {\n\t\t\t\t\tstate.node.attributes = [];\n\t\t\t\t}\n\t\t\t\tif(!mode) {\n\t\t\t\t\tstate.node.attributes.push(mustache_core.makeLiveBindingBranchRenderer(null, expression, copyState({ filename: section.filename, lineNo: lineNo })));\n\t\t\t\t} else if( mode === \"#\" || mode === \"^\" ) {\n\t\t\t\t\tif(!state.node.section) {\n\t\t\t\t\t\tstate.node.section = new text_section(filename);\n\t\t\t\t\t}\n\t\t\t\t\tmakeRendererAndUpdateSection(state.node.section, mode, expression, lineNo);\n\t\t\t\t} else {\n\t\t\t\t\tthrow new Error(mode+\" is currently not supported within a tag.\");\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tmakeRendererAndUpdateSection(state.textContentOnly || section, mode, expression, lineNo);\n\t\t\t}\n\t\t},\n\t\tcomment: function(text) {\n\t\t\t// create comment node\n\t\t\tsection.add({\n\t\t\t\tcomment: text\n\t\t\t});\n\t\t},\n\t\tdone: function(lineNo){\n\t\t\t//!steal-remove-start\n\t\t\t// warn if closing magic tag is missed #675\n\t\t\tif (process.env.NODE_ENV !== 'production') {\n\t\t\t\tvar last = state.sectionElementStack[state.sectionElementStack.length - 1];\n\t\t\t\tif (last && last.tag && last.type === \"section\") {\n\t\t\t\t\tif (filename) {\n\t\t\t\t\t\tdev.warn(filename + \":\" + lineNo + \": closing tag {{/\" + last.tag + \"}} was expected\");\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tdev.warn(lineNo + \": closing tag {{/\" + last.tag + \"}} was expected\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t//!steal-remove-end\n\t\t}\n\t});\n\n\tvar renderer = section.compile();\n\n\tvar scopifiedRenderer = canObservationRecorder_1_3_1_canObservationRecorder.ignore(function(scope, options){\n\t\t// if an object is passed to options, assume it is the helpers object\n\t\tif (options && !options.helpers && !options.partials && !options.tags) {\n\t\t\toptions = {\n\t\t\t\thelpers: options\n\t\t\t};\n\t\t}\n\t\t// mark passed in helper so they will be automatically passed\n\t\t// helperOptions (.fn, .inverse, etc) when called as Call Expressions\n\t\tcanReflect_1_19_2_canReflect.eachKey(options && options.helpers, function(helperValue) {\n\t\t\thelperValue.requiresOptionsArgument = true;\n\t\t});\n\n\t\t// helpers, partials, tags, vars\n\t\tvar templateContext = new canViewScope_4_13_7_templateContext(options);\n\n\t\t// copy inline partials over\n\t\tcanReflect_1_19_2_canReflect.eachKey(inlinePartials, function(partial, partialName) {\n\t\t\tcanReflect_1_19_2_canReflect.setKeyValue(templateContext.partials, partialName, partial);\n\t\t});\n\n\t\t// allow the current renderer to be called with {{>scope.view}}\n\t\tcanReflect_1_19_2_canReflect.setKeyValue(templateContext, 'view', scopifiedRenderer);\n\t\t//!steal-remove-start\n\t\tif (process.env.NODE_ENV !== 'production') {\n\t\t\tcanReflect_1_19_2_canReflect.setKeyValue(templateContext, 'filename', section.filename);\n\t\t}\n\t\t//!steal-remove-end\n\n\n\t\t// now figure out the final structure ...\n\t\tif ( !(scope instanceof canViewScope_4_13_7_canViewScope) ) {\n\t\t\tscope = new canViewScope_4_13_7_canViewScope(templateContext).add(scope);\n\t\t} else {\n\t\t\t// we are going to split ...\n\t\t\tvar templateContextScope = new canViewScope_4_13_7_canViewScope(templateContext);\n\t\t\ttemplateContextScope._parent = scope._parent;\n\t\t\tscope._parent = templateContextScope;\n\t\t}\n\n\t\treturn renderer(scope.addLetContext());\n\t});\n\n\t// Identify is a view type\n\tscopifiedRenderer[isViewSymbol$2] = true;\n\n\treturn scopifiedRenderer;\n}\n\n// At this point, can.stache has been created\ncanAssign_1_3_3_canAssign(stache, core$1);\n\nstache.safeString = function(text){\n\n\treturn canReflect_1_19_2_canReflect.assignSymbols({},{\n\t\t\"can.toDOM\": function(){\n\t\t\treturn text;\n\t\t}\n\t});\n};\nstache.async = function(source){\n\tvar iAi = getIntermediateAndImports(source);\n\tvar importPromises = iAi.imports.map(function(moduleName){\n\t\treturn canImportModule_1_3_2_canImportModule(moduleName);\n\t});\n\treturn Promise.all(importPromises).then(function(){\n\t\treturn stache(iAi.intermediate);\n\t});\n};\nvar templates = {};\nstache.from = mustache_core.getTemplateById = function(id){\n\tif(!templates[id]) {\n\t\tvar el = document$1().getElementById(id);\n\t\tif(el) {\n\t\t\ttemplates[id] = stache(\"#\" + id, el.innerHTML);\n\t\t}\n\t}\n\treturn templates[id];\n};\n\nstache.registerPartial = function(id, partial) {\n\ttemplates[id] = (typeof partial === \"string\" ? stache(partial) : partial);\n};\n\nstache.addBindings = canViewCallbacks_5_0_0_canViewCallbacks.attrs;\n\nvar canStache_5_1_1_canStache = canNamespace_1_0_0_canNamespace.stache = stache;\n\nvar viewModelSymbol = canSymbol_1_7_0_canSymbol.for('can.viewModel');\n\nvar canViewModel_4_0_3_canViewModel = canNamespace_1_0_0_canNamespace.viewModel = function (el, attr, val) {\n\tif (typeof el === \"string\") {\n\t\tel = document$1().querySelector(el);\n\t} else if (canReflect_1_19_2_canReflect.isListLike(el) && !el.nodeType) {\n\t\tel = el[0];\n\t}\n\n\tif (canReflect_1_19_2_canReflect.isObservableLike(attr) && canReflect_1_19_2_canReflect.isMapLike(attr)) {\n\t\tel[viewModelSymbol] = attr;\n\t\treturn;\n\t}\n\n\tvar scope = el[viewModelSymbol];\n\tif(!scope) {\n\t\tscope = new canSimpleMap_4_3_3_canSimpleMap();\n\t\tel[viewModelSymbol] = scope;\n\t}\n\tswitch (arguments.length) {\n\t\tcase 0:\n\t\tcase 1:\n\t\t\treturn scope;\n\t\tcase 2:\n\t\t\treturn canReflect_1_19_2_canReflect.getKeyValue(scope, attr);\n\t\tdefault:\n\t\t\tcanReflect_1_19_2_canReflect.setKeyValue(scope, attr, val);\n\t\t\treturn el;\n\t}\n};\n\nvar isDomEventTarget$2 = util.isDomEventTarget;\n\nvar canEvent = {\n\ton: function on(eventName, handler, queue) {\n\t\tif (isDomEventTarget$2(this)) {\n\t\t\tcanDomEvents_1_3_13_canDomEvents.addEventListener(this, eventName, handler, queue);\n\t\t} else {\n\t\t\tcanReflect_1_19_2_canReflect.onKeyValue(this, eventName, handler, queue);\n\t\t}\n\t},\n\toff: function off(eventName, handler, queue) {\n\t\tif (isDomEventTarget$2(this)) {\n\t\t\tcanDomEvents_1_3_13_canDomEvents.removeEventListener(this, eventName, handler, queue);\n\t\t} else {\n\t\t\tcanReflect_1_19_2_canReflect.offKeyValue(this, eventName, handler, queue);\n\t\t}\n\t},\n\tone: function one(event, handler, queue) {\n\t\t// Unbind the listener after it has been executed\n\t\tvar one = function() {\n\t\t\tcanEvent.off.call(this, event, one, queue);\n\t\t\treturn handler.apply(this, arguments);\n\t\t};\n\n\t\t// Bind the altered listener\n\t\tcanEvent.on.call(this, event, one, queue);\n\t\treturn this;\n\t}\n};\n\nvar canAttributeObservable_2_0_2_event = canEvent;\n\nvar isRadioInput = function isRadioInput(el) {\n\treturn el.nodeName.toLowerCase() === \"input\" && el.type === \"radio\";\n};\n\n// Determine the event or events we need to listen to when this value changes.\nvar canAttributeObservable_2_0_2_getEventName = function getEventName(el, prop) {\n\tvar event = \"change\";\n\n\tif (isRadioInput(el) && prop === \"checked\" ) {\n\t\tevent = \"can-attribute-observable-radiochange\";\n\t}\n\n\tif (canAttributeObservable_2_0_2_behaviors.findSpecialListener(prop)) {\n\t\tevent = prop;\n\t}\n\n\treturn event;\n};\n\nfunction getRoot () {\n\treturn document$1().documentElement;\n}\n\nfunction findParentForm (el) {\n\twhile (el) {\n\t\tif (el.nodeName === 'FORM') {\n\t\t\tbreak;\n\t\t}\n\t\tel = el.parentNode;\n\t}\n\treturn el;\n}\n\nfunction shouldReceiveEventFromRadio (source, dest) {\n\t// Must have the same name attribute and parent form\n\tvar name = source.getAttribute('name');\n\treturn (\n\t\tname &&\n\t\tname === dest.getAttribute('name') &&\n\t\tfindParentForm(source) === findParentForm(dest)\n\t);\n}\n\nfunction isRadioInput$1 (el) {\n\treturn el.nodeName === 'INPUT' && el.type === 'radio';\n}\n\n\nfunction attachRootListener (domEvents, eventTypeTargets) {\n\tvar root = getRoot();\n\tvar newListener = function (event) {\n\t\tvar target = event.target;\n\t\tif (!isRadioInput$1(target)) {\n\t\t\treturn;\n\t\t}\n\n\t\tfor (var eventType in eventTypeTargets) {\n\t\t\tvar newEvent = {type: eventType};\n\t\t\tvar listeningNodes = eventTypeTargets[eventType];\n\t\t\tlisteningNodes.forEach(function (el) {\n\t\t\t\tif (shouldReceiveEventFromRadio(target, el)) {\n\t\t\t\t\tdomEvents.dispatch(el, newEvent, false);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t};\n\tdomEvents.addEventListener(root, 'change', newListener);\n\treturn newListener;\n}\n\nfunction detachRootListener (domEvents, listener) {\n\tvar root = getRoot();\n\tdomEvents.removeEventListener(root, 'change', listener);\n}\n\n/**\n * @module {events} can-event-dom-radiochange\n * @parent can-dom-utilities\n * @collection can-infrastructure\n * @package ./package.json\n *\n * A custom event for listening to changes of inputs with type \"radio\",\n * which fires when a conflicting radio input changes. A \"conflicting\"\n * radio button has the same \"name\" attribute and exists within in the\n * same form, or lack thereof. This event coordinates state bound to\n * whether a radio is checked. The \"change\" event does not fire for deselected\n * radios. By using this event instead, deselected radios receive notification.\n *\n * ```js\n * var domEvents = require('can-dom-events');\n * var radioChange = require('can-event-dom-radiochange');\n * domEvents.addEvent(radioChange);\n *\n * var target = document.createElement('input');\n *\n * function handler () {\n * \tconsole.log('radiochange event fired');\n * }\n *\n * domEvents.addEventListener(target, 'radiochange', handler);\n * domEvents.removeEventListener(target, 'radiochange', handler);\n * ```\n */\nvar radioChangeEvent = {\n\tdefaultEventType: 'radiochange',\n\n\taddEventListener: function (target, eventType, handler) {\n\t\tif (!isRadioInput$1(target)) {\n\t\t\tthrow new Error('Listeners for ' + eventType + ' must be radio inputs');\n\t\t}\n\n\t\tvar eventTypeTrackedRadios = radioChangeEvent._eventTypeTrackedRadios;\n\t\tif (!eventTypeTrackedRadios) {\n\t\t\teventTypeTrackedRadios = radioChangeEvent._eventTypeTrackedRadios = {};\n\t\t\tif (!radioChangeEvent._rootListener) {\n\t\t\t\tradioChangeEvent._rootListener = attachRootListener(this, eventTypeTrackedRadios);\n\t\t\t}\t\t\t\n\t\t}\n\n\t\tvar trackedRadios = radioChangeEvent._eventTypeTrackedRadios[eventType];\n\t\tif (!trackedRadios) {\n\t\t\ttrackedRadios = radioChangeEvent._eventTypeTrackedRadios[eventType] = new Set();\n\t\t}\n\n\t\ttrackedRadios.add(target);\n\t\ttarget.addEventListener(eventType, handler);\n\t},\n\n\tremoveEventListener: function (target, eventType, handler) {\n\t\ttarget.removeEventListener(eventType, handler);\n\n\t\tvar eventTypeTrackedRadios = radioChangeEvent._eventTypeTrackedRadios;\n\t\tif (!eventTypeTrackedRadios) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar trackedRadios = eventTypeTrackedRadios[eventType];\n\t\tif (!trackedRadios) {\n\t\t\treturn;\n\t\t}\n\t\n\t\ttrackedRadios.delete(target);\n\t\tif (trackedRadios.size === 0) {\n\t\t\tdelete eventTypeTrackedRadios[eventType];\n\t\t\tfor (var key in eventTypeTrackedRadios) {\n\t\t\t\tif (eventTypeTrackedRadios.hasOwnProperty(key)) {\n\t\t\t\t\treturn;\n\t\t\t\t}\t\t\t\t\t\t\n\t\t\t}\n\t\t\tdelete radioChangeEvent._eventTypeTrackedRadios;\n\t\t\tdetachRootListener(this, radioChangeEvent._rootListener);\n\t\t\tdelete radioChangeEvent._rootListener;\n\t\t}\n\t}\n};\n\nvar canEventDomRadiochange_2_2_1_canEventDomRadiochange = canNamespace_1_0_0_canNamespace.domEventRadioChange = radioChangeEvent;\n\nvar onValueSymbol$4 = canSymbol_1_7_0_canSymbol.for('can.onValue');\nvar offValueSymbol$2 = canSymbol_1_7_0_canSymbol.for('can.offValue');\nvar onEmitSymbol$1 = canSymbol_1_7_0_canSymbol.for('can.onEmit');\nvar offEmitSymbol$1 = canSymbol_1_7_0_canSymbol.for('can.offEmit');\n\n// We register a namespaced radiochange event with the global\n// event registry so it does not interfere with user-defined events.\n\n\nvar internalRadioChangeEventType = \"can-attribute-observable-radiochange\";\ncanDomEvents_1_3_13_canDomEvents.addEvent(canEventDomRadiochange_2_2_1_canEventDomRadiochange, internalRadioChangeEventType);\n\nvar isSelect = function isSelect(el) {\n\treturn el.nodeName.toLowerCase() === \"select\";\n};\n\nvar isMultipleSelect = function isMultipleSelect(el, prop) {\n\treturn isSelect(el) && prop === \"value\" && el.multiple;\n};\n\nvar slice$2 = Array.prototype.slice;\n\nfunction canUtilAEL () {\n\tvar args = slice$2.call(arguments, 0);\n\targs.unshift(this);\n\treturn canDomEvents_1_3_13_canDomEvents.addEventListener.apply(null, args);\n}\n\nfunction canUtilREL () {\n\tvar args = slice$2.call(arguments, 0);\n\targs.unshift(this);\n\treturn canDomEvents_1_3_13_canDomEvents.removeEventListener.apply(null, args);\n}\n\nfunction AttributeObservable(el, prop, bindingData, event) {\n\tif(typeof bindingData === \"string\") {\n\t\tevent = bindingData;\n\t\tbindingData = undefined;\n\t}\n\n\tthis.el = el;\n\tthis.bound = false;\n\tthis.prop = isMultipleSelect(el, prop) ? \"values\" : prop;\n\tthis.event = event || canAttributeObservable_2_0_2_getEventName(el, prop);\n\tthis.handler = this.handler.bind(this);\n\n\t// If we have an event\n\t// remove onValue/offValue and add onEvent\n\tif (event !== undefined) {\n\t\tthis[onValueSymbol$4] = null;\n\t\tthis[offValueSymbol$2] = null;\n\t\tthis[onEmitSymbol$1] = AttributeObservable.prototype.on;\n\t\tthis[offEmitSymbol$1] = AttributeObservable.prototype.off;\n\t}\n\n\n\t//!steal-remove-start\n\tif(process.env.NODE_ENV !== 'production') {\n\t\t// register what changes the element's attribute\n\t\tcanReflectDependencies_1_1_2_canReflectDependencies.addMutatedBy(this.el, this.prop, this);\n\n\t\tcanReflect_1_19_2_canReflect.assignSymbols(this, {\n\t\t\t\"can.getName\": function getName() {\n\t\t\t\treturn (\n\t\t\t\t\t\"AttributeObservable<\" +\n\t\t\t\t\tel.nodeName.toLowerCase() +\n\t\t\t\t\t\".\" +\n\t\t\t\t\tthis.prop +\n\t\t\t\t\t\">\"\n\t\t\t\t);\n\t\t\t}\n\t\t});\n\t}\n\t//!steal-remove-end\n}\n\nAttributeObservable.prototype = Object.create(settable.prototype);\n\ncanAssign_1_3_3_canAssign(AttributeObservable.prototype, {\n\tconstructor: AttributeObservable,\n\n\tget: function get() {\n\t\tif (canObservationRecorder_1_3_1_canObservationRecorder.isRecording()) {\n\t\t\tcanObservationRecorder_1_3_1_canObservationRecorder.add(this);\n\t\t\tif (!this.bound) {\n\t\t\t\tcanObservation_4_2_0_canObservation.temporarilyBind(this);\n\t\t\t}\n\t\t}\n\t\tvar value = canAttributeObservable_2_0_2_behaviors.get(this.el, this.prop);\n\t\tif (typeof value === 'function') {\n\t\t\tvalue = value.bind(this.el);\n\t\t}\n\t\treturn value;\n\t},\n\n\tset: function set(newVal) {\n\t\tvar setterDispatchedEvents = canAttributeObservable_2_0_2_behaviors.setAttrOrProp(this.el, this.prop, newVal);\n\t\t// update the observation internal value\n\t\tif(!setterDispatchedEvents) {\n\t\t\tthis._value = newVal;\n\t\t}\n\n\n\t\treturn newVal;\n\t},\n\n\thandler: function handler(newVal, event) {\n\t\tvar old = this._value;\n\t\tvar queuesArgs = [];\n\t\tthis._value = canAttributeObservable_2_0_2_behaviors.get(this.el, this.prop);\n\n\t\t// If we have an event then we want to enqueue on all changes\n\t\t// otherwise only enquue when there are changes to the value\n\t\tif (event !== undefined || this._value !== old) {\n\t\t\t//!steal-remove-start\n\t\t\tif(process.env.NODE_ENV !== 'production') {\n\t\t\t\tif (typeof this._log === \"function\") {\n\t\t\t\t\tthis._log(old, newVal);\n\t\t\t\t}\n\t\t\t}\n\t\t\t//!steal-remove-end\n\n\n\t\t\tqueuesArgs = [\n\t\t\t\tthis.handlers.getNode([]),\n  \t\t\tthis,\n  \t\t\t[newVal, old]\n  \t\t];\n\t\t\t//!steal-remove-start\n\t\t\tif(process.env.NODE_ENV !== 'production') {\n\t\t\t\tqueuesArgs = [\n\t\t\t\t\tthis.handlers.getNode([]),\n\t\t\t\t\tthis,\n\t\t\t\t\t[newVal, old]\n\t\t\t\t\t/* jshint laxcomma: true */\n\t\t\t\t\t,null\n\t\t\t\t\t,[this.el,this.prop,\"changed to\", newVal, \"from\", old, \"by\", event]\n\t\t\t\t\t/* jshint laxcomma: false */\n\t\t\t\t];\n\t\t\t}\n\t\t\t//!steal-remove-end\n\t\t\t// adds callback handlers to be called w/i their respective queue.\n\t\t\tcanQueues_1_3_2_canQueues.enqueueByQueue.apply(canQueues_1_3_2_canQueues, queuesArgs);\n\t\t}\n\t},\n\n\tonBound: function onBound() {\n\t\tvar observable = this;\n\n\t\tobservable.bound = true;\n\n\t\t// make sure `this.handler` gets the new value instead of\n\t\t// the event object passed to the event handler\n\t\tobservable._handler = function(event) {\n\t\t\tobservable.handler(canAttributeObservable_2_0_2_behaviors.get(observable.el, observable.prop), event);\n\t\t};\n\n\t\tif (observable.event === internalRadioChangeEventType) {\n\t\t\tcanAttributeObservable_2_0_2_event.on.call(observable.el, \"change\", observable._handler);\n\t\t}\n\n\t\tvar specialBinding = canAttributeObservable_2_0_2_behaviors.findSpecialListener(observable.prop);\n\t\tif (specialBinding) {\n\t\t\tobservable._specialDisposal = specialBinding.call(observable.el, observable.prop, observable._handler, canUtilAEL);\n\t\t}\n\n\t\tcanAttributeObservable_2_0_2_event.on.call(observable.el, observable.event, observable._handler);\n\n\t\t// initial value\n\t\tthis._value = canAttributeObservable_2_0_2_behaviors.get(this.el, this.prop);\n\t},\n\n\tonUnbound: function onUnbound() {\n\t\tvar observable = this;\n\n\t\tobservable.bound = false;\n\n\t\tif (observable.event === internalRadioChangeEventType) {\n\t\t\tcanAttributeObservable_2_0_2_event.off.call(observable.el, \"change\", observable._handler);\n\t\t}\n\n\t\tif (observable._specialDisposal) {\n\t\t\tobservable._specialDisposal.call(observable.el, canUtilREL);\n\t\t\tobservable._specialDisposal = null;\n\t\t}\n\n\t\tcanAttributeObservable_2_0_2_event.off.call(observable.el, observable.event, observable._handler);\n\t},\n\n\tvalueHasDependencies: function valueHasDependencies() {\n\t\treturn true;\n\t},\n\n\tgetValueDependencies: function getValueDependencies() {\n\t\tvar m = new Map();\n\t\tvar s = new Set();\n\t\ts.add(this.prop);\n\t\tm.set(this.el, s);\n\t\treturn {\n\t\t\tkeyDependencies: m\n\t\t};\n\t}\n});\n\ncanReflect_1_19_2_canReflect.assignSymbols(AttributeObservable.prototype, {\n\t\"can.isMapLike\": false,\n\t\"can.getValue\": AttributeObservable.prototype.get,\n\t\"can.setValue\": AttributeObservable.prototype.set,\n\t\"can.onValue\": AttributeObservable.prototype.on,\n\t\"can.offValue\": AttributeObservable.prototype.off,\n\t\"can.valueHasDependencies\": AttributeObservable.prototype.hasDependencies,\n\t\"can.getValueDependencies\": AttributeObservable.prototype.getValueDependencies\n});\n\nvar canAttributeObservable_2_0_2_canAttributeObservable = AttributeObservable;\n\n// # can-stache-bindings.js\n//\n// This module provides CanJS's default data and event bindings.\n// It's broken up into several parts:\n//\n// - Behaviors - Binding behaviors that run given an attribute or element.\n// - Attribute Syntaxes - Hooks up custom attributes to their behaviors.\n// - getObservableFrom - Methods that return a observable cross bound to the scope, viewModel, or element.\n// - bind - Methods for setting up cross binding\n// - getBindingInfo - A helper that returns the details of a data binding given an attribute.\n// - makeDataBinding - A helper method for setting up a data binding.\n// - initializeValues - A helper that initializes a data binding.\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// Contains all of the stache bindings that will be exported.\nvar bindings = new Map();\n\nvar onMatchStr = \"on:\",\n\tvmMatchStr = \"vm:\",\n\telMatchStr = \"el:\",\n\tbyMatchStr = \":by:\",\n\ttoMatchStr = \":to\",\n\tfromMatchStr = \":from\",\n\tbindMatchStr = \":bind\",\n\tviewModelBindingStr = \"viewModel\",\n\tattributeBindingStr = \"attribute\",\n\tscopeBindingStr = \"scope\",\n\tviewModelOrAttributeBindingStr = \"viewModelOrAttribute\",\n\tviewModelSymbol$1 = canSymbol_1_7_0_canSymbol.for(\"can.viewModel\"),\n\tpreventDataBindingsSymbol = canSymbol_1_7_0_canSymbol.for(\"can.preventDataBindings\");\n\nvar throwOnlyOneTypeOfBindingError = function() {\n\tthrow new Error(\"can-stache-bindings - you can not have contextual bindings ( this:from='value' ) and key bindings ( prop:from='value' ) on one element.\");\n};\n\n// This function checks if there bindings that are trying\n// to set a property ON the viewModel _conflicting_ with bindings trying to\n// set THE viewModel ITSELF.\n// If there is a conflict, an error is thrown.\nvar checkBindingState = function(bindingState, siblingBindingData) {\n\tvar isSettingOnViewModel = siblingBindingData.parent.exports && siblingBindingData.child.source === viewModelBindingStr;\n\tif (isSettingOnViewModel) {\n\t\tvar bindingName = siblingBindingData.child.name;\n\t\tvar isSettingViewModel = isSettingOnViewModel && ( bindingName === 'this' || bindingName === '.' );\n\n\t\tif (isSettingViewModel) {\n\t\t\tif (bindingState.isSettingViewModel || bindingState.isSettingOnViewModel) {\n\t\t\t\tthrowOnlyOneTypeOfBindingError();\n\t\t\t} else {\n\t\t\t\treturn {\n\t\t\t\t\tisSettingViewModel: true,\n\t\t\t\t\tinitialViewModelData: undefined\n\t\t\t\t};\n\t\t\t}\n\t\t} else {\n\t\t\t// just setting on viewModel\n\t\t\tif (bindingState.isSettingViewModel) {\n\t\t\t\tthrowOnlyOneTypeOfBindingError();\n\t\t\t} else {\n\t\t\t\treturn {\n\t\t\t\t\tisSettingOnViewModel: true,\n\t\t\t\t\tinitialViewModelData: bindingState.initialViewModelData\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t} else {\n\t\treturn bindingState;\n\t}\n};\n\nvar getEventBindingData = function (attributeName, el, scope) {\n\tvar bindingCode = attributeName.substr(onMatchStr.length);\n\tvar viewModel = el && el[viewModelSymbol$1];\n\tvar elUsed = startsWith.call(bindingCode, elMatchStr);\n\tvar vmUsed = startsWith.call(bindingCode, vmMatchStr);\n\tvar byUsed = bindingCode.indexOf(byMatchStr) > -1;\n\tvar scopeUsed;\n\n\t// The values being returned\n\tvar bindingContext;\n\tvar eventName;\n\tvar bindingContextObservable;\n\tvar shortBindingCode = \"\";\n\n\t// if explicit context is specified, trim the string down\n\t// else, determine value of which scope being used elUsed, vmUsed, scopeUsed\n\tif (vmUsed) {\n\t\tshortBindingCode = \"vm\";\n\t\tbindingCode = bindingCode.substr(vmMatchStr.length);\n\t} else if (elUsed) {\n\t\tshortBindingCode = \"el\";\n\t\tbindingCode = bindingCode.substr(elMatchStr.length);\n\t} else if (!vmUsed && !elUsed) {\n\t\tif (byUsed) {\n\t\t\tscopeUsed = true;\n\t\t} else if (viewModel)  {\n\t\t\tvmUsed = true;\n\t\t} else {\n\t\t\telUsed = true;\n\t\t}\n\t}\n\n\t// if by is used, take the appropriate path to determine the bindingContext\n\t// and create the bindingKeyValue\n\tvar bindingContextKey;\n\tif (byUsed) {\n\t\tvar byIndex = bindingCode.indexOf(byMatchStr);\n\t\tbindingContextKey = bindingCode.substr(byIndex + byMatchStr.length);\n\t\tbindingCode = bindingCode.substr(0, byIndex);\n\t}\n\teventName = bindingCode;\n\tif (elUsed) {\n\t\tif (byUsed) {\n\t\t\tthrow new Error('binding with :by in element scope is not currently supported');\n\t\t} else {\n\t\t\tbindingContext = el;\n\t\t}\n\t} else if (vmUsed) {\n\t\tbindingContext = viewModel;\n\t\tif (byUsed) {\n\t\t\tbindingContext = viewModel.get(bindingContextKey);\n\t\t\tbindingContextObservable = new canViewScope_4_13_7_canViewScope(viewModel).computeData(bindingContextKey);\n\t\t}\n\t} else if (scopeUsed) {\n\t\tbindingContext = scope;\n\t\tif (byUsed) {\n\t\t\tbindingContext = bindingContext.get(bindingContextKey);\n\t\t\tbindingContextObservable = scope.computeData(bindingContextKey);\n\t\t}\n\t}\n\n\treturn {\n\t\t// single observable object to listen to eventName directly on one observable object\n\t\tbindingContext: bindingContext,\n\t\t// this observable emits the bindingContext\n\t\tbindingContextObservable: bindingContextObservable,\n\t\t// the eventName string\n\t\teventName: eventName,\n\t\t// which binding code was explicitly set by the user\n\t\tbindingCode: shortBindingCode,\n\t};\n};\n\nvar onKeyValueSymbol$5 = canSymbol_1_7_0_canSymbol.for(\"can.onKeyValue\");\nvar makeScopeFromEvent = function(element, event, viewModel, args, data, bindingContext){\n\t// TODO: Remove in 6.0.  In 4 and 5 arguments were wrong.\n\tvar shiftArgumentsForLegacyArguments = bindingContext && bindingContext[onKeyValueSymbol$5] !== undefined;\n\n\tvar specialValues = {\n\t\telement: element,\n\t\tevent: event,\n\t\tviewModel: viewModel,\n\t\targuments: shiftArgumentsForLegacyArguments ? Array.prototype.slice.call(args, 1) : args,\n\t\targs: args\n\t};\n\n\t// make a scope with these things just under\n\treturn data.scope.add(specialValues, { special: true });\n};\n\nvar runEventCallback = function (el, ev, data, scope, expr, attributeName, attrVal) {\n\t// create \"special\" values that can be looked up using\n\t// {{scope.element}}, etc\n\n\tvar updateFn = function() {\n\t\tvar value = expr.value(scope, {\n\t\t\tdoNotWrapInObservation: true\n\t\t});\n\n\t\tvalue = canReflect_1_19_2_canReflect.isValueLike(value) ?\n\t\t\tcanReflect_1_19_2_canReflect.getValue(value) :\n\t\t\tvalue;\n\n\t\treturn typeof value === 'function' ?\n\t\t\tvalue(el) :\n\t\t\tvalue;\n\t};\n\t//!steal-remove-start\n\tif (process.env.NODE_ENV !== 'production') {\n\t\tObject.defineProperty(updateFn, \"name\", {\n\t\t\tvalue: attributeName + '=\"' + attrVal + '\"'\n\t\t});\n\t}\n\t//!steal-remove-end\n\n\tcanQueues_1_3_2_canQueues.batch.start();\n\tvar mutateQueueArgs = [];\n\tmutateQueueArgs = [\n\t\tupdateFn,\n\t\tnull,\n\t\tnull,\n\t\t{}\n\t];\n\t//!steal-remove-start\n\tif (process.env.NODE_ENV !== 'production') {\n\t\tmutateQueueArgs = [\n\t\t\tupdateFn,\n\t\t\tnull,\n\t\t\tnull, {\n\t\t\t\treasonLog: [el, ev, attributeName+\"=\"+attrVal]\n\t\t\t}\n\t\t];\n\t}\n\t//!steal-remove-end\n\tcanQueues_1_3_2_canQueues.mutateQueue.enqueue.apply(canQueues_1_3_2_canQueues.mutateQueue, mutateQueueArgs);\n\tcanQueues_1_3_2_canQueues.batch.stop();\n};\n\n// ## Behaviors\nvar behaviors = {\n\t// ## completeBindings\n\t// Given a list of bindings, initializes the bindings, then the viewModel then completes the bindings.\n\t// Arguments:\n\t// - bindings  - An array of `{binding, siblingBindingData}`\n\t// - initialViewModelData - Extra initial viewModel values\n\t// - makeViewModel - `makeViewModel(props, hasBindings, bindingsState)`\n\t// - bindingContext - optional, `{scope}`\n\t// Returns:\n\t// `{viewModel, onTeardowns, bindingsState}`\n\tinitializeViewModel: function(bindings, initialViewModelData, makeViewModel, bindingContext) {\n\n\t\tvar onCompleteBindings = [],\n\t\t\tonTeardowns = {};\n\n\t\tvar bindingsState = {\n\t\t\t// if we have a binding like {something}=\"foo\"\n\t\t\tisSettingOnViewModel: false,\n\t\t\t// if we have binding like {this}=\"bar\"\n\t\t\tisSettingViewModel: false,\n\t\t\tinitialViewModelData: initialViewModelData || {}\n\t\t};\n\n\t\tbindings.forEach(function(dataBinding){\n\t\t\t// Immediately bind to the parent so we can read its value\n\t\t\tdataBinding.binding.startParent();\n\n\t\t\tvar siblingBindingData = dataBinding.siblingBindingData;\n\t\t\tbindingsState = checkBindingState(bindingsState, siblingBindingData);\n\n\t\t\t// For bindings that change the viewModel,\n\t\t\t// save the initial value on the viewModel.\n\t\t\tif (siblingBindingData.parent.exports) {\n\n\t\t\t\tvar parentValue = siblingBindingData.child.setCompute ? canViewScope_4_13_7_makeComputeLike(dataBinding.binding.parent) : dataBinding.binding.parentValue;\n\n\t\t\t\tif (parentValue !== undefined) {\n\n\t\t\t\t\tif (bindingsState.isSettingViewModel) {\n\t\t\t\t\t\t// the initial data is the context\n\t\t\t\t\t\t// TODO: this is covered by can-component’s tests but not can-stache-bindings’ tests\n\t\t\t\t\t\tbindingsState.initialViewModelData = parentValue;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tbindingsState.initialViewModelData[cleanVMName(siblingBindingData.child.name, bindingContext.scope)] = parentValue;\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Save what needs to happen after the `viewModel` is created.\n\t\t\tonCompleteBindings.push(dataBinding.binding.start.bind(dataBinding.binding));\n\n\t\t\tonTeardowns[siblingBindingData.bindingAttributeName] = dataBinding.binding.stop.bind(dataBinding.binding);\n\t\t});\n\n\t\tvar viewModel = makeViewModel(bindingsState.initialViewModelData, bindings.length > 0, bindingsState);\n\n\t\t// bind on the viewModel so we can updat ethe parent\n\t\tfor (var i = 0, len = onCompleteBindings.length; i < len; i++) {\n\t\t\tonCompleteBindings[i]();\n\t\t}\n\t\treturn {viewModel: viewModel, onTeardowns: onTeardowns, bindingsState: bindingsState};\n\t},\n\t// ### bindings.behaviors.viewModel\n\t// Sets up all of an element's data binding attributes to a \"soon-to-be-created\"\n\t// `viewModel`.\n\t// This is primarily used by `Component` to ensure that its\n\t// `viewModel` is initialized with values from the data bindings as quickly as possible.\n\t// Component could look up the data binding values itself.  However, that lookup\n\t// would have to be duplicated when the bindings are established.\n\t// Instead, this uses the `makeDataBinding` helper, which allows creation of the `viewModel`\n\t// after scope values have been looked up.\n\t//\n\t// Arguments:\n\t// - `makeViewModel(initialViewModelData)` - a function that returns the `viewModel`.\n\t// - `initialViewModelData` any initial data that should already be added to the `viewModel`.\n\t//\n\t// Returns:\n\t// - `function` - a function that tears all the bindings down. Component\n\t// wants all the bindings active so cleanup can be done during a component being removed.\n\tviewModel: function(el, tagData, makeViewModel, initialViewModelData, options) {\n\n\t\tif(typeof options === \"boolean\") {\n\t\t\toptions = {staticDataBindingsOnly: options};\n\t\t} else if(typeof options === \"undefined\") {\n\t\t\toptions = {};\n\t\t}\n\t\tvar staticDataBindingsOnly = options.staticDataBindingsOnly;\n\t\tvar makeDataBindingFn = options.makeDataBinding || makeDataBinding;\n\n\t\tvar attributeViewModelBindings = canAssign_1_3_3_canAssign({}, initialViewModelData),\n\n\t\t\t// The data around the binding.\n\t\t\tbindingContext = canAssign_1_3_3_canAssign({\n\t\t\t\telement: el,\n\t\t\t\t// this gets defined later\n\t\t\t\tviewModel: undefined\n\t\t\t}, tagData),\n\n\t\t\t// global settings for the bindings\n\t\t\tbindingSettings = {\n\t\t\t\tattributeViewModelBindings: attributeViewModelBindings,\n\t\t\t\talreadyUpdatedChild: true,\n\t\t\t\t// force viewModel bindings in cases when it is ambiguous whether you are binding\n\t\t\t\t// on viewModel or an attribute (:to, :from, :bind)\n\t\t\t\tfavorViewModel: true,\n\t\t\t\tmakeDataBinding: makeDataBindingFn,\n\t\t\t\tgetSiblingBindingData: options.getSiblingBindingData || getSiblingBindingData\n\t\t\t},\n\t\t\tdataBindings = [];\n\n\t\t// For each attribute, we create a dataBinding object.\n\t\t// These look like: `{binding, siblingBindingData}`\n\t\tcanReflect_1_19_2_canReflect.eachListLike(el.attributes || [], function(node) {\n\t\t\tvar dataBinding = makeDataBindingFn(node, bindingContext, bindingSettings);\n\n\t\t\tif (dataBinding) {\n\t\t\t\tdataBindings.push(dataBinding);\n\t\t\t}\n\t\t});\n\n\t\t// If there are no binding, exit.\n\t\tif (staticDataBindingsOnly && dataBindings.length === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Initialize the viewModel\n\t\tvar completedData = behaviors.initializeViewModel(dataBindings, initialViewModelData, function(){\n\t\t\t// we need to make sure we have the viewModel available\n\t\t\tbindingContext.viewModel = makeViewModel.apply(this, arguments);\n\t\t}, bindingContext),\n\t\t\tonTeardowns = completedData.onTeardowns,\n\t\t\tbindingsState = completedData.bindingsState,\n\t\t\tsiblingBindingDatas = {};\n\n\n\t\t// Listen to attribute changes and re-initialize\n\t\t// the bindings.\n\t\tvar attributeDisposal;\n\t\tif (!bindingsState.isSettingViewModel) {\n\t\t\t// We need to update the child on any new bindings.\n\t\t\tbindingSettings.alreadyUpdatedChild = false;\n\t\t\tattributeDisposal = canDomMutate_2_0_9_canDomMutate.onNodeAttributeChange(el, function(ev) {\n\t\t\t\tvar attrName = ev.attributeName,\n\t\t\t\t\tvalue = el.getAttribute(attrName);\n\n\t\t\t\tif (onTeardowns[attrName]) {\n\t\t\t\t\tonTeardowns[attrName]();\n\t\t\t\t}\n\t\t\t\t// Parent attribute bindings we always re-setup.\n\t\t\t\tvar parentBindingWasAttribute = siblingBindingDatas[attrName] && siblingBindingDatas[attrName].parent.source === attributeBindingStr;\n\n\t\t\t\tif (value !== null || parentBindingWasAttribute) {\n\t\t\t\t\tvar dataBinding = makeDataBinding({\n\t\t\t\t\t\tname: attrName,\n\t\t\t\t\t\tvalue: value\n\t\t\t\t\t}, bindingContext, bindingSettings);\n\t\t\t\t\tif (dataBinding) {\n\t\t\t\t\t\t// The viewModel is created, so call callback immediately.\n\t\t\t\t\t\tdataBinding.binding.start();\n\t\t\t\t\t\tsiblingBindingDatas[attrName] = dataBinding.siblingBindingData;\n\t\t\t\t\t\tonTeardowns[attrName] = dataBinding.binding.stop.bind(dataBinding.binding);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn function() {\n\t\t\tif (attributeDisposal) {\n\t\t\t\tattributeDisposal();\n\t\t\t\tattributeDisposal = undefined;\n\t\t\t}\n\t\t\tfor (var attrName in onTeardowns) {\n\t\t\t\tonTeardowns[attrName]();\n\t\t\t}\n\t\t};\n\t},\n\t// ### bindings.behaviors.data\n\t// This is called when an individual data binding attribute is placed on an element.\n\t// For example `{^value}=\"name\"`.\n\tdata: function(el, attrData) {\n\t\tif (el[preventDataBindingsSymbol] === true || canDomData_1_0_3_canDomData.get(el, \"preventDataBindings\")) {\n\t\t\treturn;\n\t\t}\n\t\tvar viewModel,\n\t\t\tgetViewModel = canObservationRecorder_1_3_1_canObservationRecorder.ignore(function() {\n\t\t\t\treturn viewModel || (viewModel = canViewModel_4_0_3_canViewModel(el));\n\t\t\t}),\n\t\t\tteardown,\n\t\t\tattributeDisposal,\n\t\t\tremovedDisposal,\n\t\t\tbindingContext = {\n\t\t\t\telement: el,\n\t\t\t\ttemplateType: attrData.templateType,\n\t\t\t\tscope: attrData.scope,\n\t\t\t\tparentNodeList: attrData.nodeList,\n\t\t\t\tget viewModel(){\n\t\t\t\t\treturn getViewModel();\n\t\t\t\t}\n\t\t\t};\n\n\t\t// Setup binding\n\t\tvar dataBinding = makeDataBinding({\n\t\t\tname: attrData.attributeName,\n\t\t\tvalue: el.getAttribute(attrData.attributeName),\n\t\t}, bindingContext, {\n\t\t\tsyncChildWithParent: false,\n\t\t\tgetSiblingBindingData: getSiblingBindingData\n\t\t});\n\n\t\t//!steal-remove-start\n\t\tif (process.env.NODE_ENV !== 'production') {\n\t\t\tif (dataBinding.siblingBindingData.child.source === \"viewModel\" && !canDomData_1_0_3_canDomData.get(el, \"viewModel\")) {\n\t\t\t\tdev.warn('This element does not have a viewModel. (Attempting to bind `' + dataBinding.siblingBindingData.bindingAttributeName + '=\"' + dataBinding.siblingBindingData.parent.name + '\"`)');\n\t\t\t}\n\t\t}\n\t\t//!steal-remove-end\n\n\t\t// Flag to prevent start binding twice in dev mode\n\t\tvar started = false;\n\n\t\t//!steal-remove-start\n\t\tif (process.env.NODE_ENV !== 'production') {\n\t\t\tif (el.nodeName === 'INPUT') {\n\t\t\t\ttry {\n\t\t\t\t\tdataBinding.binding.start();\n\t\t\t\t\tstarted = true;\n\t\t\t\t} catch (error) {\n\t\t\t\t\tthrow new Error(error.message + ' <input> elements always set properties to Strings.');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t//!steal-remove-end\n\n\t\tif (!started) {\n\t\t\tdataBinding.binding.start();\n\t\t\tstarted = true;\n\t\t}\n\n\t\tvar attributeListener = function(ev) {\n\t\t\tvar attrName = ev.attributeName,\n\t\t\t\tvalue = el.getAttribute(attrName);\n\n\t\t\tif (attrName === attrData.attributeName) {\n\t\t\t\tif (teardown) {\n\t\t\t\t\tteardown();\n\t\t\t\t}\n\n\t\t\t\tif(value !== null  ) {\n\t\t\t\t\tvar dataBinding = makeDataBinding({name: attrName, value: value}, bindingContext, {\n\t\t\t\t\t\tsyncChildWithParent: false,\n\t\t\t\t\t\tgetSiblingBindingData: getSiblingBindingData\n\t\t\t\t\t});\n\t\t\t\t\tif(dataBinding) {\n\t\t\t\t\t\t// The viewModel is created, so call callback immediately.\n\t\t\t\t\t\tdataBinding.binding.start();\n\t\t\t\t\t\tteardown = dataBinding.binding.stop.bind(dataBinding.binding);\n\t\t\t\t\t}\n\t\t\t\t\tteardown = dataBinding.onTeardown;\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\n\t\tvar tearItAllDown = function() {\n\t\t\tif (teardown) {\n\t\t\t\tteardown();\n\t\t\t\tteardown = undefined;\n\t\t\t}\n\n\t\t\tif (removedDisposal) {\n\t\t\t\tremovedDisposal();\n\t\t\t\tremovedDisposal = undefined;\n\t\t\t}\n\t\t\tif (attributeDisposal) {\n\t\t\t\tattributeDisposal();\n\t\t\t\tattributeDisposal = undefined;\n\t\t\t}\n\t\t};\n\n\n\n\t\t// Listen for changes\n\t\tteardown = dataBinding.binding.stop.bind(dataBinding.binding);\n\n\t\tattributeDisposal = canDomMutate_2_0_9_canDomMutate.onNodeAttributeChange(el, attributeListener);\n\t\tremovedDisposal = canDomMutate_2_0_9_canDomMutate.onNodeDisconnected(el, function() {\n\t\t\tvar doc = el.ownerDocument;\n\t\t\tvar ownerNode = doc.contains ? doc : doc.documentElement;\n\t\t\tif (!ownerNode || ownerNode.contains(el) === false) {\n\t\t\t\ttearItAllDown();\n\t\t\t}\n\t\t});\n\t},\n\t// ### bindings.behaviors.event\n\t// The following section contains code for implementing the can-EVENT attribute.\n\t// This binds on a wildcard attribute name. Whenever a view is being processed\n\t// and can-xxx (anything starting with can-), this callback will be run.  Inside, its setting up an event handler\n\t// that calls a method identified by the value of this attribute.\n\tevent: function(el, data) {\n\t\tvar eventBindingData;\n\t\t// Get the `event` name and if we are listening to the element or viewModel.\n\t\t// The attribute name is the name of the event.\n\t\tvar attributeName = canAttributeEncoder_1_1_4_canAttributeEncoder.decode(data.attributeName),\n\t\t\t// the name of the event we are binding\n\t\t\tevent,\n\t\t\t// the context to which we bind the event listener\n\t\t\tbindingContext,\n\t\t\t// if the bindingContext is null, then use this observable to watch for changes\n\t\t\tbindingContextObservable;\n\n\t\t// check for `on:event:value:to` type things and call data bindings\n\t\tif (attributeName.indexOf(toMatchStr + \":\") !== -1 ||\n\t\t\tattributeName.indexOf(fromMatchStr + \":\") !== -1 ||\n\t\t\tattributeName.indexOf(bindMatchStr + \":\") !== -1\n\t\t) {\n\t\t\treturn this.data(el, data);\n\t\t}\n\n\t\tif (startsWith.call(attributeName, onMatchStr)) {\n\t\t\teventBindingData = getEventBindingData(attributeName, el, data.scope);\n\t\t\tevent = eventBindingData.eventName;\n\t\t\tbindingContext = eventBindingData.bindingContext;\n\t\t\tbindingContextObservable = eventBindingData.bindingContextObservable;\n\n\t\t\t//!steal-remove-start\n\t\t\tif(process.env.NODE_ENV !== \"production\") {\n\t\t\t\tif(\n\t\t\t\t\t!eventBindingData.bindingCode &&\n\t\t\t\t\tel[viewModelSymbol$1] &&\n\t\t\t\t\t(\"on\" + event) in el\n\t\t\t\t) {\n\t\t\t\t\tdev.warn(\n\t\t\t\t\t\t\"The \" + event + \" event is bound the view model for <\" + el.tagName.toLowerCase() +\n\t\t\t\t\t\t\t\">. Use \" + attributeName.replace(onMatchStr, \"on:el:\") +  \" to bind to the element instead.\"\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t\t//!steal-remove-end\n\t\t} else {\n\t\t\tthrow new Error(\"can-stache-bindings - unsupported event bindings \" + attributeName);\n\t\t}\n\n\t\t// This is the method that the event will initially trigger. It will look up the method by the string name\n\t\t// passed in the attribute and call it.\n\t\tvar handler = function(ev) {\n\t\t\tvar attrVal = el.getAttribute(canAttributeEncoder_1_1_4_canAttributeEncoder.encode(attributeName));\n\t\t\tif (!attrVal) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar viewModel = el[viewModelSymbol$1];\n\n\t\t\t// expression.parse will read the attribute\n\t\t\t// value and parse it identically to how mustache helpers\n\t\t\t// get parsed.\n\t\t\tvar expr = expression_1.parse(attrVal, {\n\t\t\t\tlookupRule: function() {\n\t\t\t\t\treturn expression_1.Lookup;\n\t\t\t\t},\n\t\t\t\tmethodRule: \"call\"\n\t\t\t});\n\n\t\t\tvar runScope = makeScopeFromEvent(el, ev, viewModel, arguments, data, bindingContext);\n\n\t\t\tif (expr instanceof expression_1.Hashes) {\n\t\t\t\tvar hashExprs = expr.hashExprs;\n\t\t\t\tvar key = Object.keys(hashExprs)[0];\n\t\t\t\tvar value = expr.hashExprs[key].value(runScope);\n\t\t\t\tvar isObservableValue = canReflect_1_19_2_canReflect.isObservableLike(value) && canReflect_1_19_2_canReflect.isValueLike(value);\n\t\t\t\trunScope.set(key, isObservableValue ? canReflect_1_19_2_canReflect.getValue(value) : value);\n\t\t\t} else if (expr instanceof expression_1.Call) {\n\t\t\t\trunEventCallback(el, ev, data, runScope, expr, attributeName, attrVal);\n\t\t\t} else {\n\t\t\t\tthrow new Error(\"can-stache-bindings: Event bindings must be a call expression. Make sure you have a () in \" + data.attributeName + \"=\" + JSON.stringify(attrVal));\n\t\t\t}\n\t\t};\n\n\t\tvar attributesDisposal,\n\t\t\tremovalDisposal,\n\t\t\tremoveObservation,\n\t\t\tcurrentContext;\n\n\t\t// Unbind the event when the attribute is removed from the DOM\n\t\tvar attributesHandler = function(ev) {\n\t\t\tvar isEventAttribute = ev.attributeName === attributeName;\n\t\t\tvar isRemoved = !el.getAttribute(attributeName);\n\t\t\tvar isEventAttributeRemoved = isEventAttribute && isRemoved;\n\t\t\tif (isEventAttributeRemoved) {\n\t\t\t\tunbindEvent();\n\t\t\t}\n\t\t};\n\t\tvar removalHandler = function() {\n\t\t\tvar doc = el.ownerDocument;\n\t\t\tvar ownerNode = doc.contains ? doc : doc.documentElement;\n\t\t\tif (!ownerNode || !ownerNode.contains(el)) {\n\t\t\t\tunbindEvent();\n\t\t\t}\n\t\t};\n\t\tvar unbindEvent = function() {\n\t\t\tif (bindingContext) {\n\t\t\t\tmap$1.off.call(bindingContext, event, handler);\n\t\t\t}\n\t\t\tif (attributesDisposal) {\n\t\t\t\tattributesDisposal();\n\t\t\t\tattributesDisposal = undefined;\n\t\t\t}\n\t\t\tif (removalDisposal) {\n\t\t\t\tremovalDisposal();\n\t\t\t\tremovalDisposal = undefined;\n\t\t\t}\n\t\t\tif (removeObservation) {\n\t\t\t\tremoveObservation();\n\t\t\t\tremoveObservation = undefined;\n\t\t\t}\n\t\t};\n\n\t\tfunction updateListener(newVal, oldVal) {\n\t\t\tif (oldVal) {\n\t\t\t\tmap$1.off.call(oldVal, event, handler);\n\t\t\t}\n\t\t\tif (newVal) {\n\t\t\t\tmap$1.on.call(newVal, event, handler);\n\t\t\t\tcurrentContext = newVal;\n\t\t\t}\n\t\t}\n\n\t\t// Bind the handler defined above to the element we're currently processing and the event name provided in this\n\t\t// attribute name (can-click=\"foo\")\n\t\tattributesDisposal = canDomMutate_2_0_9_canDomMutate.onNodeAttributeChange(el, attributesHandler);\n\t\tremovalDisposal = canDomMutate_2_0_9_canDomMutate.onNodeDisconnected(el, removalHandler);\n\t\tif (!bindingContext && bindingContextObservable) {\n\t\t\t// on value changes of the observation, rebind the listener to the new context\n\t\t\tremoveObservation = function () {\n\t\t\t\tif (currentContext) {\n\t\t\t\t\tmap$1.off.call(currentContext, event, handler);\n\t\t\t\t}\n\t\t\t\tcanReflect_1_19_2_canReflect.offValue(bindingContextObservable, updateListener);\n\t\t\t};\n\t\t\tcanReflect_1_19_2_canReflect.onValue(bindingContextObservable, updateListener);\n\t\t} else {\n\t\t\ttry {\n\t\t\t\tmap$1.on.call(bindingContext, event, handler);\n\t\t\t} catch (error) {\n\t\t\t\tif (/Unable to bind/.test(error.message)) {\n\t\t\t\t\tvar msg = 'can-stache-bindings - Unable to bind \"' + event + '\"';\n\t\t\t\t\tmsg += ': \"' + event  + '\" is a property on a plain object \"';\n\t\t\t\t\tmsg += JSON.stringify(bindingContext);\n\t\t\t\t\tmsg += '\". Binding is available with observable objects only.';\n\t\t\t\t\tmsg += ' For more details check https://canjs.com/doc/can-stache-bindings.html#Callafunctionwhenaneventhappensonavalueinthescope_animation_';\n\t\t\t\t\tthrow new Error(msg);\n\t\t\t\t} else {\n\t\t\t\t\tthrow error;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n};\n\n\n// ## Attribute Syntaxes\n// The following sets up the bindings functions to be called\n// when called in a template.\n\n\n// value:to=\"bar\" data bindings\n// these are separate so that they only capture at the end\n// to avoid (toggle)=\"bar\" which is encoded as :lp:toggle:rp:=\"bar\"\nbindings.set(/[\\w\\.:]+:to$/, behaviors.data);\nbindings.set(/[\\w\\.:]+:from$/, behaviors.data);\nbindings.set(/[\\w\\.:]+:bind$/, behaviors.data);\nbindings.set(/[\\w\\.:]+:raw$/, behaviors.data);\n// value:to:on:input=\"bar\" data bindings\nbindings.set(/[\\w\\.:]+:to:on:[\\w\\.:]+/, behaviors.data);\nbindings.set(/[\\w\\.:]+:from:on:[\\w\\.:]+/, behaviors.data);\nbindings.set(/[\\w\\.:]+:bind:on:[\\w\\.:]+/, behaviors.data);\n\n\n// `(EVENT)` event bindings.\nbindings.set(/on:[\\w\\.:]+/, behaviors.event);\n\n// ## getObservableFrom\n// An object of helper functions that make a getter/setter observable\n// on different types of objects.\nvar getObservableFrom = {\n\t// ### getObservableFrom.viewModelOrAttribute\n\tviewModelOrAttribute: function(bindingData, bindingContext) {\n\t\tvar viewModel = bindingContext.element[viewModelSymbol$1];\n\n\t\t// if we have a viewModel, use it; otherwise, setup attribute binding\n\t\tif (viewModel) {\n\t\t\treturn this.viewModel.apply(this, arguments);\n\t\t} else {\n\t\t\treturn this.attribute.apply(this, arguments);\n\t\t}\n\t},\n\t// ### getObservableFrom.scope\n\t// Returns a compute from the scope.  This handles expressions like `someMethod(.,1)`.\n\tscope: function(bindingData, bindingContext) {\n\t\tvar scope = bindingContext.scope,\n\t\t\tscopeProp = bindingData.name,\n\t\t\tmustBeGettable = bindingData.exports;\n\n\t\tif (!scopeProp) {\n\t\t\treturn new canSimpleObservable_2_5_0_canSimpleObservable();\n\t\t} else {\n\t\t\t// Check if we need to spend time building a scope-key-data\n\t\t\t// If we have a '(', it likely means a call expression.\n\t\t\tif (mustBeGettable || scopeProp.indexOf(\"(\") >= 0 || scopeProp.indexOf(\"=\") >= 0) {\n\t\t\t\tvar parentExpression = expression_1.parse(scopeProp,{baseMethodType: \"Call\"});\n\n\t\t\t\tif (parentExpression instanceof expression_1.Hashes) {\n\t\t\t\t\treturn new canSimpleObservable_2_5_0_canSimpleObservable(function () {\n\t\t\t\t\t\tvar hashExprs = parentExpression.hashExprs;\n\t\t\t\t\t\tvar key = Object.keys(hashExprs)[0];\n\t\t\t\t\t\tvar value = parentExpression.hashExprs[key].value(scope);\n\t\t\t\t\t\tvar isObservableValue = canReflect_1_19_2_canReflect.isObservableLike(value) && canReflect_1_19_2_canReflect.isValueLike(value);\n\t\t\t\t\t\tscope.set(key, isObservableValue ? canReflect_1_19_2_canReflect.getValue(value) : value);\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\treturn parentExpression.value(scope);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tvar observation = {};\n\t\t\t\tcanReflect_1_19_2_canReflect.assignSymbols(observation, {\n\t\t\t\t\t\"can.getValue\": function getValue() {},\n\n\t\t\t\t\t\"can.valueHasDependencies\": function hasValueDependencies() {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t},\n\n\t\t\t\t\t\"can.setValue\": function setValue(newVal) {\n\t\t\t\t\t\tvar expr = expression_1.parse(cleanVMName(scopeProp, scope),{baseMethodType: \"Call\"});\n\t\t\t\t\t\tvar value = expr.value(scope);\n\t\t\t\t\t\tcanReflect_1_19_2_canReflect.setValue(value, newVal);\n\t\t\t\t\t},\n\n\t\t\t\t\t// Register what the custom observation changes\n\t\t\t\t\t\"can.getWhatIChange\": function getWhatIChange() {\n\t\t\t\t\t\tvar data = scope.getDataForScopeSet(cleanVMName(scopeProp, scope));\n\t\t\t\t\t\tvar m = new Map();\n\t\t\t\t\t\tvar s = new Set();\n\t\t\t\t\t\ts.add(data.key);\n\t\t\t\t\t\tm.set(data.parent, s);\n\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tmutate: {\n\t\t\t\t\t\t\t\tkeyDependencies: m\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t},\n\n\t\t\t\t\t\"can.getName\": function getName() {\n\t\t\t\t\t\t//!steal-remove-start\n\t\t\t\t\t\tif (process.env.NODE_ENV !== 'production') {\n\t\t\t\t\t\t\tvar result = \"ObservableFromScope<>\";\n\t\t\t\t\t\t\tvar data = scope.getDataForScopeSet(cleanVMName(scopeProp, scope));\n\n\t\t\t\t\t\t\tif (data.parent && data.key) {\n\t\t\t\t\t\t\t\tresult = \"ObservableFromScope<\" +\n\t\t\t\t\t\t\t\t\tcanReflect_1_19_2_canReflect.getName(data.parent) +\n\t\t\t\t\t\t\t\t\t\".\" +\n\t\t\t\t\t\t\t\t\tdata.key +\n\t\t\t\t\t\t\t\t\t\">\";\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn result;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t//!steal-remove-end\n\t\t\t\t\t},\n\t\t\t\t});\n\n\t\t\t\tvar data = scope.getDataForScopeSet(cleanVMName(scopeProp, scope));\n\t\t\t\tif (data.parent && data.key) {\n\t\t\t\t\t// Register what changes the Scope's parent key\n\t\t\t\t\tcanReflectDependencies_1_1_2_canReflectDependencies.addMutatedBy(data.parent, data.key, observation);\n\t\t\t\t}\n\n\t\t\t\treturn observation;\n\t\t\t}\n\t\t}\n\t},\n\t// ### getObservableFrom.viewModel\n\t// Returns a compute that's two-way bound to the `viewModel` returned by\n\t// `options.bindingSettings()`.\n\t// Arguments:\n\t// - bindingData - {source, name, setCompute}\n\t// - bindingContext - {scope, element}\n\t// - bindingSettings - {getViewModel}\n\tviewModel: function(bindingData, bindingContext) {\n\t\tvar scope = bindingContext.scope,\n\t\t\tvmName = bindingData.name,\n\t\t\tsetCompute = bindingData.setCompute;\n\n\t\tvar setName = cleanVMName(vmName, scope);\n\t\tvar isBoundToContext = vmName === \".\" || vmName === \"this\";\n\t\tvar keysToRead = isBoundToContext ? [] : canStacheKey_1_4_3_canStacheKey.reads(vmName);\n\n\t\tfunction getViewModelProperty() {\n\t\t\tvar viewModel = bindingContext.viewModel;\n\t\t\treturn canStacheKey_1_4_3_canStacheKey.read(viewModel, keysToRead, {}).value;\n\t\t}\n\t\t//!steal-remove-start\n\t\tif (process.env.NODE_ENV !== 'production') {\n\n\t\t\tObject.defineProperty(getViewModelProperty, \"name\", {\n\t\t\t\tvalue: \"<\"+bindingContext.element.tagName.toLowerCase()+\">.\" + vmName\n\t\t\t});\n\t\t}\n\t\t//!steal-remove-end\n\n\t\tvar observation = new setter(\n\t\t\tgetViewModelProperty,\n\n\t\t\tfunction setViewModelProperty(newVal) {\n\t\t\t\tvar viewModel = bindingContext.viewModel;\n\n\t\t\t\tif (setCompute) {\n\t\t\t\t\t// If there is a binding like `foo:from=\"~bar\"`, we need\n\t\t\t\t\t// to set the observable itself.\n\t\t\t\t\tvar oldValue = canReflect_1_19_2_canReflect.getKeyValue(viewModel, setName);\n\t\t\t\t\tif (canReflect_1_19_2_canReflect.isObservableLike(oldValue)) {\n\t\t\t\t\t\tcanReflect_1_19_2_canReflect.setValue(oldValue, newVal);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcanReflect_1_19_2_canReflect.setKeyValue(\n\t\t\t\t\t\t\tviewModel,\n\t\t\t\t\t\t\tsetName,\n\t\t\t\t\t\t\tnew canSimpleObservable_2_5_0_canSimpleObservable(canReflect_1_19_2_canReflect.getValue(newVal))\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (isBoundToContext) {\n\t\t\t\t\t\tcanReflect_1_19_2_canReflect.setValue(viewModel, newVal);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcanStacheKey_1_4_3_canStacheKey.write(viewModel, keysToRead, newVal);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\n\t\t//!steal-remove-start\n\t\tif (process.env.NODE_ENV !== 'production') {\n\t\t\tvar viewModel = bindingContext.viewModel;\n\t\t\tif (viewModel && setName) {\n\t\t\t\tcanReflectDependencies_1_1_2_canReflectDependencies.addMutatedBy(viewModel, setName, observation);\n\t\t\t}\n\t\t}\n\t\t//!steal-remove-end\n\n\t\treturn observation;\n\t},\n\t// ### getObservableFrom.attribute\n\t// Returns a compute that is two-way bound to an attribute or property on the element.\n\tattribute: function(bindingData, bindingContext ) {\n\n\t\tif(bindingData.name === \"this\") {\n\t\t\treturn canReflect_1_19_2_canReflect.assignSymbols({}, {\n\t\t\t\t\"can.getValue\": function() {\n\t\t\t\t\treturn bindingContext.element;\n\t\t\t\t},\n\n\t\t\t\t\"can.valueHasDependencies\": function() {\n\t\t\t\t\treturn false;\n\t\t\t\t},\n\t\t\t\t\"can.getName\": function getName() {\n\t\t\t\t\t//!steal-remove-start\n\t\t\t\t\treturn \"<\"+bindingContext.element.nodeName+\">\";\n\t\t\t\t\t//!steal-remove-end\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\treturn new canAttributeObservable_2_0_2_canAttributeObservable(bindingContext.element, bindingData.name, {}, bindingData.event);\n\t\t}\n\n\t}\n};\n\nvar startsWith = String.prototype.startsWith || function(text){\n\treturn this.indexOf(text) === 0;\n};\n\n// Gets an event name in the after part.\nfunction getEventName(result) {\n\tif (result.special.on !== undefined) {\n\t\treturn result.tokens[result.special.on + 1];\n\t}\n}\n\nvar siblingBindingRules = {\n\tto: {\n\t\tchild: {\n\t\t\texports: true,\n\t\t\tsyncSibling: false\n\t\t},\n\t\tparent: {\n\t\t\texports: false,\n\t\t\tsyncSibling: false\n\t\t}\n\t},\n\tfrom: {\n\t\tchild: {\n\t\t\texports: false,\n\t\t\tsyncSibling: false\n\t\t},\n\t\tparent: {\n\t\t\texports: true,\n\t\t\tsyncSibling: false\n\t\t}\n\t},\n\tbind: {\n\t\tchild: {\n\t\t\texports: true,\n\t\t\tsyncSibling: false\n\t\t},\n\t\tparent: {\n\t\t\texports: true,\n\t\t\tsyncSibling: true\n\t\t}\n\t},\n\traw: {\n\t\tchild: {\n\t\t\texports: false,\n\t\t\tsyncSibling: false\n\t\t},\n\t\tparent: {\n\t\t\texports: true,\n\t\t\tsyncSibling: false\n\t\t}\n\t}\n};\nvar bindingNames = [];\nvar special$1 = {\n\tvm: true,\n\ton: true\n};\ncanReflect_1_19_2_canReflect.eachKey(siblingBindingRules, function(value, key) {\n\tbindingNames.push(key);\n\tspecial$1[key] = true;\n});\n\n// \"on:click:value:to\" //-> {tokens: [...], special: {on: 0, to: 3}}\nfunction tokenize(source) {\n\tvar splitByColon = source.split(\":\");\n\t// combine tokens that are not to, from, vm,\n\tvar result = {\n\t\ttokens: [],\n\t\tspecial: {}\n\t};\n\tsplitByColon.forEach(function(token) {\n\t\tif (special$1[token]) {\n\t\t\tresult.special[token] = result.tokens.push(token) - 1;\n\t\t} else {\n\t\t\tresult.tokens.push(token);\n\t\t}\n\t});\n\n\treturn result;\n}\n\n// ## getChildBindingStr\nvar getChildBindingStr = function(tokens, favorViewModel) {\n\tif (tokens.indexOf('vm') >= 0) {\n\t\treturn viewModelBindingStr;\n\t} else if (tokens.indexOf('el') >= 0) {\n\t\treturn attributeBindingStr;\n\t} else {\n\t\treturn favorViewModel ? viewModelBindingStr : viewModelOrAttributeBindingStr;\n\t}\n};\n\n// ## getSiblingBindingData\n// Returns information about the binding read from an attribute node.\n// Arguments:\n// - node - An attribute node like: `{name, value}`\n// - bindingSettings - Optional.  Has {favorViewModel: Boolean}\n// Returns an object with:\n// - `parent` - {source, name, event, exports, syncSibling}\n// - `child` - {source, name, event, exports, syncSibling, setCompute}\n// - `bindingAttributeName` - debugging name.\n// - `initializeValues` - should parent and child be initialized to their counterpart.\n//\n// `parent` and `child` properties:\n//\n// - `source` - where is the value read from: \"scope\", \"attribute\", \"viewModel\".\n// - `name` - the name of the property that should be read\n// - `event` - an optional event name to listen to\n// - `exports` - if the value is exported to its sibling\n// - `syncSibling` - if the value is sticky. When this value is updated, should the value be checked after\n//   and its sibling be updated immediately.\n// - `setCompute` - set the value to a compute.\nfunction getSiblingBindingData(node, bindingSettings) {\n\n\tvar siblingBindingData,\n\t\tattributeName = canAttributeEncoder_1_1_4_canAttributeEncoder.decode(node.name),\n\t\tattributeValue = node.value || \"\";\n\n\tvar result = tokenize(attributeName),\n\t\tdataBindingName,\n\t\tspecialIndex;\n\n\t// check if there's a match of a binding name with at least a value before it\n\tbindingNames.forEach(function(name) {\n\t\tif (result.special[name] !== undefined && result.special[name] > 0) {\n\t\t\tdataBindingName = name;\n\t\t\tspecialIndex = result.special[name];\n\t\t\treturn false;\n\t\t}\n\t});\n\n\tif (dataBindingName) {\n\t\tvar childEventName = getEventName(result);\n\n\t\tvar initializeValues = childEventName && dataBindingName !== \"bind\" ? false : true;\n\t\tsiblingBindingData = {\n\t\t\tparent: canAssign_1_3_3_canAssign({\n\t\t\t\tsource: scopeBindingStr,\n\t\t\t\tname: result.special.raw ? ('\"' + attributeValue + '\"') : attributeValue\n\t\t\t}, siblingBindingRules[dataBindingName].parent),\n\t\t\tchild: canAssign_1_3_3_canAssign({\n\t\t\t\tsource: getChildBindingStr(result.tokens, bindingSettings && bindingSettings.favorViewModel),\n\t\t\t\tname: result.tokens[specialIndex - 1],\n\t\t\t\tevent: childEventName\n\t\t\t}, siblingBindingRules[dataBindingName].child),\n\t\t\tbindingAttributeName: attributeName,\n\t\t\tinitializeValues: initializeValues\n\t\t};\n\t\tif (attributeValue.trim().charAt(0) === \"~\") {\n\t\t\tsiblingBindingData.child.setCompute = true;\n\t\t}\n\t\treturn siblingBindingData;\n\t}\n}\n\n\n\n// ## makeDataBinding\n// Makes a data binding for an attribute `node`.  Returns an object with information\n// about the binding, including an `onTeardown` method that undoes the binding.\n// If the data binding involves a `viewModel`, an `onCompleteBinding` method is returned on\n// the object.  This method must be called after the element has a `viewModel` with the\n// `viewModel` to complete the binding.\n//\n// Arguments:\n// - `node` - an attribute node or an object with a `name` and `value` property.\n// - `bindingContext` - The stache context  `{scope, element, parentNodeList}`\n// - `bindingSettings` - Settings to control the behavior.\n//   - `getViewModel`  - a function that returns the `viewModel` when called.  This function can be passed around (not called) even if the\n//      `viewModel` doesn't exist yet.\n//   - `attributeViewModelBindings` - properties already specified as being a viewModel<->attribute (as opposed to viewModel<->scope) binding.\n//   - `favorViewModel`\n//   - `alreadyUpdatedChild`\n// Returns:\n// - `undefined` - If this isn't a data binding.\n// - `object` - An object with information about the binding:\n//   - siblingBindingData: the binding behavior\n//   - binding: canBinding\nvar makeDataBinding = function(node, bindingContext, bindingSettings) {\n\t// Get information about the binding.\n\tvar siblingBindingData = bindingSettings.getSiblingBindingData( node, bindingSettings );\n\tif (!siblingBindingData) {\n\t\treturn;\n\t}\n\n\t// Get computes for the parent and child binding\n\tvar parentObservable = getObservableFrom[siblingBindingData.parent.source](\n\t\tsiblingBindingData.parent,\n\t\tbindingContext, bindingSettings\n\t),\n\tchildObservable = getObservableFrom[siblingBindingData.child.source](\n\t\tsiblingBindingData.child,\n\t\tbindingContext, bindingSettings,\n\t\tparentObservable\n\t);\n\n\tvar childToParent = !!siblingBindingData.child.exports;\n\tvar parentToChild = !!siblingBindingData.parent.exports;\n\n\t// Check for child:bind=\"~parent\" (it’s not supported because it’s unclear\n\t// what the “right” behavior should be)\n\n\t//!steal-remove-start\n\tif (process.env.NODE_ENV !== 'production') {\n\t\tif (siblingBindingData.child.setCompute && childToParent && parentToChild) {\n\t\t\tdev.warn(\"Two-way binding computes is not supported.\");\n\t\t}\n\t}\n\t//!steal-remove-end\n\n\tvar bindingOptions = {\n\t\tchild: childObservable,\n\t\tchildToParent: childToParent,\n\t\t// allow cycles if one directional\n\t\tcycles: childToParent === true && parentToChild === true ? 0 : 100,\n\t\tonInitDoNotUpdateChild: bindingSettings.alreadyUpdatedChild || siblingBindingData.initializeValues === false,\n\t\tonInitDoNotUpdateParent: siblingBindingData.initializeValues === false,\n\t\tonInitSetUndefinedParentIfChildIsDefined: true,\n\t\tparent: parentObservable,\n\t\tparentToChild: parentToChild,\n\t\tpriority: bindingContext.parentNodeList ? bindingContext.parentNodeList.nesting + 1 : undefined,\n\t\tqueue: \"dom\",\n\t\tsticky: siblingBindingData.parent.syncSibling ? \"childSticksToParent\" : undefined,\n\t\telement: bindingContext.element\n\t};\n\n\t//!steal-remove-start\n\tif (process.env.NODE_ENV !== 'production') {\n\t\tvar nodeHTML = canAttributeEncoder_1_1_4_canAttributeEncoder.decode(node.name)+\"=\"+JSON.stringify(node.value);\n\t\tvar tagStart = \"<\"+bindingContext.element.nodeName.toLowerCase(),\n\t\t\ttag = tagStart+\">\";\n\n\t\tvar makeUpdateName = function(child, childName) {\n\n\t\t\tif(child === \"viewModel\") {\n\t\t\t\treturn tag+\".\"+childName;\n\t\t\t}\n\t\t\telse if(child === \"scope\") {\n\t\t\t\treturn \"{{\"+childName+\"}}\";\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn \"\"+child+\".\"+childName;\n\t\t\t}\n\t\t};\n\t\tbindingOptions.debugName = tagStart+\" \"+nodeHTML+\">\";\n\t\tbindingOptions.updateChildName = bindingOptions.debugName+\" updates \"+\n\t\t\tmakeUpdateName(siblingBindingData.child.source, siblingBindingData.child.name)+\n\t\t\t\" from \"+makeUpdateName(siblingBindingData.parent.source, siblingBindingData.parent.name);\n\n\t\tbindingOptions.updateParentName = bindingOptions.debugName+\" updates \"+\n\t\t\tmakeUpdateName(siblingBindingData.parent.source, siblingBindingData.parent.name)+\n\t\t\t\" from \"+makeUpdateName(siblingBindingData.child.source, siblingBindingData.child.name);\n\t}\n\t//!steal-remove-end\n\n\t// Create the binding\n\tvar canBinding = new canBind_1_5_1_canBind(bindingOptions);\n\n\treturn {\n\t\tsiblingBindingData: siblingBindingData,\n\t\tbinding: canBinding\n\t};\n};\n\nvar cleanVMName = function(name, scope) {\n\t//!steal-remove-start\n\tif (process.env.NODE_ENV !== 'production') {\n\t\tif (name.indexOf(\"@\") >= 0 && scope) {\n\t\t\tvar filename = scope.peek('scope.filename');\n\t\t\tvar lineNumber = scope.peek('scope.lineNumber');\n\n\t\t\tdev.warn(\n\t\t\t\t(filename ? filename + ':' : '') +\n\t\t\t\t(lineNumber ? lineNumber + ': ' : '') +\n\t\t\t\t'functions are no longer called by default so @ is unnecessary in \\'' + name + '\\'.');\n\t\t}\n\t}\n\t//!steal-remove-end\n\treturn name.replace(/@/g, \"\");\n};\n\nvar canStacheBindings = {\n\tbehaviors: behaviors,\n\tgetSiblingBindingData: getSiblingBindingData,\n\tbindings: bindings,\n\tgetObservableFrom: getObservableFrom,\n\tmakeDataBinding: makeDataBinding\n};\n\ncanStacheBindings[canSymbol_1_7_0_canSymbol.for(\"can.callbackMap\")] = bindings;\n\nvar canStacheBindings_5_0_5_canStacheBindings = canStacheBindings;\n\nconst rendererSymbol = Symbol.for(\"can.stacheRenderer\");\nconst viewInsertSymbol$2 = Symbol.for(\"can.viewInsert\");\n\n// make bindings work\ncanStache_5_1_1_canStache.addBindings(canStacheBindings_5_0_5_canStacheBindings);\n\nvar mixinStacheView = function mixinStacheView(Base = HTMLElement) {\n\tclass StacheClass extends Base {\n\t\trender(props, renderOptions) {\n\t\t\tif(super.render) {\n\t\t\t\tsuper.render(props);\n\t\t\t}\n\n\t\t\t// cache renderer function so `stache(...)` is only called\n\t\t\t// for the first instance of each StacheElement constructor\n\t\t\tlet renderer = this.constructor[rendererSymbol];\n\t\t\tif (!renderer) {\n\t\t\t\tconst view = this.constructor.view;\n\t\t\t\tconst viewName = canReflect_1_19_2_canReflect.getName(this.constructor) + \"View\";\n\n\t\t\t\trenderer = typeof view === \"function\" ?\n\t\t\t\t\tview :\n\t\t\t\t\tcanStache_5_1_1_canStache(viewName, view || \"\");\n\n\t\t\t\tthis.constructor[rendererSymbol] = renderer;\n\t\t\t}\n\n\t\t\tconst frag = renderer(\n\t\t\t\tnew canViewScope_4_13_7_canViewScope(this, null, { viewModel: true }),\n\t\t\t\trenderOptions\n\t\t\t);\n\n\t\t\tconst viewRoot = this.viewRoot || this;\n\t\t\tcanDomMutate_2_0_9_node.appendChild.call(viewRoot, frag);\n\t\t}\n\n\t\tconnect() {\n\t\t\tif (super.connect) {\n\t\t\t\tsuper.connect();\n\t\t\t}\n\n\t\t\tconst removedDisposal = canDomMutate_2_0_9_canDomMutate.onNodeRemoved(this, () => {\n\t\t\t\tvar doc = this.ownerDocument;\n\t\t\t\tvar rootNode = doc.contains ? doc : doc.documentElement;\n\t\t\t\tif (!rootNode || !rootNode.contains(this)) {\n\t\t\t\t\tremovedDisposal();\n\t\t\t\t\tthis.disconnect();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\t[viewInsertSymbol$2]() {\n\t\t\treturn this;\n\t\t}\n\t}\n\tStacheClass.prototype[Symbol.for(\"can.preventDataBindings\")] = true;\n\treturn StacheClass;\n};\n\nconst viewModelSymbol$2 = Symbol.for(\"can.viewModel\");\n\nvar mixinViewmodelSymbol = function mixinViewModelSymbol(BaseClass = HTMLElement) {\n\tclass ViewModelClass extends BaseClass {}\n\n\t// can-stache-bindings uses viewModel symbol\n\tcanDefineLazyValue_1_1_1_defineLazyValue(ViewModelClass.prototype, viewModelSymbol$2, function() {\n\t\treturn this;\n\t});\n\n\treturn ViewModelClass;\n};\n\nconst getValueSymbol$3 = Symbol.for(\"can.getValue\");\nconst setValueSymbol$4 = Symbol.for(\"can.setValue\");\nconst metaSymbol$7 = Symbol.for(\"can.meta\");\n\nvar mixinBindings = function mixinBindings(Base = HTMLElement) {\n\treturn class BindingsClass extends Base {\n\t\tbindings(bindings) {\n\t\t\tif(this[metaSymbol$7] === undefined) {\n\t\t\t\tthis[metaSymbol$7] = {};\n\t\t\t}\n\t\t\tconst bindingsObservables = {};\n\t\t\tcanReflect_1_19_2_canReflect.eachKey(bindings, (parent, propName) => {\n\t\t\t\t// Create an observable for reading/writing the viewModel\n\t\t\t\t// even though it doesn't exist yet.\n\t\t\t\tconst child = key(this, propName);\n\n\t\t\t\tbindingsObservables[propName] = {\n\t\t\t\t\tparent,\n\t\t\t\t\tchild\n\t\t\t\t};\n\t\t\t});\n\t\t\tthis[metaSymbol$7]._connectedBindings = bindingsObservables;\n\t\t\treturn this;\n\t\t}\n\t\tinitialize(props) {\n\t\t\tvar savedBindings = this[metaSymbol$7] && this[metaSymbol$7]._connectedBindings;\n\t\t\tif (savedBindings) {\n\t\t\t\tprops = props || {};\n\n\t\t\t\tif (this[metaSymbol$7]._bindings === undefined) {\n\t\t\t\t\tthis[metaSymbol$7]._bindings = [];\n\t\t\t\t}\n\n\t\t\t\tcanReflect_1_19_2_canReflect.eachKey(savedBindings, (binding, propName) => {\n\t\t\t\t\tconst { child, parent } = binding;\n\n\t\t\t\t\tvar canGetParentValue = parent != null && !!parent[getValueSymbol$3];\n\t\t\t\t\tvar canSetParentValue = parent != null && !!parent[setValueSymbol$4];\n\n\t\t\t\t\t// If we can get or set the value, then we’ll create a binding\n\t\t\t\t\tif (canGetParentValue || canSetParentValue) {\n\n\t\t\t\t\t\t// Create the binding similar to what’s in can-stache-bindings\n\t\t\t\t\t\tvar canBinding = new canBind_1_5_1_canBind({\n\t\t\t\t\t\t\tchild: child,\n\t\t\t\t\t\t\tparent: parent,\n\t\t\t\t\t\t\tqueue: \"dom\",\n\t\t\t\t\t\t\telement: this,\n\n\t\t\t\t\t\t\t//!steal-remove-start\n\t\t\t\t\t\t\t// For debugging: the names that will be assigned to the updateChild\n\t\t\t\t\t\t\t// and updateParent functions within can-bind\n\t\t\t\t\t\t\tupdateChildName: \"update <\" + this.nodeName.toLowerCase() + \">.\"+propName,\n\t\t\t\t\t\t\tupdateParentName: \"update \" + canReflect_1_19_2_canReflect.getName(parent) + \" from <\" + this.nodeName.toLowerCase() + \">.\"+propName\n\t\t\t\t\t\t\t//!steal-remove-end\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tthis[metaSymbol$7]._bindings.push({\n\t\t\t\t\t\t\tbinding: canBinding,\n\t\t\t\t\t\t\tsiblingBindingData: {\n\t\t\t\t\t\t\t\tparent: {\n\t\t\t\t\t\t\t\t\tsource: \"scope\",\n\t\t\t\t\t\t\t\t\texports: canGetParentValue\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tchild: {\n\t\t\t\t\t\t\t\t\tsource: \"viewModel\",\n\t\t\t\t\t\t\t\t\texports: canSetParentValue,\n\t\t\t\t\t\t\t\t\tname: propName\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tbindingAttributeName: propName\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Can’t get or set the value, so assume it’s not an observable\n\t\t\t\t\t\tprops[propName] = parent;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tthis[metaSymbol$7].other = true;\n\t\t\t}\n\t\t\tif (super.initialize) {\n\t\t\t\tsuper.initialize(props);\n\t\t\t}\n\t\t}\n\t\trender(props, renderOptions) {\n\t\t\tconst viewRoot = this.viewRoot || this;\n\t\t\tviewRoot.innerHTML = \"\";\n\n\t\t\tif(super.render) {\n\t\t\t\tsuper.render(props, renderOptions);\n\t\t\t}\n\t\t}\n\t\tdisconnect() {\n\t\t\tdelete this[metaSymbol$7]._bindings;\n\t\t\tif (super.disconnect) {\n\t\t\t\tsuper.disconnect();\n\t\t\t}\n\t\t}\n\t};\n};\n\nconst metaSymbol$8 = Symbol.for(\"can.meta\");\nconst inSetupSymbol$5 = Symbol.for(\"can.initializing\");\n\nvar mixinInitializeBindings = function mixinBindings(Base = HTMLElement) {\n\treturn class InitializeBindingsClass extends Base {\n\t\tinitialize(props) {\n\t\t\tvar bindings = this[metaSymbol$8] && this[metaSymbol$8]._bindings;\n\n\t\t\tif (bindings && bindings.length) {\n\t\t\t\t// set inSetup to false so that observations read in `initializeViewModel`\n\t\t\t\t// correctly set up bindings\n\t\t\t\tconst origInSetup = this[inSetupSymbol$5];\n\t\t\t\tthis[inSetupSymbol$5] = false;\n\n\t\t\t\tconst bindingContext = {\n\t\t\t\t\telement: this\n\t\t\t\t};\n\t\t\t\t// Initialize the viewModel.  Make sure you\n\t\t\t\t// save it so the observables can access it.\n\t\t\t\tvar initializeData = canStacheBindings_5_0_5_canStacheBindings.behaviors.initializeViewModel(bindings, props, (properties) => {\n\t\t\t\t\tsuper.initialize(properties);\n\t\t\t\t\treturn this;\n\t\t\t\t}, bindingContext);\n\t\n\t\t\t\tthis[metaSymbol$8]._connectedBindingsTeardown = function() {\n\t\t\t\t\tfor (var attrName in initializeData.onTeardowns) {\n\t\t\t\t\t\tinitializeData.onTeardowns[attrName]();\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\t// restore inSetup to the original value\n\t\t\t\tthis[inSetupSymbol$5] = origInSetup;\n\t\t\t} else {\n\t\t\t\tif (super.initialize) {\n\t\t\t\t\tsuper.initialize(props);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tdisconnect() {\n\t\t\tif(this[metaSymbol$8] && this[metaSymbol$8]._connectedBindingsTeardown) {\n\t\t\t\tthis[metaSymbol$8]._connectedBindingsTeardown();\n\t\t\t\tthis[metaSymbol$8]._connectedBindingsTeardown = null;\n\t\t\t}\n\t\t\tif (super.disconnect) {\n\t\t\t\tsuper.disconnect();\n\t\t\t}\n\t\t}\n\t};\n};\n\nconst { mixins: mixins$6 } = mixins;\n\nconst metaSymbol$9 = Symbol.for(\"can.meta\");\n\n// `attributeChangedCallback` cannot be overwritten so we need to create a named\n// function to check if we have had a `attributeChangedCallback` set.\nfunction baseAttributeChangedCallback () {\n\t/* jshint validthis: true */\n\tif (this.attributeChangedCallback !== baseAttributeChangedCallback) {\n\t\t// `this.attributeChangedCallback` is being set up within `can-observable-bindings`\n\t\tthis.attributeChangedCallback.apply(this, arguments);\n\t}\n}\n\nvar mixinBindBehaviour = function mixinBindBehaviour(Base = HTMLElement) {\n\tclass BindingPropsClass extends Base {\n\t\tinitialize(props) {\n\t\t\tif(this[metaSymbol$9] === undefined) {\n\t\t\t\tthis[metaSymbol$9] = {};\n\t\t\t}\n\t\t\tif (this[metaSymbol$9]._bindings === undefined) {\n\t\t\t\tthis[metaSymbol$9]._bindings = [];\n\t\t\t}\n\t\t\t// `_uninitializedBindings` are being set within `observedAttributes` which creates the bindings\n\t\t\tObject.keys(this.constructor[metaSymbol$9]._uninitializedBindings).forEach(propName => {\n\t\t\t\tconst binding = this.constructor[metaSymbol$9]._uninitializedBindings[propName](this);\n\n\t\t\t\t// Add bindings to the instance `metaSymbol` to be set up during `mixin-initialize-bindings`\n\t\t\t\tthis[metaSymbol$9]._bindings.push({\n\t\t\t\t\tbinding,\n\t\t\t\t\tsiblingBindingData: {\n\t\t\t\t\t\tparent: {\n\t\t\t\t\t\t\tsource: \"scope\",\n\t\t\t\t\t\t\texports: true\n\t\t\t\t\t\t},\n\t\t\t\t\t\tchild: {\n\t\t\t\t\t\t\tsource: \"viewModel\",\n\t\t\t\t\t\t\texports: true,\n\t\t\t\t\t\t\tname: propName\n\t\t\t\t\t\t},\n\t\t\t\t\t\tbindingAttributeName: propName\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tif (super.initialize) {\n\t\t\t\tsuper.initialize(props);\n\t\t\t}\n\t\t}\n\t}\n\n\t// To prevent inifinite loop, use a named function so we can differentiate\n\t// make it writable so it can be set elsewhere  \n\tObject.defineProperty(BindingPropsClass.prototype, 'attributeChangedCallback', {\n\t\tvalue: baseAttributeChangedCallback,\n\t\twritable: true\n\t});\n\n\treturn BindingPropsClass;\n};\n\n// We can't set `observedAttributes` on the `StacheElement.prototype` as static properties are\n// not copied over with `Object.create`\nvar initializeObservedAttributes = function initializeObservedAttributes (ctr) {\n\tObject.defineProperty(ctr, 'observedAttributes', {\n\t\tget () {\n\t\t\t// We only want to return `observedAttributes` if we have a `bind` on the\n\t\t\t// property definition\n\t\t\tlet hasBindDefinition = false;\n\t\t\t// Run finalizeClass to set up the property definitions\n\t\t\tmixins$6.finalizeClass(this);\n\t\t\t\n\t\t\tif(this[metaSymbol$9] === undefined) {\n\t\t\t\tthis[metaSymbol$9] = {};\n\t\t\t}\n\t\t\tif(this[metaSymbol$9]._uninitializedBindings === undefined) {\n\t\t\t\tthis[metaSymbol$9]._uninitializedBindings = {};\n\t\t\t}\n\n\t\t\t// Check that we have property definitions\n\t\t\tconst definitions = this.prototype._define && this.prototype._define.definitions;\n\t\t\tif (definitions) {\n\t\t\t\t// Run through all defitions so we can check if they have a `bind` function\n\t\t\t\tObject.keys(definitions).forEach(propName => {\n\t\t\t\t\tconst definition = definitions[propName];\n\t\t\t\t\tif (typeof definition.bind === 'function') {\n\t\t\t\t\t\tconst bindFn = definition.bind(propName, this);\n\t\t\t\t\t\t// Set up the bindings so that they can be called during initialize\n\t\t\t\t\t\t// to setup binding starts\n\t\t\t\t\t\tthis[metaSymbol$9]._uninitializedBindings[propName] = bindFn;\n\t\t\t\t\t\thasBindDefinition = true;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\t// Only return `this.observedAttributes` if we have binds otherwise\n\t\t\t// we create an inifinite loop\n\t\t\treturn hasBindDefinition ? this.observedAttributes : [];\n\t\t}\n\t});\n};\nmixinBindBehaviour.initializeObservedAttributes = initializeObservedAttributes;\n\nconst { initializeObservedAttributes: initializeObservedAttributes$1 } = mixinBindBehaviour;\n\n\nconst { createConstructorFunction: createConstructorFunction$3 } = mixins;\n\nconst initializeSymbol = Symbol.for(\"can.initialize\");\nconst teardownHandlersSymbol$1 = Symbol.for(\"can.teardownHandlers\");\nconst isViewSymbol$3 = Symbol.for(\"can.isView\");\n\n\n// Calling a renderer like {{foo()}} gets the template scope\n// added no matter what. This checks for that condition.\n// https://github.com/canjs/can-stache/issues/719\nfunction rendererWasCalledWithData(scope) {\n\treturn scope instanceof canViewScope_4_13_7_canViewScope &&\n\t\tscope._parent &&\n\t\tscope._parent._context instanceof canViewScope_4_13_7_canViewScope.TemplateContext;\n}\n\nfunction addContext(rawRenderer, tagData) {\n\tfunction renderer(data) {\n\t\tif(rendererWasCalledWithData(data)) {\n\t\t\treturn rawRenderer(tagData.scope.addLetContext(data._context));\n\t\t} else {\n\t\t\t// if it was called programmatically (not in stache), just add the data\n\t\t\treturn rawRenderer(tagData.scope.addLetContext(data));\n\t\t}\n\t}\n\t// Marking as a view will add the template scope ... but it should\n\t// already be present in `tagData.scope`.\n\t// However, I mark this as a renderer because that is what it is.\n\trenderer[isViewSymbol$3] = true;\n\treturn renderer;\n}\n\nfunction DeriveElement(BaseElement = HTMLElement) {\n\tclass StacheElement extends\n\t// add lifecycle methods\n\t// this needs to happen after other mixins that implement these methods\n\t// so that this.<lifecycleMethod> is the actual lifecycle method which\n\t// controls whether the methods farther \"down\" the chain are called\n\tmixinLifecycleMethods(\n\t\t// mixin .bindings() method and behavior\n\t\tmixinBindings(\n\t\t\t// Find all prop definitions and extract `{ bind: () => {} }` for binding initialization\n\t\t\tmixinBindBehaviour(\n\t\t\t\t// Initialize the bindings\n\t\t\t\tmixinInitializeBindings(\n\t\t\t\t\t// mix in viewModel symbol used by can-stache-bindings\n\t\t\t\t\tmixinViewmodelSymbol(\n\t\t\t\t\t\t// mix in stache renderer from `static view` property\n\t\t\t\t\t\tmixinStacheView(\n\t\t\t\t\t\t\t// add getters/setters from `static props` property\n\t\t\t\t\t\t\tmixinProps(BaseElement)\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t)\n\t\t)\n\t) {\n\t\t[initializeSymbol](el, tagData) {\n\n\n\t\t\tconst teardownBindings = canStacheBindings_5_0_5_canStacheBindings.behaviors.viewModel(\n\t\t\t\tel,\n\t\t\t\ttagData,\n\t\t\t\tfunction makeViewModel(initialViewmodelData) {\n\t\t\t\t\tfor(let prop in tagData.templates) {\n\t\t\t\t\t\t// It's ok to modify the argument. The argument is created\n\t\t\t\t\t\t// just for what gets passed into creating the VM.\n\t\t\t\t\t\tinitialViewmodelData[prop] = addContext(tagData.templates[prop], tagData);\n\t\t\t\t\t}\n\t\t\t\t\tel.render(initialViewmodelData);\n\t\t\t\t\treturn el;\n\t\t\t\t}\n\t\t\t);\n\n\n\t\t\tif (el[teardownHandlersSymbol$1]) {\n\t\t\t\tel[teardownHandlersSymbol$1].push(teardownBindings);\n\t\t\t}\n\t\t}\n\t}\n\n\tconst StacheElementConstructorFunction = createConstructorFunction$3(\n\t\tStacheElement\n\t);\n\n\t// Initialize the `observedAttributes`\n\tinitializeObservedAttributes$1(StacheElementConstructorFunction);\n\n\treturn StacheElementConstructorFunction;\n}\n\nvar canStacheElement = canNamespace_1_0_0_canNamespace.StacheElement = DeriveElement();\n\nvar Compute$1 = function(newVal) {\n\tif (arguments.length) {\n\t\treturn canReflect_1_19_2_canReflect.setValue(this, newVal);\n\t} else {\n\t\treturn canReflect_1_19_2_canReflect.getValue(this);\n\t}\n};\n\nvar translationHelpers = new WeakMap();\n\nvar makeCompute = function(observable) {\n\tvar compute = Compute$1.bind(observable);\n\tcompute.on = compute.bind = compute.addEventListener = function(\n\t\tevent,\n\t\thandler\n\t) {\n\t\tvar translationHandler = translationHelpers.get(handler);\n\t\tif (!translationHandler) {\n\t\t\ttranslationHandler = function(newVal, oldVal) {\n\t\t\t\thandler.call(compute, { type: \"change\" }, newVal, oldVal);\n\t\t\t};\n\t\t\t//!steal-remove-start\n\t\t\tif (process.env.NODE_ENV !== 'production') {\n\t\t\t\tObject.defineProperty(translationHandler, \"name\", {\n\t\t\t\t\tvalue:\n\t\t\t\t\t\t\"translationHandler(\" +\n\t\t\t\t\t\tevent +\n\t\t\t\t\t\t\")::\" +\n\t\t\t\t\t\tcanReflect_1_19_2_canReflect.getName(observable) +\n\t\t\t\t\t\t\".onValue(\" +\n\t\t\t\t\t\tcanReflect_1_19_2_canReflect.getName(handler) +\n\t\t\t\t\t\t\")\"\n\t\t\t\t});\n\t\t\t}\n\t\t\t//!steal-remove-end\n\t\t\ttranslationHelpers.set(handler, translationHandler);\n\t\t}\n\t\tcanReflect_1_19_2_canReflect.onValue(observable, translationHandler);\n\t};\n\tcompute.off = compute.unbind = compute.removeEventListener = function(\n\t\tevent,\n\t\thandler\n\t) {\n\t\tcanReflect_1_19_2_canReflect.offValue(observable, translationHelpers.get(handler));\n\t};\n\n\tcanReflect_1_19_2_canReflect.assignSymbols(compute, {\n\t\t\"can.getValue\": function() {\n\t\t\treturn canReflect_1_19_2_canReflect.getValue(observable);\n\t\t},\n\t\t\"can.setValue\": function(newVal) {\n\t\t\treturn canReflect_1_19_2_canReflect.setValue(observable, newVal);\n\t\t},\n\t\t\"can.onValue\": function(handler, queue) {\n\t\t\treturn canReflect_1_19_2_canReflect.onValue(observable, handler, queue);\n\t\t},\n\t\t\"can.offValue\": function(handler, queue) {\n\t\t\treturn canReflect_1_19_2_canReflect.offValue(observable, handler, queue);\n\t\t},\n\t\t\"can.valueHasDependencies\": function() {\n\t\t\treturn canReflect_1_19_2_canReflect.valueHasDependencies(observable);\n\t\t},\n\t\t\"can.getPriority\": function() {\n\t\t\treturn canReflect_1_19_2_canReflect.getPriority(observable);\n\t\t},\n\t\t\"can.setPriority\": function(newPriority) {\n\t\t\tcanReflect_1_19_2_canReflect.setPriority(observable, newPriority);\n\t\t},\n\t\t\"can.isValueLike\": true,\n\t\t\"can.isFunctionLike\": false\n\t});\n\tcompute.isComputed = true;\n\treturn compute;\n};\n\n// # String Coercion Helper Functions\n\n// ## stringify\n// Converts an object, array, Map or List to a string.\n// It attempts the following flow to convert to a string:\n// if `obj` is an object:\n//   - call `.serialize` on `obj`, if available\n//   - shallow copy `obj` using `.slice` or `can-reflect.assign`\n//   - convert each proprety to a string recursively\n// else\n//   - call `.toString` on `obj`, if available.\nfunction stringify(obj) {\n\tif (obj && typeof obj === \"object\") {\n\t\tif (\"serialize\" in obj) {\n\t\t\tobj = obj.serialize();\n\n\t\t// Get array from array-like or shallow-copy object.\n\t\t} else if (typeof obj.slice === \"function\") {\n\t\t\tobj = obj.slice();\n\t\t} else {\n\t\t\tcanReflect_1_19_2_canReflect.assign({}, obj);\n\t\t}\n\n\t\t// Convert each object property or array item into a string.\n\t\tcanReflect_1_19_2_canReflect.eachKey(obj, function(val, prop) {\n\t\t\tobj[prop] = stringify(val);\n\t\t});\n\n\t// If `obj` supports `.toString` call it.\n\t} else if (obj !== undefined && obj !== null && (typeof obj.toString === \"function\" )) {\n\t\tobj = obj.toString();\n\t}\n\n\treturn obj;\n}\n\n// ## stringCoercingMapDecorator\n// Coercies the arguments of `can-map.attr` to strings.\n// everything in the backing Map is a string\n// add type coercion during Map setter to coerce all values to strings so unexpected conflicts don't happen.\n// https://github.com/canjs/canjs/issues/2206\n// A proposal to change this behavior is currently open:\n// https://github.com/canjs/can-route/issues/125\nfunction stringCoercingMapDecorator(map) {\n\tvar decoratorSymbol = canSymbol_1_7_0_canSymbol.for(\"can.route.stringCoercingMapDecorator\");\n\n\tif (!map.attr[decoratorSymbol]) {\n\t\tvar attrUndecoratedFunction = map.attr;\n\n\t\tmap.attr = function(key) {\n\n\t\t\tvar serializable = typeof key === \"string\" &&\n\t\t\t\t(this.define === undefined || this.define[key] === undefined || !!this.define[key].serialize),\n\t\t\t\targs;\n\n\t\t\tif (serializable) { // if setting non-str non-num attr\n\t\t\t\targs = stringify(Array.apply(null, arguments));\n\t\t\t} else {\n\t\t\t\targs = arguments;\n\t\t\t}\n\n\t\t\treturn attrUndecoratedFunction.apply(this, args);\n\t\t};\n\n\t\tcanReflect_1_19_2_canReflect.setKeyValue(map.attr, decoratorSymbol, true);\n\t}\n\n\treturn map;\n}\n\nvar stringCoercingMapDecorator_1 = stringCoercingMapDecorator;\nvar stringify_1 = stringify;\n\nvar stringCoercion = {\n\tstringCoercingMapDecorator: stringCoercingMapDecorator_1,\n\tstringify: stringify_1\n};\n\nvar stringify$1 = stringCoercion.stringify;\n\nvar Stringify = {};\nStringify[canSymbol_1_7_0_canSymbol.for(\"can.new\")] = function(value) {\n\treturn stringify$1(value);\n};\nStringify[canSymbol_1_7_0_canSymbol.for(\"can.isMember\")] = function(value) {\n\treturn typeof value === \"string\";\n};\n\nclass RouteData extends canObservableObject {\n\tstatic get propertyDefaults() {\n\t\treturn {\n\t\t\ttype: Stringify\n\t\t};\n\t}\n}\n\nvar routedata = RouteData;\n\nvar urlDataObservable = new canSimpleObservable_2_5_0_canSimpleObservable(null);\n\ncanReflect_1_19_2_canReflect.setName(urlDataObservable, \"route.urlData\");\n\nvar bindingProxy = {\n\tdefaultBinding: null,\n\turlDataObservable: urlDataObservable,\n\tbindings: {},\n\tcall: function() {\n\t\tvar args = canReflect_1_19_2_canReflect.toArray(arguments),\n\t\t\tprop = args.shift(),\n\t\t\tbinding = urlDataObservable.value;\n\t\tif (binding === null) {\n\t\t\tthrow new Error(\"there is no current binding!!!\");\n\t\t}\n\t\tvar method = binding[prop.indexOf(\"can.\") === 0 ? canSymbol_1_7_0_canSymbol.for(prop) : prop];\n\t\tif (method.apply) {\n\t\t\treturn method.apply(binding, args);\n\t\t} else {\n\t\t\treturn method;\n\t\t}\n\t}\n};\nvar bindingProxy_1 = bindingProxy;\n\nvar regexps = {\n\tcurlies: /\\{\\s*([\\w.]+)\\s*\\}/g,\n\tcolon: /\\:([\\w.]+)/g\n};\n\n/**\n * @module {function} can-diff/map/map\n * @parent can-diff\n *\n * @description Return a difference of two maps or objects.\n *\n * @signature `diffMap(oldObject, newObject)`\n *\n * Find the differences between two objects, based on properties and values.\n *\n * ```js\n * var diffObject = require(\"can-diff/map/map\");\n *\n * diffMap({a: 1, b: 2}, {b: 3, c: 4})) // ->\n *   [{key: \"a\", type: \"remove\"},\n *    {key: \"b\", type: \"set\": value: 3},\n *    {key: \"c\", type: \"add\", \"value\": 4}]\n * ```\n *\n * @param {Object} oldObject The object to diff from.\n * @param {Object} newObject The object to diff to.\n * @return {Array} An array of object-[can-symbol/types/Patch patch] objects\n *\n * The object-patch object format has the following keys:\n * - **type**:  the type of operation on this property: add, remove, or set\n * - **key**:   the mutated property on the new object\n * - **value**: the new value (if type is \"add\" or \"set\")\n *\n */\nvar map$2 = function(oldObject, newObject){\n\tvar oldObjectClone,\n\t\tpatches = [];\n\n\t// clone oldObject so properties can be deleted\n\toldObjectClone = canReflect_1_19_2_canReflect.assignMap({}, oldObject);\n\n    canReflect_1_19_2_canReflect.eachKey(newObject, function(value, newProp){\n        // look for added properties\n        if (!oldObject || !oldObject.hasOwnProperty(newProp)) {\n            patches.push({\n                key: newProp,\n                type: 'add',\n                value: value\n            });\n        // look for changed properties\n        } else if (newObject[newProp] !== oldObject[newProp]) {\n            patches.push({\n                key: newProp,\n                type: 'set',\n                value: value\n            });\n        }\n\n        // delete properties found in newObject\n        // so we can find removed properties\n        delete oldObjectClone[newProp];\n    });\n\n\t// loop over removed properties\n\tfor (var oldProp in oldObjectClone) {\n\t\tpatches.push({\n\t\t\tkey: oldProp,\n\t\t\ttype: 'delete'\n\t\t});\n\t}\n\n\treturn patches;\n};\n\n// This file contains the function that allows the registration of routes\n\n\n\n\n\n\n\n\n\n\n// `RegExp` used to match route variables of the type '{name}'.\n// Any word character or a period is matched.\n\n// ### removeBackslash\n// Removes all backslashes (`\\`) from a string.\nfunction removeBackslash(string) {\n\treturn string.replace(/\\\\/g, \"\");\n}\n\n// ### wrapQuote\n// Converts input to a string and readies string for regex\n// input by escaping the following special characters: `[ ] ( ) { } \\ ^ $ . | ? * +`.\nfunction wrapQuote(string) {\n\treturn (string + \"\")\n\t\t.replace(/([.?*+\\^$\\[\\]\\\\(){}|\\-])/g, \"\\\\$1\");\n}\n\nvar RouteRegistry = {\n\troutes:  {},\n\tregister: function(url, defaults) {\n\t\t// If the root ends with a forward slash (`/`)\n\t\t// and url starts with a forward slash (`/`), remove the leading\n\t\t// forward slash (`/`) of the url.\n\t\tvar root = bindingProxy_1.call(\"root\");\n\n\t\tif ( root.lastIndexOf(\"/\") === root.length - 1 && url.indexOf(\"/\") === 0 ) {\n\t\t\turl = url.substr(1);\n\t\t}\n\n\t\t// `matcher` will be a regex\n\t\t// fall back to legacy `:foo` RegExp if necessary\n\t\tvar matcher;\n\t\tif (regexps.colon.test(url)) {\n\t\t\t//!steal-remove-start\n\t\t\tif (process.env.NODE_ENV !== \"production\") {\n\t\t\t\tdev.warn(\"update route \\\"\" + url + \"\\\" to \\\"\" + url.replace(regexps.colon, function(name, key) {\n\t\t\t\t\treturn \"{\" + key + \"}\";\n\t\t\t\t}) + \"\\\"\");\n\t\t\t}\n\t\t\t//!steal-remove-end\n\n\t\t\tmatcher = regexps.colon;\n\t\t} else {\n\t\t\tmatcher = regexps.curlies;\n\t\t}\n\n\t\tdefaults = defaults || {};\n\n\t\t// Extract the variable names and replace with `RegExp` that will match\n\t\t// an actual URL with values.\n\t\tvar lastIndex = matcher.lastIndex = 0,\n\t\t\tnames = [],\n\t\t\tres,\n\t\t\ttest = \"\",\n\t\t\tnext,\n\t\t\tquerySeparator = bindingProxy_1.call(\"querySeparator\"),\n\t\t\tmatchSlashes = bindingProxy_1.call(\"matchSlashes\");\n\n\t\t// res will be something like [\"{foo}\",\"foo\"]\n\t\twhile (res = matcher.exec(url)) {\n\t\t\tnames.push(res[1]);\n\t\t\ttest += removeBackslash(url.substring(lastIndex, matcher.lastIndex - res[0].length));\n\t\t\t// If matchSlashes is false (the default) don't greedily match any slash in the string, assume its part of the URL\n\t\t\tnext = \"\\\\\" + (removeBackslash(url.substr(matcher.lastIndex, 1)) || querySeparator+(matchSlashes? \"\": \"|/\"));\n\t\t\t// A name without a default value HAS to have a value.\n\t\t\t// A name that has a default value can be empty.\n\t\t\t// The `\\\\` is for string-escaping giving single `\\` for `RegExp` escaping.\n\t\t\ttest += \"([^\" + next + \"]\" + (defaults[res[1]] ? \"*\" : \"+\") + \")\";\n\t\t\tlastIndex = matcher.lastIndex;\n\t\t}\n\t\ttest += removeBackslash(url.substr(lastIndex));\n\n\t\t//!steal-remove-start\n\t\tif (process.env.NODE_ENV !== \"production\") {\n\t\t\t// warn if new route uses same map properties as an existing route\n\t\t\tcanReflect_1_19_2_canReflect.eachKey(RouteRegistry.routes, function(r) {\n\t\t\t\tvar existingKeys = r.names.concat(Object.keys(r.defaults)).sort(),\n\t\t\t\t\tkeys = names.concat(Object.keys(defaults)).sort(),\n\t\t\t\t\tsameMapKeys = !list(existingKeys, keys).length,\n\t\t\t\t\tsameDefaultValues = !map$2(r.defaults, defaults).length,\n\t\t\t\t\t//the regex removes the trailing slash\n\t\t\t\t\tmatchingRoutesWithoutTrailingSlash = r.route.replace(/\\/$/, \"\") === url.replace(/\\/$/, \"\");\n\n\t\t\t\tif (sameMapKeys && sameDefaultValues && !matchingRoutesWithoutTrailingSlash) {\n\t\t\t\t\tdev.warn(\"two routes were registered with matching keys:\\n\" +\n\t\t\t\t\t\t\"\\t(1) route.register(\\\"\" + r.route + \"\\\", \" + JSON.stringify(r.defaults) + \")\\n\" +\n\t\t\t\t\t\t\"\\t(2) route.register(\\\"\" + url + \"\\\", \" + JSON.stringify(defaults) + \")\\n\" +\n\t\t\t\t\t\t\"(1) will always be chosen since it was registered first\");\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\t//!steal-remove-end\n\n\t\t// Add route in a form that can be easily figured out.\n\t\treturn RouteRegistry.routes[url] = {\n\t\t\t// A regular expression that will match the route when variable values\n\t\t\t// are present; i.e. for (`{page}/{type}`) the `RegExp` is `/([\\w\\.]*)/([\\w\\.]*)/` which\n\t\t\t// will match for any value of `{page}` and `{type}` (word chars or period).\n\t\t\ttest: new RegExp(\"^\" + test + \"($|\" + wrapQuote(querySeparator) + \")\"),\n\t\t\t// The original URL, same as the index for this entry in routes.\n\t\t\troute: url,\n\t\t\t// An `array` of all the variable names in this route.\n\t\t\tnames: names,\n\t\t\t// Default values provided for the variables.\n\t\t\tdefaults: defaults,\n\t\t\t// The number of parts in the URL separated by `/`.\n\t\t\tlength: url.split(\"/\").length\n\t\t};\n\t}\n};\n\nvar register = RouteRegistry;\n\nvar digitTest = /^\\d+$/,\n\tkeyBreaker = /([^\\[\\]]+)|(\\[\\])/g,\n\tparamTest = /([^?#]*)(#.*)?$/,\n\tentityRegex = /%([^0-9a-f][0-9a-f]|[0-9a-f][^0-9a-f]|[^0-9a-f][^0-9a-f])/i,\n\tstartChars = {\"#\": true,\"?\": true},\n\tprep = function (str) {\n\t\tif (startChars[str.charAt(0)] === true) {\n\t\t\tstr = str.substr(1);\n\t\t}\n\t\tstr = str.replace(/\\+/g, ' ');\n\n\t\ttry {\n\t\t\treturn decodeURIComponent(str);\n\t\t}\n\t\tcatch (e) {\n\t\t\treturn decodeURIComponent(str.replace(entityRegex, function(match, hex) {\n\t\t\t\treturn '%25' + hex;\n\t\t\t}));\n\t\t}\n\t};\n\nfunction isArrayLikeName(name) {\n\treturn digitTest.test(name) || name === '[]';\n}\n\n\nfunction idenity(value){ return value; }\n\nvar canDeparam_1_2_3_canDeparam = canNamespace_1_0_0_canNamespace.deparam = function (params, valueDeserializer) {\n\tvalueDeserializer = valueDeserializer || idenity;\n\tvar data = {}, pairs, lastPart;\n\tif (params && paramTest.test(params)) {\n\t\tpairs = params.split('&');\n\t\tpairs.forEach(function (pair) {\n\t\t\tvar parts = pair.split('='),\n\t\t\t\tkey = prep(parts.shift()),\n\t\t\t\tvalue = prep(parts.join('=')),\n\t\t\t\tcurrent = data;\n\t\t\tif (key) {\n\t\t\t\tparts = key.match(keyBreaker);\n\t\t\t\tfor (var j = 0, l = parts.length - 1; j < l; j++) {\n\t\t\t\t\tvar currentName = parts[j],\n\t\t\t\t\t\tnextName = parts[j + 1],\n\t\t\t\t\t\tcurrentIsArray = isArrayLikeName(currentName) && current instanceof Array;\n\t\t\t\t\tif (!current[currentName]) {\n\t\t\t\t\t\tif(currentIsArray) {\n\t\t\t\t\t\t\tcurrent.push( isArrayLikeName(nextName) ? [] : {} );\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// If what we are pointing to looks like an `array`\n\t\t\t\t\t\t\tcurrent[currentName] = isArrayLikeName(nextName) ? [] : {};\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\t\t\t\t\tif(currentIsArray) {\n\t\t\t\t\t\tcurrent = current[current.length - 1];\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcurrent = current[currentName];\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t\tlastPart = parts.pop();\n\t\t\t\tif ( isArrayLikeName(lastPart) ) {\n\t\t\t\t\tcurrent.push(valueDeserializer(value));\n\t\t\t\t} else {\n\t\t\t\t\tcurrent[lastPart] = valueDeserializer(value);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\treturn data;\n};\n\n// ## Helper Functions\n\n// ### decode\n// Restore escaped HTML from its URI value.\n// It isn't compatable with named character references (`&copy;`, etc).\nfunction decode(str) {\n\ttry {\n\t\treturn decodeURIComponent(str);\n\t} catch(ex) {\n\t\treturn unescape(str);\n\t}\n}\n\n// ### toURLFragment\n// If the `root` ends with `/` and the url starts with it, remove `/`.\n// TODO: I'm not totally sure this belongs here. This might be shifted to can-route-pushstate.\nfunction toURLFragment(url) {\n\tvar root = bindingProxy_1.call(\"root\");\n\tif (root.lastIndexOf(\"/\") === root.length - 1 && url.indexOf(\"/\") === 0) {\n\t\turl = url.substr(1);\n\t}\n\treturn url;\n}\n\n// ### canRoute_getRule\nfunction canRoute_getRule(url) {\n\turl = toURLFragment(url);\n\t// See if the url matches any routes by testing it against the `route.test` `RegExp`.\n\t// By comparing the URL length the most specialized route that matches is used.\n\tvar route = {\n\t\tlength: -1\n\t};\n\tcanReflect_1_19_2_canReflect.eachKey(register.routes, function(temp, name) {\n\t\tif (temp.test.test(url) && temp.length > route.length) {\n\t\t\troute = temp;\n\t\t}\n\t});\n\t// If a route was matched.\n\tif (route.length > -1) {\n\t\treturn route;\n\t}\n}\n\nfunction canRoute_deparam(url) {\n\n\tvar route = canRoute_getRule(url),\n\t\tquerySeparator = bindingProxy_1.call(\"querySeparator\"),\n\t\tparamsMatcher = bindingProxy_1.call(\"paramsMatcher\");\n\n\turl = toURLFragment(url);\n\n\t// If a route was matched.\n\tif (route) {\n\t\t// Since `RegExp` backreferences are used in `route.test` (parens)\n\t\t// the parts will contain the full matched string and each variable (back-referenced) value.\n\t\tvar parts = url.match(route.test),\n\t\t\t// Start will contain the full matched string; parts contain the variable values.\n\t\t\tstart = parts.shift(),\n\t\t\t// The remainder will be the `&amp;key=value` list at the end of the URL.\n\t\t\tremainder = url.substr(start.length - (parts[parts.length - 1] === querySeparator ? 1 : 0)),\n\t\t\t// If there is a remainder and it contains a `&amp;key=value` list deparam it.\n\t\t\tobj = (remainder && paramsMatcher.test(remainder)) ? canDeparam_1_2_3_canDeparam(remainder.slice(1)) : {};\n\n\t\t// Add the default values for this route.\n\t\tobj = canReflect_1_19_2_canReflect.assignDeep(canReflect_1_19_2_canReflect.assignDeep({}, route.defaults), obj);\n\t\t// Overwrite each of the default values in `obj` with those in\n\t\t// parts if that part is not empty.\n\t\tparts.forEach(function (part, i) {\n\t\t\tif (part && part !== querySeparator) {\n\t\t\t\tobj[route.names[i]] = decode(part);\n\t\t\t}\n\t\t});\n\t\treturn obj;\n\t}\n\t// If no route was matched, it is parsed as a `&amp;key=value` list.\n\tif (url.charAt(0) !== querySeparator) {\n\t\turl = querySeparator + url;\n\t}\n\treturn paramsMatcher.test(url) ? canDeparam_1_2_3_canDeparam(url.slice(1)) : {};\n}\n\ncanRoute_deparam.getRule = canRoute_getRule;\n\nvar deparam_1 = canRoute_deparam;\n\nvar canParam_1_2_0_canParam = createCommonjsModule(function (module) {\n\n\nvar standardsMode = false;\n\nfunction buildParam(prefix, obj, add) {\n\tif (Array.isArray(obj)) {\n\t\tfor (var i = 0, l = obj.length; i < l; ++i) {\n\t\t\tvar inner = obj[i];\n\t\t\tvar shouldIncludeIndex = typeof inner === 'object';\n\t\t\tvar arrayIndex = shouldIncludeIndex ? '[' + i + ']' : '[]';\n\t\t\tbuildParam(prefix + arrayIndex, inner, add);\n\t\t}\n\t} else if ( obj && typeof obj === \"object\" ) {\n\t\tfor (var name in obj) {\n\t\t\tbuildParam(prefix + '[' + name + ']', obj[name], add);\n\t\t}\n\t} else {\n\t\tadd(prefix, obj);\n\t}\n}\n\nif ( canNamespace_1_0_0_canNamespace.param ) {\n\tthrow new Error( \"You can't have two versions of can-param, check your dependencies\" );\n} else {\n\tmodule.exports = canNamespace_1_0_0_canNamespace.param = function param(object) {\n\t\tvar pairs = [],\n\t\t\tadd = function (key, value) {\n\t\t\t\tvalue = standardsMode && value == null ? '' : value;\n\t\t\t\tpairs.push(encodeURIComponent(key) + '=' + encodeURIComponent(value));\n\t\t\t};\n\t\tfor (var name in object) {\n\t\t\tif (!standardsMode || typeof object[name] !== 'undefined') {\n\t\t\t\tbuildParam(name, object[name], add);\n\t\t\t}\n\t\t}\n\t\treturn pairs.join('&')\n\t\t\t.replace(/%20/g, '+');\n\t};\n\n\t/**\n\t * @function can-param.setStandardsMode setStandardsMode\n\t * @parent can-param.methods\n\t * @description Set whether to treat null and undefined specially when serializing\n\t * \n\t * @signature `param.setStandardsMode(boolean)`\n\t *\n\t * Set whether to serialize values in a manner more consistent with jQuery[1] and URLSearchParams[2], or to use the classic\n\t * can-param value serialization.  By default this value is false (classic mode).\n\t *\n\t * The differences between the two are:\n\t * - `null` serializes to an empty string in standards mode, \"null\" in classic mode\n\t * - `undefined` is removed from the serialized form entirely in standards mode, serialized to \"undefined\" in classic mode\n\t *\n\t * All other values are treated the same in both modes.\n\t *\n\t * @param  {boolean} value `true` to use DOM/jQuery style param serialization, `false` to use classic can-param serializtion\n\t *\n\t * @body\n\t * <hr>\n\t * [1] [https://api.jquery.com/jquery.param/]\n   * \n\t * [2] [https://developer.mozilla.org/en-US/docs/Web/API/URLSearchParams]\n\t */\n\tcanNamespace_1_0_0_canNamespace.param.setStandardsMode = function (value) {\n\t\tstandardsMode = !!value;\n\t};\n}\n});\n\n// ## matchesData\n// Checks if a route matches the data provided. If any route variable\n// is not present in the data, the route does not match. If all route\n// variables are present in the data, the number of matches is returned\n// to allow discerning between general and more specific routes.\nfunction matchesData(route, data) {\n\tvar count = 0,\n\t\tdefaults = {};\n\n\t// Look at default route values, if they match increment count\n\tfor (var name in route.defaults) {\n\t\tif (route.defaults[name] === data[name]) {\n\t\t\tdefaults[name] = 1;\n\t\t\tcount++;\n\t\t}\n\t}\n\n\tfor (var i = 0; i < route.names.length; i++) {\n\t\t// If a route name isn't present in data, the route doesn't match.\n\t\tif (!data.hasOwnProperty(route.names[i])) {\n\t\t\treturn -1;\n\t\t}\n\t\tif (!defaults[route.names[i]]) {\n\t\t\tcount++;\n\t\t}\n\t}\n\n\treturn count;\n}\n\n// ## getMatchedRoute\n\nfunction getMatchedRoute(data, routeName) {\n\t// Check if the provided data keys match the names in any routes;\n\t// Get the one with the most matches.\n\tvar route,\n\t\t// Need to have at least 1 match.\n\t\tmatches = 0,\n\t\tmatchCount,\n\t\tpropCount = 0;\n\n\tdelete data.route;\n\n\tcanReflect_1_19_2_canReflect.eachKey(data, function () {\n\t\tpropCount++;\n\t});\n\t// Otherwise find route.\n\tcanReflect_1_19_2_canReflect.eachKey(register.routes, function (temp, name) {\n\t\t// best route is the first with all defaults matching\n\n\t\tmatchCount = matchesData(temp, data);\n\t\tif (matchCount > matches) {\n\t\t\troute = temp;\n\t\t\tmatches = matchCount;\n\t\t}\n\t\tif (matchCount >= propCount) {\n\t\t\treturn false;\n\t\t}\n\t});\n\t// If we have a route name in our `register` data, and it's\n\t// just as good as what currently matches, use that\n\tif (register.routes[routeName] && matchesData(register.routes[routeName], data) === matches) {\n\t\troute = register.routes[routeName];\n\t}\n\t// If this is match...\n\treturn route;\n}\nfunction paramFromRoute(route, data) {\n\tvar cpy,\n\t\tres,\n\t\tafter,\n\t\tmatcher;\n\tif (route) {\n\n\t\tcpy = canReflect_1_19_2_canReflect.assignMap({}, data);\n\t\t// fall back to legacy :foo RegExp if necessary\n\t\tmatcher = regexps.colon.test(route.route) ? regexps.colon : regexps.curlies;\n\t\t// Create the url by replacing the var names with the provided data.\n\t\t// If the default value is found an empty string is inserted.\n\t\tres = route.route.replace(matcher, function (whole, name) {\n\t\t\tdelete cpy[name];\n\t\t\treturn data[name] === route.defaults[name] ? \"\" : encodeURIComponent(data[name]);\n\t\t})\n\t\t.replace(\"\\\\\", \"\");\n\t\t// Remove matching default values\n\t\tcanReflect_1_19_2_canReflect.eachKey(route.defaults, function (val, name) {\n\t\t\tif (cpy[name] === val) {\n\t\t\t\tdelete cpy[name];\n\t\t\t}\n\t\t});\n\t\t// The remaining elements of data are added as\n\t\t// `&amp;` separated parameters to the url.\n\t\tafter = canParam_1_2_0_canParam(cpy);\n\t\t// if we are paraming for setting the hash\n\t\t// we also want to make sure the route value is updated\n\t\t//if (_setRoute) {\n\t\t//    register.matched(route.route);\n\t\t//}\n\t\treturn res + (after ? bindingProxy_1.call(\"querySeparator\") + after : \"\");\n\t}\n\t// If no route was found, there is no hash URL, only paramters.\n\treturn canReflect_1_19_2_canReflect.size(data) === 0 ? \"\" :bindingProxy_1.call(\"querySeparator\") + canParam_1_2_0_canParam(data);\n}\n\nfunction canRoute_param(data, currentRouteName) {\n \treturn paramFromRoute(getMatchedRoute(data, currentRouteName), data);\n}\nvar param_1 = canRoute_param;\ncanRoute_param.paramFromRoute = paramFromRoute;\ncanRoute_param.getMatchedRoute = getMatchedRoute;\n\n// ### formatAttributes\n// Creates HTML-like attributes from an object.\n// It escapes hyperlink references.\nfunction formatAttributes(props) {\n\tvar tags = [];\n\tcanReflect_1_19_2_canReflect.eachKey(props, function(value, name) {\n\t\t// Converts `\"className\"` to `\"class\"`.\n\t\tvar attributeName = name === \"className\" ? \"class\" : name,\n\n\t\t\t// Escapes `value` if `name` is `\"href\"`.\n\t\t\tattributeValue = name === \"href\" ? value : canString_1_1_0_canString.esc(value);\n\n\t\ttags.push(attributeName + \"=\\\"\" + attributeValue + \"\\\"\");\n\t});\n\treturn tags.join(\" \");\n}\n\n// ### matchCheck\n// It recursively compares property values in `matcher` to those in `source`.\n// It returns `false` if there's a property in `source` that's not in `matcher`,\n// or if the two values aren't loosely equal.\nfunction matchCheck(source, matcher) {\n\t/*jshint eqeqeq:false*/\n\tfor(var property in source) {\n\t\tvar sourceProperty = source[property],\n\t\t\tmatcherProperty = matcher[property];\n\n\t\tif (sourceProperty && matcherProperty &&\n\t\t\ttypeof sourceProperty === \"object\" && typeof matcher === \"object\"\n\t\t) {\n\t\t\treturn matchCheck(sourceProperty, matcherProperty);\n\t\t}\n\n\t\tif (sourceProperty != matcherProperty) {\n\t\t\treturn false;\n\t\t}\n\t}\n\treturn true;\n}\n\n// ### canRoute_url\nfunction canRoute_url(options, merge) {\n\tif (merge) {\n\t\tvar baseOptions = deparam_1( bindingProxy_1.call(\"can.getValue\") );\n\t\toptions = canReflect_1_19_2_canReflect.assignMap(canReflect_1_19_2_canReflect.assignMap({}, baseOptions), options);\n\t}\n\treturn bindingProxy_1.call(\"root\") + param_1(options);\n}\n\nvar urlHelpers = {\n\turl: canRoute_url,\n\n\tlink: function canRoute_link(name, options, props, merge) {\n\t\treturn \"<a \" + formatAttributes(\n\t\t\tcanReflect_1_19_2_canReflect.assignMap({\n\t\t\t\thref: canRoute_url(options, merge)\n\t\t\t}, props)) + \">\" + name + \"</a>\";\n\t},\n\n\tisCurrent: function canRoute_isCurrent(options, subsetMatch) {\n\t\tvar getValueSymbol = bindingProxy_1.call(\"can.getValue\");\n\n\t\tif (subsetMatch) {\n\t\t\t// Everything in `options` shouhld be in `baseOptions`.\n\t\t\tvar baseOptions = deparam_1( getValueSymbol );\n\t\t\treturn matchCheck(options, baseOptions);\n\t\t} else {\n\t\t\treturn getValueSymbol === param_1(options);\n\t\t}\n\t}\n};\n\n// Regular expression for identifying &amp;key=value lists.\nvar paramsMatcher = /^(?:&[^=]+=[^&]*)+/;\n\n\n\n\n\n\n\n\n\n\n\nfunction getHash(){\n    var loc = location_1();\n    return loc.href.split(/#!?/)[1] || \"\";\n}\n\nfunction HashchangeObservable() {\n    var dispatchHandlers =  this.dispatchHandlers.bind(this);\n    var self = this;\n\t\tthis._value = \"\";\n    this.handlers = new canKeyTree_1_2_2_canKeyTree([Object,Array],{\n        onFirst: function(){\n            self._value = getHash();\n            canDomEvents_1_3_13_canDomEvents.addEventListener(window, 'hashchange', dispatchHandlers);\n        },\n        onEmpty: function(){\n            canDomEvents_1_3_13_canDomEvents.removeEventListener(window, 'hashchange', dispatchHandlers);\n        }\n    });\n}\nHashchangeObservable.prototype = Object.create(canSimpleObservable_2_5_0_canSimpleObservable.prototype);\nHashchangeObservable.constructor = HashchangeObservable;\ncanReflect_1_19_2_canReflect.assign(HashchangeObservable.prototype,{\n    // STUFF NEEDED FOR can-route integration\n    paramsMatcher: paramsMatcher,\n    querySeparator: \"&\",\n    // don't greedily match slashes in routing rules\n    matchSlashes: false,\n    root: \"#!\",\n    dispatchHandlers: function() {\n        var old = this._value;\n        this._value = getHash();\n        if(old !== this._value) {\n            canQueues_1_3_2_canQueues.enqueueByQueue(this.handlers.getNode([]), this, [this._value, old]\n                //!steal-remove-start\n                /* jshint laxcomma: true */\n                , null\n                , [ canReflect_1_19_2_canReflect.getName(this), \"changed to\", this._value, \"from\", old ]\n                /* jshint laxcomma: false */\n                //!steal-remove-end\n            );\n        }\n    },\n    get: function(){\n        canObservationRecorder_1_3_1_canObservationRecorder.add(this);\n        return getHash();\n    },\n    set: function(path){\n        var loc = location_1();\n        if(!path && !loc.hash) {\n\n        } else if(loc.hash !== \"#\" + path) {\n            loc.hash = \"!\" + path;\n        }\n        return path;\n    }\n});\n\nObject.defineProperty(HashchangeObservable.prototype, \"value\", {\n\tget: function(){\n\t\treturn canReflect_1_19_2_canReflect.getValue(this);\n\t},\n\tset: function(value){\n\t\tcanReflect_1_19_2_canReflect.setValue(this, value);\n\t}\n});\n\ncanReflect_1_19_2_canReflect.assignSymbols(HashchangeObservable.prototype,{\n\t\"can.getValue\": HashchangeObservable.prototype.get,\n\t\"can.setValue\": HashchangeObservable.prototype.set,\n\t\"can.onValue\": HashchangeObservable.prototype.on,\n\t\"can.offValue\": HashchangeObservable.prototype.off,\n\t\"can.isMapLike\": false,\n\t\"can.valueHasDependencies\": function(){\n\t\treturn true;\n\t},\n\t//!steal-remove-start\n\t\"can.getName\": function() {\n\t\treturn \"HashchangeObservable<\" + this._value + \">\";\n\t},\n\t//!steal-remove-end\n});\n\nvar canRouteHash_1_0_2_canRouteHash = HashchangeObservable;\n\n/* globals WorkerGlobalScope */\n// A bit of weirdness to avoid complaining linters\nvar funcConstructor = Function;\n\n\n/**\n * @module {function} can-globals/is-browser-window/is-web-worker is-web-worker\n * @parent can-globals/modules\n * @signature `isWebWorker()`\n *\n * Returns `true` if the code is running within a [web worker](https://developer.mozilla.org/en-US/docs/Web/API/Worker).\n *\n * ```js\n * var isWebWorker = require(\"can-globals/is-web-worker/is-web-worker\");\n * var GLOBAL = require(\"can-globals/global/global\");\n *\n * if(isWebWorker()) {\n *   ...\n * }\n * ```\n *\n * @return {Boolean} True if the environment is a web worker.\n */\n\ncanGlobals_1_2_2_canGlobalsInstance.define('isWebWorker', function(){\n    var global = funcConstructor('return this')();\n    return typeof WorkerGlobalScope !== \"undefined\" &&\n        (global instanceof WorkerGlobalScope);\n});\n\nvar isWebWorker = canGlobals_1_2_2_canGlobalsInstance.makeExport('isWebWorker');\n\nvar stringCoercingMapDecorator$1 = stringCoercion.stringCoercingMapDecorator;\n\n\n\n\n\n\n\n\n\n\n\n// ## hashchangeObservable\n// `hashchangeObservable` is an instance of `Hashchange`, instances of\n// `Hashchange` are two-way bound to `window.location.hash` once the\n// instances have a listener.\nvar hashchangeObservable = new canRouteHash_1_0_2_canRouteHash();\nbindingProxy_1.bindings.hashchange = hashchangeObservable;\nbindingProxy_1.defaultBinding = \"hashchange\";\nbindingProxy_1.urlDataObservable.value = hashchangeObservable;\n\n\n// ## canRoute\nfunction canRoute(url, defaults) {\n\t//!steal-remove-start\n\tif (typeof process !== \"undefined\" && process.env.NODE_ENV !== \"production\") {\n\t\tdev.warn(\"Call route.register(url,defaults) instead of calling route(url, defaults)\");\n\t}\n\t//!steal-remove-end\n\tregister.register(url, defaults);\n\treturn canRoute;\n}\n\n\n// ## Helper Functions\n// A ~~throttled~~ debounced function called multiple times will only fire once the\n// timer runs down. Each call resets the timer.\nvar timer;\n// A dummy events object used to dispatch url change events on.\nvar currentRuleObservable = new canObservation_4_2_0_canObservation(function canRoute_matchedRoute() {\n\tvar url = bindingProxy_1.call(\"can.getValue\");\n\treturn canRoute.rule(url);\n});\n\n// ### updateUrl\n// If the `route.data` changes, update the hash.\n// Using `.serialize()` retrieves the raw data contained in the `observable`.\n// This function is ~~throttled~~ debounced so it only updates once even if multiple values changed.\n// This might be able to use batchNum and avoid this.\nfunction updateUrl(serializedData) {\n\t// collect attributes that are changing\n\tclearTimeout(timer);\n\ttimer = setTimeout(function () {\n\t\t// indicate that the hash is set to look like the data\n\t\tvar serialized = canReflect_1_19_2_canReflect.serialize( canRoute.data ),\n\t\t\tcurrentRouteName = currentRuleObservable.get(),\n\t\t\troute = param_1.getMatchedRoute(serialized, currentRouteName),\n\t\t\tpath = param_1.paramFromRoute(route, serialized);\n\n\t\tbindingProxy_1.call(\"can.setValue\", path);\n\t\tvar onStartComplete = canRoute._onStartComplete;\n\t\tif (onStartComplete) {\n\t\t\tcanRoute._onStartComplete = undefined;\n\t\t\tonStartComplete();\n\t\t}\n\t}, 10);\n}\n\n// ### updateRouteData\n// Deparameterizes the portion of the hash of interest and assign the\n// values to the `route.data` removing existing values no longer in the hash.\n// updateRouteData is called typically by hashchange which fires asynchronously\n// So it’s possible that someone started changing the data before the\n// hashchange event fired.  For this reason, it will not set the route data\n// if the data is changing or the hash already matches the hash that was set.\nfunction updateRouteData() {\n\tvar hash = bindingProxy_1.call(\"can.getValue\");\n\t// if the hash data is currently changing, or\n\t// the hash is what we set it to anyway, do NOT change the hash\n\n\tcanQueues_1_3_2_canQueues.batch.start();\n\n\tvar state = canRoute.deparam(hash);\n\tdelete state.route;\n\tcanReflect_1_19_2_canReflect.update(canRoute.data,state);\n\tcanQueues_1_3_2_canQueues.batch.stop();\n\n}\n\n\n/**\n * @static\n */\nObject.defineProperty(canRoute, \"routes\", {\n\t/**\n\t * @property {Object} routes\n\t * @hide\n\t *\n\t * A list of routes recognized by the router indixed by the url used to add it.\n\t * Each route is an object with these members:\n\t *\n\t *  - test - A regular expression that will match the route when variable values\n\t *    are present; i.e. for {page}/{type} the `RegExp` is /([\\w\\.]*)/([\\w\\.]*)/ which\n\t *    will match for any value of {page} and {type} (word chars or period).\n\t *\n\t *  - route - The original URL, same as the index for this entry in routes.\n\t *\n\t *  - names - An array of all the variable names in this route\n\t *\n\t *  - defaults - Default values provided for the variables or an empty object.\n\t *\n\t *  - length - The number of parts in the URL separated by '/'.\n\t */\n \tget: function() {\n \t\treturn register.routes;\n \t},\n\tset: function(newVal) {\n\t\treturn register.routes = newVal;\n\t}\n});\n\n// ## canRoute.defaultBinding\nObject.defineProperty(canRoute, \"defaultBinding\", {\n \tget: function() {\n\t\treturn bindingProxy_1.defaultBinding;\n\t},\n\tset: function(newVal) {\n\t\tbindingProxy_1.defaultBinding = newVal;\n\t\tvar observable = bindingProxy_1.bindings[bindingProxy_1.defaultBinding];\n\t\tif (observable) {\n\t\t\tbindingProxy_1.urlDataObservable.value = observable;\n\t\t}\n\t}\n});\n\n// ## canRoute.urlData\nObject.defineProperty(canRoute, \"urlData\", {\n \tget: function() {\n\t\treturn bindingProxy_1.urlDataObservable.value;\n\t},\n\tset: function(newVal) {\n\t\tcanRoute._teardown();\n\t\tbindingProxy_1.urlDataObservable.value = newVal;\n\t}\n});\n\ncanReflect_1_19_2_canReflect.assignMap(canRoute, {\n\t// ## canRoute.param\n\tparam: param_1,\n\t// ## canRoute.deparam\n\tdeparam: deparam_1,\n\t// ## canRoute.map\n\tmap: function(data) {\n\t\t//!steal-remove-start\n\t\tif (typeof process !== \"undefined\" && process.env.NODE_ENV !== \"production\") {\n\t\t\tdev.warn(\"Set route.data directly instead of calling route.map\");\n\t\t}\n\t\t//!steal-remove-end\n\t\tcanRoute.data = data;\n\t},\n\n\t// ## canRoute.start\n\tstart: function (val) {\n\t\tif (canRoute.data instanceof routedata) {\n\t\t\tvar routeData = canRoute.data;\n\t\t\tvar definePropertyWithDefault = function(defaults, name) {\n\t\t\t\tvar defaultValue = defaults[name];\n\t\t\t\tvar propertyType = defaultValue != null ? canType_1_1_6_canType.maybeConvert(defaultValue.constructor) : canType_1_1_6_canType.maybeConvert(String);\n\t\t\t\tcanReflect_1_19_2_canReflect.defineInstanceKey(routeData.constructor, name, {\n\t\t\t\t\ttype: propertyType\n\t\t\t\t});\n\t\t\t};\n\n\t\t\tcanReflect_1_19_2_canReflect.eachKey(canRoute.routes, function(route) {\n\t\t\t\tcanReflect_1_19_2_canReflect.eachIndex(route.names, function (name) {\n\t\t\t\t\tdefinePropertyWithDefault(route.defaults, name);\n\t\t\t\t});\n\n\t\t\t\tcanReflect_1_19_2_canReflect.eachKey(route.defaults, function(value, key) {\n\t\t\t\t\tdefinePropertyWithDefault(route.defaults, key);\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\t\tif (val !== true) {\n\t\t\tcanRoute._setup();\n\t\t\tif (isBrowserWindow() || isWebWorker()) {\n\t\t\t\t// We can't use updateRouteData because we want to merge the route data\n\t\t\t\t// into .data\n\t\t\t\tvar hash = bindingProxy_1.call(\"can.getValue\");\n\t\t\t\tcanQueues_1_3_2_canQueues.batch.start();\n\t\t\t\t// get teh data\n\t\t\t\tvar state = canRoute.deparam(hash);\n\t\t\t\tdelete state.route;\n\n\t\t\t\tcanReflect_1_19_2_canReflect.assign(canRoute.data,state);\n\t\t\t\tcanQueues_1_3_2_canQueues.batch.stop();\n\t\t\t\tupdateUrl();\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn canRoute;\n\t},\n\t// ## canRoute.url\n\turl: urlHelpers.url,\n\tlink: urlHelpers.link,\n\tisCurrent: urlHelpers.isCurrent,\n\tbindings: bindingProxy_1.bindings,\n\n\t// ready calls setup\n\t// setup binds and listens to data changes\n\t// bind listens to whatever you should be listening to\n\t// data changes tries to set the path\n\n\t// we need to be able to\n\t// easily kick off calling updateRouteData\n\t// \tteardown whatever is there\n\t//  turn on a particular binding\n\n\t// called when the route is ready\n\t_setup: function () {\n\t\tif (!canRoute._canBinding) {\n\n\t\t\tvar bindingOptions = {\n\n\t\t\t\t// The parent is the hashchange observable\n\t\t\t\tparent: bindingProxy_1.urlDataObservable.value,\n\t\t\t\tsetParent: updateUrl,\n\n\t\t\t\t// The child is route.data\n\t\t\t\tchild: canRoute.serializedObservation,\n\t\t\t\tsetChild: updateRouteData,\n\n\t\t\t\t// On init, we do not want the child set to the parent’s value; this is\n\t\t\t\t// handled by start() for reasons mentioned there.\n\t\t\t\tonInitDoNotUpdateChild: true,\n\n\t\t\t\t// Cycles are allowed because updateUrl is async; if another change\n\t\t\t\t// happens during its setTimeout, then without cycles the change would\n\t\t\t\t// be ignored :( TODO: Can this be removed if updateUrl stops using\n\t\t\t\t// setTimeout in a major version?\n\t\t\t\tcycles: 1,\n\n\t\t\t\t// Listen for changes in the notify queue\n\t\t\t\tqueue: \"notify\"\n\n\t\t\t};\n\n\t\t\t// For debugging: the names that will be assigned to the updateChild and\n\t\t\t// updateParent functions within can-bind\n\t\t\t//!steal-remove-start\n\t\t\tif (typeof process !== \"undefined\" && process.env.NODE_ENV !== \"production\") {\n\t\t\t\tbindingOptions.updateChildName = \"can-route.updateRouteData\";\n\t\t\t\tbindingOptions.updateParentName = \"can-route.updateUrl\";\n\t\t\t}\n\t\t\t//!steal-remove-end\n\n\t\t\t// Create a new binding with can-bind\n\t\t\tcanRoute._canBinding = new canBind_1_5_1_canBind(bindingOptions);\n\n\t\t\t// …and turn it on!\n\t\t\tcanRoute._canBinding.start();\n\n\t\t}\n\t},\n\t_teardown: function () {\n\t\tif (canRoute._canBinding) {\n\t\t\tcanRoute._canBinding.stop();\n\t\t\tcanRoute._canBinding = null;\n\t\t}\n\t\tclearTimeout(timer);\n\t},\n\n\tstop: function() {\n\t\tthis._teardown();\n\t\treturn canRoute;\n\t},\n\n\tcurrentRule: makeCompute( currentRuleObservable ),\n\tregister: register.register,\n\trule: function(url) {\n\t\tvar rule = deparam_1.getRule(url);\n\t\tif (rule) {\n\t\t\treturn rule.route;\n\t\t}\n\t}\n});\n\n// The functions in the following list applied to `canRoute` (e.g. `canRoute.attr('...')`) will\n// instead act on the `canRoute.data` observe.\n\nvar bindToCanRouteData = function (name, args) {\n\tif (!canRoute.data[name]) {\n\t\treturn canRoute.data.addEventListener.apply(canRoute.data, args);\n\t}\n\treturn canRoute.data[name].apply(canRoute.data, args);\n};\n\n[\"addEventListener\",\"removeEventListener\",\"bind\", \"unbind\", \"on\", \"off\"].forEach(function(name) {\n\t// exposing all internal eventQueue evt’s to canRoute\n\tcanRoute[name] = function(eventName, handler) {\n\t\tif (eventName === \"__url\") {\n\t\t\treturn bindingProxy_1.call(\"can.onValue\", handler );\n\t\t}\n\t\treturn bindToCanRouteData(name, arguments);\n\t};\n});\n\n[\"delegate\", \"undelegate\", \"removeAttr\", \"compute\", \"_get\", \"___get\", \"each\"].forEach(function (name) {\n\tcanRoute[name] = function () {\n\t\t// `delegate` and `undelegate` require\n\t\t// the `can/map/delegate` plugin\n\t\treturn bindToCanRouteData(name, arguments);\n\t};\n});\n\n\nvar routeData,\n\tserializedObservation,\n\tserializedCompute;\n\nfunction setRouteData(data) {\n\trouteData = data;\n\treturn routeData;\n}\n\nObject.defineProperty(canRoute, \"serializedObservation\", {\n\tget: function() {\n\t\tif (!serializedObservation) {\n\t\t\tserializedObservation = new canObservation_4_2_0_canObservation(function canRoute_data_serialized() {\n\t\t\t\treturn canReflect_1_19_2_canReflect.serialize( canRoute.data );\n\t\t\t});\n\t\t}\n\t\treturn serializedObservation;\n\t}\n});\nObject.defineProperty(canRoute, \"serializedCompute\", {\n\tget: function() {\n\t\tif (!serializedCompute) {\n\t\t\tserializedCompute = makeCompute(canRoute.serializedObservation);\n\t\t}\n\t\treturn serializedCompute;\n\t}\n});\n\nvar viewModelSymbol$3 = canSymbol_1_7_0_canSymbol.for(\"can.viewModel\");\nObject.defineProperty(canRoute, \"data\", {\n\tget: function() {\n\t\tif (routeData) {\n\t\t\treturn routeData;\n\t\t} else {\n\t\t\treturn setRouteData(new routedata());\n\t\t}\n\t},\n\tset: function(data) {\n\t\tif ( canReflect_1_19_2_canReflect.isConstructorLike(data) ) {\n\t\t\tdata = new data();\n\t\t}\n\t\tif (data && data[viewModelSymbol$3] !== undefined) {\n\t\t\tdata = data[viewModelSymbol$3];\n\t\t}\n\t\t// if it’s a map, we make it always set strings for backwards compat\n\t\tif ( \"attr\" in data ) {\n\t\t\tsetRouteData( stringCoercingMapDecorator$1(data) );\n\t\t} else {\n\t\t\tsetRouteData(data);\n\t\t}\n\t}\n});\n\ncanRoute.attr = function(prop, value) {\n\tconsole.warn(\"can-route: can-route.attr is deprecated. Use methods on can-route.data instead.\");\n\tif (\"attr\" in canRoute.data) {\n\t\treturn canRoute.data.attr.apply(canRoute.data, arguments);\n\t} else {\n\t\tif (arguments.length > 1) {\n\t\t\tcanReflect_1_19_2_canReflect.setKeyValue(canRoute.data, prop, value);\n\t\t\treturn canRoute.data;\n\t\t} else if (typeof prop === \"object\") {\n\t\t\tcanReflect_1_19_2_canReflect.assignDeep(canRoute.data,prop);\n\t\t\treturn canRoute.data;\n\t\t} else if (arguments.length === 1) {\n\t\t\treturn canReflect_1_19_2_canReflect.getKeyValue(canRoute.data, prop);\n\t\t} else {\n\t\t\treturn canReflect_1_19_2_canReflect.unwrap(canRoute.data);\n\t\t}\n\t}\n};\n\n\ncanReflect_1_19_2_canReflect.setKeyValue(canRoute, canSymbol_1_7_0_canSymbol.for(\"can.isFunctionLike\"), false);\n\n// LEGACY\ncanRoute.matched = canRoute.currentRule;\ncanRoute.current = canRoute.isCurrent;\n\nvar canRoute_5_0_2_canRoute = canNamespace_1_0_0_canNamespace.route = canRoute;\n\nvar looksLikeOptions = core$1.looksLikeOptions;\n\nvar calculateArgs = function(){\n\tvar finalParams,\n\t\tfinalMerge,\n\t\toptionsArg;\n\n\tcanReflect_1_19_2_canReflect.eachIndex(arguments, function(arg){\n\t\tif(typeof arg === \"boolean\") {\n\t\t\tfinalMerge = arg;\n\t\t} else if( arg && typeof arg === \"object\"  ) {\n\t\t\tif(!looksLikeOptions(arg) ) {\n\t\t\t\tfinalParams = core$1.resolveHash(arg);\n\t\t\t} else {\n\t\t\t\toptionsArg = arg;\n\t\t\t}\n\t\t}\n\t});\n\n\tif(!finalParams && optionsArg) {\n\t\tfinalParams = core$1.resolveHash(optionsArg.hash);\n\t}\n\treturn {\n\t\tfinalParams: finalParams || {},\n\t\tfinalMerge: finalMerge,\n\t\toptionsArg: optionsArg\n\t};\n};\n\n\n// go through arguments ... if there's a boolean ... if there's a plain object\nvar routeUrl = function(){\n\tvar args = calculateArgs.apply(this, arguments);\n\n\treturn canRoute_5_0_2_canRoute.url(args.finalParams, typeof args.finalMerge === \"boolean\" ? args.finalMerge : undefined);\n};\ncore$1.registerHelper('routeUrl', routeUrl);\n\nvar routeCurrent = function(){\n\n\tvar args = calculateArgs.apply(this, arguments);\n\tvar result = canRoute_5_0_2_canRoute.isCurrent( args.finalParams, typeof args.finalMerge === \"boolean\" ? args.finalMerge : undefined );\n\n\tif( args.optionsArg && !(args.optionsArg instanceof expression_1.Call) ) {\n\t\tif( result ) {\n\t\t\treturn args.optionsArg.fn();\n\t\t} else {\n\t\t\treturn args.optionsArg.inverse();\n\t\t}\n\t} else {\n\t\treturn result;\n\t}\n};\nrouteCurrent.callAsMethod = true;\n\ncore$1.registerHelper('routeCurrent', routeCurrent);\n\nvar canStacheRouteHelpers_2_0_0_canStacheRouteHelpers = {\n\trouteUrl: routeUrl,\n\trouteCurrent: routeCurrent\n};\n\n/**\n * @module {function} can-key/sub/sub\n * @parent can-key\n * @hide\n *\n * Replace templated parts of a string with values.\n *\n * @signature `sub(str, data, remove)`\n *\n * `sub` is used to replace templated parts of a string with values.\n *\n * ```js\n * var sub = require(\"can-key/sub/sub\");\n *\n * sub(\"foo_{bar}\", {bar: \"baz\"}); // -> \"foo_baz\"\n * ```\n *\n * If `null` or `undefined` values are found, `null` is returned:\n *\n * ```js\n * sub(\"foo_{bar}\", {}); // -> null\n * ```\n *\n * If an object value is found, the templated part of the string is replace with `\"\"`\n * and the object is added to an array that is returned.\n *\n * ```js\n * var data = {element: div, selector: \"li\" }\n * var res = sub(\"{element} {selector} click\", data);\n * res //-> [\" li click\", div]\n * ```\n *\n * @param {String} str   a string with {curly brace} delimited property names\n * @param {Object} data  an object from which to read properties\n * @return {String|null|Array} the supplied string with delimited properties replaced with their values\n *                       if all properties exist on the object, null otherwise\n *\n * If `remove` is true, the properties found in delimiters in `str` are removed from `data`.\n *\n *\n */\nvar sub = function sub(str, data, remove) {\n\tvar obs = [];\n\tstr = str || '';\n\tobs.push(str.replace(canKey_1_2_1_utils.strReplacer, function (whole, inside) {\n\t\t// Convert inside to type.\n\t\tvar ob = get_1(data, inside);\n\n\t\tif(remove === true) {\n\t\t\t_delete(data, inside);\n\t\t}\n\n\t\tif (ob === undefined || ob === null) {\n\t\t\tobs = null;\n\t\t\treturn '';\n\t\t}\n\t\t// If a container, push into objs (which will return objects found).\n\t\tif (!canReflect_1_19_2_canReflect.isPrimitive(ob) && obs) {\n\t\t\tobs.push(ob);\n\t\t\treturn '';\n\t\t}\n\t\treturn '' + ob;\n\t}));\n\treturn obs === null ? obs : obs.length <= 1 ? obs[0] : obs;\n};\n\n// # can-query-logic/set.js\n// This file defines the set mechanics of types.\n// It provides ways for types to define how to perform\n// `union`, `difference`, `intersection` operations.\n//\n// It also derives other operators (`isEqual`, `isSubset`, etc) from these\n// core operators.\n//\n// `.memberOf` is a property that defines if a value is within the set. It's\n// currently a different thing.\n\n\n\n\n\n// This is what we are defining\nvar set$2;\n\n// ## HELPERS =========\n//\n// Used to make sure an object serializes to itself.\n// This makes sure the empty object won't try to clone itself.\nvar addSerializeToThis = function(obj) {\n\treturn canReflect_1_19_2_canReflect.assignSymbols(obj, {\n\t\t\"can.serialize\": function() {\n\t\t\treturn this;\n\t\t}\n\t});\n};\n\n// Reverses the arguments of a function.\nfunction reverseArgs(fn) {\n\treturn function(first, second) {\n\t\treturn fn.call(this, second, first);\n\t};\n}\n\n// This symbol is put on constructor functions to track the comparator operators\n// available to that type.\nvar setComparisonsSymbol = canSymbol_1_7_0_canSymbol.for(\"can.setComparisons\");\n\n// Adds comparators to a type. They are stored like:\n// Type[@can.setComparisons] = Map({\n//    [type1]: Map({[type2]: {union, different, intersection}})\n// })\n//\n// Why do we need the outer object?\nfunction addComparators(type1, type2, comparators) {\n\tvar comparisons = type1[setComparisonsSymbol];\n\tif (!type1[setComparisonsSymbol]) {\n\t\tcomparisons = type1[setComparisonsSymbol] = new Map();\n\t}\n\tvar subMap = comparisons.get(type1);\n\n\tif (!subMap) {\n\t\tsubMap = new Map();\n\t\tcomparisons.set(type1, subMap);\n\t}\n\tvar existingComparators = subMap.get(type2);\n\tif (existingComparators) {\n\t\tfor (var prop in comparators) {\n\t\t\tif (existingComparators.hasOwnProperty(prop)) {\n\t\t\t\tconsole.warn(\"Overwriting \" + type1.name + \" \" + prop + \" \" + type2.name + \" comparitor\");\n\t\t\t}\n\t\t\texistingComparators[prop] = comparators[prop];\n\t\t}\n\t} else {\n\t\tsubMap.set(type2, comparators);\n\t}\n}\n\n\n// This type is used for primitives in JS, but it can be used for\n// any value that should only === itself.\nfunction Identity() {}\n\nvar typeMap = {\n\t\"number\": Identity,\n\t\"string\": Identity,\n\t\"undefined\": Identity,\n\t\"boolean\": Identity\n};\n\n// `get.intersection`, etc is used to look within the types\n// maps and get the right comparator operators.\nvar get$1 = {};\n/*\nvar algebraSymbol = {\n    \"intersection\": \"∩\",\n    \"union\": \"∪\",\n    \"difference\": \"\\\\\"\n};\n*/\n\n[\"intersection\", \"difference\", \"union\"].forEach(function(prop) {\n\tget$1[prop] = function(forwardComparators, value1, value2) {\n\n\t\tif (value2 === set$2.UNIVERSAL) {\n\t\t\tif (prop === \"intersection\") {\n\t\t\t\treturn value1;\n\t\t\t}\n\t\t\tif (prop === \"union\") {\n\t\t\t\treturn set$2.UNIVERSAL;\n\t\t\t}\n\t\t\tif (prop === \"difference\") {\n\t\t\t\treturn set$2.EMPTY;\n\t\t\t}\n\t\t}\n\t\tif (value1 === set$2.UNIVERSAL) {\n\t\t\tif (prop === \"intersection\") {\n\t\t\t\treturn value1;\n\t\t\t}\n\t\t\tif (prop === \"union\") {\n\t\t\t\treturn set$2.UNIVERSAL;\n\t\t\t}\n\t\t}\n\n\t\tif (forwardComparators && forwardComparators[prop]) {\n\t\t\tvar result = forwardComparators[prop](value1, value2);\n\t\t\t// console.log(\"\",/*name1,*/ value1, algebraSymbol[prop], /*name2,*/ value2,\"=\", result);\n\t\t\tif (result === undefined && forwardComparators.undefinedIsEmptySet === true) {\n\t\t\t\treturn set$2.EMPTY;\n\t\t\t} else {\n\t\t\t\treturn result;\n\t\t\t}\n\t\t} else {\n\t\t\tthrow new Error(\"Unable to perform \" + prop + \" between \" + set$2.getType(value1).name + \" and \" + set$2.getType(value2).name);\n\t\t}\n\n\t};\n});\n\n\n\nset$2 = {\n\t// The special types\n\n\t// All values within the \"universe\". Other sets can equal UNIVERSAL.\n\tUNIVERSAL: canReflect_1_19_2_canReflect.assignSymbols({\n\t\tname: \"UNIVERSAL\"\n\t}, {\n\t\t\"can.serialize\": function() {\n\t\t\treturn this;\n\t\t},\n\t\t\"can.isMember\": function(){\n\t\t\treturn true;\n\t\t}\n\t}),\n\t// Nothing\n\tEMPTY: canReflect_1_19_2_canReflect.assignSymbols({\n\t\tname: \"EMPTY\"\n\t}, {\n\t\t\"can.serialize\": function() {\n\t\t\treturn this;\n\t\t},\n\t\t\"can.isMember\": function(){\n\t\t\treturn false;\n\t\t}\n\t}),\n\t// The set exists, but we lack the language to represent it.\n\tUNDEFINABLE: addSerializeToThis({\n\t\tname: \"UNDEFINABLE\"\n\t}),\n\t// We don't know if this exists. Intersection between two paginated sets.\n\tUNKNOWABLE: addSerializeToThis({\n\t\tname: \"UNKNOWABLE\"\n\t}),\n\tIdentity: Identity,\n\tisSpecial: function(setA) {\n\t\treturn setA === set$2.UNIVERSAL || setA === set$2.EMPTY ||\n\t\t\tsetA === set$2.UNDEFINABLE || setA === set$2.UNKNOWABLE;\n\t},\n\tisDefinedAndHasMembers: function(setA) {\n\t\tif (setA !== set$2.EMPTY && setA !== set$2.UNDEFINABLE && setA !== set$2.UNKNOWABLE) {\n\t\t\treturn !!setA;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t},\n\tgetType: function(value) {\n\t\tif (value === set$2.UNIVERSAL) {\n\t\t\treturn set$2.UNIVERSAL;\n\t\t}\n\t\tif (value === set$2.EMPTY) {\n\t\t\treturn set$2.EMPTY;\n\t\t}\n\t\tif (value === set$2.UNKNOWABLE) {\n\t\t\treturn set$2.UNKNOWABLE;\n\t\t}\n\t\tif (value === null) {\n\t\t\treturn Identity;\n\t\t}\n\t\tif (typeMap.hasOwnProperty(typeof value)) {\n\t\t\treturn typeMap[typeof value];\n\t\t}\n\t\treturn value.constructor;\n\t},\n\t// This tries to get two comparable values from objects.\n\t// In many ways this is similar to what JavaScript does if it sees\n\t// `new Date() > new Date()`, it tries to coerce one value into the other value.\n\townAndMemberValue: function(startOwnValue, startMemberValue) {\n\t\t// If either side has a value, then try to type-coerse.\n\t\tif (startOwnValue != null || startMemberValue != null) {\n\t\t\t// First try to get `.valueOf` from either side\n\t\t\tvar ownValue = startOwnValue != null ? startOwnValue.valueOf() : startOwnValue,\n\t\t\t\tmemberValue = startMemberValue != null ? startMemberValue.valueOf() : startMemberValue;\n\n\t\t\t// If we ot passed a null on either side, return extracted values\n\t\t\tif (startOwnValue == null || startMemberValue == null) {\n\t\t\t\treturn {\n\t\t\t\t\town: ownValue,\n\t\t\t\t\tmember: memberValue\n\t\t\t\t};\n\t\t\t}\n\t\t\t// If we read the values, but they aren't the same type ...\n\t\t\t// we will try to convert the member to the same type as the `startOwnValue`'s type.\n\t\t\t// And then read `.valueOf()` from that.\n\t\t\tif (ownValue == null || ownValue.constructor !== memberValue.constructor) {\n\t\t\t\tmemberValue = new startOwnValue.constructor(memberValue).valueOf();\n\t\t\t}\n\t\t\treturn {\n\t\t\t\town: ownValue,\n\t\t\t\tmember: memberValue\n\t\t\t};\n\t\t}\n\t\treturn {\n\t\t\town: startMemberValue,\n\t\t\tmember: startOwnValue\n\t\t};\n\t},\n\tgetComparisons: function(Type1, Type2) {\n\t\tvar comparisons = Type1[setComparisonsSymbol];\n\t\tif (comparisons) {\n\t\t\tvar subMap = comparisons.get(Type1);\n\n\t\t\tif (subMap) {\n\t\t\t\treturn subMap.get(Type2);\n\t\t\t}\n\t\t}\n\t},\n\thasComparisons: function(Type) {\n\t\treturn !!Type[setComparisonsSymbol];\n\t},\n\tdefineComparison: function(type1, type2, comparators) {\n\t\taddComparators(type1, type2, comparators);\n\t\tif (type1 !== type2) {\n\t\t\tvar reverse = {};\n\t\t\tfor (var prop in comparators) {\n\t\t\t\t// difference can not be reversed\n\t\t\t\tif (prop !== \"difference\") {\n\t\t\t\t\treverse[prop] = reverseArgs(comparators[prop]);\n\t\t\t\t}\n\n\t\t\t}\n\t\t\taddComparators(type2, type1, reverse);\n\t\t}\n\t},\n\t/**\n\t * Checks if A is a subset of B.  If A is a subset of B if:\n\t * - A \\ B = EMPTY (A has nothing outside what's in B)\n\t * - A ∩ B = defined\n\t */\n\tisSubset: function(value1, value2) {\n\t\t// check primary direction\n\t\tif (value1 === value2) {\n\t\t\treturn true;\n\t\t}\n\t\tvar Type1 = set$2.getType(value1),\n\t\t\tType2 = set$2.getType(value2);\n\t\tvar forwardComparators = set$2.getComparisons(Type1, Type2);\n\t\tif (forwardComparators) {\n\t\t\t// A set is a subset, if it intersects with the set, and it has nothing\n\t\t\t// outside the other set.\n\t\t\tvar intersection = get$1.intersection(forwardComparators, value1, value2);\n\t\t\t// [a, b] \\ [a, b, c]\n\t\t\tvar difference = get$1.difference(forwardComparators, value1, value2);\n\t\t\t// they intersect, but value2 has nothing value1 outside value2\n\t\t\tif (intersection === set$2.UNKNOWABLE || difference === set$2.UNKNOWABLE) {\n\t\t\t\t// {sort: \"a\", page: 0-2} E {sort: \"b\", page: 2-3}\n\t\t\t\treturn undefined;\n\t\t\t} else if (intersection !== set$2.EMPTY && difference === set$2.EMPTY) {\n\t\t\t\treturn true;\n\t\t\t} else {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t} else {\n\t\t\tthrow new Error(\"Unable to perform subset comparison between \" + Type1.name + \" and \" + Type2.name);\n\t\t}\n\t},\n\tisProperSubset: function(setA, setB) {\n\t\treturn set$2.isSubset(setA, setB) && !set$2.isEqual(setA, setB);\n\t},\n\tisEqual: function(value1, value2) {\n\t\tif (value1 === set$2.UNKNOWABLE || value2 === set$2.UNKNOWABLE) {\n\t\t\treturn set$2.UNKNOWABLE;\n\t\t}\n\t\t//console.group(\"is\", value1, \"==\", value2);\n\t\tvar isSpecial1 = set$2.isSpecial(value1),\n\t\t\tisSpecial2 = set$2.isSpecial(value2);\n\n\t\t// Both have to be specail because some other sets will be equal to UNIVERSAL without being UNIVERSAL\n\t\tif (isSpecial1 && isSpecial2) {\n\t\t\treturn isSpecial1 === isSpecial2;\n\t\t}\n\t\tvar Type1 = set$2.getType(value1),\n\t\t\tType2 = set$2.getType(value2);\n\t\tif (value1 === value2) {\n\t\t\treturn true;\n\t\t}\n\t\tvar forwardComparators = set$2.getComparisons(Type1, Type2);\n\t\tvar reverseComparators = set$2.getComparisons(Type2, Type1);\n\t\tif (forwardComparators && reverseComparators) {\n\n\t\t\t// Two sets are equal if there's an intersection, but not difference\n\t\t\tvar intersection = get$1.intersection(forwardComparators, value1, value2);\n\t\t\tvar difference = get$1.difference(forwardComparators, value1, value2);\n\t\t\tif (intersection !== set$2.EMPTY && difference === set$2.EMPTY) {\n\t\t\t\tvar reverseIntersection = get$1.intersection(reverseComparators, value2, value1);\n\t\t\t\tvar reverseDifference = get$1.difference(reverseComparators, value2, value1);\n\t\t\t\t//console.groupEnd();\n\t\t\t\treturn reverseIntersection !== set$2.EMPTY && reverseDifference === set$2.EMPTY;\n\t\t\t} else {\n\t\t\t\t//console.groupEnd();\n\t\t\t\treturn false;\n\t\t\t}\n\t\t} else {\n\t\t\tvar values = set$2.ownAndMemberValue(value1, value2);\n\t\t\tif (canReflect_1_19_2_canReflect.isPrimitive(values.own) && canReflect_1_19_2_canReflect.isPrimitive(values.member)) {\n\t\t\t\treturn values.own === values.member;\n\t\t\t} else {\n\t\t\t\t// try to convert ...\n\t\t\t\tthrow new Error(\"Unable to perform equal comparison between \" + Type1.name + \" and \" + Type2.name);\n\t\t\t}\n\n\t\t}\n\t},\n\n\tunion: function(value1, value2) {\n\t\tif (value1 === set$2.UNIVERSAL || value2 === set$2.UNIVERSAL) {\n\t\t\treturn set$2.UNIVERSAL;\n\t\t}\n\t\tif (value1 === set$2.EMPTY) {\n\t\t\treturn value2;\n\t\t} else if (value2 === set$2.EMPTY) {\n\t\t\treturn value1;\n\t\t}\n\t\tif (value1 === set$2.UNKNOWABLE || value2 === set$2.UNKNOWABLE) {\n\t\t\treturn set$2.UNKNOWABLE;\n\t\t}\n\t\tvar Type1 = set$2.getType(value1),\n\t\t\tType2 = set$2.getType(value2);\n\t\tvar forwardComparators = set$2.getComparisons(Type1, Type2);\n\t\treturn get$1.union(forwardComparators, value1, value2);\n\t},\n\n\tintersection: function(value1, value2) {\n\t\tif (value1 === set$2.UNIVERSAL) {\n\t\t\treturn value2;\n\t\t}\n\t\tif (value2 === set$2.UNIVERSAL) {\n\t\t\treturn value1;\n\t\t}\n\t\tif (value1 === set$2.EMPTY || value2 === set$2.EMPTY) {\n\t\t\treturn set$2.EMPTY;\n\t\t}\n\t\tif (value1 === set$2.UNKNOWABLE || value2 === set$2.UNKNOWABLE) {\n\t\t\treturn set$2.UNKNOWABLE;\n\t\t}\n\t\tvar Type1 = set$2.getType(value1),\n\t\t\tType2 = set$2.getType(value2);\n\t\tvar forwardComparators = set$2.getComparisons(Type1, Type2);\n\t\tif (forwardComparators) {\n\t\t\treturn get$1.intersection(forwardComparators, value1, value2);\n\t\t} else {\n\t\t\tthrow new Error(\"Unable to perform intersection comparison between \" + Type1.name + \" and \" + Type2.name);\n\t\t}\n\t},\n\tdifference: function(value1, value2) {\n\t\tif (value1 === set$2.EMPTY) {\n\t\t\treturn set$2.EMPTY;\n\t\t}\n\t\tif (value2 === set$2.EMPTY) {\n\t\t\treturn value1;\n\t\t}\n\t\tif (value1 === set$2.UNKNOWABLE || value2 === set$2.UNKNOWABLE) {\n\t\t\treturn set$2.UNKNOWABLE;\n\t\t}\n\t\tvar Type1 = set$2.getType(value1),\n\t\t\tType2 = set$2.getType(value2);\n\t\tvar forwardComparators = set$2.getComparisons(Type1, Type2);\n\t\tif (forwardComparators) {\n\t\t\treturn get$1.difference(forwardComparators, value1, value2);\n\t\t} else {\n\t\t\tthrow new Error(\"Unable to perform difference comparison between \" + Type1.name + \" and \" + Type2.name);\n\t\t}\n\t},\n\n\tindexWithEqual: function(arr, value) {\n\t\tfor (var i = 0, len = arr.length; i < len; i++) {\n\t\t\tif (set$2.isEqual(arr[i], value)) {\n\t\t\t\treturn i;\n\t\t\t}\n\t\t}\n\t\treturn -1;\n\t}\n\n};\n\n\n\nfunction identityIntersection(v1, v2) {\n\treturn v1 === v2 ? v1 : set$2.EMPTY;\n}\n\nfunction identityDifference(v1, v2) {\n\treturn v1 === v2 ? set$2.EMPTY : v1;\n}\n\nfunction identityUnion(v1, v2) {\n\treturn v1 === v2 ? v1 : set$2.UNDEFINABLE;\n}\nvar identityComparitor = {\n\tintersection: identityIntersection,\n\tdifference: identityDifference,\n\tunion: identityUnion\n};\nset$2.defineComparison(Identity, Identity, identityComparitor);\n\nset$2.defineComparison(set$2.UNIVERSAL, set$2.UNIVERSAL, identityComparitor);\n\nvar set_1$1 = set$2;\n\nvar replacer =  /\\{([^\\}]+)\\}/g;\n// Returns data from a url, given a fixtue URL. For example, given\n// \"todo/{id}\" and \"todo/5\", it will return an object with an id property\n// equal to 5.\nvar canFixture_3_1_7_dataFromUrl = function dataFromUrl(fixtureUrl, url) {\n\tif(!fixtureUrl) {\n\t\t// if there's no url, it's a match\n\t\treturn {};\n\t}\n\n\tvar order = [],\n\t\t// Sanitizes fixture URL\n\t\tfixtureUrlAdjusted = fixtureUrl.replace('.', '\\\\.')\n\t\t\t.replace('?', '\\\\?'),\n\t\t// Creates a regular expression out of the adjusted fixture URL and\n\t\t// runs it on the URL we passed in.\n\t\tres = new RegExp(fixtureUrlAdjusted.replace(replacer, function (whole, part) {\n\t\t\torder.push(part);\n\t\t\treturn \"([^\\/]+)\";\n\t\t}) + \"$\")\n\t\t\t.exec(url),\n\t\tdata = {};\n\n\t// If there were no matches, return null;\n\tif (!res) {\n\t\treturn null;\n\t}\n\n\t// Shift off the URL and just keep the data.\n\tres.shift();\n\torder.forEach( function (name) {\n\t\t// Add data from regular expression onto data object.\n\t\tdata[name] = res.shift();\n\t});\n\treturn data;\n};\n\nfunction getValue(value){\n    return value == null ? value : value.valueOf();\n}\n\nvar arrayUnionIntersectionDifference = function arrayUnionIntersectionDifference(arr1, arr2){\n    var set = new Set();\n\n    var intersection = [];\n    var union = [];\n    var difference = arr1.slice(0);\n\n\n    arr1.forEach(function(value){\n        set.add(getValue(value));\n        union.push(value);\n    });\n\n    arr2.forEach(function(value){\n        if(set.has(getValue(value))) {\n            intersection.push(value);\n            var index = set_1$1.indexWithEqual(difference, value);\n            if(index !== -1) {\n                difference.splice(index, 1);\n            }\n        } else {\n            union.push(value);\n        }\n    });\n\n    return {\n        intersection: intersection,\n        union: union,\n        difference: difference\n    };\n};\n\nfunction isMemberThatUsesTestOnValues(value) {\n\treturn this.constructor.test(this.values, value);\n}\n\nvar isMemberThatUsesTestOnValues_1 = isMemberThatUsesTestOnValues;\n\nvar comparisonsCommon = {\n\tisMemberThatUsesTestOnValues: isMemberThatUsesTestOnValues_1\n};\n\n/*\n * # types\n * This folder is for SetTypes that are used to compare against a single value.\n * For example, `new comparisons.GreaterThan(5)` is used to compare against \n */\n\n\n\n// this is a placeholder for types that have cycle dependencies\nvar types = {};\n\nfunction NotIdentity(value) {\n    this.value = value;\n}\n\n// Not comparisons ---------\nvar Identity$1 = set_1$1.Identity;\n\n// Only difference is needed w/ universal\nset_1$1.defineComparison(set_1$1.UNIVERSAL, Identity$1,{\n    // A \\ B -> what's in b, but not in A\n    difference: function(universe, value){\n        return new NotIdentity(value);\n    }\n});\n\n// Only difference is needed w/ universal\nset_1$1.defineComparison(set_1$1.UNIVERSAL, NotIdentity,{\n    // A \\ B -> what's in b, but not in A\n    difference: function(universe, not){\n        return not.value;\n    }\n});\n\nset_1$1.defineComparison(NotIdentity, NotIdentity,{\n    /*\n    // not 5 and not 6\n    union: function(obj1, obj2){\n        // must unroll the value\n\n    },\n    // {foo: zed, abc: d}\n    intersection: function(obj1, obj2){\n\n    },\n    // A \\ B -> what's in b, but not in A\n    difference: function(obj1, obj2){\n\n    }\n    */\n});\n\n\n\nset_1$1.defineComparison(NotIdentity, Identity$1,{\n    // not 5 and not 6\n    union: function(not, primitive){\n        // NOT(5) U 5\n        if( set_1$1.isEqual( not.value, primitive) ) {\n            return set_1$1.UNIVERSAL;\n        }\n        // NOT(4) U 6\n        else {\n            throw new Error(\"Not,Identity Union is not filled out\");\n        }\n    },\n    // {foo: zed, abc: d}\n    intersection: function(not, primitive){\n        return set_1$1.isEqual( !not.value, primitive ) ? primitive: set_1$1.EMPTY;\n    },\n    // A \\ B -> what's in b, but not in A\n    difference: function difference(not, primitive){\n        // NOT(5) \\ 3 -> UNDEFINABLE\n        // NOT(3) \\ 3 -> NOT(3)\n        if(set_1$1.isEqual( not.value, primitive )) {\n            return not;\n        } else {\n            return set_1$1.UNDEFINABLE;\n        }\n    }\n});\n\nset_1$1.defineComparison(Identity$1, NotIdentity,{\n    difference: function(primitive, not){\n        if(set_1$1.isEqual(primitive, not.value)) {\n            return primitive;\n        } else {\n            return set_1$1.UNDEFINABLE;\n        }\n    }\n});\n\nNotIdentity.prototype.isMember = function(value){\n\tif(this.value  && typeof this.value.isMember === \"function\") {\n\t\treturn !this.value.isMember(value);\n\t} else {\n\t\tvar values = set_1$1.ownAndMemberValue(this.value, value);\n\t\treturn values.own !== values.member;\n\t}\n\n};\n\nvar valuesNot = types.Not = NotIdentity;\n\nvar comparisons = {\n\tAll: function(values){\n\t\tthis.values = values;\n\t}\n};\n\ncomparisons.All.prototype.isMember = comparisonsCommon.isMemberThatUsesTestOnValues;\n\nvar is = comparisons;\n\ncomparisons.All.test = function(allValues, recordValues) {\n\treturn allValues.every(function(allValue) {\n\t\treturn recordValues.some(function(recordValue){\n\t\t\tvar values = set_1$1.ownAndMemberValue(allValue, recordValue);\n\t\t\treturn values.own === values.member;\n\t\t});\n\t});\n};\n\nfunction makeThrowCannotCompare(type, left, right) {\n\treturn function() {\n\t\tthrow new Error(\"can-query-logic: Cannot perform \" + type + \" between \" + left + \" and \" + right);\n\t};\n}\n\nfunction throwComparatorAllTypes(type1, type2) {\n\treturn {\n\t\tunion: makeThrowCannotCompare(\"union\", type1,  type2),\n\t\tdifference: makeThrowCannotCompare(\"difference\", type1, type2),\n\t\tintersection: makeThrowCannotCompare(\"intersection\", type1, type2)\n\t};\n}\n\nfunction throwComparatorDifference(type1, type2) {\n\treturn {\n\t\tdifference: makeThrowCannotCompare(\"difference\", type1, type2)\n\t};\n}\n\nvar comparators = {\n\tUNIVERSAL_All: {\n\t\tdifference: function(universe, all) {\n\t\t\treturn new valuesNot(all);\n\t\t}\n\t},\n\tAll_UNIVERSAL: {\n\t\tdifference: function() {\n\t\t\treturn set_1$1.EMPTY;\n\t\t}\n\t},\n\tAll_All: {\n\t\tunion: function(a, b) {\n\t\t\treturn new is.Or([a, b]);\n\t\t}\n\t},\n\tIn_All: throwComparatorDifference(\"In\", \"All\"),\n\tAll_In: throwComparatorAllTypes(\"All\", \"In\"),\n\tNotIn_All: throwComparatorDifference(\"NotIn\", \"All\"),\n\tAll_NotIn: throwComparatorAllTypes(\"All\", \"NotIn\"),\n\tGreaterThan_All: throwComparatorDifference(\"GreaterThan\", \"All\"),\n\tAll_GreaterThan: throwComparatorAllTypes(\"All\", \"GreaterThan\"),\n\tGreaterThanEqual_All: throwComparatorDifference(\"GreaterThanEqual\", \"All\"),\n\tAll_GreaterThanEqual: throwComparatorAllTypes(\"All\", \"GreaterThanEqual\"),\n\tLessThan_All: throwComparatorDifference(\"LessThan\", \"All\"),\n\tAll_LessThan: throwComparatorAllTypes(\"All\", \"LessThan\"),\n\tLessThanEqual_All: throwComparatorDifference(\"LessThanEqual\", \"All\"),\n\tAll_LessThanEqual: throwComparatorAllTypes(\"All\", \"LessThanEqual\"),\n\tAll_And: throwComparatorDifference(\"All\", \"And\"),\n\tAnd_All: throwComparatorAllTypes(\"And\",\t \"All\"),\n\tAll_Or: throwComparatorDifference(\"All\", \"Or\"),\n\tOr_All: throwComparatorAllTypes(\"Or\", \"All\")\n};\n\nvar comparisons_1 = comparisons;\nvar comparators_1 = comparators;\n\nvar arrayComparisons = {\n\tcomparisons: comparisons_1,\n\tcomparators: comparators_1\n};\n\nvar isMemberSymbol$2 = canSymbol_1_7_0_canSymbol.for(\"can.isMember\");\n// $ne\tMatches all values that are not equal to a specified value.\n// $eq\tMatches values that are equal to a specified value.\n//\n// $gt\tMatches values that are greater than a specified value.\n// $gte\tMatches values that are greater than or equal to a specified value.\n\n// $lt\tMatches values that are less than a specified value.\n// $lte\tMatches values that are less than or equal to a specified value.\n\n// $in\tMatches any of the values specified in an array.\n// $nin\tMatches none of the values specified in an array.\n\nvar comparisons$1 = canReflect_1_19_2_canReflect.assign(arrayComparisons.comparisons, {\n\tIn: function In(values) {\n\t\t// TODO: change this to store as `Set` later.\n\t\tthis.values = values;\n\t},\n\tNotIn: function NotIn(values) {\n\t\tthis.values = values;\n\t},\n\tGreaterThan: function GreaterThan(value) {\n\t\tthis.value = value;\n\t},\n\tGreaterThanEqual: function GreaterThanEqual(value) {\n\t\tthis.value = value;\n\t},\n\tLessThan: function LessThan(value) {\n\t\tthis.value = value;\n\t},\n\tLessThanEqual: function LessThanEqual(value) {\n\t\tthis.value = value;\n\t},\n\t// This is used to And something like `GT(3)` n `LT(4)`.\n\t// These are all value comparisons.\n\tAnd: function ValueAnd(ands) {\n\t\tthis.values = ands;\n\t},\n\t// This is used to OR something like `GT(4)` n `LT(3)`.\n\t// These are all value comparisons.\n\tOr: function ValueOr(ors) {\n\t\tthis.values = ors;\n\t}\n});\n\ncomparisons$1.Or.prototype.orValues = function() {\n\treturn this.values;\n};\n\ncomparisons$1.In.test = function(values, b) {\n\treturn values.some(function(value) {\n\t\tvar values = set_1$1.ownAndMemberValue(value, b);\n\t\treturn values.own === values.member;\n\t});\n};\n\ncomparisons$1.NotIn.test = function(values, b) {\n\treturn !comparisons$1.In.test(values, b);\n};\ncomparisons$1.NotIn.testValue = function(value, b) {\n\treturn !comparisons$1.In.testValue(value, b);\n};\n\nfunction nullIsFalse(test) {\n\treturn function(arg1, arg2) {\n\t\tif (arg1 == null || arg2 == null) {\n\t\t\treturn false;\n\t\t} else {\n\t\t\treturn test(arg1, arg2);\n\t\t}\n\t};\n}\n\nfunction nullIsFalseTwoIsOk(test) {\n\treturn function(arg1, arg2) {\n\t\tif (arg1 === arg2) {\n\t\t\treturn true;\n\t\t} else if (arg1 == null || arg2 == null) {\n\t\t\treturn false;\n\t\t} else {\n\t\t\treturn test(arg1, arg2);\n\t\t}\n\t};\n}\n\ncomparisons$1.GreaterThan.test = nullIsFalse(function(a, b) {\n\treturn a > b;\n});\ncomparisons$1.GreaterThanEqual.test = nullIsFalseTwoIsOk(function(a, b) {\n\treturn a >= b;\n});\ncomparisons$1.LessThan.test = nullIsFalse(function(a, b) {\n\treturn a < b;\n});\ncomparisons$1.LessThanEqual.test = nullIsFalseTwoIsOk(function(a, b) {\n\treturn a <= b;\n});\n\nfunction isMemberThatUsesTest(value) {\n\tvar values = set_1$1.ownAndMemberValue(this.value, value);\n\treturn this.constructor.test(values.member, values.own);\n}\n[comparisons$1.GreaterThan, comparisons$1.GreaterThanEqual, comparisons$1.LessThan, comparisons$1.LessThanEqual, comparisons$1.LessThan].forEach(function(Type) {\n\tType.prototype.isMember = isMemberThatUsesTest;\n});\n\n[comparisons$1.In, comparisons$1.NotIn].forEach(function(Type) {\n\tType.prototype.isMember = comparisonsCommon.isMemberThatUsesTestOnValues;\n});\n\ncomparisons$1.And.prototype.isMember = function(value) {\n\treturn this.values.every(function(and) {\n\t\treturn and.isMember(value);\n\t});\n};\ncomparisons$1.Or.prototype.isMember = function(value) {\n\treturn this.values.some(function(and) {\n\t\treturn and.isMember(value);\n\t});\n};\nObject.keys(comparisons$1).forEach(function(name) {\n\tcomparisons$1[name].prototype[isMemberSymbol$2] = comparisons$1[name].prototype.isMember;\n});\n\nvar is$1 = comparisons$1;\n\nfunction makeNot(Type) {\n\treturn {\n\t\ttest: function(vA, vB) {\n\t\t\treturn !Type.test(vA, vB);\n\t\t}\n\t};\n}\n\n\nfunction makeEnum(type, Type, emptyResult) {\n\treturn function(a, b) {\n\t\tvar result = arrayUnionIntersectionDifference(a.values, b.values);\n\t\tif (result[type].length) {\n\t\t\treturn new Type(result[type]);\n\t\t} else {\n\t\t\treturn emptyResult || set_1$1.EMPTY;\n\t\t}\n\t};\n}\n\nfunction swapArgs(fn) {\n\treturn function(a, b) {\n\t\treturn fn(b, a);\n\t};\n}\n\n\nfunction makeSecondValue(Type, prop) {\n\treturn function(universe, value) {\n\t\treturn new Type(value[prop || \"value\"]);\n\t};\n}\n\nfunction returnBiggerValue(gtA, gtB) {\n\tif (gtA.value < gtB.value) {\n\t\treturn gtB;\n\t} else {\n\t\treturn gtA;\n\t}\n}\n\nfunction returnSmallerValue(gtA, gtB) {\n\tif (gtA.value > gtB.value) {\n\t\treturn gtB;\n\t} else {\n\t\treturn gtA;\n\t}\n}\n\nfunction makeAndIf(Comparison, Type) {\n\treturn function(ltA, ltB) {\n\t\tif (Comparison.test(ltA.value, ltB.value)) {\n\t\t\treturn makeAnd([ltA, new Type(ltB.value)]);\n\t\t} else {\n\t\t\treturn set_1$1.EMPTY;\n\t\t}\n\t};\n}\n\nfunction make_InIfEqual_else_andIf(Comparison, Type) {\n\tvar elseCase = makeAndIf(Comparison, Type);\n\treturn function(a, b) {\n\t\tif (a.value === b.value) {\n\t\t\treturn new is$1.In([a.value]);\n\t\t} else {\n\t\t\treturn elseCase(a, b);\n\t\t}\n\t};\n}\n\nfunction make_filterFirstValueAgainstSecond(Comparison, Type, defaultReturn) {\n\treturn function(inSet, gt) {\n\t\tvar values = inSet.values.filter(function(value) {\n\t\t\treturn Comparison.test(gt, value);\n\t\t});\n\t\treturn values.length ?\n\t\t\tnew Type(values) : defaultReturn || set_1$1.EMPTY;\n\t};\n}\n\nvar isMemberTest = {\n\ttest: function isMemberTest(set, value) {\n\t\treturn set.isMember(value);\n\t}\n};\n\nfunction isOr(value) {\n\treturn (value instanceof is$1.Or);\n}\n\nfunction isAnd(value) {\n\treturn (value instanceof is$1.And);\n}\n\nfunction isAndOrOr(value) {\n\treturn isAnd(value) || isOr(value);\n}\n\n\n// `value` - has a test function to check values\n// `with` - the type we use to combined with the \"other\" value.\n// `combinedUsing` - If there are values, how do we stick it together with `with`\n\nfunction combineFilterFirstValuesAgainstSecond(options) {\n\treturn function(inSet, gt) {\n\t\tvar values = inSet.values.filter(function(value) {\n\t\t\treturn options.values.test(gt, value);\n\t\t});\n\t\tvar range;\n\t\tif (options.complement) {\n\t\t\trange = set_1$1.difference(set_1$1.UNIVERSAL, gt);\n\t\t} else if (options.with) {\n\t\t\trange = new options.with(gt.value);\n\t\t} else {\n\t\t\trange = gt;\n\t\t}\n\t\treturn values.length ?\n\t\t\toptions.combinedUsing([new options.arePut(values), range]) : range;\n\t};\n}\n\nfunction makeOrUnless(Comparison, result) {\n\treturn function(setA, setB) {\n\t\tif (Comparison.test(setA.value, setB.value)) {\n\t\t\treturn result || set_1$1.UNIVERSAL;\n\t\t} else {\n\t\t\treturn makeOr([setA, setB]);\n\t\t}\n\t};\n}\n\nfunction makeAndUnless(Comparison, result) {\n\treturn function(setA, setB) {\n\t\tif (Comparison.test(setA.value, setB.value)) {\n\t\t\treturn result || set_1$1.EMPTY;\n\t\t} else {\n\t\t\treturn makeAnd([setA, setB]);\n\t\t}\n\t};\n}\n\nfunction makeComplementSecondArgIf(Comparison) {\n\treturn function(setA, setB) {\n\t\tif (Comparison.test(setA.value, setB.value)) {\n\t\t\treturn set_1$1.difference(set_1$1.UNIVERSAL, setB);\n\t\t} else {\n\t\t\treturn setA;\n\t\t}\n\t};\n}\n\n\nfunction makeAnd(ands) {\n\treturn comparisons$1.And ? new comparisons$1.And(ands) : set_1$1.UNDEFINABLE;\n}\n\nfunction makeOr(ors) {\n\treturn comparisons$1.Or ? new comparisons$1.Or(ors) : set_1$1.UNDEFINABLE;\n}\n\nfunction combineValueWithRangeCheck(inSet, rangeSet, RangeOrEqType) {\n\tvar gte = new RangeOrEqType(rangeSet.value);\n\tvar leftValues = inSet.values.filter(function(value) {\n\t\treturn !gte.isMember(value);\n\t});\n\tif (!leftValues.length) {\n\t\treturn gte;\n\t}\n\n\tif (leftValues.length < inSet.values.length) {\n\t\treturn makeOr([new is$1.In(leftValues), gte]);\n\t} else {\n\t\treturn makeOr([inSet, rangeSet]);\n\t}\n}\n\n// This tries to unify In([1]) with GT(1) -> GTE(1)\nfunction makeOrWithInAndRange(inSet, rangeSet) {\n\tif (rangeSet instanceof is$1.Or) {\n\t\tvar firstResult = makeOrWithInAndRange(inSet, rangeSet.values[0]);\n\t\tif ( !(firstResult instanceof is$1.Or) ) {\n\t\t\treturn set_1$1.union(firstResult, rangeSet.values[1]);\n\t\t}\n\t\tvar secondResult = makeOrWithInAndRange(inSet, rangeSet.values[1]);\n\t\tif ( !(secondResult instanceof is$1.Or) ) {\n\t\t\treturn set_1$1.union(secondResult, rangeSet.values[0]);\n\t\t}\n\t\treturn makeOr([inSet, rangeSet]);\n\t} else {\n\t\tif (rangeSet instanceof is$1.GreaterThan) {\n\t\t\treturn combineValueWithRangeCheck(inSet, rangeSet, is$1.GreaterThanEqual);\n\t\t}\n\t\tif (rangeSet instanceof is$1.LessThan) {\n\t\t\treturn combineValueWithRangeCheck(inSet, rangeSet, is$1.LessThanEqual);\n\t\t}\n\t\treturn makeOr([inSet, rangeSet]);\n\t}\n}\n\nvar In_RANGE = {\n\tunion: combineFilterFirstValuesAgainstSecond({\n\t\tvalues: makeNot(isMemberTest),\n\t\tarePut: is$1.In,\n\t\tcombinedUsing: function(ors) {\n\t\t\treturn makeOrWithInAndRange(ors[0], ors[1]);\n\t\t}\n\t}),\n\tintersection: make_filterFirstValueAgainstSecond(isMemberTest, is$1.In, set_1$1.EMPTY),\n\tdifference: make_filterFirstValueAgainstSecond(makeNot(isMemberTest), is$1.In, set_1$1.EMPTY)\n};\nvar RANGE_IN = {\n\tdifference: swapArgs(combineFilterFirstValuesAgainstSecond({\n\t\tvalues: isMemberTest,\n\t\tarePut: is$1.NotIn,\n\t\tcombinedUsing: makeAnd\n\t}))\n};\n\nvar NotIn_RANGE = function() {\n\treturn {\n\t\tunion: make_filterFirstValueAgainstSecond(makeNot(isMemberTest), is$1.NotIn, set_1$1.UNIVERSAL),\n\t\tintersection: combineFilterFirstValuesAgainstSecond({\n\t\t\tvalues: isMemberTest,\n\t\t\tarePut: is$1.NotIn,\n\t\t\tcombinedUsing: makeAnd\n\t\t}),\n\t\tdifference: combineFilterFirstValuesAgainstSecond({\n\t\t\tvalues: makeNot(isMemberTest),\n\t\t\tarePut: is$1.NotIn,\n\t\t\tcombinedUsing: makeAnd,\n\t\t\tcomplement: true\n\t\t})\n\t};\n};\nvar RANGE_NotIn = {\n\tdifference: swapArgs(make_filterFirstValueAgainstSecond(isMemberTest, is$1.In, set_1$1.EMPTY))\n};\n\nvar RANGE_And_Union = function(gt, and) {\n\n\tvar union1 = set_1$1.union(gt, and.values[0]);\n\tvar union2 = set_1$1.union(gt, and.values[1]);\n\n\tif (!isAndOrOr(union1) && !isAndOrOr(union2)) {\n\t\treturn set_1$1.intersection(union1, union2);\n\t} else {\n\t\treturn new is$1.Or([gt, and]);\n\t}\n};\nvar RANGE_And_Intersection = function(gt, and) {\n\tvar and1 = and.values[0],\n\t\tand2 = and.values[1];\n\tvar intersection1 = set_1$1.intersection(gt, and1);\n\tvar intersection2 = set_1$1.intersection(gt, and2);\n\tif (intersection1 === set_1$1.EMPTY || intersection2 === set_1$1.EMPTY) {\n\t\treturn set_1$1.EMPTY;\n\t}\n\tif (!isAndOrOr(intersection1)) {\n\t\treturn new set_1$1.intersection(intersection1, and2);\n\t}\n\n\tif (!isAndOrOr(intersection2)) {\n\t\treturn new set_1$1.intersection(intersection2, and1);\n\t} else {\n\t\treturn new is$1.And([gt, and]);\n\t}\n\n};\n\nvar RANGE_And_Difference = function(gt, and) {\n\tvar and1 = and.values[0],\n\t\tand2 = and.values[1];\n\tvar difference1 = set_1$1.difference(gt, and1);\n\tvar difference2 = set_1$1.difference(gt, and2);\n\tif (difference1 === set_1$1.EMPTY) {\n\t\treturn difference2;\n\t}\n\tif (difference2 === set_1$1.EMPTY) {\n\t\treturn difference1;\n\t}\n\treturn new is$1.Or([difference1, difference2]);\n};\n\nvar And_RANGE_Difference = function(and, gt) {\n\tvar and1 = and.values[0],\n\t\tand2 = and.values[1];\n\tvar difference1 = set_1$1.difference(and1, gt);\n\tvar difference2 = set_1$1.difference(and2, gt);\n\n\treturn set_1$1.intersection(difference1, difference2);\n};\n\nvar RANGE_Or = {\n\tunion: function(gt, or) {\n\t\tvar or1 = or.values[0],\n\t\t\tor2 = or.values[1];\n\t\tvar union1 = set_1$1.union(gt, or1);\n\t\tif (!isAndOrOr(union1)) {\n\t\t\treturn set_1$1.union(union1, or2);\n\t\t}\n\t\tvar union2 = set_1$1.union(gt, or2);\n\t\tif (!isAndOrOr(union2)) {\n\t\t\treturn set_1$1.union(or1, union2);\n\t\t} else {\n\t\t\treturn new is$1.Or([gt, or]);\n\t\t}\n\t},\n\tintersection: function(gt, or) {\n\t\tvar or1 = or.values[0],\n\t\t\tor2 = or.values[1];\n\t\tvar intersection1 = set_1$1.intersection(gt, or1);\n\t\tvar intersection2 = set_1$1.intersection(gt, or2);\n\t\tif (intersection1 === set_1$1.EMPTY) {\n\t\t\treturn intersection2;\n\t\t}\n\t\tif (intersection2 === set_1$1.EMPTY) {\n\t\t\treturn intersection1;\n\t\t}\n\t\treturn set_1$1.union(intersection1, intersection2);\n\t},\n\t// v \\ (a || b) -> (v \\ a) n (v \\ b)\n\tdifference: function(gt, or) {\n\n\t\tvar or1 = or.values[0],\n\t\t\tor2 = or.values[1];\n\t\tvar difference1 = set_1$1.difference(gt, or1);\n\t\tvar difference2 = set_1$1.difference(gt, or2);\n\t\treturn set_1$1.intersection(difference1, difference2);\n\t}\n};\n\nvar Or_RANGE = {\n\t// ( a || b ) \\ v -> (a \\ v) U (b \\ v)\n\tdifference: function(or, gt) {\n\t\tvar or1 = or.values[0],\n\t\t\tor2 = or.values[1];\n\t\tvar difference1 = set_1$1.difference(or1, gt);\n\t\tvar difference2 = set_1$1.difference(or2, gt);\n\t\treturn set_1$1.union(difference1, difference2);\n\t}\n};\n\nvar comparators$1 = canReflect_1_19_2_canReflect.assign(arrayComparisons.comparators, {\n\t// In\n\tIn_In: {\n\t\tunion: makeEnum(\"union\", is$1.In),\n\t\tintersection: makeEnum(\"intersection\", is$1.In),\n\t\tdifference: makeEnum(\"difference\", is$1.In)\n\t},\n\tUNIVERSAL_In: {\n\t\tdifference: makeSecondValue(is$1.NotIn, \"values\")\n\t},\n\n\tIn_NotIn: {\n\t\tunion: swapArgs(makeEnum(\"difference\", is$1.NotIn, set_1$1.UNIVERSAL)),\n\t\t// what does In have on its own\n\t\tintersection: makeEnum(\"difference\", is$1.In),\n\t\tdifference: makeEnum(\"intersection\", is$1.In)\n\t},\n\tNotIn_In: {\n\t\tdifference: makeEnum(\"union\", is$1.NotIn)\n\t},\n\n\tIn_GreaterThan: In_RANGE,\n\tGreaterThan_In: RANGE_IN,\n\n\tIn_GreaterThanEqual: In_RANGE,\n\tGreaterThanEqual_In: RANGE_IN,\n\n\tIn_LessThan: In_RANGE,\n\tLessThan_In: RANGE_IN,\n\n\tIn_LessThanEqual: In_RANGE,\n\tLessThanEqual_In: RANGE_IN,\n\tIn_And: In_RANGE,\n\tAnd_In: RANGE_IN,\n\n\tIn_Or: In_RANGE,\n\tOr_In: RANGE_IN,\n\n\t// NotIn ===============================\n\tNotIn_NotIn: {\n\t\tunion: makeEnum(\"intersection\", is$1.NotIn, set_1$1.UNIVERSAL),\n\t\tintersection: makeEnum(\"union\", is$1.NotIn),\n\t\tdifference: makeEnum(\"difference\", is$1.In)\n\t},\n\tUNIVERSAL_NotIn: {\n\t\tdifference: makeSecondValue(is$1.In, \"values\")\n\t},\n\n\tNotIn_GreaterThan: NotIn_RANGE(),\n\tGreaterThan_NotIn: RANGE_NotIn,\n\n\tNotIn_GreaterThanEqual: NotIn_RANGE(),\n\tGreaterThanEqual_NotIn: RANGE_NotIn,\n\n\tNotIn_LessThan: NotIn_RANGE(),\n\tLessThan_NotIn: RANGE_NotIn,\n\n\tNotIn_LessThanEqual: NotIn_RANGE(),\n\tLessThanEqual_NotIn: RANGE_NotIn,\n\n\tNotIn_And: NotIn_RANGE(),\n\tAnd_NotIn: RANGE_NotIn,\n\n\tNotIn_Or: NotIn_RANGE(),\n\tOr_NotIn: RANGE_NotIn,\n\n\t// GreaterThan ===============================\n\tGreaterThan_GreaterThan: {\n\t\tunion: returnSmallerValue,\n\t\tintersection: returnBiggerValue,\n\t\t// {$gt:5} \\ {gt: 6} -> AND( {$gt:5}, {$lte: 6} )\n\t\tdifference: makeAndIf(is$1.LessThan, is$1.LessThanEqual)\n\t},\n\tUNIVERSAL_GreaterThan: {\n\t\tdifference: makeSecondValue(is$1.LessThanEqual)\n\t},\n\n\tGreaterThan_GreaterThanEqual: {\n\t\tunion: returnSmallerValue,\n\t\tintersection: returnBiggerValue,\n\t\t// {$gt:5} \\ {gte: 6} -> AND( {$gt:5}, {$lt: 6} )\n\t\tdifference: makeAndIf(is$1.LessThan, is$1.LessThan)\n\t},\n\tGreaterThanEqual_GreaterThan: {\n\t\tdifference: make_InIfEqual_else_andIf(is$1.LessThan, is$1.LessThanEqual)\n\t},\n\n\tGreaterThan_LessThan: {\n\t\tunion: (function() {\n\t\t\tvar makeOrUnlessLessThan = makeOrUnless(is$1.LessThan);\n\t\t\treturn function greaterThan_lessThan_union(a, b) {\n\t\t\t\tif ( comparisons$1.In.test([a.value], b.value) ) {\n\t\t\t\t\treturn new is$1.NotIn([a.value]);\n\t\t\t\t} else {\n\t\t\t\t\treturn makeOrUnlessLessThan(a, b);\n\t\t\t\t}\n\t\t\t};\n\t\t})(),\n\t\tintersection: makeAndUnless(is$1.GreaterThan),\n\t\tdifference: makeComplementSecondArgIf(is$1.LessThan)\n\t},\n\tLessThan_GreaterThan: {\n\t\tdifference: makeComplementSecondArgIf(is$1.GreaterThan)\n\t},\n\n\tGreaterThan_LessThanEqual: {\n\t\tunion: makeOrUnless(is$1.LessThanEqual),\n\t\tintersection: makeAndUnless(is$1.GreaterThanEqual),\n\t\tdifference: makeComplementSecondArgIf(is$1.LessThanEqual)\n\t},\n\tLessThanEqual_GreaterThan: {\n\t\tdifference: makeComplementSecondArgIf(is$1.GreaterThanEqual)\n\t},\n\n\tGreaterThan_And: {\n\t\tunion: RANGE_And_Union,\n\t\tintersection: RANGE_And_Intersection,\n\t\tdifference: RANGE_And_Difference\n\t},\n\tAnd_GreaterThan: {\n\t\tdifference: And_RANGE_Difference\n\t},\n\tGreaterThan_Or: RANGE_Or,\n\tOr_GreaterThan: Or_RANGE,\n\n\t// GreaterThanEqual =========\n\tGreaterThanEqual_GreaterThanEqual: {\n\t\tunion: returnSmallerValue,\n\t\tintersection: returnBiggerValue,\n\t\t// {gte: 2} \\ {gte: 3} = {gte: 2} AND {lt: 3}\n\t\tdifference: makeAndIf(is$1.LessThan, is$1.LessThan)\n\t},\n\tUNIVERSAL_GreaterThanEqual: {\n\t\tdifference: makeSecondValue(is$1.LessThan)\n\t},\n\n\tGreaterThanEqual_LessThan: {\n\t\tunion: makeOrUnless(is$1.LessThanEqual),\n\t\tintersection: makeAndUnless(is$1.GreaterThanEqual),\n\t\tdifference: makeComplementSecondArgIf(is$1.LessThanEqual)\n\t},\n\tLessThan_GreaterThanEqual: {\n\t\tdifference: makeComplementSecondArgIf(is$1.GreaterThanEqual)\n\t},\n\n\tGreaterThanEqual_LessThanEqual: {\n\t\tunion: makeOrUnless(is$1.LessThanEqual),\n\t\t// intersect on a number\n\t\tintersection: (function() {\n\t\t\tvar makeAnd = makeAndUnless(is$1.GreaterThan);\n\t\t\treturn function gte_lte_intersection(gte, lte) {\n\t\t\t\tvar inSet = new is$1.In([gte.value]);\n\t\t\t\tif (inSet.isMember(lte.value)) {\n\t\t\t\t\treturn inSet;\n\t\t\t\t} else {\n\t\t\t\t\treturn makeAnd(gte, lte);\n\t\t\t\t}\n\t\t\t};\n\t\t})(),\n\t\tdifference: makeComplementSecondArgIf(is$1.LessThanEqual)\n\t},\n\tLessThanEqual_GreaterThanEqual: {\n\t\tdifference: makeComplementSecondArgIf(is$1.GreaterThanEqual)\n\t},\n\n\tGreaterThanEqual_And: {\n\t\tunion: RANGE_And_Union,\n\t\tintersection: RANGE_And_Intersection,\n\t\tdifference: RANGE_And_Difference\n\t},\n\tAnd_GreaterThanEqual: {\n\t\tdifference: And_RANGE_Difference\n\t},\n\tGreaterThanEqual_Or: RANGE_Or,\n\tOr_GreaterThanEqual: Or_RANGE,\n\n\t// LessThan\n\tLessThan_LessThan: {\n\t\tunion: returnBiggerValue,\n\t\tintersection: returnSmallerValue,\n\t\tdifference: makeAndIf(is$1.GreaterThan, is$1.GreaterThanEqual)\n\t},\n\tUNIVERSAL_LessThan: {\n\t\tdifference: makeSecondValue(is$1.GreaterThanEqual)\n\t},\n\n\tLessThan_LessThanEqual: {\n\t\tunion: returnBiggerValue,\n\t\tintersection: returnSmallerValue,\n\t\t// {lt: 3} \\ {lte: 2} -> {lt: 3} AND {gt: 2}\n\t\tdifference: makeAndIf(is$1.GreaterThan, is$1.GreaterThan)\n\t},\n\tLessThanEqual_LessThan: {\n\t\tdifference: make_InIfEqual_else_andIf(is$1.GreaterThanEqual, is$1.GreaterThanEqual)\n\t},\n\n\tLessThan_And: {\n\t\tunion: RANGE_And_Union,\n\t\tintersection: RANGE_And_Intersection,\n\t\tdifference: RANGE_And_Difference\n\t},\n\tAnd_LessThan: {\n\t\tdifference: And_RANGE_Difference\n\t},\n\tLessThan_Or: RANGE_Or,\n\tOr_LessThan: Or_RANGE,\n\n\t// LessThanEqual\n\tLessThanEqual_LessThanEqual: {\n\t\tunion: returnBiggerValue,\n\t\tintersection: returnSmallerValue,\n\t\tdifference: function(lteA, lteB) {\n\t\t\tif (lteA.value >= lteB.value) {\n\t\t\t\treturn makeAnd([lteA, new is$1.GreaterThan(lteB.value)]);\n\t\t\t} else {\n\t\t\t\treturn set_1$1.EMPTY;\n\t\t\t}\n\t\t}\n\t},\n\tUNIVERSAL_LessThanEqual: {\n\t\tdifference: makeSecondValue(is$1.GreaterThan)\n\t},\n\n\tLessThanEqual_And: {\n\t\tunion: RANGE_And_Union,\n\t\tintersection: RANGE_And_Intersection,\n\t\tdifference: RANGE_And_Difference\n\t},\n\tAnd_LessThanEqual: {\n\t\tdifference: And_RANGE_Difference\n\t},\n\tLessThanEqual_Or: RANGE_Or,\n\tOr_LessThanEqual: Or_RANGE,\n\n\t// AND =====\n\tAnd_And: {\n\t\t// (a n b) U (c n d) => (a U c) n (b U d)?\n\t\t// union both ways ... if one is unviersal, the other is the result.\n\t\t// (a ∩ b) ∪ (c ∩ d) where Z = (a ∩ b)\n\t\t// -> Z ∪ (c ∩ d)\n\t\t// -> (Z ∪ c) ∩ (Z ∪ d)\n\t\t// -> ((a ∩ b) ∪ c) ∪ ((a ∩ b) ∪ d)\n\t\tunion: function(and1, and2) {\n\t\t\tvar union1 = set_1$1.union(and1, and2.values[0]);\n\t\t\tvar union2 = set_1$1.union(and1, and2.values[1]);\n\n\t\t\tif (isAndOrOr(union1) || isAndOrOr(union2)) {\n\t\t\t\t// try the other direction\n\t\t\t\tunion1 = set_1$1.union(and2, and1.values[0]);\n\t\t\t\tunion2 = set_1$1.union(and2, and1.values[1]);\n\t\t\t}\n\t\t\tif (isAndOrOr(union1) || isAndOrOr(union2)) {\n\t\t\t\treturn new is$1.Or([and1, and2]);\n\t\t\t} else {\n\t\t\t\treturn set_1$1.intersection(union1, union2);\n\t\t\t}\n\n\t\t\t/*\n\t\t\tvar combo1 = [\n\t\t\t\t\tset.union(and1.values[0], and2.values[0]),\n\t\t\t\t\tset.union(and1.values[1], and2.values[1])\n\t\t\t\t],\n\t\t\t\tcombo2 = [\n\t\t\t\t\tset.union(and1.values[0], and2.values[1]),\n\t\t\t\t\tset.union(and1.values[1], and2.values[0])\n\t\t\t\t];\n\t\t\tif (combo1.every(function(aSet) {\n\t\t\t\treturn set.isEqual(set.UNIVERSAL, aSet);\n\t\t\t})) {\n\t\t\t\treturn set.intersection.apply(set, combo2);\n\t\t\t}\n\t\t\tif (combo2.every(function(aSet) {\n\t\t\t\treturn set.isEqual(set.UNIVERSAL, aSet);\n\t\t\t})) {\n\t\t\t\treturn set.intersection.apply(set, combo1);\n\t\t\t}\n\t\t\treturn new is.Or([and1, and2]);*/\n\t\t},\n\n\t\tintersection: function(and1, and2) {\n\t\t\tvar intersection1 = set_1$1.intersection(and1.values[0], and2.values[0]);\n\t\t\tvar intersection2 = set_1$1.intersection(and1.values[1], and2.values[1]);\n\n\t\t\tif (!isAndOrOr(intersection1) || !isAndOrOr(intersection2)) {\n\t\t\t\treturn set_1$1.intersection(intersection1, intersection2);\n\t\t\t}\n\t\t\tintersection1 = set_1$1.intersection(and1.values[0], and2.values[1]);\n\t\t\tintersection2 = set_1$1.intersection(and1.values[1], and2.values[0]);\n\n\t\t\tif (!isAndOrOr(intersection1) || !isAndOrOr(intersection2)) {\n\t\t\t\treturn set_1$1.intersection(intersection1, intersection2);\n\t\t\t} else {\n\t\t\t\treturn new is$1.And([and1, and2]);\n\t\t\t}\n\t\t},\n\t\t// (a ∩ b) \\ (c ∩ d) where Z = (a ∩ b)\n\t\t// -> Z \\ (c ∩ d)\n\t\t// -> (Z \\ c) ∪ (Z \\ d)\n\t\t// -> ((a ∩ b) \\ c) ∪ ((a ∩ b) \\ d)\n\t\tdifference: (function() {\n\n\t\t\treturn function(and1, and2) {\n\t\t\t\tvar d1 = set_1$1.difference(and1, and2.values[0]);\n\t\t\t\tvar d2 = set_1$1.difference(and1, and2.values[1]);\n\t\t\t\treturn set_1$1.union(d1, d2);\n\t\t\t};\n\t\t\t/*\n\t\t\tfunction getDiffIfPartnerIsEmptyAndOtherComboNotDisjoint(inOrderDiffs, reverseOrderDiffs, diffedAnd) {\n\t\t\t\tvar diff;\n\t\t\t\tif (inOrderDiffs[0] === set.EMPTY) {\n\t\t\t\t\tdiff = inOrderDiffs[1];\n\t\t\t\t}\n\t\t\t\tif (inOrderDiffs[1] === set.EMPTY) {\n\t\t\t\t\tdiff = inOrderDiffs[0];\n\t\t\t\t}\n\t\t\t\tif (diff) {\n\t\t\t\t\t// check if a diff equals itself (and therefor is disjoint)\n\n\t\t\t\t\tif (set.isEqual(diffedAnd.values[0], reverseOrderDiffs[0] ) ) {\n\t\t\t\t\t\t// is disjoint\n\t\t\t\t\t\treturn diffedAnd;\n\t\t\t\t\t}\n\t\t\t\t\tif ( set.isEqual(diffedAnd.values[1], reverseOrderDiffs[1] ) ) {\n\t\t\t\t\t\treturn diffedAnd;\n\t\t\t\t\t}\n\t\t\t\t\treturn diff;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn function(and1, and2) {\n\t\t\t\tvar inOrderDiffs = [\n\t\t\t\t\t\tset.difference(and1.values[0], and2.values[0]),\n\t\t\t\t\t\tset.difference(and1.values[1], and2.values[1])\n\t\t\t\t\t],\n\t\t\t\t\treverseOrderDiffs = [\n\t\t\t\t\t\tset.difference(and1.values[0], and2.values[1]),\n\t\t\t\t\t\tset.difference(and1.values[1], and2.values[0])\n\t\t\t\t\t];\n\n\t\t\t\tvar diff = getDiffIfPartnerIsEmptyAndOtherComboNotDisjoint(inOrderDiffs, reverseOrderDiffs, and1);\n\t\t\t\tif (diff) {\n\t\t\t\t\treturn diff;\n\t\t\t\t}\n\t\t\t\tdiff = getDiffIfPartnerIsEmptyAndOtherComboNotDisjoint(reverseOrderDiffs, inOrderDiffs, and1);\n\t\t\t\tif (diff) {\n\t\t\t\t\treturn diff;\n\t\t\t\t} else {\n\t\t\t\t\t// if one is a double And ... that's the outer \\\\ inner\n\t\t\t\t\tif (isAndOrOr(inOrderDiffs[0]) && isAndOrOr(inOrderDiffs[1])) {\n\t\t\t\t\t\treturn new is.Or([inOrderDiffs[0], inOrderDiffs[1]]);\n\t\t\t\t\t} else if ( isAndOrOr(reverseOrderDiffs[0]) && isAndOrOr(reverseOrderDiffs[1]) ) {\n\t\t\t\t\t\treturn new is.Or([reverseOrderDiffs[0], reverseOrderDiffs[1]]);\n\t\t\t\t\t}\n\t\t\t\t\treturn set.UNKNOWABLE;\n\t\t\t\t}\n\t\t\t};*/\n\t\t})()\n\t},\n\tAnd_Or: {\n\t\t// (a ∩ b) ∪ (c u d) where Z = (c u d)\n\t\t// -> Z u (a ∩ b)\n\t\t// -> (Z u a) ∩ (Z u b)\n\t\t// -> ((c u d) u a) ∩ ((c u d) u b)\n\t\tunion: function(and, or) {\n\t\t\tvar aUnion = set_1$1.union(and.values[0], or);\n\t\t\tvar bUnion = set_1$1.union(and.values[1], or);\n\n\t\t\tif (!isAndOrOr(aUnion) || !isAndOrOr(bUnion)) {\n\t\t\t\treturn set_1$1.intersection(aUnion, bUnion);\n\t\t\t}\n\n\t\t\treturn new is$1.Or([and, or]);\n\t\t},\n\t\t// (a ∩ b) ∩ (c u d) where Z = (a ∩ b)\n\t\t// -> Z ∩ (c u d)\n\t\t// -> (Z ∩ c) u (Z ∩ d)\n\t\t// -> (a ∩ b ∩ c) u (a ∩ b ∩ d)\n\t\tintersection: function(and, or) {\n\t\t\tvar aIntersection = set_1$1.intersection(and, or.values[0]);\n\t\t\tvar bIntersection = set_1$1.intersection(and, or.values[1]);\n\t\t\tif (!isOr(aIntersection) && !isOr(bIntersection)) {\n\t\t\t\treturn set_1$1.union(aIntersection, bIntersection);\n\t\t\t}\n\t\t\treturn new is$1.And([and, or]);\n\t\t},\n\t\t// (a ∩ b) \\ (c u d) where Z = (a ∩ b)\n\t\t// -> Z \\ (c u d)\n\t\t// -> (Z \\ c) ∩ (Z \\ d)\n\t\t// -> ((a ∩ b) \\ c) ∩ ((a ∩ b) \\ d)\n\t\tdifference: function(and, or) {\n\t\t\tvar aDiff = set_1$1.difference(and, or.values[0]);\n\t\t\tvar bDiff = set_1$1.difference(and, or.values[1]);\n\t\t\treturn set_1$1.intersection(aDiff, bDiff);\n\t\t}\n\t},\n\tOr_And: {\n\t\t// (a ∪ b) \\ (c ∩ d) where Z = (a ∪ b)\n\t\t// -> Z \\ (c ∩ d)\n\t\t// -> (Z \\ c) ∪ (Z \\ d)\n\t\t// -> ((a ∪ b) \\ c) ∪ ((a ∪ b) \\ d)\n\t\tdifference: function(or, and) {\n\t\t\tvar aDiff = set_1$1.difference(or, and.values[0]);\n\t\t\tvar bDiff = set_1$1.difference(or, and.values[1]);\n\t\t\treturn set_1$1.union(aDiff, bDiff);\n\t\t}\n\t},\n\tUNIVERSAL_And: {\n\t\tdifference: function(universe, and) {\n\t\t\tvar inverseFirst = set_1$1.difference(universe, and.values[0]),\n\t\t\t\tinverseSecond = set_1$1.difference(universe, and.values[1]);\n\t\t\treturn set_1$1.union(inverseFirst, inverseSecond);\n\t\t}\n\t},\n\tOr_Or: {\n\t\t// (a ∪ b) ∪ (c ∪ d)\n\t\tunion: function(or1, or2) {\n\t\t\tvar union1 = set_1$1.union(or1.values[0], or2.values[0]);\n\t\t\tvar union2 = set_1$1.union(or1.values[1], or2.values[1]);\n\n\t\t\tif (!isAndOrOr(union1) || !isAndOrOr(union2)) {\n\t\t\t\treturn set_1$1.union(union1, union2);\n\t\t\t}\n\t\t\tunion1 = set_1$1.union(or1.values[0], or2.values[1]);\n\t\t\tunion2 = set_1$1.union(or1.values[1], or2.values[0]);\n\n\t\t\tif (!isAndOrOr(union1) || !isAndOrOr(union2)) {\n\t\t\t\treturn set_1$1.union(union1, union2);\n\t\t\t} else {\n\t\t\t\treturn new is$1.Or([or1, or2]);\n\t\t\t}\n\t\t},\n\t\t// (a ∪ b) ∩ (c ∪ d) where Z = (a ∪ b)\n\t\t// -> Z ∩ (c ∪ d)\n\t\t// -> (Z ∩ c) ∪ (Z ∪ d)\n\t\t// -> ((a ∪ b) ∩ c) ∪ ((a ∪ b) ∩ d)\n\t\tintersection: function(or1, or2) {\n\t\t\tvar c = or2.values[0],\n\t\t\t\td = or2.values[1];\n\n\t\t\tvar intersection1 = set_1$1.intersection(or1, c);\n\t\t\tvar intersection2 = set_1$1.intersection(or1, d);\n\n\t\t\tif (!isOr(intersection1) || !isOr(intersection2)) {\n\t\t\t\treturn set_1$1.union(intersection1, intersection2);\n\t\t\t}\n\t\t\tintersection1 = set_1$1.union(or2, or1.values[0]);\n\t\t\tintersection2 = set_1$1.union(or2, or1.values[1]);\n\n\t\t\tif (!isOr(intersection1) || !isOr(intersection2)) {\n\t\t\t\treturn set_1$1.union(intersection1, intersection2);\n\t\t\t} else {\n\t\t\t\treturn new is$1.Or([or1, or2]);\n\t\t\t}\n\t\t},\n\t\t// (a ∪ b) \\ (c ∪ d) where Z = (a ∪ b)\n\t\t// -> Z \\ (c ∪ d)\n\t\t// -> (Z \\ c) ∩ (Z \\ d)\n\t\t// -> ((a ∪ b) \\ c) ∩ ((a ∪ b) \\ d)\n\t\tdifference: function(or1, or2) {\n\t\t\tvar d1 = set_1$1.difference(or1, or2.values[0]);\n\t\t\tvar d2 = set_1$1.difference(or1, or2.values[1]);\n\t\t\treturn set_1$1.intersection(d1, d2);\n\t\t}\n\t},\n\tUNIVERSAL_Or: {\n\t\tdifference: function(universe, or) {\n\t\t\tvar inverseFirst = set_1$1.difference(universe, or.values[0]),\n\t\t\t\tinverseSecond = set_1$1.difference(universe, or.values[1]);\n\t\t\treturn set_1$1.intersection(inverseFirst, inverseSecond);\n\t\t}\n\t}\n});\n\n// Registers all the comparisons above\nvar names = Object.keys(comparisons$1);\nnames.forEach(function(name1, i) {\n\tif (!comparators$1[name1 + \"_\" + name1]) {\n\t\tconsole.warn(\"no \" + name1 + \"_\" + name1);\n\t} else {\n\t\tset_1$1.defineComparison(comparisons$1[name1], comparisons$1[name1], comparators$1[name1 + \"_\" + name1]);\n\t}\n\n\tif (!comparators$1[\"UNIVERSAL_\" + name1]) {\n\t\tconsole.warn(\"no UNIVERSAL_\" + name1);\n\t} else {\n\t\tset_1$1.defineComparison(set_1$1.UNIVERSAL, comparisons$1[name1], comparators$1[\"UNIVERSAL_\" + name1]);\n\t}\n\n\tfor (var j = i + 1; j < names.length; j++) {\n\t\tvar name2 = names[j];\n\t\tif (!comparators$1[name1 + \"_\" + name2]) {\n\t\t\tconsole.warn(\"no \" + name1 + \"_\" + name2);\n\t\t} else {\n\t\t\tset_1$1.defineComparison(comparisons$1[name1], comparisons$1[name2], comparators$1[name1 + \"_\" + name2]);\n\t\t}\n\t\tif (!comparators$1[name2 + \"_\" + name1]) {\n\t\t\tconsole.warn(\"no \" + name2 + \"_\" + name1);\n\t\t} else {\n\t\t\tset_1$1.defineComparison(comparisons$1[name2], comparisons$1[name1], comparators$1[name2 + \"_\" + name1]);\n\t\t}\n\t}\n});\n\nvar comparisons_1$1 = comparisons$1;\n\n// THIS IS REALLY INTEGERS!!!\n\nvar makeRealNumberRangeInclusive = function(min, max) {\n\n\n\n\n    function RealNumberRangeInclusive(start, end){\n\n        this.start =  arguments.length > 0 ? +start : min;\n        this.end = arguments.length > 1 ? +end : max;\n\t\tthis.range = new comparisons_1$1.And([\n\t\t\tnew comparisons_1$1.GreaterThanEqual( this.start ),\n\t\t\tnew comparisons_1$1.LessThanEqual( this.end )\n\t\t]);\n    }\n\n\tvar universeRange = new RealNumberRangeInclusive( min , max );\n\n    function isUniversal(range) {\n        return set_1$1.isSubset(universeRange.range, range.range);\n    }\n\n\tfunction rangeFromAnd(aSet) {\n\t\tvar values = {};\n\t\taSet.values.forEach(function(value){\n\t\t\tif(value instanceof comparisons_1$1.GreaterThanEqual) {\n\t\t\t\tvalues.start = value.value;\n\t\t\t}\n\t\t\tif(value instanceof comparisons_1$1.GreaterThan) {\n\t\t\t\tvalues.start = value.value+1;\n\t\t\t}\n\t\t\tif(value instanceof comparisons_1$1.LessThanEqual) {\n\t\t\t\tvalues.end = value.value;\n\t\t\t}\n\t\t\tif(value instanceof comparisons_1$1.LessThan) {\n\t\t\t\tvalues.end = value.value-1;\n\t\t\t}\n\t\t});\n\t\tif(\"start\" in values && \"end\" in values) {\n\t\t\treturn new RealNumberRangeInclusive(values.start, values.end );\n\t\t}\n\t}\n\n\tfunction toRange(aSet) {\n\t\tvar range;\n\t\tif(aSet instanceof comparisons_1$1.And) {\n\t\t\trange = rangeFromAnd(aSet);\n\t\t}\n\t\tif(aSet instanceof comparisons_1$1.Or) {\n\t\t\t// check if next to each other ...\n\t\t\tvar first = rangeFromAnd(aSet.values[0]),\n\t\t\t\tsecond = rangeFromAnd(aSet.values[1]);\n\t\t\tif(first && second) {\n\t\t\t\tvar firstValues = first.range.values,\n\t\t\t\t\tsecondValues = second.range.values;\n\t\t\t\tif(firstValues[1].value + 1 === secondValues[0].value) {\n\t\t\t\t\trange = new RealNumberRangeInclusive(firstValues[0].value, secondValues[1].value );\n\t\t\t\t}\n\t\t\t\telse if(secondValues[1].value + 1 === firstValues[0].value) {\n\t\t\t\t\trange = new RealNumberRangeInclusive(secondValues[0].value, firstValues[1].value );\n\t\t\t\t} else {\n\t\t\t\t\treturn set_1$1.UNDEFINABLE;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn set_1$1.UNDEFINABLE;\n\t\t\t}\n\t\t}\n\t\tif(range && isUniversal(range)) {\n\t\t\treturn set_1$1.UNIVERSAL;\n\t\t} else {\n\t\t\treturn range;\n\t\t}\n\t}\n\n    function intersection(range1, range2){\n\t\tvar intersection = toRange(set_1$1.intersection(range1.range, range2.range));\n\t\tif(intersection) {\n\t\t\treturn intersection;\n\t\t} else {\n            return set_1$1.EMPTY;\n        }\n    }\n\n    function difference(range1, range2){\n\n\t\tvar difference = toRange( set_1$1.difference(range1.range, range2.range) );\n\t\tif(difference) {\n\t\t\treturn difference;\n\t\t} else {\n            return set_1$1.EMPTY;\n        }\n    }\n\n    set_1$1.defineComparison(RealNumberRangeInclusive, RealNumberRangeInclusive,{\n        union: function(range1, range2){\n\t\t\tvar union = toRange( set_1$1.union(range1.range, range2.range) );\n\t\t\tif(union) {\n\t\t\t\treturn union;\n\t\t\t} else {\n\t            return set_1$1.EMPTY;\n\t        }\n        },\n        intersection: intersection,\n        difference: difference\n    });\n\n    set_1$1.defineComparison(set_1$1.UNIVERSAL,RealNumberRangeInclusive, {\n        difference: function(universe, range){\n            if(isUniversal(range)) {\n                return set_1$1.EMPTY;\n            } else {\n                return difference(universeRange, range);\n            }\n        }\n    });\n\n    return RealNumberRangeInclusive;\n};\n\n// this is intended to be used for $or ... it\n// ors expected key values\n// `{age: 22}` U `{name: \"Justin\"}`\nfunction ValuesOr(values) {\n    // the if values can be unioned into a single value\n    this.values = values;\n}\n\nValuesOr.prototype.isMember = function(props){\n    return this.values.some(function(value){\n            return value && value.isMember ?\n                value.isMember( props ) : value === props;\n    });\n};\n\n\n// Or comparisons\nset_1$1.defineComparison(set_1$1.UNIVERSAL, ValuesOr,{\n    difference: function(){\n        return set_1$1.UNDEFINABLE;\n    }\n});\n\n\nvar valuesOr = types.ValuesOr = ValuesOr;\n\nfunction ValuesAnd(values) {\n\tthis.values = values;\n}\n\nValuesAnd.prototype.isMember = function(props) {\n\treturn this.values.every(function(value){\n            return value && value.isMember ?\n                value.isMember( props ) : value === props;\n    });\n};\n\n// Or comparisons\nset_1$1.defineComparison(set_1$1.UNIVERSAL, ValuesAnd, {\n    difference: function(){\n        return set_1$1.UNDEFINABLE;\n    }\n});\n\nvar valuesAnd = types.ValuesAnd = ValuesAnd;\n\n// Define the sub-types that BasicQuery will use\nfunction KeysAnd(values) {\n\tvar vals = this.values = {};\n\tcanReflect_1_19_2_canReflect.eachKey(values, function(value, key) {\n\t\tif (canReflect_1_19_2_canReflect.isPlainObject(value) && !set_1$1.isSpecial(value)) {\n\t\t\tvals[key] = new KeysAnd(value);\n\t\t} else {\n\t\t\tvals[key] = value;\n\t\t}\n\t});\n}\n\nvar isMemberSymbol$3 = canSymbol_1_7_0_canSymbol.for(\"can.isMember\");\n\n\nKeysAnd.prototype.isMember = function(props, root, rootKey) {\n\tvar equal = true;\n\tvar preKey = rootKey ? rootKey + \".\" : \"\";\n\tcanReflect_1_19_2_canReflect.eachKey(this.values, function(value, key) {\n\t\tvar isMember = value && (value[isMemberSymbol$3] || value.isMember);\n\t\tif (isMember) {\n\t\t\tif (!isMember.call(value, get_1(props, key), root || props, preKey + key)) {\n\t\t\t\tequal = false;\n\t\t\t}\n\t\t} else {\n\t\t\tif (value !== get_1(props, key)) {\n\t\t\t\tequal = false;\n\t\t\t}\n\t\t}\n\t});\n\treturn equal;\n};\n\n\n// ====== DEFINE COMPARISONS ========\n\n// Helpers ----------------------------\nfunction checkIfUniversalAndReturnUniversal(setA) {\n\treturn set_1$1.isEqual(setA, set_1$1.UNIVERSAL) ? set_1$1.UNIVERSAL : setA;\n}\n\nvar MISSING = {};\n\nfunction eachInUnique(a, acb, b, bcb, defaultReturn) {\n\tvar bCopy = canAssign_1_3_3_canAssign({}, b),\n\t\tres;\n\tfor (var prop in a) {\n\t\tres = acb(prop, a[prop], (prop in b) ? b[prop] : MISSING, a, b);\n\t\tif (res !== undefined) {\n\t\t\treturn res;\n\t\t}\n\t\tdelete bCopy[prop];\n\t}\n\tfor (prop in bCopy) {\n\t\tres = bcb(prop, MISSING, b[prop], a, b);\n\t\tif (res !== undefined) {\n\t\t\treturn res;\n\t\t}\n\t}\n\treturn defaultReturn;\n}\n\nfunction keyDiff(valuesA, valuesB) {\n\tvar keyResults = arrayUnionIntersectionDifference(\n\t\tObject.keys(valuesA),\n\t\tObject.keys(valuesB));\n\treturn {\n\t\taOnlyKeys: keyResults.difference,\n\t\taAndBKeys: keyResults.intersection,\n\t\tbOnlyKeys: arrayUnionIntersectionDifference(\n\t\t\tObject.keys(valuesB),\n\t\t\tObject.keys(valuesA)).difference\n\t};\n}\n\nfunction notEmpty(value) {\n\treturn value !== set_1$1.EMPTY;\n}\n\n// Difference of two ANDs is used two places\nfunction difference(objA, objB) {\n\n\tvar valuesA = objA.values,\n\t\tvaluesB = objB.values,\n\t\tdiff = keyDiff(valuesA, valuesB),\n\t\taOnlyKeys = diff.aOnlyKeys,\n\t\taAndBKeys = diff.aAndBKeys,\n\t\tbOnlyKeys = diff.bOnlyKeys;\n\n\t// check if all aAndB are equal\n\n\t// With the shared keys, perform vA \\ vB difference. If the DIFFERENCE is:\n\t// - EMPTY: vA has nothing outside vB. vA is equal or subset of vB.\n\t//   - IF sB has keys not in sA, the shared keys will be part of the result;\n\t//     OTHERWISE, if all empty, sA is subset of sB, EMPTY will be returned\n\t//                (even if sA has some extra own keys)\n\t// - NON-EMPTY: something in sA that is not in sB\n\t//   Now we need to figure out if it's \"product-able\" or not.\n\t//   Product-able -> some part of B is in A.\n\t//   Perform B ∩ A intersection.  INTERSECTION is:\n\t//   - EMPTY: NOT \"product-able\". DISJOINT.  Must return something.\n\t//   - non-EMPTY: Use to performa  product (in the future.)\n\tvar sharedKeysAndValues = {},\n\t\tproductAbleKeysAndData = {},\n\t\tdisjointKeysAndValues = {};\n\taAndBKeys.forEach(function(key) {\n\t\tvar difference = set_1$1.difference(valuesA[key], valuesB[key]);\n\t\tif (difference === set_1$1.EMPTY) {\n\t\t\tsharedKeysAndValues[key] = valuesA[key];\n\t\t} else {\n\t\t\tvar intersection = set_1$1.intersection(valuesA[key], valuesB[key]);\n\t\t\tvar isProductable = intersection !== set_1$1.EMPTY;\n\t\t\tif (isProductable) {\n\t\t\t\tproductAbleKeysAndData[key] = {\n\t\t\t\t\t// Products with `difference U intersection` would be subtracted\n\t\t\t\t\t// from produts with `intersection`\n\t\t\t\t\tdifference: difference,\n\t\t\t\t\tintersection: intersection\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\tdisjointKeysAndValues[key] = valuesA[key];\n\t\t\t}\n\t\t}\n\t});\n\tvar productAbleKeys = Object.keys(productAbleKeysAndData);\n\tvar singleProductKeyAndValue;\n\tif (productAbleKeys.length === 1) {\n\t\tsingleProductKeyAndValue = {};\n\t\tsingleProductKeyAndValue[productAbleKeys[0]] = productAbleKeysAndData[productAbleKeys[0]].difference;\n\t}\n\n\t// Now that we've got the shared keys organized\n\t// we can make decisions based on this information\n\t// and A-only and B-only keys.\n\n\t// if we have any disjoint keys, these sets can not intersect\n\t// {age: 21, ...} \\ {age: 22, ...} ->  {age: 21, ...}\n\tif (Object.keys(disjointKeysAndValues).length) {\n\t\treturn objA;\n\t}\n\n\t// contain all the same keys\n\tif ((aOnlyKeys.length === 0) && (bOnlyKeys.length === 0)) {\n\t\tif (productAbleKeys.length > 1) {\n\t\t\treturn set_1$1.UNDEFINABLE;\n\t\t}\n\t\t// {color: [RED, GREEN], ...X...} \\ {color: [RED], ...X...} -> {color: [GREEN], ...X...}\n\t\telse if (productAbleKeys.length === 1) {\n\t\t\tcanAssign_1_3_3_canAssign(sharedKeysAndValues, singleProductKeyAndValue);\n\t\t\treturn new KeysAnd(sharedKeysAndValues);\n\t\t} else {\n\t\t\t// {...X...} \\ {...X...} -> EMPTY\n\t\t\treturn set_1$1.EMPTY;\n\t\t}\n\t}\n\t// sA is likely a subset of sB\n\tif (aOnlyKeys.length > 0 && bOnlyKeys.length === 0) {\n\t\tif (productAbleKeys.length > 1) {\n\t\t\treturn set_1$1.UNDEFINABLE;\n\t\t}\n\t\t// {age: 35, color: [RED, GREEN], ...X...} \\ {color: [RED], ...X...} -> {age: 35, color: [GREEN], ...X...}\n\t\telse if (productAbleKeys.length === 1) {\n\t\t\tcanAssign_1_3_3_canAssign(sharedKeysAndValues, singleProductKeyAndValue);\n\t\t\taOnlyKeys.forEach(function(key) {\n\t\t\t\tsharedKeysAndValues[key] = valuesA[key];\n\t\t\t});\n\t\t\treturn new KeysAnd(sharedKeysAndValues);\n\t\t} else {\n\t\t\t// sharedKeysAndValues\n\t\t\treturn set_1$1.EMPTY;\n\t\t}\n\t}\n\t// sB is likely subset of sA\n\t// {}, {foo: \"bar\"} -> {foo: NOT(\"bar\")}\n\tif (aOnlyKeys.length === 0 && bOnlyKeys.length > 0) {\n\t\t// Lets not figure out productAbleKeys right now.\n\t\t// Example:\n\t\t// {color: [RED, GREEN], ...X...}\n\t\t// \\ {age: 35, color: [RED], ...X...}\n\t\t// = OR( {color: [GREEN], ...X...}, {age: NOT(35), color: [RED], ...X...} )\n\t\tif (productAbleKeys.length > 1) {\n\t\t\treturn set_1$1.UNDEFINABLE;\n\t\t}\n\t\tvar productAbleOr;\n\t\tif (productAbleKeys.length === 1) {\n\t\t\t// we add the intersection to the AND\n\t\t\t// the difference is the or\n\t\t\tvar productableKey = productAbleKeys[0];\n\t\t\tproductAbleOr = canAssign_1_3_3_canAssign({}, sharedKeysAndValues);\n\t\t\tproductAbleOr[productableKey] = productAbleKeysAndData[productableKey].difference;\n\t\t\tsharedKeysAndValues[productableKey] = productAbleKeysAndData[productableKey].intersection;\n\t\t}\n\n\t\tvar ands = bOnlyKeys.map(function(key) {\n\t\t\tvar shared = canAssign_1_3_3_canAssign({}, sharedKeysAndValues);\n\t\t\tvar result = shared[key] = set_1$1.difference(set_1$1.UNIVERSAL, valuesB[key]);\n\t\t\treturn result === set_1$1.EMPTY ? result : new KeysAnd(shared);\n\t\t}).filter(notEmpty);\n\n\t\tif (productAbleOr) {\n\t\t\tands.push(new KeysAnd(productAbleOr));\n\t\t}\n\n\t\t// {c: \"g\"}\n\t\t// \\ {c: \"g\", age: 22, name: \"justin\"}\n\t\t// = OR[ AND(name: NOT(\"justin\"), c:\"g\"), AND(age: NOT(22), c: \"g\") ]\n\t\tif (ands.length > 1) {\n\t\t\treturn new types.ValuesOr(ands);\n\t\t} else if (ands.length === 1) {\n\t\t\t// {c: \"g\"}\n\t\t\t// \\ {c: \"g\", age: 22}\n\t\t\t// = AND(age: NOT(22), c: \"g\")\n\t\t\treturn ands[0];\n\t\t} else {\n\t\t\treturn set_1$1.EMPTY;\n\t\t}\n\t}\n\n\t// {name: \"Justin\"} \\\\ {age: 35} -> {name: \"Justin\", age: NOT(35)}\n\tif (aOnlyKeys.length > 0 && bOnlyKeys.length > 0) {\n\t\tif (productAbleKeys.length) {\n\t\t\tthrow new Error(\"Can't handle any productable keys right now\");\n\t\t}\n\t\t// add everything in sA into the result:\n\t\taOnlyKeys.forEach(function(key) {\n\t\t\tsharedKeysAndValues[key] = valuesA[key];\n\t\t});\n\n\t\tif (bOnlyKeys.length === 1) {\n\t\t\t// TODO: de-duplicate below\n\t\t\tvar key = bOnlyKeys[0];\n\t\t\tvar shared = canAssign_1_3_3_canAssign({}, sharedKeysAndValues);\n\t\t\tshared[key] = set_1$1.difference(set_1$1.UNIVERSAL, valuesB[key]);\n\t\t\treturn new KeysAnd(shared);\n\t\t}\n\t\t// {foo: \"bar\"} \\\\ {name: \"Justin\", age: 35} -> UNDEFINABLE\n\t\telse {\n\t\t\treturn set_1$1.UNDEFINABLE;\n\t\t}\n\n\t}\n}\n\n// KeysAnd comaprisons\n\n\n\n\nset_1$1.defineComparison(KeysAnd, KeysAnd, {\n\t// {name: \"Justin\"} or {age: 35} -> new OR[{name: \"Justin\"},{age: 35}]\n\t// {age: 2} or {age: 3} -> {age: new OR[2,3]}\n\t// {age: 3, name: \"Justin\"} OR {age: 4} -> {age: 3, name: \"Justin\"} OR {age: 4}\n\tunion: function(objA, objB) {\n\t\t// first see if we can union a single property\n\t\t// {age: 21, color: [\"R\"]} U {age: 21, color: [\"B\"]} -> {age: 21, color: [\"R\",\"B\"]}\n\n\t\tvar diff = keyDiff(objA.values, objB.values);\n\n\n\t\t// find the different keys\n\t\tvar aAndBKeysThatAreNotEqual = [],\n\t\t\tsameKeys = {};\n\n\t\tdiff.aAndBKeys.forEach(function(key) {\n\t\t\tif (!set_1$1.isEqual(objA.values[key], objB.values[key])) {\n\t\t\t\taAndBKeysThatAreNotEqual.push(key);\n\t\t\t} else {\n\t\t\t\tsameKeys[key] = objA.values[key];\n\t\t\t}\n\t\t});\n\t\tvar aUnequal = {}, bUnequal = {};\n\t\taAndBKeysThatAreNotEqual.forEach(function(key){\n\t\t\taUnequal[key] = objA.values[key];\n\t\t\tbUnequal[key] = objB.values[key];\n\t\t});\n\n\t\t// if all keys are shared\n\t\tif (!diff.aOnlyKeys.length && !diff.bOnlyKeys.length) {\n\n\t\t\tif (aAndBKeysThatAreNotEqual.length === 1) {\n\t\t\t\tvar keyValue = aAndBKeysThatAreNotEqual[0];\n\n\t\t\t\tvar result = sameKeys[keyValue] = set_1$1.union(objA.values[keyValue], objB.values[keyValue]);\n\n\t\t\t\t// if there is only one property, we can just return the universal set\n\t\t\t\treturn canReflect_1_19_2_canReflect.size(sameKeys) === 1 && set_1$1.isEqual(result, set_1$1.UNIVERSAL) ?\n\t\t\t\t\tset_1$1.UNIVERSAL : new KeysAnd(sameKeys);\n\t\t\t} else if (aAndBKeysThatAreNotEqual.length === 0) {\n\t\t\t\t// these things are equal\n\t\t\t\treturn objA;\n\t\t\t}\n\t\t}\n\t\t// If everything shared is the same\n\t\tif (aAndBKeysThatAreNotEqual.length === 0) {\n\t\t\t// the set with the extra keys is a subset\n\t\t\tif (diff.aOnlyKeys.length > 0 && diff.bOnlyKeys.length === 0) {\n\t\t\t\treturn checkIfUniversalAndReturnUniversal(objB);\n\t\t\t} else if (diff.aOnlyKeys.length === 0 && diff.bOnlyKeys.length > 0) {\n\t\t\t\treturn checkIfUniversalAndReturnUniversal(objA);\n\t\t\t}\n\t\t}\n\t\t// (count > 5 && age > 25 ) || (count > 7 && age > 35 && name > \"Justin\" )\n\t\t//\n\t\t// ( age > 25 ) || ( name > \"Justin\" && age > 35)  A U (B & C) => (A U B) & (A U C)\n\t\t// ( age > 25 || name > \"Justin\" ) && (age > 25)\n\t\t// lets see if one side is different\n\t\tif (diff.aOnlyKeys.length > 0 && diff.bOnlyKeys.length === 0) {\n\t\t\t// collect shared value\n\t\t\tif( set_1$1.isSubset(new KeysAnd(aUnequal), new KeysAnd(bUnequal) )) {\n\t\t\t\treturn objB;\n\t\t\t}\n\t\t}\n\t\tif (diff.bOnlyKeys.length > 0 && diff.aOnlyKeys.length === 0) {\n\t\t\t// collect shared value\n\t\t\tif( set_1$1.isSubset(new KeysAnd(bUnequal),  new KeysAnd(aUnequal) )) {\n\t\t\t\treturn objA;\n\t\t\t}\n\t\t}\n\n\t\treturn new types.ValuesOr([objA, objB]);\n\t},\n\t// {foo: zed, abc: d}\n\tintersection: function(objA, objB) {\n\t\t// combine all properties ... if the same property, try to take\n\t\t// an intersection ... if an intersection isn't possible ... freak out?\n\t\tvar valuesA = objA.values,\n\t\t\tvaluesB = objB.values,\n\t\t\tfoundEmpty = false;\n\t\tvar resultValues = {};\n\t\teachInUnique(valuesA,\n\t\t\tfunction(prop, aVal, bVal) {\n\t\t\t\tresultValues[prop] = bVal === MISSING ? aVal : set_1$1.intersection(aVal, bVal);\n\t\t\t\tif (resultValues[prop] === set_1$1.EMPTY) {\n\t\t\t\t\tfoundEmpty = true;\n\t\t\t\t}\n\t\t\t},\n\t\t\tvaluesB,\n\t\t\tfunction(prop, aVal, bVal) {\n\t\t\t\tresultValues[prop] = bVal;\n\t\t\t\tif (resultValues[prop] === set_1$1.EMPTY) {\n\t\t\t\t\tfoundEmpty = true;\n\t\t\t\t}\n\t\t\t});\n\t\tif (foundEmpty) {\n\t\t\treturn set_1$1.EMPTY;\n\t\t} else {\n\t\t\treturn new KeysAnd(resultValues);\n\t\t}\n\n\t},\n\t// A \\ B -> what's in A, but not in B\n\tdifference: difference\n});\n\nset_1$1.defineComparison(set_1$1.UNIVERSAL, KeysAnd, {\n\t// A \\ B -> what's in A, but not in B\n\tdifference: function(universe, and) {\n\t\treturn difference({\n\t\t\tvalues: {}\n\t\t}, and);\n\t}\n});\n\n\nvar keysAnd = types.KeysAnd = KeysAnd;\n\nvar andOrNot = {\n    KeysAnd: keysAnd,\n    ValuesOr: valuesOr,\n    ValuesNot: valuesNot,\n\tValuesAnd: valuesAnd\n};\n\n// mongo puts these first https://docs.mongodb.com/manual/reference/bson-type-comparison-order/#bson-types-comparison-order\nvar typeNumber = {\"undefined\": 0, \"null\": 1, \"number\": 3, \"string\": 4, \"object\": 5, \"boolean\": 6};\nvar getTypeNumber = function(obj) {\n\tvar type = typeof obj;\n\tif(obj === null) {\n\t\ttype = \"null\";\n\t}\n\treturn typeNumber[type];\n};\n\nvar typeCompare = {\n\t$gt: function(valueA, valueB) {\n\t\treturn getTypeNumber(valueA) > getTypeNumber(valueB);\n\t},\n\t$lt: function(valueA, valueB) {\n\t\treturn getTypeNumber(valueA) < getTypeNumber(valueB);\n\t}\n};\n\nvar defaultCompare = {\n\t$gt: function(valueA, valueB) {\n\t\tif(valueA == null || valueB == null) {\n\t\t\treturn typeCompare.$gt(valueA, valueB);\n\t\t}\n\t\treturn valueA > valueB;\n\t},\n\t$lt: function(valueA, valueB) {\n\t\tif(valueA == null || valueB == null) {\n\t\t\treturn typeCompare.$gt(valueA, valueB);\n\t\t}\n\t\treturn valueA < valueB;\n\t}\n};\n\nvar helpers$3 = {\n\n\t// given two arrays of items, combines and only returns the unique ones\n\tuniqueConcat: function(itemsA, itemsB, getId) {\n\t\tvar ids = new Set();\n\t\treturn itemsA.concat(itemsB).filter(function(item) {\n\t\t\tvar id = getId(item);\n\t\t\tif (!ids.has(id)) {\n\t\t\t\tids.add(id);\n\t\t\t\treturn true;\n\t\t\t} else {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t});\n\t},\n\t// Get the index of an item by it's identity\n\t// Starting from the middle of the items\n\t// return the index of match in the right direction\n\t// or in the left direction\n\t// otherwise return the last index\n\t// see getIdentityIndexByDirection\n\tgetIdentityIndex: function(compare, items, props, startIndex, schema) {\n\t\tvar identity = canReflect_1_19_2_canReflect.getIdentity(props, schema),\n\t\t\tstarterItem = items[startIndex];\n\t\t// check if the middle has a match\n\t\tif (compare(props, starterItem) === 0) {\n\t\t\tif (identity === canReflect_1_19_2_canReflect.getIdentity(starterItem, schema)) {\n\t\t\t\treturn startIndex;\n\t\t\t}\n\t\t}\n\t\t\n\t\tvar rightResult = this.getIdentityIndexByDirection(compare, items, props, startIndex+1, 1, schema),\n\t\t\tleftResult;\n\t\tif(rightResult.index) {\n\t\t\treturn rightResult.index;\n\t\t} else {\n\t\t\tleftResult = this.getIdentityIndexByDirection(compare, items, props, startIndex-1, -1, schema);\n\t\t}\n\t\tif(leftResult.index !== undefined) {\n\t\t\treturn leftResult.index;\n\t\t}\n\t\t// put at the last index item that doesn't match an identity\n\t\treturn rightResult.lastIndex;\n\t},\n\t// Get the index of an item by it's identity\n\t// for a given direction (right or left)\n\t// 1 for right\n\t// -1 for left\n\tgetIdentityIndexByDirection: function(compare, items, props, startIndex, direction, schema) {\n\t\tvar currentIndex = startIndex;\n\t\tvar identity = canReflect_1_19_2_canReflect.getIdentity(props, schema);\n\t\twhile(currentIndex >= 0 && currentIndex < items.length) {\n\t\t\tvar currentItem = items[currentIndex];\n\t\t\tvar computed = compare(props, currentItem);\n\t\t\tif(computed === 0) {\n\t\t\t\tif( identity === canReflect_1_19_2_canReflect.getIdentity(currentItem, schema)) {\n\t\t\t\t\treturn {index: currentIndex};\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn {lastIndex: currentIndex - direction};\n\t\t\t}\n\t\t\tcurrentIndex = currentIndex + direction;\n\t\t}\n\t\treturn {lastIndex: currentIndex - direction};\n\t},\n\t//\n\tgetIndex: function(compare, items, props, schema) {\n\t\tif(!items){\n\t\t\treturn undefined;\n\t\t}\n\t\tif (items.length === 0) {\n\t\t\treturn 0;\n\t\t}\n\t\t// check the start and the end\n\t\tif (compare(props, items[0]) === -1) {\n\t\t\treturn 0;\n\t\t} else if (compare(props, items[items.length - 1]) === 1) {\n\t\t\treturn items.length;\n\t\t}\n\n\t\tvar low = 0,\n\t\t\thigh = items.length;\n\n\t\t// From lodash lodash 4.6.1 <https://lodash.com/>\n\t\t// Copyright 2012-2016 The Dojo Foundation <http://dojofoundation.org/>\n\t\twhile (low < high) {\n\t\t\tvar mid = (low + high) >>> 1,\n\t\t\t\titem = items[mid],\n\t\t\t\tcomputed = compare(props, item);\n\t\t\tif (computed === 0) {\n\t\t\t\treturn this.getIdentityIndex(compare, items, props, mid, schema);\n\t\t\t} else if (computed === -1) {\n\t\t\t\thigh = mid;\n\t\t\t} else {\n\t\t\t\tlow = mid + 1;\n\t\t\t}\n\t\t}\n\t\treturn high;\n\t\t// bisect by calling sortFunc\n\t},\n\tsortData: function(sortPropValue) {\n\t\tif (sortPropValue[0] === \"-\") {\n\t\t\treturn {\n\t\t\t\tprop: sortPropValue.slice(1),\n\t\t\t\tdesc: true\n\t\t\t};\n\t\t} else {\n\t\t\treturn {\n\t\t\t\tprop: sortPropValue,\n\t\t\t\tdesc: false\n\t\t\t};\n\t\t}\n\t},\n\tdefaultCompare: defaultCompare,\n\ttypeCompare: typeCompare,\n\tsorter: function(sortPropValue, sorters) {\n\t\tvar data = helpers$3.sortData(sortPropValue);\n\t\tvar compare;\n\t\tif (sorters && sorters[data.prop]) {\n\t\t\tcompare = sorters[data.prop];\n\t\t} else {\n\t\t\tcompare = defaultCompare;\n\t\t}\n\t\treturn function(item1, item2) {\n\t\t\tvar item1Value = canReflect_1_19_2_canReflect.getKeyValue(item1, data.prop);\n\t\t\tvar item2Value = canReflect_1_19_2_canReflect.getKeyValue(item2, data.prop);\n\t\t\tvar temp;\n\n\t\t\tif (data.desc) {\n\t\t\t\ttemp = item1Value;\n\t\t\t\titem1Value = item2Value;\n\t\t\t\titem2Value = temp;\n\t\t\t}\n\n\t\t\tif (compare.$lt(item1Value, item2Value)) {\n\t\t\t\treturn -1;\n\t\t\t}\n\n\t\t\tif (compare.$gt(item1Value, item2Value)) {\n\t\t\t\treturn 1;\n\t\t\t}\n\n\t\t\treturn 0;\n\t\t};\n\t},\n\tvalueHydrator: function(value) {\n\t\tif (canReflect_1_19_2_canReflect.isBuiltIn(value)) {\n\t\t\treturn value;\n\t\t} else {\n\t\t\tthrow new Error(\"can-query-logic doesn't support comparison operator: \" + JSON.stringify(value));\n\t\t}\n\t}\n};\nvar helpers_1$3 = helpers$3;\n\n// TYPES FOR FILTERING\nvar KeysAnd$1 = andOrNot.KeysAnd,\n\tOr = andOrNot.ValuesOr,\n\tNot = andOrNot.ValuesNot,\n\tAnd = andOrNot.ValuesAnd;\n\n// TYPES FOR PAGINATION\nvar RecordRange = makeRealNumberRangeInclusive(0, Infinity);\n\n\n// ## makeSort\n// Takes:\n// - `schemaKeys` - a schema\n// - `hydrateAndValue` - Useful to create something like `new GreaterThan( new MaybeDate(\"10-20-82\") )`\n//\n// Makes a `new Sort(key)` constructor function. This constructor function is used like:\n//\n// ```\n// new Sort(\"dueDate\")\n// ```\n//\n// That constructor function has all the comparison methods (union, intersection, difference)\n// built to compare against the `key` value.\n//\n// Instances of `Sort` have a `compare` method that will\n// return a function that can be passed to `Array.prototype.sort`.\n//\n// That compare function will read the right property and return `-1` or `1`\n\n// WILL MAKE A TYPE FOR SORTING\nfunction makeSort(schema, hydrateAndValue) {\n\tvar schemaKeys = schema.keys;\n\t// Makes gt and lt functions that `helpers.sorter` can use\n\t// to make a `compare` function for `Array.sort(compare)`.`\n\tvar sorters = {};\n\tcanReflect_1_19_2_canReflect.eachKey(schemaKeys, function(schemaProp, key) {\n\n\t\tsorters[key] = {\n\t\t\t// valueA is GT valueB\n\t\t\t$gt: function(valueA, valueB) {\n\t\t\t\t// handle sorting with null / undefined values\n\t\t\t\tif(valueA == null || valueB == null) {\n\t\t\t\t\treturn helpers_1$3.typeCompare.$gt(valueA, valueB);\n\t\t\t\t}\n\t\t\t\t// The following can certainly be done faster\n\t\t\t\tvar $gt = hydrateAndValue({\n\t\t\t\t\t\t$gt: valueB\n\t\t\t\t\t}, key, schemaProp,\n\t\t\t\t\thelpers_1$3.valueHydrator);\n\n\t\t\t\tvar $eq = hydrateAndValue({\n\t\t\t\t\t\t$eq: valueA\n\t\t\t\t\t}, key, schemaProp,\n\t\t\t\t\thelpers_1$3.valueHydrator);\n\n\t\t\t\treturn set_1$1.isEqual( set_1$1.union($gt, $eq), $gt );\n\t\t\t\t/*\n\t\t\t\tvar hydratedIn =  hydrateAndValue({\n\t\t\t\t\t\t$eq: valueA\n\t\t\t\t\t}, key, schemaProp,\n\t\t\t\t\thelpers.valueHydrator);\n\t\t\t\treturn $gt[require(\"can-symbol\").for(\"can.isMember\")](hydratedIn.values[0]);*/\n\t\t\t},\n\t\t\t$lt: function(valueA, valueB) {\n\t\t\t\tif(valueA == null || valueB == null) {\n\t\t\t\t\treturn helpers_1$3.typeCompare.$lt(valueA, valueB);\n\t\t\t\t}\n\n\n\t\t\t\tvar $lt = hydrateAndValue({\n\t\t\t\t\t\t$lt: valueB\n\t\t\t\t\t}, key, schemaProp,\n\t\t\t\t\thelpers_1$3.valueHydrator);\n\n\t\t\t\tvar $eq = hydrateAndValue({\n\t\t\t\t\t\t$eq: valueA\n\t\t\t\t\t}, key, schemaProp,\n\t\t\t\t\thelpers_1$3.valueHydrator);\n\n\t\t\t\treturn set_1$1.isEqual( set_1$1.union($lt, $eq), $lt );\n\t\t\t\t/*\n\t\t\t\t// This doesn't work because it will try to create new SetType(new In([]))\n\t\t\t\tvar hydratedValue =  hydrateAndValue({\n\t\t\t\t\t\t$eq: valueA\n\t\t\t\t\t}, key, schemaProp,\n\t\t\t\t\thelpers.valueHydrator);\n\t\t\t\treturn $lt[require(\"can-symbol\").for(\"can.isMember\")](hydratedValue);*/\n\n\t\t\t\t/*\n\t\t\t\t// This doesn't work because of maybe types.\n\t\t\t\tvar hydratedIn =  hydrateAndValue({\n\t\t\t\t\t\t$eq: valueA\n\t\t\t\t\t}, key, schemaProp,\n\t\t\t\t\thelpers.valueHydrator);\n\t\t\t\treturn $lt[require(\"can-symbol\").for(\"can.isMember\")](hydratedIn.values[0]); */\n\t\t\t}\n\t\t};\n\t});\n\n\tfunction Sort(key) {\n\t\tthis.key = key;\n\t\tthis.schema = schema;\n\t\tthis.compare = helpers_1$3.sorter(key, sorters);\n\t}\n\n\tfunction identityIntersection(v1, v2) {\n\t\treturn v1.key === v2.key ? v1 : set_1$1.EMPTY;\n\t}\n\n\tfunction identityDifference(v1, v2) {\n\t\treturn v1.key === v2.key ? set_1$1.EMPTY : v1;\n\t}\n\n\tfunction identityUnion(v1, v2) {\n\t\treturn v1.key === v2.key ? v1 : set_1$1.UNDEFINABLE;\n\t}\n\tset_1$1.defineComparison(Sort, Sort, {\n\t\tintersection: identityIntersection,\n\t\tdifference: identityDifference,\n\t\tunion: identityUnion\n\t});\n\treturn Sort;\n}\n\nvar DefaultSort = makeSort({ keys: {}, identity: [\"id\"] });\n\n\n// Define the BasicQuery type\nfunction BasicQuery(query) {\n\tcanAssign_1_3_3_canAssign(this, query);\n\tif (!this.filter) {\n\t\tthis.filter = set_1$1.UNIVERSAL;\n\t}\n\tif (!this.page) {\n\t\tthis.page = new RecordRange();\n\t}\n\tif (!this.sort) {\n\t\tthis.sort = \"id\";\n\t}\n\tif (typeof this.sort === \"string\") {\n\t\tthis.sort = new DefaultSort(this.sort);\n\t}\n}\n\n// BasicQuery's static properties\nBasicQuery.KeysAnd = KeysAnd$1;\nBasicQuery.Or = Or;\nBasicQuery.Not = Not;\nBasicQuery.And = And;\nBasicQuery.RecordRange = RecordRange;\nBasicQuery.makeSort = makeSort;\n\n// BasicQuery's prototype methods.\n// These are \"additional\" features beyond what `set` provides.\n// These typically pertain to actual data results of a query.\ncanReflect_1_19_2_canReflect.assignMap(BasicQuery.prototype, {\n\tcount: function() {\n\t\treturn this.page.end - this.page.start + 1;\n\t},\n\tsortData: function(data) {\n\t\treturn data.slice(0).sort(this.sort.compare);\n\t},\n\tfilterMembersAndGetCount: function(bData, parentQuery) {\n\t\tvar parentIsUniversal;\n\t\tif (parentQuery) {\n\t\t\tparentIsUniversal = set_1$1.isEqual(parentQuery.page, set_1$1.UNIVERSAL);\n\t\t\tif ((parentIsUniversal &&\n\t\t\t\t!set_1$1.isEqual(parentQuery.filter, set_1$1.UNIVERSAL)) &&\n\t\t\t\t!set_1$1.isSubset(this, parentQuery)) {\n\t\t\t\tthrow new Error(\"can-query-logic: Unable to get members from a set that is not a superset of the current set.\");\n\t\t\t}\n\t\t} else {\n\t\t\tparentQuery = new BasicQuery();\n\t\t}\n\n\t\t// reduce response to items in data that meet where criteria\n\t\tvar aData = bData.filter(function(data) {\n\t\t\treturn this.filter.isMember(data);\n\t\t}, this);\n\n\t\tvar count = aData.length;\n\n\t\t// sort the data if needed\n\t\tif (count && (this.sort.key !== parentQuery.sort.key)) {\n\t\t\taData = this.sortData(aData);\n\t\t}\n\n\t\tvar thisIsUniversal = set_1$1.isEqual(this.page, set_1$1.UNIVERSAL);\n\t\tif(parentIsUniversal == null) {\n\t\t\tparentIsUniversal = set_1$1.isEqual(parentQuery.page, set_1$1.UNIVERSAL);\n\t\t}\n\n\t\tif (parentIsUniversal) {\n\t\t\tif (thisIsUniversal) {\n\t\t\t\treturn {\n\t\t\t\t\tdata: aData,\n\t\t\t\t\tcount: count\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\treturn {\n\t\t\t\t\tdata: aData.slice(this.page.start, this.page.end + 1),\n\t\t\t\t\tcount: count\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t\t// everything but range is equal\n\t\telse if (this.sort.key === parentQuery.sort.key && set_1$1.isEqual(parentQuery.filter, this.filter)) {\n\t\t\treturn {\n\t\t\t\tdata: aData.slice(this.page.start - parentQuery.page.start, this.page.end - parentQuery.page.start + 1),\n\t\t\t\tcount: count\n\t\t\t};\n\t\t} else {\n\t\t\t// parent starts at something ...\n\t\t\tthrow new Error(\"can-query-logic: Unable to get members from the parent set for this subset.\");\n\t\t}\n\t},\n\tfilterFrom: function(bData, parentQuery) {\n\t\treturn this.filterMembersAndGetCount(bData, parentQuery).data;\n\t},\n\tmerge: function(b, aItems, bItems, getId) {\n\t\tvar union = set_1$1.union(this, b);\n\n\t\tif (union === set_1$1.UNDEFINABLE) {\n\t\t\treturn undefined;\n\t\t} else {\n\t\t\tvar combined = helpers_1$3.uniqueConcat(aItems, bItems, getId);\n\t\t\treturn union.sortData(combined);\n\t\t}\n\t},\n\tindex: function(props, items) {\n\t\t// make sure we have the property\n\t\tvar data = helpers_1$3.sortData(this.sort.key);\n\t\tif (!canReflect_1_19_2_canReflect.hasOwnKey(props, data.prop)) {\n\t\t\treturn undefined;\n\t\t}\n\t\t// use the passed sort's compare function\n\t\treturn helpers_1$3.getIndex(this.sort.compare, items, props, this.sort.schema);\n\t},\n\tisMember: function(props) {\n\t\t// Use the AND type for it's isMember method\n\t\treturn this.filter.isMember(props);\n\t},\n\tremovePagination: function() {\n\t\tthis.page = new RecordRange();\n\t}\n});\n\n// Helpers used for the `set` comparators\nvar CLAUSE_TYPES = [\"filter\", \"page\", \"sort\"];\n\nfunction getDifferentClauseTypes(queryA, queryB) {\n\tvar differentTypes = [];\n\n\tCLAUSE_TYPES.forEach(function(clause) {\n\t\tif (!set_1$1.isEqual(queryA[clause], queryB[clause])) {\n\t\t\tdifferentTypes.push(clause);\n\t\t}\n\t});\n\n\treturn differentTypes;\n}\n\nfunction isSubset(subLetter, superLetter, meta) {\n\tif (meta[subLetter + \"FilterIsSubset\"]) {\n\t\tif (meta[superLetter + \"PageIsUniversal\"]) {\n\t\t\treturn true;\n\t\t} else {\n\t\t\treturn meta[subLetter + \"PageIsSubset\"] && meta.sortIsEqual;\n\t\t}\n\t} else {\n\t\treturn false;\n\t}\n}\n\n// This type contains a bunch of lazy getters that\n// cache their value after being read.\n// This helps performance.\nfunction MetaInformation(queryA, queryB) {\n\tthis.queryA = queryA;\n\tthis.queryB = queryB;\n}\n\ncanReflect_1_19_2_canReflect.eachKey({\n\t\"pageIsEqual\": function() {\n\t\treturn set_1$1.isEqual(this.queryA.page, this.queryB.page);\n\t},\n\t\"aPageIsUniversal\": function() {\n\t\treturn set_1$1.isEqual(this.queryA.page, set_1$1.UNIVERSAL);\n\t},\n\t\"bPageIsUniversal\": function() {\n\t\treturn set_1$1.isEqual(this.queryB.page, set_1$1.UNIVERSAL);\n\t},\n\t\"pagesAreUniversal\": function() {\n\t\treturn this.pageIsEqual && this.aPageIsUniversal;\n\t},\n\t\"sortIsEqual\": function() {\n\t\treturn this.queryA.sort.key === this.queryB.sort.key;\n\t},\n\t\"aFilterIsSubset\": function() {\n\t\treturn set_1$1.isSubset(this.queryA.filter, this.queryB.filter);\n\t},\n\t\"bFilterIsSubset\": function() {\n\t\treturn set_1$1.isSubset(this.queryB.filter, this.queryA.filter);\n\t},\n\t\"aPageIsSubset\": function() {\n\t\treturn set_1$1.isSubset(this.queryA.page, this.queryB.page);\n\t},\n\t\"bPageIsSubset\": function() {\n\t\treturn set_1$1.isSubset(this.queryB.page, this.queryA.page);\n\t},\n\t\"filterIsEqual\": function() {\n\t\treturn set_1$1.isEqual(this.queryA.filter, this.queryB.filter);\n\t},\n\t\"aIsSubset\": function() {\n\t\treturn isSubset(\"a\", \"b\", this);\n\t},\n\t\"bIsSubset\": function() {\n\t\treturn isSubset(\"b\", \"a\", this);\n\t}\n}, function(def, prop) {\n\tcanDefineLazyValue_1_1_1_defineLazyValue(MetaInformation.prototype, prop, def);\n});\n\nfunction metaInformation(queryA, queryB) {\n\tvar meta = new MetaInformation(queryA, queryB);\n\treturn meta;\n}\n\n\n// Define comparators\nset_1$1.defineComparison(BasicQuery, BasicQuery, {\n\tunion: function(queryA, queryB) {\n\n\t\tvar meta = metaInformation(queryA, queryB);\n\n\n\t\tvar filterUnion = set_1$1.union(queryA.filter, queryB.filter);\n\n\t\tif (meta.pagesAreUniversal) {\n\t\t\t// We ignore the sort.\n\t\t\treturn new BasicQuery({\n\t\t\t\tfilter: filterUnion,\n\t\t\t\tsort: meta.sortIsEqual ? queryA.sort.key : undefined\n\t\t\t});\n\t\t}\n\n\n\t\tif (meta.filterIsEqual) {\n\t\t\tif (meta.sortIsEqual) {\n\t\t\t\treturn new BasicQuery({\n\t\t\t\t\tfilter: queryA.filter,\n\t\t\t\t\tsort: queryA.sort.key,\n\t\t\t\t\tpage: set_1$1.union(queryA.page, queryB.page)\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tif (meta.aIsSubset) {\n\t\t\t\t\treturn queryB;\n\t\t\t\t} else if (meta.bIsSubset) {\n\t\t\t\t\treturn queryA;\n\t\t\t\t}\n\t\t\t\t// we can't specify which pagination would bring in everything.\n\t\t\t\t// but a union does exist.\n\t\t\t\treturn set_1$1.UNDEFINABLE;\n\t\t\t}\n\t\t} else {\n\t\t\tthrow new Error(\"different filters, non-universal pages\");\n\t\t}\n\t},\n\tintersection: function(queryA, queryB) {\n\n\t\t// {age: 35} U {name: \"JBM\"} -> {age: 35, name: \"JBM\"}\n\n\t\t// { filter: {age: 35},\n\t\t//   page: {0, 10},\n\t\t//   sort: \"foo\" }\n\t\t// U\n\t\t// { filter: {name: \"JBM\"},\n\t\t//   page: {0, 10},\n\t\t//   sort: \"foo\" }\n\n\t\tvar meta = metaInformation(queryA, queryB);\n\n\t\tif (meta.pagesAreUniversal) {\n\t\t\t// We ignore the sort.\n\t\t\tvar filterResult = set_1$1.intersection(queryA.filter, queryB.filter);\n\t\t\tif (set_1$1.isDefinedAndHasMembers(filterResult)) {\n\t\t\t\treturn new BasicQuery({\n\t\t\t\t\tfilter: filterResult,\n\t\t\t\t\tsort: meta.sortIsEqual ? queryA.sort.key : undefined\n\t\t\t\t});\n\n\t\t\t} else {\n\t\t\t\treturn filterResult;\n\t\t\t}\n\t\t}\n\n\n\n\t\t// check if disjoint wheres\n\t\tif (set_1$1.intersection(queryA.filter, queryB.filter) === set_1$1.EMPTY) {\n\t\t\treturn set_1$1.EMPTY;\n\t\t}\n\n\t\tif (meta.filterIsEqual) {\n\t\t\tif (meta.sortIsEqual) {\n\t\t\t\treturn new BasicQuery({\n\t\t\t\t\tfilter: queryA.filter,\n\t\t\t\t\tsort: queryA.sort.key,\n\t\t\t\t\tpage: set_1$1.intersection(queryA.page, queryB.page)\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tif (meta.aIsSubset) {\n\t\t\t\t\treturn queryA;\n\t\t\t\t} else if (meta.bIsSubset) {\n\t\t\t\t\treturn queryB;\n\t\t\t\t}\n\t\t\t\treturn set_1$1.UNKNOWABLE;\n\t\t\t\t//throw new Error(\"same filter, different sorts, non universal pages\");\n\t\t\t}\n\t\t} else {\n\t\t\tif (meta.aIsSubset) {\n\t\t\t\treturn queryA;\n\t\t\t} else if (meta.bIsSubset) {\n\t\t\t\treturn queryB;\n\t\t\t} else {\n\t\t\t\t// filters are different, both pagination isn't universal\n\t\t\t\treturn set_1$1.UNDEFINABLE;\n\t\t\t}\n\n\t\t}\n\n\t},\n\tdifference: function(queryA, queryB) {\n\n\t\tvar differentClauses = getDifferentClauseTypes(queryA, queryB);\n\t\tvar meta = metaInformation(queryA, queryB);\n\t\tvar clause;\n\t\tif (differentClauses.length > 1) {\n\t\t\tif (meta.aIsSubset) {\n\t\t\t\treturn set_1$1.EMPTY;\n\t\t\t}\n\t\t\tif (meta.pagesAreUniversal) {\n\t\t\t\treturn new BasicQuery({\n\t\t\t\t\tfilter: set_1$1.difference(queryA.filter, queryB.filter),\n\t\t\t\t\tsort: queryA.sort.key\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn set_1$1.UNDEFINABLE;\n\t\t} else {\n\t\t\tswitch (clause = differentClauses[0]) {\n\t\t\t\t// if all the clauses are the same, then there can't be a difference\n\t\t\t\tcase undefined:\n\t\t\t\t\t{\n\t\t\t\t\t\treturn set_1$1.EMPTY;\n\t\t\t\t\t}\n\t\t\t\tcase \"sort\":\n\t\t\t\t\t{\n\t\t\t\t\t\t// if order is the only difference, then there can't be a difference\n\t\t\t\t\t\t// if items are paged but the order is different, though, the sets are not comparable\n\t\t\t\t\t\t// Either way, the result is false\n\t\t\t\t\t\tif (meta.pagesAreUniversal) {\n\t\t\t\t\t\t\treturn set_1$1.EMPTY;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn set_1$1.UNKNOWABLE;\n\t\t\t\t\t\t}\n\n\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"page\":\n\t\t\t\tcase \"filter\":\n\t\t\t\t\t{\n\t\t\t\t\t\t// if there's only one clause to evaluate or the clauses are where + id,\n\t\t\t\t\t\t// then we can try to determine the difference set.\n\t\t\t\t\t\t// Note that any difference in the ID clause will cause the result to be\n\t\t\t\t\t\t// true (if A has no ID but B has ID) or false (any case where A has ID)\n\t\t\t\t\t\tvar result = set_1$1.difference(queryA[clause],\n\t\t\t\t\t\t\tqueryB[clause]);\n\n\t\t\t\t\t\tif (set_1$1.isSpecial(result)) {\n\t\t\t\t\t\t\treturn result;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tvar query = {\n\t\t\t\t\t\t\t\tfilter: queryA.filter,\n\t\t\t\t\t\t\t\tpage: queryA.page,\n\t\t\t\t\t\t\t\tsort: queryA.sort.key\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tquery[clause] = result;\n\t\t\t\t\t\t\treturn new BasicQuery(query);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n});\n\n\nvar basicQuery = BasicQuery;\n\nvar Serializer = function(entries){\n\tvar serializers = this.serializers = new Map();\n\tif (entries) {\n\t\tentries.forEach(function(entry) {\n\t\t\tvar key = entry[0], value = entry[1];\n\t\t\tserializers.set(key, value);\n\t\t});\n\t}\n    this.serialize = this.serialize.bind(this);\n};\nSerializer.prototype.add = function(serializers){\n    canReflect_1_19_2_canReflect.assign( this.serializers, serializers instanceof Serializer ? serializers.serializers : serializers );\n};\n\n\nSerializer.prototype.serialize = function(item) {\n    if(!item) {\n        return item;\n    }\n    var Type = item.constructor;\n    var serializer = this.serializers.get(Type);\n    if(!serializer) {\n        return canReflect_1_19_2_canReflect.serialize(item);\n    } else {\n        return serializer(item, this.serialize);\n    }\n};\n\nvar serializer = Serializer;\n\nfunction makeNew(Constructor) {\n\treturn function(value) {\n\t\treturn new Constructor(value);\n\t};\n}\nvar hydrateMap = {};\nfunction addHydrateFrom(key, hydrate) {\n\thydrateMap[key] = function(value, unknownHydrator) {\n\t\treturn hydrate( unknownHydrator ? unknownHydrator(value[key]) : value[key]);\n\t};\n\tObject.defineProperty(hydrateMap[key], \"name\", {\n\t\tvalue: \"hydrate \"+key,\n\t\twritable: true\n\t});\n}\n\nfunction addHydrateFromValues(key, hydrate) {\n\thydrateMap[key] = function(value, unknownHydrator) {\n\t\tvar clones = value[key];\n\t\tif(unknownHydrator) {\n\t\t\tclones = clones.map(function(value) {\n\t\t\t\treturn unknownHydrator(value);\n\t\t\t});\n\t\t}\n\t\treturn hydrate( clones );\n\t};\n\tObject.defineProperty(hydrateMap[key], \"name\", {\n\t\tvalue: \"hydrate \"+key,\n\t\twritable: true\n\t});\n}\n\n// https://docs.mongodb.com/manual/reference/operator/query-comparison/\naddHydrateFrom(\"$eq\", function(value) {\n\treturn new comparisons_1$1.In([value]);\n});\naddHydrateFrom(\"$ne\", function(value) {\n\treturn new comparisons_1$1.NotIn([value]);\n});\n\naddHydrateFrom(\"$gt\", makeNew(comparisons_1$1.GreaterThan));\naddHydrateFrom(\"$gte\", makeNew(comparisons_1$1.GreaterThanEqual));\naddHydrateFromValues(\"$in\", makeNew(comparisons_1$1.In));\naddHydrateFrom(\"$lt\", makeNew(comparisons_1$1.LessThan));\naddHydrateFrom(\"$lte\", makeNew(comparisons_1$1.LessThanEqual));\n\naddHydrateFromValues(\"$all\", makeNew(comparisons_1$1.All));\n\n// This is a mapping of types to their opposite. The $not hydrator\n// uses this to create a more specific type, since they are logical opposites.\nvar oppositeTypeMap = {\n\tLessThan: { Type: comparisons_1$1.GreaterThanEqual, prop: \"value\" },\n\tLessThanEqual: { Type: comparisons_1$1.GreaterThan, prop: \"value\" },\n\tGreaterThan: { Type: comparisons_1$1.LessThanEqual, prop: \"value\" },\n\tGreaterThanEqual: { Type: comparisons_1$1.LessThan, prop: \"value\" },\n\tIn: { Type: comparisons_1$1.NotIn, prop: \"values\" },\n\tNotIn: { Type: comparisons_1$1.In, prop: \"values\" }\n};\n\nhydrateMap.$not = function(value, unknownHydrator) {\n\t// Many nots can be hydrated to their opposite.\n\tvar hydratedValue = hydrateValue(value.$not, unknownHydrator);\n\tvar typeName = hydratedValue.constructor.name || hydratedValue.constructor.toString().match(/^\\s*function\\s*(\\S*)\\s*\\(/)[1];\n\n\tif(oppositeTypeMap[typeName]) {\n\t\tvar options = oppositeTypeMap[typeName];\n\t\tvar OppositeConstructor = options.Type;\n\t\tvar prop = options.prop;\n\n\t\treturn new OppositeConstructor(hydratedValue[prop]);\n\t}\n\n\treturn new valuesNot(hydratedValue);\n};\n\naddHydrateFromValues(\"$nin\", makeNew(comparisons_1$1.NotIn));\n\n\nvar serializer$1 = new serializer([\n\t[comparisons_1$1.In,function(isIn, serialize) {\n\t\treturn isIn.values.length === 1 ?\n\t\t\tserialize(isIn.values[0]) :\n\t\t\t{$in: isIn.values.map(serialize)};\n\t}],\n\t[comparisons_1$1.NotIn,function(notIn, serialize) {\n\t\treturn notIn.values.length === 1 ?\n\t\t\t{$ne: serialize(notIn.values[0])} : {$nin: notIn.values.map(serialize)};\n\t}],\n\t[comparisons_1$1.GreaterThan, function(gt, serialize) { return {$gt: serialize(gt.value) }; }],\n\t[comparisons_1$1.GreaterThanEqual, function(gte, serialize) { return {$gte: serialize(gte.value) }; }],\n\t[comparisons_1$1.LessThan, function(lt, serialize) { return {$lt: serialize(lt.value) }; }],\n\t[comparisons_1$1.LessThanEqual, function(lt, serialize) { return {$lte: serialize(lt.value) }; }],\n\t[comparisons_1$1.And, function(and, serialize) {\n\t\tvar obj = {};\n\t\tand.values.forEach(function(clause) {\n\t\t\tcanReflect_1_19_2_canReflect.assignMap(obj, serialize(clause) );\n\t\t});\n\t\treturn obj;\n\t}],\n\t[comparisons_1$1.All, function(all, serialize) {\n\t\treturn {\n\t\t\t$all: serialize(all.values)\n\t\t};\n\t}]\n\t/*[is.Or, function(or, serialize) {\n\t\treturn {\n\t\t\t$or: or.values.map(function(value) {\n\t\t\t\treturn serialize(value, serialize);\n\t\t\t})\n\t\t};\n\t}]*/\n]);\n\nfunction hydrateValue(value, hydrateUnknown) {\n\tif(!hydrateUnknown) {\n\t\thydrateUnknown = function() {\n\t\t\tthrow new Error(\"can-query-logic doesn't recognize operator: \"+JSON.stringify(value));\n\t\t};\n\t}\n\tif(Array.isArray(value)) {\n\t\treturn new comparisons_1$1.In(value.map(function(value) {\n\t\t\treturn hydrateUnknown(value);\n\t\t}));\n\t}\n\telse if(value && typeof value === \"object\") {\n\t\tvar keys = Object.keys(value);\n\t\tvar allKeysAreComparisons = keys.every(function(key) {\n\t\t\treturn hydrateMap[key];\n\t\t});\n\t\tif(allKeysAreComparisons) {\n\t\t\tvar andClauses = keys.map(function(key) {\n\t\t\t\tvar part = {};\n\t\t\t\tpart[key] = value[key];\n\t\t\t\tvar hydrator = hydrateMap[key];\n\t\t\t\treturn hydrator(part, hydrateUnknown);\n\t\t\t});\n\t\t\tif(andClauses.length > 1) {\n\t\t\t\treturn new comparisons_1$1.And(andClauses);\n\t\t\t} else {\n\t\t\t\treturn andClauses[0];\n\t\t\t}\n\t\t} else {\n\t\t\treturn hydrateUnknown(value);\n\t\t}\n\t} else {\n\t\treturn new comparisons_1$1.In([hydrateUnknown(value)]);\n\t}\n}\n\nvar comparisons$2 = {\n\t// value - something from a query, for example {$in: [1,2]}\n\thydrate: hydrateValue,\n\tserializer: serializer$1\n};\n\nvar schemaHelpers;\nvar schemaHelpers_1 = schemaHelpers = {\n\n    // Number is a ranged type\n    isRangedType: function(Type){\n        return Type && canReflect_1_19_2_canReflect.isConstructorLike(Type) &&\n            !set_1$1.hasComparisons(Type) &&\n            !Type[canSymbol_1_7_0_canSymbol.for(\"can.SetType\")] &&\n            Type.prototype.valueOf && Type.prototype.valueOf !== Object.prototype.valueOf;\n    },\n    categorizeOrValues: function categorizeOrValues(values){\n\n    \tvar categories = {\n    \t\tprimitives: [],\n    \t\tvalueOfTypes: [],\n    \t\tothers: []\n    \t};\n\n    \tvalues.forEach(function(value){\n    \t\tif( canReflect_1_19_2_canReflect.isPrimitive( value ) ) {\n    \t\t\tcategories.primitives.push(value);\n    \t\t}\n    \t\telse if( schemaHelpers.isRangedType(value) ) {\n    \t\t\tcategories.valueOfTypes.push(value);\n    \t\t}\n    \t\telse {\n    \t\t\tcategories.others.push(value);\n    \t\t}\n    \t});\n    \treturn categories;\n    }\n};\n\nvar comparisonSetTypeSymbol = canSymbol_1_7_0_canSymbol.for(\"can.ComparisonSetType\");\nvar isMemberSymbol$4 = canSymbol_1_7_0_canSymbol.for(\"can.isMember\");\n\n// This helper function seperates out sets that relate to the \"maybe\" values\n// like `null` or `undefined`. For example, if `rangeToBeSplit`\n// is `In([null, 3])`, it will produce `{enum: In([null]), range: In(3)}`\nfunction splitByRangeAndEnum(maybeUniverse, rangeToBeSplit) {\n\tvar enumSet;\n\n\t// If it's an AND\n\tif (rangeToBeSplit instanceof comparisons_1$1.And) {\n\t\t// recursively split each value\n\t\tvar sets = rangeToBeSplit.values.map(function(setInAnd) {\n\t\t\treturn splitByRangeAndEnum(maybeUniverse, setInAnd);\n\t\t});\n\t\t// take the intersections\n\t\treturn sets.reduce(function(last, maybe) {\n\t\t\treturn {\n\t\t\t\trange: set_1$1.intersection(last.range, maybe.range),\n\t\t\t\tenum: set_1$1.intersection(last.enum, maybe.enum)\n\t\t\t};\n\t\t}, {\n\t\t\trange: set_1$1.UNIVERSAL,\n\t\t\tenum: maybeUniverse\n\t\t});\n\n\t} else if (rangeToBeSplit instanceof comparisons_1$1.In) {\n\n\t\tvar shouldBeInValues = rangeToBeSplit.values.filter(function(value) {\n\t\t\treturn maybeUniverse.isMember(value);\n\t\t});\n\t\tif (shouldBeInValues.length) {\n\t\t\tvar valuesCopy = rangeToBeSplit.values.slice(0);\n\t\t\tcanReflect_1_19_2_canReflect.removeValues(valuesCopy, shouldBeInValues);\n\n\t\t\treturn {\n\t\t\t\tenum: new comparisons_1$1.In(shouldBeInValues),\n\t\t\t\trange: valuesCopy.length ? new comparisons_1$1.In(valuesCopy) : set_1$1.EMPTY\n\t\t\t};\n\t\t} else {\n\t\t\treturn {\n\t\t\t\tenum: set_1$1.EMPTY,\n\t\t\t\trange: rangeToBeSplit\n\t\t\t};\n\t\t}\n\t} else if (rangeToBeSplit instanceof comparisons_1$1.NotIn) {\n\n\t\t// Gets the 'maybe' values in the range\n\t\tenumSet = set_1$1.intersection(maybeUniverse, rangeToBeSplit);\n\n\t\t// We should remove all the values within $in matching an in values.\n\t\tvar rangeValues = rangeToBeSplit.values.filter(function(value) {\n\t\t\treturn !maybeUniverse.isMember(value);\n\t\t});\n\t\treturn {\n\t\t\trange: rangeValues.length ? new comparisons_1$1.NotIn(rangeValues) : set_1$1.UNIVERSAL,\n\t\t\tenum: enumSet\n\t\t};\n\t} else {\n\t\treturn {\n\t\t\tenum: set_1$1.EMPTY,\n\t\t\trange: rangeToBeSplit\n\t\t};\n\t}\n}\n\n// Builds a type for ranged values plus some other enum values.\n// This is great for 'maybe' values. For example, it might be a string OR `null` OR `undefined`\n// `makeMaybe([null, undefined])`\nfunction makeMaybe(inValues, makeChildType) {\n\n\n\tvar maybeUniverse = new comparisons_1$1.In(inValues);\n\n\tfunction Maybe(values) {\n\n\t\t// Maybe has two sub-sets:\n\t\t// - `.range` - Selects the non-enum values. Ex: `GreaterThan(3)`\n\t\t// - `.enum` - Selects the enum values. This is ALWAYS an `In`. Ex: `In([null])`.\n\t\t// Maybe is effectively an OR with these two properties.\n\t\tvar result = splitByRangeAndEnum(maybeUniverse, values.range);\n\t\tthis.range = result.range || set_1$1.EMPTY;\n\t\tif (values.enum) {\n\t\t\tif (result.enum !== set_1$1.EMPTY) {\n\t\t\t\tthis.enum = set_1$1.union(result.enum, values.enum);\n\t\t\t} else {\n\t\t\t\tthis.enum = values.enum;\n\t\t\t}\n\t\t} else {\n\t\t\tthis.enum = result.enum;\n\t\t}\n\t\tif(this.enum === set_1$1.EMPTY && this.range === set_1$1.EMPTY) {\n\t\t\treturn set_1$1.EMPTY;\n\t\t}\n\t}\n\tMaybe.prototype.orValues = function() {\n\t\tvar values = [];\n\t\tif( this.range !== set_1$1.EMPTY ) {\n\t\t\tvalues.push(this.range);\n\t\t}\n\t\tif( this.enum !== set_1$1.EMPTY ) {\n\t\t\tvalues.push(this.enum);\n\t\t}\n\t\treturn values;\n\t};\n\tMaybe.prototype[isMemberSymbol$4] = function isMember() {\n\t\tvar rangeIsMember = this.range[isMemberSymbol$4] || this.range.isMember,\n\t\t\tenumIsMember = this.enum[isMemberSymbol$4] || this.enum.isMember;\n\t\treturn rangeIsMember.apply(this.range, arguments) || enumIsMember.apply(this.enum, arguments);\n\t};\n\n\n\n\tset_1$1.defineComparison(Maybe, Maybe, {\n\t\tunion: function(maybeA, maybeB) {\n\t\t\tvar enumSet = set_1$1.union(maybeA.enum, maybeB.enum);\n\t\t\tvar range = set_1$1.union(maybeA.range, maybeB.range);\n\n\t\t\treturn new Maybe({\n\t\t\t\tenum: enumSet,\n\t\t\t\trange: range\n\t\t\t});\n\t\t},\n\t\tdifference: function(maybeA, maybeB) {\n\t\t\tvar enumSet = set_1$1.difference(maybeA.enum, maybeB.enum);\n\t\t\tvar range = set_1$1.difference(maybeA.range, maybeB.range);\n\n\t\t\treturn new Maybe({\n\t\t\t\tenum: enumSet,\n\t\t\t\trange: range\n\t\t\t});\n\t\t},\n\t\tintersection: function(maybeA, maybeB) {\n\t\t\tvar enumSet = set_1$1.intersection(maybeA.enum, maybeB.enum);\n\t\t\tvar range = set_1$1.intersection(maybeA.range, maybeB.range);\n\n\t\t\treturn new Maybe({\n\t\t\t\tenum: enumSet,\n\t\t\t\trange: range\n\t\t\t});\n\t\t}\n\t});\n\tMaybe.inValues = inValues;\n\n\tset_1$1.defineComparison(set_1$1.UNIVERSAL, Maybe, {\n\t\tdifference: function(universe, maybe) {\n\t\t\tvar primary,\n\t\t\t\tsecondary;\n\n\t\t\tif (maybe.range === set_1$1.UNIVERSAL) {\n\t\t\t\t// there is only the enum\n\t\t\t\treturn new Maybe({\n\t\t\t\t\trange: maybe.range,\n\t\t\t\t\tenum: set_1$1.difference(maybeUniverse, maybe.enum)\n\t\t\t\t});\n\t\t\t}\n\t\t\t// there is only a primary\n\t\t\tif (maybe.enum === set_1$1.EMPTY) {\n\t\t\t\tvar rangeSet = set_1$1.difference(set_1$1.UNIVERSAL, maybe.range);\n\t\t\t\tvar notPresent = set_1$1.difference(maybeUniverse, maybe.range);\n\t\t\t\t// make sure they are included\n\t\t\t\tvar enumSet = set_1$1.difference(notPresent, rangeSet);\n\n\n\t\t\t\treturn new Maybe({\n\t\t\t\t\trange: rangeSet,\n\t\t\t\t\tenum: enumSet\n\t\t\t\t});\n\t\t\t\t// check enum things that aren't included in primary\n\n\t\t\t} else {\n\t\t\t\tprimary = set_1$1.difference(universe, maybe.range);\n\t\t\t\tsecondary = set_1$1.difference(maybeUniverse, maybe.enum);\n\t\t\t}\n\t\t\treturn new Maybe({\n\t\t\t\tenum: secondary,\n\t\t\t\trange: primary\n\t\t\t});\n\t\t}\n\t});\n\tmakeChildType = makeChildType || function(v) {\n\t\treturn v;\n\t};\n\n\tMaybe.hydrate = function(value, childHydrate) {\n\t\treturn new Maybe({\n\t\t\trange: childHydrate(value, makeChildType)\n\t\t});\n\t};\n\n\treturn Maybe;\n}\n\n\n\nmakeMaybe.canMakeMaybeSetType = function(Type) {\n\tvar schema = canReflect_1_19_2_canReflect.getSchema(Type);\n\tif (schema && schema.type === \"Or\") {\n\t\tvar categories = schemaHelpers_1.categorizeOrValues(schema.values);\n\n\t\treturn categories.valueOfTypes.length === 1 &&\n\t\t\t(categories.valueOfTypes.length + categories.primitives.length === schema.values.length);\n\t}\n\treturn false;\n};\n\n// Given an __Or__ type like:\n// ```\n// var MaybeString = {\n//   \"can.new\"(val){ ... },\n// \t \"can.getSchema\"(){ return  { type: \"Or\", values: [String, undefined, null] }\n// });\n// ```\n//\n// This creates two types:\n// - `Value` - A value type used for what's within `GreaterThan`, etc.\n// - `Maybe` - A SetType for this property. It will have `GreaterThan` within its\n//            `{enum, range}` sub values.\n//\n// This creates the outer `SetType` and the innermost `Value` type while the Comparisons\n// are used inbetween.\n//\n// The `MaybeString` could probably be directly used to hydrate values to what they should be.\nmakeMaybe.makeMaybeSetTypes = function(Type) {\n\tvar schema = canReflect_1_19_2_canReflect.getSchema(Type);\n\tvar categories = schemaHelpers_1.categorizeOrValues(schema.values);\n\tvar ComparisonSetType;\n\n\t// No need to build the comparison type if we are given it.\n\tif (Type[comparisonSetTypeSymbol]) {\n\t\tComparisonSetType = Type[comparisonSetTypeSymbol];\n\t} else {\n\n\t\tComparisonSetType = function(value) {\n\t\t\tthis.setValue = value;\n\t\t\tthis.value = canReflect_1_19_2_canReflect.new(Type, value);\n\t\t};\n\n\t\tComparisonSetType.prototype.valueOf = function() {\n\t\t\treturn this.value && typeof this.value.valueOf === \"function\" ?\n\t\t\t\tthis.value.valueOf() : this.value;\n\t\t};\n\t\tcanReflect_1_19_2_canReflect.assignSymbols(ComparisonSetType.prototype, {\n\t\t\t\"can.serialize\": function() {\n\t\t\t\treturn this.setValue;\n\t\t\t}\n\t\t});\n\t\t//!steal-remove-start\n\t\tif(process.env.NODE_ENV !== 'production') {\n\t\t\tObject.defineProperty(ComparisonSetType, \"name\", {\n\t\t\t\tvalue: \"Or[\" + categories.valueOfTypes[0].name + \",\" + categories.primitives.map(String).join(\" \") + \"]\"\n\t\t\t});\n\t\t}\n\t\t//!steal-remove-end\n\t}\n\n\treturn {\n\t\tMaybe: makeMaybe(categories.primitives, function hydrateMaybesValueType(value) {\n\t\t\treturn new ComparisonSetType(value);\n\t\t}),\n\t\tComparisonSetType: ComparisonSetType\n\t};\n};\n\n\nvar makeMaybe_1 = makeMaybe;\n\nvar setTypeSymbol = canSymbol_1_7_0_canSymbol.for(\"can.SetType\"),\n\tisMemberSymbol$5 = canSymbol_1_7_0_canSymbol.for(\"can.isMember\"),\n\tnewSymbol$2 = canSymbol_1_7_0_canSymbol.for(\"can.new\");\n\nfunction makeEnumSetType(allValues, hydrate) {\n\tfunction Enum(values) {\n\t\tvar arr = Array.isArray(values) ? values : [values];\n\t\tthis.values = hydrate ? arr.map(hydrate) : arr;\n\t}\n\tcanReflect_1_19_2_canReflect.assignSymbols(Enum.prototype, {\n\t\t\"can.serialize\": function() {\n\t\t\treturn this.values.length === 1 ? this.values[0] : this.values;\n\t\t}\n\t});\n\n\tEnum.prototype[isMemberSymbol$5] = function(value) {\n\t\treturn this.values.some(function(val) {\n\t\t\treturn set_1$1.isEqual(val, value);\n\t\t});\n\t};\n\n\tEnum.UNIVERSAL = new Enum(allValues);\n\n\tvar difference = function(enum1, enum2) {\n\t\tvar result = arrayUnionIntersectionDifference(enum1.values, enum2.values);\n\t\tif (result.difference.length) {\n\t\t\treturn new Enum(result.difference);\n\t\t} else {\n\t\t\treturn set_1$1.EMPTY;\n\t\t}\n\t};\n\n\tset_1$1.defineComparison(Enum, Enum, {\n\t\tunion: function(enum1, enum2) {\n\t\t\tvar result = arrayUnionIntersectionDifference(enum1.values, enum2.values);\n\t\t\tif (result.union.length) {\n\t\t\t\treturn new Enum(result.union);\n\t\t\t} else {\n\t\t\t\treturn set_1$1.EMPTY;\n\t\t\t}\n\t\t},\n\t\tintersection: function(enum1, enum2) {\n\t\t\tvar result = arrayUnionIntersectionDifference(enum1.values, enum2.values);\n\t\t\tif (result.intersection.length) {\n\t\t\t\treturn new Enum(result.intersection);\n\t\t\t} else {\n\t\t\t\treturn set_1$1.EMPTY;\n\t\t\t}\n\t\t},\n\t\tdifference: difference\n\t});\n\n\tset_1$1.defineComparison(Enum, set_1$1.UNIVERSAL, {\n\t\tdifference: function(enumA) {\n\t\t\treturn difference(enumA, {\n\t\t\t\tvalues: allValues.slice(0)\n\t\t\t});\n\t\t}\n\t});\n\n\tset_1$1.defineComparison(set_1$1.UNIVERSAL, Enum, {\n\t\tdifference: function(universe, enumB) {\n\t\t\treturn difference({\n\t\t\t\tvalues: allValues.slice(0)\n\t\t\t}, enumB);\n\t\t}\n\t});\n\n\treturn Enum;\n}\n\nfunction makeEnum$1(Type, allValues, hydrate) {\n\n\tvar Enum = makeEnumSetType(allValues, hydrate);\n\n\tType[setTypeSymbol] = Enum;\n\tType[isMemberSymbol$5] = function(value) {\n\t\treturn allValues.some(function(val) {\n\t\t\treturn set_1$1.isEqual(val, value);\n\t\t});\n\t};\n\n\treturn Enum;\n}\n\nmakeEnum$1.canMakeEnumSetType = function(Type) {\n\tvar schema = canReflect_1_19_2_canReflect.getSchema(Type);\n\tif (schema && schema.type === \"Or\") {\n\t\tvar categories = schemaHelpers_1.categorizeOrValues(schema.values);\n\t\treturn categories.primitives.length === schema.values.length;\n\t}\n\treturn false;\n};\n\nmakeEnum$1.makeEnumSetType = function(Type) {\n\tvar schema = canReflect_1_19_2_canReflect.getSchema(Type);\n\tvar categories = schemaHelpers_1.categorizeOrValues(schema.values);\n\tvar hydrate = Type[newSymbol$2] ? Type[newSymbol$2].bind(Type) : undefined;\n\treturn makeEnumSetType(categories.primitives, hydrate);\n};\n\nvar makeEnum_1 = makeEnum$1;\n\nvar setTypeSymbol$1 = canSymbol_1_7_0_canSymbol.for(\"can.SetType\");\nvar schemaSymbol = canSymbol_1_7_0_canSymbol.for(\"can.getSchema\");\n\nvar defaultQuery = new basicQuery({});\n\n\nfunction getSchemaProperties(value) {\n\tvar constructor = value.constructor;\n\tif (constructor && constructor[schemaSymbol]) {\n\t\tvar schema = constructor[schemaSymbol]();\n\t\treturn schema.keys || {};\n\t} else {\n\t\treturn {};\n\t}\n}\n\nfunction hydrateFilter(values, schemaProperties, hydrateUnknown) {\n\tvar valuesIsObject = values && typeof values === \"object\";\n\tif (valuesIsObject && (\"$or\" in values)) {\n\t\treturn hydrateOrs(values.$or, schemaProperties, hydrateUnknown);\n\t} else if(valuesIsObject && (\"$and\" in values)) {\n\t\treturn hydrateAnds(values.$and, schemaProperties, hydrateUnknown);\n\t} else {\n\t\treturn hydrateAndValues(values, schemaProperties, hydrateUnknown);\n\t}\n}\n\nvar setTypeMap = new WeakMap();\n\n// This is used to hydrate a value directly within a `filter`'s And.\nfunction hydrateAndValue(value, prop, SchemaType, hydrateChild) {\n\t// The `SchemaType` is the type of value on `instances` of\n\t// the schema. `Instances` values are different from `Set` values.\n\tif (SchemaType) {\n\t\t// If there's a `SetType`, we will use that\n\t\tvar SetType = SchemaType[setTypeSymbol$1];\n\t\tif (SetType) {\n\t\t\t/// If it exposes a hydrate, this means it can use the current hydrator to\n\t\t\t// hydrate its children.\n\t\t\t// I'm not sure why it's not taking the `unknown` hydrator instead.\n\t\t\tif (SetType.hydrate) {\n\t\t\t\treturn SetType.hydrate(value, comparisons$2.hydrate);\n\t\t\t}\n\t\t\t// If the SetType implemented `union`, `intersection`, `difference`\n\t\t\t// We can create instances of it directly.\n\t\t\telse if (set_1$1.hasComparisons(SetType)) {\n\t\t\t\t// Todo ... canReflect.new\n\t\t\t\treturn new SetType(value);\n\t\t\t}\n\t\t\t// If the SetType did not implement the comparison methods,\n\t\t\t// it's probably just a \"Value\" comparison type. We will hydrate\n\t\t\t// as a comparison converter, but create an instance of this `\"Value\"`\n\t\t\t// comparison type within the comparison converter.\n\t\t\telse {\n\t\t\t\t// inner types\n\t\t\t\treturn comparisons$2.hydrate(value, function(value) {\n\t\t\t\t\treturn new SetType(value);\n\t\t\t\t});\n\t\t\t}\n\n\t\t} else {\n\t\t\t// There is a `SchemaType`, but it doesn't have a `SetType`.\n\t\t\t// Can we create the SetType from the `SchemaType`?\n\t\t\tif (makeEnum_1.canMakeEnumSetType(SchemaType)) {\n\t\t\t\tif (!setTypeMap.has(SchemaType)) {\n\t\t\t\t\tsetTypeMap.set(SchemaType, makeEnum_1.makeEnumSetType(SchemaType));\n\t\t\t\t}\n\t\t\t\tSetType = setTypeMap.get(SchemaType);\n\t\t\t\treturn new SetType(value);\n\t\t\t}\n\t\t\t// It could also have a `ComparisonSetType` which are the values\n\t\t\t// within the Maybe type.\n\t\t\telse if (makeMaybe_1.canMakeMaybeSetType(SchemaType)) {\n\t\t\t\tif (!setTypeMap.has(SchemaType)) {\n\t\t\t\t\tsetTypeMap.set(SchemaType, makeMaybe_1.makeMaybeSetTypes(SchemaType));\n\t\t\t\t}\n\t\t\t\tSetType = setTypeMap.get(SchemaType).Maybe;\n\t\t\t\treturn SetType.hydrate(value, comparisons$2.hydrate);\n\t\t\t}\n\t\t\t// We can't create the `SetType`, so lets hydrate with the default behavior.\n\t\t\telse {\n\t\t\t\treturn comparisons$2.hydrate(value, hydrateChild);\n\t\t\t}\n\t\t}\n\t} else {\n\t\t// HERE {$gt: 1} -> new is.GreaterThan(1)\n\t\treturn comparisons$2.hydrate(value, hydrateChild);\n\t}\n}\n\nfunction hydrateAndValues(values, schemaProperties, hydrateUnknown) {\n\tschemaProperties = schemaProperties || {};\n\n\tfunction hydrateChild(value) {\n\t\tif (value) {\n\t\t\tif (Array.isArray(value)) {\n\t\t\t\treturn value.map(hydrateUnknown);\n\t\t\t} else if (canReflect_1_19_2_canReflect.isPlainObject(value)) {\n\t\t\t\t// lets try to get the schema ...\n\t\t\t\treturn hydrateAndValues(value, getSchemaProperties(value));\n\t\t\t}\n\t\t}\n\t\tif (hydrateUnknown) {\n\t\t\treturn hydrateUnknown(value);\n\t\t} else {\n\t\t\treturn value;\n\t\t}\n\t}\n\tvar clone = {};\n\tcanReflect_1_19_2_canReflect.eachKey(values, function(value, prop) {\n\t\tclone[prop] = hydrateAndValue(value, prop, schemaProperties[prop], hydrateChild);\n\t});\n\n\treturn new basicQuery.KeysAnd(clone);\n\n}\n// This tries to combine a bunch of OR-ed ANDS into a single AND.\n// Example: [{name: \"j\", age: 3},{name: \"j\", age: 4}] //-> {name: \"j\", age: in[3,4]}\nfunction combineAnds(ands) {\n\tvar firstKeys = Object.keys(ands[0].values);\n\tvar keys = {};\n\n\tvar keysCompare = new comparisons_1$1.In(firstKeys);\n\n\tfirstKeys.map(function(key) {\n\t\tkeys[key] = [];\n\t});\n\n\tvar sameKeys = ands.every(function(and) {\n\t\t// have to have the same keys\n\t\tif (!set_1$1.isEqual(keysCompare, new comparisons_1$1.In(Object.keys(and.values)))) {\n\t\t\treturn false;\n\t\t}\n\t\tcanReflect_1_19_2_canReflect.eachKey(and.values, function(value, key) {\n\t\t\tkeys[key].push(value);\n\t\t});\n\t\treturn true;\n\t});\n\tif (!sameKeys) {\n\t\treturn;\n\t}\n\t// now try to union everything and see if it simplifies ...\n\tvar unequalKeys = [];\n\tfirstKeys.forEach(function(key) {\n\t\tvar isEqual = keys[key].reduce(function(newSet, lastSetOrFalse) {\n\t\t\tif (lastSetOrFalse === false) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif (lastSetOrFalse === undefined) {\n\t\t\t\treturn newSet;\n\t\t\t}\n\t\t\tvar res = set_1$1.isEqual(newSet, lastSetOrFalse);\n\t\t\treturn res ? newSet : false;\n\t\t});\n\t\tif (!isEqual) {\n\t\t\tunequalKeys.push(key);\n\t\t}\n\t});\n\n\tif (unequalKeys.length !== 1) {\n\t\treturn;\n\t}\n\tvar unionKey = unequalKeys[0];\n\t// lets see if we can union that one value\n\tvar unioned = keys[unionKey].reduce(function(cur, last) {\n\t\treturn set_1$1.union(cur, last);\n\t}, set_1$1.EMPTY);\n\n\tvar result = {};\n\tfirstKeys.map(function(key) {\n\t\tresult[key] = keys[key][0];\n\t});\n\tresult[unionKey] = unioned;\n\treturn new basicQuery.KeysAnd(result);\n}\n\nfunction hydrateOrs(values, schemaProperties, hydrateUnknown) {\n\tvar comparisons = values.map(function(value) {\n\t\treturn hydrateAndValues(value, schemaProperties, hydrateUnknown);\n\t});\n\tvar combined = combineAnds(comparisons);\n\tif (combined) {\n\t\treturn combined;\n\t}\n\treturn new basicQuery.Or(comparisons);\n}\n\nfunction hydrateAnds(values, schemaProperties, hydrateUnknown) {\n\tvar comparisons = values.map(function(value) {\n\t\treturn hydrateAndValues(value, schemaProperties, hydrateUnknown);\n\t});\n\treturn new basicQuery.And(comparisons);\n}\n\nfunction recursivelyAddOrs(ors, value, serializer$$1, key){\n    value.orValues().forEach(function(orValue){\n        if(typeof orValue.orValues === \"function\") {\n            recursivelyAddOrs(ors, orValue, serializer$$1, key);\n        } else {\n            var result = {};\n            result[key] = serializer$$1(orValue);\n            ors.push( result );\n        }\n    });\n}\n\nvar basicQuery$1 = function(schema) {\n\n\tvar id = schema.identity && schema.identity[0];\n\tvar keys = schema.keys;\n\n\tvar serializeMap = [\n\t\t[basicQuery.Or, function(or, serializer$$1) {\n\t\t\treturn or.values.map(function(value) {\n\t\t\t\treturn serializer$$1(value);\n\t\t\t});\n\t\t}],\n\t\t[basicQuery.And, function(and, serializer$$1) {\n\t\t\treturn { $and: and.values.map(function(value) {\n\t\t\t\treturn serializer$$1(value);\n\t\t\t}) };\n\t\t}],\n\t\t[basicQuery.Not, function(nots, serializer$$1) {\n\t\t\treturn { $not: serializer$$1(nots.value) };\n\t\t}],\n\t\t// this destructures ANDs with OR-like clauses\n\t\t[basicQuery.KeysAnd, function(and, serializer$$1) {\n\t\t\tvar ors = [];\n\t\t\tvar result = {};\n\t\t\tcanReflect_1_19_2_canReflect.eachKey(and.values, function(value, key) {\n\t\t\t\t// is value universal ... if not, we don't need to add anything\n\n\t\t\t\tif (typeof value.orValues === \"function\") {\n\t\t\t\t\trecursivelyAddOrs(ors, value, serializer$$1, key);\n\t\t\t\t} else {\n\t\t\t\t\tresult[key] = serializer$$1(value);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (ors.length) {\n\t\t\t\tif (ors.length === 1) {\n\t\t\t\t\treturn ors[0];\n\t\t\t\t} else {\n\t\t\t\t\treturn {\n\t\t\t\t\t\t$or: ors.map(function(orPart) {\n\t\t\t\t\t\t\treturn canReflect_1_19_2_canReflect.assign(canReflect_1_19_2_canReflect.serialize(result), orPart);\n\t\t\t\t\t\t})\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn result;\n\t\t\t}\n\n\t\t}],\n\t\t[basicQuery.RecordRange, function(range) {\n\t\t\treturn {\n\t\t\t\tstart: range.start,\n\t\t\t\tend: range.end\n\t\t\t};\n\t\t}],\n\t\t[basicQuery, function(basicQuery$$1, childSerializer) {\n\n\t\t\tvar filter = set_1$1.isEqual(basicQuery$$1.filter, set_1$1.UNIVERSAL) ? {} : childSerializer(basicQuery$$1.filter);\n\n\t\t\tvar res = {};\n\t\t\tif (canReflect_1_19_2_canReflect.size(filter) !== 0) {\n\t\t\t\tres.filter = filter;\n\t\t\t}\n\n\t\t\tif (!set_1$1.isEqual(basicQuery$$1.page, defaultQuery.page)) {\n\t\t\t\t// we always provide the start, even if it's 0\n\t\t\t\tres.page = {\n\t\t\t\t\tstart: basicQuery$$1.page.start\n\t\t\t\t};\n\t\t\t\tif (basicQuery$$1.page.end !== defaultQuery.page.end) {\n\t\t\t\t\tres.page.end = basicQuery$$1.page.end;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (basicQuery$$1.sort.key !== id) {\n\t\t\t\tres.sort = basicQuery$$1.sort.key;\n\t\t\t}\n\t\t\treturn res;\n\n\t\t}]\n\t];\n\n\n\n\t// Makes a sort type that can make a compare function using the SetType\n\tvar Sort = basicQuery.makeSort(schema, hydrateAndValue);\n\tvar serializer$$1 = new serializer(serializeMap);\n\tserializer$$1.add(comparisons$2.serializer);\n\n\treturn {\n\t\thydrate: function(data) {\n\n\t\t\t//!steal-remove-start\n\t\t\tif (process.env.NODE_ENV !== 'production') {\n\t\t\t\tvar AcceptedFields = makeEnum_1(function() {}, [\"filter\", \"sort\", \"page\"]);\n\t\t\t\tvar diff = set_1$1.difference(new AcceptedFields(Object.keys(data)), AcceptedFields.UNIVERSAL);\n\t\t\t\tif (diff.values && diff.values.length) {\n\t\t\t\t\tdev.warn(\n\t\t\t\t\t\t\"can-query-logic: Ignoring keys: \" + diff.values.join(\", \") + \".\"\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t\t//!steal-remove-end\n\n\n\t\t\tvar filter = canReflect_1_19_2_canReflect.serialize(data.filter);\n\n\t\t\t// this mutates\n\t\t\tvar filterAnd = hydrateFilter(filter, keys, helpers_1$3.valueHydrator);\n\n\t\t\t// Conver the filter arguments\n\n\t\t\tvar query = {\n\t\t\t\tfilter: filterAnd\n\t\t\t};\n\t\t\tif (data.page) {\n\t\t\t\tquery.page = new basicQuery.RecordRange(data.page.start, data.page.end);\n\t\t\t}\n\t\t\tif (data.sort) {\n\t\t\t\tquery.sort = new Sort(data.sort);\n\t\t\t} else {\n\t\t\t\tquery.sort = new Sort(id);\n\t\t\t}\n\t\t\treturn new basicQuery(query);\n\t\t},\n\t\tserializer: serializer$$1\n\t};\n};\n\nvar schemaSymbol$1 = canSymbol_1_7_0_canSymbol.for(\"can.getSchema\");\nvar newSymbol$3 = canSymbol_1_7_0_canSymbol.for(\"can.new\");\n\n\n\n// Creates an algebra used to convert primitives to types and back\nfunction QueryLogic(Type, options){\n    Type = Type || {};\n    var passedHydrator = options && options.toQuery;\n    var passedSerializer = options && options.toParams;\n    var schema;\n    if(Type[schemaSymbol$1]) {\n        schema = Type[schemaSymbol$1]();\n    } else {\n        schema = Type;\n    }\n\n    // check that the basics are here\n\n    var id = schema.identity && schema.identity[0];\n    if(!id) {\n        //console.warn(\"can-query given a type without an identity schema.  Using `id` as the identity id.\");\n        schema.identity = [\"id\"];\n    }\n\n    var converter = basicQuery$1(schema),\n        hydrate,\n        serialize;\n\n    if(passedHydrator) {\n        hydrate = function(query){\n            return converter.hydrate(passedHydrator(query));\n        };\n    } else {\n        hydrate = converter.hydrate;\n    }\n\n    if(passedSerializer) {\n        serialize = function(query){\n            return passedSerializer(converter.serializer.serialize(query));\n        };\n    } else {\n        serialize = converter.serializer.serialize;\n    }\n    this.hydrate = hydrate;\n    this.serialize = serialize;\n    this.schema = schema;\n\n}\n\nfunction makeNewSet(prop){\n    return function(qA, qB){\n        var queryA = this.hydrate(qA),\n            queryB = this.hydrate(qB);\n        var unionQuery = set_1$1[prop](queryA , queryB );\n        return this.serialize( unionQuery );\n    };\n}\n\nfunction makeReturnValue(prop) {\n    return function(qA, qB){\n        var queryA = this.hydrate(qA),\n            queryB = this.hydrate(qB);\n        return set_1$1[prop](queryA , queryB );\n    };\n}\n\ncanReflect_1_19_2_canReflect.assignSymbols(QueryLogic.prototype,{\n    \"can.getSchema\": function(){\n        return this.schema;\n    }\n});\n\ncanReflect_1_19_2_canReflect.assign(QueryLogic.prototype,{\n    union: makeNewSet(\"union\"),\n    difference: makeNewSet(\"difference\"),\n    intersection: makeNewSet(\"intersection\"),\n\n    isEqual: makeReturnValue(\"isEqual\"),\n    isProperSubset: makeReturnValue(\"isProperSubset\"),\n    isSubset: makeReturnValue(\"isSubset\"),\n\n    isSpecial: set_1$1.isSpecial,\n    isDefinedAndHasMembers: set_1$1.isDefinedAndHasMembers,\n\n    count: function(a){\n        var queryA = this.hydrate(a);\n        return queryA.page.end - queryA.page.start + 1;\n    },\n\n    // identity keys\n    identityKeys: function(){\n        //console.warn(\"you probably can get the identity keys some other way\");\n        return this.schema.identity;\n    },\n\n    filterMembers: function(a, b, bData){\n        var queryA = this.hydrate(a);\n        if(arguments.length >= 3) {\n            var queryB = this.hydrate(b);\n            return queryA.filterFrom(bData, queryB);\n        } else {\n            return queryA.filterFrom(b);\n        }\n\n    },\n    // filterMembersAndGetCount\n    filterMembersAndGetCount: function(a, b, bData) {\n        var queryA = this.hydrate(a),\n            queryB = this.hydrate(b);\n        return queryA.filterMembersAndGetCount(bData, queryB);\n    },\n    // unionMembers\n    unionMembers: function(a, b, aData, bData) {\n        var queryA = this.hydrate(a),\n            queryB = this.hydrate(b);\n\n        var schema = this.schema;\n        return queryA.merge(queryB, aData, bData, function(obj){\n            return canReflect_1_19_2_canReflect.getIdentity(obj, schema);\n        });\n    },\n    // isMember\n    isMember: function(query, props) {\n        return this.hydrate(query).isMember(props);\n    },\n\n    memberIdentity: function(props) {\n        // console.warn(\"you probably can get the member identity some other way\");\n        return canReflect_1_19_2_canReflect.getIdentity(props, this.schema);\n    },\n    index: function(query, items, props){\n        return this.hydrate(query).index(props, items);\n    },\n\n    insert: function(query, items, item){\n    \tvar index = this.index(query, items, item);\n    \tif(index === undefined) {\n    \t\tindex = items.length;\n    \t}\n\n    \tvar copy = items.slice(0);\n    \tcopy.splice(index, 0, item);\n\n    \treturn copy;\n    },\n\n    isPaginated: function(query) {\n        var basicQuery$$1 = this.hydrate(query);\n        return !set_1$1.isEqual(basicQuery$$1.page, set_1$1.UNIVERSAL);\n    },\n    removePagination: function(query) {\n        var basicQuery$$1 = this.hydrate(query);\n        basicQuery$$1.removePagination();\n        return this.serialize( basicQuery$$1 );\n    },\n\n});\n\n// Copy everything on `set` to QueryLogic\nfor(var prop in set_1$1) {\n    if(QueryLogic[prop] === undefined) {\n        QueryLogic[prop] = set_1$1[prop];\n    }\n}\n\n\n\nQueryLogic.makeEnum = function(values){\n    var Type = function(){};\n\t\tType[newSymbol$3] = function(val) { return val; };\n    makeEnum_1(Type, values);\n    return Type;\n};\n\n\n\nQueryLogic.KeysAnd = basicQuery.KeysAnd;\nQueryLogic.ValuesOr = basicQuery.Or;\n\n\n\nQueryLogic.In = comparisons_1$1.In;\nQueryLogic.NotIn = comparisons_1$1.NotIn;\nQueryLogic.GreaterThan = comparisons_1$1.GreaterThan;\nQueryLogic.GreaterThanEqual = comparisons_1$1.GreaterThanEqual;\nQueryLogic.LessThan = comparisons_1$1.LessThan;\nQueryLogic.LessThanEqual = comparisons_1$1.LessThanEqual;\nQueryLogic.ValueAnd = comparisons_1$1.And;\nQueryLogic.ValueOr = comparisons_1$1.Or;\n\nvar canQueryLogic_1_2_4_canQueryLogic = QueryLogic;\n\nfunction deepMatches(a, b) {\n\tif(a === b) {\n\t\treturn true;\n\t} else if(Array.isArray(a) && Array.isArray(b)) {\n\n\t\treturn a.every(function(aVal, i){\n\t\t\treturn deepMatches(aVal, b[i]);\n\t\t});\n\n\t} else if(a && b && canReflect_1_19_2_canReflect.isPlainObject(a) && canReflect_1_19_2_canReflect.isPlainObject(b)) {\n\n\t\tfor(var prop in a) {\n\t\t\tif(!b.hasOwnProperty(prop)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif(!deepMatches(a[prop], b[prop])) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\treturn true;\n\n\t} else {\n\t\treturn false\n\t}\n}\n\nfunction removeFixtureAndXHR(query) {\n\tif(query.fixture || query.xhr || query.data) {\n\t\tvar clone = canReflect_1_19_2_canReflect.serialize(query);\n\t\tdelete clone.fixture;\n\t\tdelete clone.xhr;\n\t\tdelete clone.data;\n\t\treturn clone;\n\t} else {\n\t\treturn query;\n\t}\n}\n\nfunction identityIntersection$1(v1, v2) {\n    return v1.value === v2.value ? v1 : set_1$1.EMPTY;\n}\nfunction identityDifference$1(v1, v2){\n    return v1.value === v2.value ? set_1$1.EMPTY : v1;\n}\nfunction identityUnion$1(v1, v2) {\n    return v1.value === v2.value ? v1 : set_1$1.UNDEFINABLE;\n}\nvar identityComparitor$1 = {\n    intersection: identityIntersection$1,\n    difference: identityDifference$1,\n    union: identityUnion$1\n};\n\n\n\nfunction makeComparatorType(compare) {\n\tvar Type = function(){};\n\tvar SetType = function(value) {\n\t\tthis.value = value;\n\t};\n\tSetType.prototype.isMember = function(value, root, keys){\n\t    return compare(this.value, value, root, keys);\n\t};\n\tcanReflect_1_19_2_canReflect.assignSymbols(Type,{\n\t\t\"can.SetType\": SetType\n\t});\n\n\tset_1$1.defineComparison(SetType,SetType, identityComparitor$1);\n\n\tset_1$1.defineComparison(set_1$1.UNIVERSAL,SetType,{\n\t\tdifference: function(){\n\t\t\treturn set_1$1.UNDEFINABLE;\n\t\t}\n\t});\n\treturn Type;\n}\n\nfunction quickEqual(queryA, queryB){\n\tvar dataA = queryA.data,\n\t\tdataB = queryB.data;\n\tif(dataA && dataB) {\n\t\tif(!deepMatches(dataA, dataB)) {\n\t\t\treturn false;\n\t\t}\n\t}\n\tvar q1 = new canQueryLogic_1_2_4_canQueryLogic.KeysAnd(removeFixtureAndXHR(queryA)),\n\t\tq2 = new canQueryLogic_1_2_4_canQueryLogic.KeysAnd(removeFixtureAndXHR(queryB));\n\treturn set_1$1.isEqual( q1, q2 );\n}\n\nfunction quickSubset(queryA, queryB){\n\treturn set_1$1.isSubset( new canQueryLogic_1_2_4_canQueryLogic.KeysAnd(queryA), new canQueryLogic_1_2_4_canQueryLogic.KeysAnd(queryB) );\n}\n\n// Define types\nvar types$1 = {};\ncanReflect_1_19_2_canReflect.eachKey({\n\tIsEmptyOrNull: function(a, b){\n\t\tif( a == null && canReflect_1_19_2_canReflect.size(b) === 0 ) {\n\t\t\treturn true;\n\t\t} else if( b == null && canReflect_1_19_2_canReflect.size(a) === 0 ) {\n\t\t\treturn true;\n\t\t} else {\n\t\t\treturn quickEqual(a, b);\n\t\t}\n\t},\n\tisEmptyOrSubset: function(a, b) {\n\t\tif( a == null && canReflect_1_19_2_canReflect.size(b) === 0 ) {\n\t\t\treturn true;\n\t\t} else if( b == null && canReflect_1_19_2_canReflect.size(a) === 0 ) {\n\t\t\treturn true;\n\t\t} else {\n\t\t\treturn quickSubset(a, b);\n\t\t}\n\t},\n\tTemplateUrl: function(a, b) {\n\t\treturn !!canFixture_3_1_7_dataFromUrl(a, b);\n\t},\n\tStringIgnoreCase: function(a, b){\n\t\treturn b && a ? a.toLowerCase() === b.toLowerCase() : b === a;\n\t},\n\tIgnore: function(){\n\t\treturn true;\n\t}\n}, function(compare, name){\n\ttypes$1[name] = makeComparatorType(compare);\n});\n\n\n\n\n\nvar schema$1 = {\n\tidentity: [\"id\"],\n\tkeys: {\n\t\turl: types$1.TemplateUrl,\n\t\tfixture: types$1.Ignore,\n\t\txhr: types$1.Ignore,\n\t\ttype: types$1.StringIgnoreCase,\n\t\tmethod: types$1.StringIgnoreCase,\n\t\thelpers: types$1.Ignore,\n\t\theaders: types$1.IsEmptyOrNull,\n\t\tdata: types$1.IsEmptyOrSubset\n\t}\n};\n\nvar query = new canQueryLogic_1_2_4_canQueryLogic(schema$1);\n\n\n\n\nvar canFixture_3_1_7_matches = {\n\tfixture: quickEqual,\n\trequest: function(requestData, fixtureData) {\n\t\treturn query.isMember({filter: fixtureData}, requestData);\n\t},\n\tmatches: function(settings, fixture, exact) {\n\t\tif (exact) {\n\t\t\treturn this.fixture(settings, fixture);\n\t\t} else {\n\t\t\treturn this.request(settings, fixture)\n\t\t}\n\t},\n\tmakeComparatorType: makeComparatorType\n};\n\nfunction getItems(data){\n\tif(Array.isArray(data)) {\n\t\treturn data;\n\t} else {\n\t\treturn data.data;\n\t}\n}\n\nfunction indexOf$1(records, identity, queryLogic ){\n\tvar schema = canReflect_1_19_2_canReflect.getSchema( queryLogic );\n\tfor(var i = 0 ; i < records.length; i++) {\n\t\tif(identity === canReflect_1_19_2_canReflect.getIdentity(records[i],  schema) ) {\n\t\t\treturn i;\n\t\t}\n\t}\n\treturn -1;\n}\n\n// update could remove all other records that would be in the set\nfunction makeSimpleStore(baseConnection) {\n    baseConnection.constructor = makeSimpleStore;\n    var behavior = Object.create(baseConnection);\n\n    // this stores data like:\n    // queries: {[queryKey]: {queryKey, query, recordIds}}\n    // records\n    return canReflect_1_19_2_canReflect.assignMap(behavior, {\n        getRecordFromParams: function(record) {\n        \tvar id = canReflect_1_19_2_canReflect.getIdentity(record, this.queryLogic.schema);\n        \treturn this.getRecord(id);\n        },\n\n        log: function(){\n\t\t\tthis._log = true;\n\t\t},\n\n        getSets: function(){\n\t\t\treturn this.getQueries();\n\t\t},\n\t\tgetQueries: function(){\n\t\t\treturn Promise.resolve(this.getQueriesSync());\n\t\t},\n\t\tgetQueriesSync: function(){\n\t\t\treturn this.getQueryDataSync().map(function(queryData){\n\t\t\t\treturn queryData.query;\n\t\t\t});\n\t\t},\n\n        getListData: function(query){\n        \tquery = query || {};\n        \tvar listData = this.getListDataSync(query);\n        \tif(listData) {\n        \t\treturn Promise.resolve(listData);\n        \t}\n        \treturn Promise.reject({\n        \t\ttitle: \"no data\",\n        \t\tstatus: \"404\",\n        \t\tdetail: \"No data available for this query.\\nAvailable queries: \"+\n        \t\t\tJSON.stringify(this.getQueriesSync())\n        \t});\n        },\n\t\tgetPaginatedListDataSync: function(superSetQueryData) {\n\t\t\tvar records = this.getAllRecords();\n\t\t\tvar queryWithoutPagination = this.queryLogic.removePagination(superSetQueryData.query);\n\t\t\tvar matchingSuperRecordsNoPagination = this.queryLogic.filterMembersAndGetCount(queryWithoutPagination, {}, records);\n\t\t\tvar startIndex = indexOf$1(matchingSuperRecordsNoPagination.data, superSetQueryData.startIdentity, this.queryLogic);\n\t\t\tvar matchingSuperRecords = matchingSuperRecordsNoPagination.data.slice(startIndex, startIndex+ this.queryLogic.count(superSetQueryData.query));\n\t\t\treturn {\n\t\t\t\tcount: matchingSuperRecordsNoPagination.data.length,\n\t\t\t\tdata: matchingSuperRecords\n\t\t\t};\n\t\t},\n        getListDataSync: function(query){\n\t\t\tvar queryData = this.getQueryDataSync(),\n\t\t\t\tsuperSetQueryData,\n\t\t\t\tisPaginated = this.queryLogic.isPaginated(query);\n\n\t\t\tfor(var i = 0; i < queryData.length; i++) {\n        \t\tvar checkSet = queryData[i].query;\n        \t\tif( this.queryLogic.isSubset(query, checkSet) ) {\n\t\t\t\t\tsuperSetQueryData = queryData[i];\n        \t\t}\n        \t}\n\t\t\tvar records = this.getAllRecords();\n\n\t\t\tif(isPaginated && this.queryLogic.isPaginated(superSetQueryData.query) ) {\n\t\t\t\tvar result = this.getPaginatedListDataSync(superSetQueryData);\n\t\t\t\treturn this.queryLogic.filterMembersAndGetCount(query, superSetQueryData.query, result.data);\n\t\t\t}\n\n            var matching = this.queryLogic.filterMembersAndGetCount(query, {}, records);\n            if(matching && matching.count) {\n                return matching;\n            }\n            // now check if we have a query  for it\n        \tif(superSetQueryData) {\n\t\t\t\treturn {count: 0, data: []};\n\t\t\t}\n        },\n\n        updateListData: function(data, query){\n\t\t\tvar queryData = this.getQueryDataSync();\n        \tquery = query || {};\n            var clonedData = canReflect_1_19_2_canReflect.serialize(data);\n        \tvar records = getItems(clonedData);\n\t\t\t// Update or create all records\n\t\t\tthis.updateRecordsSync(records);\n\t\t\tvar isPaginated = this.queryLogic.isPaginated(query);\n\t\t\tvar identity = records.length ? canReflect_1_19_2_canReflect.getIdentity(records[0],  this.queryLogic.schema) : undefined;\n\t\t\tif(isPaginated) {\n\t\t\t\t// we are going to merge with some paginated set\n\t\t\t\tfor(var i = 0; i < queryData.length; i++) {\n\t        \t\tvar checkSet = queryData[i].query;\n\t\t\t\t\tvar union = this.queryLogic.union(checkSet, query);\n\t\t\t\t\tif( this.queryLogic.isDefinedAndHasMembers(union)  ) {\n\t\t\t\t\t\tvar siblingRecords = this.getPaginatedListDataSync(queryData[i]);\n\t\t\t\t\t\tvar res = this.queryLogic.unionMembers(checkSet, query, siblingRecords.data, records );\n\t\t\t\t\t\tidentity = canReflect_1_19_2_canReflect.getIdentity(res[0],  this.queryLogic.schema);\n\t\t\t\t\t\tqueryData[i] = {\n\t\t\t\t\t\t\tquery: union,\n\t\t\t\t\t\t\tstartIdentity: identity\n\t\t\t\t\t\t};\n\t\t\t\t\t\tthis.updateQueryDataSync(queryData);\n\t\t\t\t\t\treturn Promise.resolve();\n\t\t\t\t\t}\n\t        \t}\n\n\t\t\t\tqueryData.push({\n\t\t\t\t\tquery: query,\n\t\t\t\t\tstartIdentity: identity\n\t\t\t\t});\n\t\t\t\tthis.updateQueryDataSync(queryData);\n\t\t\t\treturn Promise.resolve();\n\t\t\t}\n\n            // we need to remove everything that would have matched this query before, but that's not in data\n            // but what if it's in another set -> we remove it\n            var allRecords = this.getAllRecords();\n            var curretMatching = this.queryLogic.filterMembers(query, allRecords);\n            if(curretMatching.length) {\n                var toBeDeleted = new Map();\n                curretMatching.forEach(function(record){\n                    toBeDeleted.set( canReflect_1_19_2_canReflect.getIdentity(record, this.queryLogic.schema), record );\n                }, this);\n\n                // remove what's in records\n                records.forEach(function(record){\n                    toBeDeleted.delete( canReflect_1_19_2_canReflect.getIdentity(record, this.queryLogic.schema) );\n                }, this);\n\n                this.destroyRecords( canReflect_1_19_2_canReflect.toArray(toBeDeleted) );\n            }\n\n            // the queries that are not consumed by query\n            var allQueries = this.getQueryDataSync();\n            var notSubsets = allQueries.filter(function(existingQueryData){\n                    return !this.queryLogic.isSubset(existingQueryData.query, query);\n                }, this),\n                superSets = notSubsets.filter(function(existingQueryData){\n                    return this.queryLogic.isSubset(query, existingQueryData.query);\n                }, this);\n\n\t\t\t// would need to note the first record ... so we can do a query w/o pagination\n\t\t\t//\n\n            // if there are sets that are parents of query\n            if(superSets.length) {\n                this.updateQueryDataSync(notSubsets);\n            } else {\n                this.updateQueryDataSync(notSubsets.concat([{\n\t\t\t\t\tquery: query,\n\t\t\t\t\tstartIdentity:identity\n\t\t\t\t}]));\n            }\n\n        \t// setData.push({query: query, items: data});\n        \treturn Promise.resolve();\n        },\n\n        getData: function(params){\n        \tvar id = canReflect_1_19_2_canReflect.getIdentity(params, canReflect_1_19_2_canReflect.getSchema( this.queryLogic ) );\n        \tvar res = this.getRecord(id);\n        \tif(res){\n        \t\treturn Promise.resolve( res );\n        \t} else {\n        \t\treturn Promise.reject({\n        \t\t\ttitle: \"no data\",\n        \t\t\tstatus: \"404\",\n        \t\t\tdetail: \"No record with matching identity (\"+id+\").\"\n        \t\t});\n        \t}\n        },\n        createData: function(record){\n\t\t\tthis.updateRecordsSync([record]);\n\n\t\t\treturn Promise.resolve(canReflect_1_19_2_canReflect.assignMap({}, this.getRecordFromParams(record) ));\n\t\t},\n\n\t\tupdateData: function(record){\n\n\t\t\tif(this.errorOnMissingRecord && !this.getRecordFromParams(record)) {\n\t\t\t\tvar id = canReflect_1_19_2_canReflect.getIdentity(record, this.queryLogic.schema);\n\t\t\t\treturn Promise.reject({\n\t\t\t\t\ttitle: \"no data\",\n\t\t\t\t\tstatus: \"404\",\n\t\t\t\t\tdetail: \"No record with matching identity (\"+id+\").\"\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tthis.updateRecordsSync([record]);\n\n\t\t\treturn Promise.resolve(canReflect_1_19_2_canReflect.assignMap({},this.getRecordFromParams(record) ));\n\t\t},\n\n\t\tdestroyData: function(record){\n\t\t\tvar id = canReflect_1_19_2_canReflect.getIdentity(record,  this.queryLogic.schema),\n\t\t\t\tsavedRecord = this.getRecordFromParams(record);\n\n\t\t\tif(this.errorOnMissingRecord && !savedRecord) {\n\n\t\t\t\treturn Promise.reject({\n\t\t\t\t\ttitle: \"no data\",\n\t\t\t\t\tstatus: \"404\",\n\t\t\t\t\tdetail: \"No record with matching identity (\"+id+\").\"\n\t\t\t\t});\n\t\t\t}\n            this.destroyRecords([record]);\n\t\t\treturn Promise.resolve(canReflect_1_19_2_canReflect.assignMap({},savedRecord || record));\n\t\t}\n    });\n}\n\nvar canMemoryStore_1_0_3_makeSimpleStore = makeSimpleStore;\n\nvar canMemoryStore_1_0_3_canMemoryStore = canNamespace_1_0_0_canNamespace.memoryStore = function memoryStore(baseConnection){\n    baseConnection.constructor = memoryStore;\n    var behavior = Object.create(canMemoryStore_1_0_3_makeSimpleStore(baseConnection));\n\n    canReflect_1_19_2_canReflect.assignMap(behavior, {\n\t\tclear: function(){\n\t\t\tthis._instances = {};\n\t\t\tthis._queryData = [];\n\t\t},\n\t\t_queryData: [],\n\t\tupdateQueryDataSync: function(queries){\n\t\t\tthis._queryData = queries;\n\t\t},\n\t\tgetQueryDataSync: function(){\n\t\t\treturn this._queryData;\n\t\t},\n\n\t\t_instances: {},\n\t\tgetRecord: function(id){\n\t\t\treturn this._instances[id];\n\t\t},\n\t\tgetAllRecords: function(){\n\t\t\tvar records = [];\n\t\t\tfor(var id in this._instances) {\n\t\t\t\trecords.push(this._instances[id]);\n\t\t\t}\n\t\t\treturn records;\n\t\t},\n\t\tdestroyRecords: function(records) {\n\t\t\tcanReflect_1_19_2_canReflect.eachIndex(records, function(record){\n\t\t\t\tvar id = canReflect_1_19_2_canReflect.getIdentity(record, this.queryLogic.schema);\n\t\t\t\tdelete this._instances[id];\n\t\t\t}, this);\n\t\t},\n\t\tupdateRecordsSync: function(records){\n\t\t\trecords.forEach(function(record){\n\t\t\t\tvar id = canReflect_1_19_2_canReflect.getIdentity(record, this.queryLogic.schema);\n\t\t\t\tthis._instances[id] = record;\n\t\t\t},this);\n\t\t},\n\n\t\t// ## External interface\n\n\t\t/**\n\t\t * @function can-memory-store.getQueries getQueries\n\t\t * @parent can-memory-store.data-methods\n\t\t *\n\t\t * Returns the queries contained within the cache.\n\t\t *\n\t\t * @signature `connection.getQueries()`\n\t\t *\n\t\t *   Returns the queries added by [can-memory-store.updateListData].\n\t\t *\n\t\t *   @return {Promise<Array<can-query-logic/query>>} A promise that resolves to the list of queries.\n\t\t *\n\t\t * @body\n\t\t *\n\t\t * ## Use\n\t\t *\n\t\t * ```js\n\t\t * connection.getSets() //-> Promise( [{type: \"completed\"},{user: 5}] )\n\t\t * ```\n\t\t *\n\t\t */\n\n\t\t/**\n\t\t * @function can-memory-store.clear clear\n\t\t * @parent can-memory-store.data-methods\n\t\t *\n\t\t * Resets the memory store so it contains nothing.\n\t\t *\n\t\t * @signature `connection.clear()`\n\t\t *\n\t\t *   Removes all instances and lists being stored in memory.\n\t\t *\n\t\t *   ```js\n\t\t *   memoryStore({queryLogic: new QueryLogic()});\n\t\t *\n\t\t *   cacheConnection.updateInstance({id: 5, name: \"justin\"});\n\t\t *\n\t\t *   cacheConnection.getData({id: 5}).then(function(data){\n\t\t *     data //-> {id: 5, name: \"justin\"}\n\t\t *     cacheConnection.clear();\n\t\t *     cacheConnection.getData({id: 5}).catch(function(err){\n\t\t *       err -> {message: \"no data\", error: 404}\n\t\t *     });\n\t\t *   });\n\t\t *   ```\n\t\t *\n\t\t */\n\n\t\t/**\n\t\t * @function can-memory-store.getListData getListData\n\t\t * @parent can-memory-store.data-methods\n\t\t *\n\t\t * Gets a list of data from the memory store.\n\t\t *\n\t\t * @signature `connection.getListData(query)`\n\t\t *\n\t\t *   Goes through each query add by [can-memory-store.updateListData]. If\n\t\t *   `query` is a subset, uses [can-connect/base/base.queryLogic] to get the data for the requested `query`.\n\t\t *\n\t\t *   @param {can-query-logic/query} query An object that represents the data to load.\n\t\t *\n\t\t *   @return {Promise<can-connect.listData>} A promise that resolves if `query` is a subset of\n\t\t *   some data added by [can-memory-store.updateListData].  If it is not,\n\t\t *   the promise is rejected.\n\t\t */\n\n\t\t/**\n\t\t * @function can-connect/data/memory-cache.getListDataSync getListDataSync\n\t\t * @parent can-connect/data/memory-cache.data-methods\n\t\t *\n\t\t * Synchronously gets a query of data from the memory cache.\n\t\t *\n\t\t * @signature `connection.getListDataSync(query)`\n\t\t * @hide\n\t\t */\n\n\n\t\t/**\n\t\t * @function can-memory-store.updateListData updateListData\n\t\t * @parent can-memory-store.data-methods\n\t\t *\n\t\t * Saves a query of data in the cache.\n\t\t *\n\t\t * @signature `connection.updateListData(listData, query)`\n\t\t *\n\t\t *   Tries to merge this query of data with any other saved queries of data. If\n\t\t *   unable to merge this data, saves the query by itself.\n\t\t *\n\t\t *   @param {can-connect.listData} listData The data that belongs to `query`.\n\t\t *   @param {can-query-logic/query} query The query `listData` belongs to.\n\t\t *   @return {Promise} Promise resolves if and when the data has been successfully saved.\n\t\t */\n\n\n\t\t/**\n\t\t * @function can-memory-store.getData getData\n\t\t * @parent can-memory-store.data-methods\n\t\t *\n\t\t * Get an instance's data from the memory cache.\n\t\t *\n\t\t * @signature `connection.getData(params)`\n\t\t *\n\t\t *   Looks in the instance store for the requested instance.\n\t\t *\n\t\t *   @param {Object} params An object that should have the [conenction.id] of the element\n\t\t *   being retrieved.\n\t\t *\n\t\t *   @return {Promise} A promise that resolves to the item if the memory cache has this item.\n\t\t *   If the memory cache does not have this item, it rejects the promise.\n\t\t */\n\n\n\n\n\t\t/**\n\t\t * @function can-memory-store.createData createData\n\t\t * @parent can-memory-store.data-methods\n\t\t *\n\t\t * Called when an instance is created and should be added to cache.\n\t\t *\n\t\t * @signature `connection.createData(record)`\n\t\t *\n\t\t *   Adds `record` to the stored list of instances. Then, goes\n\t\t *   through every query and adds record the queries it belongs to.\n\t\t */\n\n\n\t\t/**\n\t\t * @function can-memory-store.updateData updateData\n\t\t * @parent can-memory-store.data-methods\n\t\t *\n\t\t * Called when an instance is updated.\n\t\t *\n\t\t * @signature `connection.updateData(record)`\n\t\t *\n\t\t *   Overwrites the stored instance with the new record. Then, goes\n\t\t *   through every query and adds or removes the instance if it belongs or not.\n\t\t */\n\n\t\t/**\n\t\t * @function can-memory-store.destroyData destroyData\n\t\t * @parent can-memory-store.data-methods\n\t\t *\n\t\t * Called when an instance should be removed from the cache.\n\t\t *\n\t\t * @signature `connection.destroyData(record)`\n\t\t *\n\t\t *   Goes through each query of data and removes any data that matches\n\t\t *   `record`'s [can-connect/base/base.id]. Finally removes this from the instance store.\n\t\t */\n\n\t});\n\n\treturn behavior;\n\n};\n\n// Returns a function that calls the method on a connection.\n// Wires up fixture signature to a connection signature.\nvar connectToConnection = function(method, convert){\n\treturn function(req, res){\n\t\t// have to get data from\n\t\tthis.connection[method]( convert.call(this, req.data) ).then(function(data){\n\t\t\tres(data);\n\t\t}, function(err){\n\t\t\tres(parseInt(err.status, 10), err);\n\t\t});\n\t};\n};\n// Returns a new makeItems function for a different baseItems;\nvar makeMakeItems = function(baseItems, idProp){\n\treturn function () {\n\t\t// clone baseItems\n\t\tvar items = [],\n\t\t\tmaxId = 0,\n\t\t\tidType = \"number\";\n\t\tbaseItems.forEach(function(item){\n\t\t\titems.push(canReflect_1_19_2_canReflect.serialize(item) );\n\t\t\tvar type = typeof item[idProp];\n\t\t\tif(type === \"number\") {\n\t\t\t\tmaxId = Math.max(item[idProp], maxId) ;\n\t\t\t} else {\n\t\t\t\tidType = type;\n\t\t\t}\n\t\t});\n\n\t\treturn {\n\t\t\tmaxId: maxId,\n\t\t\titems: items,\n\t\t\tidType: idType\n\t\t};\n\t};\n};\n\nvar stringToAny = function(str){\n\tswitch(str) {\n\t\tcase \"NaN\":\n\t\tcase \"Infinity\":\n\t\t\treturn +str;\n\t\tcase \"null\":\n\t\t\treturn null;\n\t\tcase \"undefined\":\n\t\t\treturn undefined;\n\t\tcase \"true\":\n\t\tcase \"false\":\n\t\t\treturn str === \"true\";\n\t\tdefault:\n\t\t\tvar val = +str;\n\t\t\tif(!isNaN(val)) {\n\t\t\t\treturn val;\n\t\t\t} else {\n\t\t\t\treturn str;\n\t\t\t}\n\t}\n};\n\n// A store constructor function\nvar Store = function(connection, makeItems, idProp){\n\tvar schema = connection.queryLogic.schema;\n\tvar identityKey = schema.identity[0],\n\t\tkeys = schema.keys;\n\n\tif(!keys || !keys[identityKey]) {\n\t\tconsole.warn(\"No type specified for identity key. Going to convert strings to reasonable type.\");\n\t}\n\n\tthis.connection = connection;\n\tthis.makeItems = makeItems;\n\tthis.idProp = idProp;\n\tthis.reset();\n\t// we have to make sure the methods can be called without their context\n\tfor(var method in Store.prototype) {\n\t\tthis[method] = this[method].bind(this);\n\t}\n};\n\nvar doNotConvert = function(v){ return v; };\n\nfunction typeConvert(data){\n\tvar schema = this.connection.queryLogic.schema;\n\tvar idType = this.idType;\n\tvar identityKey = schema.identity[0],\n\t\tkeys = schema.keys;\n\tif(!keys || !keys[identityKey]) {\n\t\tkeys = {};\n\t\tkeys[identityKey] = function(value) {\n\t\t\tif(idType === \"string\") {\n\t\t\t\treturn \"\"+value;\n\t\t\t} else {\n\t\t\t\treturn typeof value === \"string\" ? stringToAny(value) : value;\n\t\t\t}\n\n\t\t};\n\t}\n\t\t// this probably needs to be recursive, but this is ok for now\n\tvar copy = {};\n\tcanReflect_1_19_2_canReflect.eachKey(data, function(value, key){\n\t\tif(keys[key]) {\n\t\t\tcopy[key] = canReflect_1_19_2_canReflect.serialize(canReflect_1_19_2_canReflect.convert(value, keys[key]));\n\t\t} else {\n\t\t\tcopy[key] = value;\n\t\t}\n\t});\n\t// clone the data\n\n\treturn copy;\n\n}\n\ncanReflect_1_19_2_canReflect.assignMap(Store.prototype,{\n\tgetListData: connectToConnection(\"getListData\",doNotConvert),\n\tgetData: connectToConnection( \"getData\",typeConvert),\n\n\t// used\n\tcreateData: function(req, res){\n\t\tvar idProp = this.idProp;\n\t\t// add an id\n\t\treq.data[idProp] = ++this.maxId;\n\n\t\tthis.connection.createData( typeConvert.call(this,req.data) ).then(function(data){\n\t\t\tres(data);\n\t\t}, function(err){\n\t\t\tres(403, err);\n\t\t});\n\t},\n\tcreateInstance: function(record){\n\t\tvar idProp = this.idProp;\n\t\tif(!(idProp in record)) {\n\t\t\trecord[idProp] = ++this.maxId;\n\t\t}\n\t\treturn this.connection.createData( record );\n\t},\n\tupdateData: connectToConnection(\"updateData\",typeConvert),\n\tupdateInstance: function(record) {\n\t\treturn this.connection.updateData(record);\n\t},\n\tdestroyInstance: function(record) {\n\t\treturn this.connection.destroyData(record);\n\t},\n\tdestroyData: connectToConnection(\"destroyData\",typeConvert),\n\treset: function(newItems){\n\t\tif(newItems) {\n\t\t\tthis.makeItems = makeMakeItems(newItems, this.idProp);\n\t\t}\n\t\tvar itemData =  this.makeItems();\n\t\tthis.maxId = itemData.maxId;\n\t\tthis.idType = itemData.idType;\n\t\tthis.connection.updateListData(itemData.items, {});\n\t},\n\tget: function (params) {\n\t\tvar id = this.connection.queryLogic.memberIdentity(params);\n\t\treturn this.connection.getRecord(id);\n\t},\n\tgetList: function(set){\n\t\treturn this.connection.getListDataSync(set);\n\t}\n});\n\nfunction looksLikeAQueryLogic(obj){\n\treturn obj && (\"identityKeys\" in obj);\n}\n\n// ## fixture.store\n// Make a store of objects to use when making requests against fixtures.\nStore.make = function (count, make, queryLogic) {\n\t/*jshint eqeqeq:false */\n\n\n\t// Figure out makeItems which populates data\n\tvar makeItems,\n\t\tidProp;\n\tif(typeof count === \"number\") {\n\t\tif(!queryLogic) {\n\t\t\tqueryLogic = new canQueryLogic_1_2_4_canQueryLogic({});\n\t\t} else if(!looksLikeAQueryLogic(queryLogic)) {\n\t\t\tqueryLogic = new canQueryLogic_1_2_4_canQueryLogic(queryLogic);\n\t\t}\n\t\tidProp = queryLogic.identityKeys()[0] || \"id\";\n\t\tmakeItems = function () {\n\t\t\tvar items = [];\n\t\t\tvar maxId = 0;\n\t\t\tfor (var i = 0; i < (count); i++) {\n\t\t\t\t//call back provided make\n\t\t\t\tvar item = make(i, items);\n\n\t\t\t\tif (!item[idProp]) {\n\t\t\t\t\titem[idProp] = i;\n\t\t\t\t}\n\t\t\t\tmaxId = Math.max(item[idProp] , maxId);\n\t\t\t\titems.push(item);\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tmaxId: maxId,\n\t\t\t\titems: items\n\t\t\t};\n\t\t};\n\t} else if(Array.isArray(count)){\n\t\tqueryLogic = make;\n\t\tif(!queryLogic) {\n\t\t\tqueryLogic = new canQueryLogic_1_2_4_canQueryLogic({});\n\t\t} else if(!looksLikeAQueryLogic(queryLogic)) {\n\t\t\tqueryLogic = new canQueryLogic_1_2_4_canQueryLogic(queryLogic);\n\t\t}\n\t\tidProp = queryLogic.identityKeys()[0] || \"id\";\n\t\tmakeItems = makeMakeItems(count, idProp);\n\t}\n\n\tvar connection = canMemoryStore_1_0_3_canMemoryStore({\n\t\tqueryLogic: queryLogic,\n\t\terrorOnMissingRecord: true\n\t});\n\n\treturn new Store(connection, makeItems, idProp);\n};\n\nvar canFixture_3_1_7_store = Store;\n\nvar canFixture_3_1_7_core = createCommonjsModule(function (module, exports) {\n// Adds\n\n\n\n\n\n\n\n\n\nvar fixtures = [];\nexports.fixtures = fixtures;\n\nfunction isStoreLike (fixture) {\n\treturn fixture && (fixture.getData || fixture.getListData);\n}\n\nvar methodMapping = {\n\titem: {\n\t\t'GET': 'getData',\n\t\t'PUT': 'updateData',\n\t\t'DELETE': 'destroyData',\n\t},\n\tlist: {\n\t\t'GET': 'getListData',\n\t\t'POST': 'createData'\n\t}\n};\n\nfunction getMethodAndPath (route) {\n\t// Match URL if it has GET, POST, PUT, DELETE or PATCH.\n\tvar matches = route.match(/(GET|POST|PUT|DELETE|PATCH) (.+)/i);\n\tif (!matches) {\n\t\treturn [undefined, route];\n\t}\n\tvar method = matches[1];\n\tvar path = matches[2];\n\treturn [method, path];\n}\n\nfunction inferIdProp (url) {\n\tvar wrappedInBraces = /\\{(.*)\\}/;\n\tvar matches = url.match(wrappedInBraces);\n\tvar isUniqueMatch = matches && matches.length === 2;\n\tif (isUniqueMatch) {\n\t\treturn matches[1];\n\t}\n}\n\nfunction getItemAndListUrls (url, idProp) {\n\tidProp = idProp || inferIdProp(url);\n\tif (!idProp) {\n\t\treturn [undefined, url];\n\t}\n\tvar itemRegex = new RegExp('\\\\/\\\\{' + idProp+\"\\\\}.*\" );\n\tvar rootIsItemUrl = itemRegex.test(url);\n\tvar listUrl = rootIsItemUrl ? url.replace(itemRegex, \"\") : url;\n\tvar itemUrl = rootIsItemUrl ? url : (url.trim() + \"/{\" + idProp + \"}\");\n\treturn [itemUrl, listUrl];\n}\n\nfunction addStoreFixture (root, store) {\n\tvar settings = {};\n\tvar typeAndUrl = getMethodAndPath(root);\n\tvar type = typeAndUrl[0];\n\tvar url = typeAndUrl[1];\n\n\tvar itemAndListUrls = getItemAndListUrls(url, store.idProp);\n\tvar itemUrl = itemAndListUrls[0];\n\tvar listUrl = itemAndListUrls[1];\n\n\tif (type) {\n\t\tvar warning = [\n\t\t\t'fixture(\"' + root + '\", fixture) must use a store method, not a store directly.',\n\t\t];\n\t\tif (itemUrl) {\n\t\t\tvar itemAction = methodMapping.item[type];\n\t\t\tif (itemAction) {\n\t\t\t\tsettings[type + ' ' + itemUrl] = store[itemAction];\n\t\t\t\tvar itemWarning = 'Replace with fixture(\"' + type + ' ' + itemUrl + '\", fixture.' + itemAction + ') for items.';\n\t\t\t\twarning.push(itemWarning);\n\t\t\t}\n\t\t}\n\t\tvar listAction = methodMapping.list[type];\n\t\tif (listAction) {\n\t\t\tsettings[type + ' ' + listUrl] = store[listAction];\n\t\t\tvar listWarning = 'Replace with fixture(\"' + type + ' ' + listUrl + '\", fixture.' + listAction + ') for lists.';\n\t\t\twarning.push(listWarning);\n\t\t}\n\t\tvar message = warning.join(' ');\n\t\tdev.warn(message);\n\t} else {\n\t\tvar itemMapping = methodMapping.item;\n\t\tfor (var itemMethod in itemMapping) {\n\t\t\tvar storeItemMethod = itemMapping[itemMethod];\n\t\t\tsettings[itemMethod + ' ' + itemUrl] = store[storeItemMethod];\n\t\t}\n\t\tvar listMapping = methodMapping.list;\n\t\tfor (var listMethod in listMapping) {\n\t\t\tvar storeListMethod = listMapping[listMethod];\n\t\t\tsettings[listMethod + ' ' + listUrl] = store[storeListMethod];\n\t\t}\n\t}\n\n\treturn settings;\n}\n\nfunction getSettingsFromString (route) {\n\tvar typeAndUrl = getMethodAndPath(route);\n\tvar type = typeAndUrl[0];\n\tvar url = typeAndUrl[1];\n\tif (type) {\n\t\treturn {\n\t\t\ttype: type,\n\t\t\turl: url\n\t\t};\n\t}\n\treturn {\n\t\turl: url\n\t};\n}\n\n// Check if the same fixture was previously added, if so, we remove it\n// from our array of fixture overwrites.\nfunction upsertFixture (fixtureList, settings, fixture) {\n\tvar index = exports.index(settings, true);\n\tvar oldFixture;\n\tif (index > -1) {\n\t\toldFixture = fixtures.splice(index, 1);\n\t}\n\tif (fixture == null) {\n\t\treturn oldFixture;\n\t}\n\tif(typeof fixture === \"object\") {\n\t\tvar data = fixture;\n\t\tfixture = function(){\n\t\t\treturn data;\n\t\t};\n\t}\n\tsettings.fixture = fixture;\n\tfixtures.unshift(settings);\n\treturn oldFixture;\n}\n\n// Adds a fixture to the list of fixtures.\nexports.add = function (settings, fixture) {\n\t// If a fixture isn't provided, we assume that settings is\n\t// an array of fixtures, and we should iterate over it, and set up\n\t// the new fixtures.\n\tif (fixture === undefined) {\n\t\tvar oldFixtures = [];\n\t\tif(Array.isArray(settings)) {\n\t\t\tcanReflect_1_19_2_canReflect.eachIndex(settings, function(ajaxSettings){\n\t\t\t\tvar fixture = ajaxSettings.fixture;\n\t\t\t\tajaxSettings = canReflect_1_19_2_canReflect.assignMap({}, ajaxSettings);\n\t\t\t\tdelete ajaxSettings.fixture;\n\t\t\t\treturn exports.add(ajaxSettings, fixture);\n\t\t\t});\n\t\t} else {\n\t\t\tcanReflect_1_19_2_canReflect.eachKey(settings, function (fixture, url) {\n\t\t\t\toldFixtures = oldFixtures.concat(exports.add(url, fixture));\n\t\t\t});\n\t\t\treturn oldFixtures;\n\t\t}\n\t}\n\n\t// When a fixture is passed a store like:\n\t// `fixture(\"/things/{id}\", store)`\n\tif (isStoreLike(fixture)) {\n\t\tsettings = addStoreFixture(settings, fixture);\n\t\treturn exports.add(settings);\n\t}\n\n\tif (typeof settings === 'string') {\n\t\tsettings = getSettingsFromString(settings);\n\t}\n\treturn upsertFixture(fixtures, settings, fixture);\n};\n\nvar $fixture = exports.add;\n$fixture.on = true;\n$fixture.delay =10;\n\nfunction FixtureResponse(fixture, response){\n\tthis.statusCode= response[0];\n\tthis.responseBody= response[1];\n\tthis.headers= response[2];\n\tthis.statusText= response[3];\n\tthis.fixture= fixture;\n}\n\n// Calls a dynamic fixture and calls `cb` with the response data.\nexports.callDynamicFixture = function(xhrSettings, fixtureSettings, cb){\n\t// this is for legacy.  In the future, people should get it from fixtureSettings probably.\n\txhrSettings.data = fixtureSettings.data;\n\n\t//!steal-remove-start\n\tif(process.env.NODE_ENV !== 'production') {\n\t\tvar json = JSON.stringify(xhrSettings.data);\n\t\tcanLog_1_0_2_canLog.log(\"\" + xhrSettings.type.toUpperCase() + \" \" + xhrSettings.url+\" \"+json.substr(0,50)+\" -> handler(req,res)\");\n\t}\n\t//!steal-remove-end\n\n\tvar response = function(){\n\t\tvar res = exports.extractResponse.apply(xhrSettings, arguments);\n\t\t//!steal-remove-start\n\t\tcanLog_1_0_2_canLog.log(\"can-fixture: \" + xhrSettings.type.toUpperCase() + \" \" + xhrSettings.url+\" \",xhrSettings.data,\" => \",new FixtureResponse(fixtureSettings.fixture,res));\n\t\t//!steal-remove-end\n\t\treturn cb.apply(this, res);\n\t};\n\tvar callFixture = function () {\n\t\t// fall the fixture\n\t\tvar result = fixtureSettings.fixture(xhrSettings, response, xhrSettings.headers, fixtureSettings);\n\n\t\tif (canReflect_1_19_2_canReflect.isPromise(result)) {\n\t\t\t// If we have a promise, wait for it to resolve\n\t\t\tresult.then(function (result) {\n\t\t\t\tif (result !== undefined) {\n\t\t\t\t\t// Resolve with fixture results\n\t\t\t\t\tresponse(200, result );\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\tif (result !== undefined) {\n\t\t\t\t// Resolve with fixture results\n\t\t\t\tresponse(200, result );\n\t\t\t}\n\t\t}\n\t};\n\n\tif(!xhrSettings.async) {\n\t\tcallFixture();\n\t\treturn null;\n\t} else {\n\t\treturn setTimeout(callFixture, $fixture.delay);\n\t}\n};\n\nexports.index = function (settings, exact) {\n\tfor (var i = 0; i < fixtures.length; i++) {\n\t\tif (canFixture_3_1_7_matches.matches(settings, fixtures[i], exact)) {\n\t\t\treturn i;\n\t\t}\n\t}\n\treturn -1;\n};\nexports.get = function(xhrSettings) {\n\tif ( !$fixture.on ) {\n\t\treturn;\n\t}\n\t// First try an exact match\n\tvar index = exports.index(xhrSettings, true);\n\n\t// If that doesn't work, try a looser match.\n\tif(index === -1) {\n\t\tindex = exports.index(xhrSettings, false);\n\t}\n\n\tvar fixtureSettings = index >=0 ? canReflect_1_19_2_canReflect.assignMap({},fixtures[index]) : undefined;\n\tif(fixtureSettings) {\n\t\tvar url = fixtureSettings.fixture,\n\t\t\tdata = canFixture_3_1_7_dataFromUrl(fixtureSettings.url, xhrSettings.url);\n\t\tif(typeof fixtureSettings.fixture === \"string\") {\n\t\t\t// check that we might have a replacement\n\n\t\t\t// here we could read data from first url and translate into next\n\t\t\tif (data) {\n\t\t\t\t// Template static fixture URLs\n\t\t\t\turl = sub(url, data);\n\t\t\t}\n\n\t\t\t// Override the AJAX settings, changing the URL to the fixture file,\n\t\t\t// removing the data, and changing the type to GET.\n\t\t\tfixtureSettings.url = url;\n\t\t\tfixtureSettings.data = null;\n\t\t\tfixtureSettings.type = \"GET\";\n\t\t\tif (!fixtureSettings.error) {\n\t\t\t\t// If no error handling is provided, we provide one and throw an\n\t\t\t\t// error.\n\t\t\t\tfixtureSettings.error = function (xhr, error$$1, message) {\n\t\t\t\t\tthrow \"fixtures.js Error \" + error$$1 + \" \" + message;\n\t\t\t\t};\n\t\t\t}\n\n\t\t} else if (canReflect_1_19_2_canReflect.isPlainObject(xhrSettings.data) || xhrSettings.data == null) {\n\t\t\tvar xhrData = canReflect_1_19_2_canReflect.assignMap({}, xhrSettings.data || {});\n\t\t\tfixtureSettings.data = canReflect_1_19_2_canReflect.assignMap(xhrData, data);\n\n\t\t} else {\n\t\t\tfixtureSettings.data = xhrSettings.data;\n\t\t}\n\t}\n\n\treturn fixtureSettings;\n};\n\nexports.matches = canFixture_3_1_7_matches;\n\n\n\n\n// A helper function that takes what's called with response\n// and moves some common args around to make it easier to call\nexports.extractResponse = function (status, response, headers, statusText) {\n\t// if we get response(RESPONSE, HEADERS)\n\tif (typeof status !== \"number\") {\n\t\theaders = response;\n\t\tresponse = status;\n\t\tstatus = 200;\n\t}\n\t// if we get response(200, RESPONSE, STATUS_TEXT)\n\tif (typeof headers === \"string\") {\n\t\tstatusText = headers;\n\t\theaders = {};\n\t}\n\treturn [status, response, headers, statusText];\n};\n});\nvar canFixture_3_1_7_core_1 = canFixture_3_1_7_core.fixtures;\nvar canFixture_3_1_7_core_2 = canFixture_3_1_7_core.add;\nvar canFixture_3_1_7_core_3 = canFixture_3_1_7_core.callDynamicFixture;\nvar canFixture_3_1_7_core_4 = canFixture_3_1_7_core.index;\nvar canFixture_3_1_7_core_5 = canFixture_3_1_7_core.get;\nvar canFixture_3_1_7_core_6 = canFixture_3_1_7_core.matches;\nvar canFixture_3_1_7_core_7 = canFixture_3_1_7_core.extractResponse;\n\n/* global require, window, global */\n/* global setTimeout, clearTimeout, XMLHttpRequest */\n\n// This overwrites the default XHR with a mock XHR object.\n// The mock XHR object's `.send` method is able to\n// call the fixture callbacks or create a real XHR request\n// and then respond normally.\n\n\n\n\n\n// Save the real XHR object as XHR\nvar XHR = XMLHttpRequest,\n// Get a global reference.\n\tGLOBAL = typeof commonjsGlobal !== \"undefined\"? commonjsGlobal : window;\n\n// Figure out props and events on XHR object\n// but start with some defaults\nvar props$2 = [\n\t\"type\", \"url\", \"async\", \"response\", \"responseText\", \"responseType\",\n\t\"responseXML\", \"responseURL\", \"status\", \"statusText\", \"readyState\"\n];\nvar events = [\"abort\", \"error\", \"load\", \"loadend\", \"loadstart\",  \"progress\", \"readystatechange\"];\n(function(){\n\tvar x = new XHR();\n\tfor(var prop in x) {\n\t\tif(prop.indexOf(\"on\") === 0) {\n\t\t\tif (events.indexOf(prop.substr(2)) === -1) {\n\t\t\t\tevents.push(prop.substr(2));\n\t\t\t}\n\t\t} else if (props$2.indexOf(prop) === -1 && typeof x[prop] !== 'function') {\n\t\t\tprops$2.push(prop);\n\t\t}\n\t}\n})();\n// DEFINE HELPERS\n\n// Call all of an event for an XHR object\nfunction callEvents(xhr, ev) {\n\tvar evs = xhr.__events[ev] || [], fn;\n\tfor(var i = 0, len = evs.length; i < len; i++) {\n\t\tfn = evs[i];\n\t\tfn.call(xhr);\n\t}\n}\n\nfunction defineNonEnumerable$2(obj, prop, value) {\n\tObject.defineProperty(obj, prop, {\n\t\tenumerable: false,\n\t\tconfigurable: true,\n\t\twritable: true,\n\t\tvalue: value\n\t});\n}\n\nGLOBAL.XMLHttpRequest = function() {\n\tvar mockXHR = this;\n\tvar realXHR = new XHR();\n\n\t// store real xhr on mockXHR\n\tdefineNonEnumerable$2(this, \"_xhr\", realXHR);\n\n\t// create other properties needed by prototype functions\n\tdefineNonEnumerable$2(this, \"_requestHeaders\", {});\n\tdefineNonEnumerable$2(this, \"__events\", {});\n\n\t// wire up events to forward from real xhr to fake xhr\n\tevents.forEach(function(eventName) {\n\t\trealXHR[\"on\" + eventName] = function() {\n\t\t\tcallEvents(mockXHR, eventName);\n\t\t\tif(mockXHR[\"on\"+eventName]) {\n\t\t\t\treturn mockXHR[\"on\"+eventName].apply(mockXHR, arguments);\n\t\t\t}\n\t\t};\n\t});\n\n\t// The way code detects if the browser supports onload is to check\n\t// if a new XHR object has the onload property, so setting it to null\n\t// passes that check.\n\tthis.onload = null;\n};\nGLOBAL.XMLHttpRequest._XHR = XHR;\n\n// Methods on the mock XHR:\ncanReflect_1_19_2_canReflect.assignMap(XMLHttpRequest.prototype,{\n\tsetRequestHeader: function(name, value){\n\t\tthis._requestHeaders[name] = value;\n\t},\n\topen: function(type, url, async){\n\t\tthis.type = type;\n\t\tthis.url = url;\n\t\tthis.async = async === false ? false : true;\n\t},\n\tgetAllResponseHeaders: function(){\n\t\treturn this._xhr.getAllResponseHeaders.apply(this._xhr, arguments);\n\t},\n\taddEventListener: function(ev, fn){\n\t\tvar evs = this.__events[ev] = this.__events[ev] || [];\n\t\tevs.push(fn);\n\t},\n\tremoveEventListener: function(ev, fn){\n\t\tvar evs = this.__events[ev] = this.__events[ev] || [];\n\t\tvar idx = evs.indexOf(fn);\n\t\tif(idx >= 0) {\n\t\t\tevs.splice(idx, 1);\n\t\t}\n\t},\n\tsetDisableHeaderCheck: function(val){\n\t\tthis._disableHeaderCheck = !!val;\n\t},\n\tgetResponseHeader: function(key){\n\t\treturn this._xhr.getResponseHeader(key);\n\t},\n\tabort: function() {\n\t\tvar xhr = this._xhr;\n\n\t\t// If we are aborting a delayed fixture we have to make the fake\n\t\t// steps that are expected for `abort` to\n\t\tif(this.timeoutId !== undefined) {\n\t\t\tclearTimeout(this.timeoutId);\n\t\t\txhr.open(this.type, this.url, this.async === false ? false : true);\n\t\t\txhr.send();\n\t\t}\n\n\t\treturn xhr.abort();\n\t},\n\t// This needs to compile the information necessary to see if\n\t// there is a corresponding fixture.\n\t// If there isn't a fixture, this should create a real XHR object\n\t// linked to the mock XHR instance and make a data request.\n\t// If there is a fixture, depending on the type of fixture the following happens:\n\t// - dynamic fixtures - call the dynamic fixture, use the result to update the\n\t//   mock XHR object and trigger its callbacks.\n\t// - redirect fixtures - create a real XHR linked to the mock XHR for the new url.\n\tsend: function(data) {\n\t\t// derive the XHR settings object from the XHR object\n\t\tvar type = this.type.toLowerCase() || 'get';\n\t\tvar xhrSettings = {\n\t\t\turl: this.url,\n\t\t\tdata: data,\n\t\t\theaders: this._requestHeaders,\n\t\t\ttype: type,\n\t\t\tmethod: type,\n\t\t\tasync: this.async,\n\t\t\txhr: this\n\t\t};\n\t\t// if get or delete, the url should not include the querystring.\n\t\t// the querystring should be the data.\n\t\tif(!xhrSettings.data && xhrSettings.type === \"get\" || xhrSettings.type === \"delete\") {\n\t\t\txhrSettings.data = canDeparam_1_2_3_canDeparam( xhrSettings.url.split(\"?\")[1] );\n\t\t\txhrSettings.url = xhrSettings.url.split(\"?\")[0];\n\t\t}\n\n\t\t// Try to convert the request body to POJOs.\n\t\tif(typeof xhrSettings.data === \"string\") {\n\t\t\ttry {\n\t\t\t\txhrSettings.data = JSON.parse(xhrSettings.data);\n\t\t\t} catch(e) {\n\t\t\t\txhrSettings.data = canDeparam_1_2_3_canDeparam( xhrSettings.data );\n\t\t\t}\n\t\t}\n\n\t\t// See if the XHR settings match a fixture.\n\t\tvar fixtureSettings = canFixture_3_1_7_core.get(xhrSettings);\n\t\tvar mockXHR = this;\n\n\t\t// If a dynamic fixture is being used, we call the dynamic fixture function and then\n\t\t// copy the response back onto the `mockXHR` in the right places.\n\t\tif(fixtureSettings && typeof fixtureSettings.fixture === \"function\") {\n\n\t\t\tthis.timeoutId = canFixture_3_1_7_core.callDynamicFixture(xhrSettings, fixtureSettings, function(status, body, headers, statusText){\n\t\t\t\tbody = typeof body === \"string\" ? body :  JSON.stringify(body);\n\n\t\t\t\t// we are no longer using the real XHR\n\t\t\t\t// set it to an object so that props like readyState can be set\n\t\t\t\tmockXHR._xhr = {\n\t\t\t\t\topen: function(){},\n\t\t\t\t\tsend: function() {},\n\t\t\t\t\tabort: function(){},\n\t\t\t\t\tgetResponseHeader: function(){}\n\t\t\t\t};\n\n\t\t\t\tcanReflect_1_19_2_canReflect.assignMap(mockXHR, {\n\t\t\t\t\treadyState: 4,\n\t\t\t\t\tstatus: status\n\t\t\t\t});\n\n\t\t\t\tvar success = (status >= 200 && status < 300 || status === 304);\n\t\t\t\tif ( success ) {\n\t\t\t\t\tcanReflect_1_19_2_canReflect.assignMap(mockXHR,{\n\t\t\t\t\t\tstatusText: statusText || \"OK\",\n\t\t\t\t\t\tresponseText: body\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tcanReflect_1_19_2_canReflect.assignMap(mockXHR,{\n\t\t\t\t\t\tstatusText: statusText || \"error\",\n\t\t\t\t\t\tresponseText: body\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tmockXHR.getAllResponseHeaders = function() {\n\t\t\t\t\tvar ret = [];\n\t\t\t\t\tcanReflect_1_19_2_canReflect.eachKey(headers || {}, function(value, name) {\n\t\t\t\t\t\tArray.prototype.push.apply(ret, [name, ': ', value, '\\r\\n']);\n\t\t\t\t\t});\n\t\t\t\t\treturn ret.join('');\n\t\t\t\t};\n\n\t\t\t\tif(mockXHR.onreadystatechange) {\n\t\t\t\t\tmockXHR.onreadystatechange({ target: mockXHR });\n\t\t\t\t}\n\n\t\t\t\t// fire progress events\n\t\t\t\tcallEvents(mockXHR, \"progress\");\n\t\t\t\tif(mockXHR.onprogress) {\n\t\t\t\t\tmockXHR.onprogress();\n\t\t\t\t}\n\n\t\t\t\tcallEvents(mockXHR, \"load\");\n\t\t\t\tif(mockXHR.onload) {\n\t\t\t\t\tmockXHR.onload();\n\t\t\t\t}\n\n\t\t\t\tcallEvents(mockXHR, \"loadend\");\n\t\t\t\tif(mockXHR.onloadend) {\n\t\t\t\t\tmockXHR.onloadend();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn;\n\t\t}\n\t\t// At this point there is either not a fixture or a redirect fixture.\n\t\t// Either way we are doing a request.\n\t\tvar makeRequest = function() {\n\t\t\tmockXHR._xhr.open(mockXHR._xhr.type, mockXHR._xhr.url, mockXHR._xhr.async);\n\t\t\tif(mockXHR._requestHeaders) {\n\t\t\t\tObject.keys(mockXHR._requestHeaders).forEach(function(key) {\n\t\t\t\t\tmockXHR._xhr.setRequestHeader(key, mockXHR._requestHeaders[key]);\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn mockXHR._xhr.send(data);\n\t\t};\n\n\t\tif(fixtureSettings && typeof fixtureSettings.fixture === \"number\") {\n\t\t\tcanLog_1_0_2_canLog.log(\"can-fixture: \"+xhrSettings.url+\" => delay \" + fixtureSettings.fixture+\"ms\");\n\t\t\tthis.timeoutId = setTimeout(makeRequest, fixtureSettings.fixture);\n\t\t\treturn;\n\t\t}\n\n\t\t// if we do have a fixture, update the real XHR object.\n\t\tif(fixtureSettings) {\n\t\t\tcanLog_1_0_2_canLog.log(\"can-fixture: \"+xhrSettings.url+\" => \" + fixtureSettings.url);\n\t\t\tcanReflect_1_19_2_canReflect.assignMap(mockXHR, fixtureSettings);\n\t\t}\n\n\t\t// Make the request.\n\t\treturn makeRequest();\n\t}\n});\n\n// when props of mockXHR are get/set, return the prop from the real XHR\nprops$2.forEach(function(prop) {\n\tObject.defineProperty(XMLHttpRequest.prototype, prop, {\n\t\tget: function(){\n\t\t\treturn this._xhr[prop];\n\t\t},\n\t\tset: function(newVal){\n\t\t\ttry {\n\t\t\t\tthis._xhr[prop] = newVal;\n\t\t\t} catch(e) {}\n\t\t}\n\t});\n});\n\nvar fixture = canFixture_3_1_7_core.add;\n\n\n\n\n\n// HELPERS START\n\nvar noop$2 = function(){};\n\ncanReflect_1_19_2_canReflect.assignMap(fixture, {\n\trand: function randomize (arr, min, max) {\n\t\tif (typeof arr === 'number') {\n\t\t\tif (typeof min === 'number') {\n\t\t\t\treturn arr + Math.floor(Math.random() * (min - arr+1));\n\t\t\t} else {\n\t\t\t\treturn Math.floor(Math.random() * (arr+1));\n\t\t\t}\n\n\t\t}\n\t\t// clone the array because we will remove items from it.\n\t\tvar choices = arr.slice(0);\n\n\t\t// get a random set\n\t\tif (min === undefined) {\n\t\t\tmin = 1;\n\t\t\tmax = choices.length;\n\t\t} else if(max === undefined){\n\t\t\tmax = min;\n\t\t}\n\t\t// get a random selection of arr\n\t\tvar result = [];\n\n\t\t// set max\n\t\t//random max\n\t\tvar selectedCount = min + Math.round(randomize(max - min));\n\t\tfor (var i = 0; i < selectedCount; i++) {\n\t\t\tvar selectedIndex = randomize(choices.length - 1),\n\t\t\t\tselected = choices.splice(selectedIndex, 1)[0];\n\t\t\tresult.push(selected);\n\t\t}\n\t\treturn result;\n\t},\n\txhr: function (xhr) {\n\t\treturn canReflect_1_19_2_canReflect.assignMap({}, {\n\t\t\tabort: noop$2,\n\t\t\tgetAllResponseHeaders: function () {\n\t\t\t\treturn \"\";\n\t\t\t},\n\t\t\tgetResponseHeader: function () {\n\t\t\t\treturn \"\";\n\t\t\t},\n\t\t\topen: noop$2,\n\t\t\toverrideMimeType: noop$2,\n\t\t\treadyState: 4,\n\t\t\tresponseText: \"\",\n\t\t\tresponseXML: null,\n\t\t\tsend: noop$2,\n\t\t\tsetRequestHeader: noop$2,\n\t\t\tstatus: 200,\n\t\t\tstatusText: \"OK\"\n\t\t}, xhr);\n\t},\n\tstore: canFixture_3_1_7_store.make,\n\tfixtures: canFixture_3_1_7_core.fixtures\n});\n\nif(typeof window !== \"undefined\" && typeof commonjsRequire.resolve !== \"function\") {\n\n\twindow.fixture = function(){\n\t\tdev.warn(\"You are using the global fixture. Make sure you import can-fixture.\");\n\n\t\treturn fixture.apply(this, arguments);\n\t};\t\n}\n\n\nvar canFixture_3_1_7_fixture = canNamespace_1_0_0_canNamespace.fixture = fixture;\n\nvar behaviorsMap = {};\n\nfunction behavior(name, behavior){\n\tif(typeof name !== \"string\") {\n\t\tbehavior = name;\n\t\tname = undefined;\n\t}\n\tvar behaviorMixin = function(base){\n\t\t// basically Object.create\n\t\tvar Behavior = function(){};\n\t\tObject.defineProperty(Behavior,\"name\",{\n\t\t\tvalue: name,\n\t\t\tconfigurable: true\n\t\t});\n\t\tBehavior.prototype = base;\n\t\tvar newBehavior = new Behavior();\n\t\t// allows behaviors to be a simple object, not always a function\n\t\tvar res = typeof behavior === \"function\" ? behavior.apply(newBehavior, arguments) : behavior;\n\t\tfor(var prop in res) {\n\t\t\tif(res.hasOwnProperty(prop)) {\n\t\t\t\tObject.defineProperty(newBehavior, prop, Object.getOwnPropertyDescriptor(res, prop));\n\t\t\t} else {\n\t\t\t\t// we only copy values from up the proto chain\n\t\t\t\tnewBehavior[prop] = res[prop];\n\t\t\t}\n\t\t}\n\t\tnewBehavior.__behaviorName = name;\n\t\treturn newBehavior;\n\t};\n\tif(name) {\n\t\tbehaviorMixin.behaviorName = name;\n\t\tbehaviorsMap[name] = behaviorMixin;\n\t}\n\tbehaviorMixin.isBehavior = true;\n\treturn behaviorMixin;\n}\nbehavior.map = behaviorsMap;\nvar canConnect_4_0_6_behavior = behavior;\n\nvar behavior$1 = canConnect_4_0_6_behavior;\n\n/**\n *\n * @param {Array<String,Behavior,function>} behaviors - An array of behavior names or custom behaviors.\n * The order of named execution gets run in order.\n * @param {Object} options\n * @hide\n */\nvar connect = function(behaviors, options){\n\n\tbehaviors = behaviors.map(function(behavior, index){\n\t\tvar sortedIndex = -1;\n\t\tif(typeof behavior === \"string\") {\n\t\t\tsortedIndex = connect.order.indexOf(behavior);\n\t\t\tbehavior = behavior.map[behavior];\n\t\t} else if(behavior.isBehavior) {\n\t\t\tsortedIndex = connect.order.indexOf(behavior.behaviorName);\n\t\t} else {\n\t\t\tbehavior = connect.behavior(behavior);\n\t\t}\n\n\t\treturn {\n\t\t\toriginalIndex: index,\n\t\t\tsortedIndex: sortedIndex,\n\t\t\tbehavior: behavior\n\t\t};\n\t});\n\n\tbehaviors.sort(function(b1, b2){\n\t\t// if both have a sorted index\n\t\tif(~b1.sortedIndex && ~b2.sortedIndex) {\n\t\t\treturn b1.sortedIndex - b2.sortedIndex;\n\t\t}\n\t\treturn b1.originalIndex - b2.originalIndex;\n\t});\n\n\tbehaviors = behaviors.map(function(b){\n\t\treturn b.behavior;\n\t});\n\n\tvar behavior = connect.base( connect.behavior(\"options\",function(){return options; })() );\n\n\tbehaviors.forEach(function(behave){\n\t\tbehavior = behave(behavior);\n\t});\n\tif(behavior.init) {\n\t\tbehavior.init();\n\t}\n\treturn behavior;\n};\n\n\n\nconnect.order = [\"data/localstorage-cache\",\"data/url\",\"data/parse\",\"cache-requests\",\"data/combine-requests\",\n\n\t\"constructor\",\"constructor/store\",\"can/map\",\"can/ref\",\n\t\"fall-through-cache\",\n\n\t\"data/worker\",\"real-time\",\n\n\t\"data/callbacks-cache\",\"data/callbacks\",\"constructor/callbacks-once\"\n];\n\nconnect.behavior = behavior$1;\n\n\n\nvar canConnect_4_0_6_connect= connect;\n\n/**\n * @module can-connect/base/base base\n * @group can-connect/base/base.options 0 behavior options\n * @group can-connect/base/base.identifiers 1 identifiers\n * @parent can-connect.behaviors\n *\n * The first behavior added to every `can-connect` connection. Provides methods to uniquely identify instances and\n * lists.\n *\n * @signature `base(connectionOptions)`\n *\n * Provides instance and list identifiers. Added automatically to every connection created by the `connect` helper.\n * So even if we do:\n *\n * ```js\n * var connection = connect([],{});\n * ```\n *\n * The connection still has the identification functionality provided by `base`:\n *\n * ```js\n * connection.id({id: 1, ...}) //-> 1\n * ```\n *\n * `can-connect` connections are typically created by the `connect` helper rather than by calling the behaviors directly.\n * This ensures the behaviors are called in the required order and is more elegant than requiring the user to chain\n * together the calls to all the behaviors.\n *\n * See the [can-connect/base/base.id id] and [can-connect/base/base.listQuery listQuery] methods for more specifics on\n * how ids are determined.\n *\n * @param {Object} connectionOptions Object containing the configuration for the behaviors of the connection. Added to the\n * prototype of the returned connection object. `base` is almost always configured with an [can-connect/base/base.queryLogic] option since it\n * [can-connect/base/base.id defines how to read the identity properties] and the majority of behaviors also require the queryLogic.\n *\n * @return {Object} A `can-connect` connection containing the methods provided by `base`.\n */\nvar base = canConnect_4_0_6_behavior(\"base\",function(baseConnection){\n\tvar setQueryLogic;\n\treturn {\n\t\t/**\n\t\t * @function can-connect/base/base.id id\n\t\t * @parent can-connect/base/base.identifiers\n\t\t *\n\t\t * Uniquely identify an instance or raw instance data.\n\t\t *\n\t\t * @signature `connection.id(instance)`\n\t\t *\n\t\t *   Returns the instance id as determined by [can-connect/base/base.queryLogic]'s id values.\n\t\t *\n\t\t *   @param {Instance|Object} instance An instance or raw properties for an instance.\n\t\t *\n\t\t *   @return {String|Number} A string or number uniquely representing `instance`.\n\t\t *\n\t\t *\n\t\t * @body\n\t\t *\n\t\t * ## Use\n\t\t *\n\t\t * Many behaviors, such as the [can-connect/constructor/store/store], need to have a unique identifier for an\n\t\t * instance or instance data.  This `connection.id` method should return that.\n\t\t *\n\t\t * Typically, an item's id is a simply property value on the object. For example, \"Todo\" data might look like:\n\t\t *\n\t\t * ```js\n\t\t * {_id: 5, name: \"do the dishes\"}\n\t\t * ```\n\t\t *\n\t\t * In this case, [can-connect/base/base.queryLogic]'s `id` property should be set to \"_id\":\n\t\t *\n\t\t * ```js\n\t\t * import QueryLogic from \"can-query-logic\";\n\t\t *\n\t\t * var queryLogic = new QueryLogic({\n\t\t *   identity: [\"_id\"]\n\t \t * });\n\t\t *\n\t\t * connect([...],{queryLogic: queryLogic});\n\t\t * ```\n\t\t *\n\t\t */\n\t\tid: function(instance){\n\t\t\tif(this.queryLogic) {\n\t\t\t\treturn canReflect_1_19_2_canReflect.getIdentity(instance, this.queryLogic.schema);\n\t\t\t} else if(this.idProp) {\n\t\t\t\treturn instance[this.idProp];\n\t\t\t} else {\n\t\t\t\tthrow new Error(\"can-connect/base/base - Please add a queryLogic option.\");\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * @function can-connect/base/base.listQuery listQuery\n\t\t * @parent can-connect/base/base.identifiers\n\t\t *\n\t\t * Uniquely identify the set of data a list contains.\n\t\t *\n\t\t * @signature `connection.listQuery(list)`\n\t\t *\n\t\t *   Returns the value of the property referenced by [can-connect/base/base.listQueryProp] if it exists.\n\t\t *   By default, this will return `list[Symbol.for(\"can.listQuery\")]`.\n\t\t *\n\t\t *   @param {can-connect.List} list A list instance.\n\t\t *\n\t\t *   @return {can-query-logic/query} An object that can be passed to `JSON.stringify` to represent the list.\n\t\t *\n\t\t * @body\n\t\t *\n\t\t * ## Use\n\t\t *\n\t\t * Many behaviors, such as the [can-connect/constructor/store/store], need to have a unique identifier for a list.\n\t\t * This `connection.listQuery` method should return that.\n\t\t *\n\t\t * Typically, a list's set identifier is a property on the list object.  As example, a list of Todos might look like\n\t\t * the following:\n\t\t *\n\t\t * ```js\n\t\t * var dueTodos = todoConnection.getList({filter: {due: \"today\"}});\n\t\t * dueTodos; // [{_id: 5, name: \"do dishes\", due:\"today\"}, {_id: 6, name: \"walk dog\", due:\"today\"}, ...]\n\t\t * dueTodos[Symbol.for(\"can.listQuery\")]; //-> {filter: {due: \"today\"}}\n\t\t * todoConnection.listQuery(dueTodos); //-> {filter: {due: \"today\"}}\n\t\t * ```\n\t\t *\n\t\t * In the above example the [can-connect/base/base.listQueryProp] would be the default `@can.listQuery`.\n\t\t */\n\t\tlistQuery: function(list){\n\t\t\treturn list[this.listQueryProp];\n\t\t},\n\n\t\t/**\n\t\t * @property {Symbol} can-connect/base/base.listQueryProp listQueryProp\n\t\t * @parent can-connect/base/base.identifiers\n\t\t *\n\t\t * Specifies the property that uniquely identifies a list.\n\t\t *\n\t\t * @option {Symbol} The property that uniquely identifies the list.\n\t\t * Defaults to `Symbol.for(\"can.listQuery\")`.\n\t\t *\n\t\t * ```js\n\t\t * var dataUrl = require(\"can-connect/data/url/\");\n\t\t * var connection = connect([dataUrl], {\n\t\t *   listQueryProp: \"set\"\n\t\t * });\n\t\t *\n\t\t * var list = [{id: 1, ...}, {id: 2, ...}]\n\t\t * list.set = {complete: true};\n\t\t *\n\t\t * connection.listQuery(list) //-> {complete: true}\n\t\t * ```\n\t\t *\n\t\t */\n\t\tlistQueryProp: canSymbol_1_7_0_canSymbol.for(\"can.listQuery\"),\n\n\t\tinit: function(){},\n\n\n\t\t/**\n\t\t * @property {can-query-logic} can-connect/base/base.queryLogic queryLogic\n\t\t * @parent can-connect/base/base.options\n\t\t *\n\t\t * Configuration for list comparison, instance identification and membership\n\t\t * calculations. A way for the `can-connect` behaviors to understand what the properties of a request mean and act\n\t\t * on them.\n\t\t *\n\t\t * @option {can-query-logic} A [can-query-logic queryLogic] that is used to perform calculations using set\n\t\t * definition objects passed to [can-connect/connection.getListData] and [can-connect/connection.getList].\n\t\t * Needed to enable [can-connect/fall-through-cache/fall-through-cache caching],\n\t\t * [can-connect/data/combine-requests/combine-requests request combining], [can-connect/real-time/real-time] and other\n\t\t * behaviors. By default no queryLogic is provided.\n\t\t *\n\t\t * An example of the types of calculations behaviors will make using the queryLogic:\n\t\t * ```js\n\t\t * var queryLogic = new QueryLogic({\n\t\t *   identity: ['_uid'],\n\t\t *   keys: {\n\t\t *     _uid: Number\n\t\t *   }\n\t\t * });\n\t\t *\n\t\t * var todoConnection = connect([...behaviors...],{\n\t\t *   queryLogic: queryLogic\n\t\t * });\n\t\t *\n\t\t * todoConnection.queryLogic.memberIdentity({_uid: 5, ...}); //-> 5\n\t\t * todoConnection.id({_uid: 5, ...}); //-> 5\n\t\t * todoConnection.queryLogic.intersection(\n\t\t *   {page: {first: 0, last: 10}},\n\t\t *   {page: {first:  d5, last: 20}}); //-> {first:5, last:10}\n\t\t * ```\n\t\t */\n\n\t\tget queryLogic(){\n\t\t\tif(setQueryLogic) {\n\t\t\t\treturn setQueryLogic;\n\t\t\t} else if(baseConnection.queryLogic) {\n\t\t\t\treturn baseConnection.queryLogic;\n\t\t\t} else if(baseConnection.algebra) {\n\t\t\t\treturn baseConnection.algebra;\n\t\t\t}\n\t\t},\n\t\tset queryLogic(newVal) {\n\t\t\tsetQueryLogic = newVal;\n\t\t}\n\n\t\t/**\n\t\t * @property {can-query-logic} can-connect/base/base.algebra algebra\n\t\t * @parent can-connect/base/base.options\n\t\t *\n\t\t * @description Legacy configuration for [can-set-legacy]. Use [can-connect/base/base.queryLogic] instead.\n\t\t */\n\n\t\t/**\n\t\t * @property {can-connect/DataInterface} can-connect/base/base.cacheConnection cacheConnection\n\t\t * @parent can-connect/base/base.options\n\t\t *\n\t\t * An underlying `can-connect` connection used when fetching data from a cache.\n\t\t *\n\t\t * @option {can-connect/DataInterface} A connection that provides access to a cache via [can-connect/DataInterface]\n\t\t * requests. Several behaviors including [can-connect/fall-through-cache/fall-through-cache] expect this property.\n\t\t *\n\t\t * @body\n\t\t *\n\t\t * ## Use\n\t\t *\n\t\t * ```js\n\t\t * import {memoryStore, connect, QueryLogic} from \"can\";\n\t\t *\n\t\t * var cacheConnection = memoryStore({\n\t\t *   queryLogic: new QueryLogic({identity: [\"id\"]})\n\t\t * });\n\t\t *\n\t\t * var todoConnection = connect([...behaviors...],{\n\t\t *   cacheConnection: cacheConnection\n\t\t * });\n\t\t * ```\n\t\t */\n\t};\n});\n\ncanConnect_4_0_6_connect.base = base;\n\nvar canConnect_4_0_6_canConnect = canNamespace_1_0_0_canNamespace.connect = canConnect_4_0_6_connect;\n\nvar assign$1 = canReflect_1_19_2_canReflect.assignMap;\n\n/**\n * @module {function} can-connect/helpers/weak-reference-map WeakReferenceMap\n * @parent can-connect.modules\n *\n * Provides a map that only contains keys that are referenced.\n *\n * @signature `new WeakReferenceMap()`\n *\n *   Creates a new weak reference map.\n *\n * @body\n *\n * ## Use\n *\n * ```\n * var WeakReferenceMap = require(\"can-connect/helpers/weak-reference-map\");\n * var wrm = new WeakReferenceMap();\n * var task1 = {id: 1, name: \"do dishes\"};\n *\n * wrm.addReference(\"1\", task1);\n * wrm.has(\"1\") //-> true\n * wrm.addReference(\"1\", task1);\n * wrm.has(\"1\") //-> true\n * wrm.deleteReference(\"1\");\n * wrm.has(\"1\") //-> true\n * wrm.deleteReference(\"1\");\n * wrm.has(\"1\") //-> false\n * ```\n */\n\nvar WeakReferenceMap = function(){\n\tthis.set = {};\n};\n\n// if weakmap, we can add and never worry ...\n// otherwise, we need to have a count ...\n\nassign$1(WeakReferenceMap.prototype,\n/**\n * @prototype\n */\n\t{\n\t/**\n\t * @function can-connect/helpers/weak-reference-map.prototype.has has\n\t * @signature `weakReferenceMap.has(key)`\n\t *\n\t *   Returns if key is in the set.\n\t *\n\t *   @param  {String} key A key to look for.\n\t *   @return {Boolean} If the key exists.\n\t */\n\thas: function(key){\n\t\treturn !!this.set[key];\n\t},\n\t/**\n\t * @function can-connect/helpers/weak-reference-map.prototype.addReference addReference\n\t * @signature `WeakReferenceMap.addReference(key, item)`\n\t *\n\t *   Adds a reference to item as key and increments the reference count. This should be called\n\t *   when a value should be managed by something, typically the [can-connect/constructor/store/store].\n\t *\n\t *   @param  {String} key The key of the item in the store.\n\t */\n\taddReference: function(key, item, referenceCount){\n\t\t// !steal-remove-start\n\t\tif (typeof key === 'undefined'){\n\t\t\tthrow new Error(\"can-connect: You must provide a key to store a value in a WeakReferenceMap\");\n\t\t}\n\t\t// !steal-remove-end\n\t\tvar data = this.set[key];\n\t\tif(!data) {\n\t\t\tdata = this.set[key] = {\n\t\t\t\titem: item,\n\t\t\t\treferenceCount: 0,\n\t\t\t\tkey: key\n\t\t\t};\n\t\t}\n\t\tdata.referenceCount += (referenceCount || 1);\n\t},\n\treferenceCount: function(key) {\n\t\tvar data = this.set[key];\n\t\tif(data) {\n\t\t\treturn data.referenceCount;\n\t\t}\n\t},\n\t/**\n\t * @function can-connect/helpers/weak-reference-map.prototype.deleteReference deleteReference\n\t * @signature `weakReferenceMap.deleteReference(key)`\n\t *\n\t *   Decrements the reference count for key and removes it if the reference count is `0`. This should be called\n\t *   when a value should not be managed by something, typically the [can-connect/constructor/store/store].\n\t *\n\t *   @param  {String} key The key of the item in the store.\n\t */\n\tdeleteReference: function(key){\n\t\tvar data = this.set[key];\n\t\tif(data){\n\t\t\tdata.referenceCount--;\n\t\t\tif( data.referenceCount === 0 ) {\n\t\t\t\tdelete this.set[key];\n\t\t\t}\n\t\t}\n\t},\n\t/**\n\t * @function can-connect/helpers/weak-reference-map.prototype.get get\n\t * @signature `weakReferenceMap.get(key)`\n\t *\n\t *   Returns the value stored at key if it's in the store.\n\t *\n\t *   @param  {String} key The key of the item in the store.\n\t *   @return {*|undefined} The item if it's available.\n\t */\n\tget: function(key){\n\t\tvar data = this.set[key];\n\t\tif(data) {\n\t\t\treturn data.item;\n\t\t}\n\t},\n\t/**\n\t * @function can-connect/helpers/weak-reference-map.prototype.forEach forEach\n\t * @signature `weakReferenceMap.forEach(callback)`\n\t *\n\t *   Calls `callback` for every value in the store.\n\t *\n\t *   @param  {function(*,String)} callback(item,key) A callback handler.\n\t */\n\tforEach: function(cb){\n\t\tfor(var id in this.set) {\n\t\t\tcb(this.set[id].item, id);\n\t\t}\n\t}\n});\n\nvar weakReferenceMap = WeakReferenceMap;\n\nvar updateDeepExceptIdentity = function updateExceptIdentity(obj, data, schema) {\n    if(!schema) {\n        schema = canReflect_1_19_2_canReflect.getSchema(obj);\n    }\n    if(!schema) {\n        throw new Error(\"can-diff/update-except-id is unable to update without a schema.\");\n    }\n    // copy the keys onto data\n    schema.identity.forEach(function(key){\n        var id = canReflect_1_19_2_canReflect.getKeyValue(obj, key);\n        if(id!== undefined) {\n            canReflect_1_19_2_canReflect.setKeyValue(data, key, id );\n        }\n    });\n\n    canReflect_1_19_2_canReflect.updateDeep(obj, data);\n};\n\nvar idMerge = function(list$$1, update, id, make){\n\n\tvar patches = list(list$$1, update, function(a, b){\n\t\treturn id(a) === id(b);\n\t});\n\tpatches.forEach(function(patch){\n\t\tcanReflect_1_19_2_canReflect.splice(list$$1, patch.index, patch.deleteCount, patch.insert.map(make));\n\t});\n};\n\n/**\n * @module {connect.Behavior} can-connect/constructor/constructor constructor\n * @parent can-connect.behaviors\n * @group can-connect/constructor/constructor.options 1 behavior options\n * @group can-connect/constructor/constructor.crud 2 CRUD methods\n * @group can-connect/constructor/constructor.callbacks 3 CRUD callbacks\n * @group can-connect/constructor/constructor.hydrators 4 hydrators\n * @group can-connect/constructor/constructor.serializers 5 serializers\n * @group can-connect/constructor/constructor.helpers 6 helpers\n *\n * Adds an interface to interact with custom types via the connection instead of plain Objects and Arrays.\n *\n * @signature `constructor( baseConnection )`\n *\n * Adds an interface that allows the connection to operate on custom types. These fall into the categories:\n * - [can-connect/constructor/constructor#CRUDMethods CRUD Methods] - create, read, update and delete typed instances via the data source\n * - [can-connect/constructor/constructor#CRUDCallbacks CRUD Callbacks] - activities run on typed instances following data source operations\n * - [can-connect/constructor/constructor#Hydrator Hydrators] - conversion of raw data to typed data\n * - [can-connect/constructor/constructor#Serializers Serializers] - conversion of typed data to raw data\n *\n * @param {{}} baseConnection `can-connect` connection object that is having the `constructor` behavior added\n * on to it.\n *\n * @return {Object} A `can-connect` connection containing the method implementations provided by `constructor`.\n *\n * @body\n *\n * ## Use\n *\n * The `constructor` behavior allows you to instantiate the raw representation of the data source's data into a\n * custom typed representation with additional methods and behaviors.\n\n * An example might be loading data from a `\"/todos\"` service and being able to call `.timeLeft()`  on the todos that\n * you get back like:\n *\n * ```js\n * todoConnection.get({id: 6}).then(function(todo){\n *   todo.timeLeft() //-> 60000\n * })\n * ```\n *\n * The following creates a `todoConnection` that does exactly that:\n *\n * ```js\n * // require connection plugins\n * var constructor = require(\"can-connect/constructor/\");\n * var dataUrl = require(\"can-connect/data/url/\");\n *\n * // define type constructor function\n * var Todo = function(data){\n *   // add passed properties to new instance\n *   for(var prop in data) {\n *    this[prop] = data;\n *   }\n * };\n *\n * // add method to get time left before due, in milliseconds\n * Todo.prototype.timeLeft = function(){\n *   return new Date() - this.dueDate\n * };\n *\n * // create connection, passing function to instantiate new instances\n * var todoConnection = connect([constuctor, dataUrl], {\n *   url: \"/todos\",\n *   instance: function(data){\n *     return new Todo(data);\n *   }\n * });\n * ```\n *\n * The `constructor` behavior is still useful even if you want to keep your data as untyped objects (which is the\n * default behavior when no [can-connect/constructor/constructor.instance `instance`] implementation is provided).  The\n * behavior provides an interface to the data held by the client. For example,\n * [can-connect/constructor/constructor.updatedInstance] provides an extension point for logic that needs to be executed\n * after an instance held by the client finishes an update request. This is valuable whether that instance is typed or not.\n * Extensions like [can-connect/real-time/real-time] or [can-connect/fall-through-cache/fall-through-cache]\n * require this interface for advanced behavior.\n *\n * ## Interface\n *\n * `constructor` provides the following categories of methods to interact with typed data:\n *\n * ### <span id=\"CRUDMethods\">CRUD Methods</span>\n *\n * Methods that create, read, update and delete (CRUD) typed representations of raw connection data:\n *\n * - [can-connect/constructor/constructor.get] - retrieve a single typed instance from the data source\n * - [can-connect/constructor/constructor.getList] - retrieve a typed list of instances from the data source\n * - [can-connect/constructor/constructor.save] - save a typed instance's data to the data source\n * - [can-connect/constructor/constructor.destroy] - delete a typed instance's data from the data source\n *\n * ### <span id=\"CRUDCallbacks\">CRUD Callbacks</span>\n *\n * \"CRUD Methods\" call these methods with request response data and a related instance. Their implementation here\n * updates the related instance with that data:\n *\n * - [can-connect/constructor/constructor.createdInstance] - after [can-connect/constructor/constructor.save saving] new instance to data source, update that instance with response data\n * - [can-connect/constructor/constructor.updatedInstance] - after [can-connect/constructor/constructor.save saving] existing instance to data source, update that instance with response data\n * - [can-connect/constructor/constructor.destroyedInstance] - after [can-connect/constructor/constructor.destroy deleting] instance from data source, update that instance with response data\n * - [can-connect/constructor/constructor.updatedList] - after new data is read from the data source, update an existing list with instances created from that data\n *\n * ### <span id=\"CRUDMethods\">Hydrators</span>\n *\n * These methods are used to create a typed instance or typed list given raw data objects:\n * - [can-connect/constructor/constructor.hydrateInstance] - create a typed instance given raw instance data\n * - [can-connect/constructor/constructor.hydrateList] - create a typed list of typed instances given given raw list data\n *\n * ### <span id=\"Serializers\">Serializers</span>\n *\n * These methods convert a typed instance or typed list into a raw object:\n * - [can-connect/constructor/constructor.serializeInstance] - return raw data representing the state of the typed instance argument\n * - [can-connect/constructor/constructor.serializeList] - return raw data representing the state of the typed list argument\n *\n */\n\nvar makeArray = canReflect_1_19_2_canReflect.toArray;\nvar assign$2 = canReflect_1_19_2_canReflect.assignMap;\n\n\n\n\n\n\nvar constructor_1 = canConnect_4_0_6_behavior(\"constructor\",function(baseConnection){\n\n\tvar behavior = {\n\t\t// stores references to instances\n\t\t// for now, only during create\n\t\t/**\n\t\t * @property {can-connect/helpers/weak-reference-map} can-connect/constructor/constructor.cidStore cidStore\n\t\t * @parent can-connect/constructor/constructor.helpers\n\t\t *\n\t\t * Temporarily hold references to new instances via their [can-cid] while they are undergoing creation.\n\t\t *\n\t\t * @option {can-connect/helpers/weak-reference-map} Temporarily holds references to instances by\n\t\t * [can-cid] when they are in the process of being created and don't yet have an `id`s. This is typically\n\t\t * accessed in `createdData` handlers (e.g [can-connect/real-time/real-time.createdData real-time.createdData]) that\n\t\t * need to lookup the instance that was being created during a particular request.\n\t\t */\n\t\tcidStore: new weakReferenceMap(),\n\t\t_cid: 0,\n\n\t\t/**\n\t\t * @function can-connect/constructor/constructor.get get\n\t\t * @parent can-connect/constructor/constructor.crud\n\t\t *\n\t\t * Retrieve a single instance from the connection data source.\n\t\t *\n\t\t * @signature `connection.get(params)`\n\t\t *\n\t\t * Retrieves instance data from [can-connect/connection.getData], runs the resulting data through\n\t\t * [can-connect/constructor/constructor.hydrateInstance], creating a typed instance with the retrieved data.\n\t\t *\n\t\t * @param {Object} params data specifying the instance to retrieve.  Normally, this is something like like:\n\t\t * `{id: 5}`.\n\t\t *\n\t\t * @return {Promise<can-connect/Instance>} `Promise` resolving to the instance returned by\n\t\t * [can-connect/constructor/constructor.hydrateInstance].\n\t\t *\n\t\t * ### Usage\n\t\t *\n\t\t * Call `.get()` with the parameters that identify the instance you want to load.  `.get()` will return a promise\n\t\t * that resolves to that instance:\n\t\t * ```js\n\t\t * todoConnection.get({id: 6}).then(function(todo){\n\t\t *   todo.id; // 6\n\t\t *   todo.name; // 'Take out the garbage'\n\t\t * });\n\t\t * ```\n\t\t *\n\t\t * `.get()` above will call [can-connect/connection.getData `getData`] on the [can-connect/data/url/url]\n\t\t * behavior, which will make an HTTP GET request to `/todos/6`.\n\t\t */\n\t\tget: function(params) {\n\t\t\tvar self = this;\n\t\t\treturn this.getData(params).then(function(data){\n\t\t\t\treturn self.hydrateInstance(data);\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * @function can-connect/constructor/constructor.getList getList\n\t\t * @parent can-connect/constructor/constructor.crud\n\t\t *\n\t\t * Retrieve a list of instances from the connection data source.\n\t\t *\n\t\t * @signature `connection.getList(set)`\n\t\t *\n\t\t * Retrieves list data from [can-connect/connection.getListData] and runs the resulting data through\n\t\t * [can-connect/constructor/constructor.hydrateList], creating a typed list of typed instances from  the retrieved\n\t\t * data.\n\t\t *\n\t\t * @param {can-query-logic/query} query data specifying the range of instances to retrieve. This might look something like:\n\t\t * ```{start: 0, end: 50, due: 'today'}```\n\t\t *\n\t\t * @return {Promise<can-connect.List<can-connect/Instance>>} `Promise` resolving to the typed list returned by\n\t\t * [can-connect/constructor/constructor.hydrateList].\n\t\t *\n\t\t * ### Usage\n\t\t *\n\t\t * Call `getList` with the parameters that specify the set of data you want to load.  `.getList()` will return\n\t\t * a promise that resolves to a [can-connect.List] created from that set.\n\t\t *\n\t\t * ```js\n\t\t * todoConnection.getList({due: 'today'}).then(function(todos){\n\t\t *   todos[0].name; // 'Take out the garbage'\n\t\t *   todos[0].due > startOfDay && todos[0].due < endOfDay; // true\n\t\t * })\n\t\t * ```\n\t\t *\n\t\t */\n\t\tgetList: function(set) {\n\t\t\tset = set ||  {};\n\t\t\tvar self = this;\n\t\t\treturn this.getListData( set ).then(function(data){\n\t\t\t\treturn self.hydrateList(data, set);\n\t\t\t});\n\t\t},\n\n\n\t\t/**\n\t\t * @function can-connect/constructor/constructor.hydrateList hydrateList\n\t\t * @parent can-connect/constructor/constructor.hydrators\n\t\t *\n\t\t * Produce a typed list from the provided raw list data.\n\t\t *\n\t\t * @signature `connection.hydrateList(listData, set)`\n\t\t *\n\t\t *   Call [can-connect/constructor/constructor.hydrateInstance] for each item in the raw list data, and then call\n\t\t *   [can-connect/constructor/constructor.list] with an array of the typed instances returned from\n\t\t *   [can-connect/constructor/constructor.hydrateInstance] .  If [can-connect/constructor/constructor.list] is not\n\t\t *   provided as an argument or implemented by another behavior, a normal array is created.\n\t\t *\n\t\t *   @param {can-connect.listData} listData the raw list data returned by the data source, often via [can-connect/connection.getListData]\n\t\t *   @param {can-query-logic/query} query description of the set of data `listData` represents\n\t\t *\n\t\t *   @return {can-connect.List} a typed list containing typed instances generated from `listData`\n\t\t */\n\t\thydrateList: function(listData, set){\n\t\t\tif(Array.isArray(listData)) {\n\t\t\t\tlistData = {data: listData};\n\t\t\t}\n\n\t\t\tvar arr = [];\n\t\t\tfor(var i = 0; i < listData.data.length; i++) {\n\t\t\t\tarr.push( this.hydrateInstance(listData.data[i]) );\n\t\t\t}\n\t\t\tlistData.data = arr;\n\t\t\tif(this.list) {\n\t\t\t\treturn this.list(listData, set);\n\t\t\t} else {\n\t\t\t\tvar list = listData.data.slice(0);\n\t\t\t\tlist[this.listQueryProp || \"__listQuery\"] = set;\n\t\t\t\tcopyMetadata(listData, list);\n\t\t\t\treturn list;\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * @function can-connect/constructor/constructor.hydrateInstance hydrateInstance\n\t\t * @parent can-connect/constructor/constructor.hydrators\n\t\t *\n\t\t * Produce a typed object containing the provided raw data.\n\t\t *\n\t\t * @signature `connection.hydrateInstance(props)`\n\t\t *\n\t\t * If [can-connect/constructor/constructor.instance] has been passed as an option, or defined by another behavior,\n\t\t * pass `props` to it and return the value. Otherwise, return a clone of `props`.\n\t\t *\n\t\t * @param {Object} props the raw instance data returned by the data source, often via [can-connect/connection.getData]\n\t\t * @return {can-connect/Instance} a typed instance containing the data from `props`\n\t\t */\n\t\thydrateInstance: function(props){\n\t\t\tif(this.instance) {\n\t\t\t\treturn this.instance(props);\n\t\t\t}  else {\n\t\t\t\treturn assign$2({}, props);\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * @function can-connect/constructor/constructor.save save\n\t\t * @parent can-connect/constructor/constructor.crud\n\t\t *\n\t\t * @description Create or update an instance on the connection data source\n\t\t *\n\t\t * @signature `connection.save( instance )`\n\t\t *\n\t\t *   First checks if the instance has an [can-connect/base/base.id] or not.  If it has an id, the instance will be\n\t\t *   updated; otherwise, it will be created.\n\t\t *\n\t\t *   When creating an instance, the instance is added to the [can-connect/constructor/constructor.cidStore], and its\n\t\t *   [can-connect/constructor/constructor.serializeInstance serialized data] is passed to\n\t\t *   [can-connect/connection.createData].  If `createData`'s promise resolves to anything other than `undefined`,\n\t\t *   [can-connect/constructor/constructor.createdInstance] is called with that data.\n\t\t *\n\t\t *   When updating an instance, its [can-connect/constructor/constructor.serializeInstance serialized data] is\n\t\t *   passed to [can-connect/connection.updateData]. If `updateData`'s promise resolves to anything other than\n\t\t *   `undefined`, [can-connect/constructor/constructor.updatedInstance] is called with that data.\n\t\t *\n\t\t *   @param {can-connect/Instance} instance the instance to create or save\n\t\t *\n\t\t *   @return {Promise<can-connect/Instance>} `Promise` resolving to the same instance that was passed to `save`\n\t\t *\n\t\t * @body\n\t\t *\n\t\t * ## Use\n\t\t *\n\t\t * To use `save` to create an instance, create a connection, then an instance, and call `.save()` on it:\n\t\t *\n\t\t * ```js\n\t\t * // Create a connection\n\t     * var constructor = require('can-connect/constructor/');\n\t\t * var dataUrl = require('can-connect/data/url/');\n\t\t * var todoConnection = connect([dataUrl, constructor], {\n\t\t *   url: \"/todos\"\n\t\t * });\n\t\t *\n\t\t * // Create an instance\n\t\t * var todo = {name: \"do dishes\"};\n\t\t *\n\t\t * // Call .save()\n\t\t * todoConnection.save(todo)\n\t\t * ```\n\t\t *\n\t\t * `.save(todo)` above will call [can-connect/data/url/url.createData `createData`] on the [can-connect/data/url/url]\n\t\t * behavior, which will make an HTTP POST request to `/todos` with the serialized `todo` data.  The server response\n\t\t * data may look something like:\n\t\t *\n\t\t * ```js\n\t\t * {\n\t\t *  id: 5,\n\t\t *  ownerId: 9\n\t\t * }\n\t\t * ```\n\t\t *\n\t\t * That data will be passed to [can-connect/constructor/constructor.createdInstance] which by default\n\t\t * adds those properties to `todo`, resulting in `todo` looking like:\n\t\t *\n\t\t * ```js\n\t\t * {\n\t\t *  name: \"do dishes\",\n\t\t *  id: 5,\n\t\t *  ownerId: 9\n\t\t * }\n\t\t * ```\n\t\t *\n\t\t * As an example of updating an instance, change a property on `todo` and call `.save()` again:\n\t\t *\n\t\t * ```js\n\t\t * // Change a property\n\t\t * todo.name = \"Do dishes now!!\";\n\t\t *\n\t\t * // Call .save()\n\t\t * todoConnection.save(todo)\n\t\t * ```\n\t\t *\n\t\t * The `.save(todo)` above will call [can-connect/data/url/url.updateData `updateData`] on the\n\t\t * [can-connect/data/url/url] behavior, which will make an HTTP PUT request to `/todos` with the serialized `todo`\n\t\t * data.\n\t\t *\n\t\t * A successful server response body should look something like:\n\t\t *\n\t\t * ```js\n\t\t * {\n\t\t *  name: \"Do dishes now!!\",\n\t\t *  id: 5,\n\t\t *  ownerId: 9\n\t\t * }\n\t\t * ```\n\t\t *\n\t\t * This data will be passed to [can-connect/constructor/constructor.updatedInstance] which by default sets\n\t\t * all of `todo`'s properties to look like the response data, even removing properties that are missing from the\n\t\t * response data.\n\t\t */\n\t\tsave: function(instance){\n\t\t\tvar serialized = this.serializeInstance(instance);\n\t\t\tvar id = this.id(instance);\n\t\t\tvar self = this;\n\t\t\tif(id === undefined) {\n\t\t\t\t// If `id` is undefined, we are creating this instance.\n\t\t\t\t// It should be given a local id and temporarily added to the cidStore\n\t\t\t\t// so other hooks can get back the instance that's being created.\n\t\t\t\tvar cid = this._cid++;\n\t\t\t\t// cid is really a token to be able to reference this transaction.\n\t\t\t\tthis.cidStore.addReference(cid, instance);\n\t\t\t\t\n\t\t\t\t// Call the data layer.\n\t\t\t\t// If the data returned is undefined, don't call `createdInstance`\n\t\t\t\treturn this.createData(serialized, cid).then(function(data){\n\t\t\t\t\tcanQueues_1_3_2_canQueues.batch.start();\n\t\t\t\t\t// if undefined is returned, this can't be created, or someone has taken care of it\n\t\t\t\t\tif(data !== undefined) {\n\t\t\t\t\t\tself.createdInstance(instance, data);\n\t\t\t\t\t}\n\t\t\t\t\tself.cidStore.deleteReference(cid, instance);\n\t\t\t\t\tcanQueues_1_3_2_canQueues.batch.stop();\n\t\t\t\t\treturn instance;\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\treturn this.updateData(serialized).then(function(data){\n\t\t\t\t\tcanQueues_1_3_2_canQueues.batch.start();\n\t\t\t\t\tif(data !== undefined) {\n\t\t\t\t\t\tself.updatedInstance(instance, data);\n\t\t\t\t\t}\n\t\t\t\t\tcanQueues_1_3_2_canQueues.batch.stop();\n\t\t\t\t\treturn instance;\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * @function can-connect/constructor/constructor.destroy destroy\n\t\t * @parent can-connect/constructor/constructor.crud\n\t\t * @description Delete an instance from the connection data source\n\t\t *\n\t\t * @signature `connection.destroy( instance )`\n\t\t *\n\t\t *   To destroy an instance, it's [can-connect/constructor/constructor.serializeInstance serialized data] is passed\n\t\t *   to [can-connect/connection.destroyData]. If [can-connect/connection.destroyData]'s promise resolves to anything\n\t\t *   other than `undefined`, [can-connect/constructor/constructor.destroyedInstance] is called.\n\t\t *\n\t\t *   @param {can-connect/Instance} instance the instance being deleted from the data source\n\t\t *\n\t\t *   @return {Promise<can-connect/Instance>} `Promise` resolving to the same instance that was passed to `destroy`\n\t\t *\n\t\t * @body\n\t\t *\n\t\t * ## Use\n\t\t *\n\t\t * To use `destroy`, create a connection, retrieve an instance, and then call `.destroy()` with it.\n\t\t *\n\t\t * ```js\n\t\t * // create a connection\n\t\t * var constructor = require('can-connect/constructor/');\n\t\t * var dataUrl = require('can-connect/data/url/');\n\t\t * var todoConnection = connect([dataUrl, constructor], {\n\t\t *   url: \"/todos\"\n\t\t * })\n\t\t *\n\t\t * // retrieve a todo instance\n\t\t * todoConnection.get({id: 5}).then(function(todo){\n\t\t *   // Call .destroy():\n\t\t *   todoConnection.destroy(todo)\n\t\t * });\n\t\t * ```\n\t\t *\n\t\t * `.destroy()` above will call [can-connect/connection.destroyData `destroyData`] on the [can-connect/data/url/url]\n\t\t * behavior, which will make an HTTP DELETE request to `/todos/5` with the serialized `todo` data.  The server\n\t\t * response data may look something like:\n\t\t *\n\t\t * ```js\n\t\t * {\n\t\t *   deleted: true\n\t\t * }\n\t\t * ```\n\t\t *\n\t\t * That response data will be passed to [can-connect/constructor/constructor.destroyedInstance], which by default\n\t\t * adds those properties to `todo`.\n\t\t */\n\t\t// ## destroy\n\t\t// Calls the data interface `destroyData` and as long as it\n\t\t// returns something, uses that data to call `destroyedInstance`.\n\t\tdestroy: function(instance){\n\t\t\tvar serialized = this.serializeInstance(instance),\n\t\t\t\tself = this,\n\t\t\t\tid = this.id(instance);\n\n\t\t\tif (id !== undefined) {\n\t\t\t\treturn this.destroyData(serialized).then(function (data) {\n\t\t\t\t\tif (data !== undefined) {\n\t\t\t\t\t\tself.destroyedInstance(instance, data);\n\t\t\t\t\t}\n\t\t\t\t\treturn instance;\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthis.destroyedInstance(instance, {});\n\t\t\t\treturn Promise.resolve(instance);\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * @function can-connect/constructor/constructor.createdInstance createdInstance\n\t\t * @parent can-connect/constructor/constructor.callbacks\n\t\t *\n\t\t * A method run whenever a new instance has been saved to the data source. Updates the instance with response data.\n\t\t *\n\t\t * @signature `connection.createdInstance( instance, props )`\n\t\t *\n\t\t * `createdInstance` is run whenever a new instance is saved to the data source. This implementation updates the\n\t\t * instance with the data returned by [can-connect/connection.createData] which made the request to save the raw\n\t\t * instance data.\n\t\t *\n\t\t * @param {can-connect/Instance} instance the instance that was created\n\t\t * @param {Object} props the data returned from [can-connect/connection.createData] that will update the properties of `instance`\n\t\t */\n\t\tcreatedInstance: function(instance, props){\n\t\t\tassign$2(instance, props);\n\t\t},\n\n\t\t/**\n\t\t * @function can-connect/constructor/constructor.updatedInstance updatedInstance\n\t\t * @parent can-connect/constructor/constructor.callbacks\n\t\t *\n\t\t * A method run whenever an existing instance has been saved to the data source. Overwrites the instance with response\n\t\t * data.\n\t\t *\n\t\t * @signature `connection.updatedInstance( instance, props )`\n\t\t *\n\t\t * `updatedInstance` is run whenever an existing instance is saved to the data source. This implementation overwrites\n\t\t * the instance with the data returned bu [can-connect/connection.updatedData] which made the request to save the\n\t\t * modified instance data.\n\t\t *\n\t\t * @param {can-connect/Instance} instance the instance that was updated\n\t\t * @param {Object} props the data from [can-connect/connection.updateData] that will overwrite the properties of `instance`\n\t\t */\n\t\tupdatedInstance: function(instance, data){\n\t\t\tupdateDeepExceptIdentity(instance, data, this.queryLogic.schema);\n\t\t},\n\n\t\t/**\n\t\t * @function can-connect/constructor/constructor.updatedList updatedList\n\t\t * @parent can-connect/constructor/constructor.callbacks\n\t\t *\n\t\t * A method run whenever new data for an existing list is retrieved from the data source. Updates the list to\n\t\t * include the new data.\n\t\t *\n\t\t * @signature `connection.updatedList( list, listData, set )`\n\t\t *\n\t\t * [can-connect/constructor/constructor.hydrateInstance Hydrates instances] from `listData`'s data and attempts to\n\t\t * merge them into `list`.  The merge is able to identify simple insertions and removals of elements instead of\n\t\t * replacing the entire list.\n\t\t *\n\t\t * @param {can-connect/Instance} list an existing list\n\t\t * @param {can-connect.listData} listData raw data that should be included as part of `list` after conversion to typed instances\n\t\t * @param {can-query-logic/query} query description of the set of data `list` represents\n\t\t */\n\t\tupdatedList: function(list, listData, set) {\n\t\t\tvar instanceList = [];\n\t\t\tfor(var i = 0; i < listData.data.length; i++) {\n\t\t\t\tinstanceList.push( this.hydrateInstance(listData.data[i]) );\n\t\t\t}\n\t\t\t// This only works with \"referenced\" instances because it will not\n\t\t\t// update and assume the instance is already updated\n\t\t\t// this could be overwritten so that if the ids match, then a merge of properties takes place\n\t\t\tidMerge(list, instanceList, this.id.bind(this), this.hydrateInstance.bind(this));\n\n\t\t\tcopyMetadata(listData, list);\n\t\t},\n\n\t\t/**\n\t\t * @function can-connect/constructor/constructor.destroyedInstance destroyedInstance\n\t\t * @parent can-connect/constructor/constructor.callbacks\n\t\t *\n\t\t * A method run whenever an instance has been deleted from the data source. Overwrites the instance with response data.\n\t\t *\n\t\t * @signature `connection.destroyedInstance( instance, props )`\n\t\t *\n\t\t * `destroyedInstance` is run whenever an existing instance is deleted from the data source. This implementation\n\t\t * overwrites the instance with the data returned by [can-connect/connection.destroyData] which made the request to\n\t\t * delete the raw instance data.\n\t\t *\n\t\t * @param {can-connect/Instance} instance the instance that was deleted\n\t\t * @param {Object} props the data returned from [can-connect/connection.destroyData] that will overwrite the\n\t\t * properties of `instance`\n\t\t */\n\t\tdestroyedInstance: function(instance, data){\n\t\t\tupdateDeepExceptIdentity(instance, data, this.queryLogic.schema);\n\t\t},\n\n\t\t/**\n\t\t * @function can-connect/constructor/constructor.serializeInstance serializeInstance\n\t\t * @parent can-connect/constructor/constructor.serializers\n\t\t *\n\t\t * @description Generate the serialized form of a typed instance.\n\t\t *\n\t\t * @signature `connection.serializeInstance( instance )`\n\t\t *\n\t\t *   Generate a raw object representation of a typed instance. This default implementation simply clones the\n\t\t *   `instance` object, copying all the properties of the object (excluding properties of it's prototypes) to a new\n\t\t *   object. This is equivalent to `Object.assign({}, instance)`.\n\t\t *\n\t\t * @param {can-connect/Instance} instance the instance to serialize\n\t\t * @return {Object} a serialized representation of the instance\n\t\t */\n\t\tserializeInstance: function(instance){\n\t\t\treturn assign$2({}, instance);\n\t\t},\n\n\t\t/**\n\t\t * @function can-connect/constructor/constructor.serializeList serializeList\n\t\t * @parent can-connect/constructor/constructor.serializers\n\t\t *\n\t\t * @description Generate the serialized form of a typed list.\n\t\t *\n\t\t * @signature `connection.serializeList( list )`\n\t\t *\n\t\t *   Generate a raw array representation of a typed list. This default implementation simply returns a plain `Array`\n\t\t *   containing the result of calling [can-connect/constructor/constructor.serializeInstance] on each item in the\n\t\t *   typed list.\n\t\t *\n\t\t * @param {can-connect.List} list The instance to serialize.\n\t\t * @return {Object|Array} A serialized representation of the list.\n\t\t */\n\t\tserializeList: function(list){\n\t\t\tvar self = this;\n\t\t\treturn makeArray(list).map(function(instance){\n\t\t\t\treturn self.serializeInstance(instance);\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * @function can-connect/constructor/constructor.isNew isNew\n\t\t * @parent can-connect/constructor/constructor.helpers\n\t\t *\n\t\t * Returns if the instance has not been loaded from or saved to the data source.\n\t\t *\n\t\t * @signature `connection.isNew(instance)`\n\t\t * @param {Object} instance the instance to test\n\t\t * @return {Boolean} `true` if [can-connect/base/base.id] is `null` or `undefined`\n\t\t */\n\t\tisNew: function(instance){\n\t\t\tvar id = this.id(instance);\n\t\t\treturn !(id || id === 0);\n\t\t}\n\n\t\t/**\n\t\t * @property can-connect/constructor/constructor.list list\n\t\t * @parent can-connect/constructor/constructor.options\n\t\t *\n\t\t * Behavior option provided to create a typed list from a raw array.\n\t\t *\n\t\t * @signature `connection.list( listData, set )`\n\t\t *\n\t\t * Takes a `listData` argument with a `data` property, that is an array of typed instances, each produced by\n\t\t * [can-connect/constructor/constructor.hydrateInstance], and returns a new typed list containing those typed\n\t\t * instances.\n\t\t * This method is passed as an option to the connection.\n\t\t * Called by [can-connect/constructor/constructor.hydrateList].\n\t\t *\n\t\t * @param {can-connect.listData} listData an object with a `data` property, which is an array of instances.\n\t\t * @param {can-query-logic/query} query the set description of this list\n\t\t * @return {can-connect.List} a typed list type containing the typed instances\n\t\t *\n\t\t * ### Usage\n\t\t *\n\t\t * The following example makes the connection produce `MyList` typed lists including a `completed` method:\n\t\t *\n\t\t * ```js\n\t\t * var constructor = require(\"can-connect/constructor/\");\n\t\t * var dataUrl = require(\"can-connect/data/url/\");\n\t\t *\n\t\t * // define custom list type constructor\n\t\t * var MyList = function(items) {\n\t\t *  this.push.apply(this, items);\n\t\t * }\n\t\t * // inherit Array functionality\n\t\t * MyList.prototype = Object.create(Array.prototype);\n\t\t * // add custom methods to new list type\n\t\t * MyList.prototype.completed = function(){\n\t\t *  return this.filter(function(){ return this.completed });\n\t\t * };\n\t\t *\n\t\t * // create connection\n\t\t * var todosConnection = connect([constructor, dataUrl], {\n\t\t *   url: \"/todos\",\n\t\t *   list: function(listData, set){\n\t\t *     // create custom list instance\n\t\t *     var collection = new MyList(listData.data);\n\t\t *     // add set info for use by other behaviors\n\t\t *     collection.__listQuery = set;\n\t\t *     return collection;\n\t\t *   }\n\t\t * });\n\t\t *\n\t\t * // use connection to get typed list & use custom method\n\t\t * todosConnection.getList({}).then(function(todoList){\n\t\t *   console.log(\"There are\", todoList.completed().length, \"completed todos\");\n\t\t * });\n\t\t * ```\n\t\t *\n\t\t * **Note:** we added the [can-connect/base/base.listQueryProp] property (`Symbol.for(\"can.listQuery\")` by default) on the list. This is\n\t\t * expected by other behaviors.\n\t\t */\n\n\t\t/**\n\t\t * @property can-connect/constructor/constructor.instance instance\n\t\t * @parent can-connect/constructor/constructor.options\n\t\t *\n\t\t * Behavior option provided to create a typed form of passed raw data.\n\t\t *\n\t\t * @signature `connection.instance( props )`\n\t\t *\n\t\t * Creates a typed instance for the passed raw data object. This method is passed as an option to the connection.\n\t\t * Called by [can-connect/constructor/constructor.hydrateInstance].\n\t\t *\n\t\t * @param {Object} props a raw object containing the properties from the data source\n\t\t * @return {can-connect/Instance} the typed instance created from the passed `props` object\n\t\t *\n\t\t * ### Usage\n\t\t *\n\t\t * The following example makes the connection produce `Todo` typed objects including a `complete` method:\n\t\t *\n\t\t * ```js\n\t\t * var constructor = require(\"can-connect/constructor/\");\n\t\t * var dataUrl = require(\"can-connect/data/url/\");\n\t\t *\n\t\t * // define type constructor\n\t\t * var Todo = function(rawData){\n\t\t *   // add raw data to new instance\n\t\t *   Object.assign(this, rawData);\n\t\t * };\n\t\t *\n\t\t * // add methods to custom type\n\t\t * Todo.prototype.complete = function(){\n\t\t *   this.completed = true;\n\t\t * }\n\t\t *\n\t\t * // create connection\n\t\t * var todosConnection = connect([constructor, dataUrl], {\n\t\t *   url: \"/todos\",\n\t\t *   instance: function(rawData) {\n\t\t *     return new Todo(rawData);\n\t\t *   }\n\t\t * });\n\t\t *\n\t\t * // use connection to get typed instance & use custom method\n\t\t * todosConnection.get({id: 5}).then(function(todo){\n\t\t *   todo.completed; // false\n\t\t *   todo.complete();\n\t\t *   todo.completed; // true\n\t\t * });\n\t\t * ```\n\t\t *\n\t\t */\n\t};\n\n\treturn behavior;\n\n});\n\nfunction copyMetadata(listData, list){\n\tfor(var prop in listData) {\n\t\tif(prop !== \"data\") {\n\t\t\t// this is map infultrating constructor, but it's alright here.\n\t\t\tif(typeof list.set === \"function\") {\n\t\t\t\tlist.set(prop, listData[prop]);\n\t\t\t} else if(typeof list.attr === \"function\") {\n\t\t\t\tlist.attr(prop, listData[prop]);\n\t\t\t} else {\n\t\t\t\tlist[prop] = listData[prop];\n\t\t\t}\n\n\t\t}\n\t}\n}\n\nvar assignDeepExceptIdentity = function assignExceptIdentity(obj, data, schema) {\n    if(!schema) {\n        schema = canReflect_1_19_2_canReflect.getSchema(obj);\n    }\n    if(!schema) {\n        throw new Error(\"can-diff/update-except-id is unable to update without a schema.\");\n    }\n    // copy the keys onto data\n    schema.identity.forEach(function(key){\n        var id = canReflect_1_19_2_canReflect.getKeyValue(obj, key);\n        if(id!== undefined) {\n            canReflect_1_19_2_canReflect.setKeyValue(data, key, id );\n        }\n    });\n\n    canReflect_1_19_2_canReflect.assignDeep(obj, data);\n};\n\nfunction smartMerge(instance, props) {\n\n\tprops = canReflect_1_19_2_canReflect.serialize(props);\n\n\tif (canReflect_1_19_2_canReflect.isMoreListLikeThanMapLike(instance)) {\n\t\tmergeList(instance, props);\n\t} else {\n\t\tmergeMap(instance, props);\n\t}\n\treturn instance;\n}\n\n// date is expected to be mutable here\nfunction mergeMap(instance, data) {\n\n\t// for each key in\n\tcanReflect_1_19_2_canReflect.eachKey(instance, function(value, prop) {\n\t\tif(!canReflect_1_19_2_canReflect.hasKey(data, prop)) {\n\t\t\tcanReflect_1_19_2_canReflect.deleteKeyValue(instance, prop);\n\t\t\treturn;\n\t\t}\n\t\tvar newValue = canReflect_1_19_2_canReflect.getKeyValue(data, prop);\n\t\tcanReflect_1_19_2_canReflect.deleteKeyValue(data, prop);\n\n\t\t// cases:\n\t\t// a. list\n\t\t// b. map\n\t\t// c. primitive\n\n\t\t// if the data is typed, we would just replace it\n\t\tif (canReflect_1_19_2_canReflect.isPrimitive(value)) {\n\t\t\tcanReflect_1_19_2_canReflect.setKeyValue(instance, prop, newValue);\n\t\t\treturn;\n\t\t}\n\n\n\t\tvar newValueIsList = Array.isArray(newValue),\n\t\t\tcurrentValueIsList = canReflect_1_19_2_canReflect.isMoreListLikeThanMapLike(value);\n\n\t\tif (currentValueIsList && newValueIsList) {\n\n\t\t\tmergeList(value, newValue);\n\n\t\t} else if (!newValueIsList && !currentValueIsList && canReflect_1_19_2_canReflect.isMapLike(value) && canReflect_1_19_2_canReflect.isPlainObject(newValue)) {\n\n\t\t\t// TODO: the `TYPE` should probably be infered from the `_define` property definition.\n\t\t\tvar schema = canReflect_1_19_2_canReflect.getSchema(value);\n\t\t\tif (schema && schema.identity && schema.identity.length) {\n\t\t\t\tvar id = canReflect_1_19_2_canReflect.getIdentity(value, schema);\n\t\t\t\tif (id != null && id === canReflect_1_19_2_canReflect.getIdentity(newValue, schema)) {\n\t\t\t\t\tmergeMap(value, newValue);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tcanReflect_1_19_2_canReflect.setKeyValue(instance, prop, canReflect_1_19_2_canReflect.new(value.constructor, newValue));\n\t\t} else {\n\t\t\tcanReflect_1_19_2_canReflect.setKeyValue(instance, prop, newValue);\n\t\t}\n\t});\n\tcanReflect_1_19_2_canReflect.eachKey(data, function(value, prop) {\n\t\tcanReflect_1_19_2_canReflect.setKeyValue(instance, prop, value);\n\t});\n}\n\nfunction mergeList(list$$1, data) {\n\tvar ItemType, itemSchema;\n\tvar listSchema = canReflect_1_19_2_canReflect.getSchema(list$$1);\n\tif (listSchema) {\n\t\tItemType = listSchema.values;\n\t}\n\n\tif (ItemType) {\n\t\titemSchema = canReflect_1_19_2_canReflect.getSchema(ItemType);\n\t}\n\tif (!itemSchema && canReflect_1_19_2_canReflect.size(list$$1) > 0) {\n\t\titemSchema = canReflect_1_19_2_canReflect.getSchema(canReflect_1_19_2_canReflect.getKeyValue(list$$1, 0));\n\t}\n\n\tvar identity;\n\tif(itemSchema && itemSchema.identity && itemSchema.identity.length) {\n\t\tidentity = function(a, b) {\n\t\t   var aId = canReflect_1_19_2_canReflect.getIdentity(a, itemSchema),\n\t\t\t   bId = canReflect_1_19_2_canReflect.getIdentity(b, itemSchema);\n\t\t   var eq = aId === bId;\n\t\t   if (eq) {\n\t\t\t   // If id is the same we merge data in. Case #2\n\t\t\t   mergeMap(a, b);\n\t\t   }\n\t\t   return eq;\n\t   };\n   } else {\n\t   identity = function(a, b) {\n\t\t  var eq = a === b;\n\t\t  if (eq) {\n\t\t\t  // If id is the same we merge data in. Case #2\n\t\t\t  if(! canReflect_1_19_2_canReflect.isPrimitive(a) ) {\n\t\t\t\t   mergeMap(a, b);\n\t\t\t  }\n\n\t\t  }\n\t\t  return eq;\n\t  };\n   }\n\n\n\tvar patches = list(list$$1, data, identity);\n\n\n\n\tvar hydrate = ItemType ? canReflect_1_19_2_canReflect.new.bind(canReflect_1_19_2_canReflect, ItemType) : function(v) {\n\t\treturn v;\n\t};\n\n\n\t// If there are no patches then data contains only updates for all of the existing items, and we just leave.\n\tif (!patches.length) {\n\t\treturn list$$1;\n\t}\n\n\t// Apply patches (add new, remove) #3. For any insertion use a hydrator.\n\tpatches.forEach(function(patch) {\n\t\tapplyPatch(list$$1, patch, hydrate);\n\t});\n}\n\nfunction applyPatch(list$$1, patch, makeInstance) {\n\t// Splice signature compared to patch:\n\t//   array.splice(start, deleteCount, item1, item2, ...)\n\t//   patch = {index: 1, deleteCount: 0, insert: [1.5]}\n\tvar insert = makeInstance && patch.insert.map(function(val){\n\t\treturn makeInstance(val);\n\t}) || patch.insert;\n\n\tvar args = [patch.index, patch.deleteCount].concat(insert);\n\tlist$$1.splice.apply(list$$1, args);\n\n\treturn list$$1;\n}\n\nsmartMerge.applyPatch = applyPatch;\n\nvar mergeDeep = smartMerge;\n\nfunction flatten(arrays) {\n\treturn arrays.reduce(function(ret, val) {\n\t\treturn ret.concat(val);\n\t}, []);\n}\n\n// return a function that validates it's argument has all the properties in the interfacePropArrays\nfunction makeInterfaceValidator(interfacePropArrays) {\n\tvar props = flatten(interfacePropArrays);\n\n\treturn function(base) {\n\t\t\tvar missingProps = props.reduce(function(missing, prop) {\n\t\t\t\treturn prop in base ? missing : missing.concat(prop);\n\t\t\t}, []);\n\n\t\treturn missingProps.length ? {message:\"missing expected properties\", related: missingProps} : undefined;\n\t};\n}\n\nvar canValidateInterface_1_0_3_index = makeInterfaceValidator;\n\n// return wrapped can-connect behavior mixin that validates interface of the input behavior being extended\n// deprecate this and use can-validate-interface decorator once available\n\n\n\nvar validate = function(extendingBehavior, interfaces){\n\tvar validatedBehaviour = validateArgumentInterface(extendingBehavior, 0, interfaces, function(errors, baseBehavior) {\n\t\tthrow new BehaviorInterfaceError(baseBehavior, extendingBehavior, errors);\n\t});\n\n\t// copy properties on behavior to validator wrapped behavior\n\tObject.keys(extendingBehavior).forEach(function (k) {\n\t\tvalidatedBehaviour[k] = extendingBehavior[k];\n\t});\n\t// add interfaces for building behavior ordering\n\tvalidatedBehaviour.__interfaces = interfaces;\n\n\treturn validatedBehaviour;\n};\n\nfunction validateArgumentInterface(func, argIndex, interfaces, errorHandler) {\n\treturn function() {\n\t\tvar errors = canValidateInterface_1_0_3_index(interfaces)(arguments[argIndex]);\n\t\tif (errors && errorHandler) {\n\t\t\terrorHandler(errors, arguments[argIndex]);\n\t\t}\n\n\t\treturn func.apply(this, arguments);\n\t};\n}\n\n\n// change to 'BehaviourInterfaceError extends Error' once we drop support for pre-ES2015\nfunction BehaviorInterfaceError(baseBehavior, extendingBehavior, missingProps) {\n\tvar extendingName = extendingBehavior.behaviorName || 'anonymous behavior',\n\t\tbaseName = baseBehavior.__behaviorName || 'anonymous behavior',\n\t\tmessage = 'can-connect: Extending behavior \"' + extendingName + '\" found base behavior \"' + baseName + '\" was missing required properties: ' + JSON.stringify(missingProps.related),\n\t\tinstance = new Error(message);\n\n\tif (Object.setPrototypeOf){\n\t\tObject.setPrototypeOf(instance, Object.getPrototypeOf(this));\n\t}\n\treturn instance;\n}\nBehaviorInterfaceError.prototype = Object.create(Error.prototype, {\n\tconstructor: {value: Error}\n});\nif (Object.setPrototypeOf){\n\tObject.setPrototypeOf(BehaviorInterfaceError, Error);\n} else {\n\t/* jshint proto: true */\n\tBehaviorInterfaceError.__proto__ = Error;\n}\n\nvar map$3 = createCommonjsModule(function (module) {\n\n\nvar each = canReflect_1_19_2_canReflect.each;\nvar isPlainObject = canReflect_1_19_2_canReflect.isPlainObject;\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar getNameSymbol = canSymbol_1_7_0_canSymbol.for(\"can.getName\");\n\nfunction smartMergeExceptIdentity(dest, source, schema) {\n\tif(!schema) {\n        schema = canReflect_1_19_2_canReflect.getSchema(dest);\n    }\n    if(!schema) {\n        throw new Error(\"can-connect/can/map/ is unable to update without a schema.\");\n    }\n\tschema.identity.forEach(function(key){\n        var id = canReflect_1_19_2_canReflect.getKeyValue(dest, key);\n        if(id!== undefined) {\n            canReflect_1_19_2_canReflect.setKeyValue(source, key, id );\n        }\n    });\n\tmergeDeep(dest, source);\n}\n\nvar canMapBehavior = canConnect_4_0_6_behavior(\"can/map\",function(baseConnection){\n\n\t// overwrite\n\tvar behavior = {\n\t\tinit: function(){\n\t\t\tif(!this.Map) {\n\t\t\t\tif (this.ObjectType) {\n\t\t\t\t\tthis.Map = this.ObjectType;\n\t\t\t\t} else {\n\t\t\t\t\tthrow new Error(\"can-connect/can/map/map must be configured with a Map or ObjectType type\");\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(!this[getNameSymbol]) {\n\t\t\t\tthis[getNameSymbol] = function(){\n\t\t\t\t\tif(this.name) {\n\t\t\t\t\t\treturn \"Connection{\"+this.name+\"}\";\n\t\t\t\t\t} else if(this.Map) {\n\t\t\t\t\t\treturn \"Connection{\"+canReflect_1_19_2_canReflect.getName(this.Map)+\"}\";\n\t\t\t\t\t} else if(typeof this.url === \"string\") {\n\t\t\t\t\t\treturn \"Connection{\"+this.url+\"}\";\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn \"Connection{}\";\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tthis.List = this.List || this.ArrayType || this.Map.List;\n\t\t\tvar hasList = Boolean(this.List);\n\n\t\t\tif (!hasList) {\n\t\t\t\tObject.defineProperty(this, 'List', {\n\t\t\t\t\tget: function () {\n\t\t\t\t\t\tthrow new Error(\"can-connect/can/map/map - \"+canReflect_1_19_2_canReflect.getName(this)+\" should be configured with an ArrayType or List type.\");\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\toverwrite(this, this.Map, mapOverwrites);\n\t\t\tif (hasList) {\n\t\t\t\toverwrite(this, this.List, listOverwrites);\n\t\t\t}\n\n\t\t\tif(!this.queryLogic) {\n\t\t\t\tthis.queryLogic = new canQueryLogic_1_2_4_canQueryLogic(this.Map);\n\t\t\t}\n\n\n\t\t\tvar connection = this;\n\n\t\t\t// ### Setup store updates\n\t\t\tif(this.Map[canSymbol_1_7_0_canSymbol.for(\"can.onInstanceBoundChange\")]) {\n\t\t\t\tvar canConnectMap_onMapBoundChange = function (instance, isBound){\n\t\t\t\t\tvar method = isBound ? \"addInstanceReference\" : \"deleteInstanceReference\";\n\t\t\t\t\tif(connection[method]) {\n\t\t\t\t\t\tconnection[method](instance);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\t//!steal-remove-start\n\t\t\t\tObject.defineProperty(canConnectMap_onMapBoundChange, \"name\", {\n\t\t\t\t\tvalue: canReflect_1_19_2_canReflect.getName(this.Map) + \" boundChange\",\n\t\t\t\t\tconfigurable: true\n\t\t\t\t});\n\t\t\t\t//!steal-remove-end\n\t\t\t\tthis.Map[canSymbol_1_7_0_canSymbol.for(\"can.onInstanceBoundChange\")](canConnectMap_onMapBoundChange);\n\t\t\t} else {\n\t\t\t\tconsole.warn(\"can-connect/can/map is unable to listen to onInstanceBoundChange on the Map type\");\n\t\t\t}\n\n\t\t\tif (hasList) {\n\t\t\t\tif(this.List[canSymbol_1_7_0_canSymbol.for(\"can.onInstanceBoundChange\")]) {\n\t\t\t\t\tvar canConnectMap_onListBoundChange = function(list, isBound){\n\t\t\t\t\t\tvar method = isBound ? \"addListReference\" : \"deleteListReference\";\n\t\t\t\t\t\tif(connection[method]) {\n\t\t\t\t\t\t\tconnection[method](list);\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t//!steal-remove-start\n\t\t\t\t\tObject.defineProperty(canConnectMap_onListBoundChange, \"name\", {\n\t\t\t\t\t\tvalue: canReflect_1_19_2_canReflect.getName(this.List) + \" boundChange\",\n\t\t\t\t\t\tconfigurable: true\n\t\t\t\t\t});\n\t\t\t\t\t//!steal-remove-end\n\t\t\t\t\tthis.List[canSymbol_1_7_0_canSymbol.for(\"can.onInstanceBoundChange\")](canConnectMap_onListBoundChange);\n\t\t\t\t} else {\n\t\t\t\t\tconsole.warn(\"can-connect/can/map is unable to listen to onInstanceBoundChange on the List type\");\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Adds the instance when its `id` property is set\n\t\t\tif(this.Map[canSymbol_1_7_0_canSymbol.for(\"can.onInstancePatches\")]) {\n\t\t\t\tthis.Map[canSymbol_1_7_0_canSymbol.for(\"can.onInstancePatches\")](function canConnectMap_onInstancePatches(instance, patches){\n\t\t\t\t\tpatches.forEach(function(patch){\n\t\t\t\t\t\tif( (patch.type === \"add\" || patch.type === \"set\") &&\n\t\t\t\t\t\t\tpatch.key === connection.idProp &&\n\t\t\t\t\t\t\tinstance[canSymbol_1_7_0_canSymbol.for(\"can.isBound\")]()) {\n\t\t\t\t\t\t\tconnection.addInstanceReference(instance);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tconsole.warn(\"can-connect/can/map is unable to listen to onInstancePatches on the Map type\");\n\t\t\t}\n\t\t\tbaseConnection.init.apply(this, arguments);\n\t\t},\n\t\t/**\n\t\t * @function can-connect/can/map/map.serializeInstance serializeInstance\n\t\t * @parent can-connect/can/map/map.serializers\n\t\t *\n\t\t * Returns the properties of an instance that should be sent to the data source when saving. Done by calling\n\t\t * [can-define/map/map.prototype.serialize `instance.serialize()`].\n\t\t *\n\t\t * @signature `connection.serializeInstance(instance)`\n\t\t * Simply calls [can-define/map/map.prototype.serialize] on the `instance` argument.\n\t\t *\n\t\t * @param {can-connect/can/map/map._Map} instance the instance to serialize\n\t\t * @return {Object} the result of calling [can-define/map/map.prototype.serialize `instance.serialize()`]\n\t\t */\n\t\tserializeInstance: function(instance){\n\t\t\treturn canReflect_1_19_2_canReflect.serialize(instance);\n\t\t},\n\t\t/**\n\t\t * @function can-connect/can/map/map.serializeList serializeList\n\t\t * @parent can-connect/can/map/map.serializers\n\t\t *\n\t\t * Returns the properties of a list that should be sent to the data source when saving. Done by calling\n\t\t * [can-define/list/list.prototype.serialize `list.serialize()`].\n\t\t *\n\t\t * @signature `connection.serializeList(list)`\n\t\t * Simply calls [can-define/list/list.prototype.serialize] on the `list` argument.\n\t\t *\n\t\t * @param {can-connect/can/map/map._List} list the list to serialize\n\t\t * @return {Object} the result of calling [can-define/list/list.prototype.serialize `list.serialize()`]\n\t\t */\n\t\tserializeList: function(list){\n\t\t\treturn canReflect_1_19_2_canReflect.serialize(list);\n\t\t},\n\t\t/**\n\t\t * @property {Boolean} can-connect/can/map/map.updateInstanceWithAssignDeep updateInstanceWithAssignDeep\n\t\t * @parent can-connect/can/map/map.options\n\t\t *\n\t\t * Use the response from `save()` and `destroy()` to assign properties, never delete them.\n\t\t *\n\t\t * @option {Boolean}\n\t\t *\n\t\t * Setting `updateInstanceWithAssignDeep` to `true` changes how instances get updated. Instead of using\n\t\t * [can-diff/merge-deep/merge-deep], records will be updated with [can-reflect.assignDeep].\n\t\t *\n\t\t * The following example shows that the response from `.save()` only includes the `id`\n\t\t * property. Normally, this would delete all other properties (`name`).  But setting `updateInstanceWithAssignDeep`\n\t\t * to `true` prevents this:\n\t\t *\n\t\t * **Usage:**\n\t\t *\n\t\t * ```js\n\t\t * import {DefineMap, restModel} from \"can\";\n\t\t *\n\t\t * var Todo = DefineMap.extend({\n\t\t *   id: {type: \"number\", identity: true},\n\t\t *   name: \"string\"\n\t\t * });\n\t\t *\n\t\t * // restModel uses `can-connect/can/map/map`\n\t\t * restModel({\n\t\t *   Map: Todo,\n\t\t *   url: \"/todos\",\n\t\t *   updateInstanceWithAssignDeep: true\n\t\t * });\n\t\t *\n\t\t *\n\t\t * var todo = new Todo({name: \"learn canjs\"})\n\t\t *\n\t\t * var savePromise = todo.save()\n\t\t * // SERVER SENDS\n\t\t * // -> POST /todos {name: \"learn canjs\"}\n\t\t *\n\t\t * // SERVER RESPONDS WITH:\n\t\t * // <- {id: 5}\n\t\t *\n\t\t * savePromise.then(function(){\n\t\t *   // Name still exists even though the server did not\n\t\t *   // respond with it.\n\t\t *   todo.name //-> \"learn canjs\"\n\t\t * })\n\t\t * ```\n\t\t *\n\t\t * __NOTE__: [can-diff/merge-deep/merge-deep] is able to work _MUCH_ better with nested\n\t\t * data than [can-reflect.assignDeep]. Specifically, it is able to better\n\t\t * prevent overwriting one instance's data with another. The _Use_ section of [can-diff/merge-deep/merge-deep]\n\t\t * goes over this ability. Make sure you understand its capabilities before turning it off.\n\t\t */\n\n\t\t/**\n\t\t * @property {connection.Map} can-connect/can/map/map._Map Map\n\t\t * @parent can-connect/can/map/map.options\n\t\t *\n\t\t * Specify the type of the `[can-define/map/map DefineMap]` that should be instantiated by the connection.\n\t\t *\n\t\t * @option {connection.Map}\n\t\t *\n\t\t * **Usage:**\n\t\t *\n\t\t * ```js\n\t\t * var DefineMap = require(\"can-define/map/map\");\n\t\t * var canMap = require(\"can-connect/can/map/map\");\n\t\t * var constructor = require(\"can-connect/constructor/constructor\");\n\t\t * var dataUrl = require(\"can-connect/data/url/url\");\n\t\t *\n\t\t * var Todo = DefineMap.extend({\n\t\t *   completed: \"boolean\",\n\t\t *   complete: function(){\n\t\t *     this.completed = true\n\t\t *   }\n\t\t * });\n\t\t *\n\t\t * var todoConnection = connect([dataUrl, constructor, canMap], {\n\t\t *   Map: Todo,\n\t\t *   url: \"/todos\"\n\t\t * });\n\t\t *\n\t\t * todoConnect.get({id:1}).then(function(item) {\n\t\t *   item instanceof Todo // true\n\t\t * });\n\t\t * ```\n\t\t */\n\n\t\t/**\n\t\t * @property {connection.List} can-connect/can/map/map._List List\n\t\t * @parent can-connect/can/map/map.options\n\t\t *\n\t\t * Specify the type of the `[can-define/list/list DefineList]` that should be instantiated by the connection.\n\t\t *\n\t\t * @option {connection.List} If this option is not specified it defaults to the [can-connect/can/map/map._Map Map].List\n\t\t * property.\n\t\t *\n\t\t * **Usage:**\n\t\t * ```js\n\t\t * var DefineMap = require(\"can-define/map/map\");\n\t\t * var DefineList = require(\"can-define/list/list\");\n\t\t * var canMap = require(\"can-connect/can/map/map\");\n\t\t * var constructor = require(\"can-connect/constructor/constructor\");\n\t\t * var dataUrl = require(\"can-connect/data/url/url\");\n\t\t *\n\t\t * var Todo = DefineMap.extend({\n\t\t *   completed: \"boolean\",\n\t\t *   complete: function(){\n\t\t *     this.completed = true\n\t\t *   }\n\t\t * });\n\t\t *\n\t\t * var Todo.List = DefineList.extend({\n\t\t *   \"#\": Todo,\n\t\t *   completed: function(){\n\t\t *     this.filter(function(todo){\n\t\t *       return todo.completed;\n\t\t *     });\n\t\t *   }\n\t\t * });\n\t\t *\n\t\t * var todoConnection = connect([dataUrl, constructor, canMap],{\n\t\t *   Map: Todo,\n\t\t *   List: Todo.List,\n\t\t *   url: \"/todos\"\n\t\t * });\n\t\t *\n\t\t * todoConnection.getList({}).then(function(list) {\n\t\t *   list instanceOf Todo.List // true\n\t\t * })\n\t\t * ```\n\t\t *\n\t\t */\n\n\t\t/**\n\t\t * @function can-connect/can/map/map.instance instance\n\t\t * @parent can-connect/can/map/map.hydrators\n\t\t *\n\t\t * Creates a [can-connect/can/map/map._Map] instance given raw data.\n\t\t *\n\t\t * @signature `connection.instance(props)`\n\t\t *\n\t\t *   Create an instance of [can-connect/can/map/map._Map].\n\t\t *\n\t\t *   @param {Object} props the raw instance data.\n\t\t *   @return [can-connect/can/map/map._Map] a [can-connect/can/map/map._Map] instance containing the `props`.\n\t\t */\n\t\tinstance: function(props){\n\t\t\tvar _Map = this.Map;\n\t\t\treturn new _Map(props);\n\t\t},\n\n\t\t/**\n\t\t * @function can-connect/can/map/map.list list\n\t\t * @parent can-connect/can/map/map.hydrators\n\t\t *\n\t\t * Creates a [can-connect/can/map/map._List] instance given raw data.\n\t\t *\n\t\t * @signature `connection.list(listData, set)`\n\t\t *\n\t\t *   Creates an instance of [can-connect/can/map/map._List] if available, otherwise creates\n\t\t *   [can-connect/can/map/map._Map].List if available.\n\t\t *\n\t\t *   This will add properties on the raw `listData` array to the created list instance. e.g:\n\t\t *   ```js\n\t\t *   var listData = [{id: 1, name:\"do dishes\"}, ...];\n\t\t *   listData.loadedFrom; // \"shard 5\"\n\t\t *\n\t\t *   var todoList = todoConnection.list(listData, {});\n\t\t *   todoList.loadedFrom; // \"shard 5\"\n\t\t *   ```\n\t\t *\n\t\t *   @param {can-connect.listData} listData the raw list data.\n\t\t *   @param {can-query-logic/query} query the set the data belongs to.\n\t\t *   @return {can-connect.List} a [can-connect/can/map/map._List] instance containing instances of\n\t\t *   [can-connect/can/map/map._Map] built from the list items in `listData`.\n\t\t */\n\t\tlist: function(listData, set){\n\t\t\tvar _List = this.List || (this.Map && this.Map.List);\n\t\t\tvar list = canReflect_1_19_2_canReflect.new(_List, listData.data);\n\t\t\tcanReflect_1_19_2_canReflect.eachKey(listData, function (val, prop) {\n\t\t\t\tif (prop !== 'data') {\n\t\t\t\t\tcanReflect_1_19_2_canReflect.setKeyValue(list, prop, val);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tlist[this.listQueryProp] = set;\n\t\t\treturn list;\n\t\t},\n\n\t\t/**\n\t\t * @function can-connect/can/map/map.updatedList updatedList\n\t\t * @parent can-connect/can/map/map.instance-callbacks\n\t\t *\n\t\t * Implements the [can-connect/constructor/constructor.updatedList] callback so it updates the list and it's items\n\t\t * during a single [can-event/batch/batch batched event].\n\t\t *\n\t\t * @signature `connection.updatedList(list, listData, set)`\n\t\t *\n\t\t *   Updates the list and the items within it during a single [can-event/batch/batch batched event].\n\t\t *\n\t\t *   @param {can-connect.List} list the list to be updated.\n\t\t *   @param {can-connect.listData} listData raw list data.\n\t\t *   @param {can-query-logic/query} query the set of the list being updated.\n\t\t */\n\t\tupdatedList: function(list, listData, set){\n\t\t\tcanQueues_1_3_2_canQueues.batch.start();\n\t\t\tvar enqueueOptions = {};\n\t\t\t//!steal-remove-start\n\t\t\tif(process.env.NODE_ENV !== 'production') {\n\t\t\t\tenqueueOptions = {\n    \t\t\t\treasonLog: [\"set\", set,\"list\", list,\"updated with\", listData]\n  \t\t\t\t};\n\t\t\t}\n\t\t\t//!steal-remove-end\n\n\t\t\tcanQueues_1_3_2_canQueues.mutateQueue.enqueue(baseConnection.updatedList, this, arguments, enqueueOptions);\n\t\t\tcanQueues_1_3_2_canQueues.batch.stop();\n\n\t\t},\n\t\tsave: function(instance){\n\t\t\tcanReflect_1_19_2_canReflect.setKeyValue(instance, \"_saving\", true);\n\t\t\t//canEvent.dispatch.call(instance, \"_saving\", [true, false]);\n\t\t\tvar done = function(){\n\t\t\t\tcanReflect_1_19_2_canReflect.setKeyValue(instance, \"_saving\", false);\n\t\t\t\t//canEvent.dispatch.call(instance, \"_saving\", [false, true]);\n\t\t\t};\n\t\t\tvar base = baseConnection.save.apply(this, arguments);\n\t\t\tbase.then(done,done);\n\t\t\treturn base;\n\t\t},\n\t\tdestroy: function(instance){\n\t\t\tcanReflect_1_19_2_canReflect.setKeyValue(instance, \"_destroying\", true);\n\t\t\t//canEvent.dispatch.call(instance, \"_destroying\", [true, false]);\n\t\t\tvar done = function(){\n\t\t\t\tcanReflect_1_19_2_canReflect.setKeyValue(instance, \"_destroying\", false);\n\t\t\t\t//canEvent.dispatch.call(instance, \"_destroying\", [false, true]);\n\t\t\t};\n\t\t\tvar base = baseConnection.destroy.apply(this, arguments);\n\t\t\tbase.then(done,done);\n\t\t\treturn base;\n\t\t}\n\t};\n\n\teach([\n\t\t/**\n\t\t * @function can-connect/can/map/map.createdInstance createdInstance\n\t\t * @parent can-connect/can/map/map.instance-callbacks\n\t\t *\n\t\t * Implements the [can-connect/constructor/constructor.createdInstance] callback so it dispatches an event and\n\t\t * updates the instance.\n\t\t *\n\t\t * @signature `connection.createdInstance(instance, props)`\n\t\t *\n\t\t *   Updates the instance with `props` and dispatches a \"created\" event on the instance and the instances's\n\t\t *   constructor function ([can-connect/can/map/map._Map]).\n\t\t *\n\t\t *   Calls [can-connect/constructor/store/store.stores.moveCreatedInstanceToInstanceStore] to ensure new instances\n\t\t *   are moved into the [can-connect/constructor/store/store.instanceStore] after being saved.\n\t\t *\n\t\t *   @param {can-connect/can/map/map._Map} instance a [can-connect/can/map/map._Map] instance\n\t\t *   @param {Object} props the data in the response from [can-connect/connection.createData]\n\t\t */\n\t\t\"created\",\n\t\t/**\n\t\t * @function can-connect/can/map/map.updatedInstance updatedInstance\n\t\t * @parent can-connect/can/map/map.instance-callbacks\n\t\t *\n\t\t * Implements the [can-connect/constructor/constructor.updatedInstance] callback so it dispatches an event and\n\t\t * updates the instance.\n\t\t *\n\t\t * @signature `connection.updatedInstance(instance, props)`\n\t\t *\n\t\t *   Updates the instance with `props` and dispatches an \"updated\" event on the instance and the instances's\n\t\t *   constructor function ([can-connect/can/map/map._Map]).\n\t\t *\n\t\t *   @param {can-connect/can/map/map._Map} instance a [can-connect/can/map/map._Map] instance\n\t\t *   @param {Object} props the data in the response from [can-connect/connection.updateData]\n\t\t */\n\t\t\"updated\",\n\t\t/**\n\t\t * @function can-connect/can/map/map.destroyedInstance destroyedInstance\n\t\t * @parent can-connect/can/map/map.instance-callbacks\n\t\t *\n\t\t * Implements the [can-connect/constructor/constructor.destroyedInstance] callback so it dispatches an event and\n\t\t * updates the instance.\n\t\t *\n\t\t * @signature `connection.destroyedInstance(instance, props)`\n\t\t *\n\t\t *   Updates the instance with `props` and dispatches a \"destroyed\" event on the instance and the instances's\n\t\t *   constructor function ([can-connect/can/map/map._Map]).\n\t\t *\n\t\t *   @param {can-connect/can/map/map._Map} instance a [can-connect/can/map/map._Map] instance\n\t\t *   @param {Object} props the data in the response from [can-connect/connection.destroyData]\n\t\t */\n\t\t\"destroyed\"\n\t], function (funcName) {\n\t\t// Each of these is pretty much the same, except for the events they trigger.\n\t\tbehavior[funcName+\"Instance\"] = function (instance, props) {\n\n\t\t\t// Update attributes if attributes have been passed\n\t\t\tif(props && typeof props === 'object') {\n\n\t\t\t\tif(funcName === \"destroyed\" && canReflect_1_19_2_canReflect.size(props) === 0) {\n\t\t\t\t\t// If destroy is passed an empty object, ignore update\n\t\t\t\t\t// This isn't tested except by can-rest-model.\n\t\t\t\t} else {\n\t\t\t\t\tif(this.constructor.removeAttr) {\n\t\t\t\t\t\tupdateDeepExceptIdentity(instance, props, this.queryLogic.schema);\n\t\t\t\t\t}\n\t\t\t\t\t// this is legacy\n\t\t\t\t\telse if(this.updateInstanceWithAssignDeep){\n\t\t\t\t\t\tassignDeepExceptIdentity(instance, props, this.queryLogic.schema);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tsmartMergeExceptIdentity( instance, props, this.queryLogic.schema);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t}\n\t\t\t// This happens in constructor/store, but we don't call base, so we have to do it ourselves.\n\t\t\tif(funcName === \"created\" && this.moveCreatedInstanceToInstanceStore) {\n\t\t\t\tthis.moveCreatedInstanceToInstanceStore(instance);\n\t\t\t}\n\n\t\t\tcanMapBehavior.callbackInstanceEvents(funcName, instance);\n\t\t};\n\t});\n\n\n\treturn behavior;\n\n});\n\n/**\n * @function can-connect/can/map/map.callbackInstanceEvents callbackInstanceEvents\n * @parent can-connect/can/map/map.static\n *\n * Utility function to dispatch events for instance callbacks, e.g. [can-connect/can/map/map.updatedInstance].\n *\n * @signature `connection.callbackInstanceEvents(cbName, instance)`\n *\n *   Used to dispatch events as part of instance callbacks implementations. This method could be useful in other\n *   behaviors that implement instance callbacks. E.g. a behavior overriding the\n *   [can-connect/can/map/map.updatedInstance `updatedInstance`] callback:\n *\n *   ```\n *   connect([canMap, {\n *       updatedInstance: function(instance, props) {\n *           instance = smartMerge(instance, props);\n *           canMapBehavior.callbackInstanceEvents(\"updated\", instance);\n *       }\n *   }], {})\n *   ```\n *\n *   @param {String} eventName name of the the event to be triggered\n *   @param {can-connect/can/map/map._Map} instance a [can-connect/can/map/map._Map] instance.\n */\ncanMapBehavior.callbackInstanceEvents = function (funcName, instance) {\n\tvar constructor = instance.constructor;\n\n\t// triggers change event that bubble's like\n\t// handler( 'change','1.destroyed' ). This is used\n\t// to remove items on destroyed from Model Lists.\n\t// but there should be a better way.\n\tcanQueues_1_3_2_canQueues.batch.start();\n\tmap$1.dispatch.call(instance, {type: funcName, target: instance});\n\n\t//!steal-remove-start\n\tif(process.env.NODE_ENV !== 'production') {\n\t\tif (this.id) {\n\t\t\tdev.log(\"can-connect/can/map/map.js - \" + (constructor.shortName || this.name) + \" \" + this.id(instance) + \" \" + funcName);\n\t\t}\n\t}\n\t//!steal-remove-end\n\n\t// Call event on the instance's Class\n\tmap$1.dispatch.call(constructor, funcName, [instance]);\n\tcanQueues_1_3_2_canQueues.batch.stop();\n};\n\n\nvar mapOverwrites = {\n\tstatic: {\n\t\t/**\n\t\t * @function can-connect/can/map/map.getList getList\n\t\t * @parent can-connect/can/map/map.map-static\n\t\t *\n\t\t * Retrieve a list of instance.\n\t\t *\n\t\t * @signature `Map.getList(query)`\n\t\t *\n\t\t * `.getList` is added to the configured [can-connect/can/map/map._Map] type. Retrieves a [can-connect/can/map/map._List] of\n\t\t * [can-connect/can/map/map._Map] instances via the connection.\n\t\t *\n\t\t * ```js\n\t\t * // import connection plugins\n\t\t * var canMap = require(\"can-connect/can/map/map\");\n\t\t * var constructor = require(\"can-connect/constructor/constructor\");\n\t\t * var dataUrl = require(\"can-connect/data/url/url\");\n\t\t *\n\t\t * // define connection types\n\t\t * var Todo = DefineMap.extend({\n\t\t *   id: \"number\",\n\t\t *   complete: \"boolean\",\n\t\t *   name: \"string\"\n\t\t * });\n\t\t *\n\t\t * Todo.List = DefineList.extend({\n\t\t *   completed: function() {\n\t\t *     return this.filter(function(item) { return item.completed; });\n\t\t *   }\n\t\t * });\n\t\t *\n\t\t * // create connection\n\t\t * connect([canMap, constructor, dataUrl],{\n\t\t *   Map: Todo,\n\t\t *   url: \"/todos\"\n\t\t * })\n\t\t *\n\t\t * // retrieve instances\n\t\t * Todo.getList({filter: {due: \"today\"}}).then(function(todos){\n\t\t *   ...\n\t\t * });\n\t\t * ```\n\t\t *\n\t\t * @param {can-query-logic/query} query Definition of the list being retrieved.\n\t\t * @return {Promise<Map>} `Promise` returning the [can-connect/can/map/map._List] of instances being retrieved\n\t\t *\n\t\t *\n\t\t *\n\t\t *\n\t\t */\n\t\tgetList: function (base, connection) {\n\t\t\treturn function(set) {\n\t\t\t\treturn connection.getList(set);\n\t\t\t};\n\t\t},\n\t\t/**\n\t\t * @function can-connect/can/map/map.findAll findAll\n\t\t * @parent can-connect/can/map/map.map-static\n\t\t * @hide\n\t\t *\n\t\t * Alias of [can-connect/can/map/map.getList]. You should use `.getList()`.\n\t\t */\n\t\tfindAll: function (base, connection) {\n\t\t\treturn function(set) {\n\t\t\t\treturn connection.getList(set);\n\t\t\t};\n\t\t},\n\t\t/**\n\t\t * @function can-connect/can/map/map.get get\n\t\t * @parent can-connect/can/map/map.map-static\n\t\t *\n\t\t * Use it to get a single instance by id.\n\t\t *\n\t\t * @signature `Map.get(params)`\n\t\t *\n\t\t * `.get()` is added to the configured [can-connect/can/map/map._Map] type.\n\t\t * Use it to get a single instance by the identity keys of the Map type.\n\t\t *\n\t\t * ```js\n\t\t * // import connection plugins\n\t\t * var canMap = require(\"can-connect/can/map/map\");\n\t\t * var constructor = require(\"can-connect/constructor/constructor\");\n\t\t * var dataUrl = require(\"can-connect/data/url/url\");\n\t\t *\n\t\t * // define connection type\n\t\t * var Todo = DefineMap.extend({\n\t\t *   id: \"number\",\n\t\t *   complete: \"boolean\",\n\t\t *   name: \"string\"\n\t\t * });\n\t\t *\n\t\t * // create connection\n\t\t * connect([canMap, constructor, dataUrl],{\n\t\t *   Map: Todo,\n\t\t *   url: \"/todos\"\n\t\t * })\n\t\t *\n\t\t * // retrieve instance\n\t\t * Todo.get({id: 5}).then(function(todo){\n\t\t *   ...\n\t\t * });\n\t\t * ```\n\t\t *\n\t\t * @param {Object} params Identifying parameters of the instance to retrieve. Typically, this is an object\n\t\t * with the identity property and its value like: `{_id: 5}`.\n\t\t * @return {Promise<Map>} `Promise` returning the [can-connect/can/map/map._Map] instance being retrieved\n\t\t *\n\t\t * @body\n\t\t *\n\t\t * ## Get a single record by filtering non-identity keys\n\t\t *\n\t\t * Sometimes, you want a single record, but by filtering non-identity keys.  Instead of using\n\t\t * `.get`, use `.getList` like:\n\t\t *\n\t\t * ```js\n\t\t * var firstCompleteTodo = Todo.getList({\n\t\t *   filter: {complete: false},\n\t\t *   page: {start: 0, end: 0}\n\t\t * }).then(function(list){\n\t\t *   return list.length ? list[0] : Promise.reject({message: \"reject message\"});\n\t\t * });\n\t\t * ```\n\t\t *\n\t\t */\n\t\tget: function (base, connection) {\n\t\t\treturn function(params) {\n\t\t\t\t// adds .then for compat\n\t\t\t\treturn connection.get(params);\n\t\t\t};\n\t\t},\n\t\t/**\n\t\t * @function can-connect/can/map/map.findOne findOne\n\t\t * @parent can-connect/can/map/map.map-static\n\t\t * @hide\n\t\t *\n\t\t * Alias of [can-connect/can/map/map.get]. You should use `.get()`.\n\t\t */\n\t\tfindOne: function (base, connection) {\n\t\t\treturn function(params) {\n\t\t\t\t// adds .then for compat\n\t\t\t\treturn connection.get(params);\n\t\t\t};\n\t\t}\n\t},\n\tprototype: {\n\t\tisNew: function (base, connection) {\n\t\t\t/**\n\t\t\t * @function can-connect/can/map/map.prototype.isNew isNew\n\t\t\t * @parent can-connect/can/map/map.map\n\t\t\t *\n\t\t\t * If the data is not in the dat\n\t\t\t *\n\t\t\t * @signature `instance.isNew()`\n\t\t\t *\n\t\t\t * Returns if the instance has not been loaded from or saved to the data source.\n\t\t\t *\n\t\t\t * ```js\n\t\t\t * connect([...],{\n\t\t\t *   Map: Todo\n\t\t\t * });\n\t\t\t *\n\t\t\t * var todo = new Todo();\n\t\t\t * todo.isNew()   //-> true\n\t\t\t *\n\t\t\t * todo.save().then(function(){\n\t\t\t *   todo.isNew() //-> false\n\t\t\t * })\n\t\t\t * ```\n\t\t\t *\n\t\t\t * @return {Boolean} Returns `true` if [can-connect/base/base.id] is `null` or `undefined`.\n\t\t\t */\n\t\t\treturn function () {\n\t\t\t\treturn connection.isNew(this);\n\t\t\t};\n\t\t},\n\n\t\tisSaving: function (base, connection) {\n\t\t\t/**\n\t\t\t * @function can-connect/can/map/map.prototype.isSaving isSaving\n\t\t\t * @parent can-connect/can/map/map.map\n\t\t\t *\n\t\t\t * Returns if the instance is currently being saved.\n\t\t\t *\n\t\t\t * @signature `instance.isSaving()`\n\t\t\t *\n\t\t\t * Observes if a promise returned by [can-connect/connection.save `connection.save`] is in progress for this\n\t\t\t * instance.  This is often used in a template like:\n\t\t\t *\n\t\t\t * ```html\n\t\t\t * <button on:click=\"todo.save()\"\n\t\t\t *    disabled:from=\"todo.isSaving()\">\n\t\t\t *   Save Changes\n\t\t\t * </button>\n\t\t\t * ```\n\t\t\t *\n\t\t\t *   @return {Boolean} Returns `true` if [can-connect/connection.save `connection.save`] has been called for this\n\t\t\t *   instance but the returned promise has not yet resolved.\n\t\t\t */\n\t\t\treturn function () {\n\t\t\t\treturn !!canReflect_1_19_2_canReflect.getKeyValue(this,\"_saving\");\n\t\t\t};\n\t\t},\n\n\t\tisDestroying: function (base, connection) {\n\t\t\t/**\n\t\t\t * @function can-connect/can/map/map.prototype.isDestroying isDestroying\n\t\t\t * @parent can-connect/can/map/map.map\n\t\t\t *\n\t\t\t * Returns if the instance is currently being destroyed.\n\t\t\t *\n\t\t\t * @signature `instance.isDestroying()`\n\t\t\t *\n\t\t\t * Observes if a promise returned by [can-connect/connection.destroy `connection.destroy`] is in progress for this\n\t\t\t * instance.  This is often used in a template like:\n\t\t\t *\n\t\t\t * ```html\n\t\t\t * <button on:click=\"todo.destroy()\"\n\t\t\t *         disabled:from=\"todo.isDestroying()\">\n\t\t\t *   Delete\n\t\t\t * </button>\n\t\t\t * ```\n\t\t\t *\n\t\t\t *   @return {Boolean} `true` if [can-connect/connection.destroy `connection.destroy`] has been called for this\n\t\t\t *   instance but the returned promise has not resolved.\n\t\t\t */\n\t\t\treturn function () {\n\t\t\t\treturn !!canReflect_1_19_2_canReflect.getKeyValue(this,\"_destroying\");\n\t\t\t};\n\t\t},\n\n\t\tsave: function (base, connection) {\n\t\t\t/**\n\t\t\t * @function can-connect/can/map/map.prototype.save save\n\t\t\t * @parent can-connect/can/map/map.map\n\t\t\t *\n\t\t\t * Save or update client data to the persisted data source.\n\t\t\t *\n\t\t\t * @signature `instance.save(success, error)`\n\t\t\t *\n\t\t\t * Calls [can-connect/connection.save].\n\t\t\t *\n\t\t\t * ```js\n\t\t\t * // import connection plugins\n\t\t\t * var canMap = require(\"can-connect/can/map/map\");\n\t\t\t * var constructor = require(\"can-connect/constructor/constructor\");\n\t\t\t * var dataUrl = require(\"can-connect/data/url/url\");\n\t\t\t *\n\t\t\t * // define connection types\n\t\t\t * var Todo = DefineMap.extend({\n\t\t\t *   id: \"number\",\n\t\t\t *   complete: \"boolean\",\n\t\t\t *   name: \"string\"\n\t\t\t * });\n\t\t\t *\n\t\t\t * // create connection\n\t\t\t * connect([canMap, constructor, dataUrl], {\n\t\t\t *   Map: Todo,\n\t\t\t *   url: \"/todos\"\n\t\t\t * })\n\t\t\t *\n\t\t\t * new Todo({name: \"dishes\"}).save();\n\t\t\t * ```\n\t\t\t *\n\t\t\t *   @param {function} success A function that is called if the save is successful.\n\t\t\t *   @param {function} error A function that is called if the save is rejected.\n\t\t\t *   @return {Promise<Instance>} A promise that resolves to the instance if successful.\n\t\t\t *\n\t\t\t *\n\t\t\t */\n\t\t\treturn function(success, error){\n\t\t\t\t// return only one item for compatability\n\t\t\t\tvar promise = connection.save(this);\n\t\t\t\tpromise.then(success,error);\n\t\t\t\treturn promise;\n\t\t\t};\n\t\t},\n\t\tdestroy: function (base, connection) {\n\t\t\t/**\n\t\t\t * @function can-connect/can/map/map.prototype.destroy destroy\n\t\t\t * @parent can-connect/can/map/map.map\n\t\t\t *\n\t\t\t * Delete an instance from the service via the connection.\n\t\t\t *\n\t\t\t * @signature `instance.destroy(success, error)`\n\t\t\t *\n\t\t\t * Calls [can-connect/connection.destroy] for the `instance`.\n\t\t\t *\n\t\t\t * ```js\n\t\t\t * // import connection plugins\n\t\t\t * var canMap = require(\"can-connect/can/map/map\");\n\t\t\t * var constructor = require(\"can-connect/constructor/constructor\");\n\t\t\t * var dataUrl = require(\"can-connect/data/url/url\");\n\t\t\t *\n\t\t\t * // define connection types\n\t\t\t * var Todo = DefineMap.extend({\n\t\t\t *   id: \"number\",\n\t\t\t *   complete: \"boolean\",\n\t\t\t *   name: \"string\"\n\t\t\t * });\n\t\t\t *\n\t\t\t * // create connection\n\t\t\t * connect([canMap, constructor, dataUrl],{\n\t\t\t *   Map: Todo,\n\t\t\t *   url: \"/todos\"\n\t\t\t * })\n\t\t\t *\n\t\t\t * // read instance\n\t\t\t * Todo.get({id: 5}).then(function(todo){\n\t\t\t *   if (todo.complete) {\n\t\t\t *     // delete instance\n\t\t\t *     todo.destroy();\n\t\t\t *   }\n\t\t\t * });\n\t\t\t * ```\n\t\t\t *\n\t\t\t * @param {function} success a function that is called if the [can-connect/connection.destroy] call is successful.\n\t\t\t * @param {function} error a function that is called if the [can-connect/connection.destroy] call is rejected.\n\t\t\t * @return {Promise<Instance>} a promise that resolves to the instance if successful\n\t\t\t *\n\t\t\t *\n\t\t\t */\n\t\t\treturn function(success, error){\n\t\t\t\tvar promise = connection.destroy(this);\n\t\t\t\tpromise.then(success,error);\n\t\t\t\treturn promise;\n\t\t\t};\n\t\t}\n\t},\n\tproperties: {\n\t\t_saving: {enumerable: false, value: false, configurable: true, writable: true},\n\t\t_destroying: {enumerable: false, value: false, configurable: true, writable: true}\n\t}\n};\n\nvar listOverwrites = {\n\tstatic:  {\n\t\t_bubbleRule: function(base, connection) {\n\t\t\treturn function(eventName, list) {\n\t\t\t\tvar bubbleRules = base(eventName, list);\n\t\t\t\tbubbleRules.push('destroyed');\n\t\t\t\treturn bubbleRules;\n\t\t\t};\n\t\t}\n\t},\n\tprototype: {\n\t\tsetup: function(base, connection){\n\t\t\treturn function (params) {\n\t\t\t\t// If there was a plain object passed to the List constructor,\n\t\t\t\t// we use those as parameters for an initial getList.\n\t\t\t\tif (isPlainObject(params) && !Array.isArray(params)) {\n\t\t\t\t\tthis[connection.listQueryProp] = params;\n\t\t\t\t\tbase.apply(this);\n\t\t\t\t\tthis.replace(canReflect_1_19_2_canReflect.isPromise(params) ? params : connection.getList(params));\n\t\t\t\t} else {\n\t\t\t\t\t// Otherwise, set up the list like normal.\n\t\t\t\t\tbase.apply(this, arguments);\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t},\n\tproperties: {}\n};\n\nvar overwrite = function( connection, Constructor, overwrites) {\n\tvar prop;\n\tfor(prop in overwrites.properties) {\n\t\tcanReflect_1_19_2_canReflect.defineInstanceKey(Constructor, prop, overwrites.properties[prop]);\n\t}\n\tfor(prop in overwrites.prototype) {\n\t\tConstructor.prototype[prop] = overwrites.prototype[prop](Constructor.prototype[prop], connection);\n\t}\n\tif(overwrites.static) {\n\t\tfor(prop in overwrites.static) {\n\t\t\tConstructor[prop] = overwrites.static[prop](Constructor[prop], connection);\n\t\t}\n\t}\n};\n\nmodule.exports = canMapBehavior;\n\n//!steal-remove-start\nif(process.env.NODE_ENV !== 'production') {\n\tvar validate$$1 = validate;\n\n\tmodule.exports = validate$$1(\n\t\tcanMapBehavior,\n\t\t[\n\t\t\t'id', 'get', 'updatedList', 'destroy', 'save', 'getList'\n\t\t]\n\t);\n}\n//!steal-remove-end\n});\n\nvar assign$3 = canReflect_1_19_2_canReflect.assignMap;\n\n\nvar WeakReferenceSet = function(){\n\tthis.set = [];\n};\n\n// if weakmap, we can add and never worry ...\n// otherwise, we need to have a count ...\n\nassign$3(WeakReferenceSet.prototype,{\n\n\thas: function(item){\n\t\treturn this._getIndex(item) !== -1;\n\t},\n\taddReference: function(item, referenceCount){\n\n\t\tvar index = this._getIndex(item);\n\t\tvar data = this.set[index];\n\n\t\tif(!data) {\n\t\t\tdata = {\n\t\t\t\titem: item,\n\t\t\t\treferenceCount: 0\n\t\t\t};\n\t\t\tthis.set.push(data);\n\t\t}\n\t\tdata.referenceCount += (referenceCount || 1);\n\t},\n\tdeleteReference: function(item){\n\t\tvar index = this._getIndex(item);\n\t\tvar data = this.set[index];\n\t\tif(data){\n\t\t\tdata.referenceCount--;\n\t\t\tif( data.referenceCount === 0 ) {\n\t\t\t\tthis.set.splice(index,1);\n\t\t\t}\n\t\t}\n\t},\n\tdelete: function(item){\n\t\tvar index = this._getIndex(item);\n\t\tif(index !== -1) {\n\t\t\tthis.set.splice(index,1);\n\t\t}\n\t},\n\tget: function(item){\n\t\tvar data = this.set[this._getIndex(item)];\n\t\tif(data) {\n\t\t\treturn data.item;\n\t\t}\n\t},\n\treferenceCount: function(item) {\n\t\tvar data = this.set[this._getIndex(item)];\n\t\tif(data) {\n\t\t\treturn data.referenceCount;\n\t\t}\n\t},\n\t_getIndex: function(item){\n\t\tvar index;\n\t\tthis.set.every(function(data, i){\n\t\t\tif(data.item === item) {\n\n\t\t\t\tindex = i;\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn true;\n\t\t});\n\t\treturn index !== undefined ? index : -1;\n\t},\n\t/**\n\t * @function can-connect/helpers/weak-reference-map.prototype.forEach forEach\n\t * @signature `weakReferenceMap.forEach(callback)`\n\t *\n\t *   Calls `callback` for every value in the store.\n\t *\n\t *   @param  {function(*,String)} callback(item,key) A callback handler.\n\t */\n\tforEach: function(cb){\n\t\treturn this.set.forEach(cb);\n\t}\n});\n\nvar weakReferenceSet = WeakReferenceSet;\n\nvar sortedSetJson = function(set){\n\tif(set == null) {\n\t\treturn set;\n\t} else {\n\t\treturn JSON.stringify(canReflect_1_19_2_canReflect.cloneKeySort(set));\n\t}\n\n};\n\nvar store = createCommonjsModule(function (module) {\n/**\n * @module {connect.Behavior} can-connect/constructor/store/store constructor/store\n * @parent can-connect.behaviors\n * @group can-connect/constructor/store/store.stores 0 stores\n * @group can-connect/constructor/store/store.callbacks 1 CRUD callbacks\n * @group can-connect/constructor/store/store.crud 2 CRUD methods\n * @group can-connect/constructor/store/store.hydrators 3 hydrators\n *\n * Adds support for keeping references to active lists and instances. Prevents different copies of an instance from\n * being used by the application at once. Allows other behaviors to look up instances currently active in the\n * application.\n *\n *\n * @signature `constructorStore( baseConnection )`\n *\n * Overwrites `baseConnection` so it contains a store for instances and lists.  This behavior:\n * - extends the [can-connect/constructor/store/store.hydrateInstance] and\n * [can-connect/constructor/store/store.hydrateList] methods to return instances or lists from the store, if available\n * - overwrites \"CRUD\" methods to make sure that while requests are pending, new lists and instances have references\n * kept in the store. This prevents duplicated instances from being created during concurrent requests.\n * - provides methods to add and remove items in the store by counting references\n *\n * @param {{}} baseConnection `can-connect` connection object that is having the `constructor/store` behavior added\n * on to it. Should already contain a behavior that provides the InstanceInteface\n * (e.g [can-connect/constructor/constructor]). If the `connect` helper is used to build the connection, the behaviors\n * will automatically be ordered as required.\n *\n * @return {Object} a `can-connect` connection containing the method implementations provided by `constructor/store`.\n *\n * @body\n *\n * ## Use\n *\n * The `constructor-store` behavior is used to:\n *  - provide a store of instances and lists in use by the client\n *  - prevent multiple instances from being generated for the same [can-connect/base/base.id] or multiple\n *    lists for the same [can-connect/base/base.listQuery].\n *\n * The store provides access to an instance by its [can-connect/base/base.id] or a list by its\n * [can-connect/base/base.listQuery]. This is used by other behaviors to lookup instances that should have changes applied.\n * Two examples, when there is a new instance that should be added to a list ([can-connect/real-time/real-time]) or\n * when newer data is available for a cached instance that is used in the page\n * ([can-connect/fall-through-cache/fall-through-cache]).\n *\n * Below you can see how `constructor-store`'s behavior be used to prevent multiple instances from being generated. This\n * example allows you to create multiple instances of a `todoEditor` that loads and edits a todo instance:\n *\n * @demo demos/can-connect/constructor-store.html\n *\n * You can see in this example that you can edit one todo and the other todos update.  This is because each `todoEditor`\n * is acting on same instance in memory. When it updates the todo's name here:\n *\n * ```\n * var updateData = function(newName) {\n *   todo.name = newName; // update name on todo instance\n *   ...\n * };\n * ```\n *\n * The other widgets update because they are bound to the same instance:\n *\n * ```\n * todo.on(\"name\", updateElement); // when todo name changes update input element\n * todosConnection.addInstanceReference(todo); // previous line is a new usage of todo, so increase reference count\n * ```\n *\n * Each `todoEditor` receives the same instance because it was added to the\n * [can-connect/constructor/store/store.instanceStore connnection.instanceStore] by\n * [can-connect/constructor/store/store.addInstanceReference]. During all instance retrievals, a connection using the\n * `constructor/store` behavior checks the [can-connect/constructor/store/store.instanceStore] for an instance with a\n * matching `id` and return that if it exists. This example always requests `id: 5`, so all the `todoEditor`s use the\n * same instance held in the [can-connect/constructor/store/store.instanceStore].\n *\n * This widget cleans itself up when it is removed by removing the listener on the `todo` instance and\n * [can-connect/constructor/store/store.deleteInstanceReference reducing the instance reference count]:\n *\n * ```\n * todo.off(\"name\", updateElement); // stop listening to todo name change\n * todosConnection.deleteInstanceReference(todo); // previous line removed a usage of todo, so reduce reference count\n * ```\n * This is done to prevent a memory leak produced by keeping instances in the `instanceStore` when they are no longer\n * needed by the application.\n *\n * **Note:** a hazard of sharing the same instance is that if new instance data is loaded from the server during\n * on-going editing of the instance, the new server data will replace the data that is edited but not yet saved.\n * This is because whenever data is loaded from the server, it is passed to\n * [can-connect/constructor/constructor.updatedInstance] which updates the shared instance properties with the new\n * server data.\n */\n\n\n\n\n\n\n// shared across all connections\nvar pendingRequests = 0;\nvar noRequestsTimer = null;\nvar requests = {\n\tincrement: function(connection){\n\t\tpendingRequests++;\n\t\tclearTimeout(noRequestsTimer);\n\t},\n\tdecrement: function(connection){\n\t\tpendingRequests--;\n\t\tif(pendingRequests === 0) {\n\t\t\tnoRequestsTimer = setTimeout(function(){\n\t\t\t\trequests.dispatch(\"end\");\n\t\t\t},module.exports.requestCleanupDelay);\n\t\t}\n\t\tif(pendingRequests < 0) {\n\t\t\tpendingRequests = 0;\n\t\t}\n\t},\n\tcount: function(){\n\t\treturn pendingRequests;\n\t}\n};\nmap$1(requests);\n\n\nvar constructorStore = canConnect_4_0_6_canConnect.behavior(\"constructor/store\",function(baseConnection){\n\n\tvar behavior = {\n\t\t/**\n\t\t * @property {can-connect/helpers/weak-reference-map} can-connect/constructor/store/store.instanceStore instanceStore\n\t\t * @parent can-connect/constructor/store/store.stores\n\t\t *\n\t\t * A mapping of instances keyed by their [can-connect/base/base.id].\n\t\t *\n\t\t * @type {can-connect/helpers/weak-reference-map}\n\t\t *\n\t\t * Stores instances by their [can-connect/base/base.id]. Holds instances based on reference counts which\n\t\t * are incremented by [can-connect/constructor/store/store.addInstanceReference] and decremented by\n\t\t * [can-connect/constructor/store/store.deleteInstanceReference]. Once a reference count is 0, the instance is no\n\t\t * longer held in the store. Once a reference count is greater than 0, the instance is added to the store.\n\t\t *\n\t\t * ```js\n\t\t * connection.addInstanceReference(todo5);\n\t\t * connection.instanceStore.get(\"5\") //-> todo5\n\t\t * ```\n\t\t */\n\t\tinstanceStore: new weakReferenceMap(),\n\t\t// This really should be a set ... we just need it \"weak\" so we know how many references through binding\n\t\t// it has.\n\t\tnewInstanceStore: new weakReferenceSet(),\n\t\t/**\n\t\t * @property {can-connect/helpers/weak-reference-map} can-connect/constructor/store/store.listStore listStore\n\t\t * @parent can-connect/constructor/store/store.stores\n\t\t *\n\t\t * A mapping of lists keyed by their [can-connect/base/base.listQuery].\n\t\t *\n\t\t * @type {can-connect/helpers/weak-reference-map}\n\t\t *\n\t\t * Stores lists by their [can-connect/base/base.listQuery]. Hold lists based on reference counts which are incremented\n\t\t * by [can-connect/constructor/store/store.addListReference] and decremented by\n\t\t * [can-connect/constructor/store/store.deleteListReference]. Once a reference count is 0, the list is no\n\t\t * longer held in the store. Once a reference count is greater than 0, the list is added to the store.\n\t\t *\n\t\t * ```js\n\t\t * connection.addInstanceReference(allTodos, {});\n\t\t * connection.instanceStore.get({}) //-> allTodos\n\t\t * ```\n\t\t */\n\t\tlistStore: new weakReferenceMap(),\n\t\t // Set up the plain objects for tracking requested lists and instances for this connection,\n\t\t // and add a handler to the requests counter to flush list and instance references when all\n\t\t // requests have completed\n\t\t //\n\t\t // This function is called automatically when connect() is called on this behavior,\n\t\t // and should not need to be called manually.\n\t\tinit: function() {\n\t\t\tif(baseConnection.init) {\n\t\t\t\tbaseConnection.init.apply(this, arguments);\n\t\t\t}\n\n\t\t\tif(!this.hasOwnProperty(\"_requestInstances\")) {\n\t\t\t\tthis._requestInstances = {};\n\t\t\t}\n\t\t\tif(!this.hasOwnProperty(\"_requestLists\")) {\n\t\t\t\tthis._requestLists = {};\n\t\t\t}\n\n\t\t\trequests.on(\"end\", function onRequestsEnd_deleteStoreReferences(){\n\t\t\t\tvar id;\n\t\t\t\tfor(id in this._requestInstances) {\n\t\t\t\t\tthis.instanceStore.deleteReference(id);\n\t\t\t\t}\n\t\t\t\tthis._requestInstances = {};\n\t\t\t\tfor(id in this._requestLists) {\n\t\t\t\t\tthis.listStore.deleteReference(id);\n\t\t\t\t\tthis._requestLists[id].forEach(this.deleteInstanceReference.bind(this));\n\t\t\t\t}\n\t\t\t\tthis._requestLists = {};\n\t\t\t}.bind(this));\n\t\t},\n\t\t_finishedRequest: function(){\n\t\t\trequests.decrement(this);\n\t\t},\n\n\t\t/**\n\t\t * @function can-connect/constructor/store/store.addInstanceReference addInstanceReference\n\t\t * @parent can-connect/constructor/store/store.stores\n\t\t *\n\t\t * Add a reference to the [can-connect/constructor/store/store.instanceStore] so an instance can be easily looked up.\n\t\t *\n\t\t * @signature `connection.addInstanceReference( instance )`\n\t\t * Adds a reference to an instance by [can-connect/base/base.id] to the [can-connect/constructor/store/store.instanceStore].\n\t\t * Keeps a count of the number of references, removing the instance from the store when the count reaches 0.\n\t\t *\n\t\t * @param {can-connect/Instance} instance the instance to add\n\t\t *\n\t\t * @body\n\t\t *\n\t\t * ## Use\n\t\t *\n\t\t * The [can-connect/constructor/store/store.instanceStore] contains a mapping of instances keyed by their\n\t\t * [can-connect/base/base.id]. The [can-connect/constructor/store/store.instanceStore] is used to prevent creating\n\t\t * the same instance multiple times, and for finding active instance for a given id.  Instances need to be added to\n\t\t * this store for this to work.  To do this, call `addInstanceReference`:\n\t\t *\n\t\t * ```\n\t\t * // a basic connection\n\t\t * var constructorStore = require(\"can-connect/constructor/store/\");\n\t\t * var constructor = require(\"can-connect/constructor/\");\n\t\t * var dataUrl = require(\"can-connect/data/url/\");\n\t\t * var todoConnection = connect([dataUrl, constructorStore, constructor], {\n\t\t *   url: \"/todos\"\n\t\t * });\n\t\t *\n\t\t * var originalTodo;\n\t\t *\n\t\t * // get a todo\n\t\t * todoConnection.get({id: 5}).then(function( todo ){\n\t\t *   // add it to the store\n\t\t *   todoConnection.addInstanceReference(todo);\n\t\t *   originalTodo = todo;\n\t\t * });\n\t\t * ```\n\t\t *\n\t\t * Now, if you were to retrieve the same data sometime later, it would be the same instance:\n\t\t *\n\t\t * ```\n\t\t * todoConnection.get({id: 5}).then(function( todo ){\n\t\t *   todo === originalTodo // true\n\t\t * });\n\t\t * ```\n\t\t *\n\t\t * The `.getData` response data (underlying the call to `todoConnection.get`) is passed, along with the existing todo\n\t\t * instance (`originalTodo`) to [can-connect/constructor/constructor.updatedInstance]. That updates the shared\n\t\t * instance with the newly retrieved data.\n\t\t *\n\t\t * All the referenced instances are held in memory.  Use\n\t\t * [can-connect/constructor/store/store.deleteInstanceReference] to remove them.\n\t\t *\n\t\t * Typically, `addInstanceReference` is called when something expresses interest in the instance, such\n\t\t * as an event binding, and `deleteInstanceReference` is called when the interest is removed.\n\t\t */\n\t\taddInstanceReference: function(instance, id) {\n\t\t\tvar ID = id || this.id(instance);\n\t\t\tif(ID === undefined) {\n\t\t\t\t// save in the newInstanceStore store temporarily.\n\t\t\t\tthis.newInstanceStore.addReference(instance);\n\t\t\t} else {\n\t\t\t\tthis.instanceStore.addReference( ID, instance );\n\t\t\t}\n\n\t\t},\n\n\t\t/**\n\t\t * @function can-connect/constructor/store/store.callbacks.createdInstance createdInstance\n\t\t * @parent can-connect/constructor/store/store.callbacks\n\t\t *\n\t\t * Calls `createdInstance` on the underlying behavior and moves the new instance from the `newInstanceStore` to\n\t\t * `instanceStore` if needed.\n\t\t *\n\t\t * @signature `connection.createdInstance( instance, props )`\n\t\t * Calls the base behavior. Then calls [can-connect/constructor/store/store.stores.moveCreatedInstanceToInstanceStore]\n\t\t * to move any pre-creation instance references to the standard instance reference store.\n\t\t *\n\t\t * @param {can-connect/Instance} instance the instance that was created\n\t\t * @param {Object} props the data returned from [can-connect/connection.createData]\n\t\t */\n\t\tcreatedInstance: function(instance, props){\n\t\t\t// when an instance is created, and it is in the newInstance store\n\t\t\t// transfer it to the instanceStore\n\t\t\tbaseConnection.createdInstance.apply(this, arguments);\n\t\t\tthis.moveCreatedInstanceToInstanceStore(instance);\n\t\t},\n\n\t\t/**\n\t\t * @function can-connect/constructor/store/store.stores.moveCreatedInstanceToInstanceStore moveCreatedInstanceToInstanceStore\n\t\t * @parent can-connect/constructor/store/store.stores\n\t\t *\n\t\t * Moves recently created instances into the [can-connect/constructor/store/store.instanceStore].\n\t\t *\n\t\t * @signature `moveCreatedInstanceToInstanceStore( instance )`\n\t\t * Checks if an instance has an `id` and is in the `newInstanceStore`. If so, it adds it into the\n\t\t * [can-connect/constructor/store/store.instanceStore] and removes it from the `newInstanceStore`.\n\t\t *\n\t\t * A new instances may have been added to the `newInstanceStore` if [can-connect/constructor/store/store.addInstanceReference]\n\t\t * is called on is before the instance has been saved. This is done so we can keep track of references for unsaved\n\t\t * instances and update the references to be keyed by `id` when one is available. Without this a request for a\n\t\t * currently referenced instance that was just saved for the first time will erroneously result in a new instance.\n\t\t *\n\t\t * @param {can-connect/Instance} instance an instance.  If it was \"referenced\" (bound to) prior to\n\t\t * being created, this will check for that condition and move this instance into the\n\t\t * [can-connect/constructor/store/store.instanceStore].\n\t\t */\n\t\tmoveCreatedInstanceToInstanceStore: function(instance){\n\t\t\tvar ID = this.id(instance);\n\t\t\tif(this.newInstanceStore.has(instance) && ID !== undefined) {\n\t\t\t\tvar referenceCount = this.newInstanceStore.referenceCount(instance);\n\t\t\t\tthis.newInstanceStore.delete(instance);\n\t\t\t\tthis.instanceStore.addReference( ID, instance, referenceCount );\n\t\t\t}\n\t\t},\n\t\taddInstanceMetaData: function(instance, name, value){\n\t\t\tvar data = this.instanceStore.set[this.id(instance)];\n\t\t\tif(data) {\n\t\t\t\tdata[name] = value;\n\t\t\t}\n\t\t},\n\t\tgetInstanceMetaData: function(instance, name){\n\t\t\tvar data = this.instanceStore.set[this.id(instance)];\n\t\t\tif(data) {\n\t\t\t\treturn data[name];\n\t\t\t}\n\t\t},\n\t\tdeleteInstanceMetaData: function(instance, name){\n\t\t\tvar data = this.instanceStore.set[this.id(instance)];\n\n\t\t\tdelete data[name];\n\t\t},\n\t\t/**\n\t\t * @function can-connect/constructor/store/store.deleteInstanceReference deleteInstanceReference\n\t\t * @parent can-connect/constructor/store/store.stores\n\t\t *\n\t\t * Remove a reference from the [can-connect/constructor/store/store.instanceStore] so an instance can be garbage\n\t\t * collected.\n\t\t *\n\t\t * @signature `connection.addInstanceReference( instance )`\n\t\t * Decrements the number of references to an instance in the [can-connect/constructor/store/store.instanceStore].\n\t\t * Removes the instance if there are no longer any references.\n\t\t *\n\t\t * @param {can-connect/Instance} instance the instance to remove\n\t\t *\n\t\t * ### Usage\n\t\t *\n\t\t * `deleteInstanceReference` is called to remove references to instances in the\n\t\t * [can-connect/constructor/store/store.instanceStore] so that instances maybe garbage collected.  It's usually\n\t\t * called when the application or some part of the application no longer is interested in an instance.\n\t\t *\n\t\t * [can-connect/constructor/store/store.addInstanceReference] has an example of adding an instance to the store.\n\t\t * The following continues that example to remove the `originalTodo` instance from the store:\n\t\t *\n\t\t * ```\n\t\t * todoConnection.deleteInstanceReference(originalTodo);\n\t\t * ```\n\t\t *\n\t\t * Also see the [can-connect/constructor/store/store#Use usage example on the index page] for a more complete\n\t\t * example of the lifecycle of a reference.\n\t\t */\n\t\tdeleteInstanceReference: function(instance) {\n\t\t\tvar ID = this.id(instance);\n\t\t\tif(ID === undefined) {\n\t\t\t\t// if there is no id, remove this from the newInstanceStore\n\t\t\t\tthis.newInstanceStore.deleteReference(instance);\n\t\t\t} else {\n\t\t\t\tthis.instanceStore.deleteReference( this.id(instance), instance );\n\t\t\t}\n\n\t\t},\n\t\t/**\n\t\t * @property {WeakReferenceMap} can-connect/constructor/store/store.addListReference addListReference\n\t\t * @parent can-connect/constructor/store/store.stores\n\t\t *\n\t\t * Add a reference to the [can-connect/constructor/store/store.listStore] so a list can be easily looked up.\n\t\t *\n\t\t * @signature `connection.addListReference( list[, set] )`\n\t\t * Adds a reference to a list by `set` (or by [can-connect/base/base.listQuery]) to the\n\t\t * [can-connect/constructor/store/store.listStore].  Keeps a count of the number of references, removing the list\n\t\t * from the store when the count reaches 0.\n\t\t *\n\t\t * @param {can-connect.List} list The list to add.\n\t\t * @param {can-query-logic/query} [query] The set this list represents if it can't be identified with [can-connect/base/base.listQuery].\n\t\t *\n\t\t * @body\n\t\t *\n\t\t * ## Use\n\t\t *\n\t\t * The [can-connect/constructor/store/store.listStore] contains a mapping of lists keyed by their `set`. The\n\t\t * [can-connect/constructor/store/store.listStore] is used to prevent creating the same list multiple times and for\n\t\t * identifying a list for a given set. Lists need to be added to this store for this to work.  To do this, call\n\t\t * `addListReference`:\n\t\t *\n\t\t * ```\n\t\t * // A basic connection:\n\t\t * var constructorStore = require(\"can-connect/constructor/store/\");\n\t\t * var constructor = require(\"can-connect/constructor/\");\n\t\t * var dataUrl = require(\"can-connect/data/url/\");\n\t\t * var todoConnection = connect([dataUrl, constructorStore, constructor], {\n\t\t *   url: \"/todos\"\n\t\t * });\n\t\t *\n\t\t * var dueToday;\n\t\t *\n\t\t * // get a todo list\n\t\t * todoConnection.getList({due: \"today\"}).then(function( todos ){\n\t\t *   // add it to the store\n\t\t *   todoConnection.addListReference(todos, {due: \"today\"});\n\t\t *   dueToday = todos;\n\t\t * });\n\t\t * ```\n\t\t *\n\t\t * Now, if you were to retrieve the same set of data sometime later, it would be the same list instance:\n\t\t *\n\t\t * ```\n\t\t * todoConnection.get({due: \"today\"}).then(function( todos ){\n\t\t *   todos === dueToday //-> true\n\t\t * });\n\t\t * ```\n\t\t *\n\t\t * The `.getListData`  response data (underlying the call to `todoConnection.getList`) is passed, along with the\n\t\t * existing list (`dueToday`) to [can-connect/constructor/constructor.updatedList]. That updates the shared list\n\t\t * instance with the newly retrieved data.\n\t\t *\n\t\t * All the referenced lists stay in memory.  Use [can-connect/constructor/store/store.deleteListReference]\n\t\t * to remove them.\n\t\t *\n\t\t * Typically, `addListReference` is called when something expresses interest in the list, such\n\t\t * as an event binding, and `deleteListReference` is called when interest is removed.\n\t\t *\n\t\t */\n\t\taddListReference: function(list, set) {\n\t\t\tvar id = sortedSetJson( set || this.listQuery(list) );\n\t\t\tif(id) {\n\t\t\t\tthis.listStore.addReference( id, list );\n\t\t\t\tlist.forEach(function(instance) {\n\t\t\t\t\tthis.addInstanceReference(instance);\n\t\t\t\t}.bind(this));\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * @function can-connect/constructor/store/store.deleteListReference deleteListReference\n\t\t * @parent can-connect/constructor/store/store.stores\n\t\t *\n\t\t * Removes a reference from the [can-connect/constructor/store/store.listStore] so a list can can be garbage\n\t\t * collected.\n\t\t *\n\t\t * @signature `connection.addInstanceReference( instance )`\n\t\t * Decrements the number of references to a list in the [can-connect/constructor/store/store.listStore].\n\t\t * Removes the list if there are no longer any references.\n\t\t *\n\t\t * @param {can-connect/Instance} list the list to remove\n\t\t *\n\t\t * ### Usage\n\t\t *\n\t\t * `deleteListReference` is called to remove references to instances in the\n\t\t * [can-connect/constructor/store/store.listStore] so that lists maybe garbage collected.  It's usually called when\n\t\t * the application or some part of the application no longer is interested in a list.\n\t\t *\n\t\t * [can-connect/constructor/store/store.addListReference] has an example of adding a list to the store.  The\n\t\t * following continues that example to remove the `dueToday` list from the store:\n\t\t *\n\t\t * ```\n\t\t * todoConnection.deleteListReference(dueToday);\n\t\t * ```\n\t\t *\n\t\t * Also see the [can-connect/constructor/store/store#Use usage example on the index page] for a more complete\n\t\t * example of the lifecycle of a reference.\n\t\t */\n\t\tdeleteListReference: function(list, set) {\n\t\t\tvar id = sortedSetJson( set || this.listQuery(list) );\n\t\t\tif(id) {\n\t\t\t\tthis.listStore.deleteReference( id, list );\n\t\t\t\tlist.forEach(this.deleteInstanceReference.bind(this));\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * @function can-connect/constructor/store/store.hydratedInstance hydratedInstance\n\t\t * @parent can-connect/constructor/store/store.hydrators\n\t\t *\n\t\t * Keeps new instances in the [can-connect/constructor/store/store.instanceStore] for the lifetime of any\n\t\t * concurrent requests.\n\t\t *\n\t\t * @signature `hydratedInstance(instance)`\n\t\t * Adds a reference for new instances for the lifetime of any concurrent requests. Called when a new instance is\n\t\t * created during [can-connect/constructor/store/store.hydrateInstance hydration]. This prevents concurrent requests\n\t\t * for the same data from returning different instances.\n\t\t *\n\t\t * @param {can-connect/Instance} instance the newly hydrated instance\n\t\t */\n\t\t// ## hydratedInstance\n\t\thydratedInstance: function(instance){\n\t\t\tif( requests.count() > 0) {\n\t\t\t\tvar id = this.id(instance);\n\t\t\t\tif(! this._requestInstances[id] ) {\n\t\t\t\t\tthis.addInstanceReference(instance);\n\t\t\t\t\tthis._requestInstances[id] = instance;\n\t\t\t\t}\n\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * @function can-connect/constructor/store/store.hydrateInstance hydrateInstance\n\t\t * @parent can-connect/constructor/store/store.hydrators\n\t\t *\n\t\t * Returns an instance given raw data, returning it from the [can-connect/constructor/store/store.instanceStore] if\n\t\t * available.\n\t\t *\n\t\t * @signature `connection.hydrateInstance(props)`\n\t\t * Overwrites the base `hydrateInstance` so that if a matching instance is in the\n\t\t * [can-connect/constructor/store/store.instanceStore], that instance will be\n\t\t * [can-connect/constructor/constructor.updatedInstance updated] with `props` and returned.  If there isn't a\n\t\t * matching instance, the base `hydrateInstance` will be called.\n\t\t *\n\t\t * @param {Object} props the raw data used to create an instance\n\t\t * @return {can-connect/Instance} a typed instance either created or updated with the data from `props`.\n\t\t */\n\t\thydrateInstance: function(props){\n\t\t\tvar id = this.id(props);\n\t\t\tif((id || id === 0) && this.instanceStore.has(id) ) {\n\t\t\t\tvar storeInstance = this.instanceStore.get(id);\n\t\t\t\t// TODO: find a way to prevent this from being called so many times.\n\t\t\t\tthis.updatedInstance(storeInstance, props);\n\t\t\t\treturn storeInstance;\n\t\t\t}\n\t\t\tvar instance = baseConnection.hydrateInstance.call(this, props);\n\t\t\tthis.hydratedInstance(instance);\n\t\t\treturn instance;\n\t\t},\n\n\t\t/**\n\t\t * @function can-connect/constructor/store/store.hydratedList hydratedList\n\t\t * @parent can-connect/constructor/store/store.hydrators\n\t\t *\n\t\t * Keeps new lists in the [can-connect/constructor/store/store.listStore] for the lifetime of any concurrent\n\t\t * requests.\n\t\t *\n\t\t * @signature `hydratedList(list)`\n\t\t * Adds a reference for new lists for the lifetime of any concurrent requests. Called when a new list is\n\t\t * created during [can-connect/constructor/store/store.hydrateList hydration]. This prevents concurrent requests\n\t\t * for the same data from returning different instances.\n\t\t *\n\t\t * @param {can-connect.List} list the newly hydrated list\n\t\t */\n\t\thydratedList: function(list, set){\n\t\t\tif( requests.count() > 0) {\n\t\t\t\tvar id = sortedSetJson( set || this.listQuery(list) );\n\t\t\t\tif(id) {\n\t\t\t\t\tif(! this._requestLists[id] ) {\n\t\t\t\t\t\tthis.addListReference(list, set);\n\t\t\t\t\t\tthis._requestLists[id] = list;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * @function can-connect/constructor/store/store.hydrateList hydrateList\n\t\t * @parent can-connect/constructor/store/store.hydrators\n\t\t *\n\t\t * Returns a list given raw data, returning it from the [can-connect/constructor/store/store.listStore] if\n\t\t * available.\n\t\t *\n\t\t * @signature `connection.hydrateList( listData, set )`\n\t\t *\n\t\t *   Overwrites the base `hydrateList` so that if a matching list is in the\n\t\t *   [can-connect/constructor/store/store.listStore], that list will be\n\t\t *   [can-connect/constructor/constructor.updatedList updated] with `listData` and returned.\n\t\t *   If there isn't a matching list, the base `hydrateList` will be called.\n\t\t *\n\t\t *   @param {can-connect.listData} listData raw list data to hydrate into a list type\n\t\t *   @param {can-query-logic/query} query the parameters that represent the set of data in `listData`\n\t\t *   @return {List} a typed list from either created or updated with the data from `listData`\n\t\t */\n\t\thydrateList: function(listData, set){\n\t\t\tset = set || this.listQuery(listData);\n\t\t\tvar id = sortedSetJson( set );\n\n\t\t\tif( id && this.listStore.has(id) ) {\n\t\t\t\tvar storeList = this.listStore.get(id);\n\t\t\t\tthis.updatedList(storeList, listData, set);\n\t\t\t\treturn storeList;\n\t\t\t}\n\t\t\tvar list = baseConnection.hydrateList.call(this, listData, set);\n\t\t\tthis.hydratedList(list, set);\n\t\t\treturn list;\n\t\t},\n\n\t\t/**\n\t\t * @function can-connect/constructor/store/store.getList getList\n\t\t * @parent can-connect/constructor/store/store.crud\n\t\t *\n\t\t * Extends the underlying [can-connect/connection.getList] so any [can-connect/constructor/store/store.hydrateInstance instances hydrated]\n\t\t * or [can-connect/constructor/store/store.hydrateList lists hydrated] during this request are kept in the store until\n\t\t * all the concurrent requests complete.\n\t\t *\n\t\t * @signature `connection.getList( set )`\n\t\t * Increments an internal request counter so instances hydrated during this request will be stored, and then\n\t\t * decrements the counter after the request is complete. This prevents concurrent requests for the same data from\n\t\t * returning different instances.\n\t\t *\n\t\t * @param {can-query-logic/query} listQuery parameters specifying the list to retrieve\n\t\t * @return {Promise<can-connect/Instance>} `Promise` returned by the underlying behavior's [can-connect/connection.getList]\n\t\t */\n\t\tgetList: function(listQuery) {\n\t\t\tvar self = this;\n\t\t\trequests.increment(this);\n\t\t\tvar promise = baseConnection.getList.call(this, listQuery);\n\n\t\t\tpromise.then(function(instances){\n\t\t\t\tself._finishedRequest();\n\t\t\t}, function(){\n\t\t\t\tself._finishedRequest();\n\t\t\t});\n\t\t\treturn promise;\n\t\t},\n\n\t\t/**\n\t\t * @function can-connect/constructor/store/store.get get\n\t\t * @parent can-connect/constructor/store/store.crud\n\t\t *\n\t\t * Extends the underlying [can-connect/connection.get] so any [can-connect/constructor/store/store.hydrateInstance instances hydrated]\n\t\t * during this request are kept in the store until all the concurrent requests complete.\n\t\t *\n\t\t * @signature `connection.get( params )`\n\t\t * Increments an internal request counter so instances hydrated during this request will be stored, and then\n\t\t * decrements the counter after the request is complete. This prevents concurrent requests for the same data from\n\t\t * returning different instances.\n\t\t *\n\t\t * @param {Object} params params used to specify which instance to retrieve.\n\t\t * @return {Promise<can-connect/Instance>} `Promise` returned by the underlying behavior's [can-connect/connection.get]\n\t\t */\n\t\tget: function(params) {\n\t\t\tvar self = this;\n\t\t\trequests.increment(this);\n\t\t\tvar promise = baseConnection.get.call(this, params);\n\n\t\t\tpromise.then(function(instance){\n\t\t\t\tself._finishedRequest();\n\t\t\t}, function(){\n\t\t\t\tself._finishedRequest();\n\t\t\t});\n\t\t\treturn promise;\n\n\t\t},\n\t\t/**\n\t\t * @function can-connect/constructor/store/store.save save\n\t\t * @parent can-connect/constructor/store/store.crud\n\t\t *\n\t\t * Extends the underlying [can-connect/connection.save] so any [can-connect/constructor/store/store.hydrateInstance instances hydrated]\n\t\t * during this request are kept in the store until all the concurrent requests complete.\n\t\t *\n\t\t * @signature `connection.save( instance )`\n\t\t *\n\t\t * Increments an internal request counter so instances hydrated during this request will be stored, and then\n\t\t * decrements the counter after the request is complete. This prevents concurrent requests for the same data from\n\t\t * returning different instances.\n\t\t *\n\t\t * @param {Object} instance a typed instance being saved\n\t\t * @return {Promise<can-connect/Instance>} `Promise` returned by the underlying behavior's [can-connect/connection.save]\n\t\t */\n\t\tsave: function(instance) {\n\t\t\tvar self = this;\n\t\t\trequests.increment(this);\n\n\t\t\tvar updating = !this.isNew(instance);\n\t\t\tif(updating) {\n\t\t\t\tthis.addInstanceReference(instance);\n\t\t\t}\n\n\t\t\tvar promise = baseConnection.save.call(this, instance);\n\n\t\t\tpromise.then(function(instances){\n\t\t\t\tif(updating) {\n\t\t\t\t\tself.deleteInstanceReference(instance);\n\t\t\t\t}\n\t\t\t\tself._finishedRequest();\n\t\t\t}, function(){\n\t\t\t\tself._finishedRequest();\n\t\t\t});\n\t\t\treturn promise;\n\t\t},\n\t\t/**\n\t\t * @function can-connect/constructor/store/store.destroy destroy\n\t\t * @parent can-connect/constructor/store/store.crud\n\t\t *\n\t\t * Extends the underlying [can-connect/connection.destroy] so any [can-connect/constructor/store/store.hydrateInstance instances hydrated]\n\t\t * during this request are kept in the store until all the concurrent requests complete.\n\t\t *\n\t\t * @signature `connection.destroy( instance )`\n\t\t * Increments an internal request counter so instances hydrated during this request will be stored, and then\n\t\t * decrements the counter after the request is complete. This prevents concurrent requests for the same data from\n\t\t * returning different instances.\n\t\t *\n\t\t * @param {Object} instance a typed instance being deleted\n\t\t * @return {Promise<can-connect/Instance>} `Promise` returned by the underlying behavior's [can-connect/connection.destroy]\n\t\t */\n\t\tdestroy: function(instance) {\n\t\t\tvar self = this;\n\t\t\t// Add to instance store, for the duration of the\n\t\t\t// destroy callback\n\t\t\tthis.addInstanceReference(instance);\n\t\t\trequests.increment(this);\n\t\t\tvar promise = baseConnection.destroy.call(this, instance);\n\n\t\t\tpromise.then(function(instance){\n\t\t\t\tself._finishedRequest();\n\t\t\t\tself.deleteInstanceReference(instance);\n\t\t\t}, function(){\n\t\t\t\tself._finishedRequest();\n\t\t\t});\n\t\t\treturn promise;\n\n\t\t},\n\t\t/**\n\t\t * @function can-connect/constructor/store/store.updatedList updatedList\n\t\t * @parent can-connect/constructor/store/store.callbacks\n\t\t *\n\t\t * Extends the underlying [can-connect/connection.updatedList] so any instances that have been added or removed\n\t\t * from the list have their reference counts updated accordingly.\n\t\t *\n\t\t * @signature `connection.updatedList( list, listData, set )`\n\t\t * Increments an internal request counter so instances on this list during this request will be stored, and decrements\n\t\t * the same counter for all items previously on the list (found in `listData.data`).\n\t\t *\n\t\t * @param {can-connect.List} list a typed list of instances being updated\n\t\t * @param {Object} listData an object representing the previous state of the list\n\t\t * @param {Object} set the retrieval set used to get the list\n\t\t */\n\t\tupdatedList: function(list, listData, set) {\n\t\t\tvar oldList = list.slice(0);\n\t\t\tif(!listData.data && typeof listData.length === \"number\") {\n\t\t\t\tlistData = { data: listData };\n\t\t\t}\n\t\t\tif(baseConnection.updatedList) {\n\t\t\t\tbaseConnection.updatedList.call(this, list, listData, set);\n\t\t\t\tlist.forEach(function(instance) {\n\t\t\t\t\tthis.addInstanceReference(instance);\n\t\t\t\t}.bind(this));\n\t\t\t} else if(listData.data) {\n\t\t\t\tlistData.data.forEach(function(instance) {\n\t\t\t\t\tthis.addInstanceReference(instance);\n\t\t\t\t}.bind(this));\n\t\t\t}\n\t\t\toldList.forEach(this.deleteInstanceReference.bind(this));\n\t\t}\n\t};\n\n\treturn behavior;\n\n});\nconstructorStore.requests = requests;\n// The number of ms to wait after all known requests have finished,\n//  before starting request cleanup.\n// If a new request comes in before timeout, wait until that request\n//  has finished (+ delay) before starting cleanup.\n// This is configurable, for use cases where more waiting is desired,\n//  or for the can-connect tests which expect everything to clean up\n//  in 1ms.\nconstructorStore.requestCleanupDelay = 10;\n\nmodule.exports = constructorStore;\n\n//!steal-remove-start\nif(process.env.NODE_ENV !== 'production') {\n\tvar validate$$1 = validate;\n\tmodule.exports = validate$$1(constructorStore, ['hydrateInstance', 'hydrateList', 'getList', 'get', 'save', 'destroy']);\n}\n//!steal-remove-end\n});\n\nvar callbacks = createCommonjsModule(function (module) {\n/**\n * @module can-connect/data/callbacks/callbacks data/callbacks\n * @parent can-connect.behaviors\n *\n * Extend [can-connect/DataInterface] methods to call callbacks with the raw response data.\n *\n * @signature `dataCallbacks( baseConnection )`\n *\n * Extends the [can-connect/DataInterface] create, update, read & delete methods to call 'callback' methods following\n * their execution. Callbacks are called with the data returned from the underlying behavior's [can-connect/DataInterface]\n * implementation.\n *\n * For example:\n * ```\n * var dataUrl = require(\"can-connect/data/url/\");\n * var dataCallbacks = require(\"can-connect/data/url\");\n * var logging = {\n *   createdData: function(responseData) {\n *     console.log('New Todo Saved: ', responseData);\n *     return responseData;\n *   }\n * };\n * var todoConnection = connect([dataUrl, dataCallbacks, logging}],  {\n *   url: '/todos'\n * });\n *\n * // create a new todo\n * todoConnection.createData({name: \"do the dishes\", completed: false}).then(function(responseData) {\n *   responseData; // {id: 5}\n * });\n *\n * // after create request is completed, following is logged by the \"logging\" createdData callback:\n * // > New Todo Saved: {id: 5}\n * ```\n *\n * @param {{}} baseConnection `can-connect` connection object that is having the `data/callbacks` behavior added\n * on to it. Should already contain a behavior that provides the DataInterface (e.g [can-connect/data/url/url]). If\n * the `connect` helper is used to build the connection, the behaviors will automatically be ordered as required.\n *\n * @return {{}} a `can-connect` connection containing the method implementations provided by `data/callbacks`.\n */\n\nvar each = canReflect_1_19_2_canReflect.each;\n\n// wires up the following methods\nvar pairs = {\n\t/**\n\t * @function can-connect/data/callbacks/callbacks.getListData getListData\n\t * @parent can-connect/data/callbacks/callbacks\n\t *\n\t * Call `gotListData` with the data returned from underlying behavior's implementation of\n\t * [can-connect/connection.gotListData].\n\t *\n\t * @signature `getListData(listQuery)`\n\t *\n\t *   Extends the underlying behavior's [can-connect/connection.getListData] to call `gotListData` with the returned\n\t *   response data. The result of the call to `gotListData` will be used as the new response data.\n\t *\n\t *   @param {Object} listQuery an object that represents the set of data to be loaded\n\t *   @return {Promise<Object>} `Promise` resolving the raw response data, possibly modified by `gotListData`.\n\t */\n\tgetListData: \"gotListData\",\n\n\t/**\n\t * @function can-connect/data/callbacks/callbacks.createData createData\n\t * @parent can-connect/data/callbacks/callbacks\n\t *\n\t * Call `createdData` with the data returned from underlying behavior's implementation of\n\t * [can-connect/connection.createData].\n\t *\n\t * @signature `createData(instanceData, cid)`\n\t *\n\t *   Extends the underlying behavior's [can-connect/connection.createData] to call `createdData` with the returned\n\t *   response data. The result of the call to `createdData` will be used as the new response data.\n\t *\n\t *   @param {Object} instanceData the raw data of an instance\n\t *   @param {Number} cid unique id that represents the instance that is being created\n\t *   @return {Promise<Object>} `Promise` resolving the raw response data, possibly modified by `createdData`.\n\t */\n\tcreateData: \"createdData\",\n\n\t/**\n\t * @function can-connect/data/callbacks/callbacks.updateData updatedData\n\t * @parent can-connect/data/callbacks/callbacks\n\t *\n\t * Call `updatedData` with the data returned from underlying behavior's implementation of\n\t * [can-connect/connection.updateData].\n\t *\n\t * @signature `updateData(instanceData)`\n\t *\n\t *   Extends the underlying behavior's [can-connect/connection.updateData] to call `updatedData` with the returned\n\t *   response data. The result of the call to `updatedData` will be used as the new response data.\n\t *\n\t *   @param {Object} instanceData the raw data of an instance\n\t *   @return {Promise<Object>} `Promise` resolving the raw response data, possibly modified by `updatedData`.\n\t */\n\tupdateData: \"updatedData\",\n\n\t/**\n\t * @function can-connect/data/callbacks/callbacks.destroyData destroyData\n\t * @parent can-connect/data/callbacks/callbacks\n\t *\n\t * Call `destroyedData` with the data returned from underlying behavior's implementation of\n\t * [can-connect/connection.destroyData].\n\t *\n\t * @signature `destroyData(params, cid)`\n\t *\n\t *   Extends the underlying behavior's [can-connect/connection.destroyData] to call `destroyedData` with the returned\n\t *   response data. The result of the call to `destroyedData` will be used as the new response data.\n\t *\n\t *   @param {Object} instanceData the raw data of an instance\n\t *   @return {Promise<Object>} `Promise` resolving the raw response data, possibly modified by `destroyedData`.\n\t */\n\tdestroyData: \"destroyedData\"\n};\n\nvar dataCallbackBehavior = canConnect_4_0_6_canConnect.behavior(\"data/callbacks\",function(baseConnection){\n\n\tvar behavior = {\n\t};\n\n\t// overwrites createData to createdData\n\teach(pairs, function(callbackName, name){\n\n\t\tbehavior[name] = function(params, cid){\n\t\t\tvar self = this;\n\n\t\t\treturn baseConnection[name].call(this, params).then(function(data){\n\t\t\t\tif(self[callbackName]) {\n\t\t\t\t\treturn self[callbackName].call(self,data, params, cid );\n\t\t\t\t} else {\n\t\t\t\t\treturn data;\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\n\t});\n\treturn behavior;\n});\n\nmodule.exports = dataCallbackBehavior;\n\n//!steal-remove-start\nif(process.env.NODE_ENV !== 'production') {\n\tvar validate$$1 = validate;\n\tmodule.exports = validate$$1(dataCallbackBehavior, [\n\t\t\"getListData\", \"createData\", \"updateData\", \"destroyData\"\n\t]);\n}\n//!steal-remove-end\n});\n\n/**\n * @module {connect.Behavior} can-connect/data/parse/parse\n * @parent can-connect.behaviors\n *\n * Extract response data into a format needed for other extensions.\n *\n * @signature `dataParse( baseConnection )`\n *\n *   Overwrites the [can-connect/DataInterface] methods to run their results through\n *   either [can-connect/data/parse/parse.parseInstanceData] or [can-connect/data/parse/parse.parseListData].\n *\n *   @param {{}} baseConnection The base connection.\n *\n * @body\n *\n * ## Use\n *\n * `data/parse` is used to modify the response data of \"data interface\" methods to comply with what\n * is expected by \"instance interface\" methods.  For example, if a service was returning list data\n * at the `/services/todos` url like:\n *\n * ```\n * {\n *   todos: [\n *     {todo: {id: 0, name: \"dishes\"}},\n *     {todo: {id: 2, name: \"lawn\"}}\n *   ]\n * }\n * ```\n *\n * That service does not return [can-connect.listData] in the right format which should look like:\n *\n * ```\n * {\n *   data: [\n *     {id: 0, name: \"dishes\"},\n *     {id: 2, name: \"lawn\"}\n *   ]\n * }\n * ```\n *\n * To correct this, you can configure `data-parse` to use the [can-connect/data/parse/parse.parseListProp] and [can-connect/data/parse/parse.parseInstanceProp]\n * as follows:\n *\n * ```\n * connect([\n *   require(\"can-connect/data/parse/parse\"),\n *   require(\"can-connect/data/url/url\")\n * ],{\n *  parseListProp: \"todos\",\n *  parseInstanceProp: \"todo\"\n * })\n * ```\n *\n */\nvar each$1 = canReflect_1_19_2_canReflect.each;\n\n\n\nvar parse$1 = canConnect_4_0_6_behavior(\"data/parse\",function(baseConnection){\n\n\tvar behavior = {\n    /**\n     * @function can-connect/data/parse/parse.parseListData parseListData\n     * @parent can-connect/data/parse/parse\n     *\n     * @description Given a response from [can-connect/connection.getListData] returns its data in the\n     * proper [can-connect.listData] format.\n     *\n     * @signature `connection.parseListData(responseData)`\n     *\n     *   This function uses [can-connect/data/parse/parse.parseListProp] to find the array\n     *   containing the data for each instance.  Then it uses [can-connect/data/parse/parse.parseInstanceData]\n     *   on each item in the array  Finally, it returns data in the\n     *   [can-connect.listData] format.\n     *\n     *   @param {Object} responseData The response data from the AJAX request.\n     *\n     *   @return {can-connect.listData} An object like `{data: [props, props, ...]}`.\n     *\n     * @body\n     *\n     * ## Use\n     *\n     * `parseListData` comes in handy when dealing with an irregular API\n     * that can be improved with data transformation.\n     *\n     * Suppose an endpoint responds with a status of 200 OK, even when the\n     * request generates an empty result set. Worse yet, instead of representing\n     * an emtpy set with an empty list, it removes the property.\n     *\n     * A request to `/services/todos` may return:\n     *\n     * ```js\n     * {\n     *   todos: [\n     *     {todo: {id: 0, name: \"dishes\"}},\n     *     {todo: {id: 2, name: \"lawn\"}}\n     *   ]\n     * }\n     * ```\n     *\n     * What if a request for `/services/todos?filterName=bank` responds with\n     * 200 OK:\n     *\n     * ```\n     * {\n     * }\n     * ```\n     *\n     * This response breaks its own schema. One way to bring it in line\n     * with a format compatible with [can-connect.listData] is:\n     *\n     * ```js\n     * connect([\n     *   require(\"can-connect/data/parse/parse\"),\n     *   require(\"can-connect/data/url/url\")\n     * ],{\n     *   parseListProp: \"todos\",\n     *   parseListData(responseData) {\n     *     if (responseData && !responseData.todos) {\n     *       responseData = { todos: [] };\n     *     }\n     *\n     *     return responseData;\n     *   }\n     * })\n     * ```\n     */\n\t\tparseListData: function( responseData ) {\n\n\t\t\t// call any base parseListData\n\t\t\tif(baseConnection.parseListData) {\n\t\t\t   responseData = baseConnection.parseListData.apply(this, arguments);\n\t\t\t}\n\n\t\t\tvar result;\n\t\t\tif( Array.isArray(responseData) ) {\n\t\t\t\tresult = {data: responseData};\n\t\t\t} else {\n\t\t\t\tvar prop = this.parseListProp || 'data';\n\n\t\t\t\tresponseData.data = get_1(responseData, prop);\n\t\t\t\tresult = responseData;\n\t\t\t\tif(prop !== \"data\") {\n\t\t\t\t\tdelete responseData[prop];\n\t\t\t\t}\n\t\t\t\tif(!Array.isArray(result.data)) {\n\t\t\t\t\tthrow new Error('Could not get any raw data while converting using .parseListData');\n\t\t\t\t}\n\n\t\t\t}\n\t\t\tvar arr = [];\n\t\t\tfor(var i =0 ; i < result.data.length; i++) {\n\t\t\t\tarr.push( this.parseInstanceData(result.data[i]) );\n\t\t\t}\n\t\t\tresult.data = arr;\n\t\t\treturn result;\n\t\t},\n    /**\n     * @function can-connect/data/parse/parse.parseInstanceData parseInstanceData\n     * @parent can-connect/data/parse/parse\n     *\n     * @description Returns the properties that should be used to [can-connect/constructor/constructor.hydrateInstance make an instance]\n     * given the results of [can-connect/connection.getData], [can-connect/connection.createData], [can-connect/connection.updateData],\n     * and [can-connect/connection.destroyData].\n     *\n     * @signature `connection.parseInstanceData(responseData)`\n     *\n     *   This function will use [can-connect/data/parse/parse.parseInstanceProp] to find the data object\n     *   representing the instance that will be created.\n     *\n     *   @param {Object} responseData The response data from [can-connect/connection.getData], [can-connect/connection.createData], or [can-connect/connection.updateData].\n     *\n     *   @return {Object} The data that should be passed to [can-connect/constructor/constructor.hydrateInstance].\n     *\n     * @body\n     *\n     * ## Use\n     *\n     * `parseInstanceData` comes in handy when dealing with an irregular API\n     * that can be improved with data transformation.\n     *\n     * Suppose a request to `/services/todos` returns:\n     * ```\n     * {\n     *   baseUrl: \"/proxy/share\",\n     *   todo: {\n     *     id: 0,\n     *     name: \"dishes\",\n     *     friendFaceUrl: \"friendface?id=0\",\n     *     fiddlerUrl: \"fiddler?id=0\"\n     *   }\n     * }\n     * ```\n     *\n     * The baseUrl property is meta-data that needs to be incorporated into the\n     * instance data. One way to deal with this is:\n     *\n     * ```\n     * connect([\n     *   require(\"can-connect/data/parse/parse\"),\n     *   require(\"can-connect/data/url/url\")\n     * ],{\n     *   parseInstanceProp: \"todo\",\n     *   parseInstanceData(responseData) {\n     *     ['friendFaceUrl', 'fiddlerUrl'].map(urlProp => {\n     *       responseData.todo[urlProp] = [\n     *         responseData.baseUrl,\n     *         responseData.todo[urlProp]\n     *       ].join('/');\n     *     });\n     *\n     *     return responseData;\n     *   }\n     * })\n     * ```\n     *\n     * This results in an object like:\n     *\n     * ```js\n     * {\n     *   id: 0,\n     *   name: \"dishes\",\n     *   friendFaceUrl: \"/proxy/share/friendface?id=0\",\n     *   fiddlerUrl: \"/proxy/share/fiddler?id=0\"\n     * }\n     * ```\n     */\n\t\tparseInstanceData: function( props ) {\n\t\t\t// call any base parseInstanceData\n\t\t\tif(baseConnection.parseInstanceData) {\n\t\t\t\t// It's possible this might be looking for a property that only exists in some\n\t\t\t\t// responses. So if it doesn't return anything, go back to using props.\n\t\t\t   props = baseConnection.parseInstanceData.apply(this, arguments) || props;\n\t\t\t}\n\t\t\treturn this.parseInstanceProp ? get_1(props, this.parseInstanceProp) || props : props;\n\t\t}\n\t\t/**\n\t\t * @property {String} can-connect/data/parse/parse.parseListProp parseListProp\n\t\t * @parent can-connect/data/parse/parse\n\t\t *\n\t\t * The property to find the array-like data that represents each instance item.\n\t\t *\n\t\t * @option {String} [can-connect/data/parse/parse.parseListData] uses this property to find an array-like data struture\n\t\t * on the result of [can-connect/connection.getListData].\n\t\t *\n\t\t * @body\n\t\t *\n\t\t * ## Use\n\t\t *\n\t\t * Set `parseListProp` if your response data does not look like: `{data: [props, props]}`.\n\t\t *\n\t\t * For example, if [can-connect/connection.getListData] returns data like:\n\t\t *\n\t\t * ```\n\t\t * {\n\t\t * \t  todos: [{id: 1, name: \"dishes\"}, {id: 2, name: \"lawn\"}]\n\t\t * }\n\t\t * ```\n\t\t *\n\t\t * Set `parseListProp` to `\"todos\"` like:\n\t\t *\n\t\t * ```\n\t\t * connect([\n         *   require(\"can-connect/data/parse/parse\"),\n         *   require(\"can-connect/data/url/url\")\n         * ],{\n\t\t *   url : \"/todos\",\n\t\t *   parseListProp: \"todos\"\n\t\t * });\n\t\t * ```\n\t\t *\n\t\t */\n\t\t/**\n\t\t * @property {String} can-connect/data/parse/parse.parseInstanceProp parseInstanceProp\n\t\t * @parent can-connect/data/parse/parse\n\t\t *\n\t\t * The property to find the data that represents an instance item.\n\t\t *\n\t\t * @option {String} [can-connect/data/parse/parse.parseInstanceData] uses this property's value to\n\t\t * [can-connect/constructor/constructor.hydrateInstance make an instance].\n\t\t *\n\t\t * @body\n\t\t *\n\t\t * ## Use\n\t\t *\n\t\t * Set `parseInstanceData` if your response data does not directly contain the data you would like to pass to\n\t\t * [connection.hydrateInstance].\n\t\t *\n\t\t * For example, if [can-connect/connection.getData] returns data like:\n\t\t *\n\t\t * ```\n\t\t * {\n\t\t *   todo: {\n\t\t * \t   id: 1,\n\t\t *     name: \"dishes\"\n\t\t *   }\n\t\t * }\n\t\t * ```\n\t\t *\n\t\t * Set `parseInstanceProp` to `\"todo\"` like:\n\t\t *\n\t\t * ```\n\t\t * connect([\n         *   require(\"can-connect/data/parse/parse\"),\n         *   require(\"can-connect/data/url/url\")\n         * ],{\n\t\t *   url : \"/todos\",\n\t\t *   parseInstanceProp: \"todo\"\n\t\t * });\n\t\t * ```\n\t\t */\n\n\t};\n\n\teach$1(pairs, function(parseFunction, name){\n\t\tbehavior[name] = function(params){\n\t\t\tvar self = this;\n\t\t\treturn baseConnection[name].call(this, params).then(function(){\n\t\t\t\treturn self[parseFunction].apply(self, arguments);\n\t\t\t});\n\t\t};\n\t});\n\n\treturn behavior;\n\n});\n\nvar pairs = {\n\tgetListData: \"parseListData\",\n\tgetData: \"parseInstanceData\",\n\tcreateData: \"parseInstanceData\",\n\tupdateData: \"parseInstanceData\",\n\tdestroyData: \"parseInstanceData\"\n};\n\n/**\n * @module {function} can-ajax can-ajax\n * @parent can-dom-utilities\n * @collection can-infrastructure\n * @package ./package.json\n *\n * Make an asynchronous HTTP (AJAX) request.\n *\n * @signature `ajax( ajaxOptions )`\n *\n *    Is used to make an asynchronous HTTP (AJAX) request similar to [jQuery.ajax()](http://api.jquery.com/jQuery.ajax/).\n *\n *    ```js\n *    import { ajax } from \"can\";\n *\n *    ajax({\n *      url: \"http://query.yahooapis.com/v1/public/yql\",\n *      data: {\n *        format: \"json\",\n *        q: 'select * from geo.places where text=\"sunnyvale, ca\"'\n *      }\n *    }).then(function(response){\n *      console.log( response.query.count ); // => 2\n *    });\n *    ```\n *\n *    @param {Object} ajaxOptions Configuration options for the AJAX request.\n *      - __url__ `{String}` The requested url.\n *      - __type__ `{String}` The method of the request. Ex: `GET`, `PUT`, `POST`, etc. Capitalization is ignored. _Default is `GET`_.\n *      - __data__ `{Object}` The data of the request. If data needs to be urlencoded (e.g. for GET requests or for CORS) it is serialized with [can-param].\n *      - __dataType__ `{String}` Type of data. _Default is `json`_.\n *      - __crossDomain__ `{Boolean}` If you wish to force a crossDomain request (such as JSONP) on the same domain, set the value of crossDomain to true. This allows, for example, server-side redirection to another domain. Default: `false` for same-domain requests, `true` for cross-domain requests.\n *      - __xhrFields__ `{Object}` Any fields to be set directly on the xhr request, [https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest] such as the withCredentials attribute that indicates whether or not cross-site Access-Control requests should be made using credentials such as cookies or authorization headers.\n *      - __beforeSend__ `{callback}` A pre-request callback function that can be used to modify the XHR object before it is sent. Use this to set custom headers, etc. The XHR and settings objects are passed as arguments.\n *      - __success__ `{callback}` A callback passed the response body when the request completes without error.  Using the promise returned from ajax() should be preferred to passing a success callback\n *      - __error__ `{callback}` A callback passed the XHR object when the request fails to complete correctly.  Using the promise returned from ajax() should be preferred to passing an error callback\n *      - __async__ `{Boolean}` Set `async` to `false` to create a synchronous XHR that blocks the thread until the request completes. success() or error() is called synchronously on completion, but promise callbacks are still resolved asychronously.  Synchronous AJAX calls are **not recommended** and are only supported here for legacy reasons.\n * \n *    @return {Promise} A Promise that resolves to the data. The Promise instance is abortable and exposes an `abort` method. Invoking abort on the Promise instance indirectly rejects it.\n *\n *\n * @signature `ajaxSetup( ajaxOptions )`\n *\n *    Is used to persist ajaxOptions across all ajax requests and they can be over-written in the ajaxOptions of the actual request.\n *    [https://api.jquery.com/jquery.ajaxsetup/]\n *\n *    ```js\n *    import { ajax } from \"can\";\n *\n *    ajax.ajaxSetup({xhrFields: {withCredentials: true}});\n *\n *    ajax({\n *      url: \"http://query.yahooapis.com/v1/public/yql\",\n *      data: {\n *        format: \"json\",\n *        q: 'select * from geo.places where text=\"sunnyvale, ca\"'\n *      }\n *    }).then(function(response){\n *      console.log( response.query.count ); // => 2\n *    });\n *    ```\n */\n\n// from https://gist.github.com/mythz/1334560\nvar xhrs = [\n\t\tfunction () { return new XMLHttpRequest(); },\n\t\tfunction () { return new ActiveXObject(\"Microsoft.XMLHTTP\"); },\n\t\tfunction () { return new ActiveXObject(\"MSXML2.XMLHTTP.3.0\"); },\n\t\tfunction () { return new ActiveXObject(\"MSXML2.XMLHTTP\"); }\n\t],\n\t_xhrf = null;\n// used to check for Cross Domain requests\nvar originUrl = canParseUri_1_2_2_canParseUri(global_1().location.href);\n\nvar globalSettings = {};\n\nvar makeXhr = function () {\n\tif (_xhrf != null) {\n\t\treturn _xhrf();\n\t}\n\tfor (var i = 0, l = xhrs.length; i < l; i++) {\n\t\ttry {\n\t\t\tvar f = xhrs[i], req = f();\n\t\t\tif (req != null) {\n\t\t\t\t_xhrf = f;\n\t\t\t\treturn req;\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tcontinue;\n\t\t}\n\t}\n\treturn function () { };\n};\n\nvar contentTypes = {\n\tjson: \"application/json\",\n\tform: \"application/x-www-form-urlencoded\"\n};\n\nvar _xhrResp = function (xhr, options) {\n\n\ttry{\n\t\tvar type = (options.dataType || xhr.getResponseHeader(\"Content-Type\").split(\";\")[0]);\n\t\t\n\t\tif(type && (xhr.responseText || xhr.responseXML)){\n\t\t\t\n\t\t\tswitch (type) {\n\t\t\t\tcase \"text/xml\":\n\t\t\t\tcase \"xml\":\n\t\t\t\t\treturn xhr.responseXML;\n\t\t\t\tcase \"text/json\":\n\t\t\t\tcase \"application/json\":\n\t\t\t\tcase \"text/javascript\":\n\t\t\t\tcase \"application/javascript\":\n\t\t\t\tcase \"application/x-javascript\":\n\t\t\t\tcase \"json\":\n\t\t\t\t\treturn xhr.responseText && JSON.parse(xhr.responseText);\n\t\t\t\tdefault:\n\t\t\t\t\treturn xhr.responseText;\n\t\t\t}\n\t\t} else {\n\t\t\treturn xhr;\n\t\t}\n\t} catch(e){\n\t\treturn xhr;\n\t}\n};\n\nfunction ajax(o) {\n\tvar xhr = makeXhr(), timer, n = 0;\n\tvar deferred = {}, isFormData;\n\tvar promise = new Promise(function(resolve,reject){\n\t\tdeferred.resolve = resolve;\n\t\tdeferred.reject = reject;\n\t});\n\tvar requestUrl;\n\tvar isAborted = false;\n\n\tpromise.abort = function () {\n\t\tisAborted = true;\n\t\txhr.abort();\n\t};\n\n\to = [{\n\t\t\tuserAgent: \"XMLHttpRequest\",\n\t\t\tlang: \"en\",\n\t\t\ttype: \"GET\",\n\t\t\tdata: null,\n\t\t\tdataType: \"json\"\n\t}, globalSettings, o].reduce(function(a,b,i) {\n\t\treturn canReflect_1_19_2_canReflect.assignDeep(a,b);\n\t});\n\n\tvar async = o.async !== false;\n\n\t// Set the default contentType\n\tif(!o.contentType) {\n\t\to.contentType = o.type.toUpperCase() === \"GET\" ?\n\t\t\tcontentTypes.form : contentTypes.json;\n\t}\n\t//how jquery handles check for cross domain\n\tif(o.crossDomain == null){\n\t\ttry {\n\t\t\trequestUrl = canParseUri_1_2_2_canParseUri(o.url);\n\t\t\to.crossDomain = !!((requestUrl.protocol && requestUrl.protocol !== originUrl.protocol) ||\n\t\t\t\t(requestUrl.host && requestUrl.host !== originUrl.host));\n\n\t\t} catch (e){\n\t\t\to.crossDomain = true;\n\t\t}\n\t}\n\tif (o.timeout) {\n\t\ttimer = setTimeout(function () {\n\t\t\txhr.abort();\n\t\t\tif (o.timeoutFn) {\n\t\t\t\to.timeoutFn(o.url);\n\t\t\t}\n\t\t}, o.timeout);\n\t}\n\txhr.onreadystatechange = function () {\n\t\n\t\ttry {\n\t\t\tif (xhr.readyState === 4) {\n\t\t\t\tif (timer) {\n\t\t\t\t\tclearTimeout(timer);\n\t\t\t\t}\n\t\t\t\tif (xhr.status < 300) {\n\t\t\t\t\tif (o.success) {\n\t\t\t\t\t\to.success( _xhrResp(xhr, o) );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (o.error) {\n\t\t\t\t\to.error(xhr, xhr.status, xhr.statusText);\n\t\t\t\t}\n\t\t\t\tif (o.complete) {\n\t\t\t\t\to.complete(xhr, xhr.statusText);\n\t\t\t\t}\n\n\t\t\t\tif (xhr.status >= 200 && xhr.status < 300) {\n\t\t\t\t\tdeferred.resolve( _xhrResp(xhr, o) );\n\t\t\t\t} else {\n\t\t\t\t\tdeferred.reject( _xhrResp(xhr, o) );\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (o.progress) {\n\t\t\t\to.progress(++n);\n\t\t\t}\n\t\t} catch(e) {\n\t\t\tdeferred.reject(e);\n\t\t}\n\t};\n\tvar url = o.url, data = null, type = o.type.toUpperCase();\n\tvar isJsonContentType = o.contentType === contentTypes.json;\n\tvar isPost = type === \"POST\" || type === \"PUT\" || type === \"PATCH\";\n\tif (!isPost && o.data) {\n\t\turl += \"?\" + (isJsonContentType ? JSON.stringify(o.data) : canParam_1_2_0_canParam(o.data));\n\t}\n\txhr.open(type, url, async);\n\t// For CORS to send a \"simple\" request (to avoid a preflight check), the following methods are allowed: GET/POST/HEAD,\n\t// see https://developer.mozilla.org/en-US/docs/Web/HTTP/Access_control_CORS#Simple_requests\n\n\tvar isSimpleCors = o.crossDomain && ['GET', 'POST', 'HEAD'].indexOf(type) !== -1;\n\tisFormData = typeof FormData !== \"undefined\" && o.data instanceof FormData;\n\n\tif (isPost) {\n\t\tif (isFormData) {\n\t\t\t// do not set \"Content-Type\" let the browser handle it\n\t\t\t// do not stringify FormData XHR handles it natively\n\t\t\tdata = o.data;\n\t\t} else {\n\t\t\tif (isJsonContentType && !isSimpleCors) {\n\t\t\t\tdata = typeof o.data === \"object\" ? JSON.stringify(o.data) : o.data;\n\t\t\t\txhr.setRequestHeader(\"Content-Type\", \"application/json\");\n\t\t\t} else {\n\t\t\t\tdata = canParam_1_2_0_canParam(o.data);\n\t\t\t\t// CORS simple: `Content-Type` has to be `application/x-www-form-urlencoded`:\n\t\t\t\txhr.setRequestHeader(\"Content-Type\", \"application/x-www-form-urlencoded\");\n\t\t\t}\n\t\t}\n\t} else {\n\t\txhr.setRequestHeader(\"Content-Type\", o.contentType);\n\t}\n\n\t// CORS simple: no custom headers, so we don't add `X-Requested-With` header:\n\tif (!isSimpleCors){\n\t\txhr.setRequestHeader(\"X-Requested-With\", \"XMLHttpRequest\");\n\t}\n\n\tif (o.xhrFields) {\n\t\tfor (var f in o.xhrFields) {\n\t\t\txhr[f] = o.xhrFields[f];\n\t\t}\n\t}\n\tfunction send () {\n\t\tif(!isAborted) {\n\t\t\txhr.send(data);\n\t\t}\n\t}\n\n\tif(o.beforeSend){\n\t\tvar result = o.beforeSend.call( o, xhr, o );\n\t\tif(canReflect_1_19_2_canReflect.isPromise(result)) {\n\t\t\tresult.then(send).catch(deferred.reject);\n\t\t\treturn promise;\n\t\t}\n\t}\n\t\n\tsend();\n\treturn promise;\n}\n\nvar canAjax_2_4_8_canAjax = canNamespace_1_0_0_canNamespace.ajax = ajax;\nvar ajaxSetup = function (o) {\n    globalSettings = o || {};\n};\ncanAjax_2_4_8_canAjax.ajaxSetup = ajaxSetup;\n\nvar methodMapping = {\n\titem: {\n\t\t'GET': 'getData',\n\t\t'PUT': 'updateData',\n\t\t'DELETE': 'destroyData',\n\t},\n\tlist: {\n\t\t'GET': 'getListData',\n\t\t'POST': 'createData'\n\t}\n};\n\n\nfunction inferIdProp (url) {\n\tvar wrappedInBraces = /\\{(.*)\\}/;\n\tvar matches = url.match(wrappedInBraces);\n\tvar isUniqueMatch = matches && matches.length === 2;\n\tif (isUniqueMatch) {\n\t\treturn matches[1];\n\t}\n}\n\nfunction getItemAndListUrls (url, idProp) {\n\tidProp = idProp || inferIdProp(url) || \"id\";\n\tvar itemRegex = new RegExp('\\\\/\\\\{' + idProp+\"\\\\}.*\" );\n\tvar rootIsItemUrl = itemRegex.test(url);\n\tvar listUrl = rootIsItemUrl ? url.replace(itemRegex, \"\") : url;\n\tvar itemUrl = rootIsItemUrl ? url : (url.trim() + \"/{\" + idProp + \"}\");\n\treturn {item: itemUrl, list: listUrl};\n}\n\n\n\nvar canMakeRest_0_1_4_canMakeRest = function(url, idProp){\n\tvar data= {};\n\tcanReflect_1_19_2_canReflect.eachKey( getItemAndListUrls(url, idProp), function(url, type){\n\t\tcanReflect_1_19_2_canReflect.eachKey(methodMapping[type], function(interfaceMethod, method){\n\t\t\tdata[interfaceMethod] = {\n\t\t\t\tmethod: method,\n\t\t\t\turl: url\n\t\t\t};\n\t\t});\n\t});\n\treturn data;\n};\n\nvar makePromise = function(obj){\n\tif (obj && typeof obj.then === \"function\" && !canReflect_1_19_2_canReflect.isPromise(obj)) {\n\t\treturn new Promise(function(resolve, reject) {\n\t\t\tobj.then(resolve, reject);\n\t\t});\n\t}\n\telse {\n\t\treturn obj;\n\t}\n};\n\nvar url = createCommonjsModule(function (module) {\n/**\n * @module {connect.Behavior} can-connect/data/url/url data/url\n * @parent can-connect.behaviors\n * @group can-connect/data/url/url.data-methods data methods\n * @group can-connect/data/url/url.option options\n *\n * @option {connect.Behavior}\n *\n * Uses the [can-connect/data/url/url.url] option to implement the behavior of\n * [can-connect/connection.getListData],\n * [can-connect/connection.getData],\n * [can-connect/connection.createData],\n * [can-connect/connection.updateData], and\n * [can-connect/connection.destroyData] to make an AJAX request\n * to urls.\n *\n * @body\n *\n * ## Use\n *\n * The `data/url` behavior implements many of the [can-connect/DataInterface]\n * methods to send instance data to a URL.\n *\n * For example, the following `todoConnection`:\n *\n * ```js\n * var todoConnection = connect([\n *   require(\"can-connect/data/url/url\")\n * ],{\n *   url: {\n *     getListData: \"GET /todos\",\n *     getData: \"GET /todos/{id}\",\n *     createData: \"POST /todos\",\n *     updateData: \"PUT /todos/{id}\",\n *     destroyData: \"DELETE /todos/{id}\"\n *   }\n * });\n * ```\n *\n * Will make the following request when the following\n * methods are called:\n *\n * ```\n * // GET /todos?due=today\n * todoConnection.getListData({due: \"today\"});\n *\n * // GET /todos/5\n * todosConnection.getData({id: 5})\n *\n * // POST /todos \\\n * // name=take out trash\n * todosConnection.createData({\n *   name: \"take out trash\"\n * });\n *\n * // PUT /todos/5 \\\n * // name=do the dishes\n * todosConnection.updateData({\n *   name: \"do the dishes\",\n *   id: 5\n * });\n *\n * // DELETE /todos/5\n * todosConnection.destroyData({\n *   id: 5\n * });\n * ```\n *\n * There's a few things to notice:\n *\n * 1. URL values can include simple templates like `{id}`\n *    that replace that part of the URL with values in the data\n *    passed to the method.\n * 2. GET and DELETE request data is put in the URL using [can-param].\n * 3. POST and PUT requests put data that is not templated in the URL in POST or PUT body\n *    as JSON-encoded data.  To use form-encoded requests instead, add the property\n *    `contentType:'application/x-www-form-urlencoded'` to your [can-connect/data/url/url.url].\n * 4. If a provided URL doesn't include the method, the following default methods are provided:\n *    - `getListData` - `GET`\n *    - `getData` - `GET`\n *    - `createData` - `POST`\n *    - `updateData` - `PUT`\n *    - `destroyData` - `DELETE`\n *\n * If [can-connect/data/url/url.url] is provided as a string like:\n *\n * ```js\n * var todoConnection = connect([\n *   require(\"can-connect/data/url/url\")\n * ],{\n *   url: \"/todos\"\n * });\n * ```\n *\n * This does the same thing as the first `todoConnection` example.\n */\n\n\n\n\n\n\n\nvar defaultRest = canMakeRest_0_1_4_canMakeRest(\"/resource/{id}\");\n\n\n\n// # can-connect/data/url/url\n// For each pair, create a function that checks the url object\n// and creates an ajax request.\nvar urlBehavior = canConnect_4_0_6_behavior(\"data/url\", function(baseConnection) {\n\tvar behavior = {};\n\tcanReflect_1_19_2_canReflect.eachKey(defaultRest, function(defaultData, dataInterfaceName){\n\t\tbehavior[dataInterfaceName] = function(params) {\n\t\t\tvar meta = methodMetaData[dataInterfaceName];\n\t\t\tvar defaultBeforeSend;\n\n\t\t\tif(typeof this.url === \"object\") {\n\t\t\t\tdefaultBeforeSend = this.url.beforeSend;\n\n\t\t\t\tif(typeof this.url[dataInterfaceName] === \"function\") {\n\n\t\t\t\t\treturn makePromise(this.url[dataInterfaceName](params));\n\t\t\t\t}\n\t\t\t\telse if(this.url[dataInterfaceName]) {\n\t\t\t\t\tvar promise = makeAjax(\n\t\t\t\t\t\t\tthis.url[dataInterfaceName],\n\t\t\t\t\t\t\tparams,\n\t\t\t\t\t\t\tdefaultData.method,\n\t\t\t\t\t\t\tthis.ajax || canAjax_2_4_8_canAjax,\n\t\t\t\t\t\t\tfindContentType(this.url, defaultData.method),\n\t\t\t\t\t\t\tmeta,\n\t\t\t\t\t\t\tdefaultBeforeSend\n\t\t\t\t\t);\n\t\t\t\t\treturn makePromise(promise);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar resource = typeof this.url === \"string\" ? this.url : this.url.resource;\n\t\t\tif( resource ) {\n\t\t\t\tvar idProps = canReflect_1_19_2_canReflect.getSchema(this.queryLogic).identity;\n\t\t\t\tvar resourceWithoutTrailingSlashes = resource.replace(/\\/+$/, \"\");\n\t\t\t\tvar result = canMakeRest_0_1_4_canMakeRest(resourceWithoutTrailingSlashes, idProps[0])[dataInterfaceName];\n\t\t\t\treturn makePromise(makeAjax(\n\t\t\t\t\tresult.url,\n\t\t\t\t\tparams,\n\t\t\t\t\tresult.method,\n\t\t\t\t\tthis.ajax || canAjax_2_4_8_canAjax,\n\t\t\t\t\tfindContentType(this.url, result.method),\n\t\t\t\t\tmeta,\n\t\t\t\t\tdefaultBeforeSend\n\t\t\t\t));\n\t\t\t}\n\n\t\t\treturn baseConnection[name].call(this, params);\n\t\t};\n\t});\n\n\treturn behavior;\n});\n/**\n * @property {String|Object} can-connect/data/url/url.url url\n * @parent can-connect/data/url/url.option\n *\n * Specify the url and methods that should be used for the \"Data Methods\".\n *\n * @option {String} If a string is provided, it's assumed to be a RESTful interface. For example,\n * if the following is provided:\n *\n * ```\n * url: \"/services/todos\"\n * ```\n *\n * ... the following methods and requests are used:\n *\n *  - `getListData` - `GET /services/todos`\n *  - `getData` - `GET /services/todos/{id}`\n *  - `createData` - `POST /services/todos`\n *  - `updateData` - `PUT /services/todos/{id}`\n *  - `destroyData` - `DELETE /services/todos/{id}`\n *\n * @option {Object} If an object is provided, it can customize each method and URL directly\n * like:\n *\n * ```js\n * url: {\n *   getListData: \"GET /services/todos\",\n *   getData: \"GET /services/todo/{id}\",\n *   createData: \"POST /services/todo\",\n *   updateData: \"PUT /services/todo/{id}\",\n *   destroyData: \"DELETE /services/todo/{id}\"\n * }\n * ```\n *\n * You can provide a `resource` property that works like providing `url` as a string, but overwrite\n * other values like:\n *\n * ```js\n * url: {\n *   resource: \"/services/todo\",\n *   getListData: \"GET /services/todos\"\n * }\n * ```\n *\n * You can also customize per-method the parameters passed to the [can-connect/data/url/url.ajax ajax implementation], like:\n * ```js\n * url: {\n *   resource: \"/services/todos\",\n *   getListData: {\n *     url: \"/services/todos\",\n *     type: \"GET\",\n *     beforeSend: () => {\n *       return fetch('/services/context').then(processContext);\n *     }\n *   }\n * }\n * ```\n * This can be particularly useful for passing a handler for the [can-ajax <code>beforeSend</code>] hook.\n *\n * The [can-ajax <code>beforeSend</code>] hook can also be passed for all request methods. This can be useful when\n * attaching a session token header to a request:\n * \n * ```js\n * url: {\n *   resource: \"/services/todos\",\n *   beforeSend: (xhr) => {\n *     xhr.setRequestHeader('Authorization', `Bearer: ${Session.current.token}`);\n *   }\n * }\n * ```\n *\n * Finally, you can provide your own method to totally control how the request is made:\n *\n * ```js\n * url: {\n *   resource: \"/services/todo\",\n *   getListData: \"GET /services/todos\",\n *   getData: function(param){\n *     return new Promise(function(resolve, reject){\n *       $.get(\"/services/todo\", {identifier: param.id}).then(resolve, reject);\n *     });\n *   }\n * }\n * ```\n */\n\n\n /**\n  * @property {function} can-connect/data/url/url.ajax ajax\n  * @parent can-connect/data/url/url.option\n  *\n  * Specify the ajax functionality that should be used to make the request.\n  *\n  * @option {function} Provides an alternate function to be used to make\n  * ajax requests.  By default [can-ajax] provides the ajax\n  * functionality. jQuery's ajax method can be substituted as follows:\n  *\n  * ```js\n  * connect([\n  *   require(\"can-connect/data/url/url\")\n  * ],{\n  *   url: \"/things\",\n  *   ajax: $.ajax\n  * });\n  * ```\n  *\n  *   @param {Object} settings Configuration options for the AJAX request.\n  *   @return {Promise} A Promise that resolves to the data.\n  */\n\n// ## methodMetaData\n// Metadata on different methods that is passed to makeAjax\nvar methodMetaData = {\n\t/**\n\t * @function can-connect/data/url/url.getListData getListData\n\t * @parent can-connect/data/url/url.data-methods\n\t *\n\t * @signature `getListData(set)`\n\t *\n\t *   Retrieves list data for a particular set given the [can-connect/data/url/url.url] settings.\n\t *   If `url.getListData` is a function, that function will be called.  If `url.getListData` is a\n\t *   string, a request to that string will be made. If `url` is a string, a `GET` request is made to\n\t *   `url`.\n\t *\n\t *   @param {can-query-logic/query} query A object that represents the set of data needed to be loaded.\n\t *   @return {Promise<can-connect.listData>} A promise that resolves to the ListData format.\n\t */\n\tgetListData: {},\n\t/**\n\t * @function can-connect/data/url/url.getData getData\n\t * @parent can-connect/data/url/url.data-methods\n\t *\n\t * @signature `getData(params)`\n\t *\n\t *   Retrieves raw instance data given the [can-connect/data/url/url.url] settings.\n\t *   If `url.getData` is a function, that function will be called.  If `url.getData` is a\n\t *   string, a request to that string will be made. If `url` is a string, a `GET` request is made to\n\t *   `url+\"/\"+IDPROP`.\n\t *\n\t *   @param {Object} params A object that represents the set of data needed to be loaded.\n\t *   @return {Promise<Object>} A promise that resolves to the instance data.\n\t */\n\tgetData: {},\n\t/**\n\t * @function can-connect/data/url/url.createData createData\n\t * @parent can-connect/data/url/url.data-methods\n\t *\n\t * @signature `createData(instanceData, cid)`\n\t *\n\t *   Creates instance data given the serialized form of the data and\n\t *   the [can-connect/data/url/url.url] settings.\n\t *   If `url.createData` is a function, that function will be called.  If `url.createData` is a\n\t *   string, a request to that string will be made. If `url` is a string, a `POST` request is made to\n\t *   `url`.\n\t *\n\t *   @param {Object} instanceData The serialized data of the instance.\n\t *   @param {Number} cid A unique id that represents the instance that is being created.\n\t *   @return {Promise<Object>} A promise that resolves to the newly created instance data.\n\t */\n\tcreateData: {},\n\t/**\n\t * @function can-connect/data/url/url.updateData updateData\n\t * @parent can-connect/data/url/url.data-methods\n\t *\n\t * @signature `updateData(instanceData)`\n\t *\n\t * Updates instance data given the serialized form of the data and\n\t *   the [can-connect/data/url/url.url] settings.\n\t *   If `url.updateData` is a function, that function will be called.  If `url.updateData` is a\n\t *   string, a request to that string will be made. If `url` is a string, a `PUT` request is made to\n\t *   `url+\"/\"+IDPROP`.\n\t *\n\t *   @param {Object} instanceData The serialized data of the instance.\n\t *   @return {Promise<Object>} A promise that resolves to the updated instance data.\n\t */\n\tupdateData: {},\n\t/**\n\t * @function can-connect/data/url/url.destroyData destroyData\n\t * @parent can-connect/data/url/url.data-methods\n\t *\n\t * @signature `destroyData(instanceData)`\n\t *\n\t * Deletes instance data given the serialized form of the data and\n\t *   the [can-connect/data/url/url.url] settings.\n\t *   If `url.destroyData` is a function, that function will be called.  If `url.destroyData` is a\n\t *   string, a request to that string will be made. If `url` is a string, a `DELETE` request is made to\n\t *   `url+\"/\"+IDPROP`.\n\t *\n\t *   @param {Object} instanceData The serialized data of the instance.\n\t *   @return {Promise<Object>} A promise that resolves to the deleted instance data.\n\t */\n\tdestroyData: {includeData: false}\n};\n\nvar findContentType = function( url, method ) {\n\tif ( typeof url === 'object' && url.contentType ) {\n\t\tvar acceptableType = url.contentType === 'application/x-www-form-urlencoded' ||\n\t\t\turl.contentType === 'application/json';\n\t\tif ( acceptableType ) {\n\t\t\treturn url.contentType;\n\t\t} else {\n\t\t\t//!steal-remove-start\n\t\t\tif(process.env.NODE_ENV !== 'production') {\n\t\t\t\tdev.warn(\"Unacceptable contentType on can-connect request. \" +\n\t\t\t\t\t\"Use 'application/json' or 'application/x-www-form-urlencoded'\");\n\t\t\t}\n\t\t\t//!steal-remove-end\n\t\t}\n\t}\n\treturn method === \"GET\" ? \"application/x-www-form-urlencoded\" : \"application/json\";\n};\n\nfunction urlParamEncoder (key, value) {\n\treturn encodeURIComponent(value);\n}\n\nvar makeAjax = function ( ajaxOb, data, type, ajax, contentType, reqOptions, defaultBeforeSend ) {\n\n\tvar params = {};\n\n\t// A string here would be something like `\"GET /endpoint\"`.\n\tif (typeof ajaxOb === 'string') {\n\t\t// Split on spaces to separate the HTTP method and the URL.\n\t\tvar parts = ajaxOb.split(/\\s+/);\n\t\tparams.url = parts.pop();\n\t\tif (parts.length) {\n\t\t\tparams.type = parts.pop();\n\t\t}\n\t} else {\n\t\t// If the first argument is an object, just load it into `params`.\n\t\tcanReflect_1_19_2_canReflect.assignMap(params, ajaxOb);\n\t}\n\n\t// If the `data` argument is a plain object, copy it into `params`.\n\tparams.data = typeof data === \"object\" && !Array.isArray(data) ?\n\t\tcanReflect_1_19_2_canReflect.assignMap(params.data || {}, data) : data;\n\n\t// Substitute in data for any templated parts of the URL.\n\tparams.url = replaceWith(params.url, params.data, urlParamEncoder, true);\n\tparams.contentType = contentType;\n\n\tif(reqOptions.includeData === false) {\n\t\tdelete params.data;\n\t}\n\n\treturn ajax(canReflect_1_19_2_canReflect.assignMap({\n\t\ttype: type || 'post',\n\t\tdataType: 'json',\n\t\tbeforeSend: defaultBeforeSend,\n\t}, params));\n};\n\nmodule.exports = urlBehavior;\n\n//!steal-remove-start\nif(process.env.NODE_ENV !== 'production') {\n\tvar validate$$1 = validate;\n\tmodule.exports = validate$$1(urlBehavior, ['url']);\n}\n//!steal-remove-end\n});\n\nvar indexByIdentity = function(items, item, schema){\n    var length = canReflect_1_19_2_canReflect.size(items);\n    if(!schema && length > 0) {\n        schema = canReflect_1_19_2_canReflect.getSchema( items[0] );\n    }\n    if(!schema) {\n        schema = canReflect_1_19_2_canReflect.getSchema( item );\n    }\n    if(!schema) {\n        throw new Error(\"No schema to use to get identity.\");\n    }\n\n\tvar id = canReflect_1_19_2_canReflect.getIdentity(item, schema);\n\n\tfor(var i = 0; i < length; i++) {\n\t\tvar connId = canReflect_1_19_2_canReflect.getIdentity(items[i], schema);\n        // this was ==\n\t\tif( id === connId) {\n\t\t\treturn i;\n\t\t}\n\t}\n\treturn -1;\n};\n\n/**\n * @module can-connect/real-time/real-time real-time\n * @parent can-connect.behaviors\n * @group can-connect/real-time/real-time.methods 0 methods\n * @group can-connect/real-time/real-time.callbacks 1 data callbacks\n *\n * Update lists to include or exclude instances based\n * on set logic.\n *\n * @signature `realTime( baseConnection )`\n *\n *   Overwrites the \"data callback\" methods and provides\n *   [can-connect/real-time/real-time.createInstance],\n *   [can-connect/real-time/real-time.updateInstance], and\n *   [can-connect/real-time/real-time.destroyInstance] methods\n *   that\n *   update lists to include or exclude a created,\n *   updated, or destroyed instance.\n *\n *   An instance is put in a list if it is a\n *   [can-query-logic/queryLogic.prototype.isSubset]\n *   of the [can-connect/base/base.listQuery].  The item is inserted using [can-query-logic.prototype.index].\n *\n * @body\n *\n * ## Use\n *\n * To use `real-time`, create a connection with its dependent\n * behaviors like:\n *\n * ```js\n * var todoConnection = connect(\n *    [\"data/callbacks\",\n *     \"real-time\",\n *     \"constructor/callbacks-once\",\n *     \"constructor/store\",\n *     \"constructor\",\n *     \"data/url\"],{\n *   url: \"/todos\"\n * });\n * ```\n *\n * Next, use the connection to load lists and save those lists in the\n * store:\n *\n * ```js\n * todoConnection.getList({complete: false}).then(function(todos){\n *   todoConnection.addListReference(todos);\n * })\n * ```\n *\n * Finally, use one of the  [can-connect/real-time/real-time.createInstance],\n * [can-connect/real-time/real-time.updateInstance], and\n * [can-connect/real-time/real-time.destroyInstance] methods to tell the connection\n * that data has changed.  The connection will update (by calling splice)\n * each list accordingly.\n *\n *\n * ## Example\n *\n * The following demo shows two lists that use this connection.  The\n * \"Run Code\" button sends the connection data changes which the\n * connection will then update lists accordingly:\n *\n *\n * @demo demos/can-connect/real-time.html\n *\n * This example creates a `todoList` function and `todoItem` function\n * that manage the behavior of a list of todos and a single todo respectfully.\n * It uses [Object.observe](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/observe)\n * to observe changes in the todo list and individual todo data. Other\n * frameworks will typically provide their own observable system.\n *\n * ### todoList\n *\n * When `todoList` is created, it is passed the `set` of data to load.  It uses\n * this to get todos from the `todoConnection` like:\n *\n *\n * ```js\n * todosConnection.getList(set).then(function(retrievedTodos){\n * ```\n *\n * It then adds those `todos` to the [can-connect/constructor/store/store.listStore] so\n * they can be updated automatically.  And, it listens to changes in `todos` and calls an `update` function:\n *\n * ```js\n * todosConnection.addListReference(todos);\n * Object.observe(todos, update, [\"add\", \"update\", \"delete\"] );\n * ```\n *\n * The update function is able to inserted new `todoItem`s in the page when items are added\n * to or removed from `todos`.  We exploit that by calling `update` as if it just added\n * each todo in the list:\n *\n * ```js\n * update(todos.map(function(todo, i){\n *   return {\n *     type: \"add\",\n *     name: \"\"+i\n *   };\n * }));\n * ```\n *\n * ### todoItem\n *\n * The `todoItem` creates an element that updates with changes\n * in its `todo`.  It listens to changes in the `todo` and saves\n * the todo in the [can-connect/constructor/store/store.instanceStore] with the\n * following:\n *\n * ```js\n * Object.observe(todo, update, [\"add\", \"update\", \"delete\"] );\n * todosConnection.addInstanceReference(todo);\n * ```\n *\n * A `todoItem` needs to be able to stop listening on the `todo` and remove itself from the\n * `instanceStore` if the `todo` is removed from the page.  To provide this teardown\n * functionality, `todoItem` listens to a `\"removed\"` event on its element and\n * `unobserves` the todo and removes it from the `instanceStore`:\n *\n * ```js\n * $(li).bind(\"removed\", function(){\n *   Object.unobserve(todo, update, [\"add\", \"update\", \"delete\"] );\n *   todosConnection.deleteInstanceReference(todo);\n * });\n * ```\n */\n\n\n\n\n\n\nvar spliceSymbol = canSymbol_1_7_0_canSymbol.for(\"can.splice\");\n\nfunction updateList(list, getRecord, currentIndex, newIndex) {\n\n\tif(currentIndex === -1) { // item is not in the list\n\n\t\tif(newIndex !== -1) { // item should be in the list\n\t\t\tcanReflect_1_19_2_canReflect.splice(list, newIndex, 0, [getRecord()]);\n\t\t} else {\n\t\t\tcanReflect_1_19_2_canReflect.splice(list, 0, 0, [getRecord()]);\n\t\t}\n\t}\n\telse { // item is already in the list\n\t\tif(newIndex === -1) { // item should be removed from the lists\n\t\t\tcanReflect_1_19_2_canReflect.splice(list, currentIndex, 1, []);\n\t\t}\n\t\telse if(newIndex !== currentIndex){ // item needs to be moved\n\n\t\t\tif(currentIndex < newIndex) {\n\t\t\t\tcanReflect_1_19_2_canReflect.splice(list, newIndex, 0, [getRecord()]);\n\t\t\t\tcanReflect_1_19_2_canReflect.splice(list, currentIndex, 1, []);\n\t\t\t} else {\n\t\t\t\tcanReflect_1_19_2_canReflect.splice(list, currentIndex,1, []);\n\t\t\t\tcanReflect_1_19_2_canReflect.splice(list, newIndex, 0, [getRecord()]);\n\t\t\t}\n\t\t}\n\t\telse { // item in the same place\n\n\t\t}\n\t}\n}\n\n\nfunction updateListWithItem(list, recordData, currentIndex, newIndex, connection, set){\n\t// this is cleaning up a bug with QueryLogic.index where it can return undefined\n\tif( newIndex === undefined ) {\n\t\tnewIndex = -1;\n\t}\n\t// we are inserting right where we already are.\n\tif(currentIndex !== -1 && (newIndex === currentIndex + 1 || newIndex === currentIndex)) {\n\t\treturn;\n\t}\n\tif(list[spliceSymbol] !== undefined) {\n\t\tupdateList(list, function(){\n\t\t\treturn connection.hydrateInstance(recordData);\n\t\t},currentIndex, newIndex);\n\n\t} else {\n\t\tvar copy = connection.serializeList(list);\n\t\tupdateList(copy, function(){\n\t\t\treturn recordData;\n\t\t},currentIndex, newIndex);\n\t\tconnection.updatedList(list,  { data: copy }, set);\n\t}\n}\n\n\nvar realTime = canConnect_4_0_6_canConnect.behavior(\"real-time\",function(baseConnection){\n\n\tvar createPromise = Promise.resolve();\n\tvar behavior;\n\n\tbehavior = {\n\t\tcreateData: function(){\n\t\t\tvar promise = baseConnection.createData.apply(this, arguments);\n\t\t\tvar cleanPromise = promise.catch(function () { return ''; });\n\t\t\tcreatePromise = Promise.all([createPromise, cleanPromise]);\n\t\t\treturn promise;\n\t\t},\n\t\t/**\n\t\t * @function can-connect/real-time/real-time.createInstance createInstance\n\t\t * @parent can-connect/real-time/real-time.methods\n\t\t *\n\t\t * Programatically indicate a new instance has been created.\n\t\t *\n\t\t * @signature `connection.createInstance(props)`\n\t\t *\n\t\t *   If there is no instance in the [can-connect/constructor/store/store.instanceStore]\n\t\t *   for `props`'s [can-connect/base/base.id], an instance is [can-connect/constructor/constructor.hydrateInstance hydrated],\n\t\t *   added to the store, and then [can-connect/real-time/real-time.createdData] is called with\n\t\t *   `props` and the hydrated instance's serialized data. [can-connect/real-time/real-time.createdData]\n\t\t *   will add this instance to any lists the instance belongs to.\n\t\t *\n\t\t *   If this instance has already been created, calls\n\t\t *   [can-connect/real-time/real-time.updateInstance] with `props`.\n\t\t *\n\t\t *   @param {Object} props The raw properties of the instance was created.\n\t\t *\n\t\t *   @return {Promise<Instance>} A promise that resolves to the created instance.\n\t\t *\n\t\t * @body\n\t\t *\n\t\t * ## Use\n\t\t *\n\t\t * With a `real-time` connection, call `createInstance` when an instance is created that\n\t\t * the connection itself did not make.  For instance, the following might listen to\n\t\t * [socket.io](http://socket.io/) for when a `todo` is created and update the connection\n\t\t * accordingly:\n\t\t *\n\t\t * ```js\n\t\t * socket.on('todo created', function(todo){\n\t\t *   todoConnection.createInstance(todo);\n\t\t * });\n\t\t * ```\n\t\t *\n\t\t */\n\t\tcreateInstance: function(props){\n\t\t\tvar self = this;\n\t\t\treturn new Promise(function(resolve, reject){\n\t\t\t\t// Wait until all create promises are done\n\t\t\t\t// so that we can find data in the instance store\n\t\t\t\tcreatePromise.then(function(){\n\t\t\t\t\t// Allow time for the store to get hydrated\n\t\t\t\t\tsetTimeout(function(){\n\t\t\t\t\t\tvar id = self.id(props);\n\t\t\t\t\t\tvar instance = self.instanceStore.get(id);\n\t\t\t\t\t\tvar serialized;\n\n\t\t\t\t\t\tif( instance ) {\n\t\t\t\t\t\t\t// already created, lets update\n\t\t\t\t\t\t\tresolve(self.updateInstance(props));\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tinstance = self.hydrateInstance(props);\n\t\t\t\t\t\t\tserialized = self.serializeInstance(instance);\n\n\t\t\t\t\t\t\tself.addInstanceReference(instance);\n\n\t\t\t\t\t\t\tPromise.resolve( self.createdData(props, serialized) ).then(function(){\n\t\t\t\t\t\t\t\tself.deleteInstanceReference(instance);\n\t\t\t\t\t\t\t\tresolve(instance);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}, 1);\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * @function can-connect/real-time/real-time.createdData createdData\n\t\t * @parent can-connect/real-time/real-time.callbacks\n\t\t *\n\t\t * Called whenever instance data is created.\n\t\t *\n\t\t * @signature `connection.createdData(props, params, [cid])`\n\t\t *\n\t\t *   Updates lists with the created instance.\n\t\t *\n\t\t *   Gets the instance created for this request. Then, updates the instance with\n\t\t *   the response data `props`.\n\t\t *\n\t\t *   Next, it goes through every list in the [can-connect/constructor/store/store.listStore],\n\t\t *   test if the instance's data belongs in that list.  If it does,\n\t\t *   adds the instance's data to the serialized list data and\n\t\t *   [can-connect/constructor/constructor.updatedList updates the list].\n\t\t */\n\t\tcreatedData: function(props, params, cid){\n\t\t\tvar instance;\n\t\t\tif(cid !== undefined) {\n\t\t\t\tinstance = this.cidStore.get(cid);\n\t\t\t} else {\n\t\t\t\tinstance = this.instanceStore.get( this.id(props) );\n\t\t\t}\n\t\t\t// pre-register so everything else finds this even if it doesn't have an id\n\t\t\tthis.addInstanceReference(instance, this.id(props));\n\t\t\tthis.createdInstance(instance, props);\n\t\t\tcreate.call(this, this.serializeInstance(instance));\n\t\t\tthis.deleteInstanceReference(instance);\n\t\t\treturn undefined;\n\t\t},\n\n\t\t/**\n\t\t * @function can-connect/real-time/real-time.updatedData updatedData\n\t\t * @parent can-connect/real-time/real-time.callbacks\n\t\t *\n\t\t * Called whenever instance data is updated.\n\t\t *\n\t\t * @signature `connection.updatedData(props, params)`\n\t\t *\n\t\t *   Gets the instance that is updated, updates\n\t\t *   it with `props` and the adds or removes it to\n\t\t *   lists it belongs in.\n\t\t *\n\t\t *   @return {undefined} Returns `undefined` to prevent `.save` from calling `updatedInstance`.\n\t\t */\n\t\t// Go through each list in the listStore and see if there are lists that should have this,\n\t\t// or a list that shouldn't.\n\t\tupdatedData: function(props, params){\n\n\t\t\tvar instance = this.instanceStore.get( this.id(params) );\n\t\t\tthis.updatedInstance(instance, props);\n\t\t\tupdate$1.call(this, this.serializeInstance(instance));\n\n\t\t\t// Returning undefined prevents other behaviors from running.\n\t\t\treturn undefined;\n\t\t},\n\t\t/**\n\t\t * @function can-connect/real-time/real-time.updateInstance updateInstance\n\t\t * @parent can-connect/real-time/real-time.methods\n\t\t *\n\t\t * Programatically indicate a new instance has been updated.\n\t\t *\n\t\t * @signature `connection.updateInstance(props)`\n\t\t *\n\t\t *   Calls [can-connect/real-time/real-time.updatedData] in the right way so\n\t\t *   that the instance is updated and added to or removed from\n\t\t *   any lists it belongs in.\n\t\t *\n\t\t *   @param {Object} props The properties of the instance that needs to be updated.\n\t\t *\n\t\t *   @return {Promise<Instance>} the updated instance.\n\t\t *\n\t\t * @body\n\t\t *\n\t\t * ## Use\n\t\t *\n\t\t * ```js\n\t\t * socket.on('todo updated', function(todo){\n\t\t *   todoConnection.updateInstance(todo);\n\t\t * });\n\t\t * ```\n\t\t */\n\t\tupdateInstance: function(props){\n\t\t\tvar id = this.id(props);\n\t\t\tvar instance = this.instanceStore.get(id);\n\t\t\tif( !instance ) {\n\t\t\t\tinstance = this.hydrateInstance(props);\n\t\t\t}\n\t\t\tthis.addInstanceReference(instance);\n\n\t\t\tvar serialized = this.serializeInstance(instance),\n\t\t\t\tself = this;\n\n\t\t\treturn Promise.resolve( this.updatedData(props, serialized) ).then(function(){\n\n\t\t\t\tself.deleteInstanceReference(instance);\n\t\t\t\treturn instance;\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * @function can-connect/real-time/real-time.destroyedData destroyedData\n\t\t * @parent can-connect/real-time/real-time.callbacks\n\t\t *\n\t\t * @signature `connection.destroyedData(props, params)`\n\t\t *\n\t\t * Gets the instance for this request.  Then tests if the instance\n\t\t * is in any list in the [can-connect/constructor/store/store.listStore].  If\n\t\t * it is, removes the instance from the list.\n\t\t *\n\t\t * @param {Object} props The properties of the destroyed instance.\n\t\t * @param {Object} [params] The parameters used to destroy the data.\n\t\t */\n\t\tdestroyedData: function(props, params){\n\t\t\tvar id = this.id(params || props);\n\t\t\tvar instance = this.instanceStore.get(id);\n\t\t\tif( !instance ) {\n\t\t\t\tinstance = this.hydrateInstance(props);\n\t\t\t}\n\t\t\tvar serialized = this.serializeInstance(instance);\n\t\t\tthis.destroyedInstance(instance, props);\n\t\t\t// we can pre-register it so everything else finds it\n\t\t\tdestroy.call(this, serialized);\n\t\t\treturn undefined;\n\t\t},\n\t\t/**\n\t\t * @function can-connect/real-time/real-time.destroyInstance destroyInstance\n\t\t * @parent can-connect/real-time/real-time.methods\n\t\t *\n\t\t * Programatically indicate a new instance has been destroyed.\n\t\t *\n\t\t * @signature `connection.destroyInstance(props)`\n\t\t *\n\t\t *   Gets or creates an instance from `props` and uses\n\t\t *   it to call [can-connect/real-time/real-time.destroyedData]\n\t\t *   correctly.\n\t\t *\n\t\t * @param {Object} props The properties of the destroyed instance.\n\t\t * @return {Promise<Instance>}  A promise with the destroyed instance.\n\t\t *\n\t\t * @body\n\t\t * ## Use\n\t\t *\n\t\t * ```js\n\t\t * socket.on('todo destroyed', function(todo){\n\t\t *   todoConnection.destroyInstance(todo);\n\t\t * });\n\t\t * ```\n\t\t */\n\t\tdestroyInstance: function(props){\n\t\t\tvar id = this.id(props);\n\t\t\tvar instance = this.instanceStore.get(id);\n\t\t\tif( !instance ) {\n\t\t\t\tinstance = this.hydrateInstance(props);\n\t\t\t}\n\t\t\tthis.addInstanceReference(instance);\n\n\t\t\tvar serialized = this.serializeInstance(instance),\n\t\t\t\tself = this;\n\n\t\t\treturn Promise.resolve( this.destroyedData(props, serialized) ).then(function(){\n\n\t\t\t\tself.deleteInstanceReference(instance);\n\t\t\t\treturn instance;\n\t\t\t});\n\t\t}\n\t};\n\n\t//!steal-remove-start\n\tif(process.env.NODE_ENV !== 'production') {\n\t\tbehavior.gotListData = function(items, set) {\n\t\t\tvar self = this;\n\t\t\tif (this.queryLogic) {\n\t\t\t\tif(Array.isArray(items)) {\n\t\t\t\t\titems = {data: items};\n\t\t\t\t}\n\t\t\t\tfor(var item, i = 0, l = items.data.length; i < l; i++) {\n\t\t\t\t\titem = items.data[i];\n\t\t\t\t\tif( !self.queryLogic.isMember(set, item) ) {\n\t\t\t\t\t\tvar msg = [\n\t\t\t\t\t\t\t\"One or more items were retrieved which do not match the 'Set' parameters used to load them. \",\n\t\t\t\t\t\t\t\"Read the docs for more information: https://canjs.com/doc/can-query-logic.html#TestingyourQueryLogic\",\n\t\t\t\t\t\t\t\"\\n\\nBelow are the 'query' parameters:\",\n\t\t\t\t\t\t\t\"\\n\" + dev.stringify(set),\n\t\t\t\t\t\t\t\"\\n\\nAnd below is an item which does not match those parameters:\",\n\t\t\t\t\t\t\t\"\\n\" + dev.stringify(item)\n\t\t\t\t\t\t].join(\"\");\n\t\t\t\t\t\tdev.warn(msg);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn Promise.resolve(items);\n\t\t};\n\t}\n\t//!steal-remove-end\n\n\treturn behavior;\n});\n\nvar create = function(props){\n\tvar self = this;\n\t// go through each list\n\tthis.listStore.forEach(function(list, id){\n\t\tvar set = JSON.parse(id);\n\t\t// ideally there should be speed up ... but this is fine for now.\n\n\n\t\tvar index = indexByIdentity(list, props, self.queryLogic.schema);\n\n\t\tif(self.queryLogic.isMember(set, props)) {\n\t\t\tvar newIndex = self.queryLogic.index(set, list, props);\n\n\t\t\tupdateListWithItem(list, props, index, newIndex, self, set);\n\t\t}\n\n\t});\n};\n\n// ## update\n// Goes through each list and sees if the list should be updated\n// with the new.\nvar update$1 = function(props) {\n\tvar self = this;\n\n\tthis.listStore.forEach(function(list, id){\n\t\tvar set = JSON.parse(id);\n\t\t// ideally there should be speed up ... but this is fine for now.\n\n\n\t\tvar currentIndex = indexByIdentity(list, props, self.queryLogic.schema);\n\n\t\tif(self.queryLogic.isMember( set, props )) {\n\n\t\t\tvar newIndex = self.queryLogic.index(set, list, props);\n\n\t\t\tupdateListWithItem(list, props, currentIndex, newIndex, self, set);\n\n\t\t}  else if(currentIndex !== -1){ // its still in the list\n\t\t\t// otherwise remove it\n\t\t\tupdateListWithItem(list, props, currentIndex, -1, self, set);\n\t\t}\n\n\t});\n};\n\nvar destroy = function(props) {\n\tvar self = this;\n\tthis.listStore.forEach(function(list, id){\n\t\tvar set = JSON.parse(id);\n\t\t// ideally there should be speed up ... but this is fine for now.\n\n\t\tvar currentIndex = indexByIdentity(list, props, self.queryLogic.schema);\n\n\t\tif(currentIndex !== -1){\n\t\t\t// otherwise remove it\n\t\t\tupdateListWithItem(list, props, currentIndex, -1, self, set);\n\t\t}\n\n\t});\n};\n\nvar callbacksOnce = createCommonjsModule(function (module) {\n/**\n * @module {function} can-connect/constructor/callbacks-once/callbacks-once constructor/callbacks-once\n * @parent can-connect.behaviors\n *\n * Prevents duplicate calls to the instance callback methods.\n *\n * @signature `callbacksOnce( baseConnection )`\n *\n *   Prevents duplicate calls to the instance callback methods by tracking the last data the methods were called with.\n *   If called with the same data again, it does not call the base connection's instance callback.\n *\n *   @param {{}} baseConnection `can-connect` connection object that is having the `callbacks-once` behavior added\n *   on to it. Should already contain the behaviors that provide the Instance Callbacks\n *   (e.g [can-connect/constructor/constructor]). If the `connect` helper is used to build the connection, the\n *   behaviors will automatically be ordered as required.\n *\n *   @return {Object} A `can-connect` connection containing the methods provided by `callbacks-once`.\n *\n */\n\n\nvar forEach = [].forEach;\n\n// wires up the following methods\nvar callbacks = [\n\t/**\n\t * @function can-connect/constructor/callbacks-once/callbacks-once.createdInstance createdInstance\n\t * @parent can-connect/constructor/callbacks-once/callbacks-once\n\t *\n\t * `createdInstance` callback handler that prevents sequential calls with the same arguments.\n\t *\n\t * @signature `createdInstance(instance, data)`\n\t * Called with the instance created by [can-connect/constructor/constructor.save `connection.save`] and the response data of the\n\t * underlying request. Prevents sequential calls to the underlying `createdInstance` handlers with the same arguments.\n\t *\n\t * @param {} instance the instance created by `connection.save`\n\t * @param {} data the response data returned during `connection.save`\n\t */\n\t\"createdInstance\",\n\t/**\n\t * @function can-connect/constructor/callbacks-once/callbacks-once.updatedInstance updatedInstance\n\t * @parent can-connect/constructor/callbacks-once/callbacks-once\n\t *\n\t * `updatedInstance` callback handler that prevents sequential calls with the same arguments.\n\t *\n\t * @signature `updatedInstance(instance, data)`\n\t * Called with the instance updated by [can-connect/constructor/constructor.save`connection.save`] and the response data of the\n\t * underlying request. Prevents sequential calls to the underlying `updatedInstance` handlers with the same arguments.\n\t *\n\t * @param {} instance the instance created by `connection.save`\n\t * @param {} data the response data returned during `connection.save`\n\t */\n\t\"updatedInstance\",\n\t/**\n\t * @function can-connect/constructor/callbacks-once/callbacks-once.destroyedInstance destroyedInstance\n\t * @parent can-connect/constructor/callbacks-once/callbacks-once\n\t *\n\t * `destroyedInstance` callback handler that prevents sequential calls with the same arguments.\n\t *\n\t * @signature `destroyedInstance(instance, data)`\n\t * Called with the instance created by [can-connect/constructor/constructor.destroy `connection.destroy`] and the response data of the\n\t * underlying request. Prevents sequential calls to the underlying `destroyedInstance` handlers with the same arguments.\n\t *\n\t * @param {} instance the instance created by `connection.destroy`\n\t * @param {} data the response data returned during `connection.destroy`\n\t */\n\t\"destroyedInstance\"\n];\n\n\n\nvar callbacksOnceBehavior = canConnect_4_0_6_canConnect.behavior(\"constructor/callbacks-once\",function(baseConnection){\n\n\tvar behavior = {};\n\n\tforEach.call(callbacks, function(name){\n\t\tbehavior[name] = function(instance, data ){\n\n\t\t\tvar lastSerialized = this.getInstanceMetaData(instance, \"last-data-\" + name);\n\n\t\t\tvar serialize = sortedSetJson(data);\n\t\t\tif(lastSerialized !== serialize) {\n\t\t\t\tvar result =  baseConnection[name].apply(this, arguments);\n\t\t\t\tthis.addInstanceMetaData(instance, \"last-data-\" + name, serialize);\n\t\t\t\treturn result;\n\t\t\t}\n\t\t};\n\n\t});\n\n\treturn behavior;\n});\n\nmodule.exports = callbacksOnceBehavior;\n\n//!steal-remove-start\nif(process.env.NODE_ENV !== 'production') {\n\tvar validate$$1 = validate;\n\tmodule.exports = validate$$1(callbacksOnceBehavior, callbacks);\n}\n//!steal-remove-end\n});\n\nfunction realtimeRestModel(optionsOrUrl) {\n\n\t// If optionsOrUrl is a string, make options = {url: optionsOrUrl}\n\tvar options = (typeof optionsOrUrl === \"string\") ? {url: optionsOrUrl} : optionsOrUrl;\n\n\t// If options.ObjectType or .ArrayType aren’t provided, define them\n\tif (typeof options.ObjectType === \"undefined\") {\n\t\toptions.ObjectType = class DefaultObjectType extends canObservableObject {};\n\t}\n\tif (typeof options.ArrayType === \"undefined\") {\n\t\toptions.ArrayType = class DefaultArrayType extends canObservableArray {\n\t\t\tstatic get items() {\n\t\t\t\treturn canType_1_1_6_canType.convert(options.ObjectType);\n\t\t\t}\n\t\t};\n\t}\n\n\tvar behaviors = [\n\t\tconstructor_1,\n\t\tmap$3,\n\t\tstore,\n\t\tcallbacks,\n\t\tparse$1,\n\t\turl,\n\t\trealTime,\n\t\tcallbacksOnce\n\t];\n\n\treturn canConnect_4_0_6_canConnect(behaviors,options);\n}\n\nvar canRealtimeRestModel_2_0_0_canRealtimeRestModel = canNamespace_1_0_0_canNamespace.realtimeRestModel = realtimeRestModel;\n\nfunction restModel(optionsOrUrl) {\n\n\t// If optionsOrUrl is a string, make options = {url: optionsOrUrl}\n\tvar options = (typeof optionsOrUrl === \"string\") ? {url: optionsOrUrl} : optionsOrUrl;\n\n\t// If options.ObjectType or .ArrayType aren’t provided, define them\n\tif (typeof options.ObjectType === \"undefined\") {\n\t\toptions.ObjectType = class DefaultObjectType extends canObservableObject {};\n\t}\n\tif (typeof options.ArrayType === \"undefined\") {\n\t\toptions.ArrayType = class DefaultArrayType extends canObservableArray {\n\t\t\tstatic get items() {\n\t\t\t\treturn canType_1_1_6_canType.convert(options.ObjectType);\n\t\t\t}\n\t\t};\n\t}\n\n\tvar connection = [base,url, parse$1, constructor_1, map$3].reduce(function(prev, behavior){\n\t\treturn behavior(prev);\n\t}, options);\n\tconnection.init();\n\treturn connection;\n}\n\nvar canRestModel_2_0_0_canRestModel = canNamespace_1_0_0_canNamespace.restModel = restModel;\n\nvar getItems$1 = function(data){\n\tif(Array.isArray(data)) {\n\t\treturn data;\n\t} else {\n\t\treturn data.data;\n\t}\n};\n\nvar cacheRequests = createCommonjsModule(function (module) {\nvar forEach = Array.prototype.forEach;\n\n\n/**\n * @module can-connect/cache-requests/cache-requests cache-requests\n * @parent can-connect.behaviors\n * @group can-connect/cache-requests/cache-requests.data data interface\n * @group can-connect/cache-requests/cache-requests.queryLogic queryLogic\n *\n * Cache response data and use it to prevent unnecessary future requests or make future requests smaller.\n *\n * @signature `cacheRequests( baseConnection )`\n *\n *   Provide an implementation of [can-connect/cache-requests/cache-requests.getListData] that uses [can-connect/base/base.queryLogic] to\n *   determine what data is already in the [can-connect/base/base.cacheConnection cache] and what data needs to be\n *   loaded from the base connection.\n *\n *   It then gets data from the cache and the base connection (if needed), merges it, and returns it. Any data returned\n *   from the base connection is added to the cache.\n *\n *   @param {{}} baseConnection `can-connect` connection object that is having the `cache-requests` behavior added\n *   on to it. Should already contain the behaviors that provide the [can-connect/DataInterface]\n *   (e.g [can-connect/data/url/url]). If the `connect` helper is used to build the connection, the behaviors will\n *   automatically be ordered as required.\n *\n *   @return {Object} A `can-connect` connection containing the methods provided by `cache-requests`.\n *\n *\n * @body\n *\n * ## Use\n *\n * Use `cache-requests` in combination with a cache like [can-connect/data/memory-cache/memory-cache] or\n * [can-connect/data/localstorage-cache/localstorage-cache].  For example, to make it so response data is cached\n * in memory:\n *\n * ```js\n * var memoryStore = require(\"can-memory-store\");\n * var dataUrl = require(\"can-connect/data/url/url\");\n * var cacheRequests = require(\"can-connect/cache-requests/cache-requests\");\n * var queryLogic = require(\"can-query-logic\");\n *\n * var todoQueryLogic = new QueryLogic({});\n *\n * var cacheConnection = memoryStore({queryLogic: todoQueryLogic});\n * var todoConnection = connect([dataUrl, cacheRequests],{\n *   cacheConnection: cacheConnection,\n *   url: \"/todos\",\n *   queryLogic: todoQueryLogic\n * });\n * ```\n *\n * Now if today's todos are loaded:\n *\n * ```js\n * todoConnection.getListData({filter: {due: \"today\"}});\n * ```\n *\n * And later, a subset of those todos are loaded:\n *\n * ```js\n * todoConnection.getListData({filter: {due: \"today\", status: \"critical\"}});\n * ```\n *\n * The second request will be created from the original request's data.\n *\n * ## QueryLogic Usage\n *\n * `cache-requests` will \"fill-in\" the `cacheConnection` using [can-query-logic queryLogic].\n *\n * For example, if you requested paginated data like:\n *\n * ```\n * todoConnection.getListData({filter: {status: \"critical\"}})\n * ```\n *\n * And then later requested:\n *\n * ```\n * todoConnection.getListData({})\n * ```\n *\n * `cache-requests` will only request `{filter: {status: [\"low\",\"medium\"]}}`, merging\n * that response with the data already present in the cache.\n *\n * That configuration looks like:\n *\n * ```js\n * var memoryStore = require(\"can-memory-store\");\n * var dataUrl = require(\"can-connect/data/url/url\");\n * var cacheRequests = require(\"can-connect/cache-requests/cache-requests\");\n * var queryLogic = require(\"can-query-logic\");\n *\n * var todoQueryLogic = new QueryLogic({\n *   keys: {\n *     status: QueryLogic.makeEnum([\"low\",\"medium\",\"critical\"])\n *   }\n * });\n *\n * var cacheConnection = memoryStore({queryLogic: todoQueryLogic});\n * var todoConnection = connect([dataUrl, cacheRequests], {\n *   cacheConnection: cacheConnection,\n *   url: \"/todos\",\n *   queryLogic: todoQueryLogic\n * })\n * ```\n *\n * **Note:** `cacheConnection` shares the same queryLogic configuration as the primary connection.\n */\nvar cacheRequestsBehaviour = canConnect_4_0_6_canConnect.behavior(\"cache-requests\",function(baseConnection){\n\n\treturn {\n\n\t\t/**\n\t\t * @function can-connect/cache-requests/cache-requests.getDiff getDiff\n\t\t * @parent can-connect/cache-requests/cache-requests.queryLogic\n\t\t *\n\t\t * Compares the cached queries to the requested query and returns a description of what subset can be loaded from the\n\t\t * cache and what subset must be loaded from the base connection.\n\t\t *\n\t\t * @signature `connection.getDiff( query, availableQueries )`\n\t\t *\n\t\t *   This determines the minimal amount of data that must be loaded from the base connection by going through each\n\t\t *   cached query (`availableQueries`) and doing a [can-query-logic.prototype.isSubset isSubset] check and a\n\t\t *   [can-query-logic.prototype.difference query difference] with the requested query (`query`).\n\t\t *\n\t\t *   If `query` is a subset of an `availableSet`, `{cached: query}` will be returned.\n\t\t *\n\t\t *   If `query` is neither a subset of, nor intersects with any `availableQueries`, `{needed: query}` is returned.\n\t\t *\n\t\t *   If `query` has an intersection with one or more `availableQueries`, a description of the difference that has the fewest\n\t\t *   missing elements will be returned. An example diff description looks like:\n\t\t *\n\t\t *   ```\n\t\t *   {\n\t\t *     needed: {start: 50, end: 99}, // the difference, the query that is not cached\n\t\t *     cached: {start: 0, end: 49}, // the intersection, the query that is cached\n\t\t *     count: 49 // the size of the needed query\n\t\t *   }\n\t\t *   ```\n\t\t *\n\t\t *   @param {can-query-logic/query} query The query that is being requested.\n\t\t *   @param {Array<can-query-logic/query>} availableQueries An array of [can-connect/connection.getSets available queries] in the\n\t\t *     [can-connect/base/base.cacheConnection cache].\n\t\t *   @return {Promise<{needed: can-query-logic/query, cached: can-query-logic/query, count: Integer}>} a difference description object. Described above.\n\t\t *\n\t\t */\n\t\tgetDiff: function( params, availableQueries ){\n\n\t\t\tvar minSets,\n\t\t\t\tself = this;\n\n\t\t\tforEach.call(availableQueries, function(query){\n\t\t\t\tvar curSets;\n\t\t\t\tvar difference = self.queryLogic.difference(params, query );\n\t\t\t\tif( self.queryLogic.isDefinedAndHasMembers(difference) ) {\n\t\t\t\t\tvar intersection = self.queryLogic.intersection(params, query);\n\t\t\t\t\tcurSets = {\n\t\t\t\t\t\tneeded: difference,\n\t\t\t\t\t\tcached: self.queryLogic.isDefinedAndHasMembers(intersection) ? intersection : false,\n\t\t\t\t\t\tcount: self.queryLogic.count(difference)\n\t\t\t\t\t};\n\t\t\t\t} else if( self.queryLogic.isSubset(params, query) ){\n\t\t\t\t\tcurSets = {\n\t\t\t\t\t\tcached: params,\n\t\t\t\t\t\tcount: 0\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tif(curSets) {\n\t\t\t\t\tif(!minSets || curSets.count < minSets.count) {\n\t\t\t\t\t\tminSets = curSets;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif(!minSets) {\n\t\t\t\treturn {\n\t\t\t\t\tneeded: params\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\treturn {\n\t\t\t\t\tneeded: minSets.needed,\n\t\t\t\t\tcached: minSets.cached\n\t\t\t\t};\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * @function can-connect/cache-requests/cache-requests.unionMembers unionMembers\n\t\t * @parent can-connect/cache-requests/cache-requests.queryLogic\n\t\t *\n\t\t * Create the requested data set, a union of the cached and un-cached data.\n\t\t *\n\t\t * @signature `connection.unionMembers(set, diff, neededData, cachedData)`\n\t\t *\n\t\t *   Uses [can-query-logic.prototype.unionMembers] to merge the two queries of data (`neededData` & `cachedData`).\n\t\t *\n\t\t * @param {can-query-logic/query} query The parameters of the data set requested.\n\t\t * @param {Object} diff The result of [can-connect/cache-requests/cache-requests.getDiff].\n\t\t * @param {can-connect.listData} neededData The data loaded from the base connection.\n\t\t * @param {can-connect.listData} cachedData The data loaded from the [can-connect/base/base.cacheConnection].\n\t\t *\n\t\t * @return {can-connect.listData} A merged [can-connect.listData] representation of the the cached and requested data.\n\t\t */\n\t\tunionMembers: function(params, diff, neededItems, cachedItems){\n\t\t\t// using the diff, re-construct everything\n\t\t\treturn {data: this.queryLogic.unionMembers(diff.needed, diff.cached, getItems$1(neededItems), getItems$1(cachedItems))};\n\t\t},\n\n\t\t/**\n\t\t * @function can-connect/cache-requests/cache-requests.getListData getListData\n\t\t * @parent can-connect/cache-requests/cache-requests.data\n\t\t *\n\t\t * Only request data that isn't already present in the [can-connect/base/base.cacheConnection cache].\n\t\t *\n\t\t * @signature `connection.getListData(set)`\n\t\t *\n\t\t *   Overwrites a base connection's `getListData` to use data in the [can-connect/base/base.cacheConnection cache]\n\t\t *   whenever possible.  This works by [can-connect/connection.getSets getting the stored queries]\n\t\t *   from the [can-connect/base/base.cacheConnection cache] and\n\t\t *   doing a [can-connect/cache-requests/cache-requests.getDiff diff] to see what needs to be loaded from the base\n\t\t *   connection and what can be loaded from the [can-connect/base/base.cacheConnection cache].\n\t\t *\n\t\t *   With that information, this `getListData` requests data from the cache or the base connection as needed.\n\t\t *   Data loaded from different sources is combined via [can-connect/cache-requests/cache-requests.unionMembers].\n\t\t *\n\t\t * @param {can-query-logic/query} query the parameters of the list that is being requested.\n\t\t * @return {Promise<can-connect.listData>} a promise that returns an object conforming to the [can-connect.listData] format.\n\t\t */\n\t\tgetListData: function(set){\n\t\t\tset = set || {};\n\t\t\tvar self = this;\n\n\t\t\treturn this.cacheConnection.getSets(set).then(function(queries){\n\n\t\t\t\tvar diff = self.getDiff(set, queries);\n\n\t\t\t\tif(!diff.needed) {\n\t\t\t\t\treturn self.cacheConnection.getListData(diff.cached);\n\t\t\t\t} else if(!diff.cached) {\n\t\t\t\t\treturn baseConnection.getListData(diff.needed).then(function(data){\n\n\t\t\t\t\t\treturn self.cacheConnection.updateListData(getItems$1(data), diff.needed ).then(function(){\n\t\t\t\t\t\t\treturn data;\n\t\t\t\t\t\t});\n\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tvar cachedPromise = self.cacheConnection.getListData(diff.cached);\n\t\t\t\t\tvar needsPromise = baseConnection.getListData(diff.needed);\n\n\t\t\t\t\tvar savedPromise = needsPromise.then(function(data){\n\t\t\t\t\t\treturn self.cacheConnection.updateListData(  getItems$1(data), diff.needed ).then(function(){\n\t\t\t\t\t\t\treturn data;\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t\t// start the combine while we might be saving param and adding to cache\n\t\t\t\t\tvar combinedPromise = Promise.all([\n\t\t\t\t\t\tcachedPromise,\n\t\t\t\t\t\tneedsPromise\n\t\t\t\t\t]).then(function(result){\n\t\t\t\t\t\tvar cached = result[0],\n\t\t\t\t\t\t\tneeded = result[1];\n\t\t\t\t\t\treturn self.unionMembers( set, diff, needed, cached);\n\t\t\t\t\t});\n\n\t\t\t\t\treturn Promise.all([combinedPromise, savedPromise]).then(function(data){\n\t\t\t\t\t\treturn data[0];\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t});\n\t\t}\n\t};\n\n});\n\nmodule.exports = cacheRequestsBehaviour;\n\n//!steal-remove-start\nif(process.env.NODE_ENV !== 'production') {\n\tvar validate$$1 = validate;\n\tmodule.exports = validate$$1(cacheRequestsBehaviour, ['getListData', 'cacheConnection']);\n}\n//!steal-remove-end\n});\n\nvar callbacksCache = createCommonjsModule(function (module) {\n/**\n * @module can-connect/data/callbacks-cache/callbacks-cache data/callbacks-cache\n * @parent can-connect.behaviors\n *\n * Implements the data interface callbacks to call the [can-connect/base/base.cacheConnection]\n * [can-connect/DataInterface]. These calls keep the [can-connect/base/base.cacheConnection] contents\n * up to date.\n *\n * @signature `dataCallbacksCache( baseConnection )`\n * Implements the data interface callbacks so that a corresponding [can-connect/DataInterface] method is called on the\n * [can-connect/base/base.cacheConnection]. This updates the [can-connect/base/base.cacheConnection] contents whenever\n * data is updated on the primary connection.\n *\n * @param {{}} baseConnection `can-connect` connection object that is having the `data/callbacks-cache` behavior added\n * on to it.\n *\n * @return {{}} a `can-connect` connection containing the method implementations provided by `data/callbacks-cache`.\n *\n * ### Example\n * Shows synchronization between primary connection and cacheConnection data when using this behavior:\n * ```\n * import dataUrl from \"can-connect/data/url/\";\n * import dataCallbacks from \"can-connect/data/callbacks/\";\n * import cacheCallbacks from \"can-connect/data/callbacks-cache/\";\n * import memoryCache from \"can-connect/data/memory-cache/\";\n *\n * var cacheConnection = connect([memoryCache], {});\n * var todoConnection = connect([dataUrl, dataCallback, cacheCallbacks], {\n *   cacheConnection,\n *   url: \"/todo\"\n * });\n *\n * todoConnection.createData({name:'do the dishes', completed: false}).then(function(data) {\n *   todoConnection.cacheConnection.getData({id: data.id}).then(function(cachedData) {\n *     // data returned from connection and data returned from cache have the same contents\n *     data.id === cachedData.id; // true\n *     data.name === cachedData.name; // true\n *     data.completed === cachedData.completed; // true\n *     data === cachedData; // false, since callbacks-cache creates a copy of the data when adding it to the cache\n *   })\n * });\n * ```\n */\n\nvar assign = canReflect_1_19_2_canReflect.assignMap;\nvar each = canReflect_1_19_2_canReflect.each;\n\n// wires up the following methods\nvar pairs = {\n\t/**\n\t * @function can-connect/data/callbacks-cache/callbacks-cache.createdData createdData\n\t * @parent can-connect/data/callbacks-cache/callbacks-cache\n\t *\n\t * Data callback that updates the [can-connect/base/base.cacheConnection cache] when a new data record is created.\n\t *\n\t * @signature `connection.createdData(responseData, requestData, cid)`\n\t *\n\t * Calls `createData` on the [can-connect/base/base.cacheConnection] to add a newly created data record to the cache.\n\t * Calls and returns the response from any underlying behavior's `createdData` callback.\n\t *\n\t * @param {{}} responseData the data returned by the data creation request\n\t * @param {{}} requestData the data that was passed to the data creation request\n\t * @param {Number} cid the unique identifier for this data. Used before data has a [can-connect/base/base.id] added\n\t * at creation time.\n\t *\n\t * @return {{}} the data returned from an underlying behavior's `createdData` callback, if one exists. Otherwise\n\t * returns the `responseData`.\n\t */\n\tcreatedData: \"createData\",\n\n\t/**\n\t * @function can-connect/data/callbacks-cache/callbacks-cache.updatedData updatedData\n\t * @parent can-connect/data/callbacks-cache/callbacks-cache\n\t *\n\t * Data callback that updates the [can-connect/base/base.cacheConnection cache] when a data record is modified.\n\t *\n\t * @signature `connection.updatedData(responseData, requestData)`\n\t *\n\t * Calls `updateData` on the [can-connect/base/base.cacheConnection] to modify a data record stored in the cache.\n\t * Calls and returns the response from any underlying behavior's `updatedData` callback.\n\t *\n\t * @param {{}} responseData the data returned by the data update request\n\t * @param {{}} requestData the data that was passed to the data update request\n\t *\n\t * @return {{}} the data returned from an underlying behavior's `updatedData` callback, if one exists. Otherwise\n\t * returns the `responseData`.\n\t */\n\tupdatedData: \"updateData\",\n\n\t/**\n\t * @function can-connect/data/callbacks-cache/callbacks-cache.destroyedData destroyedData\n\t * @parent can-connect/data/callbacks-cache/callbacks-cache\n\t *\n\t * Data callback that updates the [can-connect/base/base.cacheConnection cache] when a data record is deleted.\n\t *\n\t * @signature `connection.destroyedData(responseData, requestData)`\n\t *\n\t * Calls `destroyData` on the [can-connect/base/base.cacheConnection] to remove a data record stored in the cache.\n\t * Calls and returns the response from any underlying behavior's `destroyedData` callback.\n\t *\n\t * @param {{}} responseData the data returned by the data destroy request\n\t * @param {{}} requestData the data that was passed to the data destroy request\n\t *\n\t * @return {{}} the data returned from an underlying behavior's `destroyedData` callback, if one exists. Otherwise\n\t * returns the `responseData`.\n\t */\n\tdestroyedData: \"destroyData\"\n};\n\n\n\nvar callbackCache = canConnect_4_0_6_canConnect.behavior(\"data/callbacks-cache\",function(baseConnection){\n\tvar behavior = {};\n\n\teach(pairs, function(crudMethod, dataCallback){\n\t\tbehavior[dataCallback] = function(data, params, cid){\n\n\t\t\t// update the data in the cache\n\t\t\tthis.cacheConnection[crudMethod]( assign(assign({}, params), data) );\n\n\t\t\t// return underlying dataCallback implementation if one exists or return input data\n\t\t\tif (baseConnection[dataCallback]) {\n\t\t\t\treturn baseConnection[dataCallback].call(this, data, params, cid);\n\t\t\t} else {\n\t\t\t\treturn data;\n\t\t\t}\n\t\t};\n\t});\n\n\treturn behavior;\n});\n\nmodule.exports = callbackCache;\n\n//!steal-remove-start\nif(process.env.NODE_ENV !== 'production') {\n\tvar validate$$1 = validate;\n\tmodule.exports = validate$$1(callbackCache, []);\n}\n//!steal-remove-end\n});\n\nvar deferred = function(){\n\tvar def = {};\n\tdef.promise = new Promise(function(resolve, reject){\n\t\tdef.resolve = resolve;\n\t\tdef.reject = reject;\n\t});\n\treturn def;\n};\n\nvar forEach = [].forEach;\n/**\n * @module can-connect/data/combine-requests/combine-requests combine-requests\n * @parent can-connect.behaviors\n * @group can-connect/data/combine-requests.options 1 behavior options\n * @group can-connect/data/combine-requests.types 2 types\n * @group can-connect/data/combine-requests.data-methods 3 data methods\n * @group can-connect/data/combine-requests.queryLogic 4 queryLogic methods\n *\n * Combines multiple incoming lists requests into a single list request when possible.\n *\n * @signature `combineRequests( baseConnection )`\n *\n * Implements [can-connect/data/combine-requests.getListData] to collect the requested sets for some\n * [can-connect/data/combine-requests.time].  Once the configured amount of time has passed, it tries to take the\n * [can-connect/data/combine-requests.unionPendingRequests union] of the requested sets. It then makes requests with\n * those unified sets. Once the unified set requests have returned, the original requests are resolved by taking\n * [can-connect/data/combine-requests.filterMembers subsets] of the unified response data.\n *\n * @param {{}} baseConnection `can-connect` connection object that is having the `combine-requests` behavior added\n * on to it. Should already contain a behavior that provides `getListData` (e.g [can-connect/data/url/url]). If\n * the `connect` helper is used to build the connection, the behaviors will automatically be ordered as required.\n *\n * @return {{}} a `can-connect` connection containing the method implementations provided by `combine-requests`.\n *\n * @body\n *\n * ## Use\n *\n * Create a connection with the `combine-requests` plugin:\n *\n * ```\n * var combineRequests = require(\"can-connect/data/combine-requests/\");\n * var dataUrl = require(\"can-connect/data/url/\");\n * var todosConnection = connect([dataUrl, combineRequests], {\n *   url: \"/todos\"\n * });\n * ```\n * Since the configuration above doesn't include the [can-connect/data/combine-requests.time] option, the following\n * will only make a single request if all requests are made during the same \"thread of execution\" (i.e. before the\n * browser takes a break from executing the current JavaScript):\n *\n * ```\n * todosConnection.getListData({})\n * todosConnection.getListData({filter: {userId: 5}});\n * todosConnection.getListData({filter: {userId: 5, type: \"critical\"}});\n * ```\n *\n * The above requests can all be joined since [can-set] intuitively knows that\n * `({filter: {userId: 5}}` and `{filter: {userId: 5, type: \"critical\"}}` are subsets of the complete set of todos, `{}`.\n *\n * For more advanced combining, a [can-query-logic queryLogic] must be configured. This allows `combine-requests` to understand\n * what certain parameters of a set mean, and how they might be combined.\n *\n *\n *\n */\nvar combineRequests = canConnect_4_0_6_canConnect.behavior(\"data/combine-requests\",function(baseConnection){\n\tvar pendingRequests; //[{set, deferred}]\n\n\treturn {\n\t\t/**\n\t\t * @function can-connect/data/combine-requests.unionPendingRequests unionPendingRequests\n\t\t * @parent can-connect/data/combine-requests.queryLogic\n\t\t *\n\t\t * Group pending requests by the request that they are a subset of.\n\t\t *\n\t\t * @signature `connection.unionPendingRequests( pendingRequests )`\n\t\t *\n\t\t * This is called by [can-connect/data/combine-requests.getListData] to determine which pending requests can be unified\n\t\t * into a broader request. This produces a grouping of 'parent' sets to 'child' requests whose data will be\n\t\t * derived from the data retrieved by the parent.\n\t\t *\n\t\t * After this grouping is returned, [can-connect/data/combine-requests.getListData] executes requests for the parent\n\t\t * sets. After a parent request succeeds, the child requests will have their data calculated from the parent data.\n\t\t *\n\t\t * @param {Array<can-connect/data/combine-requests.PendingRequest>} pendingRequests\n\t\t * an array of objects, each containing:\n\t\t *   - `set` - the requested set\n\t\t *   - `deferred` - a wrapper around a `Promise` that will be resolved with this sets data\n\t\t *\n\t\t * @return {Array<{set: Set, pendingRequests: can-connect/data/combine-requests.PendingRequest}>}\n\t\t * an array of each of the unified requests to be made.  Each unified request should have:\n\t\t *   - `set` - the set to request\n\t\t *   - `pendingRequests` - the array of [can-connect/data/combine-requests.PendingRequest pending requests] the `set` satisfies\n\t\t *\n\t\t * ### Example\n\t\t *\n\t\t * This function converts something like:\n\t\t *\n\t\t * ```\n\t\t * [\n\t\t *   {set: {completed: false}, deferred: def1},\n\t\t *   {set: {completed: true}, deferred: def2}\n\t\t * ]\n\t\t * ```\n\t\t *\n\t\t * to:\n\t\t *\n\t\t * ```\n\t\t * [\n\t\t *   {\n\t\t *    set: {},\n\t\t *    pendingRequests: [\n\t\t *      {set: {completed: false}, deferred: def1},\n\t\t *      {set: {completed: true}, deferred: def2}\n\t\t *    ]\n\t\t *   }\n\t\t * ]\n\t\t * ```\n\t\t *\n\t\t */\n\t\tunionPendingRequests: function(pendingRequests){\n\t\t\t// this should try to merge existing param requests, into an array of\n\t\t\t// others to send out\n\t\t\t// but this data structure keeps the original promises.\n\n\n\t\t\t// we need the \"biggest\" sets first so they can swallow up everything else\n\t\t\t// O(n log n)\n\t\t\tvar self = this;\n\n\t\t\tpendingRequests.sort(function(pReq1, pReq2){\n\n\t\t\t\tif(self.queryLogic.isSubset(pReq1.set, pReq2.set)) {\n\t\t\t\t\treturn 1;\n\t\t\t\t} else if( self.queryLogic.isSubset(pReq2.set, pReq1.set) ) {\n\t\t\t\t\treturn -1;\n\t\t\t\t} else {\n\t\t\t\t\treturn 0;\n\t\t\t\t}\n\n\t\t\t});\n\n\t\t\t// O(n^2).  This can probably be made faster, but there are rarely lots of pending requests.\n\t\t\tvar combineData = [];\n\t\t\tvar current;\n\n\t\t\tdoubleLoop(pendingRequests, {\n\t\t\t\tstart: function(pendingRequest){\n\t\t\t\t\tcurrent = {\n\t\t\t\t\t\tset: pendingRequest.set,\n\t\t\t\t\t\tpendingRequests: [pendingRequest]\n\t\t\t\t\t};\n\t\t\t\t\tcombineData.push(current);\n\t\t\t\t},\n\t\t\t\titerate: function(pendingRequest){\n\t\t\t\t\tvar combined = self.queryLogic.union(current.set, pendingRequest.set);\n\t\t\t\t\tif( self.queryLogic.isDefinedAndHasMembers(combined) ) {\n\t\t\t\t\t\t// add next\n\t\t\t\t\t\tcurrent.set = combined;\n\t\t\t\t\t\tcurrent.pendingRequests.push(pendingRequest);\n\t\t\t\t\t\t// removes this from iteration\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn Promise.resolve(combineData);\n\t\t},\n\n\t\t/**\n\t\t * @property {Number} can-connect/data/combine-requests.time time\n\t\t * @parent can-connect/data/combine-requests.options\n\t\t *\n\t\t * Specifies the amount of time to wait to combine requests.\n\t\t *\n\t\t * @option {Number} Defaults to `1`, meaning only requests made within the same \"thread of execution\" will be\n\t\t * combined (i.e. requests made before the browser takes a break from the ongoing JavaScript execution).\n\t\t *\n\t\t * Increasing this number will mean that requests are delayed that length of time in case other requests\n\t\t * are made. In general, we advise against increasing this amount of time except in cases where loads take a\n\t\t * significant amount of time and the increased delay is unlikely to be noticed.\n\t\t *\n\t\t * ```\n\t\t * var combineRequests = require(\"can-connect/data/combine-requests/\");\n\t\t * connect([... combineRequests, ...],{\n\t\t *   time: 100\n\t\t * })\n\t\t * ```\n\t\t */\n\t\ttime:1,\n\n\t\t/**\n\t\t * @function can-connect/data/combine-requests.getListData getListData\n\t\t * @parent can-connect/data/combine-requests.data-methods\n\t\t *\n\t\t * Combines multiple list data requests into a single request, when possible.\n\t\t *\n\t\t * @signature `connection.getListData( set )`\n\t\t *\n\t\t * Extension of [can-connect/connection.getListData `getListData`] that tries to combine calls to it into a single\n\t\t * call. The calls are fulfilled by an underlying behavior's `getListData` implementation.\n\t\t *\n\t\t * Waits for a configured [can-connect/data/combine-requests.time] then tries to unify the sets requested during it.\n\t\t * After unification, calls for the unified sets are made to the underlying `getListData`. Once the unified\n\t\t * data has returned, the individual calls to `getListData` are resolved with a\n\t\t * [can-query-logic.prototype.filterMembers calculated subset] of the unified data.\n\t\t *\n\t\t * @param {can-query-logic/query} query the parameters of the requested set of data\n\t\t * @return {Promise<can-connect.listData>} `Promise` resolving the data of the requested set\n\t\t */\n\t\tgetListData: function(set){\n\t\t\tset = set || {};\n\t\t\tvar self = this;\n\n\t\t\tif(!pendingRequests) {\n\n\t\t\t\tpendingRequests = [];\n\n\t\t\t\tsetTimeout(function(){\n\n\t\t\t\t\tvar combineDataPromise = self.unionPendingRequests(pendingRequests);\n\t\t\t\t\tpendingRequests = null;\n\t\t\t\t\tcombineDataPromise.then(function(combinedData){\n\t\t\t\t\t\t// farm out requests\n\t\t\t\t\t\tforEach.call(combinedData, function(combined){\n\t\t\t\t\t\t\t// clone combine.set to prevent mutations by baseConnection.getListData\n\t\t\t\t\t\t\tvar combinedSet = canReflect_1_19_2_canReflect.serialize(combined.set);\n\n\t\t\t\t\t\t\tbaseConnection.getListData(combinedSet).then(function(data){\n\t\t\t\t\t\t\t\tif(combined.pendingRequests.length === 1) {\n\t\t\t\t\t\t\t\t\tcombined.pendingRequests[0].deferred.resolve(data);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tforEach.call(combined.pendingRequests, function(pending){\n\t\t\t\t\t\t\t\t\t\t// get the subset using the combine.set property before being passed down\n\t\t\t\t\t\t\t\t\t\t// to baseConnection.getListData which might mutate it causing combinedRequests\n\t\t\t\t\t\t\t\t\t\t// to resolve with an `undefined` value instead of an actual set\n\t\t\t\t\t\t\t\t\t\t// https://github.com/canjs/can-connect/issues/139\n\t\t\t\t\t\t\t\t\t\tpending.deferred.resolve( {data: self.queryLogic.filterMembers(pending.set, combined.set, getItems$1(data))} );\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}, function(err){\n\t\t\t\t\t\t\t\tif(combined.pendingRequests.length === 1) {\n\t\t\t\t\t\t\t\t\tcombined.pendingRequests[0].deferred.reject(err);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tforEach.call(combined.pendingRequests, function(pending){\n\t\t\t\t\t\t\t\t\t\tpending.deferred.reject(err);\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\n\n\t\t\t\t}, this.time || 1);\n\t\t\t}\n\t\t\tvar deferred$$1 = deferred();\n\n\t\t\tpendingRequests.push({deferred: deferred$$1, set: set});\n\n\t\t\treturn deferred$$1.promise;\n\t\t}\n\t};\n});\n\nvar combineRequests_1 = combineRequests;\n\n//!steal-remove-start\n\nvar combineRequests_1 = validate(combineRequests, ['getListData']);\n//!steal-remove-end\n\n/**\n * @typedef {PendingRequest} can-connect/data/combine-requests.PendingRequest PendingRequest\n * @parent can-connect/data/combine-requests.types\n *\n * @description Type to keep track of the multiple requests that were unified into a single request.\n *\n * @type {PendingRequest} Record of an individual request that has been unified as part of the combined request. After\n * the unified request completes instances of these types are processed to complete the individual requests with the\n * subset of the unified data.\n *\n * @option {can-query-logic/query} query a requested [can-set/Set set] of data that has been unified into the combined request\n * @option {{}} deferred a type that keeps track of the individual [can-connect/data/combine-requests.getListData]\n * promise that will be resolved after the unified request completes\n */\n\n// ### doubleLoop\nvar doubleLoop = function(arr, callbacks){\n\tvar i = 0;\n\twhile(i < arr.length) {\n\t\tcallbacks.start(arr[i]);\n\t\tvar j = i+1;\n\t\twhile( j < arr.length ) {\n\t\t\tif(callbacks.iterate(arr[j]) === true) {\n\t\t\t\tarr.splice(j, 1);\n\t\t\t} else {\n\t\t\t\tj++;\n\t\t\t}\n\t\t}\n\t\ti++;\n\t}\n};\n\nvar combineRequests$1 = combineRequests_1;\n\nvar canLocalStore_1_0_1_canLocalStore = canNamespace_1_0_0_canNamespace.localStore = function localStore(baseConnection){\n    baseConnection.constructor = localStore;\n    var behavior = Object.create(canMemoryStore_1_0_3_makeSimpleStore(baseConnection));\n\n    canReflect_1_19_2_canReflect.assignMap(behavior, {\n\t\tclear: function(){\n\t\t\tlocalStorage.removeItem(this.name+\"/queries\");\n\t\t\tlocalStorage.removeItem(this.name+\"/records\");\n            this._recordsMap = null;\n            return Promise.resolve();\n\t\t},\n\t\tupdateQueryDataSync: function(queries){\n\t\t\tlocalStorage.setItem(this.name+\"/queries\", JSON.stringify(queries) );\n\t\t},\n\t\tgetQueryDataSync: function(){\n\t\t\treturn JSON.parse( localStorage.getItem(this.name+\"/queries\") ) || [];\n\t\t},\n\n\t\tgetRecord: function(id){\n\t\t\t// a little side-effectual mischeif for performance\n\t\t\tif(!this._recordsMap) {\n\t\t\t\tthis.getAllRecords();\n\t\t\t}\n\n\t\t\treturn this._recordsMap[id];\n\t\t},\n\t\tgetAllRecords: function(){\n\t\t\t// this._records is a in memory representation so things can be fast\n            // Must turn on `cacheLocalStorageReads` for this to work.\n\t\t\tif(!this.cacheLocalStorageReads || !this._recordsMap) {\n\t\t\t\tvar recordsMap = JSON.parse( localStorage.getItem(this.name+\"/records\") ) || {};\n\t\t\t\tthis._recordsMap = recordsMap;\n\t\t\t}\n\n\t\t\tvar records = [];\n\t\t\tfor(var id in this._recordsMap) {\n\t\t\t\trecords.push(this._recordsMap[id]);\n\t\t\t}\n\t\t\treturn records;\n\t\t},\n\t\tdestroyRecords: function(records) {\n            if(!this._recordsMap) {\n\t\t\t\tthis.getAllRecords();\n\t\t\t}\n\t\t\tcanReflect_1_19_2_canReflect.eachIndex(records, function(record){\n\t\t\t\tvar id = canReflect_1_19_2_canReflect.getIdentity(record, this.queryLogic.schema);\n\t\t\t\tdelete this._recordsMap[id];\n\t\t\t}, this);\n\t\t\tlocalStorage.setItem(this.name+\"/records\", JSON.stringify(this._recordsMap) );\n\t\t},\n\t\tupdateRecordsSync: function(records){\n            if(!this._recordsMap) {\n\t\t\t\tthis.getAllRecords();\n\t\t\t}\n\t\t\trecords.forEach(function(record){\n\t\t\t\tvar id = canReflect_1_19_2_canReflect.getIdentity(record, this.queryLogic.schema);\n\t\t\t\tthis._recordsMap[id] = record;\n\t\t\t},this);\n\t\t\tlocalStorage.setItem(this.name+\"/records\", JSON.stringify(this._recordsMap) );\n\t\t}\n\t\t// ## Identifiers\n\n\t\t/**\n\t\t * @property {String} can-connect/data/localstorage-cache/localstorage-cache.name name\n\t\t * @parent can-connect/data/localstorage-cache/localstorage-cache.identifiers\n\t\t *\n\t\t * Specify a name to use when saving data in localstorage.\n\t\t *\n\t\t * @option {String} This name is used to find and save data in\n\t\t * localstorage. Instances are saved in `{name}/instance/{id}`\n\t\t * and sets are saved in `{name}/set/{set}`.\n\t\t *\n\t\t * @body\n\t\t *\n\t\t * ## Use\n\t\t *\n\t\t * ```\n\t\t * var cacheConnection = connect([\"data-localstorage-cache\"],{\n\t\t *   name: \"todos\"\n\t\t * });\n\t\t * ```\n\t\t */\n\n\n\t\t// ## External interface\n\n\t\t/**\n\t\t * @function can-connect/data/localstorage-cache/localstorage-cache.clear clear\n\t\t * @parent can-connect/data/localstorage-cache/localstorage-cache.data-methods\n\t\t *\n\t\t * Resets the memory cache so it contains nothing.\n\t\t *\n\t\t * @signature `connection.clear()`\n\t\t *\n\t\t */\n\n\n\n\t\t/**\n\t\t * @function can-connect/data/localstorage-cache/localstorage-cache.getSets getSets\n\t\t * @parent can-connect/data/localstorage-cache/localstorage-cache.data-methods\n\t\t *\n\t\t * Returns the sets contained within the cache.\n\t\t *\n\t\t * @signature `connection.getSets(set)`\n\t\t *\n\t\t *   Returns the sets added by [can-connect/data/localstorage-cache/localstorage-cache.updateListData].\n\t\t *\n\t\t *   @return {Promise<Array<Set>>} A promise that resolves to the list of sets.\n\t\t *\n\t\t * @body\n\t\t *\n\t\t * ## Use\n\t\t *\n\t\t * ```\n\t\t * connection.getSets() //-> Promise( [{type: \"completed\"},{user: 5}] )\n\t\t * ```\n\t\t *\n\t\t */\n\n\t\t/**\n\t\t * @function can-connect/data/localstorage-cache/localstorage-cache.getListData getListData\n\t\t * @parent can-connect/data/localstorage-cache/localstorage-cache.data-methods\n\t\t *\n\t\t * Gets a set of data from localstorage.\n\t\t *\n\t\t * @signature `connection.getListData(set)`\n\t\t *\n\t\t *   Goes through each set add by [can-connect/data/memory-cache.updateListData]. If\n\t\t *   `set` is a subset, uses [can-connect/base/base.queryLogic] to get the data for the requested `set`.\n\t\t *\n\t\t *   @param {can-query-logic/query} query An object that represents the data to load.\n\t\t *\n\t\t *   @return {Promise<can-connect.listData>} A promise that resolves if `set` is a subset of\n\t\t *   some data added by [can-connect/data/memory-cache.updateListData].  If it is not,\n\t\t *   the promise is rejected.\n\t\t */\n\n\t\t/**\n\t\t * @function can-connect/data/localstorage-cache.getListDataSync getListDataSync\n\t\t * @parent can-connect/data/localstorage-cache.data-methods\n\t\t *\n\t\t * Synchronously gets a set of data from localstorage.\n\t\t *\n\t\t * @signature `connection.getListDataSync(set)`\n\t\t * @hide\n\t\t */\n\n\t\t/**\n\t\t * @function can-connect/data/localstorage-cache/localstorage-cache.getData getData\n\t\t * @parent can-connect/data/localstorage-cache/localstorage-cache.data-methods\n\t\t *\n\t\t * Get an instance's data from localstorage.\n\t\t *\n\t\t * @signature `connection.getData(params)`\n\t\t *\n\t\t *   Looks in localstorage for the requested instance.\n\t\t *\n\t\t *   @param {Object} params An object that should have the [conenction.id] of the element\n\t\t *   being retrieved.\n\t\t *\n\t\t *   @return {Promise} A promise that resolves to the item if the memory cache has this item.\n\t\t *   If localstorage does not have this item, it rejects the promise.\n\t\t */\n\n\n\t\t/**\n\t\t * @function can-connect/data/localstorage-cache/localstorage-cache.updateListData updateListData\n\t\t * @parent can-connect/data/localstorage-cache/localstorage-cache.data-methods\n\t\t *\n\t\t * Saves a set of data in the cache.\n\t\t *\n\t\t * @signature `connection.updateListData(listData, set)`\n\t\t *\n\t\t *   Tries to merge this set of data with any other saved sets of data. If\n\t\t *   unable to merge this data, saves the set by itself.\n\t\t *\n\t\t *   @param {can-connect.listData} listData\n\t\t *   @param {can-query-logic/query} query\n\t\t *   @return {Promise} Promise resolves if and when the data has been successfully saved.\n\t\t */\n\n\n\t\t/**\n\t\t * @function can-connect/data/localstorage-cache/localstorage-cache.createData createData\n\t\t * @parent can-connect/data/localstorage-cache/localstorage-cache.data-methods\n\t\t *\n\t\t * Called when an instance is created and should be added to cache.\n\t\t *\n\t\t * @signature `connection.createData(props)`\n\t\t *\n\t\t *   Adds `props` to the stored list of instances. Then, goes\n\t\t *   through every set and adds props the sets it belongs to.\n\t\t */\n\n\n\t\t/**\n\t\t * @function can-connect/data/localstorage-cache/localstorage-cache.updateData updateData\n\t\t * @parent can-connect/data/localstorage-cache/localstorage-cache.data-methods\n\t\t *\n\t\t * Called when an instance is updated.\n\t\t *\n\t\t * @signature `connection.updateData(props)`\n\t\t *\n\t\t *   Overwrites the stored instance with the new props. Then, goes\n\t\t *   through every set and adds or removes the instance if it belongs or not.\n\t\t */\n\n\n\t\t/**\n\t\t * @function can-connect/data/localstorage-cache/localstorage-cache.destroyData destroyData\n\t\t * @parent can-connect/data/localstorage-cache/localstorage-cache.data-methods\n\t\t *\n\t\t * Called when an instance should be removed from the cache.\n\t\t *\n\t\t * @signature `connection.destroyData(props)`\n\t\t *\n\t\t *   Goes through each set of data and removes any data that matches\n\t\t *   `props`'s [can-connect/base/base.id]. Finally removes this from the instance store.\n\t\t */\n\n\t});\n\n\treturn behavior;\n\n};\n\n/**\n * @module can-connect/data/localstorage-cache/localstorage-cache localstorage-cache\n * @parent can-connect.deprecated\n * @group can-connect/data/localstorage-cache/localstorage-cache.identifiers 0 identifiers\n * @group can-connect/data/localstorage-cache/localstorage-cache.data-methods 1 data methods\n *\n * Saves raw data in localStorage.\n *\n * @deprecated {5.0} Use [can-local-store] instead.\n *\n * @signature `localStorage( baseConnection )`\n *\n *   Creates a cache of instances and a cache of sets of instances that is\n *   accessible to read via [can-connect/data/localstorage-cache/localstorage-cache.getSets],\n *   [can-connect/data/localstorage-cache/localstorage-cache.getData], and [can-connect/data/localstorage-cache/localstorage-cache.getListData].\n *   The caches are updated via [can-connect/data/localstorage-cache/localstorage-cache.createData],\n *   [can-connect/data/localstorage-cache/localstorage-cache.updateData], [can-connect/data/localstorage-cache/localstorage-cache.destroyData],\n *   and [can-connect/data/localstorage-cache/localstorage-cache.updateListData].\n *\n *   [can-connect/data/localstorage-cache/localstorage-cache.createData],\n *   [can-connect/data/localstorage-cache/localstorage-cache.updateData],\n *   [can-connect/data/localstorage-cache/localstorage-cache.destroyData] are able to move items in and out\n *   of sets.\n *\n * @body\n *\n * ## Use\n *\n * `data/localstorage-cache` is often used with a caching strategy like [can-connect/fall-through-cache/fall-through-cache] or\n * [can-connect/cache-requests/cache-requests].  Make sure you configure the connection's [can-connect/data/localstorage-cache/localstorage-cache.name].\n *\n * ```\n * var cacheConnection = connect([\n *   require(\"can-connect/data/localstorage-cache/localstorage-cache\")\n * ],{\n *   name: \"todos\"\n * });\n *\n * var todoConnection = connect([\n *   require(\"can-connect/data/url/url\"),\n *   require(\"can-connect/fall-through-cache/fall-through-cache\")\n * ],\n * {\n *   url: \"/services/todos\",\n *   cacheConnection: cacheConnection\n * });\n * ```\n *\n */\n \nvar localstorageCache = canLocalStore_1_0_1_canLocalStore;\n\n/**\n * @module can-connect/data/memory-cache/memory-cache memory-cache\n * @parent can-connect.deprecated\n * @group can-connect/data/memory-cache/memory-cache.data-methods data methods\n *\n * Saves raw data in JavaScript memory that disappears when the page refreshes.\n *\n * @deprecated {5.0} Use [can-memory-store] instead.\n *\n * @signature `memoryCache( baseConnection )`\n *\n *   Creates a cache of instances and a cache of sets of instances that is\n *   accessible to read via [can-connect/data/memory-cache/memory-cache.getSets],\n *   [can-connect/data/memory-cache/memory-cache.getData], and [can-connect/data/memory-cache/memory-cache.getListData].\n *   The caches are updated via [can-connect/data/memory-cache/memory-cache.createData],\n *   [can-connect/data/memory-cache/memory-cache.updateData], [can-connect/data/memory-cache/memory-cache.destroyData],\n *   and [can-connect/data/memory-cache/memory-cache.updateListData].\n *\n *   [can-connect/data/memory-cache/memory-cache.createData],\n *   [can-connect/data/memory-cache/memory-cache.updateData],\n *   [can-connect/data/memory-cache/memory-cache.destroyData] are able to move items in and out\n *   of sets.\n *\n * @body\n *\n * ## Use\n *\n * `data/memory-cache` is often used with a caching strategy like [can-connect/fall-through-cache/fall-through-cache] or\n * [can-connect/cache-requests/cache-requests].\n *\n * ```js\n * var cacheConnection = connect([\n *   require(\"can-connect/data/memory-cache/memory-cache\")\n * ],{});\n *\n * var todoConnection = connect([\n *   require(\"can-connect/data/url/url\"),\n *   require(\"can-connect/fall-through-cache/fall-through-cache\")\n * ],\n * {\n *   url: \"/services/todos\",\n *   cacheConnection: cacheConnection\n * });\n * ```\n */\n\n\nvar memoryCache = canMemoryStore_1_0_3_canMemoryStore;\n\nvar fallThroughCache_1 = createCommonjsModule(function (module) {\n/**\n * @module can-connect/fall-through-cache/fall-through-cache fall-through-cache\n * @parent can-connect.behaviors\n * @group can-connect/fall-through-cache/fall-through-cache.data data callbacks\n * @group can-connect/fall-through-cache/fall-through-cache.hydrators hydrators\n *\n * Add fall-through caching with the `cacheConnection`.\n *\n * @signature `fallThroughCache( baseConnection )`\n *\n *   Implements a `getData` and `getListData` that\n *   check their [can-connect/base/base.cacheConnection] for data. If there is data,\n *   this data will be immediately returned.\n *   In the background, the `baseConnection` method will be called and used to update the instance or list.\n *\n * @body\n *\n * ## Use\n *\n * To use the `fall-through-cache`, create a connection with a\n * [can-connect/base/base.cacheConnection] and a behavior that implements\n * [can-connect/connection.getData] and [can-connect/connection.getListData].\n *\n * ```js\n * var QueryLogic = require(\"can-query-logic\");\n *\n * var queryLogic = new QueryLogic();\n *\n * var cache = connect([\n *   require(\"can-local-store\")\n * ],{\n *   name: \"todos\",\n *   queryLogic: queryLogic\n * });\n *\n * var todoConnection = connect([\n *    require(\"can-connect/fall-through-cache/fall-through-cache\"),\n *    require(\"can-connect/data/url/url\"),\n *    require(\"can-connect/constructor/constructor\"),\n *    require(\"can-connect/constructor/store/store\")\n *   ], {\n *   url: \"/todos\",\n *   cacheConnection: cache,\n *   queryLogic: queryLogic\n * });\n * ```\n *\n * Then, make requests.  If the cache has the data,\n * it will be returned immediately, and then the item or list updated later\n * with the response from the base connection:\n *\n * ```js\n * todoConnection.getList({due: \"today\"}).then(function(todos){\n *\n * })\n * ```\n *\n * ## Demo\n *\n * The following shows the `fall-through-cache` behavior.\n *\n * @demo demos/can-connect/fall-through-cache.html\n *\n * Clicking\n * \"Completed\" or \"Incomplete\" will make one of the following requests and\n * display the results in the page:\n *\n * ```\n * todoConnection.getList({completed: true});\n * todoConnection.getList({completed: false});\n * ```\n *\n * If you click back and forth between \"Completed\" and \"Incomplete\" multiple times\n * you'll notice that the old data is displayed immediately and then\n * updated after about a second.\n *\n */\n\n\n\n\nvar fallThroughCache = canConnect_4_0_6_canConnect.behavior(\"fall-through-cache\",function(baseConnection){\n\n\tvar behavior = {\n\t\t/**\n\t\t * @function can-connect/fall-through-cache/fall-through-cache.hydrateList hydrateList\n\t\t * @parent can-connect/fall-through-cache/fall-through-cache.hydrators\n\t\t *\n\t\t * Returns a List instance given raw data.\n\t\t *\n\t\t * @signature `connection.hydrateList(listData, set)`\n\t\t *\n\t\t *   Calls the base `hydrateList` to create a List for `listData`.\n\t\t *\n\t\t *   Then, Looks for registered hydrateList callbacks for a given `set` and\n\t\t *   calls them.\n\t\t *\n\t\t *   @param {can-connect.listData} listData\n\t\t *   @param {can-query-logic/query} query\n\t\t *   @return {can-connect.List}\n\t\t */\n\t\thydrateList: function(listData, set){\n\t\t\tset = set || this.listQuery(listData);\n\t\t\tvar id = sortedSetJson( set );\n\t\t\tvar list = baseConnection.hydrateList.call(this, listData, set);\n\n\t\t\tif(this._getHydrateListCallbacks[id]) {\n\t\t\t\tthis._getHydrateListCallbacks[id].shift()(list);\n\t\t\t\tif(!this._getHydrateListCallbacks[id].length){\n\t\t\t\t\tdelete this._getHydrateListCallbacks[id];\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn list;\n\t\t},\n\t\t_getHydrateListCallbacks: {},\n\t\t_getHydrateList: function(set, callback){\n\t\t\tvar id = sortedSetJson( set );\n\t\t\tif(!this._getHydrateListCallbacks[id]) {\n\t\t\t\tthis._getHydrateListCallbacks[id]= [];\n\t\t\t}\n\t\t\tthis._getHydrateListCallbacks[id].push(callback);\n\t\t},\n\t\t/**\n\t\t * @function can-connect/fall-through-cache/fall-through-cache.getListData getListData\n\t\t * @parent can-connect/fall-through-cache/fall-through-cache.data\n\t\t *\n\t\t * Get raw data from the cache if available, and then update\n\t\t * the list later with data from the base connection.\n\t\t *\n\t\t * @signature `connection.getListData(set)`\n\t\t *\n\t\t *   Checks the [can-connect/base/base.cacheConnection] for `set`'s data.\n\t\t *\n\t\t *   If the cache connection has data, the cached data is returned. Prior to\n\t\t *   returning the data, the [can-connect/constructor.hydrateList] method\n\t\t *   is intercepted so we can get a handle on the list that's being created\n\t\t *   for the returned data. Once the intercepted list is retrieved,\n\t\t *   we use the base connection to get data and update the intercepted list and\n\t\t *   the cacheConnection.\n\t\t *\n\t\t *   If the cache connection does not have data, the base connection\n\t\t *   is used to load the data and the cached connection is updated with that\n\t\t *   data.\n\t\t *\n\t\t *   @param {can-query-logic/query} query The set to load.\n\t\t *\n\t\t *   @return {Promise<can-connect.listData>} A promise that returns the\n\t\t *   raw data.\n\t\t */\n\t\t// if we do getList, the cacheConnection runs on\n\t\t// if we do getListData, ... we need to register the list that is going to be created\n\t\t// so that when the data is returned, it updates this\n\t\tgetListData: function(set){\n\t\t\tset = set || {};\n\t\t\tvar self = this;\n\t\t\treturn this.cacheConnection.getListData(set).then(function(data){\n\n\t\t\t\t// get the list that is going to be made\n\t\t\t\t// it might be possible that this never gets called, but not right now\n\t\t\t\tself._getHydrateList(set, function(list){\n\t\t\t\t\tself.addListReference(list, set);\n\n\t\t\t\t\tsetTimeout(function(){\n\t\t\t\t\t\tbaseConnection.getListData.call(self, set).then(function(listData){\n\n\t\t\t\t\t\t\tself.cacheConnection.updateListData(listData, set);\n\t\t\t\t\t\t\tself.updatedList(list, listData, set);\n\t\t\t\t\t\t\tself.deleteListReference(list, set);\n\n\t\t\t\t\t\t}, function(e){\n\t\t\t\t\t\t\t// what do we do here?  self.rejectedUpdatedList ?\n\t\t\t\t\t\t\tcanLog_1_0_2_canLog.log(\"REJECTED\", e);\n\t\t\t\t\t\t});\n\t\t\t\t\t},1);\n\t\t\t\t});\n\t\t\t\t// TODO: if we wired up all responses to updateListData, this one should not\n\t\t\t\t// updateListData with itself.\n\t\t\t\t// But, how would we do a bypass?\n\t\t\t\treturn data;\n\t\t\t}, function(){\n\n\t\t\t\tvar listData = baseConnection.getListData.call(self, set);\n\t\t\t\tlistData.then(function(listData){\n\n\t\t\t\t\tself.cacheConnection.updateListData(listData, set);\n\t\t\t\t});\n\n\t\t\t\treturn listData;\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * @function can-connect/fall-through-cache/fall-through-cache.hydrateInstance hydrateInstance\n\t\t * @parent can-connect/fall-through-cache/fall-through-cache.hydrators\n\t\t *\n\t\t * Returns an instance given raw data.\n\t\t *\n\t\t * @signature `connection.hydrateInstance(props)`\n\t\t *\n\t\t *   Calls the base `hydrateInstance` to create an Instance for `props`.\n\t\t *\n\t\t *   Then, Looks for registered hydrateInstance callbacks for a given [can-connect/base/base.id] and\n\t\t *   calls them.\n\t\t *\n\t\t *   @param {Object} props\n\t\t *   @return {can-connect/Instance}\n\t\t */\n\t\thydrateInstance: function(props){\n\n\t\t\tvar id = this.id( props );\n\t\t\tvar instance = baseConnection.hydrateInstance.apply(this, arguments);\n\n\t\t\tif(this._getMakeInstanceCallbacks[id]) {\n\t\t\t\tthis._getMakeInstanceCallbacks[id].shift()(instance);\n\t\t\t\tif(!this._getMakeInstanceCallbacks[id].length){\n\t\t\t\t\tdelete this._getMakeInstanceCallbacks[id];\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn instance;\n\t\t},\n\t\t_getMakeInstanceCallbacks: {},\n\t\t_getMakeInstance: function(id, callback){\n\t\t\tif(!this._getMakeInstanceCallbacks[id]) {\n\t\t\t\tthis._getMakeInstanceCallbacks[id]= [];\n\t\t\t}\n\t\t\tthis._getMakeInstanceCallbacks[id].push(callback);\n\t\t},\n\t\t/**\n\t\t * @function can-connect/fall-through-cache/fall-through-cache.getData getData\n\t\t * @parent can-connect/fall-through-cache/fall-through-cache.data\n\t\t *\n\t\t * Get raw data from the cache if available, and then update\n\t\t * the instance later with data from the base connection.\n\t\t *\n\t\t * @signature `connection.getData(params)`\n\t\t *\n\t\t *   Checks the [can-connect/base/base.cacheConnection] for `params`'s data.\n\t\t *\n\t\t *   If the cache connection has data, the cached data is returned. Prior to\n\t\t *   returning the data, the [can-connect/constructor/constructor.hydrateInstance] method\n\t\t *   is intercepted so we can get a handle on the instance that's being created\n\t\t *   for the returned data. Once the intercepted instance is retrieved,\n\t\t *   we use the base connection to get data and update the intercepted instance and\n\t\t *   the cacheConnection.\n\t\t *\n\t\t *   If the cache connection does not have data, the base connection\n\t\t *   is used to load the data and the cached connection is updated with that\n\t\t *   data.\n\t\t *\n\t\t *   @param {Object} params The set to load.\n\t\t *\n\t\t *   @return {Promise<Object>} A promise that returns the\n\t\t *   raw data.\n\t\t */\n\t\tgetData: function(params){\n\t\t\t// first, always check the cache connection\n\t\t\tvar self = this;\n\t\t\treturn this.cacheConnection.getData(params).then(function(instanceData){\n\n\t\t\t\t// get the list that is going to be made\n\t\t\t\t// it might be possible that this never gets called, but not right now\n\t\t\t\tself._getMakeInstance(self.id(instanceData) || self.id(params), function(instance){\n\t\t\t\t\tself.addInstanceReference(instance);\n\n\t\t\t\t\tsetTimeout(function(){\n\t\t\t\t\t\tbaseConnection.getData.call(self, params).then(function(instanceData2){\n\n\t\t\t\t\t\t\tself.cacheConnection.updateData(instanceData2);\n\t\t\t\t\t\t\tself.updatedInstance(instance, instanceData2);\n\t\t\t\t\t\t\tself.deleteInstanceReference(instance);\n\n\t\t\t\t\t\t}, function(e){\n\t\t\t\t\t\t\t// what do we do here?  self.rejectedUpdatedList ?\n\t\t\t\t\t\t\tcanLog_1_0_2_canLog.log(\"REJECTED\", e);\n\t\t\t\t\t\t});\n\t\t\t\t\t},1);\n\t\t\t\t});\n\n\t\t\t\treturn instanceData;\n\t\t\t}, function(){\n\t\t\t\tvar listData = baseConnection.getData.call(self, params);\n\t\t\t\tlistData.then(function(instanceData){\n\t\t\t\t\tself.cacheConnection.updateData(instanceData);\n\t\t\t\t});\n\n\t\t\t\treturn listData;\n\t\t\t});\n\t\t}\n\n\t};\n\n\treturn behavior;\n\n});\n\nmodule.exports = fallThroughCache;\n\n//!steal-remove-start\nif(process.env.NODE_ENV !== 'production') {\n\tvar validate$$1 = validate;\n\tmodule.exports = validate$$1(fallThroughCache, ['hydrateList', 'hydrateInstance', 'getListData', 'getData']);\n}\n//!steal-remove-end\n});\n\nvar canStringToAny_1_2_1_canStringToAny = function(str){\n\tswitch(str) {\n\t\tcase \"NaN\":\n\t\tcase \"Infinity\":\n\t\t\treturn +str;\n\t\tcase \"null\":\n\t\t\treturn null;\n\t\tcase \"undefined\":\n\t\t\treturn undefined;\n\t\tcase \"true\":\n\t\tcase \"false\":\n\t\t\treturn str === \"true\";\n\t\tdefault:\n\t\t\tvar val = +str;\n\t\t\tif(!isNaN(val)) {\n\t\t\t\treturn val;\n\t\t\t} else {\n\t\t\t\treturn str;\n\t\t\t}\n\t}\n};\n\nfunction toBoolean(val) {\n\tif(val == null) {\n\t\treturn val;\n\t}\n\tif (val === 'false' || val === '0' || !val) {\n\t\treturn false;\n\t}\n\treturn true;\n}\n\nvar maybeBoolean = canReflect_1_19_2_canReflect.assignSymbols(toBoolean,{\n\t\"can.new\": toBoolean,\n\t\"can.getSchema\": function(){\n\t\treturn {\n\t\t\ttype: \"Or\",\n\t\t\tvalues: [true, false, undefined, null]\n\t\t};\n\t},\n    \"can.getName\": function(){\n        return \"MaybeBoolean\";\n    },\n\t\"can.isMember\": function(value) {\n\t\treturn value == null || typeof value === \"boolean\";\n\t}\n});\n\nfunction toDate(str) {\n\tvar type = typeof str;\n\tif (type === 'string') {\n\t\tstr = Date.parse(str);\n\t\treturn isNaN(str) ? null : new Date(str);\n\t} else if (type === 'number') {\n\t\treturn new Date(str);\n\t} else {\n\t\treturn str;\n\t}\n}\n\nfunction DateStringSet(dateStr){\n\tthis.setValue = dateStr;\n\tvar date = toDate(dateStr);\n\tthis.value = date == null ? date : date.getTime();\n}\nDateStringSet.prototype.valueOf = function(){\n\treturn this.value;\n};\ncanReflect_1_19_2_canReflect.assignSymbols(DateStringSet.prototype,{\n\t\"can.serialize\": function(){\n\t\treturn this.setValue;\n\t}\n});\n\nvar maybeDate = canReflect_1_19_2_canReflect.assignSymbols(toDate,{\n\t\"can.new\": toDate,\n\t\"can.getSchema\": function(){\n\t\treturn {\n\t\t\ttype: \"Or\",\n\t\t\tvalues: [Date, undefined, null]\n\t\t};\n\t},\n\t\"can.ComparisonSetType\": DateStringSet,\n    \"can.getName\": function(){\n        return \"MaybeDate\";\n    },\n\t\"can.isMember\": function(value) {\n\t\treturn value == null || (value instanceof Date);\n\t}\n});\n\nfunction toNumber(val) {\n\tif (val == null) {\n\t\treturn val;\n\t}\n\treturn +(val);\n}\n\nvar maybeNumber = canReflect_1_19_2_canReflect.assignSymbols(toNumber,{\n\t\"can.new\": toNumber,\n\t\"can.getSchema\": function(){\n\t\treturn {\n\t\t\ttype: \"Or\",\n\t\t\tvalues: [Number, undefined, null]\n\t\t};\n\t},\n    \"can.getName\": function(){\n        return \"MaybeNumber\";\n    },\n\t\"can.isMember\": function(value) {\n\t\treturn value == null || typeof value === \"number\";\n\t}\n});\n\nfunction toString$2(val) {\n\tif (val == null) {\n\t\treturn val;\n\t}\n\treturn '' + val;\n}\n\nvar maybeString = canReflect_1_19_2_canReflect.assignSymbols(toString$2,{\n\t\"can.new\": toString$2,\n\t\"can.getSchema\": function(){\n\t\treturn {\n\t\t\ttype: \"Or\",\n\t\t\tvalues: [String, undefined, null]\n\t\t};\n\t},\n    \"can.getName\": function(){\n        return \"MaybeString\";\n    },\n\t\"can.isMember\": function(value) {\n\t\treturn value == null || typeof value === \"string\";\n\t}\n});\n\nvar newSymbol$4 = canSymbol_1_7_0_canSymbol.for(\"can.new\"),\n\tserializeSymbol$1 = canSymbol_1_7_0_canSymbol.for(\"can.serialize\"),\n\tinSetupSymbol$6 = canSymbol_1_7_0_canSymbol.for(\"can.initializing\");\n\nvar eventsProto$1, define$1,\n\tmake$1, makeDefinition$1, getDefinitionsAndMethods$1, getDefinitionOrMethod$1;\n\n// UTILITIES\nfunction isDefineType$1(func){\n\treturn func && (func.canDefineType === true || func[newSymbol$4] );\n}\n\nvar peek$4 = canObservationRecorder_1_3_1_canObservationRecorder.ignore(canReflect_1_19_2_canReflect.getValue.bind(canReflect_1_19_2_canReflect));\n\nvar Object_defineNamedPrototypeProperty$1 = Object.defineProperty;\n//!steal-remove-start\nif(process.env.NODE_ENV !== 'production') {\n\tObject_defineNamedPrototypeProperty$1 = function(obj, prop, definition) {\n\t\tif (definition.get) {\n\t\t\tObject.defineProperty(definition.get, \"name\", {\n\t\t\t\tvalue: \"get \"+canReflect_1_19_2_canReflect.getName(obj) + \".\"+prop,\n\t\t\t\twritable: true,\n\t\t\t\tconfigurable: true\n\t\t\t});\n\t\t}\n\t\tif (definition.set) {\n\t\t\tObject.defineProperty(definition.set, \"name\", {\n\t\t\t\tvalue:  \"set \"+canReflect_1_19_2_canReflect.getName(obj) + \".\"+prop,\n\t\t\t\tconfigurable: true\n\t\t\t});\n\t\t}\n\t\treturn Object.defineProperty(obj, prop, definition);\n\t};\n}\n//!steal-remove-end\n\n\nfunction defineConfigurableAndNotEnumerable$1(obj, prop, value) {\n\tObject.defineProperty(obj, prop, {\n\t\tconfigurable: true,\n\t\tenumerable: false,\n\t\twritable: true,\n\t\tvalue: value\n\t});\n}\n\nfunction eachPropertyDescriptor$1(map, cb){\n\tfor(var prop in map) {\n\t\tif(map.hasOwnProperty(prop)) {\n\t\t\tcb.call(map, prop, Object.getOwnPropertyDescriptor(map,prop));\n\t\t}\n\t}\n}\n\nfunction getEveryPropertyAndSymbol$1(obj) {\n\tvar props = Object.getOwnPropertyNames(obj);\n\tvar symbols = (\"getOwnPropertySymbols\" in Object) ?\n\t  Object.getOwnPropertySymbols(obj) : [];\n\treturn props.concat(symbols);\n}\n\nfunction cleanUpDefinition(prop, definition, shouldWarn, typePrototype){\n\t// cleanup `value` -> `default`\n\tif(definition.value !== undefined && ( typeof definition.value !== \"function\" || definition.value.length === 0) ){\n\n\t\t//!steal-remove-start\n\t\tif(process.env.NODE_ENV !== 'production') {\n\t\t\tif(shouldWarn) {\n\t\t\t\tdev.warn(\n\t\t\t\t\t\"can-define: Change the 'value' definition for \" + canReflect_1_19_2_canReflect.getName(typePrototype)+\".\"+prop + \" to 'default'.\"\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t\t//!steal-remove-end\n\n\t\tdefinition.default = definition.value;\n\t\tdelete definition.value;\n\t}\n\t// cleanup `Value` -> `DEFAULT`\n\tif(definition.Value !== undefined  ){\n\t\t//!steal-remove-start\n\t\tif(process.env.NODE_ENV !== 'production') {\n\t\t\tif(shouldWarn) {\n\t\t\t\tdev.warn(\n\t\t\t\t\t\"can-define: Change the 'Value' definition for \" + canReflect_1_19_2_canReflect.getName(typePrototype)+\".\"+prop + \" to 'Default'.\"\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t\t//!steal-remove-end\n\t\tdefinition.Default = definition.Value;\n\t\tdelete definition.Value;\n\t}\n}\n\nfunction isValueResolver(definition) {\n\t// there's a function and it has one argument\n\treturn typeof definition.value === \"function\" && definition.value.length;\n}\n\nvar canDefine_2_8_1_canDefine = define$1 = canNamespace_1_0_0_canNamespace.define = function(typePrototype, defines, baseDefine) {\n\t// default property definitions on _data\n\tvar prop,\n\t\tdataInitializers = Object.create(baseDefine ? baseDefine.dataInitializers : null),\n\t\t// computed property definitions on _computed\n\t\tcomputedInitializers = Object.create(baseDefine ? baseDefine.computedInitializers : null);\n\n\tvar result = getDefinitionsAndMethods$1(defines, baseDefine, typePrototype);\n\tresult.dataInitializers = dataInitializers;\n\tresult.computedInitializers = computedInitializers;\n\n\n\t// Goes through each property definition and creates\n\t// a `getter` and `setter` function for `Object.defineProperty`.\n\tcanReflect_1_19_2_canReflect.eachKey(result.definitions, function(definition, property){\n\t\tdefine$1.property(typePrototype, property, definition, dataInitializers, computedInitializers, result.defaultDefinition);\n\t});\n\n\t// Places a `_data` on the prototype that when first called replaces itself\n\t// with a `_data` object local to the instance.  It also defines getters\n\t// for any value that has a default value.\n\tif(typePrototype.hasOwnProperty(\"_data\")) {\n\t\tfor (prop in dataInitializers) {\n\t\t\tcanDefineLazyValue_1_1_1_defineLazyValue(typePrototype._data, prop, dataInitializers[prop].bind(typePrototype), true);\n\t\t}\n\t} else {\n\t\tcanDefineLazyValue_1_1_1_defineLazyValue(typePrototype, \"_data\", function() {\n\t\t\tvar map = this;\n\t\t\tvar data = {};\n\t\t\tfor (var prop in dataInitializers) {\n\t\t\t\tcanDefineLazyValue_1_1_1_defineLazyValue(data, prop, dataInitializers[prop].bind(map), true);\n\t\t\t}\n\t\t\treturn data;\n\t\t});\n\t}\n\n\t// Places a `_computed` on the prototype that when first called replaces itself\n\t// with a `_computed` object local to the instance.  It also defines getters\n\t// that will create the property's compute when read.\n\tif(typePrototype.hasOwnProperty(\"_computed\")) {\n\t\tfor (prop in computedInitializers) {\n\t\t\tcanDefineLazyValue_1_1_1_defineLazyValue(typePrototype._computed, prop, computedInitializers[prop].bind(typePrototype));\n\t\t}\n\t} else {\n\t\tcanDefineLazyValue_1_1_1_defineLazyValue(typePrototype, \"_computed\", function() {\n\t\t\tvar map = this;\n\t\t\tvar data = Object.create(null);\n\t\t\tfor (var prop in computedInitializers) {\n\t\t\t\tcanDefineLazyValue_1_1_1_defineLazyValue(data, prop, computedInitializers[prop].bind(map));\n\t\t\t}\n\t\t\treturn data;\n\t\t});\n\t}\n\n\t// Add necessary event methods to this object.\n\tgetEveryPropertyAndSymbol$1(eventsProto$1).forEach(function(prop){\n\t\tObject.defineProperty(typePrototype, prop, {\n\t\t\tenumerable: false,\n\t\t\tvalue: eventsProto$1[prop],\n\t\t\tconfigurable: true,\n\t\t\twritable: true\n\t\t});\n\t});\n\t// also add any symbols\n\t// add so instance defs can be dynamically added\n\tObject.defineProperty(typePrototype,\"_define\",{\n\t\tenumerable: false,\n\t\tvalue: result,\n\t\tconfigurable: true,\n\t\twritable: true\n\t});\n\n\t// Places Symbol.iterator or @@iterator on the prototype\n\t// so that this can be iterated with for/of and canReflect.eachIndex\n\tvar iteratorSymbol = canSymbol_1_7_0_canSymbol.iterator || canSymbol_1_7_0_canSymbol.for(\"iterator\");\n\tif(!typePrototype[iteratorSymbol]) {\n\t\tdefineConfigurableAndNotEnumerable$1(typePrototype, iteratorSymbol, function(){\n\t\t\treturn new define$1.Iterator(this);\n\t\t});\n\t}\n\n\treturn result;\n};\n\nvar onlyType$1 = function(obj){\n\tfor(var prop in obj) {\n\t\tif(prop !== \"type\") {\n\t\t\treturn false;\n\t\t}\n\t}\n\treturn true;\n};\n\ndefine$1.extensions = function () {};\n\n// typePrototype - the prototype of the type we are defining `prop` on.\n// `definition` - the user provided definition\ndefine$1.property = function(typePrototype, prop, definition, dataInitializers, computedInitializers, defaultDefinition) {\n\tvar propertyDefinition = define$1.extensions.apply(this, arguments);\n\n\tif (propertyDefinition) {\n\t\tdefinition = makeDefinition$1(prop, propertyDefinition, defaultDefinition || {}, typePrototype);\n\t}\n\n\tvar type = definition.type;\n\n\t//!steal-remove-start\n\tif(process.env.NODE_ENV !== 'production') {\n\t\tvar hasZeroArgGetter = definition.get && definition.get.length === 0;\n\t\tvar noSetter = !definition.set;\n\t\tvar defaultInDefinition = ( \"default\" in definition || \"Default\" in definition );\n\t\tvar typeInDefinition = (definition.type && defaultDefinition && definition.type !== defaultDefinition.type) ||\n\t\t\t(definition.Type && defaultDefinition && definition.Type !== defaultDefinition.Type);\n\n\t\tif(hasZeroArgGetter && noSetter && defaultInDefinition) {\n\t\t\tvar defaultOrDefault = \"default\" in definition ? \"default\" : \"Default\";\n\t\t\t\tdev.warn(\"can-define: \" + defaultOrDefault + \" value for property \" +\n\t\t\t\t\t\tcanReflect_1_19_2_canReflect.getName(typePrototype)+\".\"+ prop +\n\t\t\t\t\t\t\" ignored, as its definition has a zero-argument getter\");\n\t\t}\n\n\t\tif(hasZeroArgGetter && noSetter && typeInDefinition) {\n\t\t\tvar typeOrType = definition.type ? \"type\" : \"Type\";\n\t\t\tdev.warn(\"can-define: \" + typeOrType + \" value for property \" +\n\t\t\t\t\tcanReflect_1_19_2_canReflect.getName(typePrototype)+\".\"+ prop +\n\t\t\t\t\t\" ignored, as its definition has a zero-argument getter\");\n\t\t}\n\n\t\tif (type && canReflect_1_19_2_canReflect.isConstructorLike(type) && !isDefineType$1(type)) {\n\t\t\tdev.warn(\n\t\t\t\t\"can-define: the definition for \" + canReflect_1_19_2_canReflect.getName(typePrototype) + \".\"+\n                prop +\n\t\t\t\t\" uses a constructor for \\\"type\\\". Did you mean \\\"Type\\\"?\"\n\t\t\t);\n\t\t}\n\t}\n\t//!steal-remove-end\n\n\t// Special case definitions that have only `type: \"*\"`.\n\tif (type && onlyType$1(definition) && type === define$1.types[\"*\"]) {\n\t\tObject_defineNamedPrototypeProperty$1(typePrototype, prop, {\n\t\t\tget: make$1.get.data(prop),\n\t\t\tset: make$1.set.events(prop, make$1.get.data(prop), make$1.set.data(prop), make$1.eventType.data(prop)),\n\t\t\tenumerable: true,\n\t\t\tconfigurable: true\n\t\t});\n\t\treturn;\n\t}\n\tdefinition.type = type;\n\n\t// Where the value is stored.  If there is a `get` the source of the value\n\t// will be a compute in `this._computed[prop]`.  If not, the source of the\n\t// value will be in `this._data[prop]`.\n\tvar dataProperty = definition.get || isValueResolver(definition) ? \"computed\" : \"data\",\n\n\t\t// simple functions that all read/get/set to the right place.\n\t\t// - reader - reads the value but does not observe.\n\t\t// - getter - reads the value and notifies observers.\n\t\t// - setter - sets the value.\n\t\treader = make$1.read[dataProperty](prop),\n\t\tgetter = make$1.get[dataProperty](prop),\n\t\tsetter = make$1.set[dataProperty](prop),\n\t\tgetInitialValue;\n\n\t//!steal-remove-start\n\tif(process.env.NODE_ENV !== 'production') {\n\t\tif (definition.get) {\n\t\t\tObject.defineProperty(definition.get, \"name\", {\n\t\t\t\tvalue: canReflect_1_19_2_canReflect.getName(typePrototype) + \"'s \" + prop + \" getter\",\n\t\t\t\tconfigurable: true\n\t\t\t});\n\t\t}\n\t\tif (definition.set) {\n\t\t\tObject.defineProperty(definition.set, \"name\", {\n\t\t\t\tvalue: canReflect_1_19_2_canReflect.getName(typePrototype) + \"'s \" + prop + \" setter\",\n\t\t\t\tconfigurable: true\n\t\t\t});\n\t\t}\n\t\tif(isValueResolver(definition)) {\n\t\t\tObject.defineProperty(definition.value, \"name\", {\n\t\t\t\tvalue: canReflect_1_19_2_canReflect.getName(typePrototype) + \"'s \" + prop + \" value\",\n\t\t\t\tconfigurable: true\n\t\t\t});\n\t\t}\n\t}\n\t//!steal-remove-end\n\n\t// Determine the type converter\n\tvar typeConvert = function(val) {\n\t\treturn val;\n\t};\n\n\tif (definition.Type) {\n\t\ttypeConvert = make$1.set.Type(prop, definition.Type, typeConvert);\n\t}\n\tif (type) {\n\t\ttypeConvert = make$1.set.type(prop, type, typeConvert);\n\t}\n\n\t// make a setter that's going to fire of events\n\tvar eventsSetter = make$1.set.events(prop, reader, setter, make$1.eventType[dataProperty](prop));\n\tif(isValueResolver(definition)) {\n\t\tcomputedInitializers[prop] = make$1.valueResolver(prop, definition, typeConvert);\n\t}\n\t// Determine a function that will provide the initial property value.\n\telse if ((definition.default !== undefined || definition.Default !== undefined)) {\n\n\t\t//!steal-remove-start\n\t\tif (process.env.NODE_ENV !== 'production') {\n\t\t\t// If value is an object or array, give a warning\n\t\t\tif (definition.default !== null && typeof definition.default === 'object') {\n\t\t\t\tdev.warn(\"can-define: The default value for \" + canReflect_1_19_2_canReflect.getName(typePrototype)+\".\"+prop + \" is set to an object. This will be shared by all instances of the DefineMap. Use a function that returns the object instead.\");\n\t\t\t}\n\t\t\t// If value is a constructor, give a warning\n\t\t\tif (definition.default && canReflect_1_19_2_canReflect.isConstructorLike(definition.default)) {\n\t\t\t\tdev.warn(\"can-define: The \\\"default\\\" for \" + canReflect_1_19_2_canReflect.getName(typePrototype)+\".\"+prop + \" is set to a constructor. Did you mean \\\"Default\\\" instead?\");\n\t\t\t}\n\t\t}\n\t\t//!steal-remove-end\n\n\t\tgetInitialValue = canObservationRecorder_1_3_1_canObservationRecorder.ignore(make$1.get.defaultValue(prop, definition, typeConvert, eventsSetter));\n\t}\n\n\t// If property has a getter, create the compute that stores its data.\n\tif (definition.get) {\n\t\tcomputedInitializers[prop] = make$1.compute(prop, definition.get, getInitialValue);\n\t}\n\t// If the property isn't a getter, but has an initial value, setup a\n\t// default value on `this._data[prop]`.\n\telse if (getInitialValue) {\n\t\tdataInitializers[prop] = getInitialValue;\n\t}\n\n\n\t// Define setter behavior.\n\n\t// If there's a `get` and `set`, make the setter get the `lastSetValue` on the\n\t// `get`'s compute.\n\tif (definition.get && definition.set) {\n\t\t// the compute will set off events, so we can use the basic setter\n\t\tsetter = make$1.set.setter(prop, definition.set, make$1.read.lastSet(prop), setter, true);\n\n        // If there's zero-arg `get`, warn on all sets in dev mode\n        if (definition.get.length === 0 ) {\n            //!steal-remove-start\n            if(process.env.NODE_ENV !== 'production') {\n                dev.warn(\"can-define: Set value for property \" +\n                    canReflect_1_19_2_canReflect.getName(typePrototype)+\".\"+ prop +\n                    \" ignored, as its definition has a zero-argument getter\");\n            }\n            //!steal-remove-end\n        }\n\t}\n\t// If there's a `set` and no `get`,\n\telse if (definition.set) {\n\t\t// Add `set` functionality to the eventSetter.\n\t\tsetter = make$1.set.setter(prop, definition.set, reader, eventsSetter, false);\n\t}\n\t// If there's neither `set` or `get` or `value` (resolver)\n\telse if (dataProperty === \"data\") {\n\t\t// make a set that produces events.\n\t\tsetter = eventsSetter;\n\t}\n\t// If there's zero-arg `get` but not `set`, warn on all sets in dev mode\n\telse if (definition.get && definition.get.length < 1) {\n\t\tsetter = function() {\n\t\t\t//!steal-remove-start\n\t\t\tif(process.env.NODE_ENV !== 'production') {\n\t\t\t\tdev.warn(\"can-define: Set value for property \" +\n\t\t\t\t\tcanReflect_1_19_2_canReflect.getName(typePrototype)+\".\"+ prop +\n\t\t\t\t\t\" ignored, as its definition has a zero-argument getter and no setter\");\n\t\t\t}\n\t\t\t//!steal-remove-end\n\t\t};\n\t}\n\n\t// Add type behavior to the setter.\n\tif (type) {\n\t\tsetter = make$1.set.type(prop, type, setter);\n\t}\n\tif (definition.Type) {\n\t\tsetter = make$1.set.Type(prop, definition.Type, setter);\n\t}\n\n\t// Define the property.\n\tObject_defineNamedPrototypeProperty$1(typePrototype, prop, {\n\t\tget: getter,\n\t\tset: setter,\n\t\tenumerable: \"serialize\" in definition ? !!definition.serialize : !definition.get,\n\t\tconfigurable: true\n\t});\n};\ndefine$1.makeDefineInstanceKey = function(constructor) {\n\tconstructor[canSymbol_1_7_0_canSymbol.for(\"can.defineInstanceKey\")] = function(property, value) {\n\t\tvar defineResult = this.prototype._define;\n\t\tif(typeof value === \"object\") {\n\t\t\t// change `value` to default.\n\t\t\tcleanUpDefinition(property, value, false, this);\n\t\t}\n\t\tvar definition = getDefinitionOrMethod$1(property, value, defineResult.defaultDefinition, this);\n\t\tif(definition && typeof definition === \"object\") {\n\t\t\tdefine$1.property(constructor.prototype, property, definition, defineResult.dataInitializers, defineResult.computedInitializers, defineResult.defaultDefinition);\n\t\t\tdefineResult.definitions[property] = definition;\n\t\t} else {\n\t\t\tdefineResult.methods[property] = definition;\n\t\t}\n\n\t\tthis.prototype.dispatch({\n\t\t\taction: \"can.keys\",\n\t\t\ttype: \"can.keys\", // TODO: Remove in 6.0\n\t\t\ttarget: this.prototype\n\t\t});\n\t};\n};\n\n// Makes a simple constructor function.\ndefine$1.Constructor = function(defines, sealed) {\n\tvar constructor = function DefineConstructor(props) {\n\t\tObject.defineProperty(this, inSetupSymbol$6, {\n\t\t\tconfigurable: true,\n\t\t\tenumerable: false,\n\t\t\tvalue: true,\n\t\t\twritable: true\n\t\t});\n\t\tdefine$1.setup.call(this, props, sealed);\n\t\tthis[inSetupSymbol$6] = false;\n\t};\n\tvar result = define$1(constructor.prototype, defines);\n\ttype$1(constructor);\n\tdefine$1.makeDefineInstanceKey(constructor, result);\n\treturn constructor;\n};\n\n// A bunch of helper functions that are used to create various behaviors.\nmake$1 = {\n\n\tcomputeObj: function(map, prop, observable) {\n\t\tvar computeObj = {\n\t\t\toldValue: undefined,\n\t\t\tcompute: observable,\n\t\t\tcount: 0,\n\t\t\thandler: function(newVal) {\n\t\t\t\tvar oldValue = computeObj.oldValue;\n\t\t\t\tcomputeObj.oldValue = newVal;\n\n\t\t\t\tmap.dispatch({\n\t\t\t\t\taction: \"set\",\n\t\t\t\t\tkey: \"prop\",\n\t\t\t\t\ttarget: map,\n\t\t\t\t\tvalue: newVal,\n\t\t\t\t\toldValue: oldValue,\n\t\t\t\t\ttype: prop, // TODO: Remove in 6.0\n\t\t\t\t}, [newVal, oldValue]);\n\t\t\t}\n\t\t};\n\t\treturn computeObj;\n\t},\n\tvalueResolver: function(prop, definition, typeConvert) {\n\t\tvar getDefault = make$1.get.defaultValue(prop, definition, typeConvert);\n\t\treturn function(){\n\t\t\tvar map = this;\n\t\t\tvar defaultValue = getDefault.call(this);\n\t\t\tvar computeObj = make$1.computeObj(map, prop, new resolver(definition.value, map, defaultValue));\n\t\t\t//!steal-remove-start\n\t\t\tif(process.env.NODE_ENV !== 'production') {\n\t\t\t\tObject.defineProperty(computeObj.handler, \"name\", {\n\t\t\t\t\tvalue: canReflect_1_19_2_canReflect.getName(definition.value).replace('value', 'event emitter')\n\t\t\t\t});\n\t\t\t}\n\t\t\t//!steal-remove-end\n\t\t\treturn computeObj;\n\t\t};\n\t},\n\t// Returns a function that creates the `_computed` prop.\n\tcompute: function(prop, get, defaultValueFn) {\n\n\t\treturn function() {\n\t\t\tvar map = this,\n\t\t\t\tdefaultValue = defaultValueFn && defaultValueFn.call(this),\n\t\t\t\tobservable, computeObj;\n\n\t\t\tif(get.length === 0) {\n\t\t\t\tobservable = new canObservation_4_2_0_canObservation(get, map);\n\t\t\t} else if(get.length === 1) {\n\t\t\t\tobservable = new settable(get, map, defaultValue);\n\t\t\t} else {\n\t\t\t\tobservable = new async(get, map, defaultValue);\n\t\t\t}\n\n\t\t\tcomputeObj = make$1.computeObj(map, prop, observable);\n\n\t\t\t//!steal-remove-start\n\t\t\tif(process.env.NODE_ENV !== 'production') {\n\t\t\t\tObject.defineProperty(computeObj.handler, \"name\", {\n\t\t\t\t\tvalue: canReflect_1_19_2_canReflect.getName(get).replace('getter', 'event emitter')\n\t\t\t\t});\n\t\t\t}\n\t\t\t//!steal-remove-end\n\n\t\t\treturn computeObj;\n\t\t};\n\t},\n\t// Set related helpers.\n\tset: {\n\t\tdata: function(prop) {\n\t\t\treturn function(newVal) {\n\t\t\t\tthis._data[prop] = newVal;\n\t\t\t};\n\t\t},\n\t\tcomputed: function(prop) {\n\t\t\treturn function(val) {\n\t\t\t\tcanReflect_1_19_2_canReflect.setValue( this._computed[prop].compute, val );\n\t\t\t};\n\t\t},\n\t\tevents: function(prop, getCurrent, setData, eventType) {\n\t\t\treturn function(newVal) {\n\t\t\t\tif (this[inSetupSymbol$6]) {\n\t\t\t\t\tsetData.call(this, newVal);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tvar current = getCurrent.call(this);\n\t\t\t\t\tif (newVal === current) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tvar dispatched;\n\t\t\t\t\tsetData.call(this, newVal);\n\n\t\t\t\t\t\tdispatched = {\n\t\t\t\t\t\t\tpatches: [{type: \"set\", key: prop, value: newVal}],\n\t\t\t\t\t\t\ttarget: this,\n\t\t\t\t\t\t\taction: \"set\",\n\t\t\t\t\t\t\tvalue: newVal,\n\t\t\t\t\t\t\toldValue: current,\n\t\t\t\t\t\t\tkey: prop,\n\t\t\t\t\t\t\ttype: prop // TODO: Remove in 6.0\n\t\t\t\t\t\t};\n\n\t\t\t\t\t//!steal-remove-start\n\t\t\t\t\tif(process.env.NODE_ENV !== 'production') {\n\t\t\t\t\t\tvar lastItem, lastFn;\n\t\t\t\t\t\tdispatched.reasonLog = [ canReflect_1_19_2_canReflect.getName(this) + \"'s\", prop, \"changed to\", newVal, \"from\", current ];\n\n\t\t\t\t\t\t// If there are observations currently recording, this isn't a good time to\n\t\t\t\t\t\t//   mutate values: it's likely a cycle, and even if it doesn't cycle infinitely,\n\t\t\t\t\t\t//   it will likely cause unnecessary recomputation of derived values.  Warn the user.\n\t\t\t\t\t\tif(canObservationRecorder_1_3_1_canObservationRecorder.isRecording() && canQueues_1_3_2_canQueues.stack().length && !this[inSetupSymbol$6]) {\n\t\t\t\t\t\t\tlastItem = canQueues_1_3_2_canQueues.stack()[canQueues_1_3_2_canQueues.stack().length - 1];\n\t\t\t\t\t\t\tlastFn = lastItem.context instanceof canObservation_4_2_0_canObservation ? lastItem.context.func : lastItem.fn;\n\t\t\t\t\t\t\tvar mutationWarning = \"can-define: The \" + prop + \" property on \" +\n\t\t\t\t\t\t\t\tcanReflect_1_19_2_canReflect.getName(this) +\n\t\t\t\t\t\t\t\t\" is being set in \" +\n\t\t\t\t\t\t\t\t(canReflect_1_19_2_canReflect.getName(lastFn) || canReflect_1_19_2_canReflect.getName(lastItem.fn)) +\n\t\t\t\t\t\t\t\t\". This can cause infinite loops and performance issues. \" +\n\t\t\t\t\t\t\t\t\"Use the value() behavior for \" +\n\t\t\t\t\t\t\t\tprop +\n\t\t\t\t\t\t\t\t\" instead, and listen to other properties and observables with listenTo(). https://canjs.com/doc/can-define.types.value.html\";\n\t\t\t\t\t\t\tdev.warn(mutationWarning);\n\t\t\t\t\t\t\tcanQueues_1_3_2_canQueues.logStack();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t//!steal-remove-end\n\n\t\t\t\t\tthis.dispatch(dispatched, [newVal, current]);\n\t\t\t\t}\n\t\t\t};\n\t\t},\n\t\tsetter: function(prop, setter, getCurrent, setEvents, hasGetter) {\n\t\t\treturn function(value) {\n\t\t\t\t//!steal-remove-start\n\t\t\t\tvar asyncTimer;\n\t\t\t\t//!steal-remove-end\n\n\t\t\t\tvar self = this;\n\n\t\t\t\t// call the setter, if returned value is undefined,\n\t\t\t\t// this means the setter is async so we\n\t\t\t\t// do not call update property and return right away\n\n\t\t\t\tcanQueues_1_3_2_canQueues.batch.start();\n\t\t\t\tvar setterCalled = false,\n\t\t\t\t\tcurrent = getCurrent.call(this),\n\t\t\t\t\tsetValue = setter.call(this, value, function(value) {\n\t\t\t\t\t\tsetEvents.call(self, value);\n\n\t\t\t\t\t\tsetterCalled = true;\n\t\t\t\t\t\t//!steal-remove-start\n\t\t\t\t\t\tif(process.env.NODE_ENV !== 'production') {\n\t\t\t\t\t\t\tclearTimeout(asyncTimer);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t//!steal-remove-end\n\t\t\t\t\t}, current);\n\n\t\t\t\tif (setterCalled) {\n\t\t\t\t\tcanQueues_1_3_2_canQueues.batch.stop();\n\t\t\t\t} else {\n\t\t\t\t\tif (hasGetter) {\n\t\t\t\t\t\t// we got a return value\n\t\t\t\t\t\tif (setValue !== undefined) {\n\t\t\t\t\t\t\t// if the current `set` value is returned, don't set\n\t\t\t\t\t\t\t// because current might be the `lastSetVal` of the internal compute.\n\t\t\t\t\t\t\tif (current !== setValue) {\n\t\t\t\t\t\t\t\tsetEvents.call(this, setValue);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tcanQueues_1_3_2_canQueues.batch.stop();\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// this is a side effect, it didn't take a value\n\t\t\t\t\t\t// so use the original set value\n\t\t\t\t\t\telse if (setter.length === 0) {\n\t\t\t\t\t\t\tsetEvents.call(this, value);\n\t\t\t\t\t\t\tcanQueues_1_3_2_canQueues.batch.stop();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// it took a value\n\t\t\t\t\t\telse if (setter.length === 1) {\n\t\t\t\t\t\t\t// if we have a getter, and undefined was returned,\n\t\t\t\t\t\t\t// we should assume this is setting the getters properties\n\t\t\t\t\t\t\t// and we shouldn't do anything.\n\t\t\t\t\t\t\tcanQueues_1_3_2_canQueues.batch.stop();\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// we are expecting something\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t//!steal-remove-start\n\t\t\t\t\t\t\tif(process.env.NODE_ENV !== 'production') {\n\t\t\t\t\t\t\t\tasyncTimer = setTimeout(function() {\n\t\t\t\t\t\t\t\t\tdev.warn('can-define: Setter \"' + canReflect_1_19_2_canReflect.getName(self)+\".\"+prop + '\" did not return a value or call the setter callback.');\n\t\t\t\t\t\t\t\t}, dev.warnTimeout);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t//!steal-remove-end\n\t\t\t\t\t\t\tcanQueues_1_3_2_canQueues.batch.stop();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// we got a return value\n\t\t\t\t\t\tif (setValue !== undefined) {\n\t\t\t\t\t\t\t// if the current `set` value is returned, don't set\n\t\t\t\t\t\t\t// because current might be the `lastSetVal` of the internal compute.\n\t\t\t\t\t\t\tsetEvents.call(this, setValue);\n\t\t\t\t\t\t\tcanQueues_1_3_2_canQueues.batch.stop();\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// this is a side effect, it didn't take a value\n\t\t\t\t\t\t// so use the original set value\n\t\t\t\t\t\telse if (setter.length === 0) {\n\t\t\t\t\t\t\tsetEvents.call(this, value);\n\t\t\t\t\t\t\tcanQueues_1_3_2_canQueues.batch.stop();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// it took a value\n\t\t\t\t\t\telse if (setter.length === 1) {\n\t\t\t\t\t\t\t// if we don't have a getter, we should probably be setting the\n\t\t\t\t\t\t\t// value to undefined\n\t\t\t\t\t\t\tsetEvents.call(this, undefined);\n\t\t\t\t\t\t\tcanQueues_1_3_2_canQueues.batch.stop();\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// we are expecting something\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t//!steal-remove-start\n\t\t\t\t\t\t\tif(process.env.NODE_ENV !== 'production') {\n\t\t\t\t\t\t\t\tasyncTimer = setTimeout(function() {\n\t\t\t\t\t\t\t\t\tdev.warn('can/map/setter.js: Setter \"' + canReflect_1_19_2_canReflect.getName(self)+\".\"+prop + '\" did not return a value or call the setter callback.');\n\t\t\t\t\t\t\t\t}, dev.warnTimeout);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t//!steal-remove-end\n\t\t\t\t\t\t\tcanQueues_1_3_2_canQueues.batch.stop();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\n\t\t\t\t}\n\t\t\t};\n\t\t},\n\t\ttype: function(prop, type, set) {\n\t\t\tfunction setter(newValue) {\n\t\t\t\treturn set.call(this, type.call(this, newValue, prop));\n\t\t\t}\n\t\t\tif(isDefineType$1(type)) {\n\t\t\t\t// TODO: remove this `canDefineType` check in a future release.\n\t\t\t\tif(type.canDefineType) {\n\t\t\t\t\treturn setter;\n\t\t\t\t} else {\n\t\t\t\t\treturn function setter(newValue){\n\t\t\t\t\t\treturn set.call(this, canReflect_1_19_2_canReflect.convert(newValue, type));\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\t\t\t// If type is a nested object: `type: {foo: \"string\", bar: \"number\"}`\n\t\t\tif (typeof type === \"object\") {\n\t\t\t\treturn make$1.set.Type(prop, type, set);\n\t\t\t} else {\n\t\t\t\treturn setter;\n\t\t\t}\n\t\t},\n\t\tType: function(prop, Type, set) {\n\t\t\t// `type`: {foo: \"string\"}\n\t\t\tif(Array.isArray(Type) && define$1.DefineList) {\n\t\t\t\tType = define$1.DefineList.extend({\n\t\t\t\t\t\"#\": Type[0]\n\t\t\t\t});\n\t\t\t} else if (typeof Type === \"object\") {\n\t\t\t\tif(define$1.DefineMap) {\n\t\t\t\t\tType = define$1.DefineMap.extend(Type);\n\t\t\t\t} else {\n\t\t\t\t\tType = define$1.Constructor(Type);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn function(newValue) {\n\t\t\t\tif (newValue instanceof Type || newValue == null) {\n\t\t\t\t\treturn set.call(this, newValue);\n\t\t\t\t} else {\n\t\t\t\t\treturn set.call(this, new Type(newValue));\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t},\n\t// Helpes that indicate what the event type should be.  These probably aren't needed.\n\teventType: {\n\t\tdata: function(prop) {\n\t\t\treturn function(newVal, oldVal) {\n\t\t\t\treturn oldVal !== undefined || this._data.hasOwnProperty(prop) ? \"set\" : \"add\";\n\t\t\t};\n\t\t},\n\t\tcomputed: function() {\n\t\t\treturn function() {\n\t\t\t\treturn \"set\";\n\t\t\t};\n\t\t}\n\t},\n\t// Helpers that read the data in a non-observable way.\n\tread: {\n\t\tdata: function(prop) {\n\t\t\treturn function() {\n\t\t\t\treturn this._data[prop];\n\t\t\t};\n\t\t},\n\t\tcomputed: function(prop) {\n\t\t\t// might want to protect this\n\t\t\treturn function() {\n\t\t\t\treturn canReflect_1_19_2_canReflect.getValue( this._computed[prop].compute );\n\t\t\t};\n\t\t},\n\t\tlastSet: function(prop) {\n\t\t\treturn function() {\n\t\t\t\tvar observable = this._computed[prop].compute;\n\t\t\t\tif(observable.lastSetValue) {\n\t\t\t\t\treturn canReflect_1_19_2_canReflect.getValue(observable.lastSetValue);\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t},\n\t// Helpers that read the data in an observable way.\n\tget: {\n\t\t// uses the default value\n\t\tdefaultValue: function(prop, definition, typeConvert, callSetter) {\n\t\t\treturn function() {\n\t\t\t\tvar value = definition.default;\n\t\t\t\tif (value !== undefined) {\n\t\t\t\t\tif (typeof value === \"function\") {\n\t\t\t\t\t\tvalue = value.call(this);\n\t\t\t\t\t}\n\t\t\t\t\tvalue = typeConvert.call(this, value);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tvar Default = definition.Default;\n\t\t\t\t\tif (Default) {\n\t\t\t\t\t\tvalue = typeConvert.call(this,new Default());\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif(definition.set) {\n\t\t\t\t\t// TODO: there's almost certainly a faster way of making this happen\n\t\t\t\t\t// But this is maintainable.\n\n\t\t\t\t\tvar VALUE;\n\t\t\t\t\tvar sync = true;\n\n\t\t\t\t\tvar setter = make$1.set.setter(prop, definition.set, function(){}, function(value){\n\t\t\t\t\t\tif(sync) {\n\t\t\t\t\t\t\tVALUE = value;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tcallSetter.call(this, value);\n\t\t\t\t\t\t}\n\t\t\t\t\t}, definition.get);\n\n\t\t\t\t\tsetter.call(this,value);\n\t\t\t\t\tsync= false;\n\n\t\t\t\t\t// VALUE will be undefined if the callback is never called.\n\t\t\t\t\treturn VALUE;\n\n\n\t\t\t\t}\n\t\t\t\treturn value;\n\t\t\t};\n\t\t},\n\t\tdata: function(prop) {\n\t\t\treturn function() {\n\t\t\t\tif (!this[inSetupSymbol$6]) {\n\t\t\t\t\tcanObservationRecorder_1_3_1_canObservationRecorder.add(this, prop);\n\t\t\t\t}\n\n\t\t\t\treturn this._data[prop];\n\t\t\t};\n\t\t},\n\t\tcomputed: function(prop) {\n\t\t\treturn function(val) {\n\t\t\t\tvar compute = this._computed[prop].compute;\n\t\t\t\tif (canObservationRecorder_1_3_1_canObservationRecorder.isRecording()) {\n\t\t\t\t\tcanObservationRecorder_1_3_1_canObservationRecorder.add(this, prop);\n\t\t\t\t\tif (!canReflect_1_19_2_canReflect.isBound(compute)) {\n\t\t\t\t\t\tcanObservation_4_2_0_canObservation.temporarilyBind(compute);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn peek$4(compute);\n\t\t\t};\n\t\t}\n\t}\n};\n\ndefine$1.behaviors = [\"get\", \"set\", \"value\", \"Value\", \"type\", \"Type\", \"serialize\"];\n\n// This cleans up a particular behavior and adds it to the definition\nvar addBehaviorToDefinition$1 = function(definition, behavior, value) {\n\tif(behavior === \"enumerable\") {\n\t\t// treat enumerable like serialize\n\t\tdefinition.serialize = !!value;\n\t}\n\telse if(behavior === \"type\") {\n\t\tvar behaviorDef = value;\n\t\tif(typeof behaviorDef === \"string\") {\n\t\t\tbehaviorDef = define$1.types[behaviorDef];\n\t\t\tif(typeof behaviorDef === \"object\" && !isDefineType$1(behaviorDef)) {\n\t\t\t\tcanAssign_1_3_3_canAssign(definition, behaviorDef);\n\t\t\t\tbehaviorDef = behaviorDef[behavior];\n\t\t\t}\n\t\t}\n\t\tif (typeof behaviorDef !== 'undefined') {\n\t\t\tdefinition[behavior] = behaviorDef;\n\t\t}\n\t}\n\telse {\n\t\tdefinition[behavior] = value;\n\t}\n};\n\n// This is called by `define.property` AND `getDefinitionOrMethod` (which is called by `define`)\n// Currently, this is adding default behavior\n// copying `type` over, and even cleaning up the final definition object\nmakeDefinition$1 = function(prop, def, defaultDefinition, typePrototype) {\n\n\tvar definition = {};\n\n\tcanReflect_1_19_2_canReflect.eachKey(def, function(value, behavior) {\n\t\taddBehaviorToDefinition$1(definition, behavior, value);\n\t});\n\t// only add default if it doesn't exist\n\tcanReflect_1_19_2_canReflect.eachKey(defaultDefinition, function(value, prop){\n\t\tif(definition[prop] === undefined) {\n\t\t\tif(prop !== \"type\" && prop !== \"Type\") {\n\t\t\t\tdefinition[prop] = value;\n\t\t\t}\n\t\t}\n\t});\n\n\t// normalize Type that implements can.new\n\tif(def.Type) {\n\t\tvar value = def.Type;\n\n\t\tvar serialize = value[serializeSymbol$1];\n\t\tif(serialize) {\n\t\t\tdefinition.serialize = function(val){\n\t\t\t\treturn serialize.call(val);\n\t\t\t};\n\t\t}\n\t\tif(value[newSymbol$4]) {\n\t\t\tdefinition.type = value;\n\t\t\tdelete definition.Type;\n\t\t}\n\t}\n\n\t// We only want to add a defaultDefinition if def.type is not a string\n\t// if def.type is a string it is handled in addDefinition\n\tif(typeof def.type !== 'string') {\n\t\t// if there's no type definition, take it from the defaultDefinition\n\t\tif(!definition.type && !definition.Type) {\n            var defaultsCopy = canReflect_1_19_2_canReflect.assignMap({},defaultDefinition);\n            definition = canReflect_1_19_2_canReflect.assignMap(defaultsCopy, definition);\n\t\t}\n\n\t\tif( canReflect_1_19_2_canReflect.size(definition) === 0 ) {\n\t\t\tdefinition.type = define$1.types[\"*\"];\n\t\t}\n\t}\n\tcleanUpDefinition(prop, definition, true, typePrototype);\n\treturn definition;\n};\n\n// called by `can.defineInstanceKey` and `getDefinitionsAndMethods`\n// returns the value or the definition object.\n// calls makeDefinition\n// This is dealing with a string value\ngetDefinitionOrMethod$1 = function(prop, value, defaultDefinition, typePrototype){\n\t// Clean up the value to make it a definition-like object\n\tvar definition;\n\tif(typeof value === \"string\") {\n\t\tdefinition = {type: value};\n\t}\n    // copies a `Type`'s methods over\n\telse if(value && (value[serializeSymbol$1] || value[newSymbol$4]) ) {\n\t\tdefinition = { Type: value };\n\t}\n\telse if(typeof value === \"function\") {\n\t\tif(canReflect_1_19_2_canReflect.isConstructorLike(value)) {\n\t\t\tdefinition = {Type: value};\n\t\t}\n\t\t// or leaves as a function\n\t} else if( Array.isArray(value) ) {\n\t\tdefinition = {Type: value};\n\t} else if( canReflect_1_19_2_canReflect.isPlainObject(value) ){\n\t\tdefinition = value;\n\t}\n\n\tif(definition) {\n\t\treturn makeDefinition$1(prop, definition, defaultDefinition, typePrototype);\n\t}\n\telse {\n\t\treturn value;\n\t}\n};\n// called by can.define\ngetDefinitionsAndMethods$1 = function(defines, baseDefines, typePrototype) {\n\t// make it so the definitions include base definitions on the proto\n\tvar definitions = Object.create(baseDefines ? baseDefines.definitions : null);\n\tvar methods = {};\n\t// first lets get a default if it exists\n\tvar defaults = defines[\"*\"],\n\t\tdefaultDefinition;\n\tif(defaults) {\n\t\tdelete defines[\"*\"];\n\t\tdefaultDefinition = getDefinitionOrMethod$1(\"*\", defaults, {});\n\t} else {\n\t\tdefaultDefinition = Object.create(null);\n\t}\n\n\teachPropertyDescriptor$1(defines, function( prop, propertyDescriptor ) {\n\n\t\tvar value;\n\t\tif(propertyDescriptor.get || propertyDescriptor.set) {\n\t\t\tvalue = {get: propertyDescriptor.get, set: propertyDescriptor.set};\n\t\t} else {\n\t\t\tvalue = propertyDescriptor.value;\n\t\t}\n\n\t\tif(prop === \"constructor\") {\n\t\t\tmethods[prop] = value;\n\t\t\treturn;\n\t\t} else {\n\t\t\tvar result = getDefinitionOrMethod$1(prop, value, defaultDefinition, typePrototype);\n\t\t\tif(result && typeof result === \"object\" && canReflect_1_19_2_canReflect.size(result) > 0) {\n\t\t\t\tdefinitions[prop] = result;\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// Removed adding raw values that are not functions\n\t\t\t\tif (typeof result === 'function') {\n\t\t\t\t\tmethods[prop] = result;\n\t\t\t\t}\n\t\t\t\t//!steal-remove-start\n\t\t\t\telse if (typeof result !== 'undefined') {\n\t\t\t\t\tif(process.env.NODE_ENV !== 'production') {\n                    \t// Ex: {prop: 0}\n\t\t\t\t\t\tdev.error(canReflect_1_19_2_canReflect.getName(typePrototype)+\".\"+prop + \" does not match a supported propDefinition. See: https://canjs.com/doc/can-define.types.propDefinition.html\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t//!steal-remove-end\n\t\t\t}\n\t\t}\n\t});\n\tif(defaults) {\n\t\t// we should move this property off the prototype.\n\t\tdefineConfigurableAndNotEnumerable$1(defines,\"*\", defaults);\n\t}\n\treturn {definitions: definitions, methods: methods, defaultDefinition: defaultDefinition};\n};\n\neventsProto$1 = map$1({});\n\nfunction setupComputed$1(instance, eventName) {\n\tvar computedBinding = instance._computed && instance._computed[eventName];\n\tif (computedBinding && computedBinding.compute) {\n\t\tif (!computedBinding.count) {\n\t\t\tcomputedBinding.count = 1;\n\t\t\tcanReflect_1_19_2_canReflect.onValue(computedBinding.compute, computedBinding.handler, \"notify\");\n\t\t\tcomputedBinding.oldValue = peek$4(computedBinding.compute);\n\t\t} else {\n\t\t\tcomputedBinding.count++;\n\t\t}\n\n\t}\n}\nfunction teardownComputed$1(instance, eventName){\n\tvar computedBinding = instance._computed && instance._computed[eventName];\n\tif (computedBinding) {\n\t\tif (computedBinding.count === 1) {\n\t\t\tcomputedBinding.count = 0;\n\t\t\tcanReflect_1_19_2_canReflect.offValue(computedBinding.compute, computedBinding.handler,\"notify\");\n\t\t} else {\n\t\t\tcomputedBinding.count--;\n\t\t}\n\t}\n}\n\nvar canMetaSymbol$1 = canSymbol_1_7_0_canSymbol.for(\"can.meta\");\ncanAssign_1_3_3_canAssign(eventsProto$1, {\n\t_eventSetup: function() {},\n\t_eventTeardown: function() {},\n\taddEventListener: function(eventName, handler, queue) {\n\t\tsetupComputed$1(this, eventName);\n\t\treturn map$1.addEventListener.apply(this, arguments);\n\t},\n\n\t// ### unbind\n\t// Stops listening to an event.\n\t// If this is the last listener of a computed property,\n\t// stop forwarding events of the computed property to this map.\n\tremoveEventListener: function(eventName, handler) {\n\t\tteardownComputed$1(this, eventName);\n\t\treturn map$1.removeEventListener.apply(this, arguments);\n\n\t}\n});\neventsProto$1.on = eventsProto$1.bind = eventsProto$1.addEventListener;\neventsProto$1.off = eventsProto$1.unbind = eventsProto$1.removeEventListener;\n\n\nvar onKeyValueSymbol$6 = canSymbol_1_7_0_canSymbol.for(\"can.onKeyValue\");\nvar offKeyValueSymbol$4 = canSymbol_1_7_0_canSymbol.for(\"can.offKeyValue\");\n\ncanReflect_1_19_2_canReflect.assignSymbols(eventsProto$1,{\n\t\"can.onKeyValue\": function(key){\n\t\tsetupComputed$1(this, key);\n\t\treturn map$1[onKeyValueSymbol$6].apply(this, arguments);\n\t},\n\t\"can.offKeyValue\": function(key){\n\t\tteardownComputed$1(this, key);\n\t\treturn map$1[offKeyValueSymbol$4].apply(this, arguments);\n\t}\n});\n\ndelete eventsProto$1.one;\n\ndefine$1.setup = function(props, sealed) {\n\tObject.defineProperty(this,\"constructor\", {value: this.constructor, enumerable: false, writable: false});\n\tObject.defineProperty(this,canMetaSymbol$1, {value: Object.create(null), enumerable: false, writable: false});\n\n\t/* jshint -W030 */\n\n\tvar definitions = this._define.definitions;\n\tvar instanceDefinitions = Object.create(null);\n\tvar map = this;\n\tcanReflect_1_19_2_canReflect.eachKey(props, function(value, prop){\n\t\tif(definitions[prop] !== undefined) {\n\t\t\tmap[prop] = value;\n\t\t} else {\n\t\t\tdefine$1.expando(map, prop, value);\n\t\t}\n\t});\n\tif(canReflect_1_19_2_canReflect.size(instanceDefinitions) > 0) {\n\t\tdefineConfigurableAndNotEnumerable$1(this, \"_instanceDefinitions\", instanceDefinitions);\n\t}\n\t// only seal in dev mode for performance reasons.\n\t//!steal-remove-start\n\tif(process.env.NODE_ENV !== 'production') {\n\t\tthis._data;\n\t\tthis._computed;\n\t\tif(sealed !== false) {\n\t\t\tObject.seal(this);\n\t\t}\n\t}\n\t//!steal-remove-end\n};\n\n\nvar returnFirstArg$1 = function(arg){\n\treturn arg;\n};\n\ndefine$1.expando = function(map, prop, value) {\n\tif(define$1._specialKeys[prop]) {\n\t\t// ignores _data and _computed\n\t\treturn true;\n\t}\n\t// first check if it's already a constructor define\n\tvar constructorDefines = map._define.definitions;\n\tif(constructorDefines && constructorDefines[prop]) {\n\t\treturn;\n\t}\n\t// next if it's already on this instances\n\tvar instanceDefines = map._instanceDefinitions;\n\tif(!instanceDefines) {\n\t\tif(Object.isSealed(map)) {\n\t\t\treturn;\n\t\t}\n\t\tObject.defineProperty(map, \"_instanceDefinitions\", {\n\t\t\tconfigurable: true,\n\t\t\tenumerable: false,\n\t\t\twritable: true,\n\t\t\tvalue: {}\n\t\t});\n\t\tinstanceDefines = map._instanceDefinitions;\n\t}\n\tif(!instanceDefines[prop]) {\n\t\tvar defaultDefinition = map._define.defaultDefinition || {type: define$1.types.observable};\n\t\tdefine$1.property(map, prop, defaultDefinition, {},{});\n\t\t// possibly convert value to List or DefineMap\n\t\tif(defaultDefinition.type) {\n\t\t\tmap._data[prop] = define$1.make.set.type(prop, defaultDefinition.type, returnFirstArg$1).call(map, value);\n\t\t} else if (defaultDefinition.Type && canReflect_1_19_2_canReflect.isConstructorLike(defaultDefinition.Type)) {\n\t\t\tmap._data[prop] = define$1.make.set.Type(prop, defaultDefinition.Type, returnFirstArg$1).call(map, value);\n\t\t} else {\n\t\t\tmap._data[prop] = define$1.types.observable(value);\n\t\t}\n\n\t\tinstanceDefines[prop] = defaultDefinition;\n\t\tif(!map[inSetupSymbol$6]) {\n\t\t\tcanQueues_1_3_2_canQueues.batch.start();\n\t\t\tmap.dispatch({\n\t\t\t\taction: \"can.keys\",\n\t\t\t\ttarget: map,\n\t\t\t\ttype: \"can.keys\" // TODO: Remove in 6.0\n\t\t\t});\n\t\t\tif(Object.prototype.hasOwnProperty.call(map._data, prop)) {\n\t\t\t\tmap.dispatch({\n\t\t\t\t\taction: \"add\",\n\t\t\t\t\ttarget: map,\n\t\t\t\t\tvalue:  map._data[prop],\n\t\t\t\t\toldValue: undefined,\n\t\t\t\t\tkey: prop,\n\t\t\t\t\ttype: prop, // TODO: Remove in 6.0\n\t\t\t\t\tpatches: [{type: \"add\", key: prop, value: map._data[prop]}],\n\t\t\t\t},[map._data[prop], undefined]);\n\t\t\t} else {\n\t\t\t\tmap.dispatch({\n\t\t\t\t\ttype: \"set\",\n\t\t\t\t\ttarget: map,\n\t\t\t\t\tpatches: [{type: \"add\", key: prop, value: map._data[prop]}],\n\t\t\t\t},[map._data[prop], undefined]);\n\t\t\t}\n\t\t\tcanQueues_1_3_2_canQueues.batch.stop();\n\t\t}\n\t\treturn true;\n\t}\n};\ndefine$1.replaceWith = canDefineLazyValue_1_1_1_defineLazyValue;\ndefine$1.eventsProto = eventsProto$1;\ndefine$1.defineConfigurableAndNotEnumerable = defineConfigurableAndNotEnumerable$1;\ndefine$1.make = make$1;\ndefine$1.getDefinitionOrMethod = getDefinitionOrMethod$1;\ndefine$1._specialKeys = {_data: true, _computed: true};\nvar simpleGetterSetters$1 = {};\ndefine$1.makeSimpleGetterSetter = function(prop){\n\tif(simpleGetterSetters$1[prop] === undefined) {\n\n\t\tvar setter = make$1.set.events(prop, make$1.get.data(prop), make$1.set.data(prop), make$1.eventType.data(prop) );\n\n\t\tsimpleGetterSetters$1[prop] = {\n\t\t\tget: make$1.get.data(prop),\n\t\t\tset: function(newVal){\n\t\t\t\treturn setter.call(this, define$1.types.observable(newVal));\n\t\t\t},\n\t\t\tenumerable: true,\n            configurable: true\n\t\t};\n\t}\n\treturn simpleGetterSetters$1[prop];\n};\n\ndefine$1.Iterator = function(obj){\n\tthis.obj = obj;\n\tthis.definitions = Object.keys(obj._define.definitions);\n\tthis.instanceDefinitions = obj._instanceDefinitions ?\n\t\tObject.keys(obj._instanceDefinitions) :\n\t\tObject.keys(obj);\n\tthis.hasGet = typeof obj.get === \"function\";\n};\n\ndefine$1.Iterator.prototype.next = function(){\n\tvar key;\n\tif(this.definitions.length) {\n\t\tkey = this.definitions.shift();\n\n\t\t// Getters should not be enumerable\n\t\tvar def = this.obj._define.definitions[key];\n\t\tif(def.get) {\n\t\t\treturn this.next();\n\t\t}\n\t} else if(this.instanceDefinitions.length) {\n\t\tkey = this.instanceDefinitions.shift();\n\t} else {\n\t\treturn {\n\t\t\tvalue: undefined,\n\t\t\tdone: true\n\t\t};\n\t}\n\n\treturn {\n\t\tvalue: [\n\t\t\tkey,\n\t\t\tthis.hasGet ? this.obj.get(key) : this.obj[key]\n\t\t],\n\t\tdone: false\n\t};\n};\n\n\n\nfunction isObservableValue(obj){\n\treturn canReflect_1_19_2_canReflect.isValueLike(obj) && canReflect_1_19_2_canReflect.isObservableLike(obj);\n}\n\ndefine$1.types = {\n\t// To be made into a type ... this is both lazy {time: '123-456'}\n\t'date': maybeDate,\n\t'number': maybeNumber,\n\t'boolean': maybeBoolean,\n\t'observable': function(newVal) {\n\t\t\tif(Array.isArray(newVal) && define$1.DefineList) {\n\t\t\t\t\tnewVal = new define$1.DefineList(newVal);\n\t\t\t}\n\t\t\telse if(canReflect_1_19_2_canReflect.isPlainObject(newVal) &&  define$1.DefineMap) {\n\t\t\t\t\tnewVal = new define$1.DefineMap(newVal);\n\t\t\t}\n\t\t\treturn newVal;\n\t},\n\t'stringOrObservable': function(newVal) {\n\t\tif(Array.isArray(newVal)) {\n\t\t\treturn new define$1.DefaultList(newVal);\n\t\t}\n\t\telse if(canReflect_1_19_2_canReflect.isPlainObject(newVal)) {\n\t\t\treturn new define$1.DefaultMap(newVal);\n\t\t}\n\t\telse {\n\t\t\treturn canReflect_1_19_2_canReflect.convert( newVal, define$1.types.string);\n\t\t}\n\t},\n\t/**\n\t * Implements HTML-style boolean logic for attribute strings, where\n\t * any string, including \"\", is truthy.\n\t */\n\t'htmlbool': function(val) {\n\t\tif (val === '') {\n\t\t\treturn true;\n\t\t}\n\t\treturn !!canStringToAny_1_2_1_canStringToAny(val);\n\t},\n\t'*': function(val) {\n\t\treturn val;\n\t},\n\t'any': function(val) {\n\t\treturn val;\n\t},\n\t'string': maybeString,\n\n\t'compute': {\n\t\tset: function(newValue, setVal, setErr, oldValue) {\n\t\t\tif (isObservableValue(newValue) ) {\n\t\t\t\treturn newValue;\n\t\t\t}\n\t\t\tif (isObservableValue(oldValue)) {\n\t\t\t\tcanReflect_1_19_2_canReflect.setValue(oldValue,newValue);\n\t\t\t\treturn oldValue;\n\t\t\t}\n\t\t\treturn newValue;\n\t\t},\n\t\tget: function(value) {\n\t\t\treturn isObservableValue(value) ? canReflect_1_19_2_canReflect.getValue(value) : value;\n\t\t}\n\t}\n};\n\ndefine$1.updateSchemaKeys = function(schema, definitions) {\n\tfor(var prop in definitions) {\n\t\tvar definition = definitions[prop];\n\t\tif(definition.serialize !== false ) {\n\t\t\tif(definition.Type) {\n\t\t\t\tschema.keys[prop] = definition.Type;\n\t\t\t} else if(definition.type) {\n\t\t\t\tschema.keys[prop] = definition.type;\n\t\t\t} else {\n\t\t\t\tschema.keys[prop] = function(val){ return val; };\n\t\t\t}\n\t\t\t // some unknown type\n\t\t\tif(definitions[prop].identity === true) {\n\t\t\t\tschema.identity.push(prop);\n\t\t\t}\n\t\t}\n\t}\n\treturn schema;\n};\n\n/**\n * @module {connect.Behavior} can-connect/can/ref/ref can/ref\n * @parent can-connect.behaviors\n * @group can-connect/can/ref/ref.hydrators hydrators\n * @group can-connect/can/ref/ref.methods methods\n *\n * @description Handle references to instances in the data returned by the server. Allows several means of\n * loading referenced instances, determined on-the-fly.\n *\n * @signature `canRef( baseConnection )`\n *\n * Adds a reference type to [can-connect/can/map/map._Map `connection.Map`] that loads the related type or holds onto\n * an existing one. This handles circular references and loads relevant data as needed. The reference type can be loaded\n * by:\n * - it's data being included in the response for the referencing instance\n * - having an existing instance available in the [can-connect/constructor/store/store.instanceStore]\n * - lazy loading via the connection for the reference type\n *\n * @param {{}} baseConnection `can-connect` connection object that is having the `can/ref` behavior added on to it.\n * Expects the [can-connect/can/map/map] behavior to already be added to this base connection. If the `connect` helper\n * is used to build the connection, the behaviors will automatically be ordered as required.\n *\n * @return {{}} a connection with the [can-connect/can/map/map._Map `Map`] having the reference type property\n * (`Map.Ref.type`) created by `can/ref`.\n *\n * @body\n *\n * ## Use\n *\n * `can/ref` is useful when the server might return either a reference to\n * a value or the value itself.  For example, in a MongoDB setup,\n * a request like `GET /game/5` might return:\n *\n * ```\n * {\n *   id: 5,\n *   teamRef: 7,\n *   score: 21\n * }\n * ```\n *\n * But a request like `GET /game/5?$populate=teamRef` might return:\n *\n * ```\n * {\n *   id: 5,\n *   teamRef: {id: 7, name: \"Cubs\"},\n *   score: 21\n * }\n * ```\n *\n * `can/ref` can handle this ambiguity and even make lazy loading possible.\n *\n * To use `can/ref`, first create a Map and a connection for the referenced type:\n *\n * ```\n * var Team = DefineMap.extend({\n *   id: 'string'\n * });\n *\n * connect([\n *   require(\"can-connect/constructor/constructor\"),\n *   require(\"can-connect/constructor/store/store\"),\n *   require(\"can-connect/can/map/map\"),\n *   require(\"can-connect/can/ref/ref\")\n * ],{\n *     Map: Team,\n *     List: Team.List,\n *     ...\n * })\n * ```\n *\n * The connection is necessary because it creates an instance store which will\n * hold instances of `Team` that the `Team.Ref` type will be able to access.\n *\n * Now we can create a reference to the Team within a Game map and the Game's connection:\n *\n * ```\n * var Game = DefineMap.extend({\n *   id: 'string',\n *   teamRef: {type: Team.Ref.type},\n *   score: \"number\"\n * });\n *\n * superMap({\n *   Map: Game,\n *   List: Game.List\n * })\n * ```\n *\n * Now, `teamRef` is a [can-connect/can/ref/ref.Map.Ref] type, which will\n * house the id of the reference no matter how the server returns data, e.g.\n * `game.teamRef.id`.\n *\n * For example, without populating the team data:\n *\n * ```\n * Game.get({id: 5}).then(function(game){\n *   game.teamRef.id //-> 7\n * });\n * ```\n *\n * With populating the team data:\n *\n * ```\n * Game.get({id: 5, $populate: \"teamRef\"}).then(function(game){\n *   game.teamRef.id //-> 7\n * });\n * ```\n *\n * The values of other properties and methods on the [can-connect/can/ref/ref.Map.Ref] type\n * are determined by if the reference was populated or the referenced item already exists\n * in the [can-connect/constructor/store/store.instanceStore].\n *\n * For example, `value`, which points to the referenced instance, will be populated if the reference was populated:\n *\n * ```\n * Game.get({id: 5, $populate: \"teamRef\"}).then(function(game){\n *   game.teamRef.value.name //-> 5\n * });\n * ```\n *\n * Or, it will be populated if that instance had been loaded through another means and\n * it’s in the instance store:\n *\n * ```\n * Team.get({id: 7}).then(function(team){\n *   // binding adds things to the store\n *   team.on(\"name\", function(){})\n * }).then(function(){\n *   Game.get({id: 5}).then(function(game){\n *     game.teamRef.value.name //-> 5\n *   });\n * })\n * ```\n *\n * `value` is an [can-define.types.get asynchronous getter], which means that even if\n * the referenced value isn't populated or loaded through the store, it can be lazy loaded. This\n * is generally most useful in a template.\n *\n * The following will make an initial request for game `5`, but when the template\n * tried to read and listen to `game.teamRef.value.name`, a request for team `7`\n * will be made.\n *\n * ```\n * var template = stache(\"{{game.teamRef.value.name}} scored {{game.score}} points\");\n * Game.get({id: 5}).then(function(game){\n *   template({game: game});\n * });\n * ```\n *\n *\n */\n\n\n\n\n\n\n\nvar makeRef = function(connection) {\n\tvar idProp = canReflect_1_19_2_canReflect.getSchema(connection.queryLogic).identity[0];\n\t/**\n\t * @property {constructor} can-connect/can/ref/ref.Map.Ref Map.Ref\n\t * @parent can-connect/can/ref/ref.hydrators\n\t * @group can-connect/can/ref/ref.Map.Ref.static static\n\t * @group can-connect/can/ref/ref.Map.Ref.prototype prototype\n\t *\n\t * A reference type with `instanceRef.value` primed to return an existing instance of the\n\t * [can-connect/can/map/map._Map] type, if available, or lazy load an instance upon accessing `instanceRef.value`.\n\t *\n\t * @signature `new Map.Ref(id, value)`\n\t * @param  {string} id    string representing the record id\n\t * @param  {Object} value properties to be loaded / hydrated\n\t * @return {Map.Ref}       instance reference object for the id\n\t */\n\tvar Ref = (function(){\n\t\treturn function(id, value) {\n\t\t\tif (typeof id === \"object\") {\n\t\t\t\tvalue = id;\n\t\t\t\tid = value[idProp];\n\t\t\t}\n\t\t\t// check if this is in the store\n\t\t\tvar storeRef = Ref.store.get(id);\n\t\t\tif (storeRef) {\n\t\t\t\tif (value && !storeRef._value) {\n\t\t\t\t\tif (value instanceof connection.Map) {\n\t\t\t\t\t\tstoreRef._value = value;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tstoreRef._value = connection.hydrateInstance(value);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn storeRef;\n\t\t\t}\n\t\t\t// if not, create it\n\t\t\tthis[idProp] = id;\n\t\t\tif (value) {\n\t\t\t\t// if the value is already an instance, use it.\n\n\t\t\t\tif (value instanceof connection.Map) {\n\t\t\t\t\tthis._value = value;\n\t\t\t\t} else {\n\t\t\t\t\tthis._value = connection.hydrateInstance(value);\n\t\t\t\t}\n\t\t\t}\n\n\n\t\t\t// check if this is being made during a request\n\t\t\t// if it is, save it\n\t\t\tif (store.requests.count() > 0) {\n\t\t\t\tif (!Ref._requestInstances[id]) {\n\t\t\t\t\tRef.store.addReference(id, this);\n\t\t\t\t\tRef._requestInstances[id] = this;\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t})();\n\t/**\n\t * @property {can-connect/helpers/weak-reference-map} can-connect/can/ref/ref.Map.Ref.store store\n\t * @parent can-connect/can/ref/ref.Map.Ref.static\n\t * @hide // not something that needs to be documented for the average user\n\t * A WeakReferenceMap that contains instances being created by their `._cid` property.\n\t */\n\tRef.store = new weakReferenceMap();\n\tRef._requestInstances = {};\n\t/**\n\t * @function can-connect/can/ref/ref.Map.Ref.type type\n\t * @parent can-connect/can/ref/ref.Map.Ref.static\n\t *\n\t * Returns a new instance of `Map.Ref`.\n\t *\n\t * @signature `Map.Ref.type(reference)`\n\t *\n\t *   @param {Object|String|Number} reference either data or an id for an instance of [can-connect/can/map/map._Map].\n\t *   @return {can-connect/can/ref/ref.Map.Ref} reference instance for the passed data or identifier.\n\t */\n\tRef.type = function(ref) {\n\t\tif (ref && typeof ref !== \"object\") {\n\t\t\t// get or make the existing reference from the store\n\t\t\treturn new Ref(ref);\n\t\t} else {\n\t\t\t// get or make the reference in the store, update the instance too\n\t\t\treturn new Ref(ref[idProp], ref);\n\t\t}\n\t};\n\tvar defs = {\n\t\t/**\n\t\t * @property {Promise} can-connect/can/ref/ref.Map.Ref.prototype.promise promise\n\t\t * @parent can-connect/can/ref/ref.Map.Ref.prototype\n\t\t * @hide // don't know if this is part of the public API\n\t\t *\n\t\t * Returns a resolved promise if the referenced instance is already available, if not, returns a new promise\n\t\t * to retrieve the instance by the id.\n\t\t *\n\t\t * @signature `ref.promise`\n\t\t * @return {Promise} Promise resolving the instance referenced\n\t\t */\n\t\tpromise: {\n\t\t\tget: function() {\n\t\t\t\tif (this._value) {\n\t\t\t\t\treturn Promise.resolve(this._value);\n\t\t\t\t} else {\n\t\t\t\t\tvar props = {};\n\t\t\t\t\tprops[idProp] = this[idProp];\n\t\t\t\t\treturn connection.Map.get(props);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t_state: {\n\t\t\tget: function(lastSet, resolve) {\n\t\t\t\tif (resolve) {\n\t\t\t\t\tthis.promise.then(function() {\n\t\t\t\t\t\tresolve(\"resolved\");\n\t\t\t\t\t}, function() {\n\t\t\t\t\t\tresolve(\"rejected\");\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\treturn \"pending\";\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * @property {*} can-connect/can/ref/ref.Map.Ref.prototype.value value\n\t\t * @parent can-connect/can/ref/ref.Map.Ref.prototype\n\t\t *\n\t\t * Returns the actual instance the reference points to. Returns `undefined` if the instance is still being loaded.\n\t\t * Accessing this property will start lazy loading if the instance isn't already available.\n\t\t *\n\t\t * @signature `ref.value`\n\t\t * @return {object} actual instance referenced or `undefined` if lazy loading ongoing\n\t\t */\n\t\tvalue: {\n\t\t\tget: function(lastSet, resolve) {\n\t\t\t\tif (this._value) {\n\t\t\t\t\treturn this._value;\n\t\t\t\t} else if (resolve) {\n\t\t\t\t\tthis.promise.then(function(value) {\n\t\t\t\t\t\tresolve(value);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * @property {*} can-connect/can/ref/ref.Map.Ref.prototype.reason reason\n\t\t * @parent can-connect/can/ref/ref.Map.Ref.prototype\n\t\t *\n\t\t * Returns the failure message from the lazy loading promise. Returns `undefined` if the referenced instance is\n\t\t * available or loading is ongoing.\n\t\t *\n\t\t * @signature `ref.reason`\n\t\t * @return {Object} error message if the promise is rejected\n\t\t */\n\t\treason: {\n\t\t\tget: function(lastSet, resolve) {\n\t\t\t\tif (this._value) {\n\t\t\t\t\treturn undefined;\n\t\t\t\t} else {\n\t\t\t\t\tthis.promise.catch(function(value) {\n\t\t\t\t\t\tresolve(value);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\tdefs[idProp] = {\n\t\ttype: \"*\",\n\t\tset: function() {\n\t\t\tthis._value = undefined;\n\t\t}\n\t};\n\n\tcanDefine_2_8_1_canDefine(Ref.prototype, defs);\n\n\tRef.prototype.unobservedId = canObservationRecorder_1_3_1_canObservationRecorder.ignore(function() {\n\t\treturn this[idProp];\n\t});\n\t/**\n\t * @function can-connect/can/ref/ref.Map.Ref.prototype.isResolved isResolved\n\t * @parent can-connect/can/ref/ref.Map.Ref.prototype\n\t *\n\t * Observable property typically for use in templates to indicate to the user if lazy loading has succeeded.\n\t *\n\t * @signature `ref.isResolved`\n\t * @return {boolean} `true` if the lazy loading promise was resolved.\n\t */\n\tRef.prototype.isResolved = function() {\n\t\treturn !!this._value || this._state === \"resolved\";\n\t};\n\t/**\n\t * @function can-connect/can/ref/ref.Map.Ref.prototype.isRejected isRejected\n\t * @parent can-connect/can/ref/ref.Map.Ref.prototype\n\t *\n\t * Observable property typically for use in templates to indicate to the user if lazy loading has failed.\n\t *\n\t * @signature `ref.isRejected`\n\t * @return {boolean} `true` if the lazy loading promise was rejected.\n\t */\n\tRef.prototype.isRejected = function() {\n\t\treturn this._state === \"rejected\";\n\t};\n\n\t/**\n\t * @function can-connect/can/ref/ref.Map.Ref.prototype.isPending isPending\n\t * @parent can-connect/can/ref/ref.Map.Ref.prototype\n\t *\n\t * Observable property typically for use in templates to indicate to the user if lazy loading is ongoing.\n\t *\n\t * @signature `ref.isPending`\n\t * @return {boolean} `true` if the lazy loading promise state is not resolved or rejected.\n\t */\n\tRef.prototype.isPending = function() {\n\t\treturn !this._value && (this._state !== \"resolved\" || this._state !== \"rejected\");\n\t};\n\n\t/**\n\t * @function can-connect/can/ref/ref.Map.Ref.prototype.serialize serialize\n\t * @parent can-connect/can/ref/ref.Map.Ref.prototype\n\t *\n\t * Return the id of the referenced instance when serializing. Prevents the referenced instance from\n\t * being entirely serialized when serializing the referencing instance.\n\t *\n\t * @signature `ref.serialize`\n\t * @return {string} id the id of the referenced instance\n\t */\n\tRef.prototype.serialize = function() {\n\t\treturn this[idProp];\n\t};\n\tcanReflect_1_19_2_canReflect.assignSymbols(Ref.prototype, {\n\t\t\"can.serialize\": Ref.prototype.serialize,\n\t\t\"can.getName\": function(){\n\t\t\treturn canReflect_1_19_2_canReflect.getName(this.constructor)+\"{\"+this[idProp]+\"}\";\n\t\t}\n\t});\n\n\tvar baseEventSetup = Ref.prototype._eventSetup;\n\tRef.prototype._eventSetup = function() {\n\t\tRef.store.addReference(this.unobservedId(), this);\n\t\treturn baseEventSetup.apply(this, arguments);\n\t};\n\tvar baseTeardown = Ref.prototype._eventTeardown;\n\tRef.prototype._eventTeardown = function() {\n\t\tRef.store.deleteReference(this.unobservedId(), this);\n\t\treturn baseTeardown.apply(this, arguments);\n\t};\n\n\n\tstore.requests.on(\"end\", function() {\n\t\tfor (var id in Ref._requestInstances) {\n\t\t\tRef.store.deleteReference(id);\n\t\t}\n\t\tRef._requestInstances = {};\n\t});\n\n\t//!steal-remove-start\n\tObject.defineProperty(Ref, \"name\", {\n\t\tvalue: canReflect_1_19_2_canReflect.getName(connection.Map) + \"Ref\",\n\t\tconfigurable: true\n\t});\n\t//!steal-remove-end\n\n\treturn Ref;\n};\n\n\nvar ref = canConnect_4_0_6_canConnect.behavior(\"can/ref\", function(baseConnection) {\n\treturn {\n\t\t/**\n\t\t * @can-connect/can/ref/ref.init init\n\t\t * @parent can-connect/can/ref/ref.methods\n\t\t *\n\t\t * @signature `connection.init()`\n\t\t *\n\t\t * Initializes the base connection and then creates and sets [can-connect/can/ref/ref.Map.Ref].\n\t\t * Typically called by the `connect` helper after the connection behaviors have been assembled.\n\t\t *\n\t\t * @return {undefined} no return value\n\t\t **/\n\t\tinit: function() {\n\t\t\tbaseConnection.init.apply(this, arguments);\n\t\t\tthis.Map.Ref = makeRef(this);\n\t\t}\n\t};\n});\n\nvar $$1 = global_1().$;\n\ncanConnect_4_0_6_canConnect.superMap = function(options){\n\n\tvar behaviors = [\n\t\tconstructor_1,\n\t\tmap$3,\n\t\tref,\n\t\tstore,\n\t\tcallbacks,\n\t\tcombineRequests$1,\n\t\tparse$1,\n\t\turl,\n\t\trealTime,\n\t\tcallbacksOnce];\n\n\tif(typeof localStorage !== \"undefined\") {\n\t\tif(!options.cacheConnection) {\n\t\t\toptions.cacheConnection = canConnect_4_0_6_canConnect([localstorageCache],{\n\t\t\t\tname: options.name+\"Cache\",\n\t\t\t\tidProp: options.idProp,\n\t\t\t\tqueryLogic: options.queryLogic\n\t\t\t});\n\t\t}\n\t\tbehaviors.push(callbacksCache,fallThroughCache_1);\n\t}\n\t// Handles if jQuery isn't provided.\n\tif($$1 && $$1.ajax) {\n\t\toptions.ajax = $$1.ajax;\n\t}\n\treturn canConnect_4_0_6_canConnect(behaviors,options);\n};\n\nvar superMap = canConnect_4_0_6_canConnect.superMap;\n\nvar $$2 = global_1().$;\n\ncanConnect_4_0_6_canConnect.baseMap = function(options){\n\n\tvar behaviors = [\n\t\tconstructor_1,\n\t\tmap$3,\n\t\tref,\n\t\tstore,\n\t\tcallbacks,\n\t\tparse$1,\n\t\turl,\n\t\trealTime,\n\t\tcallbacksOnce\n\t];\n\n\t// Handles if jQuery isn't provided.\n\tif($$2 && $$2.ajax) {\n\t\toptions.ajax = $$2.ajax;\n\t}\n\n\treturn canConnect_4_0_6_canConnect(behaviors,options);\n};\n\nvar baseMap = canConnect_4_0_6_canConnect.baseMap;\n\ncanConnect_4_0_6_canConnect.cacheRequests = cacheRequests;\n\ncanConnect_4_0_6_canConnect.constructor = constructor_1;\ncanConnect_4_0_6_canConnect.constructorCallbacksOnce = callbacksOnce;\ncanConnect_4_0_6_canConnect.constructorStore = store;\ncanConnect_4_0_6_canConnect.dataCallbacks = callbacks;\ncanConnect_4_0_6_canConnect.dataCallbacksCache = callbacksCache;\ncanConnect_4_0_6_canConnect.dataCombineRequests = combineRequests$1;\ncanConnect_4_0_6_canConnect.dataLocalStorageCache = localstorageCache;\ncanConnect_4_0_6_canConnect.dataMemoryCache = memoryCache;\ncanConnect_4_0_6_canConnect.dataParse = parse$1;\ncanConnect_4_0_6_canConnect.dataUrl = url;\ncanConnect_4_0_6_canConnect.fallThroughCache = fallThroughCache_1;\ncanConnect_4_0_6_canConnect.realTime = realTime;\n\ncanConnect_4_0_6_canConnect.canMap = map$3;\n\ncanConnect_4_0_6_canConnect.superMap = superMap;\ncanConnect_4_0_6_canConnect.baseMap = baseMap;\n\nvar canConnect_4_0_6_all = canConnect_4_0_6_canConnect;\n\n// ## methodsToOverwrite\n// Method names on `history` that will be overwritten\n// during teardown these are reset to their original functions.\nvar methodsToOverwrite = [\"pushState\", \"replaceState\"],\n\t// This symbol is used in dispatchHandlers.\n\tdispatchSymbol$3 = canSymbol_1_7_0_canSymbol.for(\"can.dispatch\");\n\n// ## Helpers\n// The following are helper functions useful to `can-route-pushstate`'s main methods.\n\n// ### cleanRoot\n// Start of `location.pathname` is the root. \n// Returns the root minus the domain.\nfunction cleanRoot() {\n\tvar location = location_1(),\n\t\tdomain = location.protocol + \"//\" + location.host,\n\t\t// pulls root from route.urlData\n\t\troot = bindingProxy_1.call(\"root\"),\n\t\tindex = root.indexOf(domain);\n\n\tif (index === 0) {\n\t\treturn root.substr(domain.length);\n\t}\n\treturn root;\n}\n\n// ### getCurrentUrl\n// Gets the current url after the root.\n// `root` is defined in the PushstateObservable constructor.\nfunction getCurrentUrl() {\n\tvar root = cleanRoot(),\n\t\tlocation = location_1(),\n\t\tloc = (location.pathname + location.search),\n\t\tindex = loc.indexOf(root);\n\n\treturn loc.substr(index + root.length);\n}\n\n// ## PushstateObservable\nfunction PushstateObservable() {\n\t// Keys passed into `replaceStateOnce` will be stored in `replaceStateOnceKeys`.\n\tthis.replaceStateOnceKeys = [];\n\t// Keys passed into `replaceStateOn` will be stored in `replaceStateKeys`.\n\tthis.replaceStateKeys = [];\n\tthis.dispatchHandlers = this.dispatchHandlers.bind(this);\n\tthis.anchorClickHandler = function(event) {\n\t\tvar shouldCallPushState = PushstateObservable.prototype.shouldCallPushState.call(this, this, event);\n\t\tif (shouldCallPushState) {\n\t\t\tPushstateObservable.prototype.anchorClickHandler.call(this, this, event);\n\t\t}\n\t};\n\n\t// ### `keepHash`\n\t// Currently is neither a feature that's documented,\n\t// nor is it toggled. [Issue #133](https://github.com/canjs/can-route-pushstate/issues/133)\n\t// is the discourse on it's removal.\n\tthis.keepHash = true;\n}\n\nPushstateObservable.prototype = Object.create(canSimpleObservable_2_5_0_canSimpleObservable.prototype);\nPushstateObservable.constructor = PushstateObservable;\ncanReflect_1_19_2_canReflect.assign(PushstateObservable.prototype, {\n\n\t// ### root\n\t// Start of `location.pathname` is the root.\n\t// (Can be configured via `route.urlData.root`)\n\t// The default is `\"#!\"` set in can-route-hash.\n\troot: \"/\",\n\n\t// ### matchSlashes\n\t// The default is `false` set in can-route-hash.\n\t// Don't greedily match slashes in routing rules.\n\tmatchSlashes: false,\n\n\t// ### paramsMatcher\n\t// Matches things like:\n\t//  - ?foo=bar\n\t//  - ?foo=bar&framework=canjs\n\t//  - ?foo=&bar=\n\tparamsMatcher: /^\\?(?:[^=]+=[^&]*&)*[^=]+=[^&]*/,\n\n\t// ### querySeparator\n\t// Used in `can-route` for building regular expressions to match routes, or\n\t// return url substrings of routes.\n\tquerySeparator: \"?\",\n\n\t// ### dispatchHandlers\n\t// Updates `this._value` to the current url and \n\t// dispatches event handlers that are on the object.\n\t// `dispatchHandlers` is called if `pushState` or `replaceState`\n\t// are called, it is also an event handler on `'popstate'`.\n\tdispatchHandlers: function() {\n\t\tvar old = this._value;\n\t\tthis._value = getCurrentUrl();\n\n\t\tif (old !== this._value) {\n\t\t\t// PushstateObservable inherits from `SimpleObservable` which\n\t\t\t// is using the `can-event-queue/value/value` mixin, and is called\n\t\t\t// using the `can.dispatch` symbol.\n\t\t\tthis[dispatchSymbol$3](this._value, old);\n\t\t}\n\t},\n\n\t// ### shouldCallPushState\n\t// Checks if a route is matched, if one is, returns true\n\tshouldCallPushState: function(node, event) {\n\t\tif (!(event.isDefaultPrevented ? event.isDefaultPrevented() : event.defaultPrevented === true)) {\n\t\t\t// If href has some JavaScript in it, let it run.\n\t\t\tif (node.href === \"javascript://\") {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Do not pushstate if target is for blank window.\n\t\t\tif (node.target === \"_blank\") {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Do not pushstate if meta key was pressed, mimicking standard browser behavior.\n\t\t\tif (event.altKey || event.ctrlKey || event.metaKey || event.shiftKey) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// linksHost is a Fix for IE showing blank host, but blank host means current host.\n\t\t\tvar linksHost = node.host || window.location.host;\n\n\t\t\t// If link is within the same domain and descendant of `root`.\n\t\t\tif (window.location.host === linksHost) {\n\t\t\t\tvar root = cleanRoot(),\n\t\t\t\t\tpathname,\n\t\t\t\t\thref,\n\t\t\t\t\tnodePathWithSearch;\n\n\t\t\t\tif (node instanceof HTMLAnchorElement) {\n\t\t\t\t\tpathname = node.pathname;\n\t\t\t\t\thref = node.href;\n\t\t\t\t\tnodePathWithSearch = pathname + node.search;\n\t\t\t\t} else if (node.namespaceURI === \"http://www.w3.org/1999/xlink\") {\n\t\t\t\t\tpathname = href = node.getAttributeNS(\"http://www.w3.org/1999/xlink\", \"href\");\n\t\t\t\t\tnodePathWithSearch = href;\n\t\t\t\t}\n\n\t\t\t\t// If the link is within the `root`.\n\t\t\t\tif (pathname !== undefined && pathname.indexOf(root) === 0) {\n\t\t\t\t\tvar url = nodePathWithSearch.substr(root.length);\n\n\t\t\t\t\t// If a matching route exists.\n\t\t\t\t\tif (canRoute_5_0_2_canRoute.rule(url) !== undefined) {\n\t\t\t\t\t\t// Makes it possible to have a link with a hash.\n\t\t\t\t\t\t// Calling .pushState will dispatch events, causing\n\t\t\t\t\t\t// `can-route` to update its data, and then try to set back\n\t\t\t\t\t\t// the url without the hash.  We need to retain that.\n\t\t\t\t\t\tif (href.indexOf(\"#\") >= 0) {\n\t\t\t\t\t\t\tthis.keepHash = true;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// We do not want to call preventDefault() if the link is to the\n\t\t\t\t\t\t// same page and just a different hash; see can-route-pushstate#75.\n\t\t\t\t\t\tvar windowPathWithSearch = window.location.pathname + window.location.search;\n\t\t\t\t\t\tvar shouldCallPreventDefault = nodePathWithSearch !== windowPathWithSearch || node.hash === window.location.hash;\n\n\t\t\t\t\t\t// Test if you can preventDefault.\n\t\t\t\t\t\tif (shouldCallPreventDefault && event.preventDefault) {\n\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\t// ### anchorClickHandler\n\t// Handler function for `click` events.\n\tanchorClickHandler: function(node, event) {\n\t\tvar href = node.href ? node.href : node.getAttributeNS(\"http://www.w3.org/1999/xlink\", \"href\");\n\t\t// Update `window.location`.\n\t\twindow.history.pushState(null, null, href);\n\t},\n\n\t// ### onBound\n\t// Initalizes this._value.\n\t// Sets up event listeners to capture `click` events on `<a>` elements.\n\t// Overwrites the history api methods `.pushState` and `.replaceState`.\n\tonBound: function() {\n\t\t// if running in Node.js, don't setup.\n\t\tif (isNode()) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar document = document$1(),\n\t\t\twindow = global_1();\n\n\t\tthis._value = getCurrentUrl();\n\n\t\t// Intercept routable links.\n\t\tcanDomEvents_1_3_13_canDomEvents.addDelegateListener(document.documentElement, \"click\", \"a\", this.anchorClickHandler);\n\t\tvar originalMethods = this.originalMethods = {};\n\t\tvar dispatchHandlers = this.dispatchHandlers;\n\n\t\t// Rewrites original `pushState`/`replaceState` methods on `history`\n\t\t// and keeps pointer to original methods.\n\t\tcanReflect_1_19_2_canReflect.eachKey(methodsToOverwrite, function(method) {\n\t\t\tthis.originalMethods[method] = window.history[method];\n\t\t\twindow.history[method] = function(state, title, url) {\n\n\t\t\t\t// Avoid doubled history states (with pushState).\n\t\t\t\tvar absolute = url.indexOf(\"http\") === 0;\n\t\t\t\tvar location = location_1();\n\t\t\t\tvar searchHash = location.search + location.hash;\n\n\t\t\t\t// If url differs from current call original history method and update `route` state.\n\t\t\t\tif ((!absolute && url !== location.pathname + searchHash) ||\n\t\t\t\t\t(absolute && url !== location.href + searchHash)) {\n\t\t\t\t\toriginalMethods[method].apply(window.history, arguments);\n\t\t\t\t\tdispatchHandlers();\n\t\t\t\t}\n\t\t\t};\n\t\t}, this);\n\n\t\t// Bind dispatchHandlers to the `popstate` event, so they will fire\n\t\t// when `history.back()` or `history.forward()` methods are called.\n\t\tcanDomEvents_1_3_13_canDomEvents.addEventListener(window, \"popstate\", this.dispatchHandlers);\n\t},\n\n\t// ### onUnbound\n\t// removes the event listerns for capturing routable links.\n\t// Sets `.pushState` and `.replacState` to their original methods.\n\tonUnbound: function() {\n\t\t// If running in Node.js, don't teardown.\n\t\tif(isNode()) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar document = document$1(),\n\t\t\twindow = global_1();\n\n\t\tcanDomEvents_1_3_13_canDomEvents.removeDelegateListener(document.documentElement, \"click\", \"a\", this.anchorClickHandler);\n\n\t\t// Reset the changed `window.history` methods to their original values.\n\t\tcanReflect_1_19_2_canReflect.eachKey(methodsToOverwrite, function(method) {\n\t\t\twindow.history[method] = this.originalMethods[method];\n\t\t}, this);\n\n\t\tcanDomEvents_1_3_13_canDomEvents.removeEventListener(window, \"popstate\", this.dispatchHandlers);\n\t},\n\n\t// ### get\n\t// Allows `PushstateObservable` to be observable by can-observations,\n\t// and returns the current url.\n\tget: function get() {\n\t\tcanObservationRecorder_1_3_1_canObservationRecorder.add(this);\n\t\treturn getCurrentUrl();\n\t},\n\n\t// ### set\n\t// Calls either pushState or replaceState on the difference\n\t// in properties between `oldProps` and `newProps`.\n\tset: function(path) {\n\t\tvar newProps = canRoute_5_0_2_canRoute.deparam(path),\n\t\t\toldProps = canRoute_5_0_2_canRoute.deparam(getCurrentUrl()),\n\t\t\tmethod = \"pushState\",\n\t\t\tchanged = {};\n\n\t\t// Adds window.location.hash to path if it's not already in path.\n\t\tif (this.keepHash && path.indexOf(\"#\") === -1 && window.location.hash) {\n\t\t\tpath += window.location.hash;\n\t\t}\n\n\t\t// The old state and new state are diffed \n\t\t// to figure out which keys are changing.\n\t\tmap$2(oldProps, newProps)\n\t\t\t.forEach(function(patch) {\n\t\t\t\t// `patch.key` refers to the mutated property name on `newProps`.\n\t\t\t\treturn changed[patch.key] = true;\n\t\t\t});\n\n\t\t// If any of the changed properties are in `replaceStateKeys` or \n\t\t// `replaceStateOnceKeys` change the method to `'replaceState'`.\n\t\tif (this.replaceStateKeys.length) {\n\t\t\tthis.replaceStateKeys.forEach(function(replaceKey) {\n\t\t\t\tif (changed[replaceKey]) {\n\t\t\t\t\tmethod = \"replaceState\";\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\t\n\t\tif (this.replaceStateOnceKeys.length) {\n\t\t\tthis.replaceStateOnceKeys\n\t\t\t\t.forEach(function(replaceOnceKey, index, thisArray) {\n\t\t\t\t\tif (changed[replaceOnceKey]) {\n\t\t\t\t\t\tmethod = \"replaceState\";\n\t\t\t\t\t\t// Remove so we don't attempt to replace \n\t\t\t\t\t\t// the state on this key again.\n\t\t\t\t\t\tthisArray.splice(index, 1);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t}\n\t\twindow.history[method](null, null, bindingProxy_1.call(\"root\") + path);\n\t},\n\n\t// ### replaceStateOn\n\t// Adds given arguments to `this.replaceStateKeys`.\n\treplaceStateOn: function() {\n\t\tcanReflect_1_19_2_canReflect.addValues(this.replaceStateKeys, canReflect_1_19_2_canReflect.toArray(arguments));\n\t},\n\n\t// ### replaceStateOnce\n\t// Adds given arguments to `this.replaceStateOnceKeys`.\n\t// Keys in `this.replaceStateOnceKeys` will be removed\n\t// from the array the first time a changed route contains that key.\n\treplaceStateOnce: function() {\n\t\tcanReflect_1_19_2_canReflect.addValues(this.replaceStateOnceKeys, canReflect_1_19_2_canReflect.toArray(arguments));\n\t},\n\n\t// ### replaceStateOff\n\t// Removes given arguments from both `this.replaceStateKeys` and\n\t// `this.replaceOnceKeys`.\n\treplaceStateOff: function() {\n\t\tcanReflect_1_19_2_canReflect.removeValues(this.replaceStateKeys, canReflect_1_19_2_canReflect.toArray(arguments));\n\t\tcanReflect_1_19_2_canReflect.removeValues(this.replaceStateOnceKeys, canReflect_1_19_2_canReflect.toArray(arguments));\n\t}\n});\n\ncanReflect_1_19_2_canReflect.assignSymbols(PushstateObservable.prototype, {\n\t\"can.getValue\": PushstateObservable.prototype.get,\n\t\"can.setValue\": PushstateObservable.prototype.set,\n});\n\nvar canRoutePushstate_6_0_0_canRoutePushstate = PushstateObservable;\n\nfunction shouldCheckSet(patch, destVal, sourceVal) {\n    return patch.type === \"set\" && destVal && sourceVal &&\n        typeof destVal === \"object\" &&\n        typeof sourceVal === \"object\";\n}\n\nfunction makeIdentityFromMapSchema$1(typeSchema) {\n    if(typeSchema.identity && typeSchema.identity.length) {\n        return function identityCheck(a, b) {\n            var aId = canReflect_1_19_2_canReflect.getIdentity(a, typeSchema),\n                bId = canReflect_1_19_2_canReflect.getIdentity(b, typeSchema);\n            return aId === bId;\n        };\n    }\n}\n\nfunction makeDiffListIdentityComparison(oldList, newList, parentKey, nestedPatches) {\n    var listSchema = canReflect_1_19_2_canReflect.getSchema(oldList),\n        typeSchema,\n        identityCheckFromSchema,\n        oldListLength = canReflect_1_19_2_canReflect.size( oldList );\n    if(listSchema != null) {\n        if(listSchema.values != null) {\n            typeSchema = canReflect_1_19_2_canReflect.getSchema(listSchema.values);\n        }\n    }\n    if(typeSchema == null && oldListLength > 0) {\n        typeSchema = canReflect_1_19_2_canReflect.getSchema( canReflect_1_19_2_canReflect.getKeyValue(oldList, 0) );\n    }\n    if(typeSchema) {\n        identityCheckFromSchema = makeIdentityFromMapSchema$1(typeSchema);\n    }\n\n\n    return function(a, b, aIndex) {\n        if(canReflect_1_19_2_canReflect.isPrimitive(a)) {\n            return a === b;\n        }\n        if(canReflect_1_19_2_canReflect.isPrimitive(b)) {\n            return a === b;\n        }\n        if(identityCheckFromSchema) {\n            if(identityCheckFromSchema(a, b)) {\n                var patches = diffDeep(a, b, parentKey ? parentKey+\".\"+aIndex : \"\"+aIndex);\n                nestedPatches.push.apply(nestedPatches, patches);\n                return true;\n            }\n        }\n        return diffDeep(a, b).length === 0;\n    };\n}\n\nfunction diffDeep(dest, source, parentKey){\n\n    if (dest && canReflect_1_19_2_canReflect.isMoreListLikeThanMapLike(dest)) {\n        var nestedPatches = [],\n            diffingIdentity = makeDiffListIdentityComparison(dest, source, parentKey, nestedPatches);\n\n        var primaryPatches = list(dest, source, diffingIdentity).map(function(patch){\n            if(parentKey) {\n                patch.key = parentKey;\n            }\n            return patch;\n        });\n\n\t\treturn nestedPatches.concat(primaryPatches);\n\t} else {\n        parentKey = parentKey ? parentKey+\".\": \"\";\n\t\tvar patches = map$2(dest, source);\n        // any sets we are going to recurse within\n        var finalPatches = [];\n        patches.forEach(function(patch){\n            var key = patch.key;\n\n            patch.key = parentKey + patch.key;\n            var destVal = dest && canReflect_1_19_2_canReflect.getKeyValue(dest, key),\n                sourceVal = source && canReflect_1_19_2_canReflect.getKeyValue(source, key);\n            if(shouldCheckSet(patch, destVal, sourceVal)) {\n\n                var deepPatches = diffDeep(destVal, sourceVal, patch.key);\n                finalPatches.push.apply(finalPatches, deepPatches);\n            } else {\n                finalPatches.push(patch);\n            }\n        });\n        return finalPatches;\n\t}\n}\n\nvar deep = diffDeep;\n\nvar diff = {\n    deep: deep,\n    list: list,\n    map: map$2,\n    mergeDeep: mergeDeep,\n    Patcher: patcher\n};\n\nvar canDiff_1_5_1_canDiff = canNamespace_1_0_0_canNamespace.diff = diff;\n\n/**\n * @module {function} can-make-map can-make-map\n * @parent can-js-utilities\n * @collection can-infrastructure\n * @package ./package.json\n * @description Convert a comma-separated string into a plain JavaScript object.\n * @signature `makeMap( string )`\n * @param  {String} string A comma separated list of values\n * @return {Object} A JavaScript object with the same keys as the passed-in comma-separated values\n *\n * makeMap takes a comma-separated string (can-list, NodeList, etc.) and converts it to a JavaScript object\n */\nfunction makeMap$2(str) {\n\tvar obj = {}, items = str.split(\",\");\n\titems.forEach(function(name){\n\t\tobj[name] = true;\n\t});\n\treturn obj;\n}\n\nvar canMakeMap_1_2_2_canMakeMap = makeMap$2;\n\n/**\n * @function can-dom-events/helpers/add-jquery-events ./helpers/add-jquery-events\n * @parent can-dom-events.helpers\n * @description Add jQuery’s special events to the global registry.\n * @signature `addJQueryEvents(jQuery)`\n * @param {jQuery} jQuery Your instance of jQuery.\n * @return {function} The callback to remove the jQuery events from the registry.\n *\n * @body\n *\n * ```js\n * const $ = require(\"jquery\");\n * const addJQueryEvents = require(\"can-dom-events/helpers/add-jquery-events\");\n * const domEvents = require(\"can-dom-events\");\n * // Require another module that registers itself with jQuery.event.special,\n * // e.g. jQuery++ registers events such as draginit, dragmove, etc.\n *\n * const removeJQueryEvents = addJQueryEvents($);\n *\n * // Listen for an event in code; this might also be accomplished through a\n * // can-stache-binding such as <li on:draginit=\"listener()\">\n * domEvents.addEventListener(listItemElement, \"draginit\", function listener() {\n *   // Will fire after a jQuery draginit event has been fired\n * });\n *\n * // Some other code that fires a jQuery event; this will probably be in the\n * // package you’re using…\n * $(listItemElement).trigger(\"draginit\");\n *\n * // Later in your code… ready to stop listening for those jQuery events? Call\n * // the function returned by addJQueryEvents()\n * removeJQueryEvents();\n * ```\n */\nvar addJqueryEvents = canNamespace_1_0_0_canNamespace.addJQueryEvents = function addJQueryEvents(jQuery) {\n\tvar jQueryEvents = jQuery.event.special;\n\tvar removeEvents = [];\n\n\tfor (var eventType in jQueryEvents) {\n\t\tif (!canDomEvents_1_3_13_canDomEvents._eventRegistry.has(eventType)) {\n\t\t\tvar eventDefinition = {\n\t\t\t\tdefaultEventType: eventType,\n\t\t\t\taddEventListener: function (target, eventType, handler) {\n\t\t\t\t\t$(target).on(eventType, handler);\n\t\t\t\t},\n\t\t\t\tremoveEventListener: function (target, eventType, handler) {\n\t\t\t\t\t$(target).off(eventType, handler);\n\t\t\t\t}\n\t\t\t};\n\t\t\tvar removeEvent = canDomEvents_1_3_13_canDomEvents.addEvent(eventDefinition);\n\t\t\tremoveEvents.push(removeEvent);\n\t\t}\n\t}\n\n\treturn function removeJQueryEvents() {\n\t\tremoveEvents.forEach(function(removeEvent) {\n\t\t\tremoveEvent();\n\t\t});\n\t};\n};\n\n/**\n * @module {{}} can-dom-mutate/events/events\n * @parent can-dom-mutate/modules\n * \n * @description This adds attributes, inserted and removed attributes to the DOM.\n * @signature `domMutateEvents`\n * \n * `can-dom-mutate/events/events` Exports an object that allows to listen ```attributes```, ```inserted``` and ```removed``` events \n *  in the DOM using [MutationObserver](https://developer.mozilla.org/en-US/docs/Web/API/MutationObserver)\n * \n * ```js\n * import domMutateEvents from \"can-dom-mutate/events/events\";\n * import domEvents from \"can-dom-events\";\n *\n * domMutateEvents //->\n * {\n *   attributes: {defaultEventType, addEventListener(), removeEventListener()},\n *   inserted: {defaultEventType, addEventListener(), removeEventListener},\n *   removed: {defaultEventType, addEventListener(), removeEventListener()},\n * }\n *\n * // listen to inserted change within an element:\n * // add inserted event to registry\n * domEvents.addEvent(domMutateEvents.inserted);\n * domEvent.addEventListener(document.querySelector(\"#foo\"), \"inserted\", handler () => {})\n * ```\n */\n\nfunction makeMutationEvent (defaultEventType, subscription, bubbles) {\n\tvar elementSubscriptions = new Map();\n\treturn {\n\t\t_subscriptions: elementSubscriptions,\n\t\tdefaultEventType: defaultEventType,\n\t\taddEventListener: function (target, eventType, handler) {\n\t\t\tvar dispatch = this.dispatch;\n\t\t\tvar data = elementSubscriptions.get(target);\n\t\t\tif (!data) {\n\t\t\t\tdata = {\n\t\t\t\t\tremoveListener: null,\n\t\t\t\t\tlisteners: new Set()\n\t\t\t\t};\n\t\t\t\telementSubscriptions.set(target, data);\n\t\t\t}\n\n\t\t\tif (data.listeners.size === 0) {\n\t\t\t\tdata.removeListener = subscription(target, function (mutation) {\n\t\t\t\t\tvar eventData = {type: eventType};\n\t\t\t\t\tfor (var key in mutation) {\n\t\t\t\t\t\teventData[key] = mutation[key];\n\t\t\t\t\t}\n\n\t\t\t\t\tdispatch(target, eventData, bubbles !== false);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tdata.listeners.add(handler);\n\t\t\ttarget.addEventListener(eventType, handler);\n\t\t},\n\t\tremoveEventListener: function (target, eventType, handler) {\n\t\t\ttarget.removeEventListener(eventType, handler);\n\t\t\tvar data = elementSubscriptions.get(target);\n\t\t\tif (data) {\n\t\t\t\tdata.listeners['delete'](handler);\n\t\t\t\tif (data.listeners.size === 0) {\n\t\t\t\t\tdata.removeListener();\n\t\t\t\t\telementSubscriptions['delete'](target);\n\t\t\t\t}\n\t\t\t}\t\t\n\t\t}\n\t};\n}\n\nvar events$1 = canNamespace_1_0_0_canNamespace.domMutateDomEvents = {\n\tattributes: makeMutationEvent('attributes', canDomMutate_2_0_9_canDomMutate.onNodeAttributeChange),\n\tinserted: makeMutationEvent('inserted', canDomMutate_2_0_9_canDomMutate.onNodeConnected, false),\n\tremoved: makeMutationEvent('removed', canDomMutate_2_0_9_canDomMutate.onNodeDisconnected)\n};\n\n// backwards compatibility\nvar canDomMutate_2_0_9_domEvents = canNamespace_1_0_0_canNamespace.domMutateDomEvents = events$1;\n\nvar warned = false;\n\nvar proxyNamespace = function proxyNamespace(namespace) {\n\treturn new Proxy(namespace, {\n\t\tget: function get(target, name) {\n\t\t\tif (!warned) {\n\t\t\t\tconsole.warn(\"Warning: use of 'can' global should be for debugging purposes only.\");\n\t\t\t\twarned = true;\n\t\t\t}\n\t\t\treturn target[name];\n\t\t}\n\t});\n};\n\nvar onValueSymbol$5 = canSymbol_1_7_0_canSymbol.for(\"can.onValue\");\nvar offValueSymbol$3 = canSymbol_1_7_0_canSymbol.for(\"can.offValue\");\nvar onKeyValueSymbol$7 = canSymbol_1_7_0_canSymbol.for(\"can.onKeyValue\");\nvar offKeyValueSymbol$5 = canSymbol_1_7_0_canSymbol.for(\"can.offKeyValue\");\n\nvar noop$3 = function noop() {};\n\nfunction isFunction$2(value) {\n\treturn typeof value === \"function\";\n}\n\nfunction withKey(obj, key, fn) {\n\tvar result;\n\n\tif (isFunction$2(obj[onKeyValueSymbol$7])) {\n\t\tcanReflect_1_19_2_canReflect.onKeyValue(obj, key, noop$3);\n\t}\n\n\tresult = fn(obj, key);\n\n\tif (isFunction$2(obj[offKeyValueSymbol$5])) {\n\t\tcanReflect_1_19_2_canReflect.offKeyValue(obj, key, noop$3);\n\t}\n\n\treturn result;\n}\n\nfunction withoutKey(obj, fn) {\n\tvar result;\n\n\tif (isFunction$2(obj[onValueSymbol$5])) {\n\t\tcanReflect_1_19_2_canReflect.onValue(obj, noop$3);\n\t}\n\n\tresult = fn(obj);\n\n\tif (isFunction$2(obj[offValueSymbol$3])) {\n\t\tcanReflect_1_19_2_canReflect.offValue(obj, noop$3);\n\t}\n\n\treturn result;\n}\n\n// Takes a function with signature `fn(obj, [key])`\n// Makes sure that the argument is bound before calling \n// the function and unbinds it after the call is done.\nvar temporarilyBind$1 = function temporarilyBind(fn) {\n\treturn function(obj, key) {\n\t\tvar gotKey = arguments.length === 2;\n\t\treturn gotKey ? withKey(obj, key, fn) : withoutKey(obj, fn);\n\t};\n};\n\nfunction Graph() {\n\tthis.nodes = [];\n\tthis.arrows = new Map();\n\tthis.arrowsMeta = new Map();\n}\n\n// Adds the node, but it does not check if the node exists, callers will have\n// to check that through [findNode]\nGraph.prototype.addNode = function addNode(node) {\n\tthis.nodes.push(node);\n\tthis.arrows.set(node, new Set());\n};\n\n// Adds an arrow from head to tail with optional metadata\n// The method does not check whether head and tail are already\n// nodes in the graph, this should be done by the caller.\nGraph.prototype.addArrow = function addArrow(head, tail, meta) {\n\tvar graph = this;\n\n\tgraph.arrows.get(head).add(tail);\n\n\t// optional\n\tif (meta) {\n\t\taddArrowMeta(graph, head, tail, meta);\n\t}\n};\n\n// Tests whether there is an arrow from head to tail\nGraph.prototype.hasArrow = function hasArrow(head, tail) {\n\treturn this.getNeighbors(head).has(tail);\n};\n\n// Returns the metadata associated to the head -> tail arrow\nGraph.prototype.getArrowMeta = function getArrowMeta(head, tail) {\n\treturn this.arrowsMeta.get(head) && this.arrowsMeta.get(head).get(tail);\n};\n\n// Sets metadata about the arrow from head to tail\n// Merges the passed object into existing metadata\nGraph.prototype.setArrowMeta = function setArrowMeta(head, tail, meta) {\n\taddArrowMeta(this, head, tail, meta);\n};\n\n// Returns a Set of all nodes 'y' such that there is an arrow\n// from the node 'x' to the node 'y'.\nGraph.prototype.getNeighbors = function getNeighbors(node) {\n\treturn this.arrows.get(node);\n};\n\n// Returns the first node that satisfies the provided testing function.\n// The Graph is traversed using depth first search\nGraph.prototype.findNode = function findNode(cb) {\n\tvar found = null;\n\tvar graph = this;\n\tvar i, node;\n\n\tfor (i=0; i<graph.nodes.length; i++) {\n\t\tnode = graph.nodes[i];\n\t\tif (cb(node)) {\n\t\t\tfound = node;\n\t\t\tbreak;\n\t\t}\n\t}\n\n\treturn found;\n};\n\nGraph.prototype.bfs = function bfs(visit) {\n\tvar graph = this;\n\n\tvar node = graph.nodes[0];\n\tvar queue = [node];\n\tvar visited = new Map();\n\tvisited.set(node, true);\n\n\twhile (queue.length) {\n\t\tnode = queue.shift();\n\n\t\tvisit(node);\n\n\t\tgraph.arrows.get(node).forEach(function(adj) {\n\t\t\tif (!visited.has(adj)) {\n\t\t\t\tqueue.push(adj);\n\t\t\t\tvisited.set(adj, true);\n\t\t\t}\n\t\t});\n\t}\n};\n\nGraph.prototype.dfs = function dfs(visit) {\n\tvar graph = this;\n\n\tvar node = graph.nodes[0];\n\tvar stack = [node];\n\tvar visited = new Map();\n\n\twhile (stack.length) {\n\t\tnode = stack.pop();\n\n\t\tvisit(node);\n\n\t\tif (!visited.has(node)) {\n\t\t\tvisited.set(node, true);\n\t\t\tgraph.arrows.get(node).forEach(function(adj) {\n\t\t\t\tstack.push(adj);\n\t\t\t});\n\t\t}\n\t}\n};\n\n// Returns a new graph where the arrows point to the opposite direction, that is:\n// For each arrow (u, v) in [this], there will be a (v, u) in the returned graph\n// This is also called Transpose or Converse a graph\nGraph.prototype.reverse = function reverse() {\n\tvar graph = this;\n\tvar reversed = new Graph();\n\n\t// copy over the nodes\n\tgraph.nodes.forEach(reversed.addNode.bind(reversed));\n\n\tgraph.nodes.forEach(function(node) {\n\t\tgraph.getNeighbors(node).forEach(function(adj) {\n\t\t\t// add the arrow in the opposite direction, copy over metadata\n\t\t\tvar meta = graph.getArrowMeta(node, adj);\n\t\t\treversed.addArrow(adj, node, meta);\n\t\t});\n\t});\n\n\treturn reversed;\n};\n\n// Helpers\nfunction addArrowMeta(graph, head, tail, meta) {\n\tvar entry = graph.arrowsMeta.get(head);\n\n\tif (entry) {\n\t\tvar arrowMeta = entry.get(tail);\n\t\tif (!arrowMeta) {\n\t\t\tarrowMeta = {};\n\t\t}\n\t\tentry.set(tail, canAssign_1_3_3_canAssign(arrowMeta, meta));\n\t} else {\n\t\tentry = new Map();\n\t\tentry.set(tail, meta);\n\t\tgraph.arrowsMeta.set(head, entry);\n\t}\n}\n\nvar graph = Graph;\n\nvar makeNode = function makeNode(obj, key) {\n\tvar gotKey = arguments.length === 2;\n\n\tvar node = {\n\t\tobj: obj,\n\t\tname: canReflect_1_19_2_canReflect.getName(obj),\n\t\tvalue: gotKey ? canReflect_1_19_2_canReflect.getKeyValue(obj, key) : canReflect_1_19_2_canReflect.getValue(obj)\n\t};\n\n\tif (gotKey) {\n\t\tnode.key = key;\n\t}\n\n\treturn node;\n};\n\n// Returns a directed graph of the dependencies of obj (key is optional)\n//\n// Signature:\n//\tgetDirectedGraph(obj)\n//\tgetDirectedGraph(obj, key)\nvar getGraph = function getGraph(obj, key) {\n\tvar order = 0;\n\tvar graph$$1 = new graph();\n\tvar gotKey = arguments.length === 2;\n\n\tvar addArrow = function addArrow(direction, parent, child, meta) {\n\t\tswitch (direction) {\n\t\t\tcase \"whatIChange\":\n\t\t\t\tgraph$$1.addArrow(parent, child, meta); break;\n\t\t\tcase \"whatChangesMe\":\n\t\t\t\tgraph$$1.addArrow(child, parent, meta); break;\n\t\t\tdefault:\n\t\t\t\tthrow new Error(\"Unknown direction value: \", meta.direction);\n\t\t}\n\t};\n\n\t// keyDependencies :: Map<obj, Set<key>>\n\tvar visitKeyDependencies = function visitKeyDependencies(source, meta, cb) {\n\t\tcanReflect_1_19_2_canReflect.eachKey(source.keyDependencies || {}, function(keys, obj) {\n\t\t\tcanReflect_1_19_2_canReflect.each(keys, function(key) {\n\t\t\t\tcb(obj, meta, key);\n\t\t\t});\n\t\t});\n\t};\n\n\t// valueDependencies :: Set<obj>\n\tvar visitValueDependencies = function visitValueDependencies(source, meta, cb) {\n\t\tcanReflect_1_19_2_canReflect.eachIndex(source.valueDependencies || [], function(obj) {\n\t\t\tcb(obj, meta);\n\t\t});\n\t};\n\n\tvar visit = function visit(obj, meta, key) {\n\t\tvar gotKey = arguments.length === 3;\n\n\t\tvar node = graph$$1.findNode(function(node) {\n\t\t\treturn gotKey ?\n\t\t\t\tnode.obj === obj && node.key === key :\n\t\t\t\tnode.obj === obj;\n\t\t});\n\n\t\t// if there is a node already in the graph, add the arrow and prevent\n\t\t// infinite calls to `visit` by returning early\n\t\tif (node) {\n\t\t\tif (meta.parent) {\n\t\t\t\taddArrow(meta.direction, meta.parent, node, {\n\t\t\t\t\tkind: meta.kind,\n\t\t\t\t\tdirection: meta.direction\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn graph$$1;\n\t\t}\n\n\t\t// create and add a node to the graph\n\t\torder += 1;\n\t\tnode = gotKey ? makeNode(obj, key) : makeNode(obj);\n\t\tnode.order = order;\n\t\tgraph$$1.addNode(node);\n\n\t\t// if there is a known parent node, add the arrow in the given direction\n\t\tif (meta.parent) {\n\t\t\taddArrow(meta.direction, meta.parent, node, {\n\t\t\t\tkind: meta.kind,\n\t\t\t\tdirection: meta.direction\n\t\t\t});\n\t\t}\n\n\t\t// get the dependencies of the new node and recursively visit those\n\t\tvar nextMeta;\n\t\tvar data = gotKey ?\n\t\t\tcanReflectDependencies_1_1_2_canReflectDependencies.getDependencyDataOf(obj, key) :\n\t\t\tcanReflectDependencies_1_1_2_canReflectDependencies.getDependencyDataOf(obj);\n\n\t\tif (data && data.whatIChange) {\n\t\t\tnextMeta = { direction: \"whatIChange\", parent: node };\n\n\t\t\t// kind :: derive | mutate\n\t\t\tcanReflect_1_19_2_canReflect.eachKey(data.whatIChange, function(dependencyRecord, kind) {\n\t\t\t\tnextMeta.kind = kind;\n\t\t\t\tvisitKeyDependencies(dependencyRecord, nextMeta, visit);\n\t\t\t\tvisitValueDependencies(dependencyRecord, nextMeta, visit);\n\t\t\t});\n\t\t}\n\n\t\tif (data && data.whatChangesMe) {\n\t\t\tnextMeta = { direction: \"whatChangesMe\", parent: node };\n\n\t\t\t// kind :: derive | mutate\n\t\t\tcanReflect_1_19_2_canReflect.eachKey(data.whatChangesMe, function(dependencyRecord, kind) {\n\t\t\t\tnextMeta.kind = kind;\n\t\t\t\tvisitKeyDependencies(dependencyRecord, nextMeta, visit);\n\t\t\t\tvisitValueDependencies(dependencyRecord, nextMeta, visit);\n\t\t\t});\n\t\t}\n\n\t\treturn graph$$1;\n\t};\n\n\treturn gotKey ? visit(obj, {}, key) : visit(obj, {});\n};\n\n// Converts the graph into a data structure that vis.js requires to draw the graph\nvar formatGraph = function formatGraph(graph) {\n\t// { [node]: Number }\n\tvar nodeIdMap = new Map();\n\tgraph.nodes.forEach(function(node, index) {\n\t\tnodeIdMap.set(node, index + 1);\n\t});\n\n\t// collects nodes in the shape of { id: Number, label: String }\n\tvar nodesDataSet = graph.nodes.map(function(node) {\n\t\treturn {\n\t\t\tshape: \"box\",\n\t\t\tid: nodeIdMap.get(node),\n\t\t\tlabel:\n\t\t\t\tcanReflect_1_19_2_canReflect.getName(node.obj) +\n\t\t\t\t(node.key ? \".\" + node.key : \"\")\n\t\t};\n\t});\n\n\tvar getArrowData = function getArrowData(meta) {\n\t\tvar regular = { arrows: \"to\" };\n\t\tvar withDashes = { arrows: \"to\", dashes: true };\n\n\t\tvar map = {\n\t\t\tderive: regular,\n\t\t\tmutate: withDashes\n\t\t};\n\n\t\treturn map[meta.kind];\n\t};\n\n\t// collect edges in the shape of { from: Id, to: Id }\n\tvar visited = new Map();\n\tvar arrowsDataSet = [];\n\tgraph.nodes.forEach(function(node) {\n\t\tvar visit = function(node) {\n\t\t\tif (!visited.has(node)) {\n\t\t\t\tvisited.set(node, true);\n\t\t\t\tvar arrows = graph.arrows.get(node);\n\t\t\t\tvar headId = nodeIdMap.get(node);\n\n\t\t\t\tarrows.forEach(function(neighbor) {\n\t\t\t\t\tvar tailId = nodeIdMap.get(neighbor);\n\t\t\t\t\tvar meta = graph.arrowsMeta.get(node).get(neighbor);\n\n\t\t\t\t\tarrowsDataSet.push(\n\t\t\t\t\t\tcanAssign_1_3_3_canAssign(\n\t\t\t\t\t\t\t{ from: headId, to: tailId },\n\t\t\t\t\t\t\tgetArrowData(meta)\n\t\t\t\t\t\t)\n\t\t\t\t\t);\n\n\t\t\t\t\tvisit(neighbor);\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\n\t\tvisit(node);\n\t});\n\t\n\treturn {\n\t\tnodes: nodesDataSet,\n\t\tedges: arrowsDataSet\n\t};\n};\n\nvar quoteString$1 = function quoteString(x) {\n\treturn typeof x === \"string\" ? JSON.stringify(x) : x;\n};\n\nvar logData = function log(data) {\n\tvar node = data.node;\n\tvar nameParts = [node.name, \"key\" in node ? \".\" + node.key : \"\"];\n\n\tconsole.group(nameParts.join(\"\"));\n\tconsole.log(\"value  \", quoteString$1(node.value));\n\tconsole.log(\"object \", node.obj);\n\n\tif (data.derive.length) {\n\t\tconsole.group(\"DERIVED FROM\");\n\t\tcanReflect_1_19_2_canReflect.eachIndex(data.derive, log);\n\t\tconsole.groupEnd();\n\t}\n\n\tif (data.mutations.length) {\n\t\tconsole.group(\"MUTATED BY\");\n\t\tcanReflect_1_19_2_canReflect.eachIndex(data.mutations, log);\n\t\tconsole.groupEnd();\n\t}\n\n\tif (data.twoWay.length) {\n\t\tconsole.group(\"TWO WAY\");\n\t\tcanReflect_1_19_2_canReflect.eachIndex(data.twoWay, log);\n\t\tconsole.groupEnd();\n\t}\n\n\tconsole.groupEnd();\n};\n\n// Returns a new graph with all the arrows not involved in a circuit\nvar labelCycles = function labelCycles(graph$$1) {\n\tvar visited = new Map();\n\tvar result = new graph();\n\n\t// copy over all nodes\n\tgraph$$1.nodes.forEach(function(node) {\n\t\tresult.addNode(node);\n\t});\n\n\tvar visit = function visit(node) {\n\t\tvisited.set(node, true);\n\n\t\tgraph$$1.getNeighbors(node).forEach(function(adj) {\n\t\t\t// back arrow found\n\t\t\tif (visited.has(adj)) {\n\t\t\t\t// if isTwoWay is false it means the cycle involves more than 2 nodes,\n\t\t\t\t// e.g: A -> B -> C -> A\n\t\t\t\t// what to do in these cases? (currently ignoring these)\n\t\t\t\tvar isTwoWay = graph$$1.hasArrow(node, adj);\n\n\t\t\t\tif (isTwoWay) {\n\t\t\t\t\tresult.addArrow(adj, node, { kind: \"twoWay\" });\n\t\t\t\t}\n\t\t\t// copy over arrows not involved in a cycle\n\t\t\t} else {\n\t\t\t\tresult.addArrow(node, adj, graph$$1.getArrowMeta(node, adj));\n\t\t\t\tvisit(adj);\n\t\t\t}\n\t\t});\n\t};\n\n\tvisit(graph$$1.nodes[0]);\n\treturn result;\n};\n\nvar isDisconnected = function isDisconnected(data) {\n\treturn (\n\t\t!data.derive.length &&\n\t\t!data.mutations.length &&\n\t\t!data.twoWay.length\n\t);\n};\n\n// Returns a deeply nested object from the graph\nvar getData = function getDebugData(inputGraph, direction) {\n\tvar visited = new Map();\n\n\tvar graph = labelCycles(\n\t\tdirection === \"whatChangesMe\" ? inputGraph.reverse() : inputGraph\n\t);\n\n\tvar visit = function visit(node) {\n\t\tvar data = { node: node, derive: [], mutations: [], twoWay: [] };\n\n\t\tvisited.set(node, true);\n\n\t\tgraph.getNeighbors(node).forEach(function(adj) {\n\t\t\tvar meta = graph.getArrowMeta(node, adj);\n\n\t\t\tif (!visited.has(adj)) {\n\t\t\t\tswitch (meta.kind) {\n\t\t\t\t\tcase \"twoWay\":\n\t\t\t\t\t\tdata.twoWay.push(visit(adj));\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"derive\":\n\t\t\t\t\t\tdata.derive.push(visit(adj));\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"mutate\":\n\t\t\t\t\t\tdata.mutations.push(visit(adj));\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tthrow new Error(\"Unknow meta.kind value: \", meta.kind);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn data;\n\t};\n\n\t// discard data if there are no arrows registered, this happens when\n\t// [direction] is passed in and no arrow metadada matches its value\n\tvar result = visit(graph.nodes[0]);\n\treturn isDisconnected(result) ? null : result;\n};\n\n// key :: string | number | null | undefined\nvar whatIChange = function logWhatIChange(obj, key) {\n\tvar gotKey = arguments.length === 2;\n\n\tvar data = getData(\n\t\tgotKey ? getGraph(obj, key) : getGraph(obj),\n\t\t\"whatIChange\"\n\t);\n\n\tif (data) {\n\t\tlogData(data);\n\t}\n};\n\n// key :: string | number | null | undefined\nvar whatChangesMe = function logWhatChangesMe(obj, key) {\n\tvar gotKey = arguments.length === 2;\n\n\tvar data = getData(\n\t\tgotKey ? getGraph(obj, key) : getGraph(obj),\n\t\t\"whatChangesMe\"\n\t);\n\n\tif (data) {\n\t\tlogData(data);\n\t}\n};\n\nvar getWhatIChange$1 = function getWhatChangesMe(obj, key) {\n\tvar gotKey = arguments.length === 2;\n\n\treturn getData(\n\t\tgotKey ? getGraph(obj, key) : getGraph(obj),\n\t\t\"whatIChange\"\n\t);\n};\n\nvar getWhatChangesMe$1 = function getWhatChangesMe(obj, key) {\n\tvar gotKey = arguments.length === 2;\n\n\treturn getData(\n\t\tgotKey ? getGraph(obj, key) : getGraph(obj),\n\t\t\"whatChangesMe\"\n\t);\n};\n\nvar global$5 = canGlobals_1_2_2_canGlobals.getKeyValue(\"global\");\n\nvar devtoolsRegistrationComplete = false;\nfunction registerWithDevtools() {\n\tif (devtoolsRegistrationComplete) {\n\t\treturn;\n\t}\n\n\tvar devtoolsGlobalName =  \"__CANJS_DEVTOOLS__\";\n\tvar devtoolsCanModules = {\n\t\tObservation: canObservation_4_2_0_canObservation,\n\t\tReflect: canReflect_1_19_2_canReflect,\n\t\tSymbol: canSymbol_1_7_0_canSymbol,\n\t\tformatGraph: canNamespace_1_0_0_canNamespace.debug.formatGraph,\n\t\tgetGraph: canNamespace_1_0_0_canNamespace.debug.getGraph,\n\t\tmergeDeep: mergeDeep,\n\t\tqueues: canQueues_1_3_2_canQueues\n\t};\n\n\tif (global$5[devtoolsGlobalName]) {\n\t\tglobal$5[devtoolsGlobalName].register(devtoolsCanModules);\n\t} else {\n\t\tObject.defineProperty(global$5, devtoolsGlobalName, {\n\t\t\tset: function(devtoolsGlobal) {\n\t\t\t\tObject.defineProperty(global$5, devtoolsGlobalName, {\n\t\t\t\t\tvalue: devtoolsGlobal\n\t\t\t\t});\n\n\t\t\t\tdevtoolsGlobal.register(devtoolsCanModules);\n\t\t\t},\n\t\t\tconfigurable: true\n\t\t});\n\t}\n\n\tdevtoolsRegistrationComplete = true;\n}\n\nvar canDebug_2_0_7_canDebug = function() {\n\tcanNamespace_1_0_0_canNamespace.debug = {\n\t\tformatGraph: temporarilyBind$1(formatGraph),\n\t\tgetGraph: temporarilyBind$1(getGraph),\n\t\tgetWhatIChange: temporarilyBind$1(getWhatIChange$1),\n\t\tgetWhatChangesMe: temporarilyBind$1(getWhatChangesMe$1),\n\t\tlogWhatIChange: temporarilyBind$1(whatIChange),\n\t\tlogWhatChangesMe: temporarilyBind$1(whatChangesMe)\n\t};\n\n\tregisterWithDevtools();\n\n\tglobal$5.can = typeof Proxy !== \"undefined\" ? proxyNamespace(canNamespace_1_0_0_canNamespace) : canNamespace_1_0_0_canNamespace;\n\n\treturn canNamespace_1_0_0_canNamespace.debug;\n};\n\n//!steal-remove-start\nif (process.env.NODE_ENV !== 'production') {\n\tcanDebug_2_0_7_canDebug();\n}\n//!steal-remove-end\n\n// __ Observables __\n//!steal-remove-end\n\nexport default canNamespace_1_0_0_canNamespace;\nexport { canValue_1_1_2_canValue as value, canObservation_4_2_0_canObservation as Observation, canObservationRecorder_1_3_1_canObservationRecorder as ObservationRecorder, canSimpleMap_4_3_3_canSimpleMap as SimpleMap, canObservableObject as ObservableObject, canObservableArray as ObservableArray, canObservableBindings_1_3_3_fromAttribute as fromAttribute, canBind_1_5_1_canBind as bind, map$1 as mapEventBindings, value as valueEventBindings, canSimpleObservable_2_5_0_canSimpleObservable as SimpleObservable, async as AsyncObservable, key as keyObservable, resolver as ResolverObservable, settable as SettableObservable, setter as SetterObservable, canStacheElement as StacheElement, canStache_5_1_1_canStache as stache, canStacheBindings_5_0_5_canStacheBindings as stacheBindings, canStacheRouteHelpers_2_0_0_canStacheRouteHelpers as stacheRouteHelpers, canViewCallbacks_5_0_0_canViewCallbacks as viewCallbacks, canViewLive_5_0_5_canViewLive as viewLive, canViewModel_4_0_3_canViewModel as viewModel, canViewParser_4_1_3_canViewParser as viewParser, canViewScope_4_13_7_canViewScope as Scope, canViewTarget_5_0_0_canViewTarget as target, canFixture_3_1_7_fixture as fixture, canQueryLogic_1_2_4_canQueryLogic as QueryLogic, canRealtimeRestModel_2_0_0_canRealtimeRestModel as realtimeRestModel, canRestModel_2_0_0_canRestModel as restModel, canConnect_4_0_6_all as connect, canLocalStore_1_0_1_canLocalStore as localStore, canMemoryStore_1_0_3_canMemoryStore as memoryStore, canRoute_5_0_2_canRoute as route, canRouteHash_1_0_2_canRouteHash as RouteHash, canRoutePushstate_6_0_0_canRoutePushstate as RoutePushstate, canParam_1_2_0_canParam as param, canDeparam_1_2_3_canDeparam as deparam, canAssign_1_3_3_canAssign as assign, canDefineLazyValue_1_1_1_defineLazyValue as defineLazyValue, canDiff_1_5_1_canDiff as diff, canGlobals_1_2_2_canGlobals as globals, canKey_1_2_1_canKey as key, canKeyTree_1_2_2_canKeyTree as KeyTree, canMakeMap_1_2_2_canMakeMap as makeMap, canParseUri_1_2_2_canParseUri as parseURI, canQueues_1_3_2_canQueues as queues, canString_1_1_0_canString as string, canStringToAny_1_2_1_canStringToAny as stringToAny, canAjax_2_4_8_canAjax as ajax, canAttributeEncoder_1_1_4_canAttributeEncoder as attributeEncoder, canChildNodes_1_2_1_canChildNodes as childNodes, canDomData_1_0_3_canDomData as domData, canDomEvents_1_3_13_canDomEvents as domEvents, addJqueryEvents as addJQueryEvents, canDomMutate_2_0_9_canDomMutate as domMutate, canDomMutate_2_0_9_node as domMutateNode, canDomMutate_2_0_9_domEvents as domMutateDomEvents, canFragment_1_3_1_canFragment as fragment, canValidateInterface_1_0_3_index as makeInterfaceValidator, canCid_1_3_1_canCid as cid, canConstruct_3_5_7_canConstruct as Construct, maybeBoolean as MaybeBoolean, maybeDate as MaybeDate, maybeNumber as MaybeNumber, maybeString as MaybeString, canNamespace_1_0_0_canNamespace as can, canReflect_1_19_2_canReflect as Reflect, canReflectDependencies_1_1_2_canReflectDependencies as reflectDependencies, canReflectPromise_2_2_1_canReflectPromise as reflectPromise, canType_1_1_6_canType as type };","export function makeObjectMapByKey(issues, key) {\n  var map = {};\n  issues.forEach( (issue)=> {\n      map[ issue[key] ] = issue;\n  });\n  return map;\n}\n\nexport function makeFilterByPropertyNotEqualToOneOfValues(property, values) {\n  return function(issue){\n    return !values.includes(issue[property])\n  }\n}\n\nexport function groupByKey(issues, key) {\n    var map = {};\n    issues.forEach( (issue)=> {\n        var value = typeof key === \"function\" ?\n            key(issue) : issue[key];\n\n        if( !map[ value ] ) {\n            map[ value ] = [];\n        }\n        map[ value ].push(issue);\n    });\n    return map;\n}\n\n\nexport function splitByHavingPropertyValue(issues, splitProperty) {\n  return partition(issues, function(issue){\n    return issue[splitProperty];\n  });\n}\n\nexport function partition(array, filter, thisArg) {\n  var falsy = [];\n  var truthy = [];\n  array.forEach( (issue, i)=> {\n      if(filter.call(thisArg, issue, i)) {\n        truthy.push(issue);\n\n      } else {\n          falsy.push(issue);\n      }\n  });\n  return {falsy, truthy};\n}\n\n\nexport function stringToArray(value) {\n    if(typeof value === \"string\") {\n        return [value]\n    } else {\n        return value;\n    }\n}\n","export default await new Promise((resolve, reject) => {\n    const script = document.createElement(\"script\");\n    script.src = 'https://cdn.jsdelivr.net/jstat/latest/jstat.min.js';\n    document.head.appendChild(script);\n    script.onload = function () {\n        resolve(jStat);\n    }\n    script.onerror = reject;\n})\n","import jStat from \"./jstat.js\";\n\nfunction toStandardDeviations({\n\tconfidence,\n\thighConfidenceStds = 0,\n\thighConfidence = 100,\n\tlowConfidenceStds = 1.3,\n\tlowConfidence = 10\n}){\n\tconst slope = -1 * (highConfidenceStds - lowConfidenceStds) / (highConfidence - lowConfidence)\n\tconst uncertainty = (100 - confidence);\n\treturn  (uncertainty * slope);\n}\n\n\n/**\n * Given an estimate, a confidence, and an uncertainty, return the extra amount of time.\n */\n\n\nexport function estimateExtraPoints(estimate, confidence, uncertaintyWeight) {\n\tvar std = toStandardDeviations({confidence});\n\tif(uncertaintyWeight === \"average\") {\n\t\treturn estimate * jStat.lognormal.mean( 0, std) - estimate;\n\t} else {\n\t\treturn estimate * jStat.lognormal.inv( (uncertaintyWeight / 100) , 0, std) - estimate;\n\t}\n\t\n}\n\n// will return negative numbers weirdly ... but I don't feel like changing all of this right now\nexport function sampleExtraPoints(estimate, confidence) {\n\tconst std = toStandardDeviations({confidence});\n\tconst scale = jStat.lognormal.sample( 0, std );\n\treturn estimate * scale - estimate;\n}\n\n\nexport function toP(confidence) {\n    var cd = confidence / 100;\n    return 1 - 0.5 * cd;\n}\n","\n\n\nclass ScheduledWorkNode {\n\tconstructor(work, workPlan) {\n\t\tthis.work = work;\n\t\tthis.next = null;\n\t\tthis.previous = null;\n\t\tthis.workPlan = workPlan;\n\t}\n\tisPrependPossible(work, firstDayWorkCouldStartOn) {\n\t\tlet firstDayToStartWorkAfterExistingWork = 0;\n\t\tif(this.previous !== null) {\n\t\t\tfirstDayToStartWorkAfterExistingWork = this.previous.work.startDay + this.previous.work.daysOfWork;\n\t\t}\n\t\tvar possibleStartDay = Math.max(firstDayWorkCouldStartOn, firstDayToStartWorkAfterExistingWork);\n\t\treturn {\n\t\t\tisPossible:possibleStartDay + work.daysOfWork <= this.work.startDay,\n\t\t\tpossibleStartDay: possibleStartDay\n\t\t};\n\t}\n\tprependIfPossible(work, firstDayWorkCouldStartOn) {\n\t\tconst {isPossible, possibleStartDay} = this.isPrependPossible(work, firstDayWorkCouldStartOn);\n\t\tif( isPossible ) {\n\t\t\tthis.workPlan.prepend(this, work, possibleStartDay, firstDayWorkCouldStartOn)\n\t\t\treturn true;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t}\n\tget isTail(){\n\t\treturn this.next === null;\n\t}\n\tappend(work, firstDayWorkCouldStartOn) {\n\t\tthis.workPlan.append(work, firstDayWorkCouldStartOn);\n\t}\n}\n\nclass WorkPlan {\n\tconstructor() {\n\t\tthis.head = null;\n\t\tthis.tail = null;\n\t}\n\tget isEmpty(){\n\t\treturn this.head === null;\n\t}\n\tget work(){\n\t\treturn [...this].map( (workNode) => workNode.work )\n\t}\n\t// figures out the earliest start day ... if it is selected, includes a function to do the update\n\tearliestStartDay(work, firstDayWorkCouldStartOn) {\n\t\tfor(const workNode of this) {\n\t\t\tconst {isPossible, possibleStartDay} = workNode.isPrependPossible(work, firstDayWorkCouldStartOn)\n\t\t\tif(isPossible) {\n\t\t\t\treturn {\n\t\t\t\t\tpossibleStartDay,\n\t\t\t\t\tupdatePlan: ()=>{\n\t\t\t\t\t\tworkNode.prependIfPossible(work, firstDayWorkCouldStartOn);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn {\n\t\t\tpossibleStartDay: this.appendStartDay(work, firstDayWorkCouldStartOn),\n\t\t\tupdatePlan: ()=>{\n\t\t\t\tthis.append(work, firstDayWorkCouldStartOn)\n\t\t\t}\n\t\t};\n\t}\n\tprepend(workNode, work, startDay, firstDayWorkCouldStartOn) {\n\t\t// MUTATION\n\t\twork.startDay = startDay;\n\t\tif(work.startDay > firstDayWorkCouldStartOn) {\n\t\t\twork.artificiallyDelayed = true;\n\t\t}\n\n\t\tconst newNode = new ScheduledWorkNode(work, this);\n\t\tif(this.head === workNode) {\n\t\t\tthis.head = newNode;\n\t\t} else {\n\t\t\tconst oldPrevious = workNode.previous;\n\t\t\toldPrevious.next = newNode;\n\t\t\tworkNode.previous = newNode;\n\t\t\tnewNode.previous = oldPrevious;\n\t\t}\n\t\tnewNode.next = workNode;\n\t\tworkNode.previous = newNode;\n\t}\n\tappendStartDay(work, firstDayWorkCouldStartOn){\n\t\tif(!this.tail) {\n\t\t\treturn firstDayWorkCouldStartOn;\n\t\t} else {\n\t\t\treturn Math.max( this.tail.work.startDay  + this.tail.work.daysOfWork, firstDayWorkCouldStartOn)\n\t\t}\n\t}\n\tappend(work, firstDayWorkCouldStartOn) {\n\t\tconst startDay = this.appendStartDay(work, firstDayWorkCouldStartOn);\n\t\tif(!this.tail) {\n\t\t\tthis.head = this.tail = new ScheduledWorkNode(work, this);\n\t\t\t// MUTATION\n\t\t\twork.startDay = startDay;\n\t\t} else {\n\t\t\t// MUTATION\n\t\t\twork.startDay = startDay;\n\t\t\tif(work.startDay > firstDayWorkCouldStartOn) {\n\t\t\t\twork.artificiallyDelayed = true;\n\t\t\t}\n\n\t\t\tconst newNode = new ScheduledWorkNode(work, this);\n\t\t\tconst oldTail = this.tail;\n\t\t\tthis.tail = newNode;\n\t\t\toldTail.next = newNode;\n\t\t\tnewNode.previous = oldTail;\n\t\t}\n\t}\n\t*[Symbol.iterator](){\n\t\tlet node = this.head;\n\t\tif(node !== null) {\n\t\t\tyield node;\n\t\t}\n\t\twhile(node !== this.tail) {\n\t\t\tnode = node.next;\n\t\t\tyield node;\n\t\t}\n\t}\n}\n\nexport class WorkPlans {\n\tstatic sortByEndDate = (workNodeA, workNodeB) => {\n\t\treturn (workNodeA.startDay + workNodeA.daysOfWork) - (workNodeB.startDay + workNodeB.daysOfWork)\n\t};\n\n\tconstructor(parallelWorkStreams){\n\t\tthis.plans = [];\n\t\tfor(let i = 0; i < parallelWorkStreams; i++) {\n\t\t\tthis.plans.push(new WorkPlan())\n\t\t}\n\t}\n\tworkNodes(){\n\t\treturn this.plans.map( workPlan => [...workPlan]).flat();\n\t}\n\tsortedWorkNodes(){\n\t\treturn this.workNodes().sort( (workNodeA, workNodeB) => {\n\t\t\treturn workNodeA.work.startDay - workNodeB.work.startDay\n\t\t})\n\t}\n\tsortedWorkNodesByEndDate(){\n\t\treturn this.workNodes().sort( WorkPlans.sortByEndDate )\n\t}\n\tsheduleWork(work, firstDayWorkCouldStartOn) {\n\n\t\t// if any are empty, add it right away\n\t\tfor(const workPlan of this.plans) {\n\t\t\tif(workPlan.isEmpty) {\n\t\t\t\tworkPlan.append(work, firstDayWorkCouldStartOn);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\t// try each workplan for it's earliest fit ...\n\t\tconst earliestDates = this.plans.map( (plan)=>{\n\t\t\treturn plan.earliestStartDay(work, firstDayWorkCouldStartOn)\n\t\t}).sort( (dataA, dataB) => {\n\t\t\treturn dataA.possibleStartDay - dataB.possibleStartDay;\n\t\t});\n\n\t\tearliestDates[0].updatePlan();\n\n\n\t\treturn;\n\t\t// now we need to order them ....\n\t\tconst allWorkNodes = this.sortedWorkNodes();\n\n\t\tfor(const existingWork of allWorkNodes) {\n\n\t\t\tif(existingWork.prependIfPossible(work, firstDayWorkCouldStartOn)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// if we are at the end of a list ... we can add it there before going to later lists\n\t\t\tif(existingWork.isTail) {\n\t\t\t\texistingWork.append(work, firstDayWorkCouldStartOn);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t}\n}\n","import {\n  makeObjectMapByKey,\n  makeFilterByPropertyNotEqualToOneOfValues,\n  groupByKey,\n  splitByHavingPropertyValue,\n  partition,\n  stringToArray\n} from \"./helpers.js\";\n\nimport {estimateExtraPoints, sampleExtraPoints} from \"./shared/confidence.js\";\nimport {WorkPlans} from \"./work-plans.js\";\n\nexport function prepareIssues(issuesSource, {\n  // Decides what the project key is from an issue\n  getTeamKey = getTeamKeyDefault,\n\n  // returns the number of work days per sprint\n  getDaysPerSprint = (teamKey) => 10,\n\n  // Returns a team's velocity\n  getVelocity = (key) => 21,\n\n  // Returns a confidence for a particular issue (from 0-100)\n  getConfidence = getConfidenceDefault,\n\n  // Returns an estimate of the amount of work\n  getEstimate = getEstimateDefault,\n\n\n  issueFilter = issueFilterDefault,\n\n\n  getParentKey = (issue) => issue[\"Custom field (Epic Link)\"],\n\n  // returns an array of keys that the issue blocks\n  getBlockingKeys = (issue) => stringToArray(issue.linkedIssues.blocks) || [],\n\n\n  // Called back when an issue isn't used\n  onIgnoredIssues = (issues, reason) => {},\n\n  \n  uncertaintyWeight = 100,\n\n  // True will randomly select an issue timing based on the probability distribution\n  // False will always use the same extra timing.  There is no reason to do a montecarlo with this configuration.\n  probablisticallySelectIssueTiming = true,\n\n\tgetParallelWorkLimit = (teamKey) => {\n\t\treturn 1;\n\t}\n}) {\n    window.issuesSource = issuesSource;\n    // Copy issues\n    const issues = issuesSource.map( issue => {\n        return {...issue}\n    });\n\n    // Remove issues that we don't care about (done issues and epics without parents)\n    const {truthy: interestingIssues, falsy: filteredOut} = partition( issues, issueFilterDefault);\n    onIgnoredIssues(filteredOut, \"filtered-out\");\n\n    const issueByKey = makeObjectMapByKey(interestingIssues, \"Issue key\");\n\n    // Group issues by type\n    const issuesByType = Object.groupBy(interestingIssues, issue => issue[\"Issue Type\"].name)\n    \n    const interestingEpics = issuesByType.Epic || [];\n\n    const issuesByTeam = groupByKey(interestingIssues, getTeamKey);\n\n    var projectIds = Object.keys(issuesByTeam);\n\n    const workByTeams = makeObjectMapByKey(projectIds.map( (teamKey, i) => {\n        return {\n            teamKey,\n            workPlans: new WorkPlans(getParallelWorkLimit(teamKey)),\n            velocity: getVelocity(teamKey)\n        }\n    }), \"teamKey\" );\n\n    // Warning: Mutations of data start here!\n\n    // Make parent-child relationship\n    associateParentAndChildren(interestingIssues, getParentKey, issueByKey);\n\n    // add timing to epics\n    interestingEpics.forEach( issue => {\n      // mutation!\n      issue.work = createWork(issue,\n        workByTeams,\n        {getTeamKey, getConfidence, getEstimate, uncertaintyWeight, getDaysPerSprint, getParallelWorkLimit, probablisticallySelectIssueTiming});\n\n    });\n\n    // start building the block tree\n    // adds a `.blocks` and `.blockedBy`\n    linkBlocks(interestingEpics, issueByKey, getBlockingKeys);\n    checkForCycles(interestingEpics);\n    return {preparedIssues: interestingEpics, issuesByKey: issueByKey, workByTeams};\n}\n\nconst removeDone = makeFilterByPropertyNotEqualToOneOfValues(\"Status\", [\"Done\"]);\nfunction issueFilterDefault(issue){\n    return removeDone(issue) && (issue.Type === \"Epic\" ? issue[\"Custom field (Parent Link)\"] : true)\n}\n\nfunction getDaysOfWork(usedEstimate, extraPoints, pointsPerDay){\n  return Math.max( Math.round( (usedEstimate + extraPoints) / pointsPerDay), 1)\n}\n\nfunction createWork(issue, workByTeams,\n  {\n    getTeamKey, \n    getConfidence, \n    getEstimate, \n    uncertaintyWeight, \n    getDaysPerSprint, \n    getParallelWorkLimit,\n    probablisticallySelectIssueTiming\n  }) {\n    if(issue.work) {\n        return issue.work;\n    }\n\n    var teamKey = getTeamKey(issue);\n    var team = workByTeams[teamKey];\n    var confidence = getConfidence(issue);\n\n    var estimate = getEstimate(issue);\n\t\tif(!confidence || !estimate) {\n\t\t\t//debugger; Template Void, Refund features beyond Store 1\n\t\t}\n\n    var canEstimate =  confidence !== undefined && estimate !== undefined;\n\n    var pointsPerDay = team.velocity / getDaysPerSprint(teamKey)  / getParallelWorkLimit(teamKey);\n\n    const usedEstimate = (estimate != undefined ? estimate : team.velocity );\n    const usedConfidence = (confidence != undefined ? confidence : 50 );\n\n    var estimatedDaysOfWork =  Math.max( Math.round( (usedEstimate) / pointsPerDay), 1);\n\n    const extraPoints = probablisticallySelectIssueTiming ?\n      sampleExtraPoints(usedEstimate, usedConfidence):\n      estimateExtraPoints(usedEstimate, usedConfidence, uncertaintyWeight);\n\n    var daysOfWork = getDaysOfWork(usedEstimate, extraPoints, pointsPerDay);\n\n    // We always want deterministic days of work, this makes controling for the order easier\n    let deterministicDaysOfWork;\n    if(probablisticallySelectIssueTiming) {\n      deterministicDaysOfWork =  getDaysOfWork(usedEstimate, \n        estimateExtraPoints(usedEstimate, usedConfidence, uncertaintyWeight), \n        pointsPerDay);\n    } else {\n      deterministicDaysOfWork = daysOfWork;\n    }\n\n    var work = {\n        isDefaultValue: !canEstimate,\n        confidence,\n        estimate,\n        usedEstimate,\n        usedConfidence,\n        extraPoints,\n        extraDays: daysOfWork - estimatedDaysOfWork,\n        estimatedDaysOfWork,\n        daysOfWork: daysOfWork,\n        deterministicDaysOfWork,\n        deterministicExtraDays: deterministicDaysOfWork - estimatedDaysOfWork,\n        issue: issue,\n        team: team,\n        isScheduled: false,\n        pointsPerDay\n    }\n    return work;\n}\n\n\n\nfunction linkBlocks(issues, issueByKey, getBlockingKeys) {\n    issues.forEach((issue)=> {\n        issue.blocks = (stringToArray( getBlockingKeys(issue) || [])).map( (blockKey)=> {\n            const blocked = issueByKey[blockKey];\n            if(blocked && blocked[\"Issue Type\"].name !== issue[\"Issue Type\"].name) {\n              console.log(issue[\"Issue Type\"].name, issue.Summary,\"is blocking\", blocked[\"Issue Type\"].name, blocked.Summary, \". This is ignored\");\n              return undefined;\n            }\n            return blocked\n        }).filter( x=>  x);\n\n        issue.blocks.forEach( (blocker)=> {\n            if(!blocker.blockedBy){\n                blocker.blockedBy = [];\n            }\n            blocker.blockedBy.push(issue);\n        })\n    })\n}\n\nfunction checkForCycles(issues) {\n  issues.forEach((issue) => {\n    // collect all the recursive blocks, make sure it doesn't block itself ...\n    checkCycle([issue]);\n  })\n}\nfunction checkCycle(issuePath) {\n  var last = issuePath[issuePath.length-1];\n  var issuePathSet = new Set(issuePath);\n\n  last.blocks.forEach( (blocked)=> {\n      if(issuePathSet.has(blocked)) {\n        console.log(issuePath, blocked);\n        throw \"There is a cycle of dependencies. Aborting.\"\n      } else {\n        checkCycle([...issuePath, blocked]);\n      }\n  })\n}\n\n// NOT NEEDED\nfunction blockedByDepth(issue) {\n    if(issue.blockedByDepth !== undefined) {\n        return issue.blockedByDepth;\n    }\n    if(!issue.blockedBy || !issue.blockedBy.length) {\n        return issue.blockedByDepth = 0;\n    } else {\n        return issue.blockedByDepth = issue.blockedBy.reduce( (sum, issue)=> {\n            return sum + blockedByDepth(issue);\n        },1)\n    }\n}\n// NOT NEEDED\nfunction blocksDepth(issue) {\n    if(issue.blocksDepth !== undefined) {\n        return issue.blocksDepth;\n    }\n    if(!issue.blocks || !issue.blocks.length) {\n        return issue.blocksDepth = 0;\n    } else {\n        return issue.blocksDepth = issue.blocks.reduce( (sum, issue)=> {\n            return sum + blocksDepth(issue);\n        },1)\n    }\n}\n\n\nfunction associateParentAndChildren(issues, getParentKey, issuesByKey) {\n\n  const issuesForEpics = groupByKey(issues,getParentKey);\n\n  for(let epicKey in issuesForEpics) {\n    if(epicKey) {\n      const epic = issuesByKey[epicKey];\n      if(epic) {\n        epic._children = issuesForEpics[epicKey];\n        epic._children.forEach( child => child._parent = epic );\n      } else {\n        //console.log(\"Unable to find epic\", epicKey, \"perhaps it is marked as done but has an issue not done\");\n      }\n\n    }\n  }\n}\n\n\n// WEIRD STUFF\nfunction getTeamKeyDefault(issue) {\n    var matches = issue[\"Summary\"].match( /M\\d: ([^:]+): / )\n    if(matches) {\n        return issue[\"Project key\"]+\":\"+matches[1]\n    } else {\n        return issue[\"Project key\"];\n    }\n}\n\nfunction getConfidenceDefault(issue) {\n    const outerValue = issue[\"Custom field (Confidence)\"];\n\n    if(Array.isArray(outerValue)) {\n      for(let rawValue of outerValue) {\n        let converted = parseInt(rawValue, 10);\n\n        if(converted !== 0 && converted !== \"\") {\n            return val;\n        }\n      }\n    } else if(val !== undefined) {\n      var val = parseInt(outerValue, 10);\n      if(val !== 0) {\n          return val;\n      }\n    }\n    return undefined;\n}\n\nexport function getEstimateDefault(issue) {\n    var rawValue;\n    if(issue[\"Custom field (Story Points)\"]){\n        rawValue = parseInt(issue[\"Custom field (Story Points)\"], 10);\n    }\n    if( issue[\"Custom field (Story point estimate)\"] ) {\n      for( let value of issue[\"Custom field (Story point estimate)\"] ){\n          if(value) {\n              rawValue = parseInt(value, 10);\n          }\n      }\n    }\n    if(rawValue !== undefined && rawValue !== 0 && rawValue !== \"\") {\n        return rawValue;\n    }\n}\n","const HOUR_IN_MS = 1000 * 60 * 60;\nconst DAY_IN_MS = 1000 * 60 * 60 * 24;\n\nfunction getQuarter(date) {\n    const month = date.getMonth();\n    return Math.floor(month / 3) + 1;\n}\n\nfunction getYear(date) {\n    return date.getFullYear();\n}\n\nexport function getStartOfThisQuarter(date) {\n    const quarter = getQuarter(date);\n    const year = getYear(date);\n    return new Date(year, (quarter - 1) * 3, 1);\n}\n\nexport function getEndOfThisQuarter(date) {\n    const quarter = getQuarter(date);\n    const year = getYear(date);\n    return new Date(year, quarter * 3, 0);\n}\n\nexport function getStartOfNextQuarter(date) {\n    const quarter = getQuarter(date);\n    const year = getYear(date);\n    if (quarter === 4) {\n        return new Date(year + 1, 0, 1);\n    } else {\n        return new Date(year, quarter * 3, 1);\n    }\n}\n\nexport function getEndOfNextQuarter(date) {\n    const quarter = getQuarter(date);\n    const year = getYear(date);\n    if (quarter === 4) {\n        return new Date(year + 1, 3, 31);\n    } else {\n        return new Date(year, quarter * 3 + 2, 31);\n    }\n}\n\n\nexport function getBusinessDatesCount(startDate, endDate) {\n    let count = 0;\n    const curDate = new Date(startDate.getTime());\n    while (curDate <= endDate) {\n        const dayOfWeek = curDate.getDay();\n        if(dayOfWeek !== 0 && dayOfWeek !== 6) count++;\n        curDate.setDate(curDate.getDate() + 1);\n    }\n    return count;\n}\n\nfunction roundToNearestUTCDate(date) {\n    // Extract the UTC date parts\n    const year = date.getUTCFullYear();\n    const month = date.getUTCMonth();\n    const day = date.getUTCDate();\n    const hours = date.getUTCHours();\n    \n    // Create a date representing the start of the UTC day\n    let roundedDate = new Date(Date.UTC(year, month, day));\n    \n    // If the time is 12:00 UTC or later, add one day\n    if (hours >= 12) {\n      roundedDate.setUTCDate(roundedDate.getUTCDate() + 1);\n    }\n    \n    return roundedDate;\n  }\n\n// getEndDateFromStartDateAndBusinessDays( parseDateISOString(\"2022-01-01\"), 2 ) //-> Jan 5\n\nexport function getEndDateFromStartDateAndBusinessDays(startDate, businessDays){\n\tconst curDate = new Date(startDate.getTime());\n\tconst startDay = curDate.getDay();\n\n\t// move to Monday ...\n\tif(startDay === 0 ) { // sunday\n\t\tcurDate.setDate(curDate.getDate() + 1 );\n\t} else if(startDay === 6) { // saturday\n\t\tcurDate.setDate(curDate.getDate() + 2 );\n\t}\n\n\tconst weeksToMoveForward = Math.floor(businessDays / 5);\n\tconst remainingDays =  businessDays % 5;\n\n\tcurDate.setDate(curDate.getDate() + weeksToMoveForward*7 + remainingDays );\n\n\tconst endDay = curDate.getDay();\n\n\t// move to Monday ...\n\tif(endDay === 0 ) { // sunday\n\t\tcurDate.setDate(curDate.getDate() + 1 );\n\t} else if(endDay === 6) { // saturday\n\t\tcurDate.setDate(curDate.getDate() + 2 );\n\t}\n\n\treturn curDate;\n}\n\nexport function getUTCEndDateFromStartDateAndBusinessDays(startDate, businessDays){\n\tconst curDate = new Date(startDate.getTime());\n\tconst startDay = curDate.getUTCDay();\n\n\t// move to Monday ...\n\tif(startDay === 0 ) { // sunday\n\t\tcurDate.setUTCDate(curDate.getUTCDate() + 1 );\n\t} else if(startDay === 6) { // saturday\n\t\tcurDate.setUTCDate(curDate.getUTCDate() + 2 );\n\t}\n\n\tconst weeksToMoveForward = Math.floor(businessDays / 5);\n\tconst remainingDays =  businessDays % 5;\n\n\tcurDate.setUTCDate(curDate.getUTCDate() + weeksToMoveForward*7 + remainingDays );\n\n\tconst endDay = curDate.getUTCDay();\n\n\t// move to Monday ...\n\tif(endDay === 0 ) { // sunday\n\t\tcurDate.setUTCDate(curDate.getUTCDate() + 1 );\n\t} else if(endDay === 6) { // saturday\n\t\tcurDate.setUTCDate(curDate.getUTCDate() + 2 );\n\t}\n\n\treturn curDate;\n}\n\nexport function getEndDateFromUTCStartDateAndBusinessDays(startDate, businessDays){\n\tconst currentDate = new Date(startDate.getTime());\n\tconst startingDate = startDate.getUTCDate();\n\n\tlet addedDays = 1;\n\twhile(addedDays < businessDays || (currentDate.getUTCDay() === 0 || currentDate.getUTCDay() === 6) ) {\n\t\tif (currentDate.getUTCDay() !== 0 && currentDate.getUTCDay() !== 6) {\n\t\t\taddedDays++;\n\t\t}\n\t\tcurrentDate.setUTCDate( currentDate.getUTCDate() + 1 );\n\t}\n\n\treturn currentDate;\n}\n\nexport function parseDateISOString(s) {\n    if (!s) return s;\n\n    // if this is a date already, assume we need to correct timezone\n    if (s instanceof Date) {\n        // fix timezone to UTC\n        return new Date(s.getTime() + s.getTimezoneOffset() * 60 * 1000);\n    }\n\n    let ds = s.split(/\\D/).map(s => parseInt(s));\n    ds[1] = ds[1] - 1; // adjust month\n    return new Date(...ds);\n}\n\n// ranges are [,)\nconst makeDateRanges = function(startDate, endDate) {\n    const ranges = [];\n    let cur = startDate;\n    const endBusinessDay = getLastBusinessDay(endDate);\n\n    while(cur <= endDate) {\n        // there is no promise that this day is on a business day ...\n        let startBusinessDayOfRange = getFirstBusinessDay(cur);\n        let startOfNextRange = this.getStartOfNextRange(cur);\n        let possibleEndBusinessDayOfRange = getPreviousBusinessDay(startOfNextRange);\n\n        const endBusinessDayOfRange = startOfNextRange > endBusinessDay ? endBusinessDay : possibleEndBusinessDayOfRange,\n            startDay = countBusinessDays(startDate, startBusinessDayOfRange), // n^2\n            endDay = countBusinessDays(startDate, endBusinessDayOfRange);\n        \n        // sometimes the start and end would be the same day. \n        if(endDay - startDay !== 0 ) {\n            ranges.push({\n                get start(){\n                    throw \"nope\";\n                },\n                get end(){\n                    throw \"nope\";\n                },\n                startBusinessDay: startBusinessDayOfRange,\n                prettyStart: this.prettyDate(startBusinessDayOfRange),\n\n                endBusinessDay: endBusinessDayOfRange,\n                prettyEnd: this.prettyDate(endBusinessDayOfRange),\n                type: this.name,\n                startDay,\n                endDay,\n                days:  endDay - startDay + 1,\n                businessDays: countBusinessDays(startBusinessDayOfRange,  endBusinessDayOfRange)\n            });\n        }\n        \n        cur = startOfNextRange;\n    }\n    return ranges;\n};\n\n// keep moving one day \n// is this inclusive or exclusive?\n// [inclusive, inclusive]\nexport function countBusinessDays(startDate, endDate) {\n    var count = 0;\n    var currentDate = new Date(startDate);\n\n    // Loop over each day from startDate to endDate ... allow for 1 hr \n    // daylight savings difference ...\n    while (endDate > currentDate ) {\n        var dayOfWeek = currentDate.getUTCDay();\n\n        // Check if it's a weekday (Monday = 1, ..., Friday = 5)\n        if (dayOfWeek >= 1 && dayOfWeek <= 5) {\n            count++;\n        }\n\n        // Move to the next day\n        currentDate.setUTCDate(currentDate.getUTCDate() + 1);\n    }\n\n    var dayOfWeek = currentDate.getUTCDay();\n\n    // Check if it's a weekday (Monday = 1, ..., Friday = 5)\n    if (dayOfWeek >= 1 && dayOfWeek <= 5) {\n        count++;\n    }\n\n    return count;\n}\n\nfunction getNextBusinessDay(date){\n    // Create a new date object to avoid modifying the original date\n    var nextDay = new Date(date);\n\n\n    // Set time to the end of the current day\n    nextDay.setUTCHours(23, 59, 59, 999);\n\n    // Add 1 millisecond to move to the start of the next day\n    nextDay.setTime(nextDay.getTime() + 1);\n    if(nextDay.getUTCDay() === 0 || nextDay.getUTCDay() === 6) {\n        return getNextBusinessDay(nextDay)\n    }\n    return nextDay;\n}\nfunction getFirstBusinessDay(date){\n    if(date.getUTCDay() !== 0 && date.getUTCDay() !== 6) {\n        return date;\n    } else {\n        return getNextBusinessDay(date);\n    }\n}\n\nfunction getPreviousBusinessDay(date){\n    // Create a new date object to avoid modifying the original date\n    var prevDay = new Date(date);\n\n    prevDay.setDate(prevDay.getDate() - 1);\n\n    if(prevDay.getUTCDay() === 0 || prevDay.getUTCDay() === 6) {\n        return getPreviousBusinessDay(prevDay)\n    }\n    return prevDay;\n}\n\nfunction getLastBusinessDay(date){\n    if(date.getUTCDay() !== 0 && date.getUTCDay() !== 6) {\n        return date;\n    } else {\n        return getPreviousBusinessDay(date);\n    }\n}\n\nexport const monthDateFormatter = new Intl.DateTimeFormat('en-US', { month: 'short', day: 'numeric', timeZone: 'UTC' });\n\nconst yearDateFormatter = new Intl.DateTimeFormat('en-US', { year: 'numeric', timeZone: 'UTC' });\n\nconst ranges = [\n    {\n        name: \"days\",\n        aveDays: 1,\n        getStartOfNextRange: getNextBusinessDay,\n        dateRanges: makeDateRanges,\n        prettyDate(date){\n            return monthDateFormatter.format(date);\n        }\n    },\n    {\n        name: \"weeks\",\n        aveDays: 7,\n        getStartOfNextRange(date) {\n            // WHole: M->M\n            // Fractional: Th: Th-M\n\n            var nextMonday = new Date(date);\n\n            // Calculate how many days to add to get to the next Monday\n            // Day of the week is represented as 0 (Sunday) to 6 (Saturday)\n            var daysToAdd = (8 - nextMonday.getDay()) % 7;\n            if (daysToAdd === 0) {\n                daysToAdd = 7; // If today is Monday, move to the next Monday\n            }\n\n            // Add the required number of days\n            nextMonday.setDate(nextMonday.getDate() + daysToAdd);\n\n            return nextMonday;\n        },\n        dateRanges: makeDateRanges,\n        prettyDate(date){\n            return monthDateFormatter.format(date);\n        }\n    },\n    {\n        name: \"months\",\n        aveDays: 30,\n        dateRanges: makeDateRanges,\n        // dec 5 -> Jan 1st, 19 days\n        // jan 1, feb 1, 23\n\n        // 67\n        // Nov 3 -> Feb 04\n        //   Nov - [1,21] 20\n        //   Dec - [21,42] 21\n        //   Jan - [42,65] 23\n        //   Needs 3 more days \n        //   Feb 5th -  3\n        //         [65, 67] 2 ... should be 3 days wide ...\n\n        // 67 grid days 3/27\n        // \n        getStartOfNextRange(date){\n            var year = date.getUTCFullYear();\n            var month = date.getUTCMonth();\n        \n            month++;\n        \n            if (month > 11) {\n                month = 0;\n                year++;\n            }\n        \n            return new Date(Date.UTC(year, month, 1));\n        },\n        prettyDate(date){\n            return monthDateFormatter.format(date);\n        }\n    },\n    {\n        name: \"quarters\",\n        aveDays: 91,\n        dateRanges: makeDateRanges,\n        prettyDate(date){\n            return monthDateFormatter.format(date);\n        },\n        getStartOfNextRange(date){\n            return getStartOfNextQuarter(date);\n        }\n    },\n    {\n        name: \"years\",\n        aveDays: 365,\n        dateRanges: makeDateRanges,\n        prettyDate(date){\n            return yearDateFormatter.format(date);\n        },\n        getStartOfNextRange(date){\n            var year = date.getUTCFullYear();\n            year++;\n            return new Date(Date.UTC(year, 0, 1));\n        }\n    }\n];\n\nexport function bestFitRange(daysApart, maxBuckets) {\n    // which range is closest\n    const buckets = ranges.map( range => daysApart / range.aveDays); // 10 , 1.4, .3\n\n    const tooHighIndex = buckets.findLastIndex( bucket => (bucket >  maxBuckets));\n\n    let range\n    if(tooHighIndex === -1) {\n        range = ranges[0]\n    }\n    else if(tooHighIndex + 1 === ranges.length) {\n        range = ranges[tooHighIndex];\n    } \n    else {\n        range = ranges[tooHighIndex + 1]\n    }\n    return range;\n}\n\nfunction toUTCStartOfDay(date) {\n    // Create a new date object to avoid modifying the original date\n    var utcDate = new Date(date);\n\n    // Set the time to the start of the day in UTC\n    utcDate.setUTCHours(0, 0, 0, 0);\n\n    return utcDate;\n}\n\nexport function bestFitRanges(startDate, endDate, maxBuckets){\n    const startUTC = toUTCStartOfDay(startDate);\n\tconst endUTC = toUTCStartOfDay(endDate);\n\n    const daysApart = (endUTC - startUTC) / DAY_IN_MS;\n    \n    const range = bestFitRange(daysApart, maxBuckets)\n\n    return range.dateRanges(startUTC, endUTC);\n}\n\n\n// TESTS\n//ranges[2].dateRanges(new Date(1706745600000), new Date(1707091200000))\n//ranges[2].dateRanges(new Date(1698969600000), new Date(1701388800000));","import {getBusinessDatesCount} from \"./dateUtils.js\";\nimport {estimateExtraPoints} from \"./confidence.js\";\n\nconst ISSUE_KEY = \"Issue key\";\nconst PRODUCT_TARGET_RELEASE_KEY = \"Product Target Release\";\nconst ISSUE_TYPE_KEY = \"Issue Type\";\nconst PARENT_LINK_KEY = \"Parent Link\";\nconst START_DATE_KEY = \"Start date\";\nconst DUE_DATE_KEY = \"Due date\";\nconst LABELS_KEY = \"Labels\";\nconst STATUS_KEY = \"Status\";\nconst FIX_VERSIONS_KEY = \"Fix versions\";\n\nfunction toCVSFormat(issues, serverInfo){\n\treturn issues.map( issue => {\n\n\t\tconst blocks = issue.fields[\"Linked Issues\"].filter( (link) => {\n\t\t\treturn link.outwardIssue && link.type.name === \"Blocks\";\n\t\t}).map((link)=>{\n\t\t\treturn link.outwardIssue.key;\n\t\t});\n\t\t\n\t\treturn {\n\t\t\t...issue.fields,\n\t\t\tchangelog: issue.changelog,\n\t\t\t\"Project key\": issue.key.replace(/-.*/,\"\"),\n\t\t\t[ISSUE_KEY]: issue.key,\n\t\t\turl: serverInfo.baseUrl+\"/browse/\"+issue.key,\n\t\t\t[PRODUCT_TARGET_RELEASE_KEY]: issue.fields[PRODUCT_TARGET_RELEASE_KEY]?.[0],\n\t\t\t[PARENT_LINK_KEY]: issue.fields[PARENT_LINK_KEY]?.data?.key,\n\t\t\t[STATUS_KEY]: issue.fields[STATUS_KEY]?.name,\n\t\t\tlinkedIssues: {blocks}\n\t\t}\n\t})\n}\n\nfunction addWorkingBusinessDays(issues) {\n\n\n\treturn issues.map( issue => {\n\t\t/*let weightedEstimate = null;\n\t\tif( issue[\"Story Points\"]) {\n\t\t\tif(issue[\"Confidence\"]) {\n\t\t\t\tweightedEstimate = issue[\"Story Points\"] + Math.round( estimateExtraPoints(issue[\"Story Points\"], issue[\"Confidence\"]) );\n\t\t\t} else {\n\t\t\t\tweightedEstimate = issue[\"Story Points\"];\n\t\t\t}\n\t\t}*/\n\n\t\treturn {\n\t\t\t...issue,\n\t\t\t//workType: isQAWork(issue) ? \"qa\" : ( isPartnerReviewWork(issue) ? \"uat\" : \"dev\"),\n\t\t\tworkingBusinessDays:\n\t\t\t\tissue[\"Due date\"] && issue[\"Start date\"] ?\n\t\t\t\t\tgetBusinessDatesCount( new Date(issue[\"Start date\"]), new Date(issue[\"Due date\"]) )  : null//,\n\t\t\t//weightedEstimate: weightedEstimate\n\t\t};\n\t})\n}\n\nexport function setupBlockers(issues) {\n\treturn issues.map( (issue)=>{\n\t\tissue[\"Linked Issues\"].map( ()=> {})\n\t\treturn {\n\t\t\t...issue,\n\n\t\t}\n\t})\n}\n\nexport function toCVSFormatAndAddWorkingBusinessDays(issues, serverInfo) {\n\treturn addWorkingBusinessDays( toCVSFormat(issues, serverInfo) )\n}\n","export function saveToLocalStorage(key, getDefault) {\n  return {\n    value({lastSet, listenTo, resolve}) {\n      const defaultValue = typeof getDefault === \"function\" ? getDefault.call(this) : getDefault;\n\n      resolve( JSON.parse( localStorage.getItem(key) ) || defaultValue );\n\n      listenTo(lastSet, (value)=> {\n        localStorage.setItem(key, JSON.stringify(value));\n        resolve(value);\n      })\n    }\n  }\n}\n\nexport const booleanParsing = {\n  parse: x => {\n    return ({\"\": true, \"true\": true, \"false\": false})[x];\n  },\n  stringify: x => \"\"+x\n};\n\nconst dateMatch = /^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{3}Z$/;\n\nexport function saveJSONToUrl(key, defaultValue, Type, converter = JSON){\n\tconst {stringify, parse} = converter;\n\t\n\treturn {\n\t\t\ttype: Type,\n      value({ lastSet, listenTo, resolve }) {\n          const defaultJSON = stringify(typeof defaultValue === \"function\" ? defaultValue.call(this) : defaultValue);\n          if (lastSet.value) {\n              resolve(lastSet.value)\n          } else {\n\t\t\t\t\t\t\tconst parsed = parse( new URL(window.location).searchParams.get(key) || defaultJSON );\n\t\t\t\t\t\t\tif(parsed && dateMatch.test(parsed)) {\n\t\t\t\t\t\t\t\tresolve( new Date(parsed) );\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tresolve( parsed );\n\t\t\t\t\t\t\t}\n          }\n\n          listenTo(lastSet, (value) => {\n              const newUrl = new URL(window.location);\n\t\t\t\t\t\t\tconst valueJSON = stringify(value);\n\t\t\t\t\t\t\tif(valueJSON !== defaultJSON) {\n\t\t\t\t\t\t\t\tnewUrl.searchParams.set(key, valueJSON );\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tnewUrl.searchParams.delete(key );\n\t\t\t\t\t\t\t}\n              history.pushState({}, '', newUrl);\n              resolve(value);\n          })\n      }\n  }\n}\n\nfunction addToLocalStorage(key, value, count=10){\n  const currentLocalStorageValue = localStorage.getItem(key);\n  let values = [];\n  try{\n    values = JSON.parse(currentLocalStorageValue);\n  } catch(e) {\n\n  }\n\n  if(!Array.isArray(values)) {\n    values = [];\n  }\n\n  values.unshift(value);\n\n  values = [...new Set(values)];\n\n  localStorage.setItem(key, JSON.stringify(values));\n}\n\nexport function saveJSONToUrlAndToLocalStorage(key, defaultValue, Type, converter = JSON){\n  const {stringify, parse} = converter;\n  return {\n    type: Type,\n    value({ lastSet, listenTo, resolve }) {\n        const defaultJSON = stringify(typeof defaultValue === \"function\" ? defaultValue.call(this) : defaultValue);\n        if (lastSet.value) {\n            resolve(lastSet.value)\n        } else {\n            const urlValue = new URL(window.location).searchParams.get(key);\n            const localStorageKeyValue =  localStorage.getItem(key);\n            let parsed = parse( defaultJSON );\n            try {\n              if(urlValue) {\n                parsed = parse( urlValue );\n              } \n              else if(localStorageKeyValue) {\n                const items = JSON.parse(localStorageKeyValue);\n                if(Array.isArray(items) && items.length) {\n                  parsed = items[0];\n                }\n              }\n            } catch(e) {\n\n            }\n            \n            if(parsed && dateMatch.test(parsed)) {\n              resolve( new Date(parsed) );\n            } else {\n              resolve( parsed );\n            }\n        }\n\n        listenTo(lastSet, (value) => {\n            const newUrl = new URL(window.location);\n            const valueJSON = stringify(value);\n            if(valueJSON !== defaultJSON) {\n              newUrl.searchParams.set(key, valueJSON );\n            } else {\n              newUrl.searchParams.delete(key );\n            }\n            history.pushState({}, '', newUrl);\n\n            addToLocalStorage(key, value)\n\n            resolve(value);\n        })\n    }\n}\n}","/* globals define,module */\n/*\nUsing a Universal Module Loader that should be browser, require, and AMD friendly\nhttp://ricostacruz.com/cheatsheets/umdjs.html\n*/\nexport default (function() {\n  \"use strict\";\n  /* globals console:false */\n\n  if ( ! Array.isArray) {\n    Array.isArray = function(arg) {\n      return Object.prototype.toString.call(arg) === \"[object Array]\";\n    };\n  }\n\n  /**\n   * Return an array that contains no duplicates (original not modified)\n   * @param  {array} array   Original reference array\n   * @return {array}         New array with no duplicates\n   */\n  function arrayUnique(array) {\n    var a = [];\n    for (var i=0, l=array.length; i<l; i++) {\n      if (a.indexOf(array[i]) === -1) {\n        a.push(array[i]);\n      }\n    }\n    return a;\n  }\n\n  var jsonLogic = {};\n  var operations = {\n    \"==\": function(a, b) {\n      return a == b;\n    },\n    \"===\": function(a, b) {\n      return a === b;\n    },\n    \"!=\": function(a, b) {\n      return a != b;\n    },\n    \"!==\": function(a, b) {\n      return a !== b;\n    },\n    \">\": function(a, b) {\n      return a > b;\n    },\n    \">=\": function(a, b) {\n      return a >= b;\n    },\n    \"<\": function(a, b, c) {\n      return (c === undefined) ? a < b : (a < b) && (b < c);\n    },\n    \"<=\": function(a, b, c) {\n      return (c === undefined) ? a <= b : (a <= b) && (b <= c);\n    },\n    \"!!\": function(a) {\n      return jsonLogic.truthy(a);\n    },\n    \"!\": function(a) {\n      return !jsonLogic.truthy(a);\n    },\n    \"%\": function(a, b) {\n      return a % b;\n    },\n    \"log\": function(a) {\n      console.log(a); return a;\n    },\n    \"in\": function(a, b) {\n      if (!b || typeof b.indexOf === \"undefined\") return false;\n      return (b.indexOf(a) !== -1);\n    },\n    \"cat\": function() {\n      return Array.prototype.join.call(arguments, \"\");\n    },\n    \"substr\": function(source, start, end) {\n      if (end < 0) {\n        // JavaScript doesn't support negative end, this emulates PHP behavior\n        var temp = String(source).substr(start);\n        return temp.substr(0, temp.length + end);\n      }\n      return String(source).substr(start, end);\n    },\n    \"+\": function() {\n      return Array.prototype.reduce.call(arguments, function(a, b) {\n        return parseFloat(a, 10) + parseFloat(b, 10);\n      }, 0);\n    },\n    \"*\": function() {\n      return Array.prototype.reduce.call(arguments, function(a, b) {\n        return parseFloat(a, 10) * parseFloat(b, 10);\n      });\n    },\n    \"-\": function(a, b) {\n      if (b === undefined) {\n        return -a;\n      } else {\n        return a - b;\n      }\n    },\n    \"/\": function(a, b) {\n      return a / b;\n    },\n    \"min\": function() {\n      return Math.min.apply(this, arguments);\n    },\n    \"max\": function() {\n      return Math.max.apply(this, arguments);\n    },\n    \"merge\": function() {\n      return Array.prototype.reduce.call(arguments, function(a, b) {\n        return a.concat(b);\n      }, []);\n    },\n    \"var\": function(a, b) {\n      var not_found = (b === undefined) ? null : b;\n      var data = this;\n      if (typeof a === \"undefined\" || a===\"\" || a===null) {\n        return data;\n      }\n      var sub_props = String(a).split(\".\");\n      for (var i = 0; i < sub_props.length; i++) {\n        if (data === null || data === undefined) {\n          return not_found;\n        }\n        // Descending into data\n        data = data[sub_props[i]];\n        if (data === undefined) {\n          return not_found;\n        }\n      }\n      return data;\n    },\n    \"missing\": function() {\n      /*\n      Missing can receive many keys as many arguments, like {\"missing:[1,2]}\n      Missing can also receive *one* argument that is an array of keys,\n      which typically happens if it's actually acting on the output of another command\n      (like 'if' or 'merge')\n      */\n\n      var missing = [];\n      var keys = Array.isArray(arguments[0]) ? arguments[0] : arguments;\n\n      for (var i = 0; i < keys.length; i++) {\n        var key = keys[i];\n        var value = jsonLogic.apply({\"var\": key}, this);\n        if (value === null || value === \"\") {\n          missing.push(key);\n        }\n      }\n\n      return missing;\n    },\n    \"missing_some\": function(need_count, options) {\n      // missing_some takes two arguments, how many (minimum) items must be present, and an array of keys (just like 'missing') to check for presence.\n      var are_missing = jsonLogic.apply({\"missing\": options}, this);\n\n      if (options.length - are_missing.length >= need_count) {\n        return [];\n      } else {\n        return are_missing;\n      }\n    },\n  };\n\n  jsonLogic.is_logic = function(logic) {\n    return (\n      typeof logic === \"object\" && // An object\n      logic !== null && // but not null\n      ! Array.isArray(logic) && // and not an array\n      Object.keys(logic).length === 1 // with exactly one key\n    );\n  };\n\n  /*\n  This helper will defer to the JsonLogic spec as a tie-breaker when different language interpreters define different behavior for the truthiness of primitives.  E.g., PHP considers empty arrays to be falsy, but Javascript considers them to be truthy. JsonLogic, as an ecosystem, needs one consistent answer.\n\n  Spec and rationale here: http://jsonlogic.com/truthy\n  */\n  jsonLogic.truthy = function(value) {\n    if (Array.isArray(value) && value.length === 0) {\n      return false;\n    }\n    return !! value;\n  };\n\n\n  jsonLogic.get_operator = function(logic) {\n    return Object.keys(logic)[0];\n  };\n\n  jsonLogic.get_values = function(logic) {\n    return logic[jsonLogic.get_operator(logic)];\n  };\n\n  jsonLogic.apply = function(logic, data) {\n    // Does this array contain logic? Only one way to find out.\n    if (Array.isArray(logic)) {\n      return logic.map(function(l) {\n        return jsonLogic.apply(l, data);\n      });\n    }\n    // You've recursed to a primitive, stop!\n    if ( ! jsonLogic.is_logic(logic) ) {\n      return logic;\n    }\n\n    var op = jsonLogic.get_operator(logic);\n    var values = logic[op];\n    var i;\n    var current;\n    var scopedLogic;\n    var scopedData;\n    var filtered;\n    var initial;\n\n    // easy syntax for unary operators, like {\"var\" : \"x\"} instead of strict {\"var\" : [\"x\"]}\n    if ( ! Array.isArray(values)) {\n      values = [values];\n    }\n\n    // 'if', 'and', and 'or' violate the normal rule of depth-first calculating consequents, let each manage recursion as needed.\n    if (op === \"if\" || op == \"?:\") {\n      /* 'if' should be called with a odd number of parameters, 3 or greater\n      This works on the pattern:\n      if( 0 ){ 1 }else{ 2 };\n      if( 0 ){ 1 }else if( 2 ){ 3 }else{ 4 };\n      if( 0 ){ 1 }else if( 2 ){ 3 }else if( 4 ){ 5 }else{ 6 };\n\n      The implementation is:\n      For pairs of values (0,1 then 2,3 then 4,5 etc)\n      If the first evaluates truthy, evaluate and return the second\n      If the first evaluates falsy, jump to the next pair (e.g, 0,1 to 2,3)\n      given one parameter, evaluate and return it. (it's an Else and all the If/ElseIf were false)\n      given 0 parameters, return NULL (not great practice, but there was no Else)\n      */\n      for (i = 0; i < values.length - 1; i += 2) {\n        if ( jsonLogic.truthy( jsonLogic.apply(values[i], data) ) ) {\n          return jsonLogic.apply(values[i+1], data);\n        }\n      }\n      if (values.length === i+1) {\n        return jsonLogic.apply(values[i], data);\n      }\n      return null;\n    } else if (op === \"and\") { // Return first falsy, or last\n      for (i=0; i < values.length; i+=1) {\n        current = jsonLogic.apply(values[i], data);\n        if ( ! jsonLogic.truthy(current)) {\n          return current;\n        }\n      }\n      return current; // Last\n    } else if (op === \"or\") {// Return first truthy, or last\n      for (i=0; i < values.length; i+=1) {\n        current = jsonLogic.apply(values[i], data);\n        if ( jsonLogic.truthy(current) ) {\n          return current;\n        }\n      }\n      return current; // Last\n    } else if (op === \"filter\") {\n      scopedData = jsonLogic.apply(values[0], data);\n      scopedLogic = values[1];\n\n      if ( ! Array.isArray(scopedData)) {\n        return [];\n      }\n      // Return only the elements from the array in the first argument,\n      // that return truthy when passed to the logic in the second argument.\n      // For parity with JavaScript, reindex the returned array\n      return scopedData.filter(function(datum) {\n        return jsonLogic.truthy( jsonLogic.apply(scopedLogic, datum));\n      });\n    } else if (op === \"map\") {\n      scopedData = jsonLogic.apply(values[0], data);\n      scopedLogic = values[1];\n\n      if ( ! Array.isArray(scopedData)) {\n        return [];\n      }\n\n      return scopedData.map(function(datum) {\n        return jsonLogic.apply(scopedLogic, datum);\n      });\n    } else if (op === \"reduce\") {\n      scopedData = jsonLogic.apply(values[0], data);\n      scopedLogic = values[1];\n      initial = typeof values[2] !== \"undefined\" ? values[2] : null;\n\n      if ( ! Array.isArray(scopedData)) {\n        return initial;\n      }\n\n      return scopedData.reduce(\n        function(accumulator, current) {\n          return jsonLogic.apply(\n            scopedLogic,\n            {current: current, accumulator: accumulator}\n          );\n        },\n        initial\n      );\n    } else if (op === \"all\") {\n      scopedData = jsonLogic.apply(values[0], data);\n      scopedLogic = values[1];\n      // All of an empty set is false. Note, some and none have correct fallback after the for loop\n      if ( ! scopedData.length) {\n        return false;\n      }\n      for (i=0; i < scopedData.length; i+=1) {\n        if ( ! jsonLogic.truthy( jsonLogic.apply(scopedLogic, scopedData[i]) )) {\n          return false; // First falsy, short circuit\n        }\n      }\n      return true; // All were truthy\n    } else if (op === \"none\") {\n      filtered = jsonLogic.apply({filter: values}, data);\n      return filtered.length === 0;\n    } else if (op === \"some\") {\n      filtered = jsonLogic.apply({filter: values}, data);\n      return filtered.length > 0;\n    }\n\n    // Everyone else gets immediate depth-first recursion\n    values = values.map(function(val) {\n      return jsonLogic.apply(val, data);\n    });\n\n\n    // The operation is called with \"data\" bound to its \"this\" and \"values\" passed as arguments.\n    // Structured commands like % or > can name formal arguments while flexible commands (like missing or merge) can operate on the pseudo-array arguments\n    // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/arguments\n    if (operations.hasOwnProperty(op) && typeof operations[op] === \"function\") {\n      return operations[op].apply(data, values);\n    } else if (op.indexOf(\".\") > 0) { // Contains a dot, and not in the 0th position\n      var sub_ops = String(op).split(\".\");\n      var operation = operations;\n      for (i = 0; i < sub_ops.length; i++) {\n\n        if (!operation.hasOwnProperty(sub_ops[i])) {\n          throw new Error(\"Unrecognized operation \" + op +\n            \" (failed at \" + sub_ops.slice(0, i+1).join(\".\") + \")\");\n        }\n        // Descending into operations\n        operation = operation[sub_ops[i]];\n      }\n\n      return operation.apply(data, values);\n    }\n\n    throw new Error(\"Unrecognized operation \" + op );\n  };\n\n  jsonLogic.uses_data = function(logic) {\n    var collection = [];\n\n    if (jsonLogic.is_logic(logic)) {\n      var op = jsonLogic.get_operator(logic);\n      var values = logic[op];\n\n      if ( ! Array.isArray(values)) {\n        values = [values];\n      }\n\n      if (op === \"var\") {\n        // This doesn't cover the case where the arg to var is itself a rule.\n        collection.push(values[0]);\n      } else {\n        // Recursion!\n        values.map(function(val) {\n          collection.push.apply(collection, jsonLogic.uses_data(val) );\n        });\n      }\n    }\n\n    return arrayUnique(collection);\n  };\n\n  jsonLogic.add_operation = function(name, code) {\n    operations[name] = code;\n  };\n\n  jsonLogic.rm_operation = function(name) {\n    delete operations[name];\n  };\n\n  jsonLogic.rule_like = function(rule, pattern) {\n    // console.log(\"Is \". JSON.stringify(rule) . \" like \" . JSON.stringify(pattern) . \"?\");\n    if (pattern === rule) {\n      return true;\n    } // TODO : Deep object equivalency?\n    if (pattern === \"@\") {\n      return true;\n    } // Wildcard!\n    if (pattern === \"number\") {\n      return (typeof rule === \"number\");\n    }\n    if (pattern === \"string\") {\n      return (typeof rule === \"string\");\n    }\n    if (pattern === \"array\") {\n      // !logic test might be superfluous in JavaScript\n      return Array.isArray(rule) && ! jsonLogic.is_logic(rule);\n    }\n\n    if (jsonLogic.is_logic(pattern)) {\n      if (jsonLogic.is_logic(rule)) {\n        var pattern_op = jsonLogic.get_operator(pattern);\n        var rule_op = jsonLogic.get_operator(rule);\n\n        if (pattern_op === \"@\" || pattern_op === rule_op) {\n          // echo \"\\nOperators match, go deeper\\n\";\n          return jsonLogic.rule_like(\n            jsonLogic.get_values(rule, false),\n            jsonLogic.get_values(pattern, false)\n          );\n        }\n      }\n      return false; // pattern is logic, rule isn't, can't be eq\n    }\n\n    if (Array.isArray(pattern)) {\n      if (Array.isArray(rule)) {\n        if (pattern.length !== rule.length) {\n          return false;\n        }\n        /*\n          Note, array order MATTERS, because we're using this array test logic to consider arguments, where order can matter. (e.g., + is commutative, but '-' or 'if' or 'var' are NOT)\n        */\n        for (var i = 0; i < pattern.length; i += 1) {\n          // If any fail, we fail\n          if ( ! jsonLogic.rule_like(rule[i], pattern[i])) {\n            return false;\n          }\n        }\n        return true; // If they *all* passed, we pass\n      } else {\n        return false; // Pattern is array, rule isn't\n      }\n    }\n\n    // Not logic, not array, not a === match for rule.\n    return false;\n  };\n\n  return jsonLogic;\n})();\n","import { StacheElement, type } from \"../../can.js\";\n\nimport jsonLogic from \"../../json-logic/json-logic.js\";\n\nclass JiraConfigureJSONLogic extends StacheElement {\n  static view = `\n    <textarea value:from='this.currentJsonLogicJSON'\n      on:input='this.updateJSON(scope.element.value)'\n      {{# if(this.unappliedChanges) }}class='dirty form-border'{{else}}class='form-border'{{/ if }}></textarea>\n    <table>\n      <tr><th>Summary</th><th>Result</th></tr>\n      {{# for(example of this.examples)}}\n        <tr>\n          <td>{{example.issue.Summary}}</td>\n          <td><code>{{example.jsonValue}}</code></td>\n        </tr>\n      {{/ }}\n    </table>\n    <button on:click=\"this.applyLogic()\" class=\"btn-secondary\">Apply</button>\n  `;\n  static props = {\n    rawIssues: type.Any,\n    editorElement: type.Any,\n    currentJsonLogic: {\n      value({resolve, listenTo, lastSet}){\n        resolve(lastSet.value);\n        listenTo(lastSet, (value)=>{\n          resolve(value);\n        })\n        listenTo(\"jsonLogic\",({value})=>{\n          resolve(value);\n        })\n      }\n    },\n    jsonLogic: type.Any\n  };\n\n  get currentJsonLogicJSON(){\n    return JSON.stringify(this.currentJsonLogic, null, ' ');\n  }\n  get unappliedChanges(){\n    return JSON.stringify(this.currentJsonLogic) !== JSON.stringify(this.jsonLogic);\n  }\n  updateJSON(json) {\n    try {\n      this.currentJsonLogic = JSON.parse(json);\n    } catch(e) {\n      console.log(e)\n    }\n\n  }\n  get examples(){\n    const json = this.currentJsonLogic;\n\n    try {\n      return this.rawIssues.map( (issue)=> {\n        const value = jsonLogic.apply(json, issue);\n        return {\n          issue: issue,\n          value,\n          jsonValue: JSON.stringify(value)\n        }\n      }).filter( example => example.value !== \"\" ).slice(0,10);\n    } catch (e) {\n      return [{issue: {Summary: \"Error\"}, value: e, jsonValue: e.message}]\n    }\n\n  }\n\n  applyLogic(){\n    this.jsonLogic = this.currentJsonLogic;\n  }\n\n  connected(){\n\n\n    /*const editor = new JSONEditor(this.editorElement, {\n        onChange: ()=> {\n          this.currentJsonLogic = editor.get()\n        }\n    }, this.currentJsonLogic );\n\n    this.listenTo(\"jsonLogic\",({value})=> {\n      if(JSON.stringify(value) !== editor.getText()) {\n        this.currentJsonLogic = value;\n        editor.set(value);\n      }\n    })*/\n\n  }\n\n\n}\ncustomElements.define(\"jira-configure-json-logic\", JiraConfigureJSONLogic);\nexport default JiraConfigureJSONLogic;\n","class SimpleTooltip extends HTMLElement {\n    static get observedAttributes() { return ['for']; }\n    attributeChangedCallback(name, oldValue, newValue) {\n  \n    }\n    connectedCallback(){\n      this.enteredElement = this.enteredElement.bind(this);\n      this.leftElement = this.leftElement.bind(this);\n      this.forElement = this.getAttribute(\"for\");\n      this.style.display = \"none\";\n  \n      this.style.position = \"absolute\";\n    }\n    disconnectedCallback(){\n      if(this._forElement) {\n        this._forElement.removeEventListener(\"mouseenter\", this.enteredElement);\n        this._forElement.removeEventListener(\"mouseenter\", this.leftElement);\n      }\n    }\n    set forElement(element){\n      if(typeof element === \"string\") {\n        element = document.querySelectorAll(element);\n      }\n      if(this._forElement) {\n        this._forElement.removeEventListener(\"mouseenter\", this.enteredElement);\n        this._forElement.removeEventListener(\"mouseenter\", this.leftElement);\n      }\n      if(element) {\n        element.addEventListener(\"mouseenter\", this.enteredElement);\n        element.addEventListener(\"mouseenter\", this.leftElement);\n      }\n      this._forElement = element;\n    }\n    enteredElement(event, html){\n      if(arguments.length > 1) {\n        this.innerHTML = html;\n        var rect = event.currentTarget.getBoundingClientRect();\n        this.style.top = (window.scrollY + rect.bottom)+\"px\";\n        this.style.left = (window.scrollX + rect.left) +\"px\";\n        this.style.display = \"\";\n      }\n    }\n    belowElement(element, DOM) {\n        if(arguments.length > 1) {\n            this.innerHTML = \"\";\n            this.appendChild(DOM);\n            var rect = element.getBoundingClientRect();\n            this.style.top = (window.scrollY + rect.bottom)+\"px\";\n            this.style.left = (window.scrollX + rect.left) +\"px\";\n            this.style.display = \"\";\n        }\n    }\n    belowElementInScrollingContainer(element, DOM){\n    \n      // find if there's a scrolling container and move ourselves to that \n      const container = findScrollingContainer(element);\n      this.innerHTML = \"\";\n      container.appendChild(this);\n      // find the relative position \n      this.style.top = \"-1000px\";\n      this.style.left = \"-1000px\";\n      if(typeof DOM === \"string\") {\n        this.innerHTML = DOM;\n      } else {\n        this.appendChild(DOM);\n      }\n      \n      this.style.display = \"\";\n      \n      // where is the container on the page\n      const containerRect = container.getBoundingClientRect(),\n        // where is the element we are positioning next to on the page\n        elementRect = element.getBoundingClientRect(),\n        // how big is the tooltip\n        tooltipRect = this.getBoundingClientRect();\n      \n      const containerStyles = window.getComputedStyle(container)\n      // how much room is there \n      \n      // where would the tooltip's bottom reach in the viewport \n      const bottomInWindow = elementRect.bottom + tooltipRect.height;\n      // if the tooltip wouldn't be visible \"down\"\n      if(bottomInWindow > window.innerHeight) {\n        const viewPortPosition = ( elementRect.top - tooltipRect.height );\n        const posInContainer = viewPortPosition - containerRect.top -  parseFloat( containerStyles.borderTopWidth, 10);\n        const posInContainerAccountingForScrolling = posInContainer + container.scrollTop;\n        this.style.top = ( posInContainerAccountingForScrolling )+\"px\";\n      } else {\n        const topFromContainer = elementRect.bottom - containerRect.top;\n        this.style.top = topFromContainer +\"px\";\n      }\n  \n      const leftFromContainer = elementRect.left - containerRect.left;\n      this.style.left = leftFromContainer +\"px\";\n      \n    }\n    centeredBelowElement(element, html) {\n      if(arguments.length > 1) {\n        this.style.top = \"-1000px\";\n        this.style.left = \"-1000px\";\n        \n        this.innerHTML = html;\n        \n        this.style.display = \"\";\n        const tooltipRect = this.getBoundingClientRect();\n\n        var rect = element.getBoundingClientRect();\n        this.style.top = (window.scrollY + rect.bottom)+\"px\";\n        this.style.left = (window.scrollX + rect.left + (rect.width / 2) - (tooltipRect.width / 2)) +\"px\";\n      }\n    }\n    topRightOnElementBottomRight(element, html) {\n      if(arguments.length > 1) {\n        this.style.top = \"-1000px\";\n        this.style.left = \"-1000px\";\n\n        if(typeof html === \"string\") {\n          this.innerHTML = html;\n        } else {\n          this.innerHTML = \"\";\n          this.appendChild(html);\n        }\n        \n        \n        this.style.display = \"\";\n\n        const tooltipRect = this.getBoundingClientRect();\n        const rect = element.getBoundingClientRect();\n\n        this.style.top = (window.scrollY + rect.bottom)+\"px\";\n        this.style.left = (window.scrollX + rect.left + (rect.width) - (tooltipRect.width)) +\"px\";\n      }\n    }\n    leftElement(event) {\n      this.style.display = \"none\";\n    }\n  }\n  customElements.define(\"simple-tooltip\", SimpleTooltip);\n  export default SimpleTooltip;\n\n\n\n  function findScrollingContainer(element){\n    let cur = element.parentElement;\n    while(cur && cur.scrollHeight === cur.clientHeight) {\n      cur = cur.parentElement;\n    }\n    if(!cur) {\n      return document.body\n    } else {\n      return cur;\n    }\n  }","import { StacheElement, type, ObservableObject, fromAttribute } from \"../../can.js\";\nimport SimpleTooltip from \"../simple-tooltip.js\";\n\n// create global tooltip reference\n\nconst TOOLTIP = new SimpleTooltip();\n\ndocument.body.append(TOOLTIP);\n\nclass AutoCompleteSuggestions extends StacheElement {\n    static view = `\n        \n        <ul class=\"max-h-80 overflow-y-auto\">\n            {{# if(this.data.length) }}\n                {{# for(item of this.data) }}\n                    <li class=\"px-2 hover:bg-blue-75 cursor-pointer\" on:click=\"this.add(item)\">{{item}}</li>\n                {{/ for }}\n            {{ else }}\n                <li>No matches</li>\n            {{/ if }}\n        </ul>\n    `;\n}\ncustomElements.define(\"auto-complete-suggestions\", AutoCompleteSuggestions);\n\nclass AutoComplete extends StacheElement {\n    static view = `\n        <div class=\"flex gap-2 align-middle flex-wrap\">\n            {{# for(item of this.selected) }}\n                <div class=\"border-neutral-800 border-solid border rounded-md whitespace-nowrap\">\n                    <label class=\"inline p-1\">{{item}}</label>\n                    <button class=\"text-red-500 text-sm py-1 px-2 bg-neutral-30 font-semibold rounded-r shadow-sm hover:bg-neutral-40\" on:click=\"this.remove(item, scope.event)\">x</button>\n                </div>\n            {{/ for }}\n            <input class=\"form-border rounded-md px-1 placeholder:italic placeholder:text-slate-400\" \n                placeholder=\"{{this.inputPlaceholder}}\"\n                on:focus=\"this.suggestItems(scope.element.value)\"\n                on:input=\"this.suggestItems(scope.element.value)\">\n        </div>\n    `;\n    static props = {\n        data:  {type: type.Any},\n        selected: {type: type.Any},\n        showingSuggestions: {type: Boolean, default: false}\n    };\n    remove(item, event) {\n        event.preventDefault();\n        this.selected = this.selected.filter( (selectedItem)=> {\n            return selectedItem != item;\n        });\n    }\n    add(item) {\n        this.selected = [...this.selected, item ];\n        this.querySelector(\"input\").value = \"\";\n        this.stopShowingSuggestions();\n    }\n    suggestItems(searchTerm){\n        const matches = this.data.filter( item => {\n            return item.toLowerCase().includes(searchTerm.toLowerCase()) && !this.selected.includes(item)\n        })\n        this.showingSuggestions = true;\n        // this could be made more efficient, but is probably ok\n        TOOLTIP.belowElement(this, \n            new AutoCompleteSuggestions().initialize({\n                searchTerm,\n                data: matches,\n                add: this.add.bind(this)\n            })\n        );\n    }\n    connected() {\n        // handle when someone clicks off the element\n        this.listenTo(window, \"click\", (event)=>{\n            // if we aren't showing, don't worry about it\n            if(!this.showingSuggestions) {\n                return;\n            }\n            // do nothing if the input was clicked on\n            if(this.querySelector(\"input\") === event.target) {\n                return\n            }\n            // do nothing if the TOOLTIP was clicked\n            if(TOOLTIP.contains(event.target)) {\n                return;\n            }\n            this.stopShowingSuggestions()\n        })\n    }\n    stopShowingSuggestions(){\n        TOOLTIP.leftElement();\n        this.showingSuggestions = false;\n    }\n}\n\n\ncustomElements.define(\"auto-complete\", AutoComplete);\n\nexport default AutoComplete;","import { StacheElement, type } from \"./can.js\";\nimport {\n  makeObjectMapByKey,\n  makeFilterByPropertyNotEqualToOneOfValues,\n  groupByKey,\n  splitByHavingPropertyValue,\n  partition,\n  stringToArray\n} from \"./helpers.js\";\n\nimport jsonLogic from \"./json-logic/json-logic.js\";\nimport \"./components/configure-json-logic/configure-json-logic.js\";\nimport \"./shared/autocomplete/autocomplete.js\";\nimport {saveJSONToUrl} from \"./shared/state-storage.js\";\n\n\nclass JiraConfigureCSV extends StacheElement {\n  static view = `\n    <h2 class=\"text-lg font-bold\">Overview</h2>\n    <p class=\" pb-2\">The Statistical AutoScheduler schedules Jira epics using story point estimates, confidences \n    and blockers between epics. By default, the AutoScheduler works with the setup described in \n    <a href=\"https://www.bitovi.com/academy/learn-agile-program-management-with-jira.html\">Learn Agile Program Management with Jira</a>. \n    If your Jira instance is different, you can make those changes here. \n    </p>\n    <p  class=\" pb-4\">All configuration changes are saved to the URL. Remember to bookmark this page after your setup is complete.</p>\n    <h2 class=\"text-lg font-bold\">Epic JQL</h2>\n    <div class=\"flex gap-6 flex-wrap pb-4\">\n      <div class=\"grow\">\n        \n        <p class=\"text-base my-1\">Specify a <a href=\"https://www.atlassian.com/software/jira/guides/jql/overview\">JQL</a> used to load the epics you \n        want to schedule.</p>\n        <p><input value:bind=\"this.issueJQL\" class=\"w-full text-base form-border\"/></p>\n        \n        {{# if(this.rawIssuesPromise.isRejected) }}\n          <div class=\"border-solid-1px-slate-900 border-box block overflow-hidden bg-yellow-500 p-1\">\n            <p>There was an error loading from Jira!</p>\n            <p>Error message: {{this.rawIssuesPromise.reason.errorMessages[0]}}</p>\n            <p>Please check your JQL is correct!</p>\n          </div>\n        {{/ if }}\n        <div class=\"flex justify-between mt-1\">\n      \n          <p class=\"text-xs\"><input type='checkbox' \n            class='self-start align-middle' checked:bind='this.loadChildren'/> <span class=\"align-middle\">Load all children of JQL specified issues</span>\n          </p>\n          \n          {{# if(this.rawIssuesPromise.isResolved) }}\n            <p class=\"text-xs\">Loaded {{this.rawIssues.length}} issues</p>\n          {{/ if }}\n          {{# if(this.rawIssuesPromise.isPending) }}\n            <p class=\"text-xs text-right\">Loading issues ...</p>\n          {{/ if }}\n        </div>\n        <p class=\"text-xs\"><input type='checkbox' \n            class='self-start align-middle' checked:bind='this.limitIssues'/> <span class=\"align-middle\">Limit to 100 issues</span>\n        </p>\n          \n\n\n      </div>\n      <div class=\"lg:w-112 bg-neutral-30 p-1 w-full\">\n        <p class=\"my-1 text-sm\">\n        JQL is a SQL-like syntax used to load issues. For more information, read <a href=\"https://www.atlassian.com/software/jira/guides/jql/overview\">JQL Overview</a>.\n        Use <code class=\"inline-code  whitespace-nowrap\">issuekey in portfolioChildIssuesOf(\"KEY\")</code> to load all issues for a single initiative.</p>\n      </div>\n    </div>\n    <h2 class=\"text-lg font-bold\">Median Estimate Field(s)</h2>\n    <div class=\"flex gap-6 flex-wrap pb-4\">\n      <div class=\"grow\">\n        \n        <p class=\"text-base my-1\">What field(s) provide the median estimate?</p>\n        <auto-complete \n          data:from=\"this.config.sortedFieldNames\" \n          selected:bind=\"this.config.medianEstimateFields\"\n          inputPlaceholder:raw=\"Search for field\"></auto-complete>\n      </div>\n      <div class=\"lg:w-112 bg-neutral-30 p-1 w-full\">\n        <p class=\"my-1 text-sm\">\n          The median estimate is the average amount of time the epic will take to complete.\n          See <a href=\"https://www.bitovi.com/academy/learn-agile-program-management-with-jira/continuous-exploration-board.html#adding-custom-fields\">Adding Custom Fields</a>\n          for how to create a <code class=\"inline-code\">Story points median</code> field.\n        </p>\n      </div>\n    </div>\n\n    <h2 class=\"text-lg font-bold\">Confidence Field(s)</h2>\n    <div class=\"flex gap-6 flex-wrap pb-4\">\n      <div class=\"grow\">\n        \n        <p class=\"text-base my-1\">What field(s) provide the confidence?</p>\n        <auto-complete \n          data:from=\"this.config.sortedFieldNames\" \n          selected:bind=\"this.config.confidenceFields\"\n          inputPlaceholder:raw=\"Search for field\"></auto-complete>\n      </div>\n      <div class=\"lg:w-112 bg-neutral-30 p-1 w-full\">\n        <p class=\"my-1 text-sm\">\n          Confidence is how certain your team feels about the median estimate. \n          See the <a href=\"https://bitovi.github.io/statistical-software-estimator/\">Statistical Software Estimator</a> for a deeper understanding \n          on how confidence and median estimate work together. \n          See <a href=\"https://www.bitovi.com/academy/learn-agile-program-management-with-jira/continuous-exploration-board.html#adding-custom-fields\">Adding Custom Fields</a>\n          for how to create a <code class=\"inline-code\">Story points confidence</code> field.\n        </p>\n      </div>\n    </div>\n\n\n    <h2 class=\"text-lg font-bold\">Adjusted Story Point Output Field</h2>\n    <div class=\"flex gap-6 flex-wrap pb-4\">\n      <div class=\"grow\">\n        \n        <p class=\"text-base my-1\">What field should have the resulting story points?</p>\n        <auto-complete \n          data:from=\"this.config.sortedFieldNames\" \n          selected:bind=\"this.config.storyPointField\"\n          inputPlaceholder:raw=\"Search for field\"></auto-complete>\n      </div>\n      <div class=\"lg:w-112 bg-neutral-30 p-1 w-full\">\n        <p class=\"my-1 text-sm\">\n          This AutoScheduler writes to the <code class=\"inline-code\">Adjusted Story Point</code> field the adjusted story points \n          combining the median estimate and confidence. This should typically be Jira's default <code class=\"inline-code\">Story points</code>\n          field. See the <a href=\"https://bitovi.github.io/statistical-software-estimator/\">Statistical Software Estimator</a> for a deeper understanding \n          on how confidence and median estimate work together. \n        </p>\n      </div>\n    </div>\n\n    <h2 class=\"text-lg font-bold\">Start Date Output Field</h2>\n    <div class=\"flex gap-6 flex-wrap pb-4\">\n      <div class=\"grow\">\n        \n        <p class=\"text-base my-1\">What field should have the resulting story points?</p>\n        <auto-complete \n          data:from=\"this.config.sortedFieldNames\" \n          selected:bind=\"this.config.startDateField\"\n          inputPlaceholder:raw=\"Search for field\"></auto-complete>\n      </div>\n      <div class=\"lg:w-112 bg-neutral-30 p-1 w-full\">\n        <p class=\"my-1 text-sm\">\n          The AutoScheduler writes epic start dates to the <code class=\"inline-code\">Start date</code> field.\n          This should typically be Jira's default <code class=\"inline-code\">Start date</code> field.\n        </p>\n      </div>\n    </div>\n\n    <h2 class=\"text-lg font-bold\">Due Date Output Field</h2>\n    <div class=\"flex gap-6 flex-wrap pb-6\">\n      <div class=\"grow\">\n        \n        <p class=\"text-base my-1\">What field should have the resulting story points?</p>\n        <auto-complete \n          data:from=\"this.config.sortedFieldNames\" \n          selected:bind=\"this.config.dueDateField\"\n          inputPlaceholder:raw=\"Search for field\"></auto-complete>\n      </div>\n      <div class=\"lg:w-112 bg-neutral-30 p-1 w-full\">\n        <p class=\"my-1 text-sm\">\n          The AutoScheduler writes epic end dates to the <code class=\"inline-code\">Due date</code> field.\n          This should typically be Jira's default <code class=\"inline-code\">Due date</code> field.\n        </p>\n      </div>\n    </div>\n\n    <details class=\"border-yellow-500 border-solid border bg-white mt-4\">\n      <summary class=\"text-base p-3 bg-yellow-500 cursor-pointer\">\n        Advanced Configuration\n      </summary>\n      <div class=\"p-2\">\n        <p class=\"mb-4\">The following configuration allows for complex rules to be provided to the AutoScheduler via \n          <a href=\"https://jsonlogic.com/\">JsonLogic</a>.  If you need help, reach out on <a href=\"https://discord.gg/J7ejFsZnJ4\">Bitovi's Discord</a>.\n        </p>\n        <h2 class=\"text-lg font-bold\">Get Team Key</h2>\n        <p>Given an issue, returns a key that represents which team will take on the work.</p>\n        <jira-configure-json-logic rawIssues:from=\"this.rawIssues\" jsonLogic:bind=\"this.config.getTeamKeyJsonLogic\"/>\n    \n    \n        <h2 class=\"text-lg font-bold\">Get Days Per Sprint</h2>\n        <p>Given a team, returns the number of work days in a sprint.</p>\n        <jira-configure-json-logic rawIssues:from=\"this.rawIssues\" jsonLogic:bind=\"this.config.getDaysPerSprintJsonLogic\"/>\n    \n        <h2 class=\"text-lg font-bold\">Get Confidence</h2>\n        <p>Given an issue, returns the conflidence (from 0-100)</p>\n        <jira-configure-json-logic rawIssues:from=\"this.rawIssues\" jsonLogic:bind=\"this.config.getConfidenceJsonLogic\"/>\n    \n        <h2 class=\"text-lg font-bold\">Get Estimate</h2>\n        <p>Given an issue, returns the amount of work in story points.</p>\n        <jira-configure-json-logic rawIssues:from=\"this.rawIssues\" jsonLogic:bind=\"this.config.getEstimateJsonLogic\"/>\n    \n        <h2 class=\"text-lg font-bold\">Get Parent Key</h2>\n        <p>Given an issue, returns the container issue's key.</p>\n        <jira-configure-json-logic rawIssues:from=\"this.rawIssues\" jsonLogic:bind=\"this.config.getParentKeyJsonLogic\"/>\n    \n    \n        <h2 class=\"text-lg font-bold\">Get Blocking Keys</h2>\n        <p>Given an issue, returns an array of keys that the issue blocks.</p>\n        <jira-configure-json-logic rawIssues:from=\"this.rawIssues\" jsonLogic:bind=\"this.config.getBlockingKeysJsonLogic\"/>\n    \n        <h2 class=\"text-lg font-bold\">Types</h2>\n        {{# if(this._showTypeInfo) }}\n          <ul>\n            {{# for( issueType of this.issueTypes) }}\n              <li>{{issueType}} -\n                    {{this.issuesByType[issueType].length}} -\n    \n                  <details><summary>Settings</summary>\n                  {{# let keys=this.issueTypesKeysWithValues[issueType] }}\n    \n                    <ul>\n                    {{# for(keyItem of keys)}}\n                      <li><b>{{keyItem.key}}</b>:\n                        <select>\n                          {{# for(value of keyItem.values) }}\n                            <option>{{value}}</option>\n                          {{/ for}}\n                        </select>\n                      </li>\n                    {{/ for}}\n                    </ul>\n                  {{/ let }}\n                  </details>\n              </li>\n            {{/ for }}\n          </ul>\n        {{ else }}\n          <button on:click=\"this.showTypeInfo()\">Show Type Info</button>\n        {{/ if }}\n      </div>\n\n  </details>\n\n    \n  `;\n  static props = {\n    rawIssues: type.Any,\n    rawIssuesPromise: type.Any,\n    config: type.Any,\n    _showTypeInfo: {Type: Boolean, default: false},\n\t\t\n  }\n  /*{\n      value({resolve, lastSet, listenTo}) {\n        if (lastSet.value) {\n            resolve(lastSet.value)\n        } else {\n            const parsed = JSON.parse( new URL(window.location).searchParams.get(key) || defaultJSON );\n            if(parsed && dateMatch.test(parsed)) {\n              resolve( new Date(parsed) );\n            } else {\n              resolve( parsed );\n            }\n        }\n\n        listenTo(lastSet, (value) => {\n            const newUrl = new URL(window.location);\n            const valueJSON = JSON.stringify(value);\n            if(valueJSON !== defaultJSON) {\n              newUrl.searchParams.set(key, valueJSON );\n            } else {\n              newUrl.searchParams.delete(key );\n            }\n            history.pushState({}, '', newUrl);\n            resolve(value);\n        })\n\n\n        // calculate the default from fields \n        const findDefaults = (allFields)=> {\n  \n           allFields.filter( f => {\n            const lowerFieldName = f.toLowerCase();\n            return lowerFieldName.includes(\"story\") && lowerFieldName.includes(\"points\") && \n             ( lowerFieldName.includes(\"median\") || lowerFieldName.includes(\"average\") )\n          })\n        }\n        \n        listenTo(\"fields\",({value})=>{\n\n        })\n\n        \n      }*/\n\n\n  get issuesByType(){\n    return groupByKey(this.rawIssues || [], \"Issue Type\");\n  }\n  get issueTypes(){\n    return Object.keys(this.issuesByType);\n  }\n  // {Epic: {key: \"Story Points\": values: [10,20]}}\n  get issueTypesKeysWithValues(){\n    const types = {};\n    for(let type in this.issuesByType) {\n      const keyMap = {};\n      for(let issue of this.issuesByType[type]) {\n        for(let key in issue) {\n\n          if( isMeaningfulData( issue[key] ) )  {\n            if(!keyMap[key]) {\n              keyMap[key] = new Set();\n            }\n            keyMap[key].add( getMeaningfulData(issue[key]) );\n          }\n        }\n      }\n      types[type] = Object.keys(keyMap).map( (key)=> {\n          const values = [...keyMap[key]];\n          return {\n            key: key,\n            values: values,\n            example: values[0],\n          }\n      })\n    }\n    return types;\n  }\n\n  connected(){\n\n  }\n\n  changeParentKey(){\n\n  }\n  showTypeInfo(){\n    this._showTypeInfo = true;\n  }\n\n}\ncustomElements.define(\"jira-configure-csv\", JiraConfigureCSV);\n\n\nfunction isMeaningfulData(value) {\n  if(value === \"\") {\n    return false;\n  }\n\n  if(Array.isArray(value)) {\n    return value.some( isMeaningfulData )\n  }\n  return /\\S/.test(value);\n}\n\nfunction getMeaningfulData(value){\n  if(Array.isArray(value)) {\n    return value.find( isMeaningfulData )\n  } else {\n    return value;\n  }\n}\n","import { ObservableObject, type } from \"./can.js\";\n\nimport jsonLogic from \"./json-logic/json-logic.js\";\nimport {saveJSONToUrl, saveToLocalStorage} from \"./shared/state-storage.js\";\n\nwindow.jsonLogic = jsonLogic;\n\n\n\n\n\nfunction getJsonLogicFunction(key) {\n  return {\n    get(){\n      const keyValue = this[key];\n      return function(issue){\n        return jsonLogic.apply(keyValue, issue );\n      };\n    }\n  }\n}\n\n\n\n\n\nfunction makeLogicAndFunctionDefinition(key, defaultValue){\n  return {\n    [key+\"JsonLogic\"]: saveToLocalStorage(key, defaultValue),\n    [key]: getJsonLogicFunction(key+\"JsonLogic\")\n  };\n}\n\nfunction makeLogicAndFunctionDefinitionSaveToUrl(key, defaultValue){\n  return {\n    [key+\"JsonLogic\"]: saveJSONToUrl(key, defaultValue),\n    [key]: getJsonLogicFunction(key+\"JsonLogic\")\n  };\n}\n\n\nexport class Configure extends ObservableObject {\n  static props = {\n\t\tfields: {type: type.Any},\n    get sortedFieldNames(){\n\n\t\t\treturn this.fields.list.sort( (f1, f2)=>{\n\t\t\t\treturn f1.name > f2.name ? 1 : -1\n\t\t\t}).map( f=> f.name );\n\t  },\n    medianEstimateFields: saveJSONToUrl(\n      \"medianEstimateFields\", \n      function(){\n        return this.sortedFieldNames.filter( f => {\n          const lowerFieldName = f.toLowerCase();\n          return lowerFieldName.includes(\"story\") && lowerFieldName.includes(\"points\") && \n          ( lowerFieldName.includes(\"median\") || lowerFieldName.includes(\"average\") ) \n        } )\n      },\n      type.Any),\n    confidenceFields: saveJSONToUrl(\n      \"confidenceFields\", \n      function(){\n        const haveConfidence = this.sortedFieldNames.filter( f => {\n          const lowerFieldName = f.toLowerCase();\n          return lowerFieldName.includes(\"confidence\")  \n        });\n        if(haveConfidence.length > 1) {\n          const withStory = haveConfidence.filter( field => field.toLowerCase().includes(\"story\"));\n          if(withStory.length > 1) {\n            return withStory;\n          } else {\n            return haveConfidence;\n          }\n        } else {\n          return haveConfidence;\n        }\n      },\n      type.Any),\n    storyPointField: saveJSONToUrl(\n      \"storyPointField\", \n      function(){\n        const storyPoints = this.sortedFieldNames.filter( f => {\n          const lowerFieldName = f.toLowerCase();\n          return lowerFieldName === \"Story points\"\n        });\n        if(storyPoints.length  === 1) {\n          return storyPoints;\n        } else {\n          return this.sortedFieldNames.filter( f => {\n            const lowerFieldName = f.toLowerCase();\n            return lowerFieldName.includes(\"story\") && lowerFieldName.includes(\"points\") && \n            !( lowerFieldName.includes(\"median\") || lowerFieldName.includes(\"average\") || lowerFieldName.includes(\"confidence\") ) \n          });\n        }\n      },\n      type.Any),\n    startDateField: saveJSONToUrl(\n      \"startDateField\", \n      function(){\n        const startDate = this.sortedFieldNames.filter( f => f === \"Start date\");\n        return startDate.length ? [startDate[0]] :[]\n      },\n      type.Any),\n    dueDateField: saveJSONToUrl(\n      \"dueDateField\", \n      function(){\n        const dueDate = this.sortedFieldNames.filter( f => f === \"Due date\");\n        return dueDate.length ? [dueDate[0]] :[]\n      },\n      type.Any),\n\n    // we need to know this right away\n    get issueFields(){\n      return [\"Summary\", \"Issue Type\",\"status\",\"Linked Issues\", \"Team\",\"Parent\",\n        this.startDateField, this.dueDateField,\n        ...this.medianEstimateFields, ...this.confidenceFields, ...this.storyPointField]\n    },\n    /*\n\t\tissueFields: saveJSONToUrl(\"issueFields\", [\n\t\t\t\"Summary\",\n\t\t\t\"Start date\",\n\t\t\t\"Due date\",\n\t\t\t\"Issue Type\",\n\t\t\t\"Story points median\",\n\t\t\t\"Story points\",\n\t\t\t\"status\",\n\t\t\t\"Story points confidence\",\n\t\t\t\"Story Points Confidence\",\n\t\t\t\"Confidence\",\n\t\t\t\"Linked Issues\"\n\t\t]),*/\n\n    ...makeLogicAndFunctionDefinition(\"getTeamKey\", {\"or\":[{\"var\": \"Team.name\"},{\"var\": \"Project key\"}]}),\n\n    ...makeLogicAndFunctionDefinition(\"getDaysPerSprint\", 10),\n\n    ...makeLogicAndFunctionDefinitionSaveToUrl(\"getConfidence\", function(){\n      return this.confidenceFields.length === 1 ?\n        {var: this.confidenceFields[0]} :\n        {\n          \"reduce\": [\n            this.confidenceFields.map( (name)=> { return {var: name}; } ),\n            \n\n            {\n              \"if\": [\n                { \"and\": [ { \"!\": { \"var\": \"accumulator\" } }, { \"var\": \"current\" } ] },\n                { \"var\": \"current\" },\n                { \"var\": \"accumulator\" }\n              ]\n            },\n            null\n          ]\n        }\n    } ),\n    ...makeLogicAndFunctionDefinitionSaveToUrl(\"getEstimate\", function(){\n      return {var: this.medianEstimateFields[0]}\n    }),\n\n    ...makeLogicAndFunctionDefinition(\"getParentKey\", {\"var\": \"Custom field (Parent Link)\"}),\n    ...makeLogicAndFunctionDefinition(\"getBlockingKeys\", {\"var\": \"linkedIssues.blocks\"})\n  };\n}\n\n\n\n/*\n{\n      \"or\": [\n        {\"+\" :[\n          0,\n          // adds to the first element of the array\n          { filter: [\n            { merge: [{var: \"Story points median\"},{ var: \"Story Points\" } ] },\n            { \"!==\": [{\"var\":\"\"}, null] }\n          ]}\n        ]},\n        undefined\n      ]\n    }\n*/","import {prepareIssues} from \"./schedule-prepare-issues.js\";\n\n// I think we might be able to pass in an array of issue plan orders. \n// This might keep things much more stable ...\n\n// This is the main function that schedule issues.\n// issues - a raw list of issue objects, no metadata\n// options - a whole bunch of configuration options\nexport function scheduleIssues(issues, options){\n  const {\n    onPlannedIssueIncrement, \n    onPlannedIssues,\n\n    // True will plan issues in the same order as when planned if probablisticallySelectIssueTiming is false\n    // This allows a more stable \"order\" to be provided\n    planIssuesInUncertaintyOrder\n  } = {\n    onPlannedIssueIncrement: (issue, workByTeams) => {},\n    onPlannedIssues: (workByTeams) => {},\n    planIssuesInUncertaintyOrder: false,\n    ...options\n  }\n  // prepares a copy of issues that should be plotted.  Each issue\n  // has a `.work` item with velocity and such.\n  const {\n    preparedIssues,\n    issuesByKey,\n    workByTeams} = prepareIssues(issues, options);\n\n\n  // adds a .blocksWorkDepth .. this is used to determine the order issues are scheduled in\n  if(planIssuesInUncertaintyOrder) {\n    preparedIssues.forEach(issue => deterministicBlocksWorkDepth(issue));\n  } else {\n    preparedIssues.forEach(issue => blocksWorkDepth(issue));\n  }\n  \n\n  // Sorts by the items that has the most work\n  preparedIssues.sort((iA, iB) => iB.blocksWorkDepth - iA.blocksWorkDepth);\n\n  // starting with the issue that blocks the most work\n  preparedIssues.forEach( (issue)=> {\n    // plan that issue out\n    planIssue(issue, workByTeams);\n    onPlannedIssueIncrement(issue, workByTeams);\n\n  });\n  onPlannedIssues(workByTeams);\n}\n\n\n\nfunction blocksWorkDepth(issue) {\n    if(issue.blocksWorkDepth !== undefined) {\n        return issue.blocksWorkDepth;\n    }\n    if(!issue.blocks || !issue.blocks.length) {\n        return issue.blocksWorkDepth = issue.work.daysOfWork;\n    } else {\n        return issue.blocksWorkDepth = issue.work.daysOfWork + issue.blocks.reduce( (max, issue)=> {\n            return Math.max(max,  blocksWorkDepth(issue) );\n        },0)\n    }\n}\n// I could resuse the function above, but this is easier\n// This makes the planning order deterministic \nfunction deterministicBlocksWorkDepth(issue) {\n  if(issue.blocksWorkDepth !== undefined) {\n      return issue.blocksWorkDepth;\n  }\n  if(!issue.blocks || !issue.blocks.length) {\n      return issue.blocksWorkDepth = issue.work.deterministicDaysOfWork;\n  } else {\n      return issue.blocksWorkDepth = issue.work.deterministicDaysOfWork + issue.blocks.reduce( (max, issue)=> {\n          return Math.max(max,  deterministicBlocksWorkDepth(issue) );\n      },0)\n  }\n}\n\n// This function tries to plan an issue.\n// It is recursive. It will plan the issue and then try to plan everything the issue\n// blocks.\nfunction planIssue(issue, workByTeams) {\n    var work = issue.work;\n\n    // Has everything that blocks this work already been scheduled?\n    if( areAllBlockersScheduled(work) ) {\n\n        // schedule\n        if(work.startDay == null) {\n            // Look at each blocker and get the first date when all blockers will be done\n            var firstDayWorkCouldStartOn = earliestStartTimeFromBlockers(work);\n\n\n            /*console.log(new Array(firstDayWorkCouldStartOn).join(\" \"),\n              issue.blocksWorkDepth,\n              issue.work.daysOfWork,\n              issue.Summary,\n              \"rescheduled\");*/\n\n            // Try to place this work in the first place the team could absorb it.\n            scheduleIssue(work, firstDayWorkCouldStartOn );\n\n            if(issue.blocks) {\n              issue.blocks.sort((iA, iB) => iB.blocksWorkDepth - iA.blocksWorkDepth)\n                .forEach( block => planIssue(block, workByTeams));\n            }\n        }\n\n    } else {\n      // If there is a blocker that hasn't been scheduled, we will wait on the blocker\n      // to be scheduled.  It will then recurse to this issue and schedule it.\n    }\n}\n\n// Try to find the first available time  the work could be scheduled for this team.\nfunction scheduleIssue(work, firstDayWorkCouldStartOn) {\n\n    var team = work.team;\n\t\t//if(work.issue[\"Issue key\"] === \"YUMPOS-4131\") {\n\t\t//\tdebugger;\n\t\t//}\n\n\t\tteam.workPlans.sheduleWork(work, firstDayWorkCouldStartOn);\n\t\t//console.log(new Array(Math.ceil(work.startDay / 2)).join(\" \"), work.startDay, work.issue.Summary)\n\t\treturn work;\n}\n\n\n\n\n\n\n// Start day is set on everything\nfunction areAllBlockersScheduled(work){\n    return  (work.issue.blockedBy || []).every( (issue)=> issue.work.startDay != null )\n}\n\n// The earliest start day an issue could start on. Calculated\n// by looking at when blockers to this issue end.\nfunction earliestStartTimeFromBlockers(work) {\n    return work.issue.blockedBy ? work.issue.blockedBy.reduce( (prev, issue)=> {\n        return Math.max(prev, issue.work.startDay + issue.work.daysOfWork )\n    }, 0) : 0;\n}\n","import { StacheElement, type, ObservableObject, fromAttribute, queues } from \"./can.js\";\nimport {bestFitRanges, getUTCEndDateFromStartDateAndBusinessDays} from \"./shared/dateUtils.js\"\nimport SimpleTooltip from \"./shared/simple-tooltip.js\";\n\nimport {estimateExtraPoints} from \"./shared/confidence.js\";\n\nconst TOOLTIP = new SimpleTooltip();\n\ndocument.body.append(TOOLTIP);\n\n\nclass SimulationData extends StacheElement {\n    static view = `\n\n    {{# and(this.showingData, not(this.work.dueDatesOnly)) }}\n        <div class=\"grid transition-all ease-in-out duration-300 h-0 box-border top-3 relative hover:bg-neutral-10 transition-colors\" \n            style=\"grid-template-columns: repeat({{plus(this.lastDueDay, 1)}}, 1fr); grid-template-rows: auto;\">\n                \n            {{# for( column of this.startColumns ) }}\n                <div \n                    on:mouseenter=\"this.showProbabilityData(scope.event, column)\" \n                    on:mouseleave=\"this.hideProbabilityData()\"\n                    class=\"flex h-full group hover:bg-neutral-30 transition-colors\">\n                    <div\n                        class=\"self-end bg-blue-100 w-full group-hover:bg-blue-200 transition-colors\" style=\"height: {{column.percentValue}}%\"></div>\n                </div>\n            {{/ }}\n        </div>\n    {{/ and }}\n    \n    <div class=\"relative py-1 z-50\"\n        on:click=\"this.toggleShowingExtraData()\"\n        >\n        {{# if(this.work.dueDatesOnly)}}\n\n            <div id=\"{{work.work.issue[\"Issue key\"]}}\"\n                on:mouseenter=\"this.showProbabilitySumary(scope.event)\"\n                on:mouseleave=\"this.hideProbabilityData()\"\n                class=\"work-item cursor-pointer  relative bg-gradient-to-r from-green-200 to-green-400 from-45% to-55% h-4 border-box  {{ this.rangeBorderClasses() }}\" \n                style=\"left: {{this.percent(work.dueDateBottom)}}; width: {{this.percentWidth(work.dueDateBottom, work.dueDateTop)}}\"></div>\n        {{ else }}\n        <div \n            class=\"absolute bg-gradient-to-r from-blue-200 to-green-200 from-85% to-95% h-1 top-2.5 border-box\" \n            style=\"left: {{this.percent(work.startDateBottom)}}; width: {{this.percentWidth(work.startDateBottom, work.dueDateTop)}}\"></div>\n\n        <div id=\"{{work.work.issue[\"Issue key\"]}}\"\n            on:mouseenter=\"this.showProbabilitySumary(scope.event)\"\n            on:mouseleave=\"this.hideProbabilityData()\"\n            class=\"work-item cursor-pointer {{ this.rangeBorderClasses() }} relative bg-gradient-to-r from-blue-500 to-green-400 from-45% to-55% h-4 border-box rounded\" \n            style=\"left: {{this.percent(work.startDateWithTimeEnoughToFinish)}}; width: {{this.percentWidth(work.startDateWithTimeEnoughToFinish, work.dueDateTop)}}\"></div>\n        {{/ }}\n    </div>\n    {{# if(this.showingData) }}\n        <div class=\"grid transition-all ease-in-out duration-300 h-0 box-border pb-1 relative -top-3  hover:bg-neutral-10 transition-colors\" \n            style=\"grid-template-columns: repeat({{ plus(this.lastDueDay, 1) }}, 1fr); grid-template-rows: auto;\">\n                \n            {{# for( column of this.endColumns ) }}\n                <div \n                    on:mouseenter=\"this.showProbabilityData(scope.event, column)\" \n                    on:mouseleave=\"this.hideProbabilityData()\"\n                    class=\"flex h-full group hover:bg-neutral-30 transition-colors\">\n                    <div\n                        class=\"self-start bg-green-100 w-full group-hover:bg-green-300 transition-colors\" style=\"height: {{column.percentValue}}%\"></div>\n                </div>\n                \n            {{/ }}\n        </div>\n    {{/ if }}\n    `;\n    static props = {\n        work: type.Any,\n        lastDueDay: Number,\n        showingData: {default: false},\n        startDate: Date\n    };\n    \n    get startColumns(){\n        return createColumnData(this.work.startDateValues, this.lastDueDay+1, \"startDate\");\n    }\n    get endColumns(){\n        return createColumnData(this.work.dueDateValues, this.lastDueDay+1, \"dueDate\");\n    }\n    showProbabilityData(event, column){\n        const date = getUTCEndDateFromStartDateAndBusinessDays(this.startDate, column.day);\n        const monthDateFormatter = new Intl.DateTimeFormat('en-US', { month: 'short', day: 'numeric', timeZone: 'UTC' });\n\n        const values = this.work[column.type+\"Values\"];\n        const index = values.findIndex((value)=> {\n            return value > column.day;\n        });\n        const cumulativeProbability = (index === -1 ? values.length : index) / values.length;\n\n        const timingName = column.type === \"startDate\" ? \"starts before or on\" : \"ends after or on\";\n        const pastTenseName = column.type === \"startDate\" ? \"started\" : \"ended\";\n        let probability = column.type === \"startDate\" ? cumulativeProbability*100 : (1-cumulativeProbability)* 100;\n        const color = column.type === \"startDate\" ? \"bg-blue-500\" : \"bg-green-500\";\n        \n\n        TOOLTIP.belowElementInScrollingContainer(event.currentTarget, `\n            <div class=\"p-2\">\n                <div class=\"${color} rounded text-white text-center p-1\">\n                    <h5>${toFixed(probability,1)}% chance</h5>\n                    <p class=\"text-sm\">epic ${timingName}</p>\n                    <p>${monthDateFormatter.format(date)}.</p>\n                </div>\n                <div class=\"bg-neutral-200 rounded text-white mt-2 p-1 text-center\">\n                    <h5> ${toFixed( 100*  column.totalCount / this.work[column.type+\"Values\"].length, 1 )}% of the time,</h5>\n                    <p>the work ${pastTenseName} this day.</p>\n                </div>\n            </div>\n        `)\n    }\n    hideProbabilityData(){\n        TOOLTIP.leftElement();\n    }\n    showProbabilitySumary(event) {\n        \n        const monthDateFormatter = new Intl.DateTimeFormat('en-US', { month: 'short', day: 'numeric', timeZone: 'UTC' });\n        const dates = getDatesFromWork(this.work,this.startDate);\n        const dueDatesOnly = this.work.dueDatesOnly;\n        \n        const startDateBottom10 = dates.startDate10;\n  \n        const dueDateTop90 = dates.dueDate90; \n \n        let rangeStartChance, \n            rangeStartDate = dates.startDate,\n            rangeEndChance,\n            rangeEndDate = dates.dueDate;\n        if(this.work.uncertaintyWeight === \"average\") {\n            rangeStartChance = rangeEndChance = \"On average\";\n        } else {\n            rangeStartChance = rangeEndChance = `${this.work.uncertaintyWeight}% chance`;\n        }\n        if(!dueDatesOnly) {\n            TOOLTIP.belowElementInScrollingContainer(event.currentTarget, `\n                <div class=\"p-2\">\n                    <div class=\"flex gap-2\">\n                        <div class=\"bg-blue-200 rounded text-center p-1\">\n                            <h5>${rangeStartChance}</h5>\n                            <p class=\"text-sm\">epic starts on or after</p>\n                            <p>${monthDateFormatter.format(rangeStartDate)}</p>\n                            \n                        </div>\n                        <div class=\"bg-blue-500 rounded text-white text-center p-1 grow\">\n                            <h5>Epic should start</h5>\n                            <p class=\"text-sm\">earlier than</p>\n                            <p>${monthDateFormatter.format(dates.startDateWithTimeEnoughToFinish)}</p>\n                        </div>\n                        <div class=\"bg-green-500 rounded text-white text-center p-1\">\n                            <h5>${rangeEndChance}</h5>\n                            <p class=\"text-sm\">epic ends before</p>\n                            <p>${monthDateFormatter.format(rangeEndDate)}</p>\n                        </div>\n                    </div>\n                    ${dueDatesOnly ? \"\" :\n                    `<dl class=\"bg-neutral-200 rounded text-white mt-2 p-1 grid gap-2\"\n                        style=\"grid-template-columns: repeat(4, auto);\">\n                        <dt>Median Estimate</dt>\n                        <dd class=\"${this.work.work.estimate === null ? `border-solid border-2 border-yellow-500` : \"\"} text-right\">${this.work.work.estimate}</dd>\n                        <dt>Confidence</dt>\n                        <dd class=\"${this.work.work.confidence === null ? `border-solid border-2 border-yellow-500` : \"\"} text-right\">${this.work.work.confidence}</dd>\n                        \n                        ${\n                            this.work.work.estimate === null || this.work.work.confidence === null ? \n                            `\n                            <dt>Default Estimate</dt>\n                            <dd class=\"text-right\">${this.work.work.usedEstimate}</dd>\n                            <dt>Default Confidence</dt>\n                            <dd class=\"text-right\">${this.work.work.usedConfidence}</dd>\n                            ` :\n                            \"\"\n                        }\n                        \n                        <dt>Median Days of Work</dt>\n                        <dd class=\"text-right\">${this.work.work.estimatedDaysOfWork}</dd>\n                        <dt>Adjusted Days of Work</dt>\n                        <dd class=\"text-right\">${ Math.round( this.work.adjustedDaysOfWork ) }</dd>\n                    </dl>`\n                    }\n                    \n                </div>\n            `)\n        } else {\n\n            if(this.work.uncertaintyWeight === \"average\") {\n                TOOLTIP.belowElementInScrollingContainer(event.currentTarget, `\n                    <div class=\"p-2\">\n                        <div class=\"flex gap-2\">\n                            <div class=\"bg-green-200 rounded text-white text-center p-1\">\n                                <h5>On Average</h5>\n                                <p class=\"text-sm\">work ends</p>\n                                <p>${monthDateFormatter.format(dates.dueDateBottom)}</p>\n                            </div>\n                        </div>\n                    </div>\n                `)\n            } else {\n                TOOLTIP.belowElementInScrollingContainer(event.currentTarget, `\n                <div class=\"p-2\">\n                    <div class=\"flex gap-2\">\n                        <div class=\"bg-green-200 rounded text-white text-center p-1\">\n                            <h5>${rangeStartChance}</h5>\n                            <p class=\"text-sm\">work ends after</p>\n                            <p>${monthDateFormatter.format(dates.dueDateBottom)}</p>\n                        </div>\n                        <div class=\"bg-green-400 rounded text-white text-center p-1\">\n                            <h5>${rangeStartChance}</h5>\n                            <p class=\"text-sm\">work ends before</p>\n                            <p>${monthDateFormatter.format(rangeEndDate)}</p>\n                        </div>\n                    </div>\n                </div>\n            `)\n            }\n            \n        }\n\n        \n    }\n    rangeBorderClasses() {\n        // this.work.dueDatesOnly\n        // work.dueDateBottom, work.dueDateTop\n        if(this.work.dueDatesOnly) {\n            if(this.work.dueDateBottom === this.work.dueDateTop) {\n                return \"border-solid border border-x-4 border-green-200\"\n            } else {\n                return \"border-solid border border-[6px] border-white\";\n            }\n        }\n        if(this.work.work.estimate === null || this.work.work.confidence === null) {\n            return \"border-solid border-2 border-yellow-500\";\n        } else {\n            return \"border-solid border\";\n        }\n    }\n    plus(a, b){\n        return a+b;\n    }\n    connected(){\n        \n        this.listenTo(\"showingData\",({value})=>{\n            if(value) {\n                setTimeout(() => {\n                    for( const grid of this.querySelectorAll(\".grid\") ) {\n                        grid.classList.add(\"h-24\");\n                        grid.classList.remove(\"h-0\");\n                    }\n                    setTimeout(()=>{\n                        this.dispatch(\"resized\");\n                    },150)\n                    setTimeout(()=>{\n                        this.dispatch(\"resized\");\n                    },300)\n                },1)\n            } else {\n                this.dispatch(\"resized\");\n            }\n        });\n    }\n    percent(value) {\n        return ((value / this.lastDueDay)* 100 )+\"%\";\n    }\n    percentWidth(start, end){\n        return (((end - start ) / this.lastDueDay)* 100 )+\"%\";\n    }\n    toggleShowingExtraData(){\n        this.showingData = !this.showingData\n    }\n}\n\n\nexport function getDatesFromWork(work,startDate){\n    \n    let additionalPoints = estimateExtraPoints(work.work.usedEstimate, work.work.usedConfidence, work.uncertaintyWeight );\n\n    let rangeStartDate,\n        rangeEndDate;\n    if(work.uncertaintyWeight === \"average\") {\n        rangeStartDate = getUTCEndDateFromStartDateAndBusinessDays(startDate, work.startDateAverage);\n        rangeEndDate = getUTCEndDateFromStartDateAndBusinessDays(startDate, work.dueDateAverage);\n    } else {\n        rangeStartDate = getUTCEndDateFromStartDateAndBusinessDays(startDate, work.startDateBottom);\n        rangeEndDate = getUTCEndDateFromStartDateAndBusinessDays(startDate, work.dueDateTop);\n    }\n\n    return {\n        additionalPoints,\n        totalPoints: work.work.usedEstimate + additionalPoints,\n        startDate: rangeStartDate,\n        dueDate: rangeEndDate,\n        \n        startDate10: getUTCEndDateFromStartDateAndBusinessDays(startDate, work.startDateBottom10),\n        dueDate10: getUTCEndDateFromStartDateAndBusinessDays(startDate, work.dueDateBottom10),\n        dueDate90: getUTCEndDateFromStartDateAndBusinessDays(startDate, work.dueDateTop90),\n        dueDateBottom: getUTCEndDateFromStartDateAndBusinessDays(startDate, work.dueDateBottom),\n        startDateAverage: getUTCEndDateFromStartDateAndBusinessDays(startDate, work.startDateAverage),\n        dueDateAverage: getUTCEndDateFromStartDateAndBusinessDays(startDate, work.dueDateAverage),\n        startDateWithTimeEnoughToFinish: getUTCEndDateFromStartDateAndBusinessDays(startDate, work.startDateWithTimeEnoughToFinish)\n    }\n}\n\n\nfunction toFixed( num, precision ) {\n    return (+(Math.round(+(num + 'e' + precision)) + 'e' + -precision)).toFixed(precision);\n}\n\nfunction createColumnData(values, days, type) {\n    const columnData = [];\n    for(let i = 0; i < days; i++) {\n        columnData.push({\n            percentValue: 0,\n            totalCount: 0,\n            day: i,\n            type\n        })\n    }\n    let largestCount = 0;\n    for( const dueDay of values ) {\n        if(columnData[dueDay]) {\n            columnData[dueDay].totalCount++;\n            largestCount = Math.max(largestCount, columnData[dueDay].totalCount);\n        }\n    }\n    for(const column of columnData) {\n        column.percentValue = (column.totalCount / largestCount)*100;\n    }\n\n    return columnData;\n}\n\n/*\nclass SimulationData extends StacheElement {\n    static view = `\n        <div class=\"bg-white\">\n            <div class=\"chart\"></div>\n        </div>\n       \n    `;\n    static props = {\n        work: type.Any,\n        lastDueDay: Number\n    };\n\n    connected(){\n        const chart = this.querySelector(\"div.chart\");\n\n        const baseWidth = chart.parentElement.clientWidth;\n        console.log(baseWidth);\n        // set the dimensions and margins of the graph\n        var margin = {top: 0, right: 0, bottom: 0, left: 0},\n        width = baseWidth - margin.left - margin.right,\n        height = 200 - margin.top - margin.bottom;\n\n        // append the svg object to the body of the page\n        var svg = d3.select(chart)\n            .append(\"svg\")\n            .attr(\"width\", width + margin.left + margin.right)\n            .attr(\"height\", height + margin.top + margin.bottom)\n            .append(\"g\")\n            .attr(\"transform\",\n                \"translate(\" + margin.left + \",\" + margin.top + \")\");\n\n        // get 98%\n        const largestDay = this.work.dueDateValues[ Math.round(this.work.dueDateValues.length * 0.98) ];\n        const smallestDay = this.work.startDateValues[ Math.round(this.work.startDateValues.length * 0.01) ];\n\n        const x = d3.scaleLinear()\n            .domain([0,this.lastDueDay])   \n            .range([0, width]);\n\n\n        //const xAxis = d3.axisBottom(x).tickValues(generateMultiplesOfTen(smallestDay,largestDay))\n        \n        // set the parameters for the histogram\n        const histogram = d3.histogram()\n            //.value(function(d) { return +d.value; })   // I need to give the vector of value\n            .domain(x.domain())  // then the domain of the graphic\n            .thresholds(x.ticks(this.lastDueDay)); // then the numbers of bins\n        \n        // And apply twice this function to data to get the bins.\n        const bins1 = histogram(this.work.startDateValues);\n        const bins2 = histogram(this.work.dueDateValues);\n        \n        // Y axis: scale and draw:\n        const y = d3.scaleLinear()\n            .range([height, 0]);\n            y.domain([0, d3.max(bins1, function(d) { return d.length; })]);   // d3.hist has to be called before the Y axis obviously\n\n        \n        // append the bars for series 1\n        svg.selectAll(\"rect\")\n            .data(bins1)\n            .join(\"rect\")\n                .attr(\"x\", 1)\n                .attr(\"transform\", function(d) { return `translate(${x(d.x0)} , ${y(d.length)})`})\n                .attr(\"width\", function(d) { \n                    return x(d.x1) - x(d.x0) -1 ; \n                })\n                .attr(\"height\", function(d) { return height - y(d.length); })\n                .style(\"fill\", \"#69b3a2\")\n                .style(\"opacity\", 0.6)\n        \n        // append the bars for series 2\n        svg.selectAll(\"rect2\")\n            .data(bins2)\n            .enter()\n            .append(\"rect\")\n                .attr(\"x\", 1)\n                .attr(\"transform\", function(d) { return `translate(${x(d.x0)}, ${y(d.length)})`})\n                .attr(\"width\", function(d) { return x(d.x1) - x(d.x0) -1 ; })\n                .attr(\"height\", function(d) { return height - y(d.length); })\n                .style(\"fill\", \"#404080\")\n                .style(\"opacity\", 0.6)\n        \n        // Handmade legend\n        svg.append(\"circle\").attr(\"cx\",300).attr(\"cy\",30).attr(\"r\", 6).style(\"fill\", \"#69b3a2\")\n        svg.append(\"circle\").attr(\"cx\",300).attr(\"cy\",60).attr(\"r\", 6).style(\"fill\", \"#404080\")\n        svg.append(\"text\").attr(\"x\", 320).attr(\"y\", 30).text(\"Start Dates\").style(\"font-size\", \"15px\").attr(\"alignment-baseline\",\"middle\")\n        svg.append(\"text\").attr(\"x\", 320).attr(\"y\", 60).text(\"End Dates\").style(\"font-size\", \"15px\").attr(\"alignment-baseline\",\"middle\")\n\n    }\n}*/\n\n\n\nfunction generateMultiplesOfTen(min, max) {\n    // Round the min and max to nearest multiples of 10\n    const start = Math.ceil(min / 10) * 10;\n    const end = Math.floor(max / 10) * 10;\n\n    // Generate the range\n    let range = [];\n    for (let i = start; i <= end; i += 10) {\n        range.push(i);\n    }\n\n    return range;\n}\n\n\ncustomElements.define(\"simulation-data\", SimulationData);\n\nexport default SimulationData;","import { StacheElement, type, ObservableObject, fromAttribute, queues } from \"./can.js\";\nimport {scheduleIssues } from \"./schedule.js\";\nimport {bestFitRanges, getUTCEndDateFromStartDateAndBusinessDays} from \"./shared/dateUtils.js\"\n\n\n\nimport \"./simulation-data.js\";\n\nfunction compareNumbers(a, b) {\n    return a - b;\n  }\n\nfunction sortedIndex(array, value) {\n    let low = 0;\n    let high = array.length;\n  \n    while (low < high) {\n      let mid = Math.floor((low + high) / 2);\n      if (array[mid] < value) {\n        low = mid + 1;\n      } else {\n        high = mid;\n      }\n    }\n  \n    return low;\n}\n\nfunction average(array) {\n    let sum = 0;\n    for (let i = 0; i < array.length; i++) {\n      sum += array[i];\n    }\n    return sum / array.length;\n  }\n\n\nclass WorkItem extends ObservableObject {\n    static props = {\n        work: type.Any,\n\n        startDateBottom: 0,\n        startDateBottom10: 0, \n        startDateAverage: 0,\n\n\n        dueDateBottom10: 0,\n        dueDateBottom: 0,\n        dueDateAverage: 0,\n        dueDateTop: 0,\n        dueDateTop90: 0,\n        dueDateTop95: 0,\n\n        adjustedDaysOfWork: 0,\n        \n        startDateWithTimeEnoughToFinish: 0,\n\n        uncertaintyWeight: {type: type.Any, default: 90},\n        startDateValues: {get default(){ return []}},\n        dueDateValues: {get default(){ return []}},\n        adjustedDaysOfWorkValues: {get default(){ return []}},\n\n        _holdingStartDates: {get default(){ return []}},\n        _holdingDueDates: {get default(){ return []}},\n        _holdingAdjustedDaysOfWork: {get default(){ return []}},\n    };\n    addWork(work){\n        // update new values\n        //if(this.work.issue[\"Issue key\"] === \"IMP-121\") {\n        //    debugger;\n        //}\n        this._holdingStartDates.push(work.startDay);\n        this._holdingDueDates.push(work.startDay + work.daysOfWork);\n        this._holdingAdjustedDaysOfWork.push(work.daysOfWork);\n        //this.startDateValues.push(work.startDay);\n        //this.dueDateValues.push(work.startDay + work.daysOfWork);\n    }\n    updateStats(){\n        \n        this.startDateValues.push(...this._holdingStartDates);\n        this.startDateValues.sort(compareNumbers);\n        this._holdingStartDates = [];\n        \n        this.dueDateValues.push(...this._holdingDueDates);\n        this.dueDateValues.sort(compareNumbers);\n        this._holdingDueDates = [];\n\n        this.adjustedDaysOfWorkValues.push(...this._holdingAdjustedDaysOfWork);\n        this.adjustedDaysOfWorkValues.sort(compareNumbers);\n        this._holdingAdjustedDaysOfWork = [];\n        \n        this.startDateAverage = average(this.startDateValues);\n        this.dueDateAverage = average(this.dueDateValues);\n        \n    \n        const length = this.startDateValues.length;\n        if(typeof this.uncertaintyWeight === \"number\"){\n            const uncertaintyIndex = Math.min( Math.round(length *this.uncertaintyWeight / 100 ), length - 1),\n                    confidenceIndex = Math.max( length - 1 - uncertaintyIndex, 0 );\n            this.startDateBottom = this.startDateValues[confidenceIndex ];\n            this.dueDateBottom = this.dueDateValues[ confidenceIndex ];\n            this.dueDateTop = this.dueDateValues[ uncertaintyIndex ];\n\n            // There is a much performant way of doing this ... will do it later\n            this.adjustedDaysOfWork = this.adjustedDaysOfWorkValues[uncertaintyIndex];\n            \n        } else if(this.uncertaintyWeight === \"average\") {\n            this.startDateBottom = this.startDateAverage;\n            this.dueDateBottom = this.dueDateTop = this.dueDateAverage;\n            this.adjustedDaysOfWork = average(this.adjustedDaysOfWorkValues);\n        }\n\n        this.startDateBottom10 = this.startDateValues[Math.min( Math.round(length * 10 /100), length - 1) ];\n        this.dueDateBottom10 = this.dueDateValues[Math.min( Math.round(length * 10 / 100 ), length - 1) ];\n        this.dueDateTop90 = this.dueDateValues[Math.min( Math.round(length * 90 / 100 ), length - 1) ];\n        this.dueDateTop95 = this.dueDateValues[Math.min( Math.round(length * 95 / 100 ), length - 1) ];\n\n        this.startDateWithTimeEnoughToFinish = this.dueDateTop - this.adjustedDaysOfWork;\n    }\n\n}\n\nclass MonteCarlo extends StacheElement {\n    static view = `\n        {{# if(this.warnings.length) }}\n            {{# for(warning of this.warnings)}}\n                <div class=\"text-lg bg-yellow-500 p-4\">\n                    {{warning}}\n                </div>\n            {{/ for }}\n        {{ else }}\n\n            <div class=\"absolute h-1 bg-orange-400 transition-opacity duration-500 {{# eq(this.simulationPercentComplete, 100) }}opacity-0{{/ eq }}\" \n                style=\"width: {{this.simulationPercentComplete}}%; top: -7px;\"></div>\n            <div class=\"grid bg-white\" \n                style=\"grid-template-columns: [what] auto repeat({{this.gridNumberOfDays}}, 1fr); grid-template-rows: auto repeat({{this.workPlans.gridRowSpan}}, auto) auto\">\n                <div \n                    class=\"relative z-5\"\n                    style=\"grid-row: 2 / span {{this.workPlans.gridRowSpan}}; grid-column: 2 / span {{this.gridNumberOfDays}}\" id=\"dependencies\">\n                    <svg \n                        xmlns=\"http://www.w3.org/2000/svg\" \n                        x=\"0\" y=\"0\"\n                        class=\"absolute\" width=\"100%\" height=\"100%\" preserveAspectRatio=\"none\">\n                        \n                    </svg>\n                </div>\n                <div class=\"text-xs\"\n                style=\"grid-row: 1 / span 1; grid-column: 1 / span 1\"\n                >\n                &nbsp; <!-- gives size to the top row -->\n\n                \n                </div>\n                {{# for( timeRange of this.timeRanges) }}\n                    <div\n                        class=\"border-neutral-30 border-solid border-x px-1 text-xs truncate\"\n                        style=\"grid-row: 1 / span {{plus(this.workPlans.gridRowSpan, 2)}}; grid-column: {{plus(timeRange.startDay, 1)}} / span {{timeRange.days}}\"\n                        >{{timeRange.prettyStart}}</div>\n                {{/ for }}\n                {{# for(workPlan of this.workPlans) }}\n                    <div\n                        class=\"bg-neutral-20 pt-2 pb-1  sticky top-0\"\n                        style=\"grid-row: {{workPlan.gridRowStart}} / span 1; grid-column: 1 / span {{ plus(this.gridNumberOfDays,1) }}\"></div>\n                    <div \n                        class=\"pl-2 pt-2 pb-1 pr-1 flex sticky top-0\"\n                        style=\"grid-row: {{workPlan.gridRowStart}} / span 1; grid-column-start: what\">\n                        <div class=\"text-base grow font-semibold\">{{workPlan.teamKey}}</div>\n                        {{# not(workPlan.disableVelocity) }}\n                        <div class=\"flex flex-col justify-around\"><button\n                            title=\"Add a parallel work track for this team.\"\n                            on:click=\"this.addWorkPlanForTeam(workPlan.teamKey)\" \n                            class=\"btn-secondary-sm shrink text-xs font-mono\">+</button></div>\n                        {{/ }}\n                    </div>\n                    <div\n                        class=\"pl-2 pt-2 pb-1 pr-1 text-xs\" \n                        style=\"grid-row: {{workPlan.gridRowStart}} / span 1; grid-column: 2 / span {{this.gridNumberOfDays}}\">\n                        \n                    </div>\n                    \n                    <div\n                        class=\"flex flex-row-reverse  pt-2 z-20 pr-2 gap-2\"\n                        style=\"grid-row: {{workPlan.gridRowStart}} / span 1; grid-column: 2 / span {{this.gridNumberOfDays}}\">\n                        {{# not(workPlan.disableVelocity) }}\n                            <div class=\"text-sm\">\n                                Velocity: \n                                \n                                <input\n                                    type=\"number\"\n                                    value:from='this.getVelocityForTeam(workPlan.teamKey)'\n                                    on:change='this.updateVelocity(workPlan.teamKey, scope.element.valueAsNumber)'\n                                    class=\"form-border w-10 text-sm text-center\" />\n                            </div>\n                            <div class=\"text-sm border-transparent border\">Working Days: {{this.totalWorkingDays(workPlan)}}, </div>\n                        {{/ not}}\n                        \n                    </div>\n                    {{# for(track of workPlan.tracks) }}\n\n                        <div\n                            class=\"pl-4 flex pt-0.5 pr-1\" \n                            style=\"grid-row: {{track.gridRowStart}} / span 1; grid-column-start: what\">\n                            {{# not(workPlan.disableTracks) }}\n                                <div class=\"text-xs grow \">Track {{track.name}}</div>\n                                {{# if( this.canRemoveTrack(scope.index, workPlan.tracks.length) ) }}\n                                    <button \n                                        title=\"Remove a work track for this team.\"\n                                        on:click=\"this.removeWorkPlanForTeam(workPlan.teamKey)\"\n                                        class=\"btn-secondary-sm shrink text-xs font-mono\">-</button>\n                                {{/ if }}\n                            {{/ not}}\n                        </div>\n\n                        {{# for(work of track.works) }}\n                            <div \n                                class=\"pl-5 {{this.workIndexDependentStyles(scope.index, track.works.length)}} self-center pr-2 truncate max-w-sm\"\n                                style=\"grid-row: {{ plus(scope.index, track.gridRowStart, 1) }}; grid-column-start: what\"\n                                >\n                                {{# if(work.work.issue.url) }}\n                                    <a href=\"{{work.work.issue.url}}\" target=\"_blank\">{{work.work.issue.Summary}}</a>\n                                {{ else }}\n                                    <span>{{work.work.issue.Summary}}</span>\n                                {{/ if }}\n                            </div>\n                            <simulation-data\n                                class=\"relative block\" \n                                style=\"grid-row: {{ plus(scope.index, track.gridRowStart, 1) }}; grid-column: 2 / span {{this.gridNumberOfDays}}\"\n                                on:el:mouseenter=\"this.showDependencies(work)\"\n                                on:el:mouseleave=\"this.hideDependencies(work)\"\n                                on:resized=\"this.insertBlockers()\"\n                                id=\"{{work.work.issue[\"Issue key\"]}}-timeline\"\n                                lastDueDay:from=\"this.lastDueDay\"\n                                work:from=\"work\"\n                                startDate:from=\"this.startDate\"\n                                uncertaintyWeight:from=\"this.uncertaintyWeight\"\n                                >\n                            </simulation-data>\n                        {{/ for }}\n                    {{/ for }}\n                {{/ }}\n            </div>\n        {{/ if }}\n    `;\n    static props = {\n        configuration: type.Any,\n        getVelocityForTeam: Function,\n        updateVelocity: Function,\n        rawIssues: type.Any,\n        getParallelWorkLimit: Function,\n\n        // [{teamKey, velocity, tracks: [{works: [WorkItem], workMap: {[KEY]: WorkItem} }] }]\n        workPlans: type.Any,\n        lastDueDay: {default: 1},\n        allWorkItems: type.Any,\n        totalSimulationsToRun: {default: 5000},\n        totalSyncSimulations: {default: 50},\n        simulationPercentComplete: {default: 0},\n        velocities: type.Any,\n\n        firstRunWorkPlans: {\n            async(resolve) {\n                this.runOneSimulation(resolve, true);\n            }\n        },\n        startDate: type.maybeConvert(Date),\n        endDateWorkItem: null,\n        warnings: type.maybe( Array )\n    };\n    get gridNumberOfDays(){\n        return this.lastDueDay + 1\n    }\n    get timeRanges(){\n        // grid number of days is how many columns there are in the actual CSS grid\n        const gridDays = this.gridNumberOfDays;\n        // add an extra day to include the full range\n        const endDate = getUTCEndDateFromStartDateAndBusinessDays(this.startDate, gridDays + 1);\n        const ranges = bestFitRanges(this.startDate, endDate, 12);\n        return ranges;\n    }\n    // High level ... we listen to a \"computed\" run of `scheduleIssues`,\n    // When that produces a result, we run the simulation over and over\n    connected(){\n        this.listenTo(\"scheduledAllWork\", this.insertBlockers.bind(this))\n\n        this.listenTo(\"firstRunWorkPlans\",({value})=>{\n            this.warnings = null;\n            this.removeBlockers();\n            this.afterFirstSimulation(value)\n        });\n        this.afterFirstSimulation(this.firstRunWorkPlans);\n\n        this.listenTo(\"uncertaintyWeight\",({value})=> {\n            queues.batch.start();\n            for(let prop in this.allWorkItems) {\n                const work = this.allWorkItems[prop];\n                work.uncertaintyWeight = value;\n                work.updateStats();\n            }\n            this.endDateWorkItem.uncertaintyWeight = value;\n            this.endDateWorkItem.updateStats()\n            queues.batch.stop();\n            this.insertBlockers();\n        });\n    }\n    totalWorkingDays(workPlan){\n        return Math.round( workPlan.tracks.reduce( (acc, track) => {\n            return acc + track.works.reduce( (workAcc, work) => {\n                return workAcc + work.adjustedDaysOfWork;\n            }, 0)\n        },0) )\n    }\n    runOneSimulation(success, first){\n        if(!this.configuration || !this.rawIssues.length) {\n            return success(undefined);\n        }\n\n        scheduleIssues(this.rawIssues, {\n            // hard-coding 80 makes this not have to re-run the simulation on each movement\n            uncertaintyWeight: 80,\n            planIssuesInUncertaintyOrder: true,\n            probablisticallySelectIssueTiming: true,\n            onPlannedIssues: success,\n            getVelocity: this.getVelocityForTeam.bind(this),\n            onIgnoredIssues: function(ignored, reason){\n                //console.log(ignored, reason);\n            },\n            // Overwrite for EB\n            getEstimate: this.configuration.getEstimate,\n            getConfidence: this.configuration.getConfidence,\n            getTeamKey: this.configuration.getTeamKey,\n            getParentKey: this.configuration.getParentKey,\n            \n            getParallelWorkLimit: this.getParallelWorkLimit\n        })\n        \n\n\n        \n    }\n    afterFirstSimulation(workPlans){\n        if(!workPlans) {\n            return;\n        }\n        // tracks the end date stats\n        const endDateWorkItem = this.endDateWorkItem = new WorkItem({\n            work: {\n                issue: {\n                    Summary: \"Due Date\", \"Issue key\": \"Due Date\", \n                    blocks: [], \n                    blocking: [],\n                    url: null\n                }\n            },\n            uncertaintyWeight: this.uncertaintyWeight,\n            dueDatesOnly: true\n        });\n        // a mapping to the \"work stats\" for each item\n        const allWorkItems = this.allWorkItems = {};\n\n        // a function to update all the work stats after a batch of runs\n        const updateAllStats = () => {\n            let largest = 0;\n            queues.batch.start();\n            for(let prop in allWorkItems) {\n                const work = allWorkItems[prop];\n                work.updateStats();\n                largest = Math.max( work.dueDateTop95, largest)\n            }\n            this.lastDueDay = largest + 2; // 2 extra days for margin\n            endDateWorkItem.updateStats();\n            queues.batch.stop();\n        }\n\n        const allDone = ()=> {\n            this.dispatch({type: \"scheduledAllWork\"});\n        }\n\n        // runs a batch of tests\n        const runBatch = (remainingSimulations, syncRuns = 100) => {\n            for(let i = 0; i < syncRuns; i++) {\n                this.runOneSimulation(addResults);\n            }\n            updateAllStats();\n            remainingSimulations = remainingSimulations - syncRuns;\n            \n            if(remainingSimulations > 0) {\n                this.simulationPercentComplete = (this.totalSimulationsToRun - remainingSimulations) / this.totalSimulationsToRun * 100;\n                setTimeout(()=> runBatch(remainingSimulations, syncRuns), 1)\n            } else {\n                this.simulationPercentComplete = 100;\n                allDone();\n            }\n        }\n        // Helper function for adding results of a simulation into \"work stats\"\n        function addResults(teamWork) {\n            let lastDay = 0,\n                lastWork = null;\n            for(let prop in teamWork) {\n                const tracks = teamWork[prop].workPlans.plans;\n                for( const track of tracks ) {\n                    for( const work of track.work ) {\n                        allWorkItems[work.issue[\"Issue key\"]].addWork(work);\n                        const endDay = work.startDay + work.daysOfWork;\n                        if(endDay > lastDay) {\n                            lastDay = endDay;\n                            lastWork = work;\n                        }\n                    }\n                }   \n            }\n            endDateWorkItem.addWork(lastWork);\n        }\n\n        // Here we take the first runs result and create the \"amoritized\" stats\n        // objects for each issue\n        let lastDay = 0,\n            lastWork = null;\n        const baseWorkPlans = Object.values(workPlans).map( ({teamKey, velocity, workPlans}) => {\n            const tracks = workPlans.plans.map( (trackPlan)=> {\n                const track = {works: [], workMap: {}};\n                for( const work of trackPlan.work){\n                    const workItem = new WorkItem({work, uncertaintyWeight: this.uncertaintyWeight, dueDatesOnly: false});\n                    track.workMap[work.issue[\"Issue key\"]] = workItem;\n                    track.works.push(workItem);\n                    workItem.addWork(work);\n                    allWorkItems[work.issue[\"Issue key\"]] = workItem;\n                    const endDay = work.startDay + work.daysOfWork;\n                    if(endDay > lastDay) {\n                        lastDay = endDay;\n                        lastWork = work;\n                    }\n                }\n                return track\n            });\n\n            return {\n                teamKey,\n                velocity,\n                tracks: tracks,\n                disableTracks: false,\n                disableVelocity: false\n            }\n        });\n\n        if(lastWork === null) {\n            // there's no work planned. Probably no epics, abort.\n            this.warnings = [\"There is no work to be simulated. Did you load any epics?\"]\n            return;\n        }\n        endDateWorkItem.addWork(lastWork);\n        baseWorkPlans.unshift({\n            teamKey: \"Summary\",\n            velocity: null,\n            tracks: [\n                {works: [endDateWorkItem], workMap: {\"SUMMARY\": endDateWorkItem}}\n            ],\n            disableVelocity: true,\n            disableTracks: true\n        })\n\n        updateAllStats();\n        // Save a nice representation for the grid\n        this.workPlans = gridifyWorkPlans(baseWorkPlans);\n\n        // start running all the other simulations\n        setTimeout(()=> runBatch(this.totalSimulationsToRun, this.totalSyncSimulations), 13);\n    }\n    canRemoveTrack(index, tracksCount) {\n        return tracksCount > 1 && index === 0;\n    }\n    plus(first, second, third = 0) {\n        return first + second + third;\n    }\n\n    workIndexDependentStyles(index, itemsCount){\n        if(index === itemsCount - 1 ) {\n            return \"pb-2\"\n        }\n    }\n    removeBlockers(){\n        const svg = this.getElementsByTagName(\"svg\")[0];\n        svg.innerHTML = \"\";\n        return svg;\n    }\n    insertBlockers(){\n        const svg = this.removeBlockers();\n        const svgRect = svg.getBoundingClientRect();\n        svg.setAttributeNS(null, \"viewBox\",`0 0 ${svgRect.width} ${svgRect.height}` );\n        const svgPoint = getTopLeft(svg);\n\n        const elementsAndWorkMap = {};\n        [...this.getElementsByClassName(\"work-item\")].forEach( (element) => {\n            // the summary isn't part of allWorkItems\n            if(this.allWorkItems[element.id]) {\n                elementsAndWorkMap[element.id] = {\n                    element,\n                    work: this.allWorkItems[element.id]\n                };\n            }\n\n        });\n\n        for(const {element, work} of Object.values(elementsAndWorkMap)) {\n            const blocks = work.work.issue.blocks;\n            const blockerPoint = minusPoint( getCenterRight(element), svgPoint);\n            \n            for(const blocking of blocks ) {\n                const blockedElement = elementsAndWorkMap[blocking[\"Issue key\"]].element;\n                const blockedPoint = minusPoint( getCenterLeft( blockedElement ), svgPoint);\n\n                const blockingPath = path({\n                    d: makeCurveBetweenPoints(blockerPoint, blockedPoint),\n                        //C x1 y1, x2 y2, x y\n                    \n                });\n                blockingPath.classList.add(\"path-blocker\");\n                blockingPath.id = work.work.issue[\"Issue key\"]+\"-\"+blocking[\"Issue key\"];\n\n                svg.appendChild(blockingPath)\n            }\n        }\n    }\n    showDependencies(work){\n        highlightDependencies(work.work.issue, \"blocks\", \"blocked\", 0);\n        highlightDependencies(work.work.issue, \"blockedBy\", \"blocking\", 0);\n    }\n    hideDependencies(work) {\n        unhighlightDependencies(work.work.issue, \"blocks\", \"blocked\", 0);\n        unhighlightDependencies(work.work.issue, \"blockedBy\", \"blocking\", 0);\n    }\n}\n\n// SVG HELPERS\nfunction path(attributes){\n    const path = document.createElementNS('http://www.w3.org/2000/svg',\"path\");\n    for(let attr in attributes) {\n        path.setAttributeNS(null, attr, attributes[attr]);\n    }\n    return path;\n}\n\nfunction getCenterRight(element){\n    const rect = element.getBoundingClientRect();\n    return {\n        x: rect.right,\n        y: rect.top + rect.height / 2 \n    };\n}\nfunction getCenterLeft(element) {\n    const rect = element.getBoundingClientRect();\n    return {\n        x: rect.left,\n        y: rect.top + rect.height / 2 \n    };\n}\n\nfunction getTopLeft(element) {\n    const rect = element.getBoundingClientRect();\n    return {\n        x: rect.left,\n        y: rect.top\n    };\n}\n\nfunction minusPoint(pointA, pointB) {\n    return {\n        x: pointA.x - pointB.x,\n        y: pointA.y - pointB.y\n    }\n}\n\nfunction makeCurveBetweenPoints(start, end, controlDistance = 30) {\n    return `M ${start.x} ${start.y} \n    c ${controlDistance} 0, ${end.x - start.x - controlDistance} ${end.y - start.y}, ${end.x - start.x} ${end.y - start.y}`\n}\n\n\n// CSS GRID HELPERS\nfunction gridifyWorkPlans(workPlans){\n    let previousWorkPlan;\n    const plans = workPlans.map((workPlan, i)=>{\n        const start =  previousWorkPlan ? previousWorkPlan.gridRowStart + previousWorkPlan.gridRowSpan : 2;\n        const span = workPlan.tracks.length + workPlan.tracks.reduce((a, t)=> a+t.works.length,0) + 1;\n\n        let previousTrack;\n        const tracks = workPlan.tracks.map((t, i) => {\n            return previousTrack = {\n                ...t,\n                gridRowStart: previousTrack ? previousTrack.gridRowStart + previousTrack.gridRowSpan + 1 : start+ 1,\n                gridRowSpan: t.works.length,\n                name: \"\"+(i+1)\n            }\n        })\n        return previousWorkPlan = { \n            ...workPlan,\n            gridRowStart:start,\n            gridRowSpan: span,\n            tracks\n        }\n    })\n    const lastPlan = plans[plans.length - 1];\n    plans.gridRowSpan = lastPlan.gridRowStart + lastPlan.gridRowSpan;\n    return plans;\n}\n\n// HIGHLIGHT HELPERS\nconst getPath = {\n    \"blockedBy\": function(base, second) {\n        return document.getElementById(second+\"-\"+base);\n    },\n    \"blocks\": function(base, second) {\n        return document.getElementById(base+\"-\"+second);\n    }\n}\n\nfunction highlightDependencies(issue, key, className, depth=0) {\n    const baseIssueKey = issue[\"Issue key\"];\n    (issue[key] || []).forEach( (issue)=> {\n        const el = getPath[key](baseIssueKey, issue[\"Issue key\"]);\n        if(el) {\n            el.classList.add(className+\"-\"+depth, \"work-\"+className );\n        }\n        highlightDependencies(issue, key, className, depth+1);\n    });\n}\n\nfunction unhighlightDependencies(issue, key, className, depth=0) {\n    const baseIssueKey = issue[\"Issue key\"];\n    (issue[key] || []).forEach( (issue)=> {\n        const el = getPath[key](baseIssueKey, issue[\"Issue key\"]);\n        if(el) {\n          el.classList.remove(className + \"-\"+depth, \"work-\"+className);\n        }\n        unhighlightDependencies(issue, key, className, depth+1);\n    })\n}\n\n\ncustomElements.define(\"monte-carlo\", MonteCarlo);\n\nexport default MonteCarlo;","import { StacheElement, type, ObservableObject, fromAttribute, queues } from \"./can.js\";\n\n\n\n\n\nclass EstimationProgressReport extends StacheElement {\n    static view = `\n        <details on:toggle=\"this.showing = scope.element.open\">\n            <summary class=\"cursor-pointer\"><b class=\"font-bold\">Estimation Progress Report</b> -\n             Track what has and needs to be estimated.\n             \n            </summary>\n            <div>\n                {{# if(this.showing) }}\n                <div style=\"display: grid; grid-template-columns: auto 1fr 1fr 1fr 1fr 1fr 1fr 1fr; gap: 4px;\">\n                    <div><button class=\"btn-secondary-sm\" on:click=\"this.downloadCSV()\">Download CSV</button></div>\n                    <div style=\"grid-column: 2 / span 2\" class=\"text-center\">Epic</div>\n                    <div style=\"grid-column: 4 / span 5\" class=\"text-center\">{{this.aboveEpicTypeName}}s</div>\n                    <div>&nbsp;</div>\n                    <div class=\"text-xs text-right sticky top-0 bg-white\">Total</div>\n                    <div class=\"text-xs text-right sticky top-0 bg-white\">Estimated</div>\n                    <div class=\"text-xs text-right sticky top-0 bg-white\">Total</div>\n                    <div class=\"text-xs text-right sticky top-0 bg-white\">Without epics</div>\n                    <div class=\"text-xs text-right sticky top-0 bg-white\">Only unestimated Epics</div>\n                    <div class=\"text-xs text-right sticky top-0 bg-white\">Partially estimated</div>\n                    <div class=\"text-xs text-right sticky top-0 bg-white\">Estimated</div>\n                {{# for(level of this.hierarchyLevelReportingData) }}\n                    <h2 style=\"grid-column: 1 / -1\"\n                        class=\"text-base grow font-semibold bg-neutral-20\">\n                        <img src=\"{{level.type.iconUrl}}\" class=\"inline\"/> \n                        {{level.name}}\n                    </h2>\n                    <p class=\"text-xs pl-3\" style=\"grid-column: 1 / -1\">Team Rollup:</p>\n                    {{# for(teamRollup of level.teams) }}\n                        <div class=\"pl-5\">{{teamRollup.name}}</div>\n                        <div class=\"text-right\">{{teamRollup.epic.total}}</div>\n                        <div class=\"text-right\">{{teamRollup.epic.estimated}}</div>\n                        <div class=\"text-right\">{{teamRollup.aboveEpic.total}}</div>\n                        <div class=\"text-right\">{{teamRollup.aboveEpic.noEpics}}</div>\n                        <div class=\"text-right\">{{teamRollup.aboveEpic.onlyUnestimated}}</div>\n                        <div class=\"text-right\">{{teamRollup.aboveEpic.someEstimatedEpics}}</div>\n                        <div class=\"text-right\">{{teamRollup.aboveEpic.fullyEstimated}}</div>\n                    {{/ }}\n                    <p class=\"text-xs pl-3\" style=\"grid-column: 1 / -1\">Issue Rollup:</p>\n                    {{# for(issue of level.issues) }}\n\n                        <div class=\"pl-5\"><a target=\"_blank\" href=\"{{issue.url}}\">{{issue.Summary}}</a></div>\n                        <div class=\"text-right\">{{issue.rollups.epic.total}}</div>\n                        <div class=\"text-right\">{{issue.rollups.epic.estimated}}</div>\n                        <div class=\"text-right\">{{issue.rollups.aboveEpic.total}}</div>\n                        <div class=\"text-right\">{{issue.rollups.aboveEpic.noEpics}}</div>\n                        <div class=\"text-right\">{{issue.rollups.aboveEpic.onlyUnestimated}}</div>\n                        <div class=\"text-right\">{{issue.rollups.aboveEpic.someEstimatedEpics}}</div>\n                        <div class=\"text-right\">{{issue.rollups.aboveEpic.fullyEstimated}}</div>\n                    {{/ }}\n                    \n                {{/ }}\n                    \n                </div>\n                {{/ if }}\n            </div>\n        </details>\n        \n    `;\n\n    static props = {\n        getTeamKey: Function,\n        getEstimate: Function,\n        getConfidence: Function,\n        showing: false,\n\n        get aboveEpicTypeName(){\n            const reportingData = this.hierarchyLevelReportingData;\n            if(reportingData.length > 1) {\n                return reportingData[reportingData.length - 2].name\n            }\n        },\n\n        get hierarchyLevelReportingData(){\n            if(!this.rawIssues.length) {\n                return this.rawIssues;\n            }\n\n            const reportingData = getReportingData(this.rawIssues, {\n                getEstimate: this.getEstimate, \n                getConfidence: this.getConfidence,\n                getTeamKey: this.getTeamKey\n            });\n            \n            // prepare the data for the view\n            const sorted = Object.values(reportingData).sort( (levelA, levelB)=>{\n                return levelB.hierarchyLevel - levelA.hierarchyLevel\n            }).map( (level)=> {\n                return {\n                    ...level,\n                    teams: Object.values(level.teams)\n                }\n            })\n\n            return sorted;\n        }\n        \n    };\n    downloadCSV(){\n        const rawData = this.hierarchyLevelReportingData;\n        const rowsData = [];\n\n        const flattenRollups = (rollups) => {\n            const result = {};\n            for(let key in rollups.aboveEpic) {\n                result[this.aboveEpicTypeName+\" \"+key] = rollups.aboveEpic[key];\n            }\n            for(let key in rollups.epic) {\n                result[\"epic \"+key] = rollups.epic[key];\n            }\n            return result;\n        }\n\n        for(let issueType of rawData) {\n            for(let team of issueType.teams) {\n                rowsData.push({\n                    \"IssueType\": issueType.type.name,\n                    \"RollupType\": \"Team\",\n                    \"Team\": team.name,\n                    ... flattenRollups(team)\n                })\n            }\n\n            for(let issue of issueType.issues) {\n                let teamName = this.getTeamKey(issue);\n                rowsData.push({\n                    \"IssueType\": issueType.type.name,\n                    \"RollupType\": \"Issue\",\n                    \"Team\": teamName,\n                    ... flattenRollups(issue.rollups)\n                })\n            }\n\n        }\n\n        function convertToCSV(data) {\n            const headers = Object.keys(data[0]);\n            const rows = data.map(obj => headers.map(header => JSON.stringify(obj[header], replacer)).join(\",\"));\n            return [headers.join(\",\"), ...rows].join(\"\\r\\n\");\n        }\n\n        function replacer(key, value) {\n            return value === null || value === undefined ? '' : value;\n        }\n        debugger;\n        const csvContent = convertToCSV(rowsData);\n        const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });\n        const link = document.createElement(\"a\");\n        if (link.download !== undefined) { // Feature detection\n            const url = URL.createObjectURL(blob);\n            link.setAttribute(\"href\", url);\n            link.setAttribute(\"download\", \"data.csv\");\n            link.style.visibility = 'hidden';\n            document.body.appendChild(link);\n            link.click();\n            document.body.removeChild(link);\n        }\n    }\n    log(issue) {\n        console.log(issue);\n    }\n\n\n}\n\ncustomElements.define(\"estimation-progress-report\", EstimationProgressReport);\n\n\nfunction calculatePercentileWhoHasStoryPointsAndConfidence(issues,{getEstimate, getConfidence}) {\n    let totalCount = 0, estimatedCount = 0;\n    for(let issue of issues) {\n        if(issue[\"Issue Type\"].name === \"Epic\") {\n            let estimate = getEstimate(issue);\n            let confidence = getConfidence(issue);\n            if(estimate != null && confidence != null) {\n                estimatedCount ++;\n            }\n            totalCount++;\n        } else {\n            const result = calculatePercentileWhoHasStoryPointsAndConfidence(issue.children, {getEstimate, getConfidence});\n            issue.epicRollup = result;\n            totalCount += result.totalCount;\n            estimatedCount += result.estimatedCount;\n            \n        }\n\n    }\n\n    return {totalCount, estimatedCount, percentage: Math.round(100*estimatedCount / totalCount) };\n}\n\n\nconst EPIC_HIERARCHY_LEVEL = 1;\n\n// hierarchyLevel: {name, hierarchyLevel, issues, teams}\nfunction getReportingData(issues, {getConfidence, getEstimate, getTeamKey}){\n\n    // if the heirarchyLevel + (groupByTeam ? 1 : 0) > EPIC_HIERARCHY_LEVEL + 1\n    // then we should have enough data to give the 4-part breakdown\n\n    // \n\n\n    const issuesWithRollup = issues.map( issue => {\n        return {\n            ...issue,\n            rollups: makeBaseRollup()\n        }\n    }).sort( (a, b)=> {\n        return a[\"Issue Type\"].hierarchyLevel - b[\"Issue Type\"].hierarchyLevel;\n    });\n\n    const getParent = makeGetParent(issuesWithRollup);\n\n    // hierarchy levels  hierarchyLevel: {name, hierarchyLevel, issues, teams}\n    const hierarchyLevels = {};\n\n    for(let issue of issuesWithRollup) {\n        const hierarchyLevel = issue[\"Issue Type\"].hierarchyLevel\n        if(hierarchyLevel < 1) {\n            continue; // ignore everything below epics\n        }\n\n        \n        if(hierarchyLevel === 1) {\n            let estimate = getEstimate(issue);\n            let confidence = getConfidence(issue);\n            const isEstimated = estimate != null && confidence != null;\n\n            issue.rollups.epic.total++;\n            if(isEstimated) {\n                issue.rollups.epic.estimated++;\n            }\n            \n            updateTeamAndParentRollups(hierarchyLevels, issue, {getTeamKey, getParent});\n        }\n        else if(hierarchyLevel === 2) {\n            // this is an initiative labelling itself\n            issue.rollups.aboveEpic.total= 1;\n            if(issue.rollups.epic.total === 0) {\n                issue.rollups.aboveEpic.noEpics = 1;\n            }\n            else if(issue.rollups.epic.total === issue.rollups.epic.estimated) {\n                issue.rollups.aboveEpic.fullyEstimated = 1;\n            } \n            else if(issue.rollups.epic.total > 0 && issue.rollups.epic.estimated === 0) {\n                issue.rollups.aboveEpic.onlyUnestimated = 1;\n            }\n            else {\n                issue.rollups.aboveEpic.someEstimatedEpics = 1;\n            }\n\n            updateTeamAndParentRollups(hierarchyLevels, issue, {getTeamKey, getParent});\n        }\n        else {\n            // update the team info ...\n            updateTeamAndParentRollups(hierarchyLevels, issue, {getTeamKey, getParent});            \n        }\n    }\n    return hierarchyLevels;\n}\n\nfunction updateTeamAndParentRollups(hierarchyLevels, issue, {getTeamKey, getParent}){\n    let {teamRollup} = ensureHierarchyLevelObjectAndTeamRollup(hierarchyLevels, issue, {getTeamKey});\n    updateRollup(teamRollup, issue);\n    \n    let parent = getParent(issue);\n    if(!parent ) {\n        // console.warn(\"No parent. We will find a way to report later\")\n    } else {\n        updateRollup(parent.rollups, issue);\n    }\n}\n\nfunction updateRollup(rollups, issue) {\n    rollups.epic.total += issue.rollups.epic.total;\n    rollups.epic.estimated += issue.rollups.epic.estimated;\n\n    rollups.aboveEpic.total += issue.rollups.aboveEpic.total;\n    rollups.aboveEpic.noEpics += issue.rollups.aboveEpic.noEpics;\n    rollups.aboveEpic.fullyEstimated += issue.rollups.aboveEpic.fullyEstimated;\n    rollups.aboveEpic.onlyUnestimated += issue.rollups.aboveEpic.onlyUnestimated;\n    rollups.aboveEpic.someEstimatedEpics += issue.rollups.aboveEpic.someEstimatedEpics;\n}\n\nfunction makeGetParent(issues){\n    const issueKeyToIssue = Object.groupBy(issues, issue => issue[\"Issue key\"]);\n    return function getParent(issue) {\n        if(issue?.Parent?.key && issueKeyToIssue[issue.Parent.key]) {\n            return issueKeyToIssue[issue.Parent.key][0]\n        } else {\n            return;\n        }\n    }\n}\n\nfunction makeBaseRollup(){\n    return {\n        aboveEpic: {\n            total: 0,\n            noEpics: 0,\n            onlyUnestimated: 0,\n            someEstimatedEpics: 0,\n            fullyEstimated: 0\n        },\n        epic: {\n            estimated: 0,\n            total: 0\n        }\n    };\n}\n\nfunction ensureHierarchyLevelObjectAndTeamRollup(hierarchyLevels, issue, {getTeamKey}){\n    const hierarchyLevel = issue[\"Issue Type\"].hierarchyLevel;\n    let hierarchyLevelObject = hierarchyLevels[hierarchyLevel];\n\n    if(!hierarchyLevels[hierarchyLevel]) {\n        hierarchyLevelObject = hierarchyLevels[hierarchyLevel] = {\n            name: issue[\"Issue Type\"].name,\n            hierarchyLevel: hierarchyLevel,\n            issues: [],\n            teams: {},\n            type: issue[\"Issue Type\"]\n        }\n    }\n    hierarchyLevelObject.issues.push(issue);\n    const team = getTeamKey(issue);\n    let teamRollup = hierarchyLevelObject.teams[team]\n    if(!teamRollup) {\n        teamRollup = hierarchyLevelObject.teams[team] = {...makeBaseRollup(), name: team};\n    }\n\n    return {hierarchyLevelObject, teamRollup};\n}","const CACHE_FETCH = false;\n\nfunction responseToJSON(response) {\n\tif(!response.ok) {\n\t\treturn response.json().then((payload) => {\n\t\t\tconst err = new Error(\"HTTP status code: \" + response.status);\n\t\t\tObject.assign(err, payload);\n\t\t\tObject.assign(err, response);\n\t\t\tthrow err;\n\t\t})\n\t}\n\treturn response.json();\n}\nfunction responseToText(response) {\n\tif(!response.ok) {\n\t\treturn response.json().then((payload) => {\n\t\t\tconst err = new Error(\"HTTP status code: \" + response.status);\n\t\t\tObject.assign(err, payload);\n\t\t\tObject.assign(err, response);\n\t\t\tthrow err;\n\t\t})\n\t}\n\treturn response.text();\n}\n\n\nexport function nativeFetchJSON(url, options) {\n\treturn fetch(url, options).then(responseToJSON)\n}\n\n\nfunction chunkArray(array, size) {\n\tconst chunkedArr = [];\n\tfor (let i = 0; i < array.length; i += size) {\n\t  chunkedArr.push(array.slice(i, i + size));\n\t}\n\treturn chunkedArr;\n}\n\n\n\nexport default function JiraOIDCHelpers({\n\tJIRA_CLIENT_ID,\n\tJIRA_SCOPE,\n\tJIRA_CALLBACK_URL,\n\tJIRA_API_URL\n} = window.env) {\n\n\tlet fetchJSON = nativeFetchJSON;\n\tif (CACHE_FETCH) {\n\t\tfetchJSON = async function (url, options) {\n\t\t\tif (window.localStorage.getItem(url)) {\n\t\t\t\treturn JSON.parse(window.localStorage.getItem(url));\n\t\t\t} else {\n\t\t\t\tconst result = nativeFetchJSON(url, options);\n\t\t\t\tresult.then(async data => {\n\t\t\t\t\ttry {\n\t\t\t\t\t\twindow.localStorage.setItem(url, JSON.stringify(data));\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tconsole.log(\"can't save\");\n\t\t\t\t\t}\n\n\t\t\t\t});\n\t\t\t\treturn result;\n\t\t\t}\n\t\t};\n\t}\n\n\n\tlet fieldsRequest;\n\n\n\tfunction makeDeepChildrenLoaderUsingNamedFields(rootMethod){\n\n\t\t// Makes child requests in batches of 40\n\t\t// \n\t\t// params - base params\n\t\t// sourceParentIssues - the source of parent issues\n\t\tfunction fetchChildrenResponses(params, parentIssues, progress) {\n\t\t\tconst issuesToQuery = chunkArray(parentIssues, 40);\n\t\n\t\t\tconst batchedResponses = issuesToQuery.map( issues => {\n\t\t\t\tconst keys = issues.map( issue => issue.key);\n\t\t\t\tconst jql = `parent in (${keys.join(\", \")})`;\n\t\t\t\treturn rootMethod({\n\t\t\t\t\t...params,\n\t\t\t\t\tjql\n\t\t\t\t}, progress)\n\t\t\t});\n\t\t\t// this needs to be flattened\n\t\t\treturn batchedResponses;\n\t\t}\n\t\n\t\tasync function fetchDeepChildren(params, sourceParentIssues, progress) {\n\t\t\tconst batchedFirstResponses = fetchChildrenResponses(params, sourceParentIssues, progress);\n\t\n\t\t\tconst getChildren = (parentIssues) => {\n\t\t\t\tif(parentIssues.length) {\n\t\t\t\t\treturn fetchDeepChildren(params, parentIssues, progress).then(deepChildrenIssues => {\n\t\t\t\t\t\treturn parentIssues.concat(deepChildrenIssues);\n\t\t\t\t\t})\n\t\t\t\t} else {\n\t\t\t\t\treturn parentIssues\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst batchedIssueRequests = batchedFirstResponses.map( firstBatchPromise => {\n\t\t\t\treturn firstBatchPromise.then( getChildren )\n\t\t\t})\n\t\t\tconst allChildren = await Promise.all(batchedIssueRequests);\n\t\t\treturn allChildren.flat();\n\t\t}\n\t\n\t\treturn async function fetchAllDeepChildren(params, progress = function(){}){\n\t\t\tconst fields = await fieldsRequest;\n\t\t\tconst newParams = {\n\t\t\t\t...params,\n\t\t\t\tfields: params.fields.map(f => fields.nameMap[f] || f)\n\t\t\t}\n\t\n\t\t\tprogress.data = progress.data || {\n\t\t\t\tissuesRequested: 0,\n\t\t\t\tissuesReceived: 0,\n\t\t\t\tchangeLogsRequested: 0,\n\t\t\t\tchangeLogsReceived: 0\n\t\t\t};\n\t\t\tconst parentIssues = await rootMethod(newParams, progress);\n\t\n\t\t\t// go get the children\n\t\t\tconst allChildrenIssues = await fetchDeepChildren(newParams, parentIssues, progress);\n\t\t\tconst combined = parentIssues.concat(allChildrenIssues);\n\t\t\treturn combined.map((issue) => {\n\t\t\t\treturn {\n\t\t\t\t\t...issue,\n\t\t\t\t\tfields: mapIdsToNames(issue.fields, fields)\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\n\tconst jiraHelpers = {\n\t\tsaveInformationToLocalStorage: (parameters) => {\n\t\t\tconst objectKeys = Object.keys(parameters)\n\t\t\tfor (let key of objectKeys) {\n\t\t\t\twindow.localStorage.setItem(key, parameters[key]);\n\t\t\t}\n\t\t},\n\t\tfetchFromLocalStorage: (key) => {\n\t\t\treturn window.localStorage.getItem(key);\n\t\t},\n\t\tfetchAuthorizationCode: () => {\n\t\t\tconst url = `https://auth.atlassian.com/authorize?audience=api.atlassian.com&client_id=${JIRA_CLIENT_ID}&scope=${escape(JIRA_SCOPE)}&redirect_uri=${JIRA_CALLBACK_URL}&response_type=code&prompt=consent&state=${encodeURIComponent(encodeURIComponent(window.location.search))}`;\n\t\t\twindow.location.href = url;\n\t\t},\n\t\trefreshAccessToken: async (accessCode) => {\n\t\t\ttry {\n\t\t\t\tconst response = await fetchJSON(`${window.env.JIRA_API_URL}/?code=${accessCode}`)\n\t\t\t\tconst {\n\t\t\t\t\taccessToken,\n\t\t\t\t\texpiryTimestamp,\n\t\t\t\t\trefreshToken,\n\t\t\t\t} = response.data;\n\t\t\t\tjiraHelpers.saveInformationToLocalStorage({\n\t\t\t\t\taccessToken,\n\t\t\t\t\trefreshToken,\n\t\t\t\t\texpiryTimestamp,\n\t\t\t\t});\n\t\t\t\treturn accessToken;\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error(error.message)\n\t\t\t\twindow.localStorage.clear()\n\t\t\t\tjiraHelpers.fetchAuthorizationCode();\n\t\t\t}\n\t\t},\n\t\tfetchAccessTokenWithAuthCode: async (authCode) => {\n\t\t\ttry {\n\t\t\t\tconst {\n\t\t\t\t\taccessToken,\n\t\t\t\t\texpiryTimestamp,\n\t\t\t\t\trefreshToken,\n\t\t\t\t\tscopeId\n\t\t\t\t} = await fetchJSON(`./access-token?code=${authCode}`)\n\n\t\t\t\tjiraHelpers.saveInformationToLocalStorage({\n\t\t\t\t\taccessToken,\n\t\t\t\t\trefreshToken,\n\t\t\t\t\texpiryTimestamp,\n\t\t\t\t\tscopeId,\n\t\t\t\t});\n\t\t\t\t//redirect to data page\n\t\t\t\tconst addOnQuery = new URL(window.location).searchParams.get(\"state\");\n\t\t\t\tconst decoded = decodeURIComponent(addOnQuery);\n\t\t\t\tlocation.href = '/' + (addOnQuery || \"\");\n\t\t\t} catch (error) {\n\t\t\t\t//handle error properly.\n\t\t\t\tconsole.error(error);\n\t\t\t\t// location.href = '/error.html';\n\t\t\t}\n\t\t},\n\t\tfetchAccessibleResources: (passedAccessToken) => {\n\t\t\tconst accessToken = passedAccessToken || jiraHelpers.fetchFromLocalStorage('accessToken');\n\t\t\treturn fetchJSON(`https://api.atlassian.com/oauth/token/accessible-resources`, {\n\t\t\t\theaders: {\n\t\t\t\t\t'Authorization': `Bearer ${accessToken}`,\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tfetchJiraSprint: async (sprintId) => {\n\t\t\t//this fetches all Recent Projects From Jira\n\t\t\tconst scopeIdForJira = jiraHelpers.fetchFromLocalStorage('scopeId');\n\t\t\tconst accessToken = jiraHelpers.fetchFromLocalStorage('accessToken');\n\t\t\tconst url = `${JIRA_API_URL}/${scopeIdForJira}/rest/agile/1.0/sprint/${sprintId}`;\n\t\t\tconst config = {\n\t\t\t\theaders: {\n\t\t\t\t\t'Authorization': `Bearer ${accessToken}`,\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn await fetchJSON(url, config);\n\t\t},\n\t\tfetchJiraIssue: async (issueId) => {\n\t\t\t//this fetches all Recent Projects From Jira\n\t\t\tconst scopeIdForJira = jiraHelpers.fetchFromLocalStorage('scopeId');\n\t\t\tconst accessToken = jiraHelpers.fetchFromLocalStorage('accessToken');\n\t\t\tconst url = `${JIRA_API_URL}/${scopeIdForJira}/rest/api/3/issue/${issueId}`;\n\t\t\tconst config = {\n\t\t\t\theaders: {\n\t\t\t\t\t'Authorization': `Bearer ${accessToken}`,\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn await fetchJSON(url, config);\n\t\t},\n\t\teditJiraIssueWithNamedFields: async (issueId, fields) => {\n\t\t\tconst scopeIdForJira = jiraHelpers.fetchFromLocalStorage('scopeId');\n\t\t\tconst accessToken = jiraHelpers.fetchFromLocalStorage('accessToken');\n\n\t\t\tconst fieldMapping = await fieldsRequest;\n\t\t\t\n\t\t\tconst editBody = fieldsToEditBody(fields, fieldMapping);\n\t\t\t//const fieldsWithIds = mapNamesToIds(fields || {}, fieldMapping),\n\t\t\t//\tupdateWithIds = mapNamesToIds(update || {}, fieldMapping);\n\n\t\t\treturn fetch(\n\t\t\t\t`${JIRA_API_URL}/${scopeIdForJira}/rest/api/3/issue/${issueId}?` +\n\t\t\t\t\"\" /*new URLSearchParams(params)*/,\n\t\t\t\t{\n\t\t\t\t\tmethod: 'PUT',\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t'Authorization': `Bearer ${accessToken}`,\n\t\t\t\t\t\t'Accept': 'application/json',\n    \t\t\t\t\t'Content-Type': 'application/json'\n\t\t\t\t\t},\n\t\t\t\t\tbody: JSON.stringify(editBody)\n\t\t\t\t}\n\t\t\t).then(responseToText);\n\t\t},\n\t\tfetchJiraIssuesWithJQL: function (params) {\n\t\t\tconst scopeIdForJira = jiraHelpers.fetchFromLocalStorage('scopeId');\n\t\t\tconst accessToken = jiraHelpers.fetchFromLocalStorage('accessToken');\n\n\t\t\treturn fetchJSON(\n\t\t\t\t`${JIRA_API_URL}/${scopeIdForJira}/rest/api/3/search?` +\n\t\t\t\tnew URLSearchParams(params),\n\t\t\t\t{\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t'Authorization': `Bearer ${accessToken}`,\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t)\n\t\t},\n\t\tfetchAllJiraIssuesWithJQL: async function (params) {\n\t\t\tconst { limit: limit, ...apiParams } = params;\n\t\t\tconst firstRequest = jiraHelpers.fetchJiraIssuesWithJQL({ maxResults: 100, ...apiParams });\n\t\t\tconst { issues, maxResults, total, startAt } = await firstRequest;\n\t\t\tconst requests = [firstRequest];\n\t\t\t\n\t\t\tconst limitOrTotal = Math.min(total, limit || Infinity);\n\t\t\tfor (let i = startAt + maxResults; i < limitOrTotal; i += maxResults) {\n\t\t\t\trequests.push(\n\t\t\t\t\tjiraHelpers.fetchJiraIssuesWithJQL({ maxResults: maxResults, startAt: i, ...apiParams })\n\t\t\t\t);\n\t\t\t}\n\t\t\treturn Promise.all(requests).then(\n\t\t\t\t(responses) => {\n\t\t\t\t\treturn responses.map((response) => response.issues).flat();\n\t\t\t\t}\n\t\t\t)\n\t\t},\n\t\tfetchAllJiraIssuesWithJQLUsingNamedFields: async function(params) {\n\t\t\tconst fields = await fieldsRequest;\n\n\t\t\tconst newParams = {\n\t\t\t\t...params,\n\t\t\t\tfields: params.fields.map(f => fields.nameMap[f] || f)\n\t\t\t}\n\t\t\tconst response = await jiraHelpers.fetchAllJiraIssuesWithJQL(newParams);\n\n\t\t\treturn response.map((issue) => {\n\t\t\t\treturn {\n\t\t\t\t\t...issue,\n\t\t\t\t\tfields: mapIdsToNames(issue.fields, fields)\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tfetchJiraChangelog(issueIdOrKey, params) {\n\t\t\tconst scopeIdForJira = jiraHelpers.fetchFromLocalStorage('scopeId');\n\t\t\tconst accessToken = jiraHelpers.fetchFromLocalStorage('accessToken');\n\n\t\t\treturn fetchJSON(\n\t\t\t\t`${JIRA_API_URL}/${scopeIdForJira}/rest/api/3/issue/${issueIdOrKey}/changelog?` +\n\t\t\t\tnew URLSearchParams(params),\n\t\t\t\t{\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t'Authorization': `Bearer ${accessToken}`,\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t)\n\t\t},\n\t\tisChangelogComplete(changelog) {\n\t\t\treturn changelog.histories.length === changelog.total\n\t\t},\n\t\tfetchRemainingChangelogsForIssues(issues, progress = function(){}) {\n\t\t\t// check for remainings\n\t\t\treturn Promise.all(issues.map(issue => {\n\t\t\t\tif (jiraHelpers.isChangelogComplete(issue.changelog)) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...issue,\n\t\t\t\t\t\tchangelog: issue.changelog.histories\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\treturn jiraHelpers.fetchRemainingChangelogsForIssue(issue.key, issue.changelog).then((histories) => {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t...issue,\n\t\t\t\t\t\t\tchangelog: issue.changelog.histories\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}))\n\t\t},\n\t\t// weirdly, this starts with the oldest, but we got the most recent\n\t\t// returns an array of histories objects\n\t\tfetchRemainingChangelogsForIssue(issueIdOrKey, mostRecentChangeLog) {\n\t\t\tconst { histories, maxResults, total, startAt } = mostRecentChangeLog;\n\n\t\t\tconst requests = [];\n\t\t\trequests.push({ values: mostRecentChangeLog.histories });\n\t\t\tfor (let i = 0; i < total - maxResults; i += maxResults) {\n\t\t\t\trequests.push(\n\t\t\t\t\tjiraHelpers.fetchJiraChangelog(issueIdOrKey, {\n\t\t\t\t\t\tmaxResults: Math.min(maxResults, total - maxResults - i),\n\t\t\t\t\t\tstartAt: i,\n\t\t\t\t\t}).then((response) => {\n\t\t\t\t\t\t// the query above reverses the sort order, we fix that here\n\t\t\t\t\t\treturn { ...response, values: response.values.reverse() };\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t}\n\t\t\t// server sends back as \"values\", we match that\n\n\t\t\treturn Promise.all(requests).then(\n\t\t\t\t(responses) => {\n\t\t\t\t\treturn responses.map((response) => response.values).flat();\n\t\t\t\t}\n\t\t\t).then(function (response) {\n\t\t\t\treturn response;\n\t\t\t})\n\t\t},\n\t\tfetchAllJiraIssuesWithJQLAndFetchAllChangelog: function (params, progress= function(){}) {\n\t\t\tconst { limit: limit, ...apiParams } = params;\n\t\t\t\n\t\t\t\n\t\t\t// a weak map would be better\n\t\t\tprogress.data = progress.data || {\n\t\t\t\tissuesRequested: 0,\n\t\t\t\tissuesReceived: 0,\n\t\t\t\tchangeLogsRequested: 0,\n\t\t\t\tchangeLogsReceived: 0\n\t\t\t};\n\t\t\tfunction getRemainingChangeLogsForIssues(response) {\n\t\t\t\tObject.assign(progress.data, {\n\t\t\t\t\tissuesReceived: progress.data.issuesReceived+response.issues.length\n\t\t\t\t});\n\t\t\t\tprogress(progress.data);\n\t\t\t\treturn jiraHelpers.fetchRemainingChangelogsForIssues(response.issues, progress)\n\t\t\t}\n\n\t\t\tconst firstRequest = jiraHelpers.fetchJiraIssuesWithJQL({ maxResults: 100, expand: [\"changelog\"], ...apiParams });\n\n\t\t\treturn firstRequest.then( ({ issues, maxResults, total, startAt }) => {\n\t\t\t\tObject.assign(progress.data, {\n\t\t\t\t\tissuesRequested: progress.data.issuesRequested+total,\n\t\t\t\t\tchangeLogsRequested: 0,\n\t\t\t\t\tchangeLogsReceived: 0\n\t\t\t\t});\n\t\t\t\tprogress(progress.data);\n\n\t\t\t\tconst requests = [firstRequest.then(getRemainingChangeLogsForIssues)];\n\t\t\t\tconst limitOrTotal = Math.min(total, limit || Infinity);\n\n\t\t\t\tfor (let i = startAt + maxResults; i < requests; i += maxResults) {\n\t\t\t\t\trequests.push(\n\t\t\t\t\t\tjiraHelpers.fetchJiraIssuesWithJQL({ maxResults: maxResults, startAt: i, ...apiParams })\n\t\t\t\t\t\t\t.then(getRemainingChangeLogsForIssues)\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\treturn Promise.all(requests).then(\n\t\t\t\t\t(responses) => {\n\t\t\t\t\t\treturn responses.flat();\n\t\t\t\t\t}\n\t\t\t\t)\n\t\t\t});\n\t\t},\n\t\t// this could do each response incrementally, but I'm being lazy\n\t\tfetchAllJiraIssuesWithJQLAndFetchAllChangelogUsingNamedFields: async function (params, progress) {\n\t\t\tconst fields = await fieldsRequest;\n\t\t\tconst newParams = {\n\t\t\t\t...params,\n\t\t\t\tfields: params.fields.map(f => fields.nameMap[f] || f)\n\t\t\t}\n\t\t\tconst response = await jiraHelpers.fetchAllJiraIssuesWithJQLAndFetchAllChangelog(newParams, progress);\n\n\n\t\t\treturn response.map((issue) => {\n\t\t\t\treturn {\n\t\t\t\t\t...issue,\n\t\t\t\t\tfields: mapIdsToNames(issue.fields, fields)\n\t\t\t\t}\n\t\t\t});\n\t\t\t// change the parms\n\t\t},\n\t\tfetchJiraFields() {\n\t\t\tconst scopeIdForJira = jiraHelpers.fetchFromLocalStorage('scopeId');\n\t\t\tconst accessToken = jiraHelpers.fetchFromLocalStorage('accessToken');\n\n\t\t\treturn fetchJSON(\n\t\t\t\t`${JIRA_API_URL}/${scopeIdForJira}/rest/api/3/field`,\n\t\t\t\t{\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t'Authorization': `Bearer ${accessToken}`,\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t)\n\t\t},\n\t\tgetAccessToken: async function () {\n\t\t\tif (!jiraHelpers.hasValidAccessToken()) {\n\t\t\t\tconst refreshToken = jiraHelpers.fetchFromLocalStorage(\"refreshToken\");\n\t\t\t\tif (!refreshToken) {\n\t\t\t\t\tjiraHelpers.fetchAuthorizationCode();\n\t\t\t\t} else {\n\t\t\t\t\treturn jiraHelpers.refreshAccessToken();\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn jiraHelpers.fetchFromLocalStorage(\"accessToken\");\n\t\t\t}\n\t\t},\n\t\t// if someone was ever logged in\n\t\thasAccessToken: function(){\n\t\t\treturn !! jiraHelpers.fetchFromLocalStorage(\"accessToken\");\n\t\t},\n\t\thasValidAccessToken: function () {\n\t\t\tconst accessToken = jiraHelpers.fetchFromLocalStorage(\"accessToken\");\n\t\t\tlet expiryTimestamp = Number(jiraHelpers.fetchFromLocalStorage(\"expiryTimestamp\"));\n\t\t\tif (isNaN(expiryTimestamp)) {\n\t\t\t\texpiryTimestamp = 0;\n\t\t\t}\n\t\t\tconst currentTimestamp = Math.floor(new Date().getTime() / 1000.0);\n\t\t\treturn !((currentTimestamp > expiryTimestamp) || (!accessToken))\n\t\t},\n\t\tgetServerInfo() {\n\t\t\t// https://your-domain.atlassian.net/rest/api/3/serverInfo\n\t\t\tconst scopeIdForJira = jiraHelpers.fetchFromLocalStorage('scopeId');\n\t\t\tconst accessToken = jiraHelpers.fetchFromLocalStorage('accessToken');\n\n\t\t\treturn fetchJSON(\n\t\t\t\t`${JIRA_API_URL}/${scopeIdForJira}/rest/api/3/serverInfo`,\n\t\t\t\t{\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t'Authorization': `Bearer ${accessToken}`,\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t)\n\t\t}\n\t}\n\n\tjiraHelpers.fetchAllJiraIssuesAndDeepChildrenWithJQLUsingNamedFields = \n\t\tmakeDeepChildrenLoaderUsingNamedFields(jiraHelpers.fetchAllJiraIssuesWithJQL.bind(jiraHelpers));\n\n\tjiraHelpers.fetchAllJiraIssuesAndDeepChildrenWithJQLAndFetchAllChangelogUsingNamedFields = \n\t\tmakeDeepChildrenLoaderUsingNamedFields(jiraHelpers.fetchAllJiraIssuesWithJQLAndFetchAllChangelog.bind(jiraHelpers));\n\n\n\tfunction makeFieldNameToIdMap(fields) {\n\t\tconst map = {};\n\t\tfields.forEach((f) => {\n\t\t\tmap[f.name] = f.id;\n\t\t});\n\t\treturn map;\n\t}\n\n\tif (jiraHelpers.hasValidAccessToken()) {\n\t\tfieldsRequest = jiraHelpers.fetchJiraFields().then((fields) => {\n\t\t\tconst nameMap = {};\n\t\t\tconst idMap = {};\n\t\t\tfields.forEach((f) => {\n\t\t\t\tidMap[f.id] = f.name;\n\t\t\t\tnameMap[f.name] = f.id;\n\t\t\t});\n\t\t\tconsole.log(nameMap);\n\n\t\t\treturn {\n\t\t\t\tlist: fields,\n\t\t\t\tnameMap: nameMap,\n\t\t\t\tidMap: idMap\n\t\t\t}\n\t\t});\n\t\tjiraHelpers.fieldsRequest = fieldsRequest;\n\t}\n\n\n\tfunction mapIdsToNames(obj, fields) {\n\t\tconst mapped = {};\n\t\tfor (let prop in obj) {\n\t\t\tmapped[fields.idMap[prop] || prop] = obj[prop];\n\t\t}\n\t\treturn mapped;\n\t}\n\tfunction fieldsToEditBody(obj, fieldMapping){\n\t\tconst editBody = {fields: {}, update: {}};\n\t\t\n\t\tfor (let prop in obj) {\n\t\t\t//if(prop === \"Story points\") {\n\t\t\t\t// 10016 -> story point estimate\n\t\t\t\t// 10034 -> story points\n\t\t\t\t//obj[prop] = \"\"+obj[prop];\n\t\t\t\t//mapped[\"customfield_10016\"] = obj[prop];\n\t\t\t\t//mapped[\"customfield_10034\"] = obj[prop];\n\t\t\t\t//mapped[\"Story points\"] = obj[prop];\n\t\t\t\t//mapped[\"storypoints\"] = obj[prop];\n\t\t\t\t//mapped[\"Story Points\"] = obj[prop];\n\t\t\t\t// 10016 -> story point estimate\n\t\t\t//} else {\n\t\t\t\t//mapped[fields.nameMap[prop] || prop] = obj[prop];\n\t\t\t//}\n\t\t\teditBody.update[fieldMapping.nameMap[prop] || prop] = [{set: obj[prop]}];\n\t\t}\n\t\treturn editBody;\n\t}\n\tfunction mapNamesToIds(obj, fields) {\n\t\tconst mapped = {};\n\t\tfor (let prop in obj) {\n\t\t\t//if(prop === \"Story points\") {\n\t\t\t\t// 10016 -> story point estimate\n\t\t\t\t// 10034 -> story points\n\t\t\t\t//obj[prop] = \"\"+obj[prop];\n\t\t\t\t//mapped[\"customfield_10016\"] = obj[prop];\n\t\t\t\t//mapped[\"customfield_10034\"] = obj[prop];\n\t\t\t\t//mapped[\"Story points\"] = obj[prop];\n\t\t\t\t//mapped[\"storypoints\"] = obj[prop];\n\t\t\t\t//mapped[\"Story Points\"] = obj[prop];\n\t\t\t\t// 10016 -> story point estimate\n\t\t\t//} else {\n\t\t\t\tmapped[fields.nameMap[prop] || prop] = obj[prop];\n\t\t\t//}\n\t\t\t\n\t\t}\n\t\treturn mapped;\n\t}\n\n\treturn window.jiraHelpers = jiraHelpers;\n}\n","import { StacheElement, type, ObservableObject } from \"./can.js\";\nimport {getEstimateDefault} from \"./schedule-prepare-issues.js\";\nimport {toCVSFormatAndAddWorkingBusinessDays} from \"./shared/issue-cleanup.js\";\nimport {saveJSONToUrl, saveJSONToUrlAndToLocalStorage, booleanParsing} from \"./shared/state-storage.js\";\n\nimport \"./jira-configure-csv.js\";\nimport \"./shared/simple-tooltip.js\";\nimport {Configure} from \"./jira-config.js\";\nimport \"./monte-carlo.js\";\nimport \"./estimation-progress-report.js\"\nimport {nativeFetchJSON} from \"./jira-oidc-helpers.js\";\n\nconst updateEpicsPromise = new Promise((resolve, reject)=>{\n  setTimeout(function(){\n    import(\"./update-epics.js\").then(resolve, reject);\n  },500);\n})\n\n\n\nconst jiraDataFormatter = new Intl.DateTimeFormat('en-CA', { // 'en-CA' uses the YYYY-MM-DD format\n  year: 'numeric',\n  month: '2-digit', // '2-digit' will ensure month is always represented with two digits\n  day: '2-digit', // '2-digit' will ensure day is always represented with two digits\n  calendar: 'iso8601', // This specifies usage of the ISO 8601 calendar\n  timeZone: \"UTC\"\n});\n\nclass JiraAutoScheduler extends StacheElement {\n  static view = `\n    <simple-tooltip this:to='this.tooltip'></simple-tooltip>\n    {{# if(this.showSavingModal)}}\n      <dialog on:close=\"this.showSavingModal = false\">\n        <update-epics\n          workItems:from=\"this.workItems\"\n          storyPointField:from=\"this.config.storyPointField[0]\"\n          startDateField:from=\"this.config.startDateField[0]\"\n          dueDateField:from=\"this.config.dueDateField[0]\"\n          startDate:from=\"this.startDate\"\n          jiraHelpers:from=\"this.jiraHelpers\"\n          on:saved=\"this.closeModalAndRefreshIssues()\"\n          >\n        </update-epics>\n      </dialog>\n    {{/ }}\n    \n    {{# if(this.loginComponent.isLoggedIn) }}\n\n    \n      <details class=\" rounded-lg bg-white m-2 drop-shadow-md hide-on-fullscreen\">\n        <summary class=\"text-base p-3 bg-white cursor-pointer rounded-lg\">\n          Configure <span class=\"inline pl-8 text-sm\">JQL: <span class=\"font-mono bg-neutral-40 text-sm\">{{ this.issueJQL}}</span></span>\n        </summary>\n        <jira-configure-csv \n          rawIssues:from=\"this.csvIssues\" \n          rawIssuesPromise:from=\"this.csvIssuesPromise\"\n          config:from=\"this.config\"\n          issueJQL:bind=\"this.issueJQL\"\n          loadChildren:bind=\"this.loadChildren\"\n          limitIssues:bind=\"this.limitIssues\"\n          />\n\n    </details>\n    {{ else }}\n      <div class=\" rounded-lg m-2 drop-shadow-md hide-on-fullscreen bg-yellow-300 p-4\">\n        The following is a sample plan. Learn more about it in the \n          \"<a class=\"text-blue-400\" href=\"https://www.bitovi.com/academy/learn-agile-program-management-with-jira/estimating.html\">Agile Program Management with Jira</a>\" \n          training. Click \"Connect to Jira\" to load your own data.\n      </div>\n    {{/ if }}\n\n    <div class=\" z-10 right-0 flex rounded-t-lg  text-base p-2 gap-6 bg-white mt-2 mx-2 fullscreen-fixed-to-top fullscreen-m-0 fullscreen-round-none\">\n      {{# if( this.csvIssues ) }}\n          <div class=\"flex grow gap-2\">\n            <label class=\"text-base py-1\">Probability Thresholds:</label>\n            <div class=\"grow relative -top-1\">\n              <input \n                class=\"w-full\"\n                type=\"range\"\n                min=\"50\" max=\"90\" step=\"5\"\n                value:from=\"this.dateThresholds\" \n                on:input:value:to=\"this.dateThresholds\"\n                list=\"range-values\"/>\n                <datalist id=\"range-values\" w=\"1206px\" l=\"-59px\"\n                  style=\"width: calc( (100% - 15px) * 10.115/9); left: calc(7.5px -  (100% - 15px) * 10.115/9/18 ); grid-template-columns: repeat(9, 1fr); grid-template-rows: auto;\"\n                  class=\"grid absolute top-6\">\n                  <option value=\"50\" class=\"text-center text-xs relative left-3\">Median</option>\n                  <option value=\"55\" class=\"text-center text-xs\">Average</option>\n                  <option value=\"60\" class=\"text-center text-xs\">60%</option>\n                  <option value=\"65\" class=\"text-center text-xs\">65%</option>\n                  <option value=\"70\" class=\"text-center text-xs\">70%</option>\n                  <option value=\"75\" class=\"text-center text-xs\">75%</option>\n                  <option value=\"80\" class=\"text-center text-xs\">80%</option>\n                  <option value=\"85\" class=\"text-center text-xs\">85%</option>\n                  <option value=\"90\" class=\"text-center text-xs\">90%</option>\n                </datalist>\n            </div>\n            \n              \n          </div>\n\n          <div  class=\"flex gap-1\">\n            <label class=\"text-base py-1\">Start Date:</label>\n            <input type=\"date\"\n              class=\"form-border font-mono px-1 py-0 text-sm h-8\"\n              valueAsDate:bind=\"this.startDate\"/>\n          </div>\n            <div>\n              <button class=\"btn-primary\"\n                {{# if(this.loginComponent.isLoggedIn) }}\n                title=\"Save dates to Jira\"\n                {{ else }}\n                title=\"Connect to save dates to Jira\"\n                {{/ if }}\n                on:click=\"this.showSavingModal = true\" disabled:from=\"or( not(this.startDate), not(this.loginComponent.isLoggedIn) )\">Update Epic Dates</button>\n            </div>\n      {{ else }}\n        <div class=\"font-lg bg-yellow-500\">Loading issues</div>\n      {{/ if }}\n    </div>\n      \n    <div class=\"fullscreen-pt-14 fullscreen-m-0 bg-white pt-1 mx-2 rounded-b-lg pb-2\">\n      {{# and(this.csvIssuesPromise.isResolved, this.startDate) }}\n        <monte-carlo class=\"block relative\"\n          configuration:from=\"this.configuration\"\n          getVelocityForTeam:from=\"this.getVelocityForTeam\"\n          updateVelocity:from=\"this.updateVelocity\"\n          rawIssues:from=\"this.csvIssues\"\n          getParallelWorkLimit:from=\"this.getParallelWorkLimit\"\n          velocities:from=\"this.velocities\"\n          addWorkPlanForTeam:from=\"this.addWorkPlanForTeam\"\n          removeWorkPlanForTeam:from=\"this.removeWorkPlanForTeam\"\n          startDate:from=\"this.startDate\"\n          uncertaintyWeight:from=\"this.uncertaintyWeight\"\n\n          allWorkItems:to=\"this.workItems\"\n          ></monte-carlo>\n      {{/ and }}\n      {{# if(this.csvIssuesPromise.isRejected) }}\n        <div class=\"text-lg bg-yellow-500 p-4\">\n          <p>There was an error loading from Jira!</p>\n          <p>Error message: {{this.csvIssuesPromise.reason.errorMessages[0]}}</p>\n          <p>Please check your JQL is correct!</p>\n        </div>\n      {{/ }}\n      {{# if(this.csvIssuesPromise.isPending) }}\n        <div class=\"p-4 text-lg text-center\">\n          <svg class=\"animate-spin -ml-0.5 -mt-0.5 mr-1 h-e w-4 text-blue-400 inline-block\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n              <circle class=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" stroke-width=\"4\"></circle>\n              <path class=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n          </svg> Loading Issues\n        </div>\n        \n      {{/ }}\n    </div>\n\n    {{# and(this.csvIssuesPromise.isResolved, this.startDate) }}\n      <div class=\"p-2 m-2 rounded-lg pb-2 bg-white\">\n        <estimation-progress-report \n          rawIssues:from=\"this.csvIssues\"\n          getEstimate:from=\"this.configuration.getEstimate\"\n          getConfidence:from=\"this.configuration.getConfidence\"\n          getTeamKey:from=\"this.configuration.getTeamKey\">\n        </estimation-progress-report>\n      </div>\n    {{/ }}\n  `;\n  static props = {\n    showSavingModal: false,\n    showingFullscreen: {type: Boolean, default: false},\n    jiraHelpers: {type: type.Any},\n    issueUpdates: {type: type.Any},\n    // dayWidth: saveJSONToUrl(\"dayWidth\",5,type.maybeConvert(Number)),\n    get uncertaintyWeight(){\n      const dateThreshold = this.dateThresholds;\n      if(dateThreshold == 55) {\n        return \"average\";\n      } else {\n        return dateThreshold;\n      }\n    },\n    issueJQL: saveJSONToUrlAndToLocalStorage(\"issueJQL\", \"issueType = Epic and statusCategory != Done\"),\n    loadChildren: saveJSONToUrl(\"loadChildren\", false, Boolean, booleanParsing),\n    dateThresholds: saveJSONToUrl(\"weight\",55,type.maybeConvert(Number)),\n\t\tstartDate: saveJSONToUrl(\"startDate\",nowUTC(),type.maybeConvert(Date)),\n\t\tworkLimit: saveJSONToUrl(\"workLimit\",{},type.maybeConvert(Object)),\n    limitIssues: saveJSONToUrl(\"loadChildren\", true, Boolean, booleanParsing),\n    //rawIssues: type.Any,\n    workItems: type.Any,\n    tooltip: HTMLElement,\n    dialog: HTMLElement,\n    loginComponent: HTMLElement,\n    get configPromise(){\n      let fieldsPromise;\n      if(this.issueJQL === \"promotions example\" || this.loginComponent.isLoggedIn === false) {\n        fieldsPromise =  nativeFetchJSON(\"./examples/default-fields.json\");\n      } else {\n        fieldsPromise =  jiraHelpers.fieldsRequest;\n      }\n      \n      return fieldsPromise.then((fields)=>{\n        return new Configure({fields})\n      })\n    },\n    config: {\n      async(resolve) {\n        this.configPromise.then(resolve);\n      }\n    },\n    \n    velocities: {\n      get default(){\n        return new ObservableObject(\n          JSON.parse( localStorage.getItem(\"team-velocities\") ) || {}\n        );\n      }\n    },\n    get csvIssuesPromise(){\n      if(!this.config) {\n        return Promise.resolve([]);\n      }\n\n      // do this for side-effects\n      this.hackToRefreshIssues;\n\n      if(this.login === \"promotions example\" || this.loginComponent.isLoggedIn === false) {\n        return nativeFetchJSON(\"./examples/promotions.json\");\n      } else {\n        const serverInfoPromise = this.jiraHelpers.getServerInfo();\n        \n        const loadIssues = this.loadChildren ? \n          this.jiraHelpers.fetchAllJiraIssuesAndDeepChildrenWithJQLUsingNamedFields :\n          this.jiraHelpers.fetchAllJiraIssuesWithJQLUsingNamedFields;\n\n        const issuesPromise = loadIssues({\n            jql: this.issueJQL,//this.jql,\n            fields: this.config.issueFields, // LABELS_KEY, STATUS_KEY ]\n            limit: this.limitIssues ? 100 : Infinity\n        });\n\n        return Promise.all([\n            issuesPromise, serverInfoPromise\n        ]).then(([issues, serverInfo]) => {\n            const csv = toCVSFormatAndAddWorkingBusinessDays(issues, serverInfo);\n            return csv;\n        })\n      }\n      \n    },\n\t\tcsvIssues: {\n\t\t\tasync(resolve) {\n        if(!this.csvIssuesPromise) {\n          resolve(null)\n        } else {\n          this.csvIssuesPromise.then(resolve);\n        }\n\t\t\t}\n\t\t},\n    // csv issues should derive from events, will change later!\n    hackToRefreshIssues: type.Any,\n    get velocitiesJSON(){\n      return this.velocities.serialize();\n    },\n    /*\n    get teams(){\n      const workByTeams = this.workByTeam;\n      return Object.keys(this.workByTeam || {}).map( (key)=> {\n        return workByTeams[key];\n      })\n    },\n    */\n\t\tget configuration(){\n      if(!this.config) {\n        return;\n      }\n\t\t\treturn {\n\t\t\t\tgetTeamKey: this.config.getTeamKey,\n\t\t\t\tgetDaysPerSprint: this.config.getDaysPerSprint,\n\t\t\t\tgetConfidence: this.config.getConfidence,\n\t\t\t\tgetEstimate: this.config.getEstimate,\n\t\t\t\tgetParentKey: this.config.getParentKey,\n\t\t\t\tgetBlockingKeys: this.config.getBlockingKeys\n\t\t\t};\n\t\t}\n  };\n  // hooks\n  async connected() {\n    this.listenTo(\"velocitiesJSON\",({value})=>{\n      localStorage.setItem(\"team-velocities\", JSON.stringify(value));\n    })\n\n  }\n  closeModalAndRefreshIssues(){\n    this.showSavingModal = false;\n    this.hackToRefreshIssues = {};\n  }\n  getVelocityForTeam(teamKey) {\n    return this.velocities[teamKey] || 21;\n  }\n  updateVelocity(teamKey, value){\n    this.velocities[teamKey] = value;\n  }\n\taddWorkPlanForTeam(teamKey){\n\t\tconst copy = { ... this.workLimit };\n\t\tcopy[teamKey] = teamKey in copy ? copy[teamKey]+1 : 2;\n\t\tthis.workLimit = copy;\n\t}\n\tremoveWorkPlanForTeam(teamKey){\n\t\tconst copy = { ... this.workLimit };\n\t\tif(copy.workLimit === 2) {\n\t\t\tdelete copy.workLimit;\n\t\t} else if(teamKey in copy) {\n\t\t\tcopy[teamKey]--\n\t\t}\n\t\tthis.workLimit = copy;\n\t}\n\tgetParallelWorkLimit(teamKey) {\n\t\tif(teamKey in this.workLimit) {\n\t\t\treturn this.workLimit[teamKey];\n\t\t} else {\n\t\t\treturn 1;\n\t\t}\n\t}\n  get updateFields(){\n    const storyPoints = this.config.storyPointField[0],\n      startDate = this.config.startDateField[0],\n      dueDate = this.config.dueDateField[0];\n\n    if(storyPoints && startDate && dueDate) {\n      return {storyPoints , startDate, dueDate};\n    }\n  }\n  startSaveDates(event){\n    // we can calculate how much changed work there is and show the button then ...\n    event.preventDefault();\n    \n    updateEpicsPromise.then((module)=>{\n\n      this.dialog.innerHTML = \"\";\n      const updateEpics = new module.default().initialize({\n       \n      });\n      this.dialog.appendChild(updateEpics);\n      this.dialog.showModal();\n      \n    })\n\n  }\n  toggleFullscreen(event){\n    event.preventDefault();\n    document.body.classList.toggle(\"fullscreen\");\n    this.showingFullscreen = document.body.classList.contains(\"fullscreen\");\n  }\n}\n\nexport default JiraAutoScheduler;\n\ncustomElements.define(\"jira-auto-scheduler\", JiraAutoScheduler);\n\n\n\nconst DEFAULT_VELOCITY = 21;\n\nfunction nowUTC(){\n  let now = new Date();\n\n  let year = now.getUTCFullYear();\n  let month = now.getUTCMonth();\n  let day = now.getUTCDate();\n\n  // Create a new Date object using UTC components\n  return new Date(Date.UTC(year, month, day));\n}\n\n\n\n\n// VELOCITY STUFF ==========================================================\nfunction getVelocitiesByProjectId(projectIds) {\n    var map = {};\n    projectIds.forEach((projectId) => {\n        if(localStorage.getItem(projectId+\"-velocity\")) {\n            map[projectId] = parseInt(localStorage.getItem(projectId+\"-velocity\"),10);\n        } else {\n            map[projectId] = DEFAULT_VELOCITY;\n        }\n    });\n    return map;\n}\n\nfunction setupSavingVelocity(input, team) {\n    input.onchange = function(){\n        if( parseInt(this.value, \"10\") > 0 ) {\n            localStorage.setItem(team.teamKey+\"-velocity\", parseInt(this.value, \"10\") );\n            var teams = document.querySelectorAll(\".team\");\n            process(lastProcessedIssues);\n            for(let teamDiv of teams) {\n                teamDiv.remove();\n            }\n        }\n    }\n}\n\n\n// Overwrite things\n\nconst shirtSizeToPoints = {Small: 5, Medium: 13, Large: 21};\nfunction getShirtSizePoints(value) {\n  if(shirtSizeToPoints[value]) {\n    return shirtSizeToPoints[value];\n  } else {\n    throw new Error(value+\" shirt size does not have points\");\n  }\n}\n\n// returning undefiined has meaning. We preserve that.\nfunction EB_getEstimate(issue){\n\n  var rawValue = getEstimateDefault(issue);\n\n  if( issue[\"Custom field (T-shirt Size)\"] ) {\n    for( let value of issue[\"Custom field (T-shirt Size)\"] ){\n        if(value) {\n          rawValue = getShirtSizePoints(value)\n        }\n    }\n  }\n  let sum;\n  if(issue._children) {\n    sum = issue._children.reduce((sum, child) => {\n      return sum + getEstimateDefault(child) || 0;\n    }, 0);\n    if(sum > 0) {\n      return typeof rawValue === \"number\" ? rawValue + sum : sum;\n    }\n  }\n  return rawValue || 13;\n\n}\n","import { StacheElement, type } from \"./can.js\";\n\nexport default class JiraLogin extends StacheElement {\n    static view = `\n    {{# if(this.isPending) }}\n        <button\n            class=\"p-1 block pointer bg-orange-400 text-white rounded-lg font-bitovipoppins font-lg font-bold\"\n            style=\"border: none\">\n            Connecting\n        </button>\n    {{ else }}\n        {{# if(this.isLoggedIn) }}\n            <button\n                class=\"p-1 block pointer bg-orange-400 text-white rounded-lg font-bitovipoppins font-lg font-bold\"\n                style=\"border: none\"\n                on:click=\"this.logout()\">\n                Log Out\n            </button>\n        {{ else }}\n            <button\n                class=\"p-1 block pointer bg-orange-400 text-white rounded-lg font-bitovipoppins font-lg font-bold\"\n                style=\"border: none\"\n                on:click=\"this.login()\">\n                Connect to Jira\n            </button>\n        {{/ if }}\n    {{/ if }}\n    {{# not(this.isResolved) }}\n\n    {{/ not}}\n\n\n   \n    `;\n    static props = {\n        jiraHelpers: type.Any,\n        isLoggedIn: false,\n        isResolved: false,\n        isPending: true\n    };\n    login(){\n        this.isResolved = false;\n        this.isPending = true;\n        jiraHelpers.getAccessToken().then(()=>{\n            this.isLoggedIn = true;\n            this.isResolved = true;\n            this.isPending = false;\n        })\n    }\n    logout(){\n        this.isPending = true;\n        localStorage.clear();\n        this.isLoggedIn = false;\n        this.isResolved = false;\n        this.isPending = false;\n    }\n    connected(){\n        \n        // imperative is easier here ...\n\n        // if someone had a token, always automatically log them in\n        if(jiraHelpers.hasAccessToken()) {\n            if(jiraHelpers.hasValidAccessToken()) {\n                this.isLoggedIn = true;\n                this.isResolved = true;\n                this.isPending = false;\n            } else {\n                jiraHelpers.getAccessToken().then(()=>{\n                    this.isLoggedIn = true;\n                    this.isResolved = true;\n                    this.isPending = false;\n                })\n            }\n        } else {\n            this.isLoggedIn = false;\n            this.isResolved = true;\n            this.isPending = false;\n        }\n    }\n}\n\ncustomElements.define(\"jira-login\", JiraLogin);\n\n\n","import { StacheElement, type, stache } from \"../can.js\";\nimport SimpleTooltip from \"./simple-tooltip.js\";\n\n\n\nconst resourceSelection = stache(`<div class=\"bg-white rounded-sm shadow p-3 z-50\">\n    {{# for(resource of this.resources) }}\n        <button class=\"link block\" on:click=\"this.setResource(resource)\">{{resource.name}}</button>\n    {{/ for }}\n</div>`)\n\nconst pillClass = `text-center inline-flex items-center mr-8 bg-gray-100 rounded-lg pt-1 pr-1 font-bitovipoppins font-lg`\n\nexport default class SelectCloud extends StacheElement {\n    static view = `\n        {{# if(this.alternateResources.isPending) }}\n            <div class=\"${pillClass}\"> ... </div>\n        {{/ if }}\n        {{# if(this.alternateResources.value.length)}}\n            <button class=\"${pillClass} pl-2 hover:bg-gray-200\"\n                on:click=\"this.showResources()\">\n                {{# if(this.currentResource.value.name) }}<span>{{this.currentResource.value.name}}</span>{{/if}}\n                <svg class=\"w-2.5 h-2.5 ms-2\" aria-hidden=\"true\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 10 6\">\n                <path stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"m1 1 4 4 4-4\"/>\n                </svg>\n            </button>\n        {{/ if }}\n        {{# and(not(this.alternateResources.value.length), this.currentResource.value.name) }}\n            <div class=\"${pillClass} pl-2\">\n                {{this.currentResource.value.name}}\n            </div>\n        {{/and}}\n\n    `;\n    static props = {\n        jiraHelpers: type.Any,\n        loginComponent: type.Any,\n        get canQuery(){\n            return this.jiraHelpers && this.loginComponent?.isLoggedIn;\n        },\n        get accessibleResources() {\n            if(this.canQuery) {\n                return this.jiraHelpers.fetchAccessibleResources().then((resources)=>{\n                    const currentCloudId = localStorage.getItem(\"scopeId\")\n                    return resources.map((resource)=>{\n                        return {\n                            ...resource,\n                            isCurrent: resource.id === currentCloudId\n                        }\n                    })\n                });\n            } else {\n                return Promise.resolve([])\n            }\n        },\n        get currentResource(){\n            return this.accessibleResources.then( resources => {\n                return resources.find( r => r.isCurrent )\n            })\n        },\n        get alternateResources(){\n            return this.accessibleResources.then( resources => {\n                return resources.filter( r => !r.isCurrent )\n            })\n        }\n    };\n    showResources(){\n        const div = document.createElement(\"div\");\n        this.alternateResources.then((resources) => {\n            // come back acround and fix this\n            \n            \n            this.simpleTooltip.belowElementInScrollingContainer(this, resourceSelection({\n                resources,\n                setResource(resource) {\n                    localStorage.setItem(\"scopeId\", resource.id);\n                    window.location.reload();\n                }\n            }) );\n            // wait for this click event to clear the event queue\n            \n            setTimeout(()=>{\n                const handler = () => {\n                    this.simpleTooltip.leftElement();\n                    window.removeEventListener(\"click\", handler);\n                }\n                window.addEventListener(\"click\", handler);\n            }, 13)\n            \n        })\n        \n        \n        \n    }\n    connected(){\n        \n        const simpleTooltip = new SimpleTooltip();\n        this.parentNode.append(simpleTooltip);\n        this.simpleTooltip = simpleTooltip;\n\n    }\n}\n\n\ncustomElements.define(\"select-cloud\", SelectCloud);\n\n\n","import JiraAutoScheduler from \"./jira-auto-scheduler.js\";\nimport JiraLogin from \"./jira-login.js\";\nimport JiraOIDCHelpers from \"./jira-oidc-helpers.js\";\nimport \"./shared/select-cloud.js\";\n\nexport default async function main(config) {\n\tconst jiraHelpers = JiraOIDCHelpers(config);\n\t// The main app wants to know if the person is logged in before it starts doing its stuff\n\tconst loginComponent = new JiraLogin().initialize({jiraHelpers});\n\n\n\tconst selectCloud = document.querySelector(\"select-cloud\")\n\tselectCloud.loginComponent = loginComponent;\n\tselectCloud.jiraHelpers = jiraHelpers;\n\n\tconst listener = ({value})=>{\n\t\tif(value) {\n\t\t\tloginComponent.off(\"isResolved\", listener);\n\t\t\tmainElement.style.display = \"none\";\n\t\t\tconst report = new JiraAutoScheduler().initialize({jiraHelpers, loginComponent});\n\t\t\tmainElement.replaceWith(report);\n\t\t}\n\t}\n\tloginComponent.on(\"isResolved\",listener);\n\tlogin.appendChild(loginComponent);\n\n}\n\n\n"],"names":["global","env","process","argv","cwd","browser","NODE_ENV","version","platform","navigator","userAgent","test","self","Object","prototype","toString","call","window","CanSymbol","canNamespace_1_0_0_canNamespace","Symbol","for","symbolNum","descriptionToSymbol","symbolToDescription","description","symbolValue","symbol","defineProperties","value","keyFor","forEach","name","canSymbol_1_7_0_canSymbol","helpers","symbolNames","symbols","map","length","obj","index","undefined","list","type","Array","isArray","plainFunctionPrototypePropertyNames","getOwnPropertyNames","plainFunctionPrototypeProto","getPrototypeOf","getNewOrApply","isPrimitive","coreHasOwn","hasOwnProperty","funcToString","Function","objectCtorString","isPlainObject","proto","Constructor","constructor","isSymbolLike","onValueSymbol","onKeyValueSymbol","onPatchesSymbol","symbolStart","substr","fnKeys","isConstructorLike","func","propertyNames","i","len","isFunctionLike","result","isListLike","iterator","isMapLike","isObservableLike","Boolean","isScopeLike","every","key","_meta","isBuiltIn","indexOf","isValueLike","isMoreListLikeThanMapLike","this","isIteratorLike","next","isPromise","Promise","context","args","slice","arguments","apply","new","makeNew","create","ret","setKeyValueSymbol","getKeyValueSymbol","getValueSymbol","setValueSymbol","reflections","setKeyValue","defineProperty","enumerable","configurable","writable","getKeyValue","deleteKeyValue","getValue","setValue","item","Error","splice","removing","adding","howMany","updateValues","concat","addValues","add","push","removeValues","get","set","getSet","makeFallback","symbolName","fallbackName","event","handler","queueName","method","makeErrorIfMissing","errorMessage","ArrayMap","observe","onKeyValue","offKeyValue","onKeys","onKeysAdded","onKeysRemoved","getKeyDependencies","getWhatIChange","getChangesDependencyRecord","fn","keyHasDependencies","onValue","offValue","getValueDependencies","valueHasDependencies","onPatches","offPatches","onInstancePatches","offInstancePatches","onInstanceBoundChange","offInstanceBoundChange","isBound","onEvent","eventName","callback","queue","addEventListener","offEvent","removeEventListener","setPriority","priority","getPriority","Map","contents","_getIndex","idx","has","delete","shapeReflections","Object_Keys","makeMap","shiftFirstArgumentToThis","getKeyValueSymbol$1","shiftedGetKeyValue","setKeyValueSymbol$1","shiftedSetKeyValue","sizeSymbol","hasUpdateSymbol","shouldUpdateOrAssign","isSerializedHelper","keys","e","makeSerializer","methodName","symbolsToCheck","serializeMap","SerializeOperation","MapType","first","Type","unwrap","serialize","isSerializing","circularReferenceIsSerializing","createSerializeMap","end","operation","serializer","oldResult","eachIndex","childValue","eachKey","prop","fastHasOwnKey","hasOwnKey","bind","getOwnEnumerableKeys","addPatch","patches","patch","lastPatch","deleteCount","insert","updateDeepList","target","source","isAssign","sourceArray","toArray","lastIndex","curVal","newVal","assignDeep","updateDeep","patchLen","each","eachListLike","iter","res","done","size","arr","enumerableKeys","getOwnKeys","found","objKey","getOwnKeyDescriptor","getOwnPropertyDescriptor","assignMap","assignList","inserting","assign","assignDeepMap","assignDeepList","updateMap","sourceKeyMap","sourceGetKeyValue","targetSetKeyValue","updateList","update","updateDeepMap","hasKey","getAllEnumerableKeys","getAllKeys","assignSymbols","isSerialized","count","defineInstanceKey","cls","properties","isSerializable","shape","getSchemaSymbol","isMemberSymbol","newSymbol","comparator","a","b","localeCompare","sort","Date","out","schemaReflections","getSchema","type$$1","getIdentity","schema","identity","id","JSON","stringify","cloneKeySort","convert","Number","String","isPrimitiveConverter","isMemberTest","isMember","createNew","getNameSymbol","anonymousID","getName_1","setName","nameGetter","getName","parent","currentIndex","val","WeakMap","Set","WeakSet","reflect","propDescriptor","canReflect_1_19_2_canReflect","Reflect","utils","isContainer","current","strReplacer","parts","replace","split","canKey_1_2_1_utils","_delete","data","path","get_1","container","replaceWith","str","replacer","shouldRemoveMatchedPaths","whole","set_1","object","TypeError","walk","keyCallback","part","canKey_1_2_1_canKey","deleteKey","transform","transformer","copy","writeKey","readKey","readParts","writeParts","parentsAndKeys","info","parentAndKey","deleteKeys","commonjsGlobal","globalThis","commonjsRequire","createCommonjsModule","module","exports","canLog_1_0_2_canLog","warnTimeout","logLevel","warn","console","_logger","log","error","dev","canQueues_1_3_2_queueState","lastTask","canAssign_1_3_3_canAssign","d","s","desc","noOperation","Queue","callbacks","onFirstTask","onComplete","tasks","_log","noop","enqueue","meta","_logEnqueue","flush","task","_logFlush","parentTask","stack","canQueues_1_3_2_queue","PriorityQueue","taskMap","taskContainersByPriority","curPriorityIndex","Infinity","curPriorityMax","isFlushing","tasksRemaining","isFirst","getTaskContainerAndUpdateRange","tcByPriority","taskContainer","isEnqueued","flushQueuedTask","dequeue","tasksRemainingCount","canQueues_1_3_2_priorityQueue","CompletionQueue","flushCount","hasDuplicate","sortInput","canQueues_1_3_2_completionQueue","sortOrder","compare","compareDocumentPosition","ownerDocument","document","documentElement","contains","canQueues_1_3_2_elementSort","uniqueSort","results","elem","duplicates","j","canElementSymbol","sortTasks","taskA","taskB","element","DomOrderQueue","unsortable","array","low","high","mid","canQueues_1_3_2_sortedIndexBy","shift","canQueues_1_3_2_domOrderQueue","canQueues_1_3_2_canQueues","batchData","NOTIFY_QUEUE","DERIVE_QUEUE","DOM_UI_QUEUE","DOM_QUEUE","MUTATE_QUEUE","batchStartCounter","addedTask","batchNum","queueNames","queues","notifyQueue","deriveQueue","domQueue","domUIQueue","mutateQueue","batch","start","number","stop","isCollecting","runAsTask","reasonLog","enqueueByQueue","fnByQueue","makeMeta","QUEUE","unshift","logStack","taskCount","canObservationRecorder_1_3_1_canObservationRecorder","addParentSymbol","ObservationRecorder","deps","keyDependencies","valueDependencies","childDependencies","traps","ignore","pop","top","eventSet","addMany","observes","created","obs","peekValue","isRecording","last","makeDependenciesRecord","makeDependenciesRecorder","trap","oldTraps","trapsCount","isBuiltInPrototype","protoString","isNotObjObj","isObjSomething","getDeepSize","root","level","getDeep","node","items","depth","maxDepth","clearDeep","deleteHandler","valuesToRemove","KeyTree","treeStructure","FirstConstructor","empty","place","rootWasEmpty","childNode","onFirst","getNode","parentNode","lastKey","nodeToRemove","onEmpty","isEmpty","canKeyTree_1_2_2_canKeyTree","canDefineLazyValue_1_1_1_defineLazyValue","initializer","merge","sourcekeyDeps","destKeyDeps","entry","mergeKeyDependencies","sourceValueDeps","destValueDeps","dep","mergeValueDependencies","on","handlers","off","old","queuesArgs","whatIChange","notifyHandlers","mutateHandlers","changes","record","derive","mutate","defineLazyHandlers","onBound","onUnbound","mixinValueEventBindings","addHandlers","addNewKeyDependenciesIfNotInOld","oldEventSet","observable","onDependencyChange","addObservablesNewKeyDependenciesIfNotInOld","oldDependencies","removeKeyDependencies","removeObservablesKeyDependencies","addValueDependencies","removeValueDependencies","observables","canObservation_4_2_0_recorderDependencyHelpers","observationData","newDependencies","observationReciever","temporarilyBoundNoOperation","unbindTemporarilyBoundValue","canObservation_4_2_0_temporarilyBind","compute","computeInstance","setTimeout","dispatchSymbol","getChangesSymbol","getValueDependenciesSymbol","Observation","options","isObservable","bound","_value","dependencyChange","_name","oldValue","temporarilyBind","updateChildrenAndSelf","hasDependencies","quoteString","x","previous","observationProto","observation","childHasChanged","alias","addAll","canObservation_4_2_0_canObservation","makeDependencyRecord","isFunction","getWhatIChangeSymbol","getKeyDependenciesSymbol","getValueDependenciesSymbol$1","isEmptyRecord","getWhatChangesMe","mutatedByMap","gotKey","dependencyRecord","mutateDependenciesForKey","getMutatedKeyDependencies","mutateDependenciesForValue","getMutatedValueDependencies","canReflectDependencies_1_1_2_canReflectDependencies","addMutatedBy","mutated","mutator","keysSet","deleteMutatedBy","getDependencyDataOf","whatChangesMe","canReflectDependencies","keyPath","keyPathParts","lastParent","keyData","valueSetter","symbolsToAssign","m","canSimpleObservable_2_5_0_log","dispatchSymbol$1","SimpleObservable","initialValue","value$$1","simpleObservableProto","canSimpleObservable_2_5_0_canSimpleObservable","peek","SettableObservable","lastSetValue","activate","oldVal","newPriority","settable","from","observationFunction","objectName","returnedBy","getter","to","with","strColons","strWords","strLowUp","strDash","strQuote","strSingleQuote","strHyphenMatch","strCamelMatch","convertBadValues","content","isNaN","string","esc","capitalize","charAt","toUpperCase","camelize","match","chr","hyphenate","toLowerCase","pascalize","underscore","undHash","canString_1_1_0_canString","inSetupSymbol","CanString","reservedWords","abstract","boolean","break","byte","case","catch","char","class","const","continue","debugger","default","do","double","else","enum","export","extends","false","final","finally","float","function","goto","if","implements","import","in","instanceof","int","interface","let","long","native","null","package","private","protected","public","return","short","static","super","switch","synchronized","throw","throws","transient","true","try","typeof","var","void","volatile","while","constructorNameRegex","cache","initializing","namedCtor","canGetDescriptor","Construct","extend","getDescriptor","newProps","descriptor","defineNonEnumerable","constructorExtends","_created","newInstance","inst","instance","setup","ReturnValue","__inSetup","init","_inherit","oldProps","addTo","_defineProperty","_overwrite","what","propName","base","defaults","staticProperties","instanceProperties","shortName","klass","_super_class","_super","constructorName","t","canConstruct_3_5_7_canConstruct","dispatch","eventHandlers","handlersCopy","Globals","define","enableCache","property","cachedValue","makeExport","reset","canGlobals_1_2_2_canGlobalsProto","canGlobals_1_2_2_canGlobalsInstance","globals","WorkerGlobalScope","global_1","document$1","isNode","isBrowserWindow","getTargetDocument","isDomEventTarget","nodeName","nodeType","fixSyntheticEventsOnDisabled","testEventName","input","createElement","disabled","timer","onTest","clearTimeout","initEvent","dispatchEvent","util","createEvent","eventData","bubbles","cancelable","eventType","addDomContext","removeDomContext","forceEnabledForDispatch","isInsertedOrRemoved","isDisabled","isDispatchingOnDisabled","EventRegistry","_registry","defaultEventType","useCapture","domEvents","_eventRegistry","addEvent","eventArgs","addDelegateListener","selector","_eventTree","removeDelegateListener","enableForDispatch","Delegator","parentKey","events","delegated","handlersBySelector","ev","cur","propagate","origStopPropagation","stopPropagation","origStopImmediatePropagation","stopImmediatePropagation","el","matches","msMatchesSelector","currentTarget","makeDelegator","MakeDelegateEventTree","legacyMapBindings","canDomEvents_1_3_13_canDomEvents","isDomEventTarget$1","metaSymbol","dispatchBoundChangeSymbol","dispatchInstanceOnPatchesSymbol","onKeyValueSymbol$1","offKeyValueSymbol","onEventSymbol","offEventSymbol","onValueSymbol$1","offValueSymbol","inSetupSymbol$1","_eventSetup","_eventTeardown","listenHandlers","ensureMeta","stopListeningArgumentsToKeys","bindTarget","defaultQueue","props","handlersByType","dispatchConstructorPatches","patchesNode","keysNode","keyChanged","eventAndArgs","keyHandlers","one","listenTo","stopListening","symbols$1","defineNonEnumerable$1","unbind","map$1","SimpleMap","initialData","_data","attr","had","dispatched","ensureMeta$1","allowedLogKeysSet","simpleMapProto","canSimpleMap_4_3_3_canSimpleMap","createConstructorFunction_1","Parent","TypeConstructor","construct","copyIfMissing","Link","getOwnPropertySymbols","AsyncObservable","resolveCalled","inGetter","resolve","peek$1","async","getChangesSymbol$1","metaSymbol$1","ResolverObservable","resolver","_valueOptions","lastSet","contextHandlers","teardown","binder","resolverInstance","contextHandler","isBinding","lastValue","enqueueMeta","resetUnboundValueInGet","keyDeps","valueDeps","metaSymbol$2","addHandlers$1","lifecycleHandlers","instancePatchesHandlers","ensureMeta$2","props$1","onOffAndDispatch","dispatchName","handlersName","arg","mixinTypeBindings","type$1","canType_1_1_6_canType","baseTypeSymbol","strictTypeOfSymbol","makeSchema","values","canNew","strictNew","valueType","check","booleanNew","maybeValues","freeze","makeBaseType","typeObject","makeIsMember","getBaseType","makeMaybe","makeMaybeSchema","baseType","inheritFrom","o","wrapName","wrapper","isTypeObject","typeString","makePrimitiveType","Any","all","typeFn","convertedValues","parentSchema","Integer","makeCache","isFinite","Math","floor","maybe","maybeConvert","late","underlyingType","normalize","convertAll","newSymbol$1","serializeSymbol","inSetupSymbol$2","isMemberSymbol$1","hasBeenDefinedSymbol","canMetaSymbol","eventsProto","make","makeDefinition","getDefinitionsAndMethods","getDefinitionOrMethod","AsyncFunction","observableType","browserSupportsAsyncFunctions","peek$2","Object_defineNamedPrototypeProperty","defineConfigurableAndNotEnumerable","defineNotWritableAndNotEnumerable","eachPropertyDescriptor","cb","definition","define_1","typePrototype","defines","baseDefine","propertyDefaults","dataInitializers","computedInitializers","required","definitions","defaultDefinition","_computed","getEveryPropertyAndSymbol","iteratorSymbol","Iterator","extensions","isEnumerable","propertyDefinition","defFuncProp","propType","onlyType","getInitialValue","dataProperty","reader","read","setter","typeConvert","eventsSetter","defaultValue","newValue","then","callAsync","makeDefineInstanceKey","hooks","finalizeClass","defineResult","_define","methods","action","sealed","computeObj","getDefault","defaultValueFn","computed","getCurrent","setData","eventDispatcher","setEvents","hasGetter","canDefineType","typeName","message","callSetter","isAGetter","VALUE","sync","behaviors","addBehaviorToDefinition","behavior","def","behaviorDef","isAsyncFunction","setupComputed","computedBinding","teardownComputed","noTypeDefined","typeSetByDefault","defaultsCopy","definitionType","baseDefines","addDefinition","propertyDescriptor","skipGetDefinitionForMethods","resultType","onKeyValueSymbol$2","offKeyValueSymbol$1","finalizeInstance","requiredButNotProvided","instanceDefinitions","expando","msg","missingProps","thisName","join","returnFirstArg","normalizeTypeDefinition","_specialKeys","constructorDefines","instanceDefines","_instanceDefinitions","isSealed","simpleGetterSetters","makeSimpleGetterSetter","hasGet","updateSchemaKeys","prototypeObject","initialize","firstInitialize","seal","initialized","defineHelpers","defineExpando","reflectSerialize","unwrapped","constructorDefinitions","propDef","reflectUnwrap","ensureMeta$3","allowed","defineHelpers_1","getSchemaSymbol$1","keysForDefinition","mixinMapprops","thisarg","computedKeys","inSetupSymbol$3","isProtoReadOnSuper","Proxy","k","r","wasLogged","mixinProxy","Base","instances","LateDefined","underlyingPrototypeObject","getHandler","receiver","proxyHandlers","mixinTypeevents","Child","hooks$1","constructorPropsSymbol","renderedSymbol","mixinElement_1","BaseElement","Element","render","connectedCallback","mixins","createConstructorFunction","mixinElement","mixinMapProps","mixinTypeEvents","createConstructorFunction$1","makeDefineInstanceKey$2","mixins$1","mixinProxy$1","mixinTypeEvents$1","ObservableObject","proxiedInstance","canObservableObject","mixins$2","metaSymbol$3","helpers$1","assignNonEnumerable","shouldRecordObservationOnAllKeysExceptFunctionsOnProto","keyInfo","preventSideEffects","isAccessor","protoHasKey","targetValue","dispatchIndexEvent","how","itemsDefinition","dispatchLengthPatch","added","removed","newLength","oldLength","dispatchArgs","convertItem","convertItems","helpers_1$1","canMeta","computedPropertyDefinitionSymbol","onKeyValueSymbol$3","offKeyValueSymbol$2","ComputedObjectObservationData","forward","findComputed","computedPropertyDefinitions","computedPropertyDefinition","bindingCount","computedHelpers","computedObj","addKeyDependencies","proxyKeys","computedHelpers_1","mixins$3","hasOwn","isSymbolLike$1","metaSymbol$4","proxiedObjects","proxies","reverse","makePatches","protoFn","mutateMethod","makeSideEffects","proxy","numberKey","isInteger","onChange","change","hadOwn","keyType","setValueAndOnChange","deleteProperty","deleteSuccessful","ownKeys","proxyArray_1","localProxyKeys","makeObservable","shouldRecordObservation","createConstructorFunction$2","makeDefineInstanceKey$3","mixins$4","mixinMapProps$1","mixinTypeEvents$2","convertItem$1","ProxyArray","localOnPatchesSymbol","onKeyValueSymbol$4","offKeyValueSymbol$3","metaSymbol$5","MixedInArray","ObservableArray","isListLike$1","species","filter","listIndex","allSame","convertsTo","ConvertedType","ArrayType","mutateMethods$1","max","min","convertArgs","canObservableArray","canLog","canReflectDeps","getChangesSymbol$2","getValueSymbol$1","onValueSymbol$2","onEmitSymbol","offEmitSymbol","setValueSymbol$2","canElementSymbol$1","defaultSetValue","onEmit","listenToObservable","updateFunction","offEmit","turnOffListeningAndUpdate","updateObservable","offValueOrOffEmitFn","turnOnListeningAndUpdate","onValueOrOnEmitFn","Semaphore","binding","_binding","_type","Bind","_options","child","RangeError","cycles","onInitDoNotUpdateChild","onInitDoNotUpdateParent","onInitSetUndefinedParentIfChildIsDefined","childSemaphore","parentSemaphore","childToParent","setParent","parentToChild","setChild","_childToParent","_parentToChild","allowedUpdates","allowedChildUpdates","sticky","allowedParentUpdates","_bindingState","_updateChild","updateValue","bindingState","debugObservableName","debugPartnerName","semaphore","partner","setPartner","partnerSemaphore","_updateParent","updateChildName","updateParentName","increment","decrement","observableValue","currentValue","warningParts","groupCollapsed","lastStack","getFromLastStack","_debugSemaphores","semaphoreMutation","printStack","groupEnd","_incremented","semaphoreData","parentValue","startParent","startChild","parentContext","childContext","debugName","canBind_1_5_1_canBind","setElementSymbol","SetterObservable","lifecycleStatusSymbol","inSetupSymbol$4","teardownHandlersSymbol","defineConfigurableNonEnumerable","mixinElement$1","mixins$5","eventTargetInstalledSymbol","mixinProps","HTMLElement","realAddEventListener","realRemoveEventListener","DefinedClass","raisePropWarnings","eventQueueAddEventListener","eventQueueRemoveEventListener","installEventTarget","staticProps","includes","canAttributeEncoder_1_1_4_canAttributeEncoder","caseMattersAttributes","camelCaseToSpinalCase","lowerCaseChar","upperCaseChar","startsWith","allOfIt","endsWith","lastIndexOf","regexes","leftParens","rightParens","leftBrace","rightBrace","camelCase","forwardSlash","space","uppercase","uppercaseDelimiterThenChar","caret","dollar","at","delimiters","encoder","encoded","decoded","makeMap$1","countLines","alphaNumeric","alphaNumericHU","magicStart","endTag","RegExp","magicMatch","alphaRegex","attributeRegexp","caseMattersElements","closeSelf","special","tokenTypes","startOppositesMap","HTMLParser","html","returnIntermediate","intermediate","tokenType","handleIntermediate","parseStartTag","tag","tagName","rest","unary","parseEndTag","lineNo","parseAttrs","skipChars","pos","filename","close","parseMustache","mustache","inside","chars","callChars","charsText","text","comment","substring","searchStartTag","findBreak","callAttrStart","state","curIndex","attrName","nameStart","newAttrName","encode","attrStart","inName","callAttrEnd","valueStart","quotedVal","closedQuote","trim","inQuote","attrValue","attrEnd","inValue","lookingForEq","lookingForName","magicLength","lookingForValue","exec","otherOpposite","started","closingIndex","attributeRange","afterAttributeOffset","tagContent","startTag","isUnary","spaceIndex","search","canViewParser_4_1_3_canViewParser","location","location_1","GLOBAL","MutationObserver","WebKitMutationObserver","MozMutationObserver","mutationObserver","customElements","canGlobals_1_2_2_canGlobals","isFragment","getChildren","nodes","firstChild","nextSibling","treeWalkerFilterFunction","NodeFilter","FILTER_ACCEPT","treeWalkerFilter","acceptNode","isConnected","canDomMutate_2_0_9_Util","eliminate","getDocument","isDocumentElement","getParents","getAllNodes","createTreeWalker","rootNode","walker","isElementNode","SHOW_TEXT","SHOW_ELEMENT","SHOW_COMMENT","nextNode","getNodesWithTreeWalker","skip","tmp","getNodesLegacyB","subscription","disposal","isDisposed","fnName","displayName","wasNotInSet","inSet","Node","TEXT_NODE","DOCUMENT_NODE","contains$1","getIsConnectedFromNode","getIsConnectedFromDocument","doc","setIsConnected","createTextNode","domMutate","dispatchNodeInserted","dispatchNodeConnected","dispatchGlobalConnected","dispatchNodeRemoved","dispatchNodeDisconnected","dispatchGlobalDisconnected","dispatchAttributeChange","canDomMutate_2_0_9_IsConnected","eliminate$1","subscription$1","isDocumentElement$1","getAllNodes$1","dataStore","getRelatedData","setRelatedData","targetListenersMap","deleteRelatedData","toMutationEvent","mutation","sourceMutation","getDocumentListeners","listeners","getTargetListeners","promise","dispatch$1","getListeners","targetKey","targetListeners","callbacksCount","safeCallbacks","c","flushCallbacks","observeMutations","observerKey","config","observerData","observingCount","setupObserver","observer","disconnect","targetObserver","treeMutationConfig","subtree","childList","attributeMutationConfig","attributes","attributeOldValue","addNodeListener","listenerKey","isAttributes","listener","stopObserving","enqueueAndFlushMutations","addTargetListener","removeTargetListener","addGlobalListener","globalDataKey","documentData","removeListener","domMutationPrefix","connectedDataKey","disconnectedDataKey","insertedDataKey","removedDataKey","attributeChangeDataKey","documentConnectedDataKey","documentDisconnectedDataKey","documentAttributeChangeDataKey","treeDataKey","attributeDataKey","addNodeConnectedListener","addNodeDisconnectedListener","addNodeInsertedListener","addNodeRemovedListener","addNodeAttributeChangeListener","addConnectedListener","addDisconnectedListener","addAttributeChangeListener","dispatchTreeMutation","processedState","wasConnected","removedCount","removedNodes","disconnected","addedCount","addedNodes","inserted","connected","FLUSHING_MUTATIONS","IS_FLUSHING","IS_FLUSH_PENDING","ENQUEUED_MUTATIONS","mutations","enqueueMutationsAndFlushAsync","pending","dispatchNodeInsertion","dispatchNodeRemoval","dispatchNodeAttributeChange","attributeName","onNodeConnected","onNodeInsertion","onNodeDisconnected","onNodeRemoval","onNodeAttributeChange","onDisconnected","onRemoval","onConnected","onInsertion","onAttributeChange","flushRecords","records","domMutationTreeData","takeRecords","onNodeInserted","onNodeRemoved","canDomMutate_2_0_9_canDomMutate","getParents$1","compat","replaceChild","newChild","oldChild","newChildren","setAttribute","oldAttributeValue","getAttribute","setAttributeNS","namespace","removeAttribute","pair","nodeMethod","dispatchMethod","normal","mutate$1","setMutateStrategy","strategy","mutationObserverKey","domMutateNode","canDomMutate_2_0_9_node","canChildNodes_1_2_1_canChildNodes","childNodes","fragmentRE","toDOMSymbol","fragment","$1","temp","innerHTML","lastChild","makeFragment","frag","createDocumentFragment","appendChild","testFrag","div","makeFrag","canFragment_1_3_1_canFragment","canViewCallbacks_5_0_0_canViewCallbacks","callbackMapSymbol","initializeSymbol","requestedAttributes","disableMutationObserver","tags","renderedElements","mountElement","tagHandler","mutationObserverEnabled","attrHandler","regExpAttributes","attrMatcher","requested","attrMaps","automaticCustomElementCharacters","defaultCallback","_tags","_attributes","_regExpAttributes","customElementExists","validCustomElementName","tagExists","automountEnabled","CustomElement","docEl","undoOnInsertionHandler","enableMutationObserver","getElementsByTagName","renderTagsInDocument","attrs","attrMap","exp","tagData","scope","tagCallback","templateContext","ceConstructor","HTMLUnknownElement","subtemplate","view","processNodes","paths","processNode","keepsTextNodes","cloneNode","clonesWork","MO","clone","works","namespacesWork","createElementNS","namespaceURI","nodeValue","createComment","attribute","specified","p","loc","getCallback","children","getCallbacks","pathData","elementCallbacks","pathLength","pathsLength","makeTarget","hydrate","cloned","ref","callbacksLength","callbackElement","callbackData","hydrateCallbacks","canViewTarget_5_0_0_canViewTarget","getKeyValueSymbol$2","observeDataSymbol","promiseDataPrototype","isPending","isResolved","isRejected","reason","setVirtualProp","observeData","initPromise","observeReader","canReflectPromise_2_2_1_canReflectPromise","setupPromise","oldPromiseFn","__proto__","getValueSymbol$2","setValueSymbol$3","isValueLikeSymbol","peek$3","isPromiseLike","bindName","readValue","reads","prev","valueReaders","specialRead","viewModel","checkForObservableAndNotify","getObserves","foundObservable","objHasKeyAtIndex","parentHasKey","readLength","readersLength","propertyReaders","earlyExit","foundLastParent","valueReadersMap","callMethodsOnObservables","proxyMethods","foundAt","prevRead","isAt","readCompute","write","propertyReadersMap","propValue","keyArg","keyToAdd","character","keyValue","singleReference","canStacheKey_1_4_3_canStacheKey","canViewScope_4_13_7_templateContext","vars","partials","canCid_1_3_1_canCid","_cid","domExpando","cid","propertyName","getKeyName","extraKey","getAndDelete","keyName","warnOnUndefinedProperty","canSingleReference_1_3_0_canSingleReference","Compute","canViewScope_4_13_7_makeComputeLike","translationHandler","isComputed","canStacheHelpers_1_2_0_canStacheHelpers","stacheHelpers","dispatchSymbol$2","setElementSymbol$1","getFastPathRoot","computeData","getMutated","scopeKeyData","_thisArg","callMutateWithRightArgs","lineNumber","firstKey","pathsForKey","getPathsForKey","firstKeyValue","includeSuggestions","warning","ScopeKeyData","startingScope","_context","helperOptions","debuggerHelper","fastPath","setRoot","dependencies","_latestValue","fastOnBoundSet_Value","fastOnBoundSetValue","fastPathRoot","toFastPath","toSlowPath","isEventObject","thisArg","rootObserve","rootValueDeps","warnOnMissingKey","scopeKeyDataPrototype","canViewScope_4_13_7_scopeKeyData","LetContext","propertiesToKeep","newObj","objectCreateWithSymbolsAndSpecificProperties","canViewScope_4_13_7_letContext","returnFalse","Scope","_parent","__cache","parentContextSearch","TemplateContext","remainingKey","isScope","firstSix","isInScope","walkScope","parentContextWalkCount","token","dotSlash","thisContext","isContextBased","isTemplateContextOrCanNotHaveProperties","currentScope","currentContext","canHaveProperties","shouldSkipIfSpecial","shouldSkipEverythingButSpecial","makeShouldExitOnSecondNormalContext","foundNormalContext","isNormalContext","isSpecial","shouldExit","makeShouldExitAfterFirstNormalContext","makeShouldSkipSpecialContexts","walkCount","notContext","find","keyReads","howToRead","shouldSkip","shouldLookForHelper","_walk","readFromSpecialContext","readFromTemplateContext","readOptions","readKeyInfo","isSpecialRead","currentObserve","currentReads","currentSetReads","currentSetObserve","undefinedObserves","setObserveDepth","nameIndex","variable","readAContext","helper","getHelperOrPartial","noContextAvailable","getDataForScopeSet","firstSearchedContext","opts","parentKeys","readData","passOptions","getHelper","isArgument","peak","getScope","tester","getContext","getTemplateContext","lastScope","addTemplateContext","addLetContext","getRoot","getViewModel","vmScope","getTop","getKeyDefinition","keyExistsOnObj","objHasKey","isDefined","keyParts","scopeIndex","normalizedKey","vm","vmKeyDefinition","topKeyDefinition","contextKeyDefinition","canViewScope_4_13_7_compute_data","cloneFromRef","scopes","_read","indent","contextType","canViewScope_4_13_7_canViewScope","KeyObservable","keyObservable","isViewSymbol","createNoOpRenderer","metadata","rendered","utils$1","emptyHandler","jsonParse","parse","subSectionDepth","createRenderers","truthyRenderer","falseyRenderer","isStringOnly","makeRendererConvertScopes","inverse","isSection","renderer","parentScope","observeObservables","convertedRenderer","newScope","newOptions","makeView","getItemsStringContent","isObserveList","txt","getItemsFragContent","hashOptions","hashExprs","exprData","exprs","aliases","decodeHTML","HTMLSectionBuilder","HTMLSection","startSubSection","newSection","endSubSectionAndReturnRenderer","htmlSection","endSection","compiled","startSection","commentName","targetCallback","compile","removeCurrentNode","targetData","targetStack","inverseCompiled","inverseData","html_section","canDomData_1_0_3_canDomData","deleteNode","nodeDeleted","domData","store","clean","itemData","isEmptyObject","slice$1","defaultIdentity","makeIdentityFromMapSchema","typeSchema","reverseDiff","oldDiffStopIndex","newDiffStopIndex","oldList","newList","oldIndex","newIndex","schemaOrIdentity","listSchema","oldListLength","makeIdentity","oldItem","newItem","global$1","attrsNamespacesURI","xmlns","formElements","INPUT","TEXTAREA","SELECT","BUTTON","isSVG","truthy","propProp","booleanProp","isBoolean","remove","setupMO","onMutation","_findOptionToSelect","groupChild","setChildOptions","option","selected","selectedIndex","forEachOption","behaviorRules","isPropWritable","specialAttributes","checked","notFalse","defaultChecked","className","focused","activeElement","focusTask","focus","blur","connectionDisposal","aEL","rEL","innertext","innerhtml","localHandler","readonly","select","lastVal","changeEvent","removeChangeHandler","setChildOptionsOnChange","style","cssText","textcontent","providedValue","toString$1","selectedValues","markSelectedOptions","previousValues","currentValues","rules","getRule","attrOrPropName","rulesForElementType","cached","rule","cacheRule","findSpecialListener","setAttrOrProp","remover","getSpecialTest","canAttributeObservable_2_0_2_behaviors","setElementSymbol$2","elementSymbol","ListenUntilRemovedAndInitialize","placeholder","handlerName","setupNodeReinserted","teardownNodeRemoved","helpers$2","range","rangeName","COMMENT_NODE","insertBefore","previousSibling","removeChild","getAttributeParts","addTextNodeIfNoChildren","makeString","viewInsertSymbol","makeCommentFragment","onValueSymbol$3","offValueSymbol$1","onPatchesSymbol$1","offPatchesSymbol","Patcher","observableOrList","isObservableValue","onList","onPatchesNotify","onPatchesDerive","setupList","currentList","list$$1","patcher","SetObservable","setObservable","renderAndAddRangeNode","itemHTML","itemFrag","rangeNode","onPatchesSymbol$2","offPatchesSymbol$1","ListDOMPatcher","falseyRender","observableName","indexMap","itemEndNode","processDomQueue","teardownValueBinding","setupValueBinding","addFalseyIfEmpty","exit","sortedPatches","deletes","inserts","moves","splitPatches","kind","second","patchSort","addToDomQueue","move","toIndex","fromIndex","queueItem","newEndNodes","newIndicies","itemIndex","itemCompute","endNodesLength","removeStart","removeEnd","endIndex","falseyFrag","currentFirstNode","newIndexFirstNode","currentEndNode","lastInserted","getFrag","indexCompute","live","oldAttrs","newAttrs","viewInsertSymbolOptions","updateRange","commentFrag","startCommentNode","useQueue","textNode","canViewLive_5_0_5_canViewLive","TextSectionBuilder","TextSection","subSection","falseySection","falsey","textSectionRender","textContentOnly","passTruthyFalsey","text_section","Arg","expression","modifiers","expr","isCompute","sourceText","Literal","literal","expressionHelpers","getObservableValue_fromDynamicKey_fromObservable","getKeys","computeValue","convertToArgExpression","toComputeOrValue","toCompute","Hashes","hashes","hash","finalHash","canSymbol","Bracket","originalKey","rootExpr","closingTag","bracket","setIdentifier","sourceTextSymbol","isViewSymbol$1","Call","methodExpression","argExpressions","methodExpr","argExprs","ignoreArgLookup","gotIgnoreFunction","doNotWrapArguments","finalArgs","getArgs","computeFn","isLiveBound","requiresOptionsArgument","doNotWrapInObservation","call$1","Helper","hashExpressions","mode","methodKey","helperInstance","helperFn","helperOptionArg","sourceTextSymbol$1","Lookup","lookup","last$1","sourceTextSymbol$2","keyRegExp","tokensRegExp","bracketSpaceRegExp","literalRegExp","testDot","isAddingToExpression","isTokenKey","ensureChildren","Stack","isRootTop","popTo","types","popUntil","firstParent","addToAndPush","topLastChild","replaceTopLastChild","replaceTopLastChildAndPush","replaceTopAndPush","convertKeyToLookup","lastPath","lastDot","firstNonPathCharIndex","firstNonPathChar","convertToHelperIfTopIsLookup","Hash","SetIdentifier","tokenize","tokens","arg$$1","lookupRules","ast","methodType","isArg","methodRules","expressionString","lookupRule","methodRule","hydrateAst","baseMethodType","hashes$$1","ExpressionType","parseAst","cursor","lastToken","nextToken","bracket$$1","expression_1","expression$1","toDOMSymbol$1","HelperOptions","stringOnly","mustacheLineBreakRegExp","mustacheWhitespaceRegExp","viewInsertSymbol$1","valueShouldBeInsertedAsHTML","core","makeEvaluator","finalValue","makeLiveBindingPartialRenderer","partialName","partialFrag","localPartialName","partialScope","newContext","partial","scopePartialName","domRenderer","getTemplateById","makeStringBranchRenderer","fullExpression","branchRenderer","evaluator","textContent","makeLiveBindingBranchRenderer","splitModeFromExpression","cleanLineEndings","template","returnBefore","spaceBefore","spaceAfter","returnAfter","spaceLessSpecial","spaceLessExpression","matchIndex","modeAndExpression","cleanWhitespaceControl","mustache_core","domDocument","baseURI","href","lastSlash","baseUrl","canParseUri_1_2_2_canParseUri","parseURI","url","protocol","authority","host","hostname","port","pathname","canJoinUris_1_2_0_canJoinUris","joinURIs","output","noop$1","resolveValue","evaluateArgs","__testing","canReflect","canSymbol$1","allowDebugger","left","right","_lastGet","Debugger","truthyObservable","converter","getterSetter","forHelper","variableName","valueObservable","helperExpr","resolved","bindAndRead","integer","variableScope","forOfInteger","forOfObject","ForOf","isVariable","Let","keepNodeSymbol","portalHelper","elementObservable","portalElement","startPortalledPlaceholder","endPortalledPlaceholder","commentPlaceholderDispose","portalContents","teardownPortalledContent","getElementAndRender","teardownEverything","placeholderElement","commentPlaceholder","Portal","debuggerHelper$1","builtInHelpers","builtInConverters","converterPackages","helpersCore","looksLikeOptions","resolveHash","params","registerHelper","registerHelpers","makeSimpleHelper","registerConverter","realArgs","addHelper","addConverter","addLiveHelper","__resetHelpers","addBuiltInHelpers","addBuiltInConverters","helperName","_makeLogicHelper","logic","logicHelper","callLogic","callFn","ifHelper","isHelper","curValue","andHelper","orHelper","switchHelper","caseHelper","defaultHelper","joinBaseHelper","firstExpr","moduleReference","templateModule","parentAddress","uri","baseURL","System","renderingBaseURL","eachHelper","indexHelper","offset","withHelper","ctx","unlessHelper","notConverter","eachOf","is","eq","unless","joinBase","and","or","portal","not","core$1","mustacheLineBreakRegExp$1","mustacheWhitespaceRegExp$1","whiteSpaceReplacement","bracketBefore","controlBefore","controlAfter","bracketAfter","cleanLineEndings_1","splitModeFromExpression$1","canStacheAst_1_1_0_controls","canStacheAst_1_1_0_canStacheAst","imports","dynamicImports","importDeclarations","ases","inImport","inFrom","inAs","importIsDynamic","currentAs","currentFrom","currentAttrName","processImport","line","specifier","program","global$2","stealOptimized","moduleName","parentName","stealRequire","steal","global$3","system","isFunction$1","es6","HTMLScriptElement","node$1","global$4","require","amd","reject","loader","addLoader","flushLoader","preset","canImportModule_1_3_2_canImportModule","loaderPromise","err","addLoader_1","flushLoader_1","preset_1","getIntermediateAndImports","last$2","isViewSymbol$2","wrappedAttrPattern","colonWrappedAttrPattern","svgNamespace","namespaces","svg","g","defs","feMorphology","feGaussianBlur","feOffset","feComposite","feColorMatrix","use","attrsNamespacesURI$1","textContentOnlyTag","script","stache","inlinePartials","section","sectionElementStack","namespaceStack","makeRendererAndUpdateSection","copyState","startedWith","makeRenderer","sectionItem","isDirectlyNested","lastElement","overwrites","directlyNested","addAttributesCallback","matchedNamespace","isCustomTag","templateType","templates","oldNode","matchedAttrNamespacesURI","attrCallback","decodedAttrName","decode","firstAndText","scopifiedRenderer","helperValue","templateContextScope","safeString","iAi","importPromises","getElementById","registerPartial","addBindings","canStache_5_1_1_canStache","viewModelSymbol","canViewModel_4_0_3_canViewModel","querySelector","isDomEventTarget$2","canEvent","canAttributeObservable_2_0_2_event","findParentForm","shouldReceiveEventFromRadio","dest","isRadioInput$1","radioChangeEvent","eventTypeTrackedRadios","_eventTypeTrackedRadios","_rootListener","eventTypeTargets","newListener","newEvent","attachRootListener","trackedRadios","detachRootListener","canEventDomRadiochange_2_2_1_canEventDomRadiochange","domEventRadioChange","onValueSymbol$4","offValueSymbol$2","onEmitSymbol$1","offEmitSymbol$1","internalRadioChangeEventType","slice$2","canUtilAEL","canUtilREL","AttributeObservable","bindingData","isSelect","multiple","isMultipleSelect","isRadioInput","canAttributeObservable_2_0_2_getEventName","_handler","specialBinding","_specialDisposal","canAttributeObservable_2_0_2_canAttributeObservable","bindings","onMatchStr","byMatchStr","viewModelBindingStr","attributeBindingStr","viewModelSymbol$1","preventDataBindingsSymbol","throwOnlyOneTypeOfBindingError","onKeyValueSymbol$5","initializeViewModel","initialViewModelData","makeViewModel","bindingContext","onCompleteBindings","onTeardowns","bindingsState","isSettingOnViewModel","isSettingViewModel","dataBinding","siblingBindingData","bindingName","checkBindingState","setCompute","cleanVMName","bindingAttributeName","staticDataBindingsOnly","makeDataBindingFn","makeDataBinding","attributeViewModelBindings","bindingSettings","alreadyUpdatedChild","favorViewModel","getSiblingBindingData","dataBindings","attributeDisposal","completedData","siblingBindingDatas","parentBindingWasAttribute","attrData","removedDisposal","parentNodeList","nodeList","syncChildWithParent","onTeardown","ownerNode","eventBindingData","bindingContextObservable","toMatchStr","fromMatchStr","bindMatchStr","scopeUsed","bindingContextKey","bindingCode","elUsed","vmUsed","byUsed","shortBindingCode","vmMatchStr","elMatchStr","byIndex","getEventBindingData","attributesDisposal","removalDisposal","removeObservation","attrVal","runScope","specialValues","makeScopeFromEvent","updateFn","mutateQueueArgs","runEventCallback","unbindEvent","updateListener","isEventAttribute","isRemoved","getObservableFrom","viewModelOrAttribute","scopeProp","mustBeGettable","parentExpression","vmName","isBoundToContext","keysToRead","getViewModelProperty","siblingBindingRules","syncSibling","raw","bindingNames","special$1","getChildBindingStr","dataBindingName","specialIndex","attributeValue","splitByColon","childEventName","getEventName","initializeValues","parentObservable","childObservable","bindingOptions","nesting","nodeHTML","tagStart","makeUpdateName","childName","canStacheBindings","canStacheBindings_5_0_5_canStacheBindings","rendererSymbol","viewInsertSymbol$2","viewModelSymbol$2","getValueSymbol$3","setValueSymbol$4","metaSymbol$7","metaSymbol$8","inSetupSymbol$5","mixins$6","metaSymbol$9","baseAttributeChangedCallback","attributeChangedCallback","mixinBindBehaviour","BindingPropsClass","_bindings","_uninitializedBindings","initializeObservedAttributes","ctr","hasBindDefinition","bindFn","observedAttributes","initializeObservedAttributes$1","createConstructorFunction$3","teardownHandlersSymbol$1","isViewSymbol$3","addContext","rawRenderer","canStacheElement","StacheElement","connect","disconnectedCallback","lifecycleStatus","connectedTeardown","mixinLifecycleMethods","bindingsObservables","_connectedBindings","savedBindings","canGetParentValue","canSetParentValue","canBinding","other","renderOptions","viewRoot","mixinBindings","origInSetup","initializeData","_connectedBindingsTeardown","mixinInitializeBindings","BaseClass","ViewModelClass","mixinViewmodelSymbol","StacheClass","viewName","mixinStacheView","teardownBindings","initialViewmodelData","StacheElementConstructorFunction","DeriveElement","Compute$1","translationHelpers","makeCompute","stringCoercingMapDecorator_1","decoratorSymbol","attrUndecoratedFunction","stringCoercion","stringCoercingMapDecorator","stringify$1","Stringify","routedata","urlDataObservable","bindingProxy","defaultBinding","bindingProxy_1","regexps","curlies","colon","map$2","oldObject","newObject","oldObjectClone","oldProp","newProp","removeBackslash","wrapQuote","RouteRegistry","routes","register","matcher","names","querySeparator","matchSlashes","existingKeys","sameMapKeys","sameDefaultValues","matchingRoutesWithoutTrailingSlash","route","digitTest","keyBreaker","paramTest","entityRegex","startChars","prep","decodeURIComponent","hex","isArrayLikeName","idenity","canDeparam_1_2_3_canDeparam","deparam","valueDeserializer","lastPart","l","currentName","nextName","currentIsArray","toURLFragment","canRoute_getRule","canRoute_deparam","paramsMatcher","remainder","ex","unescape","deparam_1","canParam_1_2_0_canParam","standardsMode","buildParam","prefix","inner","param","pairs","encodeURIComponent","setStandardsMode","matchesData","getMatchedRoute","routeName","matchCount","propCount","paramFromRoute","cpy","after","canRoute_param","currentRouteName","param_1","matchCheck","sourceProperty","matcherProperty","canRoute_url","baseOptions","urlHelpers","link","formatAttributes","isCurrent","subsetMatch","getHash","HashchangeObservable","dispatchHandlers","canRouteHash_1_0_2_canRouteHash","funcConstructor","isWebWorker","stringCoercingMapDecorator$1","hashchangeObservable","canRoute","hashchange","currentRuleObservable","updateUrl","serializedData","serialized","onStartComplete","_onStartComplete","updateRouteData","_teardown","routeData","definePropertyWithDefault","propertyType","_setup","_canBinding","serializedObservation","currentRule","serializedCompute","bindToCanRouteData","setRouteData","viewModelSymbol$3","matched","canRoute_5_0_2_canRoute","calculateArgs","finalParams","finalMerge","optionsArg","routeCurrent","callAsMethod","set$2","addSerializeToThis","reverseArgs","setComparisonsSymbol","addComparators","type1","type2","comparators","comparisons","subMap","existingComparators","Identity","typeMap","get$1","forwardComparators","value1","value2","UNIVERSAL","EMPTY","undefinedIsEmptySet","getType","UNDEFINABLE","UNKNOWABLE","setA","isDefinedAndHasMembers","ownAndMemberValue","startOwnValue","startMemberValue","ownValue","valueOf","memberValue","own","member","getComparisons","Type1","Type2","hasComparisons","defineComparison","isSubset","intersection","difference","isProperSubset","setB","isEqual","isSpecial1","isSpecial2","reverseComparators","reverseIntersection","reverseDifference","union","indexWithEqual","identityComparitor","v1","v2","set_1$1","canFixture_3_1_7_dataFromUrl","fixtureUrl","order","fixtureUrlAdjusted","arrayUnionIntersectionDifference","arr1","arr2","isMemberThatUsesTestOnValues_1","comparisonsCommon","isMemberThatUsesTestOnValues","NotIdentity","Identity$1","universe","primitive","valuesNot","Not","All","makeThrowCannotCompare","throwComparatorAllTypes","throwComparatorDifference","allValues","recordValues","allValue","some","recordValue","arrayComparisons","UNIVERSAL_All","All_UNIVERSAL","All_All","Or","In_All","All_In","NotIn_All","All_NotIn","GreaterThan_All","All_GreaterThan","GreaterThanEqual_All","All_GreaterThanEqual","LessThan_All","All_LessThan","LessThanEqual_All","All_LessThanEqual","All_And","And_All","All_Or","Or_All","isMemberSymbol$2","comparisons$1","In","NotIn","GreaterThan","GreaterThanEqual","LessThan","LessThanEqual","And","ands","ors","nullIsFalse","arg1","arg2","nullIsFalseTwoIsOk","isMemberThatUsesTest","orValues","testValue","is$1","makeNot","vA","vB","makeEnum","emptyResult","swapArgs","makeSecondValue","returnBiggerValue","gtA","gtB","returnSmallerValue","makeAndIf","Comparison","ltA","ltB","makeAnd","make_InIfEqual_else_andIf","elseCase","make_filterFirstValueAgainstSecond","defaultReturn","gt","isOr","isAndOrOr","isAnd","combineFilterFirstValuesAgainstSecond","complement","combinedUsing","arePut","makeOrUnless","makeOr","makeAndUnless","makeComplementSecondArgIf","combineValueWithRangeCheck","rangeSet","RangeOrEqType","gte","leftValues","makeOrWithInAndRange","firstResult","secondResult","makeOrUnlessLessThan","In_RANGE","RANGE_IN","NotIn_RANGE","RANGE_NotIn","RANGE_And_Union","union1","union2","RANGE_And_Intersection","and1","and2","intersection1","intersection2","RANGE_And_Difference","difference1","difference2","And_RANGE_Difference","RANGE_Or","or1","or2","Or_RANGE","comparators$1","In_In","UNIVERSAL_In","In_NotIn","NotIn_In","In_GreaterThan","GreaterThan_In","In_GreaterThanEqual","GreaterThanEqual_In","In_LessThan","LessThan_In","In_LessThanEqual","LessThanEqual_In","In_And","And_In","In_Or","Or_In","NotIn_NotIn","UNIVERSAL_NotIn","NotIn_GreaterThan","GreaterThan_NotIn","NotIn_GreaterThanEqual","GreaterThanEqual_NotIn","NotIn_LessThan","LessThan_NotIn","NotIn_LessThanEqual","LessThanEqual_NotIn","NotIn_And","And_NotIn","NotIn_Or","Or_NotIn","GreaterThan_GreaterThan","UNIVERSAL_GreaterThan","GreaterThan_GreaterThanEqual","GreaterThanEqual_GreaterThan","GreaterThan_LessThan","LessThan_GreaterThan","GreaterThan_LessThanEqual","LessThanEqual_GreaterThan","GreaterThan_And","And_GreaterThan","GreaterThan_Or","Or_GreaterThan","GreaterThanEqual_GreaterThanEqual","UNIVERSAL_GreaterThanEqual","GreaterThanEqual_LessThan","LessThan_GreaterThanEqual","GreaterThanEqual_LessThanEqual","lte","LessThanEqual_GreaterThanEqual","GreaterThanEqual_And","And_GreaterThanEqual","GreaterThanEqual_Or","Or_GreaterThanEqual","LessThan_LessThan","UNIVERSAL_LessThan","LessThan_LessThanEqual","LessThanEqual_LessThan","LessThan_And","And_LessThan","LessThan_Or","Or_LessThan","LessThanEqual_LessThanEqual","lteA","lteB","UNIVERSAL_LessThanEqual","LessThanEqual_And","And_LessThanEqual","LessThanEqual_Or","Or_LessThanEqual","And_And","d1","d2","And_Or","aUnion","bUnion","aIntersection","bIntersection","aDiff","bDiff","Or_And","UNIVERSAL_And","inverseFirst","inverseSecond","Or_Or","UNIVERSAL_Or","name1","name2","comparisons_1$1","ValuesOr","valuesOr","ValuesAnd","valuesAnd","KeysAnd","vals","isMemberSymbol$3","checkIfUniversalAndReturnUniversal","rootKey","equal","preKey","MISSING","keyDiff","valuesA","valuesB","keyResults","aOnlyKeys","aAndBKeys","bOnlyKeys","notEmpty","objA","objB","diff","sharedKeysAndValues","productAbleKeysAndData","disjointKeysAndValues","singleProductKeyAndValue","productAbleKeys","productAbleOr","productableKey","shared","aAndBKeysThatAreNotEqual","sameKeys","aUnequal","bUnequal","foundEmpty","resultValues","acb","bcb","bCopy","eachInUnique","aVal","bVal","andOrNot","ValuesNot","typeNumber","getTypeNumber","typeCompare","$gt","valueA","valueB","$lt","defaultCompare","helpers$3","uniqueConcat","itemsA","itemsB","getId","ids","getIdentityIndex","startIndex","starterItem","leftResult","rightResult","getIdentityIndexByDirection","direction","currentItem","getIndex","sortData","sortPropValue","sorter","sorters","item1","item2","item1Value","item2Value","valueHydrator","helpers_1$3","KeysAnd$1","RecordRange","RealNumberRangeInclusive","universeRange","isUniversal","rangeFromAnd","aSet","toRange","firstValues","secondValues","range1","range2","makeRealNumberRangeInclusive","makeSort","hydrateAndValue","schemaKeys","Sort","schemaProp","$eq","DefaultSort","BasicQuery","query","page","filterMembersAndGetCount","bData","parentQuery","parentIsUniversal","aData","thisIsUniversal","filterFrom","aItems","bItems","combined","removePagination","CLAUSE_TYPES","subLetter","superLetter","sortIsEqual","MetaInformation","queryA","queryB","metaInformation","pageIsEqual","aPageIsUniversal","bPageIsUniversal","pagesAreUniversal","aFilterIsSubset","bFilterIsSubset","aPageIsSubset","bPageIsSubset","filterIsEqual","aIsSubset","bIsSubset","filterUnion","filterResult","clause","differentClauses","differentTypes","getDifferentClauseTypes","basicQuery","Serializer","entries","serializers","hydrateMap","addHydrateFrom","unknownHydrator","addHydrateFromValues","clones","oppositeTypeMap","hydrateValue","hydrateUnknown","allKeysAreComparisons","andClauses","hydrator","$not","hydratedValue","OppositeConstructor","schemaHelpers","comparisons$2","isIn","$in","notIn","$ne","$nin","$gte","lt","$lte","$all","schemaHelpers_1","isRangedType","categorizeOrValues","categories","primitives","valueOfTypes","others","comparisonSetTypeSymbol","isMemberSymbol$4","splitByRangeAndEnum","maybeUniverse","rangeToBeSplit","enumSet","setInAnd","reduce","shouldBeInValues","valuesCopy","rangeValues","inValues","makeChildType","Maybe","rangeIsMember","enumIsMember","maybeA","maybeB","primary","notPresent","v","childHydrate","canMakeMaybeSetType","makeMaybeSetTypes","ComparisonSetType","makeMaybe_1","setTypeSymbol","isMemberSymbol$5","newSymbol$2","makeEnumSetType","Enum","enum1","enum2","enumA","enumB","makeEnum$1","canMakeEnumSetType","makeEnum_1","setTypeSymbol$1","schemaSymbol","defaultQuery","hydrateFilter","schemaProperties","valuesIsObject","hydrateAndValues","firstKeys","keysCompare","unequalKeys","newSet","lastSetOrFalse","unionKey","unioned","combineAnds","hydrateOrs","$or","hydrateAnds","$and","setTypeMap","SchemaType","hydrateChild","SetType","getSchemaProperties","recursivelyAddOrs","serializer$$1","orValue","basicQuery$1","nots","orPart","basicQuery$$1","childSerializer","AcceptedFields","schemaSymbol$1","newSymbol$3","QueryLogic","passedHydrator","toQuery","passedSerializer","toParams","makeNewSet","qA","qB","unionQuery","makeReturnValue","identityKeys","filterMembers","unionMembers","memberIdentity","isPaginated","ValueAnd","ValueOr","canQueryLogic_1_2_4_canQueryLogic","deepMatches","removeFixtureAndXHR","fixture","xhr","identityComparitor$1","makeComparatorType","quickEqual","dataA","dataB","q1","q2","types$1","IsEmptyOrNull","isEmptyOrSubset","TemplateUrl","StringIgnoreCase","Ignore","schema$1","headers","IsEmptyOrSubset","canFixture_3_1_7_matches","request","requestData","fixtureData","settings","exact","canMemoryStore_1_0_3_makeSimpleStore","makeSimpleStore","baseConnection","getRecordFromParams","queryLogic","getRecord","getSets","getQueries","getQueriesSync","getQueryDataSync","queryData","getListData","listData","getListDataSync","title","status","detail","getPaginatedListDataSync","superSetQueryData","getAllRecords","queryWithoutPagination","matchingSuperRecordsNoPagination","indexOf$1","startIdentity","matchingSuperRecords","checkSet","matching","updateListData","getItems","updateRecordsSync","siblingRecords","updateQueryDataSync","allRecords","curretMatching","toBeDeleted","destroyRecords","notSubsets","existingQueryData","getData","createData","updateData","errorOnMissingRecord","destroyData","savedRecord","canMemoryStore_1_0_3_canMemoryStore","memoryStore","clear","_instances","_queryData","queries","connectToConnection","req","connection","parseInt","makeMakeItems","baseItems","idProp","maxId","idType","Store","makeItems","identityKey","stringToAny","looksLikeAQueryLogic","createInstance","updateInstance","destroyInstance","newItems","getList","canFixture_3_1_7_store","canFixture_3_1_7_core","fixtures","methodMapping","GET","PUT","DELETE","POST","getMethodAndPath","addStoreFixture","typeAndUrl","itemAndListUrls","inferIdProp","itemRegex","rootIsItemUrl","listUrl","getItemAndListUrls","itemUrl","itemAction","itemWarning","listAction","listWarning","itemMapping","itemMethod","storeItemMethod","listMapping","listMethod","storeListMethod","oldFixtures","ajaxSettings","isStoreLike","getSettingsFromString","fixtureList","oldFixture","upsertFixture","$fixture","FixtureResponse","response","statusCode","responseBody","statusText","delay","callDynamicFixture","xhrSettings","fixtureSettings","json","extractResponse","callFixture","ob","sub","error$$1","xhrData","XHR","XMLHttpRequest","props$2","callEvents","evs","__events","defineNonEnumerable$2","mockXHR","realXHR","onload","_XHR","setRequestHeader","_requestHeaders","open","getAllResponseHeaders","_xhr","setDisableHeaderCheck","_disableHeaderCheck","getResponseHeader","abort","timeoutId","send","makeRequest","body","readyState","responseText","onreadystatechange","onprogress","onloadend","noop$2","rand","randomize","random","choices","selectedCount","round","overrideMimeType","responseXML","behaviorsMap","behaviorMixin","Behavior","newBehavior","__behaviorName","behaviorName","isBehavior","canConnect_4_0_6_behavior","behavior$1","sortedIndex","originalIndex","b1","b2","behave","canConnect_4_0_6_connect","setQueryLogic","listQuery","listQueryProp","algebra","canConnect_4_0_6_canConnect","WeakReferenceMap","assign$1","addReference","referenceCount","deleteReference","weakReferenceMap","updateDeepExceptIdentity","idMerge","makeArray","assign$2","constructor_1","cidStore","hydrateInstance","hydrateList","copyMetadata","save","serializeInstance","createdInstance","updatedInstance","destroy","destroyedInstance","updatedList","instanceList","serializeList","isNew","smartMerge","mergeList","mergeMap","newValueIsList","currentValueIsList","ItemType","itemSchema","applyPatch","makeInstance","mergeDeep","canValidateInterface_1_0_3_index","interfacePropArrays","missing","related","validate","extendingBehavior","interfaces","validatedBehaviour","argIndex","errorHandler","errors","validateArgumentInterface","baseBehavior","BehaviorInterfaceError","__interfaces","setPrototypeOf","map$3","canMapBehavior","ObjectType","List","hasList","overwrite","mapOverwrites","listOverwrites","canConnectMap_onMapBoundChange","canConnectMap_onListBoundChange","addInstanceReference","_Map","_List","enqueueOptions","funcName","removeAttr","updateInstanceWithAssignDeep","assignDeepExceptIdentity","smartMergeExceptIdentity","moveCreatedInstanceToInstanceStore","callbackInstanceEvents","findAll","findOne","isSaving","isDestroying","success","_saving","_destroying","_bubbleRule","bubbleRules","validate$$1","WeakReferenceSet","assign$3","weakReferenceSet","sortedSetJson","pendingRequests","noRequestsTimer","requests","requestCleanupDelay","constructorStore","instanceStore","newInstanceStore","listStore","_requestInstances","_requestLists","deleteInstanceReference","_finishedRequest","ID","addInstanceMetaData","getInstanceMetaData","deleteInstanceMetaData","addListReference","deleteListReference","hydratedInstance","storeInstance","hydratedList","storeList","updating","dataCallbackBehavior","callbackName","each$1","parse$1","parseListData","responseData","parseListProp","parseInstanceData","parseInstanceProp","parseFunction","xhrs","ActiveXObject","_xhrf","originUrl","globalSettings","contentTypes","_xhrResp","dataType","canAjax_2_4_8_canAjax","ajax","isFormData","requestUrl","f","makeXhr","n","deferred","isAborted","lang","contentType","crossDomain","timeout","timeoutFn","complete","progress","isJsonContentType","isPost","isSimpleCors","FormData","xhrFields","beforeSend","ajaxSetup","canMakeRest_0_1_4_canMakeRest","interfaceMethod","makePromise","defaultRest","urlBehavior","defaultData","dataInterfaceName","defaultBeforeSend","methodMetaData","makeAjax","findContentType","resource","idProps","resourceWithoutTrailingSlashes","includeData","urlParamEncoder","ajaxOb","reqOptions","indexByIdentity","spliceSymbol","updateListWithItem","recordData","realTime","createPromise","cleanPromise","createdData","updatedData","update$1","destroyedData","gotListData","callbacksOnce","callbacksOnceBehavior","lastSerialized","realtimeRestModel","optionsOrUrl","restModel","getItems$1","cacheRequests","cacheRequestsBehaviour","getDiff","availableQueries","minSets","curSets","needed","neededItems","cachedItems","cacheConnection","cachedPromise","needsPromise","savedPromise","combinedPromise","callbacksCache","callbackCache","crudMethod","dataCallback","combineRequests","unionPendingRequests","pReq1","pReq2","combineData","doubleLoop","pendingRequest","iterate","time","combineDataPromise","combinedData","combinedSet","deferred$$1","combineRequests_1","combineRequests$1","canLocalStore_1_0_1_canLocalStore","localStore","localStorage","removeItem","_recordsMap","setItem","getItem","cacheLocalStorageReads","recordsMap","localstorageCache","memoryCache","fallThroughCache_1","fallThroughCache","_getHydrateListCallbacks","_getHydrateList","_getMakeInstanceCallbacks","_getMakeInstance","instanceData","instanceData2","toBoolean","maybeBoolean","toDate","DateStringSet","dateStr","date","getTime","maybeDate","toNumber","maybeNumber","toString$2","eventsProto$1","define$1","make$1","makeDefinition$1","getDefinitionsAndMethods$1","getDefinitionOrMethod$1","maybeString","newSymbol$4","serializeSymbol$1","inSetupSymbol$6","isDefineType$1","peek$4","Object_defineNamedPrototypeProperty$1","defineConfigurableAndNotEnumerable$1","cleanUpDefinition","shouldWarn","Value","Default","isValueResolver","canDefine_2_8_1_canDefine","getEveryPropertyAndSymbol$1","hasZeroArgGetter","noSetter","defaultInDefinition","typeInDefinition","defaultOrDefault","typeOrType","onlyType$1","valueResolver","lastItem","lastFn","mutationWarning","asyncTimer","setterCalled","DefineList","DefineMap","setupComputed$1","teardownComputed$1","addBehaviorToDefinition$1","eachPropertyDescriptor$1","canMetaSymbol$1","onKeyValueSymbol$6","offKeyValueSymbol$4","returnFirstArg$1","simpleGetterSetters$1","stringOrObservable","DefaultList","DefaultMap","htmlbool","canStringToAny_1_2_1_canStringToAny","any","setVal","setErr","Ref","storeRef","_state","unobservedId","baseEventSetup","baseTeardown","makeRef","$$1","$","superMap","$$2","baseMap","constructorCallbacksOnce","dataCallbacks","dataCallbacksCache","dataCombineRequests","dataLocalStorageCache","dataMemoryCache","dataParse","dataUrl","canMap","methodsToOverwrite","dispatchSymbol$3","cleanRoot","domain","getCurrentUrl","PushstateObservable","replaceStateOnceKeys","replaceStateKeys","anchorClickHandler","shouldCallPushState","keepHash","makeDiffListIdentityComparison","nestedPatches","identityCheckFromSchema","makeIdentityFromMapSchema$1","aIndex","diffDeep","diffingIdentity","primaryPatches","finalPatches","destVal","sourceVal","shouldCheckSet","deepPatches","isDefaultPrevented","defaultPrevented","altKey","ctrlKey","metaKey","shiftKey","linksHost","nodePathWithSearch","HTMLAnchorElement","getAttributeNS","preventDefault","history","pushState","originalMethods","absolute","searchHash","changed","replaceKey","replaceOnceKey","thisArray","replaceStateOn","replaceStateOnce","replaceStateOff","deep","makeMutationEvent","elementSubscriptions","_subscriptions","addJQueryEvents","jQuery","jQueryEvents","removeEvents","eventDefinition","removeEvent","events$1","domMutateDomEvents","warned","onValueSymbol$5","offValueSymbol$3","onKeyValueSymbol$7","offKeyValueSymbol$5","noop$3","isFunction$2","temporarilyBind$1","withKey","withoutKey","Graph","arrows","arrowsMeta","addArrowMeta","graph","head","tail","arrowMeta","addNode","addArrow","hasArrow","getNeighbors","getArrowMeta","setArrowMeta","findNode","bfs","visit","visited","adj","dfs","reversed","makeNode","getGraph","graph$$1","visitKeyDependencies","visitValueDependencies","nextMeta","formatGraph","nodeIdMap","nodesDataSet","label","arrowsDataSet","headId","neighbor","tailId","dashes","getArrowData","edges","logData","nameParts","group","twoWay","labelCycles","inputGraph","getWhatIChange$1","getWhatChangesMe$1","global$5","devtoolsRegistrationComplete","makeObjectMapByKey","issues","issue","groupByKey","stringToArray","debug","logWhatIChange","logWhatChangesMe","devtoolsGlobalName","devtoolsCanModules","devtoolsGlobal","registerWithDevtools","can","jStat$1","src","jStat","onerror","toStandardDeviations","confidence","highConfidenceStds","highConfidence","lowConfidenceStds","lowConfidence","estimateExtraPoints","estimate","uncertaintyWeight","std","lognormal","mean","inv","ScheduledWorkNode","work","workPlan","isPrependPossible","firstDayWorkCouldStartOn","firstDayToStartWorkAfterExistingWork","startDay","daysOfWork","possibleStartDay","isPossible","prependIfPossible","prepend","isTail","append","WorkPlan","workNode","earliestStartDay","updatePlan","appendStartDay","artificiallyDelayed","newNode","oldPrevious","oldTail","WorkPlans","workNodeA","workNodeB","parallelWorkStreams","plans","workNodes","flat","sortedWorkNodes","sortedWorkNodesByEndDate","sortByEndDate","sheduleWork","plan","prepareIssues","issuesSource","getTeamKey","getTeamKeyDefault","getDaysPerSprint","teamKey","getVelocity","getConfidence","getConfidenceDefault","getEstimate","getEstimateDefault","issueFilter","issueFilterDefault","getParentKey","getBlockingKeys","linkedIssues","blocks","onIgnoredIssues","probablisticallySelectIssueTiming","getParallelWorkLimit","interestingIssues","falsy","filteredOut","partition","issueByKey","interestingEpics","groupBy","Epic","issuesByTeam","workByTeams","workPlans","velocity","issuesByKey","issuesForEpics","epicKey","epic","_children","associateParentAndChildren","team","canEstimate","pointsPerDay","usedEstimate","usedConfidence","estimatedDaysOfWork","extraPoints","sample","sampleExtraPoints","getDaysOfWork","deterministicDaysOfWork","isDefaultValue","extraDays","deterministicExtraDays","isScheduled","createWork","blockKey","blocked","Summary","blocker","blockedBy","linkBlocks","checkCycle","checkForCycles","preparedIssues","removeDone","issuePath","issuePathSet","outerValue","rawValue","converted","getStartOfNextQuarter","quarter","month","getMonth","getQuarter","year","getFullYear","getYear","getBusinessDatesCount","startDate","endDate","curDate","dayOfWeek","getDay","setDate","getDate","getUTCEndDateFromStartDateAndBusinessDays","businessDays","getUTCDay","setUTCDate","getUTCDate","weeksToMoveForward","remainingDays","endDay","makeDateRanges","ranges","endBusinessDay","getPreviousBusinessDay","startBusinessDayOfRange","getFirstBusinessDay","startOfNextRange","getStartOfNextRange","possibleEndBusinessDayOfRange","endBusinessDayOfRange","countBusinessDays","startBusinessDay","prettyStart","prettyDate","prettyEnd","days","currentDate","getNextBusinessDay","nextDay","setUTCHours","setTime","prevDay","monthDateFormatter","Intl","DateTimeFormat","day","timeZone","yearDateFormatter","aveDays","dateRanges","format","nextMonday","daysToAdd","getUTCFullYear","getUTCMonth","UTC","toUTCStartOfDay","utcDate","bestFitRanges","maxBuckets","startUTC","endUTC","daysApart","buckets","tooHighIndex","findLastIndex","bucket","bestFitRange","ISSUE_KEY","PRODUCT_TARGET_RELEASE_KEY","PARENT_LINK_KEY","STATUS_KEY","toCVSFormatAndAddWorkingBusinessDays","serverInfo","workingBusinessDays","addWorkingBusinessDays","fields","outwardIssue","changelog","toCVSFormat","saveToLocalStorage","booleanParsing","dateMatch","saveJSONToUrl","defaultJSON","parsed","URL","searchParams","newUrl","valueJSON","saveJSONToUrlAndToLocalStorage","urlValue","localStorageKeyValue","currentLocalStorageValue","addToLocalStorage","jsonLogic","operations","cat","parseFloat","not_found","sub_props","missing_some","need_count","are_missing","is_logic","get_operator","get_values","scopedLogic","scopedData","initial","op","datum","accumulator","sub_ops","uses_data","collection","arrayUnique","add_operation","code","rm_operation","rule_like","pattern","pattern_op","rule_op","JiraConfigureJSONLogic","rawIssues","editorElement","currentJsonLogic","currentJsonLogicJSON","unappliedChanges","updateJSON","examples","jsonValue","example","applyLogic","SimpleTooltip","enteredElement","leftElement","forElement","display","position","_forElement","querySelectorAll","rect","getBoundingClientRect","scrollY","bottom","scrollX","belowElement","DOM","belowElementInScrollingContainer","parentElement","scrollHeight","clientHeight","findScrollingContainer","containerRect","elementRect","tooltipRect","containerStyles","getComputedStyle","height","innerHeight","posInContainerAccountingForScrolling","borderTopWidth","scrollTop","topFromContainer","leftFromContainer","centeredBelowElement","width","topRightOnElementBottomRight","TOOLTIP","AutoCompleteSuggestions","AutoComplete","showingSuggestions","selectedItem","stopShowingSuggestions","suggestItems","searchTerm","JiraConfigureCSV","rawIssuesPromise","_showTypeInfo","issuesByType","issueTypes","issueTypesKeysWithValues","keyMap","isMeaningfulData","getMeaningfulData","changeParentKey","showTypeInfo","getJsonLogicFunction","makeLogicAndFunctionDefinition","makeLogicAndFunctionDefinitionSaveToUrl","Configure","sortedFieldNames","f1","f2","medianEstimateFields","lowerFieldName","confidenceFields","haveConfidence","withStory","field","storyPointField","storyPoints","startDateField","dueDateField","dueDate","issueFields","scheduleIssues","onPlannedIssueIncrement","onPlannedIssues","planIssuesInUncertaintyOrder","deterministicBlocksWorkDepth","blocksWorkDepth","iA","iB","planIssue","areAllBlockersScheduled","earliestStartTimeFromBlockers","scheduleIssue","block","SimulationData","lastDueDay","showingData","startColumns","createColumnData","startDateValues","endColumns","dueDateValues","showProbabilityData","column","findIndex","cumulativeProbability","timingName","pastTenseName","probability","color","toFixed","totalCount","hideProbabilityData","showProbabilitySumary","dates","getDatesFromWork","dueDatesOnly","startDate10","dueDate90","rangeStartChance","rangeEndChance","rangeStartDate","rangeEndDate","dueDateBottom","startDateWithTimeEnoughToFinish","adjustedDaysOfWork","rangeBorderClasses","dueDateTop","plus","grid","classList","percent","percentWidth","toggleShowingExtraData","additionalPoints","startDateAverage","dueDateAverage","startDateBottom","totalPoints","startDateBottom10","dueDate10","dueDateBottom10","dueDateTop90","num","precision","columnData","percentValue","largestCount","dueDay","compareNumbers","average","sum","WorkItem","dueDateTop95","adjustedDaysOfWorkValues","_holdingStartDates","_holdingDueDates","_holdingAdjustedDaysOfWork","addWork","updateStats","uncertaintyIndex","confidenceIndex","MonteCarlo","configuration","getVelocityForTeam","updateVelocity","allWorkItems","totalSimulationsToRun","totalSyncSimulations","simulationPercentComplete","velocities","firstRunWorkPlans","runOneSimulation","endDateWorkItem","warnings","gridNumberOfDays","timeRanges","gridDays","insertBlockers","removeBlockers","afterFirstSimulation","totalWorkingDays","tracks","acc","track","workAcc","ignored","blocking","updateAllStats","largest","allDone","runBatch","remainingSimulations","syncRuns","addResults","teamWork","lastDay","lastWork","baseWorkPlans","trackPlan","workMap","workItem","disableTracks","disableVelocity","SUMMARY","previousWorkPlan","gridRowStart","gridRowSpan","span","previousTrack","lastPlan","gridifyWorkPlans","canRemoveTrack","tracksCount","third","workIndexDependentStyles","itemsCount","svgRect","svgPoint","y","getTopLeft","elementsAndWorkMap","getElementsByClassName","blockerPoint","minusPoint","getCenterRight","blockingPath","makeCurveBetweenPoints","getCenterLeft","showDependencies","highlightDependencies","hideDependencies","unhighlightDependencies","pointA","pointB","controlDistance","getPath","baseIssueKey","updateTeamAndParentRollups","hierarchyLevels","getParent","teamRollup","hierarchyLevel","hierarchyLevelObject","teams","aboveEpic","total","noEpics","onlyUnestimated","someEstimatedEpics","fullyEstimated","estimated","ensureHierarchyLevelObjectAndTeamRollup","updateRollup","rollups","responseToJSON","ok","payload","responseToText","nativeFetchJSON","fetch","JiraOIDCHelpers","JIRA_CLIENT_ID","JIRA_SCOPE","JIRA_CALLBACK_URL","JIRA_API_URL","fieldsRequest","fetchJSON","makeDeepChildrenLoaderUsingNamedFields","rootMethod","fetchDeepChildren","sourceParentIssues","batchedFirstResponses","parentIssues","chunkedArr","chunkArray","jql","fetchChildrenResponses","deepChildrenIssues","batchedIssueRequests","firstBatchPromise","newParams","nameMap","issuesRequested","issuesReceived","changeLogsRequested","changeLogsReceived","allChildrenIssues","mapIdsToNames","jiraHelpers","saveInformationToLocalStorage","parameters","objectKeys","fetchFromLocalStorage","fetchAuthorizationCode","escape","refreshAccessToken","accessCode","accessToken","expiryTimestamp","refreshToken","fetchAccessTokenWithAuthCode","authCode","scopeId","addOnQuery","fetchAccessibleResources","passedAccessToken","Authorization","fetchJiraSprint","sprintId","scopeIdForJira","fetchJiraIssue","issueId","editJiraIssueWithNamedFields","editBody","fieldMapping","fieldsToEditBody","Accept","fetchJiraIssuesWithJQL","URLSearchParams","fetchAllJiraIssuesWithJQL","limit","apiParams","firstRequest","maxResults","startAt","limitOrTotal","responses","fetchAllJiraIssuesWithJQLUsingNamedFields","fetchJiraChangelog","issueIdOrKey","isChangelogComplete","histories","fetchRemainingChangelogsForIssues","fetchRemainingChangelogsForIssue","mostRecentChangeLog","fetchAllJiraIssuesWithJQLAndFetchAllChangelog","getRemainingChangeLogsForIssues","expand","fetchAllJiraIssuesWithJQLAndFetchAllChangelogUsingNamedFields","fetchJiraFields","getAccessToken","hasValidAccessToken","hasAccessToken","getServerInfo","mapped","idMap","fetchAllJiraIssuesAndDeepChildrenWithJQLUsingNamedFields","fetchAllJiraIssuesAndDeepChildrenWithJQLAndFetchAllChangelogUsingNamedFields","showing","aboveEpicTypeName","reportingData","hierarchyLevelReportingData","issuesWithRollup","issueKeyToIssue","makeGetParent","isEstimated","getReportingData","levelA","levelB","downloadCSV","rawData","rowsData","flattenRollups","issueType","IssueType","RollupType","Team","teamName","csvContent","rows","header","convertToCSV","blob","Blob","download","createObjectURL","visibility","click","updateEpicsPromise","JiraAutoScheduler","showSavingModal","showingFullscreen","issueUpdates","dateThreshold","dateThresholds","issueJQL","loadChildren","nowUTC","workLimit","limitIssues","workItems","tooltip","dialog","loginComponent","configPromise","fieldsPromise","isLoggedIn","csvIssuesPromise","hackToRefreshIssues","login","serverInfoPromise","issuesPromise","csvIssues","velocitiesJSON","closeModalAndRefreshIssues","addWorkPlanForTeam","removeWorkPlanForTeam","updateFields","startSaveDates","updateEpics","showModal","toggleFullscreen","toggle","now","JiraLogin","logout","resourceSelection","pillClass","SelectCloud","canQuery","accessibleResources","resources","currentCloudId","currentResource","alternateResources","showResources","simpleTooltip","setResource","reload","main","selectCloud","mainElement","report"],"mappings":"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"}